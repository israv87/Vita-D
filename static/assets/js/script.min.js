/*!
 * ApexCharts v3.48.0
 * (c) 2018-2024 ApexCharts
 * Released under the MIT License.
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).ApexCharts=e()}(this,(function(){"use strict";function t(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function e(e){for(var n=1;n<arguments.length;n++){var i=null!=arguments[n]?arguments[n]:{};n%2?t(Object(i),!0).forEach((function(t){a(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):t(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}function n(t){return n="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},n(t)}function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}function o(t,e,n){return e&&r(t.prototype,e),n&&r(t,n),t}function a(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),e&&c(t,e)}function l(t){return l=Object.setPrototypeOf?Object.getPrototypeOf:function(t){return t.__proto__||Object.getPrototypeOf(t)},l(t)}function c(t,e){return c=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t},c(t,e)}function u(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function h(t){var e=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(t){return!1}}();return function(){var n,i=l(t);if(e){var r=l(this).constructor;n=Reflect.construct(i,arguments,r)}else n=i.apply(this,arguments);return function(t,e){if(e&&("object"==typeof e||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return u(t)}(this,n)}}function d(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,o=[],a=!0,s=!1;try{for(n=n.call(t);!(a=(i=n.next()).done)&&(o.push(i.value),!e||o.length!==e);a=!0);}catch(t){s=!0,r=t}finally{try{a||null==n.return||n.return()}finally{if(s)throw r}}return o}}(t,e)||f(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function p(t){return function(t){if(Array.isArray(t))return g(t)}(t)||function(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||f(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function f(t,e){if(t){if("string"==typeof t)return g(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?g(t,e):void 0}}function g(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}var m=function(){function t(){i(this,t)}return o(t,[{key:"shadeRGBColor",value:function(t,e){var n=e.split(","),i=t<0?0:255,r=t<0?-1*t:t,o=parseInt(n[0].slice(4),10),a=parseInt(n[1],10),s=parseInt(n[2],10);return"rgb("+(Math.round((i-o)*r)+o)+","+(Math.round((i-a)*r)+a)+","+(Math.round((i-s)*r)+s)+")"}},{key:"shadeHexColor",value:function(t,e){var n=parseInt(e.slice(1),16),i=t<0?0:255,r=t<0?-1*t:t,o=n>>16,a=n>>8&255,s=255&n;return"#"+(16777216+65536*(Math.round((i-o)*r)+o)+256*(Math.round((i-a)*r)+a)+(Math.round((i-s)*r)+s)).toString(16).slice(1)}},{key:"shadeColor",value:function(e,n){return t.isColorHex(n)?this.shadeHexColor(e,n):this.shadeRGBColor(e,n)}}],[{key:"bind",value:function(t,e){return function(){return t.apply(e,arguments)}}},{key:"isObject",value:function(t){return t&&"object"===n(t)&&!Array.isArray(t)&&null!=t}},{key:"is",value:function(t,e){return Object.prototype.toString.call(e)==="[object "+t+"]"}},{key:"listToArray",value:function(t){var e,n=[];for(e=0;e<t.length;e++)n[e]=t[e];return n}},{key:"extend",value:function(t,e){var n=this;"function"!=typeof Object.assign&&(Object.assign=function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var e=Object(t),n=1;n<arguments.length;n++){var i=arguments[n];if(null!=i)for(var r in i)i.hasOwnProperty(r)&&(e[r]=i[r])}return e});var i=Object.assign({},t);return this.isObject(t)&&this.isObject(e)&&Object.keys(e).forEach((function(r){n.isObject(e[r])&&r in t?i[r]=n.extend(t[r],e[r]):Object.assign(i,a({},r,e[r]))})),i}},{key:"extendArray",value:function(e,n){var i=[];return e.map((function(e){i.push(t.extend(n,e))})),i}},{key:"monthMod",value:function(t){return t%12}},{key:"clone",value:function(e){if(t.is("Array",e)){for(var i=[],r=0;r<e.length;r++)i[r]=this.clone(e[r]);return i}if(t.is("Null",e))return null;if(t.is("Date",e))return e;if("object"===n(e)){var o={};for(var a in e)e.hasOwnProperty(a)&&(o[a]=this.clone(e[a]));return o}return e}},{key:"log10",value:function(t){return Math.log(t)/Math.LN10}},{key:"roundToBase10",value:function(t){return Math.pow(10,Math.floor(Math.log10(t)))}},{key:"roundToBase",value:function(t,e){return Math.pow(e,Math.floor(Math.log(t)/Math.log(e)))}},{key:"parseNumber",value:function(t){return null===t?t:parseFloat(t)}},{key:"stripNumber",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return Number.isInteger(t)?t:parseFloat(t.toPrecision(e))}},{key:"randomId",value:function(){return(Math.random()+1).toString(36).substring(4)}},{key:"noExponents",value:function(t){var e=String(t).split(/[eE]/);if(1===e.length)return e[0];var n="",i=t<0?"-":"",r=e[0].replace(".",""),o=Number(e[1])+1;if(o<0){for(n=i+"0.";o++;)n+="0";return n+r.replace(/^-/,"")}for(o-=r.length;o--;)n+="0";return r+n}},{key:"getDimensions",value:function(t){var e=getComputedStyle(t,null),n=t.clientHeight,i=t.clientWidth;return n-=parseFloat(e.paddingTop)+parseFloat(e.paddingBottom),[i-=parseFloat(e.paddingLeft)+parseFloat(e.paddingRight),n]}},{key:"getBoundingClientRect",value:function(t){var e=t.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:t.clientWidth,height:t.clientHeight,x:e.left,y:e.top}}},{key:"getLargestStringFromArr",value:function(t){return t.reduce((function(t,e){return Array.isArray(e)&&(e=e.reduce((function(t,e){return t.length>e.length?t:e}))),t.length>e.length?t:e}),0)}},{key:"hexToRgba",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"#999999",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:.6;"#"!==t.substring(0,1)&&(t="#999999");var n=t.replace("#","");n=n.match(new RegExp("(.{"+n.length/3+"})","g"));for(var i=0;i<n.length;i++)n[i]=parseInt(1===n[i].length?n[i]+n[i]:n[i],16);return void 0!==e&&n.push(e),"rgba("+n.join(",")+")"}},{key:"getOpacityFromRGBA",value:function(t){return parseFloat(t.replace(/^.*,(.+)\)/,"$1"))}},{key:"rgb2hex",value:function(t){return(t=t.match(/^rgba?[\s+]?\([\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?,[\s+]?(\d+)[\s+]?/i))&&4===t.length?"#"+("0"+parseInt(t[1],10).toString(16)).slice(-2)+("0"+parseInt(t[2],10).toString(16)).slice(-2)+("0"+parseInt(t[3],10).toString(16)).slice(-2):""}},{key:"isColorHex",value:function(t){return/(^#[0-9A-F]{6}$)|(^#[0-9A-F]{3}$)|(^#[0-9A-F]{8}$)/i.test(t)}},{key:"getPolygonPos",value:function(t,e){for(var n=[],i=2*Math.PI/e,r=0;r<e;r++){var o={};o.x=t*Math.sin(r*i),o.y=-t*Math.cos(r*i),n.push(o)}return n}},{key:"polarToCartesian",value:function(t,e,n,i){var r=(i-90)*Math.PI/180;return{x:t+n*Math.cos(r),y:e+n*Math.sin(r)}}},{key:"escapeString",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"x",n=t.toString().slice();return n.replace(/[` ~!@#$%^&*()|+\=?;:'",.<>{}[\]\\/]/gi,e)}},{key:"negToZero",value:function(t){return t<0?0:t}},{key:"moveIndexInArray",value:function(t,e,n){if(n>=t.length)for(var i=n-t.length+1;i--;)t.push(void 0);return t.splice(n,0,t.splice(e,1)[0]),t}},{key:"extractNumber",value:function(t){return parseFloat(t.replace(/[^\d.]*/g,""))}},{key:"findAncestor",value:function(t,e){for(;(t=t.parentElement)&&!t.classList.contains(e););return t}},{key:"setELstyles",value:function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t.style.key=e[n])}},{key:"isNumber",value:function(t){return!isNaN(t)&&parseFloat(Number(t))===t&&!isNaN(parseInt(t,10))}},{key:"isFloat",value:function(t){return Number(t)===t&&t%1!=0}},{key:"isSafari",value:function(){return/^((?!chrome|android).)*safari/i.test(navigator.userAgent)}},{key:"isFirefox",value:function(){return navigator.userAgent.toLowerCase().indexOf("firefox")>-1}},{key:"isIE11",value:function(){if(-1!==window.navigator.userAgent.indexOf("MSIE")||window.navigator.appVersion.indexOf("Trident/")>-1)return!0}},{key:"isIE",value:function(){var t=window.navigator.userAgent,e=t.indexOf("MSIE ");if(e>0)return parseInt(t.substring(e+5,t.indexOf(".",e)),10);if(t.indexOf("Trident/")>0){var n=t.indexOf("rv:");return parseInt(t.substring(n+3,t.indexOf(".",n)),10)}var i=t.indexOf("Edge/");return i>0&&parseInt(t.substring(i+5,t.indexOf(".",i)),10)}},{key:"getGCD",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:7,i=Math.pow(10,n-Math.floor(Math.log10(Math.max(t,e))));for(t=Math.round(Math.abs(t)*i),e=Math.round(Math.abs(e)*i);e;){var r=e;e=t%e,t=r}return t/i}},{key:"getPrimeFactors",value:function(t){for(var e=[],n=2;t>=2;)t%n==0?(e.push(n),t/=n):n++;return e}},{key:"mod",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:7,i=Math.pow(10,n-Math.floor(Math.log10(Math.max(t,e))));return(t=Math.round(Math.abs(t)*i))%(e=Math.round(Math.abs(e)*i))/i}}]),t}(),v=function(){function t(e){i(this,t),this.ctx=e,this.w=e.w,this.setEasingFunctions()}return o(t,[{key:"setEasingFunctions",value:function(){var t;if(!this.w.globals.easing){switch(this.w.config.chart.animations.easing){case"linear":t="-";break;case"easein":t="<";break;case"easeout":t=">";break;case"easeinout":default:t="<>";break;case"swing":t=function(t){var e=1.70158;return(t-=1)*t*((e+1)*t+e)+1};break;case"bounce":t=function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375};break;case"elastic":t=function(t){return t===!!t?t:Math.pow(2,-10*t)*Math.sin((t-.075)*(2*Math.PI)/.3)+1}}this.w.globals.easing=t}}},{key:"animateLine",value:function(t,e,n,i){t.attr(e).animate(i).attr(n)}},{key:"animateMarker",value:function(t,e,n,i,r,o){e||(e=0),t.attr({r:e,width:e,height:e}).animate(i,r).attr({r:n,width:n.width,height:n.height}).afterAll((function(){o()}))}},{key:"animateCircle",value:function(t,e,n,i,r){t.attr({r:e.r,cx:e.cx,cy:e.cy}).animate(i,r).attr({r:n.r,cx:n.cx,cy:n.cy})}},{key:"animateRect",value:function(t,e,n,i,r){t.attr(e).animate(i).attr(n).afterAll((function(){return r()}))}},{key:"animatePathsGradually",value:function(t){var e=t.el,n=t.realIndex,i=t.j,r=t.fill,o=t.pathFrom,a=t.pathTo,s=t.speed,l=t.delay,c=this.w,u=0;c.config.chart.animations.animateGradually.enabled&&(u=c.config.chart.animations.animateGradually.delay),c.config.chart.animations.dynamicAnimation.enabled&&c.globals.dataChanged&&"bar"!==c.config.chart.type&&(u=0),this.morphSVG(e,n,i,"line"!==c.config.chart.type||c.globals.comboCharts?r:"stroke",o,a,s,l*u)}},{key:"showDelayedElements",value:function(){this.w.globals.delayedElements.forEach((function(t){var e=t.el;e.classList.remove("apexcharts-element-hidden"),e.classList.add("apexcharts-hidden-element-shown")}))}},{key:"animationCompleted",value:function(t){var e=this.w;e.globals.animationEnded||(e.globals.animationEnded=!0,this.showDelayedElements(),"function"==typeof e.config.chart.events.animationEnd&&e.config.chart.events.animationEnd(this.ctx,{el:t,w:e}))}},{key:"morphSVG",value:function(t,e,n,i,r,o,a,s){var l=this,c=this.w;r||(r=t.attr("pathFrom")),o||(o=t.attr("pathTo"));var u=function(t){return"radar"===c.config.chart.type&&(a=1),"M 0 ".concat(c.globals.gridHeight)};(!r||r.indexOf("undefined")>-1||r.indexOf("NaN")>-1)&&(r=u()),(!o||o.indexOf("undefined")>-1||o.indexOf("NaN")>-1)&&(o=u()),c.globals.shouldAnimate||(a=1),t.plot(r).animate(1,c.globals.easing,s).plot(r).animate(a,c.globals.easing,s).plot(o).afterAll((function(){m.isNumber(n)?n===c.globals.series[c.globals.maxValsInArrayIndex].length-2&&c.globals.shouldAnimate&&l.animationCompleted(t):"none"!==i&&c.globals.shouldAnimate&&(!c.globals.comboCharts&&e===c.globals.series.length-1||c.globals.comboCharts)&&l.animationCompleted(t),l.showDelayedElements()}))}}]),t}(),y=function(){function t(e){i(this,t),this.ctx=e,this.w=e.w}return o(t,[{key:"getDefaultFilter",value:function(t,e){var n=this.w;t.unfilter(!0),(new window.SVG.Filter).size("120%","180%","-5%","-40%"),"none"!==n.config.states.normal.filter?this.applyFilter(t,e,n.config.states.normal.filter.type,n.config.states.normal.filter.value):n.config.chart.dropShadow.enabled&&this.dropShadow(t,n.config.chart.dropShadow,e)}},{key:"addNormalFilter",value:function(t,e){var n=this.w;n.config.chart.dropShadow.enabled&&!t.node.classList.contains("apexcharts-marker")&&this.dropShadow(t,n.config.chart.dropShadow,e)}},{key:"addLightenFilter",value:function(t,e,n){var i=this,r=this.w,o=n.intensity;t.unfilter(!0),new window.SVG.Filter,t.filter((function(t){var n=r.config.chart.dropShadow;(n.enabled?i.addShadow(t,e,n):t).componentTransfer({rgb:{type:"linear",slope:1.5,intercept:o}})})),t.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(t.filterer.node)}},{key:"addDarkenFilter",value:function(t,e,n){var i=this,r=this.w,o=n.intensity;t.unfilter(!0),new window.SVG.Filter,t.filter((function(t){var n=r.config.chart.dropShadow;(n.enabled?i.addShadow(t,e,n):t).componentTransfer({rgb:{type:"linear",slope:o}})})),t.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(t.filterer.node)}},{key:"applyFilter",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.5;switch(n){case"none":this.addNormalFilter(t,e);break;case"lighten":this.addLightenFilter(t,e,{intensity:i});break;case"darken":this.addDarkenFilter(t,e,{intensity:i})}}},{key:"addShadow",value:function(t,e,n){var i,r=this.w,o=n.blur,a=n.top,s=n.left,l=n.color,c=n.opacity;if((null===(i=r.config.chart.dropShadow.enabledOnSeries)||void 0===i?void 0:i.length)>0&&-1===r.config.chart.dropShadow.enabledOnSeries.indexOf(e))return t;var u=t.flood(Array.isArray(l)?l[e]:l,c).composite(t.sourceAlpha,"in").offset(s,a).gaussianBlur(o).merge(t.source);return t.blend(t.source,u)}},{key:"dropShadow",value:function(t,e){var n,i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=e.top,a=e.left,s=e.blur,l=e.color,c=e.opacity,u=e.noUserSpaceOnUse,h=this.w;return t.unfilter(!0),m.isIE()&&"radialBar"===h.config.chart.type||(null===(n=h.config.chart.dropShadow.enabledOnSeries)||void 0===n?void 0:n.length)>0&&-1===(null===(i=h.config.chart.dropShadow.enabledOnSeries)||void 0===i?void 0:i.indexOf(r))||(l=Array.isArray(l)?l[r]:l,t.filter((function(t){var e;e=m.isSafari()||m.isFirefox()||m.isIE()?t.flood(l,c).composite(t.sourceAlpha,"in").offset(a,o).gaussianBlur(s):t.flood(l,c).composite(t.sourceAlpha,"in").offset(a,o).gaussianBlur(s).merge(t.source),t.blend(t.source,e)})),u||t.filterer.node.setAttribute("filterUnits","userSpaceOnUse"),this._scaleFilterSize(t.filterer.node)),t}},{key:"setSelectionFilter",value:function(t,e,n){var i=this.w;if(void 0!==i.globals.selectedDataPoints[e]&&i.globals.selectedDataPoints[e].indexOf(n)>-1){t.node.setAttribute("selected",!0);var r=i.config.states.active.filter;"none"!==r&&this.applyFilter(t,e,r.type,r.value)}}},{key:"_scaleFilterSize",value:function(t){!function(e){for(var n in e)e.hasOwnProperty(n)&&t.setAttribute(n,e[n])}({width:"200%",height:"200%",x:"-50%",y:"-50%"})}}]),t}(),b=function(){function t(e){i(this,t),this.ctx=e,this.w=e.w}return o(t,[{key:"roundPathCorners",value:function(t,e){function n(t,e,n){var r=e.x-t.x,o=e.y-t.y,a=Math.sqrt(r*r+o*o);return i(t,e,Math.min(1,n/a))}function i(t,e,n){return{x:t.x+(e.x-t.x)*n,y:t.y+(e.y-t.y)*n}}function r(t,e){t.length>2&&(t[t.length-2]=e.x,t[t.length-1]=e.y)}function o(t){return{x:parseFloat(t[t.length-2]),y:parseFloat(t[t.length-1])}}t.indexOf("NaN")>-1&&(t="");var a=t.split(/[,\s]/).reduce((function(t,e){var n=e.match("([a-zA-Z])(.+)");return n?(t.push(n[1]),t.push(n[2])):t.push(e),t}),[]).reduce((function(t,e){return parseFloat(e)==e&&t.length?t[t.length-1].push(e):t.push([e]),t}),[]),s=[];if(a.length>1){var l=o(a[0]),c=null;"Z"==a[a.length-1][0]&&a[0].length>2&&(c=["L",l.x,l.y],a[a.length-1]=c),s.push(a[0]);for(var u=1;u<a.length;u++){var h=s[s.length-1],d=a[u],p=d==c?a[1]:a[u+1];if(p&&h&&h.length>2&&"L"==d[0]&&p.length>2&&"L"==p[0]){var f,g,m=o(h),v=o(d),y=o(p);f=n(v,m,e),g=n(v,y,e),r(d,f),d.origPoint=v,s.push(d);var b=i(f,v,.5),x=i(v,g,.5),_=["C",b.x,b.y,x.x,x.y,g.x,g.y];_.origPoint=v,s.push(_)}else s.push(d)}if(c){var w=o(s[s.length-1]);s.push(["Z"]),r(s[0],w)}}else s=a;return s.reduce((function(t,e){return t+e.join(" ")+" "}),"")}},{key:"drawLine",value:function(t,e,n,i){var r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"#a8a8a8",o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:"butt";return this.w.globals.dom.Paper.line().attr({x1:t,y1:e,x2:n,y2:i,stroke:r,"stroke-dasharray":o,"stroke-width":a,"stroke-linecap":s})}},{key:"drawRect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0,o=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"#fefefe",a=arguments.length>6&&void 0!==arguments[6]?arguments[6]:1,s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,l=arguments.length>8&&void 0!==arguments[8]?arguments[8]:null,c=arguments.length>9&&void 0!==arguments[9]?arguments[9]:0,u=this.w.globals.dom.Paper.rect();return u.attr({x:t,y:e,width:n>0?n:0,height:i>0?i:0,rx:r,ry:r,opacity:a,"stroke-width":null!==s?s:0,stroke:null!==l?l:"none","stroke-dasharray":c}),u.node.setAttribute("fill",o),u}},{key:"drawPolygon",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"#e1e1e1",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"none";return this.w.globals.dom.Paper.polygon(t).attr({fill:i,stroke:e,"stroke-width":n})}},{key:"drawCircle",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;t<0&&(t=0);var n=this.w.globals.dom.Paper.circle(2*t);return null!==e&&n.attr(e),n}},{key:"drawPath",value:function(t){var e=t.d,n=void 0===e?"":e,i=t.stroke,r=void 0===i?"#a8a8a8":i,o=t.strokeWidth,a=void 0===o?1:o,s=t.fill,l=t.fillOpacity,c=void 0===l?1:l,u=t.strokeOpacity,h=void 0===u?1:u,d=t.classes,p=t.strokeLinecap,f=void 0===p?null:p,g=t.strokeDashArray,m=void 0===g?0:g,v=this.w;return null===f&&(f=v.config.stroke.lineCap),(n.indexOf("undefined")>-1||n.indexOf("NaN")>-1)&&(n="M 0 ".concat(v.globals.gridHeight)),v.globals.dom.Paper.path(n).attr({fill:s,"fill-opacity":c,stroke:r,"stroke-opacity":h,"stroke-linecap":f,"stroke-width":a,"stroke-dasharray":m,class:d})}},{key:"group",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.w.globals.dom.Paper.group();return null!==t&&e.attr(t),e}},{key:"move",value:function(t,e){return["M",t,e].join(" ")}},{key:"line",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=null;return null===n?i=[" L",t,e].join(" "):"H"===n?i=[" H",t].join(" "):"V"===n&&(i=[" V",e].join(" ")),i}},{key:"curve",value:function(t,e,n,i,r,o){return["C",t,e,n,i,r,o].join(" ")}},{key:"quadraticCurve",value:function(t,e,n,i){return["Q",t,e,n,i].join(" ")}},{key:"arc",value:function(t,e,n,i,r,o,a){var s="A";arguments.length>7&&void 0!==arguments[7]&&arguments[7]&&(s="a");var l=[s,t,e,n,i,r,o,a].join(" ");return l}},{key:"renderPaths",value:function(t){var n,i=t.j,r=t.realIndex,o=t.pathFrom,a=t.pathTo,s=t.stroke,l=t.strokeWidth,c=t.strokeLinecap,u=t.fill,h=t.animationDelay,d=t.initialSpeed,p=t.dataChangeSpeed,f=t.className,g=t.shouldClipToGrid,m=void 0===g||g,b=t.bindEventsOnPaths,x=void 0===b||b,_=t.drawShadow,w=void 0===_||_,S=this.w,C=new y(this.ctx),k=new v(this.ctx),A=this.w.config.chart.animations.enabled,M=A&&this.w.config.chart.animations.dynamicAnimation.enabled,T=!!(A&&!S.globals.resized||M&&S.globals.dataChanged&&S.globals.shouldAnimate);T?n=o:(n=a,S.globals.animationEnded=!0);var I,E=S.config.stroke.dashArray;I=Array.isArray(E)?E[r]:S.config.stroke.dashArray;var O=this.drawPath({d:n,stroke:s,strokeWidth:l,fill:u,fillOpacity:1,classes:f,strokeLinecap:c,strokeDashArray:I});if(O.attr("index",r),m&&O.attr({"clip-path":"url(#gridRectMask".concat(S.globals.cuid,")")}),"none"!==S.config.states.normal.filter.type)C.getDefaultFilter(O,r);else if(S.config.chart.dropShadow.enabled&&w){var D=S.config.chart.dropShadow;C.dropShadow(O,D,r)}x&&(O.node.addEventListener("mouseenter",this.pathMouseEnter.bind(this,O)),O.node.addEventListener("mouseleave",this.pathMouseLeave.bind(this,O)),O.node.addEventListener("mousedown",this.pathMouseDown.bind(this,O))),O.attr({pathTo:a,pathFrom:o});var L={el:O,j:i,realIndex:r,pathFrom:o,pathTo:a,fill:u,strokeWidth:l,delay:h};return!A||S.globals.resized||S.globals.dataChanged?!S.globals.resized&&S.globals.dataChanged||k.showDelayedElements():k.animatePathsGradually(e(e({},L),{},{speed:d})),S.globals.dataChanged&&M&&T&&k.animatePathsGradually(e(e({},L),{},{speed:p})),O}},{key:"drawPattern",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"#a8a8a8",r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:0;return this.w.globals.dom.Paper.pattern(e,n,(function(o){"horizontalLines"===t?o.line(0,0,n,0).stroke({color:i,width:r+1}):"verticalLines"===t?o.line(0,0,0,e).stroke({color:i,width:r+1}):"slantedLines"===t?o.line(0,0,e,n).stroke({color:i,width:r}):"squares"===t?o.rect(e,n).fill("none").stroke({color:i,width:r}):"circles"===t&&o.circle(e).fill("none").stroke({color:i,width:r})}))}},{key:"drawGradient",value:function(t,e,n,i,r){var o,a=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:null,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:null,c=arguments.length>8&&void 0!==arguments[8]?arguments[8]:0,u=this.w;e.length<9&&0===e.indexOf("#")&&(e=m.hexToRgba(e,i)),n.length<9&&0===n.indexOf("#")&&(n=m.hexToRgba(n,r));var h=0,d=1,p=1,f=null;null!==s&&(h=void 0!==s[0]?s[0]/100:0,d=void 0!==s[1]?s[1]/100:1,p=void 0!==s[2]?s[2]/100:1,f=void 0!==s[3]?s[3]/100:null);var g=!("donut"!==u.config.chart.type&&"pie"!==u.config.chart.type&&"polarArea"!==u.config.chart.type&&"bubble"!==u.config.chart.type);if(o=null===l||0===l.length?u.globals.dom.Paper.gradient(g?"radial":"linear",(function(t){t.at(h,e,i),t.at(d,n,r),t.at(p,n,r),null!==f&&t.at(f,e,i)})):u.globals.dom.Paper.gradient(g?"radial":"linear",(function(t){(Array.isArray(l[c])?l[c]:l).forEach((function(e){t.at(e.offset/100,e.color,e.opacity)}))})),g){var v=u.globals.gridWidth/2,y=u.globals.gridHeight/2;"bubble"!==u.config.chart.type?o.attr({gradientUnits:"userSpaceOnUse",cx:v,cy:y,r:a}):o.attr({cx:.5,cy:.5,r:.8,fx:.2,fy:.2})}else"vertical"===t?o.from(0,0).to(0,1):"diagonal"===t?o.from(0,0).to(1,1):"horizontal"===t?o.from(0,1).to(1,1):"diagonal2"===t&&o.from(1,0).to(0,1);return o}},{key:"getTextBasedOnMaxWidth",value:function(t){var e=t.text,n=t.maxWidth,i=t.fontSize,r=t.fontFamily,o=this.getTextRects(e,i,r),a=o.width/e.length,s=Math.floor(n/a);return n<o.width?e.slice(0,s-3)+"...":e}},{key:"drawText",value:function(t){var n=this,i=t.x,r=t.y,o=t.text,a=t.textAnchor,s=t.fontSize,l=t.fontFamily,c=t.fontWeight,u=t.foreColor,h=t.opacity,d=t.maxWidth,p=t.cssClass,f=void 0===p?"":p,g=t.isPlainText,m=void 0===g||g,v=t.dominantBaseline,y=void 0===v?"auto":v,b=this.w;void 0===o&&(o="");var x=o;a||(a="start"),u&&u.length||(u=b.config.chart.foreColor),l=l||b.config.chart.fontFamily,c=c||"regular";var _,w={maxWidth:d,fontSize:s=s||"11px",fontFamily:l};return Array.isArray(o)?_=b.globals.dom.Paper.text((function(t){for(var i=0;i<o.length;i++)x=o[i],d&&(x=n.getTextBasedOnMaxWidth(e({text:o[i]},w))),0===i?t.tspan(x):t.tspan(x).newLine()})):(d&&(x=this.getTextBasedOnMaxWidth(e({text:o},w))),_=m?b.globals.dom.Paper.plain(o):b.globals.dom.Paper.text((function(t){return t.tspan(x)}))),_.attr({x:i,y:r,"text-anchor":a,"dominant-baseline":y,"font-size":s,"font-family":l,"font-weight":c,fill:u,class:"apexcharts-text "+f}),_.node.style.fontFamily=l,_.node.style.opacity=h,_}},{key:"createGroupWithAttributes",value:function(t,e,n,i){var r=this.group();return n.forEach((function(t){return r.add(t)})),r.attr({class:i.class?i.class:"",cy:e,cx:t}),r}},{key:"drawPlus",value:function(t,e,n,i){var r=n/2,o=this.drawLine(t,e-r,t,e+r,i.pointStrokeColor,i.pointStrokeDashArray,i.pointStrokeWidth,i.pointStrokeLineCap),a=this.drawLine(t-r,e,t+r,e,i.pointStrokeColor,i.pointStrokeDashArray,i.pointStrokeWidth,i.pointStrokeLineCap);return this.createGroupWithAttributes(t,e,[o,a],i)}},{key:"drawX",value:function(t,e,n,i){var r=n/2,o=this.drawLine(t-r,e-r,t+r,e+r,i.pointStrokeColor,i.pointStrokeDashArray,i.pointStrokeWidth,i.pointStrokeLineCap),a=this.drawLine(t-r,e+r,t+r,e-r,i.pointStrokeColor,i.pointStrokeDashArray,i.pointStrokeWidth,i.pointStrokeLineCap);return this.createGroupWithAttributes(t,e,[o,a],i)}},{key:"drawMarker",value:function(t,e,n){t=t||0;var i=n.pSize||0,r=null;if("X"===(null==n?void 0:n.shape)||"x"===(null==n?void 0:n.shape))r=this.drawX(t,e,i,n);else if("plus"===(null==n?void 0:n.shape)||"+"===(null==n?void 0:n.shape))r=this.drawPlus(t,e,i,n);else if("square"===n.shape||"rect"===n.shape){var o=void 0===n.pRadius?i/2:n.pRadius;null!==e&&i||(i=0,o=0);var a=1.2*i+o,s=this.drawRect(a,a,a,a,o);s.attr({x:t-a/2,y:e-a/2,cx:t,cy:e,class:n.class?n.class:"",fill:n.pointFillColor,"fill-opacity":n.pointFillOpacity?n.pointFillOpacity:1,stroke:n.pointStrokeColor,"stroke-width":n.pointStrokeWidth?n.pointStrokeWidth:0,"stroke-opacity":n.pointStrokeOpacity?n.pointStrokeOpacity:1}),r=s}else"circle"!==n.shape&&n.shape||(m.isNumber(e)||(i=0,e=0),r=this.drawCircle(i,{cx:t,cy:e,class:n.class?n.class:"",stroke:n.pointStrokeColor,fill:n.pointFillColor,"fill-opacity":n.pointFillOpacity?n.pointFillOpacity:1,"stroke-width":n.pointStrokeWidth?n.pointStrokeWidth:0,"stroke-opacity":n.pointStrokeOpacity?n.pointStrokeOpacity:1}));return r}},{key:"pathMouseEnter",value:function(t,e){var n=this.w,i=new y(this.ctx),r=parseInt(t.node.getAttribute("index"),10),o=parseInt(t.node.getAttribute("j"),10);if("function"==typeof n.config.chart.events.dataPointMouseEnter&&n.config.chart.events.dataPointMouseEnter(e,this.ctx,{seriesIndex:r,dataPointIndex:o,w:n}),this.ctx.events.fireEvent("dataPointMouseEnter",[e,this.ctx,{seriesIndex:r,dataPointIndex:o,w:n}]),("none"===n.config.states.active.filter.type||"true"!==t.node.getAttribute("selected"))&&"none"!==n.config.states.hover.filter.type&&!n.globals.isTouchDevice){var a=n.config.states.hover.filter;i.applyFilter(t,r,a.type,a.value)}}},{key:"pathMouseLeave",value:function(t,e){var n=this.w,i=new y(this.ctx),r=parseInt(t.node.getAttribute("index"),10),o=parseInt(t.node.getAttribute("j"),10);"function"==typeof n.config.chart.events.dataPointMouseLeave&&n.config.chart.events.dataPointMouseLeave(e,this.ctx,{seriesIndex:r,dataPointIndex:o,w:n}),this.ctx.events.fireEvent("dataPointMouseLeave",[e,this.ctx,{seriesIndex:r,dataPointIndex:o,w:n}]),"none"!==n.config.states.active.filter.type&&"true"===t.node.getAttribute("selected")||"none"!==n.config.states.hover.filter.type&&i.getDefaultFilter(t,r)}},{key:"pathMouseDown",value:function(t,e){var n=this.w,i=new y(this.ctx),r=parseInt(t.node.getAttribute("index"),10),o=parseInt(t.node.getAttribute("j"),10),a="false";if("true"===t.node.getAttribute("selected")){if(t.node.setAttribute("selected","false"),n.globals.selectedDataPoints[r].indexOf(o)>-1){var s=n.globals.selectedDataPoints[r].indexOf(o);n.globals.selectedDataPoints[r].splice(s,1)}}else{if(!n.config.states.active.allowMultipleDataPointsSelection&&n.globals.selectedDataPoints.length>0){n.globals.selectedDataPoints=[];var l=n.globals.dom.Paper.select(".apexcharts-series path").members,c=n.globals.dom.Paper.select(".apexcharts-series circle, .apexcharts-series rect").members,u=function(t){Array.prototype.forEach.call(t,(function(t){t.node.setAttribute("selected","false"),i.getDefaultFilter(t,r)}))};u(l),u(c)}t.node.setAttribute("selected","true"),a="true",void 0===n.globals.selectedDataPoints[r]&&(n.globals.selectedDataPoints[r]=[]),n.globals.selectedDataPoints[r].push(o)}if("true"===a){var h=n.config.states.active.filter;if("none"!==h)i.applyFilter(t,r,h.type,h.value);else if("none"!==n.config.states.hover.filter&&!n.globals.isTouchDevice){var d=n.config.states.hover.filter;i.applyFilter(t,r,d.type,d.value)}}else"none"!==n.config.states.active.filter.type&&("none"===n.config.states.hover.filter.type||n.globals.isTouchDevice?i.getDefaultFilter(t,r):(d=n.config.states.hover.filter,i.applyFilter(t,r,d.type,d.value)));"function"==typeof n.config.chart.events.dataPointSelection&&n.config.chart.events.dataPointSelection(e,this.ctx,{selectedDataPoints:n.globals.selectedDataPoints,seriesIndex:r,dataPointIndex:o,w:n}),e&&this.ctx.events.fireEvent("dataPointSelection",[e,this.ctx,{selectedDataPoints:n.globals.selectedDataPoints,seriesIndex:r,dataPointIndex:o,w:n}])}},{key:"rotateAroundCenter",value:function(t){var e={};return t&&"function"==typeof t.getBBox&&(e=t.getBBox()),{x:e.x+e.width/2,y:e.y+e.height/2}}},{key:"getTextRects",value:function(t,e,n,i){var r=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],o=this.w,a=this.drawText({x:-200,y:-200,text:t,textAnchor:"start",fontSize:e,fontFamily:n,foreColor:"#fff",opacity:0});i&&a.attr("transform",i),o.globals.dom.Paper.add(a);var s=a.bbox();return r||(s=a.node.getBoundingClientRect()),a.remove(),{width:s.width,height:s.height}}},{key:"placeTextWithEllipsis",value:function(t,e,n){if("function"==typeof t.getComputedTextLength&&(t.textContent=e,e.length>0&&t.getComputedTextLength()>=n/1.1)){for(var i=e.length-3;i>0;i-=3)if(t.getSubStringLength(0,i)<=n/1.1)return void(t.textContent=e.substring(0,i)+"...");t.textContent="."}}}],[{key:"setAttrs",value:function(t,e){for(var n in e)e.hasOwnProperty(n)&&t.setAttribute(n,e[n])}}]),t}(),x=function(){function t(e){i(this,t),this.ctx=e,this.w=e.w}return o(t,[{key:"getStackedSeriesTotals",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=this.w,n=[];if(0===e.globals.series.length)return n;for(var i=0;i<e.globals.series[e.globals.maxValsInArrayIndex].length;i++){for(var r=0,o=0;o<e.globals.series.length;o++)void 0!==e.globals.series[o][i]&&-1===t.indexOf(o)&&(r+=e.globals.series[o][i]);n.push(r)}return n}},{key:"getSeriesTotalByIndex",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return null===t?this.w.config.series.reduce((function(t,e){return t+e}),0):this.w.globals.series[t].reduce((function(t,e){return t+e}),0)}},{key:"getStackedSeriesTotalsByGroups",value:function(){var t=this,e=this.w,n=[];return e.globals.seriesGroups.forEach((function(i){var r=[];e.config.series.forEach((function(t,e){i.indexOf(t.name)>-1&&r.push(e)}));var o=e.globals.series.map((function(t,e){return-1===r.indexOf(e)?e:-1})).filter((function(t){return-1!==t}));n.push(t.getStackedSeriesTotals(o))})),n}},{key:"isSeriesNull",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;return 0===(null===t?this.w.config.series.filter((function(t){return null!==t})):this.w.config.series[t].data.filter((function(t){return null!==t}))).length}},{key:"seriesHaveSameValues",value:function(t){return this.w.globals.series[t].every((function(t,e,n){return t===n[0]}))}},{key:"getCategoryLabels",value:function(t){var e=this.w,n=t.slice();return e.config.xaxis.convertedCatToNumeric&&(n=t.map((function(t,n){return e.config.xaxis.labels.formatter(t-e.globals.minX+1)}))),n}},{key:"getLargestSeries",value:function(){var t=this.w;t.globals.maxValsInArrayIndex=t.globals.series.map((function(t){return t.length})).indexOf(Math.max.apply(Math,t.globals.series.map((function(t){return t.length}))))}},{key:"getLargestMarkerSize",value:function(){var t=this.w,e=0;return t.globals.markers.size.forEach((function(t){e=Math.max(e,t)})),t.config.markers.discrete&&t.config.markers.discrete.length&&t.config.markers.discrete.forEach((function(t){e=Math.max(e,t.size)})),e>0&&(e+=t.config.markers.hover.sizeOffset+1),t.globals.markers.largestSize=e,e}},{key:"getSeriesTotals",value:function(){var t=this.w;t.globals.seriesTotals=t.globals.series.map((function(t,e){var n=0;if(Array.isArray(t))for(var i=0;i<t.length;i++)n+=t[i];else n+=t;return n}))}},{key:"getSeriesTotalsXRange",value:function(t,e){var n=this.w;return n.globals.series.map((function(i,r){for(var o=0,a=0;a<i.length;a++)n.globals.seriesX[r][a]>t&&n.globals.seriesX[r][a]<e&&(o+=i[a]);return o}))}},{key:"getPercentSeries",value:function(){var t=this.w;t.globals.seriesPercent=t.globals.series.map((function(e,n){var i=[];if(Array.isArray(e))for(var r=0;r<e.length;r++){var o=t.globals.stackedSeriesTotals[r],a=0;o&&(a=100*e[r]/o),i.push(a)}else{var s=100*e/t.globals.seriesTotals.reduce((function(t,e){return t+e}),0);i.push(s)}return i}))}},{key:"getCalculatedRatios",value:function(){var t,e,n,i=this,r=this.w,o=r.globals,a=[],s=0,l=[],c=.1,u=0;if(o.yRange=[],o.isMultipleYAxis)for(var h=0;h<o.minYArr.length;h++)o.yRange.push(Math.abs(o.minYArr[h]-o.maxYArr[h])),l.push(0);else o.yRange.push(Math.abs(o.minY-o.maxY));o.xRange=Math.abs(o.maxX-o.minX),o.zRange=Math.abs(o.maxZ-o.minZ);for(var d=0;d<o.yRange.length;d++)a.push(o.yRange[d]/o.gridHeight);if(e=o.xRange/o.gridWidth,t=o.yRange/o.gridWidth,n=o.xRange/o.gridHeight,(s=o.zRange/o.gridHeight*16)||(s=1),o.minY!==Number.MIN_VALUE&&0!==Math.abs(o.minY)&&(o.hasNegs=!0),r.globals.seriesYAxisReverseMap.length>0){var p=function(t,e){var n=r.config.yaxis[r.globals.seriesYAxisReverseMap[e]],o=t<0?-1:1;return t=Math.abs(t),n.logarithmic&&(t=i.getBaseLog(n.logBase,t)),-o*t/a[e]};if(o.isMultipleYAxis){l=[];for(var f=0;f<a.length;f++)l.push(p(o.minYArr[f],f))}else(l=[]).push(p(o.minY,0)),o.minY!==Number.MIN_VALUE&&0!==Math.abs(o.minY)&&(c=-o.minY/t,u=o.minX/e)}else(l=[]).push(0),c=0,u=0;return{yRatio:a,invertedYRatio:t,zRatio:s,xRatio:e,invertedXRatio:n,baseLineInvertedY:c,baseLineY:l,baseLineX:u}}},{key:"getLogSeries",value:function(t){var e=this,n=this.w;return n.globals.seriesLog=t.map((function(t,i){var r=n.globals.seriesYAxisReverseMap[i];return n.config.yaxis[r]&&n.config.yaxis[r].logarithmic?t.map((function(t){return null===t?null:e.getLogVal(n.config.yaxis[r].logBase,t,i)})):t})),n.globals.invalidLogScale?t:n.globals.seriesLog}},{key:"getBaseLog",value:function(t,e){return Math.log(e)/Math.log(t)}},{key:"getLogVal",value:function(t,e,n){if(e<=0)return 0;var i=this.w,r=0===i.globals.minYArr[n]?-1:this.getBaseLog(t,i.globals.minYArr[n]),o=(0===i.globals.maxYArr[n]?0:this.getBaseLog(t,i.globals.maxYArr[n]))-r;return e<1?e/o:(this.getBaseLog(t,e)-r)/o}},{key:"getLogYRatios",value:function(t){var e=this,n=this.w,i=this.w.globals;return i.yLogRatio=t.slice(),i.logYRange=i.yRange.map((function(t,r){var o=n.globals.seriesYAxisReverseMap[r];if(n.config.yaxis[o]&&e.w.config.yaxis[o].logarithmic){var a,s=-Number.MAX_VALUE,l=Number.MIN_VALUE;return i.seriesLog.forEach((function(t,e){t.forEach((function(t){n.config.yaxis[e]&&n.config.yaxis[e].logarithmic&&(s=Math.max(t,s),l=Math.min(t,l))}))})),a=Math.pow(i.yRange[r],Math.abs(l-s)/i.yRange[r]),i.yLogRatio[r]=a/i.gridHeight,a}})),i.invalidLogScale?t.slice():i.yLogRatio}}],[{key:"checkComboSeries",value:function(t,e){var n=!1,i=0,r=0;return void 0===e&&(e="line"),t.length&&void 0!==t[0].type&&t.forEach((function(t){"bar"!==t.type&&"column"!==t.type&&"candlestick"!==t.type&&"boxPlot"!==t.type||i++,void 0!==t.type&&t.type!==e&&r++})),r>0&&(n=!0),{comboBarCount:i,comboCharts:n}}},{key:"extendArrayProps",value:function(t,e,n){var i,r,o,a,s,l;return null!==(i=e)&&void 0!==i&&i.yaxis&&(e=t.extendYAxis(e,n)),null!==(r=e)&&void 0!==r&&r.annotations&&(e.annotations.yaxis&&(e=t.extendYAxisAnnotations(e)),null!==(o=e)&&void 0!==o&&null!==(a=o.annotations)&&void 0!==a&&a.xaxis&&(e=t.extendXAxisAnnotations(e)),null!==(s=e)&&void 0!==s&&null!==(l=s.annotations)&&void 0!==l&&l.points&&(e=t.extendPointAnnotations(e))),e}}]),t}(),_=function(){function t(e){i(this,t),this.w=e.w,this.annoCtx=e}return o(t,[{key:"setOrientations",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.w;if("vertical"===t.label.orientation){var i=null!==e?e:0,r=n.globals.dom.baseEl.querySelector(".apexcharts-xaxis-annotations .apexcharts-xaxis-annotation-label[rel='".concat(i,"']"));if(null!==r){var o=r.getBoundingClientRect();r.setAttribute("x",parseFloat(r.getAttribute("x"))-o.height+4),"top"===t.label.position?r.setAttribute("y",parseFloat(r.getAttribute("y"))+o.width):r.setAttribute("y",parseFloat(r.getAttribute("y"))-o.width);var a=this.annoCtx.graphics.rotateAroundCenter(r),s=a.x,l=a.y;r.setAttribute("transform","rotate(-90 ".concat(s," ").concat(l,")"))}}}},{key:"addBackgroundToAnno",value:function(t,e){var n=this.w;if(!t||void 0===e.label.text||void 0!==e.label.text&&!String(e.label.text).trim())return null;var i=n.globals.dom.baseEl.querySelector(".apexcharts-grid").getBoundingClientRect(),r=t.getBoundingClientRect(),o=e.label.style.padding.left,a=e.label.style.padding.right,s=e.label.style.padding.top,l=e.label.style.padding.bottom;"vertical"===e.label.orientation&&(s=e.label.style.padding.left,l=e.label.style.padding.right,o=e.label.style.padding.top,a=e.label.style.padding.bottom);var c=r.left-i.left-o,u=r.top-i.top-s,h=this.annoCtx.graphics.drawRect(c-n.globals.barPadForNumericAxis,u,r.width+o+a,r.height+s+l,e.label.borderRadius,e.label.style.background,1,e.label.borderWidth,e.label.borderColor,0);return e.id&&h.node.classList.add(e.id),h}},{key:"annotationsBackground",value:function(){var t=this,e=this.w,n=function(n,i,r){var o=e.globals.dom.baseEl.querySelector(".apexcharts-".concat(r,"-annotations .apexcharts-").concat(r,"-annotation-label[rel='").concat(i,"']"));if(o){var a=o.parentNode,s=t.addBackgroundToAnno(o,n);s&&(a.insertBefore(s.node,o),n.label.mouseEnter&&s.node.addEventListener("mouseenter",n.label.mouseEnter.bind(t,n)),n.label.mouseLeave&&s.node.addEventListener("mouseleave",n.label.mouseLeave.bind(t,n)),n.label.click&&s.node.addEventListener("click",n.label.click.bind(t,n)))}};e.config.annotations.xaxis.map((function(t,e){n(t,e,"xaxis")})),e.config.annotations.yaxis.map((function(t,e){n(t,e,"yaxis")})),e.config.annotations.points.map((function(t,e){n(t,e,"point")}))}},{key:"getY1Y2",value:function(t,e){var n,i="y1"===t?e.y:e.y2,r=!1,o=this.w;if(this.annoCtx.invertAxis){var a=o.globals.labels;o.config.xaxis.convertedCatToNumeric&&(a=o.globals.categoryLabels);var s=a.indexOf(i),l=o.globals.dom.baseEl.querySelector(".apexcharts-yaxis-texts-g text:nth-child("+(s+1)+")");n=l?parseFloat(l.getAttribute("y")):(o.globals.gridHeight/a.length-1)*(s+1)-o.globals.barHeight,void 0!==e.seriesIndex&&o.globals.barHeight&&(n=n-o.globals.barHeight/2*(o.globals.series.length-1)+o.globals.barHeight*e.seriesIndex)}else{var c,u=o.globals.seriesYAxisMap[e.yAxisIndex][0];(c=o.config.yaxis[e.yAxisIndex].logarithmic?(i=new x(this.annoCtx.ctx).getLogVal(o.config.yaxis[e.yAxisIndex].logBase,i,u))/o.globals.yLogRatio[u]:(i-o.globals.minYArr[u])/(o.globals.yRange[u]/o.globals.gridHeight))>o.globals.gridHeight?(c=o.globals.gridHeight,r=!0):c<0&&(c=0,r=!0),n=o.globals.gridHeight-c,!e.marker||void 0!==e.y&&null!==e.y||(n=0),o.config.yaxis[e.yAxisIndex]&&o.config.yaxis[e.yAxisIndex].reversed&&(n=c)}return"string"==typeof i&&i.indexOf("px")>-1&&(n=parseFloat(i)),{yP:n,clipped:r}}},{key:"getX1X2",value:function(t,e){var n,i="x1"===t?e.x:e.x2,r=this.w,o=this.annoCtx.invertAxis?r.globals.minY:r.globals.minX,a=this.annoCtx.invertAxis?r.globals.maxY:r.globals.maxX,s=this.annoCtx.invertAxis?r.globals.yRange[0]:r.globals.xRange,l=!1;return n=this.annoCtx.inversedReversedAxis?(a-i)/(s/r.globals.gridWidth):(i-o)/(s/r.globals.gridWidth),"category"!==r.config.xaxis.type&&!r.config.xaxis.convertedCatToNumeric||this.annoCtx.invertAxis||r.globals.dataFormatXNumeric||r.config.chart.sparkline.enabled||(n=this.getStringX(i)),"string"==typeof i&&i.indexOf("px")>-1&&(n=parseFloat(i)),null==i&&e.marker&&(n=r.globals.gridWidth),void 0!==e.seriesIndex&&r.globals.barWidth&&!this.annoCtx.invertAxis&&(n=n-r.globals.barWidth/2*(r.globals.series.length-1)+r.globals.barWidth*e.seriesIndex),n>r.globals.gridWidth?(n=r.globals.gridWidth,l=!0):n<0&&(n=0,l=!0),{x:n,clipped:l}}},{key:"getStringX",value:function(t){var e=this.w,n=t;e.config.xaxis.convertedCatToNumeric&&e.globals.categoryLabels.length&&(t=e.globals.categoryLabels.indexOf(t)+1);var i=e.globals.labels.indexOf(t),r=e.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g text:nth-child("+(i+1)+")");return r&&(n=parseFloat(r.getAttribute("x"))),n}}]),t}(),w=function(){function t(e){i(this,t),this.w=e.w,this.annoCtx=e,this.invertAxis=this.annoCtx.invertAxis,this.helpers=new _(this.annoCtx)}return o(t,[{key:"addXaxisAnnotation",value:function(t,e,n){var i,r=this.w,o=this.helpers.getX1X2("x1",t),a=o.x,s=o.clipped,l=!0,c=t.label.text,u=t.strokeDashArray;if(m.isNumber(a)){if(null===t.x2||void 0===t.x2){if(!s){var h=this.annoCtx.graphics.drawLine(a+t.offsetX,0+t.offsetY,a+t.offsetX,r.globals.gridHeight+t.offsetY,t.borderColor,u,t.borderWidth);e.appendChild(h.node),t.id&&h.node.classList.add(t.id)}}else{var d=this.helpers.getX1X2("x2",t);if(i=d.x,l=d.clipped,!s||!l){if(i<a){var p=a;a=i,i=p}var f=this.annoCtx.graphics.drawRect(a+t.offsetX,0+t.offsetY,i-a,r.globals.gridHeight+t.offsetY,0,t.fillColor,t.opacity,1,t.borderColor,u);f.node.classList.add("apexcharts-annotation-rect"),f.attr("clip-path","url(#gridRectMask".concat(r.globals.cuid,")")),e.appendChild(f.node),t.id&&f.node.classList.add(t.id)}}if(!s||!l){var g=this.annoCtx.graphics.getTextRects(c,parseFloat(t.label.style.fontSize)),v="top"===t.label.position?4:"center"===t.label.position?r.globals.gridHeight/2+("vertical"===t.label.orientation?g.width/2:0):r.globals.gridHeight,y=this.annoCtx.graphics.drawText({x:a+t.label.offsetX,y:v+t.label.offsetY-("vertical"===t.label.orientation?"top"===t.label.position?g.width/2-12:-g.width/2:0),text:c,textAnchor:t.label.textAnchor,fontSize:t.label.style.fontSize,fontFamily:t.label.style.fontFamily,fontWeight:t.label.style.fontWeight,foreColor:t.label.style.color,cssClass:"apexcharts-xaxis-annotation-label ".concat(t.label.style.cssClass," ").concat(t.id?t.id:"")});y.attr({rel:n}),e.appendChild(y.node),this.annoCtx.helpers.setOrientations(t,n)}}}},{key:"drawXAxisAnnotations",value:function(){var t=this,e=this.w,n=this.annoCtx.graphics.group({class:"apexcharts-xaxis-annotations"});return e.config.annotations.xaxis.map((function(e,i){t.addXaxisAnnotation(e,n.node,i)})),n}}]),t}(),S=function(){function t(e){i(this,t),this.ctx=e,this.w=e.w,this.months31=[1,3,5,7,8,10,12],this.months30=[2,4,6,9,11],this.daysCntOfYear=[0,31,59,90,120,151,181,212,243,273,304,334]}return o(t,[{key:"isValidDate",value:function(t){return"number"!=typeof t&&!isNaN(this.parseDate(t))}},{key:"getTimeStamp",value:function(t){return Date.parse(t)?this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(t).toISOString().substr(0,25)).getTime():new Date(t).getTime():t}},{key:"getDate",value:function(t){return this.w.config.xaxis.labels.datetimeUTC?new Date(new Date(t).toUTCString()):new Date(t)}},{key:"parseDate",value:function(t){var e=Date.parse(t);if(!isNaN(e))return this.getTimeStamp(t);var n=Date.parse(t.replace(/-/g,"/").replace(/[a-z]+/gi," "));return this.getTimeStamp(n)}},{key:"parseDateWithTimezone",value:function(t){return Date.parse(t.replace(/-/g,"/").replace(/[a-z]+/gi," "))}},{key:"formatDate",value:function(t,e){var n=this.w.globals.locale,i=this.w.config.xaxis.labels.datetimeUTC,r=["\0"].concat(p(n.months)),o=[""].concat(p(n.shortMonths)),a=[""].concat(p(n.days)),s=[""].concat(p(n.shortDays));function l(t,e){var n=t+"";for(e=e||2;n.length<e;)n="0"+n;return n}var c=i?t.getUTCFullYear():t.getFullYear();e=(e=(e=e.replace(/(^|[^\\])yyyy+/g,"$1"+c)).replace(/(^|[^\\])yy/g,"$1"+c.toString().substr(2,2))).replace(/(^|[^\\])y/g,"$1"+c);var u=(i?t.getUTCMonth():t.getMonth())+1;e=(e=(e=(e=e.replace(/(^|[^\\])MMMM+/g,"$1"+r[0])).replace(/(^|[^\\])MMM/g,"$1"+o[0])).replace(/(^|[^\\])MM/g,"$1"+l(u))).replace(/(^|[^\\])M/g,"$1"+u);var h=i?t.getUTCDate():t.getDate();e=(e=(e=(e=e.replace(/(^|[^\\])dddd+/g,"$1"+a[0])).replace(/(^|[^\\])ddd/g,"$1"+s[0])).replace(/(^|[^\\])dd/g,"$1"+l(h))).replace(/(^|[^\\])d/g,"$1"+h);var d=i?t.getUTCHours():t.getHours(),f=d>12?d-12:0===d?12:d;e=(e=(e=(e=e.replace(/(^|[^\\])HH+/g,"$1"+l(d))).replace(/(^|[^\\])H/g,"$1"+d)).replace(/(^|[^\\])hh+/g,"$1"+l(f))).replace(/(^|[^\\])h/g,"$1"+f);var g=i?t.getUTCMinutes():t.getMinutes();e=(e=e.replace(/(^|[^\\])mm+/g,"$1"+l(g))).replace(/(^|[^\\])m/g,"$1"+g);var m=i?t.getUTCSeconds():t.getSeconds();e=(e=e.replace(/(^|[^\\])ss+/g,"$1"+l(m))).replace(/(^|[^\\])s/g,"$1"+m);var v=i?t.getUTCMilliseconds():t.getMilliseconds();e=e.replace(/(^|[^\\])fff+/g,"$1"+l(v,3)),v=Math.round(v/10),e=e.replace(/(^|[^\\])ff/g,"$1"+l(v)),v=Math.round(v/10);var y=d<12?"AM":"PM";e=(e=(e=e.replace(/(^|[^\\])f/g,"$1"+v)).replace(/(^|[^\\])TT+/g,"$1"+y)).replace(/(^|[^\\])T/g,"$1"+y.charAt(0));var b=y.toLowerCase();e=(e=e.replace(/(^|[^\\])tt+/g,"$1"+b)).replace(/(^|[^\\])t/g,"$1"+b.charAt(0));var x=-t.getTimezoneOffset(),_=i||!x?"Z":x>0?"+":"-";if(!i){var w=(x=Math.abs(x))%60;_+=l(Math.floor(x/60))+":"+l(w)}e=e.replace(/(^|[^\\])K/g,"$1"+_);var S=(i?t.getUTCDay():t.getDay())+1;return(e=(e=(e=(e=e.replace(new RegExp(a[0],"g"),a[S])).replace(new RegExp(s[0],"g"),s[S])).replace(new RegExp(r[0],"g"),r[u])).replace(new RegExp(o[0],"g"),o[u])).replace(/\\(.)/g,"$1")}},{key:"getTimeUnitsfromTimestamp",value:function(t,e,n){var i=this.w;void 0!==i.config.xaxis.min&&(t=i.config.xaxis.min),void 0!==i.config.xaxis.max&&(e=i.config.xaxis.max);var r=this.getDate(t),o=this.getDate(e),a=this.formatDate(r,"yyyy MM dd HH mm ss fff").split(" "),s=this.formatDate(o,"yyyy MM dd HH mm ss fff").split(" ");return{minMillisecond:parseInt(a[6],10),maxMillisecond:parseInt(s[6],10),minSecond:parseInt(a[5],10),maxSecond:parseInt(s[5],10),minMinute:parseInt(a[4],10),maxMinute:parseInt(s[4],10),minHour:parseInt(a[3],10),maxHour:parseInt(s[3],10),minDate:parseInt(a[2],10),maxDate:parseInt(s[2],10),minMonth:parseInt(a[1],10)-1,maxMonth:parseInt(s[1],10)-1,minYear:parseInt(a[0],10),maxYear:parseInt(s[0],10)}}},{key:"isLeapYear",value:function(t){return t%4==0&&t%100!=0||t%400==0}},{key:"calculcateLastDaysOfMonth",value:function(t,e,n){return this.determineDaysOfMonths(t,e)-n}},{key:"determineDaysOfYear",value:function(t){var e=365;return this.isLeapYear(t)&&(e=366),e}},{key:"determineRemainingDaysOfYear",value:function(t,e,n){var i=this.daysCntOfYear[e]+n;return e>1&&this.isLeapYear()&&i++,i}},{key:"determineDaysOfMonths",value:function(t,e){var n=30;switch(t=m.monthMod(t),!0){case this.months30.indexOf(t)>-1:2===t&&(n=this.isLeapYear(e)?29:28);break;case this.months31.indexOf(t)>-1:default:n=31}return n}}]),t}(),C=function(){function t(e){i(this,t),this.ctx=e,this.w=e.w,this.tooltipKeyFormat="dd MMM"}return o(t,[{key:"xLabelFormat",value:function(t,e,n,i){var r=this.w;if("datetime"===r.config.xaxis.type&&void 0===r.config.xaxis.labels.formatter&&void 0===r.config.tooltip.x.formatter){var o=new S(this.ctx);return o.formatDate(o.getDate(e),r.config.tooltip.x.format)}return t(e,n,i)}},{key:"defaultGeneralFormatter",value:function(t){return Array.isArray(t)?t.map((function(t){return t})):t}},{key:"defaultYFormatter",value:function(t,e,n){var i=this.w;if(m.isNumber(t))if(0!==i.globals.yValueDecimal)t=t.toFixed(void 0!==e.decimalsInFloat?e.decimalsInFloat:i.globals.yValueDecimal);else{var r=t.toFixed(0);t=t==r?r:t.toFixed(1)}return t}},{key:"setLabelFormatters",value:function(){var t=this,e=this.w;return e.globals.xaxisTooltipFormatter=function(e){return t.defaultGeneralFormatter(e)},e.globals.ttKeyFormatter=function(e){return t.defaultGeneralFormatter(e)},e.globals.ttZFormatter=function(t){return t},e.globals.legendFormatter=function(e){return t.defaultGeneralFormatter(e)},void 0!==e.config.xaxis.labels.formatter?e.globals.xLabelFormatter=e.config.xaxis.labels.formatter:e.globals.xLabelFormatter=function(t){if(m.isNumber(t)){if(!e.config.xaxis.convertedCatToNumeric&&"numeric"===e.config.xaxis.type){if(m.isNumber(e.config.xaxis.decimalsInFloat))return t.toFixed(e.config.xaxis.decimalsInFloat);var n=e.globals.maxX-e.globals.minX;return n>0&&n<100?t.toFixed(1):t.toFixed(0)}return e.globals.isBarHorizontal&&e.globals.maxY-e.globals.minYArr<4?t.toFixed(1):t.toFixed(0)}return t},"function"==typeof e.config.tooltip.x.formatter?e.globals.ttKeyFormatter=e.config.tooltip.x.formatter:e.globals.ttKeyFormatter=e.globals.xLabelFormatter,"function"==typeof e.config.xaxis.tooltip.formatter&&(e.globals.xaxisTooltipFormatter=e.config.xaxis.tooltip.formatter),(Array.isArray(e.config.tooltip.y)||void 0!==e.config.tooltip.y.formatter)&&(e.globals.ttVal=e.config.tooltip.y),void 0!==e.config.tooltip.z.formatter&&(e.globals.ttZFormatter=e.config.tooltip.z.formatter),void 0!==e.config.legend.formatter&&(e.globals.legendFormatter=e.config.legend.formatter),e.config.yaxis.forEach((function(n,i){void 0!==n.labels.formatter?e.globals.yLabelFormatters[i]=n.labels.formatter:e.globals.yLabelFormatters[i]=function(r){return e.globals.xyCharts?Array.isArray(r)?r.map((function(e){return t.defaultYFormatter(e,n,i)})):t.defaultYFormatter(r,n,i):r}})),e.globals}},{key:"heatmapLabelFormatters",value:function(){var t=this.w;if("heatmap"===t.config.chart.type){t.globals.yAxisScale[0].result=t.globals.seriesNames.slice();var e=t.globals.seriesNames.reduce((function(t,e){return t.length>e.length?t:e}),0);t.globals.yAxisScale[0].niceMax=e,t.globals.yAxisScale[0].niceMin=e}}}]),t}(),k=function(){function t(e){i(this,t),this.ctx=e,this.w=e.w}return o(t,[{key:"getLabel",value:function(t,e,n,i){var r,o,a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:[],s=arguments.length>5&&void 0!==arguments[5]?arguments[5]:"12px",l=!(arguments.length>6&&void 0!==arguments[6])||arguments[6],c=this.w,u=void 0===t[i]?"":t[i],h=u,d=c.globals.xLabelFormatter,p=c.config.xaxis.labels.formatter,f=!1,g=new C(this.ctx),m=u;l&&(h=g.xLabelFormat(d,u,m,{i:i,dateFormatter:new S(this.ctx).formatDate,w:c}),void 0!==p&&(h=p(u,t[i],{i:i,dateFormatter:new S(this.ctx).formatDate,w:c}))),e.length>0?(r=e[i].unit,o=null,e.forEach((function(t){"month"===t.unit?o="year":"day"===t.unit?o="month":"hour"===t.unit?o="day":"minute"===t.unit&&(o="hour")})),f=o===r,n=e[i].position,h=e[i].value):"datetime"===c.config.xaxis.type&&void 0===p&&(h=""),void 0===h&&(h=""),h=Array.isArray(h)?h:h.toString();var v=new b(this.ctx),y={};y=c.globals.rotateXLabels&&l?v.getTextRects(h,parseInt(s,10),null,"rotate(".concat(c.config.xaxis.labels.rotate," 0 0)"),!1):v.getTextRects(h,parseInt(s,10));var x=!c.config.xaxis.labels.showDuplicates&&this.ctx.timeScale;return!Array.isArray(h)&&("NaN"===String(h)||a.indexOf(h)>=0&&x)&&(h=""),{x:n,text:h,textRect:y,isBold:f}}},{key:"checkLabelBasedOnTickamount",value:function(t,e,n){var i=this.w,r=i.config.xaxis.tickAmount;return"dataPoints"===r&&(r=Math.round(i.globals.gridWidth/120)),r>n||t%Math.round(n/(r+1))==0||(e.text=""),e}},{key:"checkForOverflowingLabels",value:function(t,e,n,i,r){var o=this.w;if(0===t&&o.globals.skipFirstTimelinelabel&&(e.text=""),t===n-1&&o.globals.skipLastTimelinelabel&&(e.text=""),o.config.xaxis.labels.hideOverlappingLabels&&i.length>0){var a=r[r.length-1];e.x<a.textRect.width/(o.globals.rotateXLabels?Math.abs(o.config.xaxis.labels.rotate)/12:1.01)+a.x&&(e.text="")}return e}},{key:"checkForReversedLabels",value:function(t,e){var n=this.w;return n.config.yaxis[t]&&n.config.yaxis[t].reversed&&e.reverse(),e}},{key:"isYAxisHidden",value:function(t){var e=this.w,n=new x(this.ctx);return!e.globals.seriesYAxisMap[t].some((function(t){return-1===e.globals.collapsedSeriesIndices.indexOf(t)}))||!e.config.yaxis[t].show||!e.config.yaxis[t].showForNullSeries&&n.isSeriesNull(t)}},{key:"getYAxisForeColor",value:function(t,e){var n=this.w;return Array.isArray(t)&&n.globals.yAxisScale[e]&&this.ctx.theme.pushExtraColors(t,n.globals.yAxisScale[e].result.length,!1),t}},{key:"drawYAxisTicks",value:function(t,e,n,i,r,o,a){var s=this.w,l=new b(this.ctx),c=s.globals.translateY;if(i.show&&e>0){!0===s.config.yaxis[r].opposite&&(t+=i.width);for(var u=e;u>=0;u--){var h=c+e/10+s.config.yaxis[r].labels.offsetY-1;s.globals.isBarHorizontal&&(h=o*u),"heatmap"===s.config.chart.type&&(h+=o/2);var d=l.drawLine(t+n.offsetX-i.width+i.offsetX,h+i.offsetY,t+n.offsetX+i.offsetX,h+i.offsetY,i.color);a.add(d),c+=o}}}}]),t}(),A=function(){function t(e){i(this,t),this.w=e.w,this.annoCtx=e,this.helpers=new _(this.annoCtx),this.axesUtils=new k(this.annoCtx)}return o(t,[{key:"addYaxisAnnotation",value:function(t,e,n){var i,r=this.w,o=t.strokeDashArray,a=this.helpers.getY1Y2("y1",t),s=a.yP,l=a.clipped,c=!0,u=!1,h=t.label.text;if(null===t.y2||void 0===t.y2){if(!l){u=!0;var d=this.annoCtx.graphics.drawLine(0+t.offsetX,s+t.offsetY,this._getYAxisAnnotationWidth(t),s+t.offsetY,t.borderColor,o,t.borderWidth);e.appendChild(d.node),t.id&&d.node.classList.add(t.id)}}else{if(i=(a=this.helpers.getY1Y2("y2",t)).yP,c=a.clipped,i>s){var p=s;s=i,i=p}if(!l||!c){u=!0;var f=this.annoCtx.graphics.drawRect(0+t.offsetX,i+t.offsetY,this._getYAxisAnnotationWidth(t),s-i,0,t.fillColor,t.opacity,1,t.borderColor,o);f.node.classList.add("apexcharts-annotation-rect"),f.attr("clip-path","url(#gridRectMask".concat(r.globals.cuid,")")),e.appendChild(f.node),t.id&&f.node.classList.add(t.id)}}if(u){var g="right"===t.label.position?r.globals.gridWidth:"center"===t.label.position?r.globals.gridWidth/2:0,m=this.annoCtx.graphics.drawText({x:g+t.label.offsetX,y:(null!=i?i:s)+t.label.offsetY-3,text:h,textAnchor:t.label.textAnchor,fontSize:t.label.style.fontSize,fontFamily:t.label.style.fontFamily,fontWeight:t.label.style.fontWeight,foreColor:t.label.style.color,cssClass:"apexcharts-yaxis-annotation-label ".concat(t.label.style.cssClass," ").concat(t.id?t.id:"")});m.attr({rel:n}),e.appendChild(m.node)}}},{key:"_getYAxisAnnotationWidth",value:function(t){var e=this.w;return e.globals.gridWidth,(t.width.indexOf("%")>-1?e.globals.gridWidth*parseInt(t.width,10)/100:parseInt(t.width,10))+t.offsetX}},{key:"drawYAxisAnnotations",value:function(){var t=this,e=this.w,n=this.annoCtx.graphics.group({class:"apexcharts-yaxis-annotations"});return e.config.annotations.yaxis.forEach((function(i,r){e.globals.seriesYAxisMap[i.yAxisIndex][0],t.axesUtils.isYAxisHidden(i.yAxisIndex)||t.addYaxisAnnotation(i,n.node,r)})),n}}]),t}(),M=function(){function t(e){i(this,t),this.w=e.w,this.annoCtx=e,this.helpers=new _(this.annoCtx)}return o(t,[{key:"addPointAnnotation",value:function(t,e,n){this.w;var i=this.helpers.getX1X2("x1",t),r=i.x,o=i.clipped,a=(i=this.helpers.getY1Y2("y1",t)).yP,s=i.clipped;if(m.isNumber(r)&&!s&&!o){var l={pSize:t.marker.size,pointStrokeWidth:t.marker.strokeWidth,pointFillColor:t.marker.fillColor,pointStrokeColor:t.marker.strokeColor,shape:t.marker.shape,pRadius:t.marker.radius,class:"apexcharts-point-annotation-marker ".concat(t.marker.cssClass," ").concat(t.id?t.id:"")},c=this.annoCtx.graphics.drawMarker(r+t.marker.offsetX,a+t.marker.offsetY,l);e.appendChild(c.node);var u=t.label.text?t.label.text:"",h=this.annoCtx.graphics.drawText({x:r+t.label.offsetX,y:a+t.label.offsetY-t.marker.size-parseFloat(t.label.style.fontSize)/1.6,text:u,textAnchor:t.label.textAnchor,fontSize:t.label.style.fontSize,fontFamily:t.label.style.fontFamily,fontWeight:t.label.style.fontWeight,foreColor:t.label.style.color,cssClass:"apexcharts-point-annotation-label ".concat(t.label.style.cssClass," ").concat(t.id?t.id:"")});if(h.attr({rel:n}),e.appendChild(h.node),t.customSVG.SVG){var d=this.annoCtx.graphics.group({class:"apexcharts-point-annotations-custom-svg "+t.customSVG.cssClass});d.attr({transform:"translate(".concat(r+t.customSVG.offsetX,", ").concat(a+t.customSVG.offsetY,")")}),d.node.innerHTML=t.customSVG.SVG,e.appendChild(d.node)}if(t.image.path){var p=t.image.width?t.image.width:20,f=t.image.height?t.image.height:20;c=this.annoCtx.addImage({x:r+t.image.offsetX-p/2,y:a+t.image.offsetY-f/2,width:p,height:f,path:t.image.path,appendTo:".apexcharts-point-annotations"})}t.mouseEnter&&c.node.addEventListener("mouseenter",t.mouseEnter.bind(this,t)),t.mouseLeave&&c.node.addEventListener("mouseleave",t.mouseLeave.bind(this,t)),t.click&&c.node.addEventListener("click",t.click.bind(this,t))}}},{key:"drawPointAnnotations",value:function(){var t=this,e=this.w,n=this.annoCtx.graphics.group({class:"apexcharts-point-annotations"});return e.config.annotations.points.map((function(e,i){t.addPointAnnotation(e,n.node,i)})),n}}]),t}(),T={name:"en",options:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],toolbar:{exportToSVG:"Download SVG",exportToPNG:"Download PNG",exportToCSV:"Download CSV",menu:"Menu",selection:"Selection",selectionZoom:"Selection Zoom",zoomIn:"Zoom In",zoomOut:"Zoom Out",pan:"Panning",reset:"Reset Zoom"}}},I=function(){function t(){i(this,t),this.yAxis={show:!0,showAlways:!1,showForNullSeries:!0,seriesName:void 0,opposite:!1,reversed:!1,logarithmic:!1,logBase:10,tickAmount:void 0,stepSize:void 0,forceNiceScale:!1,max:void 0,min:void 0,floating:!1,decimalsInFloat:void 0,labels:{show:!0,minWidth:0,maxWidth:160,offsetX:0,offsetY:0,align:void 0,rotate:0,padding:20,style:{colors:[],fontSize:"11px",fontWeight:400,fontFamily:void 0,cssClass:""},formatter:void 0},axisBorder:{show:!1,color:"#e0e0e0",width:1,offsetX:0,offsetY:0},axisTicks:{show:!1,color:"#e0e0e0",width:6,offsetX:0,offsetY:0},title:{text:void 0,rotate:-90,offsetY:0,offsetX:0,style:{color:void 0,fontSize:"11px",fontWeight:900,fontFamily:void 0,cssClass:""}},tooltip:{enabled:!1,offsetX:0},crosshairs:{show:!0,position:"front",stroke:{color:"#b6b6b6",width:1,dashArray:0}}},this.pointAnnotation={id:void 0,x:0,y:null,yAxisIndex:0,seriesIndex:void 0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,marker:{size:4,fillColor:"#fff",strokeWidth:2,strokeColor:"#333",shape:"circle",offsetX:0,offsetY:0,radius:2,cssClass:""},label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}},customSVG:{SVG:void 0,cssClass:void 0,offsetX:0,offsetY:0},image:{path:void 0,width:20,height:20,offsetX:0,offsetY:0}},this.yAxisAnnotation={id:void 0,y:0,y2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,width:"100%",yAxisIndex:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"end",position:"right",offsetX:0,offsetY:-3,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.xAxisAnnotation={id:void 0,x:0,x2:null,strokeDashArray:1,fillColor:"#c2c2c2",borderColor:"#c2c2c2",borderWidth:1,opacity:.3,offsetX:0,offsetY:0,label:{borderColor:"#c2c2c2",borderWidth:1,borderRadius:2,text:void 0,textAnchor:"middle",orientation:"vertical",position:"top",offsetX:0,offsetY:0,mouseEnter:void 0,mouseLeave:void 0,click:void 0,style:{background:"#fff",color:void 0,fontSize:"11px",fontFamily:void 0,fontWeight:400,cssClass:"",padding:{left:5,right:5,top:2,bottom:2}}}},this.text={x:0,y:0,text:"",textAnchor:"start",foreColor:void 0,fontSize:"13px",fontFamily:void 0,fontWeight:400,appendTo:".apexcharts-annotations",backgroundColor:"transparent",borderColor:"#c2c2c2",borderRadius:0,borderWidth:0,paddingLeft:4,paddingRight:4,paddingTop:2,paddingBottom:2}}return o(t,[{key:"init",value:function(){return{annotations:{yaxis:[this.yAxisAnnotation],xaxis:[this.xAxisAnnotation],points:[this.pointAnnotation],texts:[],images:[],shapes:[]},chart:{animations:{enabled:!0,easing:"easeinout",speed:800,animateGradually:{delay:150,enabled:!0},dynamicAnimation:{enabled:!0,speed:350}},background:"transparent",locales:[T],defaultLocale:"en",dropShadow:{enabled:!1,enabledOnSeries:void 0,top:2,left:2,blur:4,color:"#000",opacity:.35},events:{animationEnd:void 0,beforeMount:void 0,mounted:void 0,updated:void 0,click:void 0,mouseMove:void 0,mouseLeave:void 0,xAxisLabelClick:void 0,legendClick:void 0,markerClick:void 0,selection:void 0,dataPointSelection:void 0,dataPointMouseEnter:void 0,dataPointMouseLeave:void 0,beforeZoom:void 0,beforeResetZoom:void 0,zoomed:void 0,scrolled:void 0,brushScrolled:void 0},foreColor:"#373d3f",fontFamily:"Helvetica, Arial, sans-serif",height:"auto",parentHeightOffset:15,redrawOnParentResize:!0,redrawOnWindowResize:!0,id:void 0,group:void 0,nonce:void 0,offsetX:0,offsetY:0,selection:{enabled:!1,type:"x",fill:{color:"#24292e",opacity:.1},stroke:{width:1,color:"#24292e",opacity:.4,dashArray:3},xaxis:{min:void 0,max:void 0},yaxis:{min:void 0,max:void 0}},sparkline:{enabled:!1},brush:{enabled:!1,autoScaleYaxis:!0,target:void 0,targets:void 0},stacked:!1,stackOnlyBar:!0,stackType:"normal",toolbar:{show:!0,offsetX:0,offsetY:0,tools:{download:!0,selection:!0,zoom:!0,zoomin:!0,zoomout:!0,pan:!0,reset:!0,customIcons:[]},export:{csv:{filename:void 0,columnDelimiter:",",headerCategory:"category",headerValue:"value",dateFormatter:function(t){return new Date(t).toDateString()}},png:{filename:void 0},svg:{filename:void 0}},autoSelected:"zoom"},type:"line",width:"100%",zoom:{enabled:!0,type:"x",autoScaleYaxis:!1,zoomedArea:{fill:{color:"#90CAF9",opacity:.4},stroke:{color:"#0D47A1",opacity:.4,width:1}}}},plotOptions:{area:{fillTo:"origin"},bar:{horizontal:!1,columnWidth:"70%",barHeight:"70%",distributed:!1,borderRadius:0,borderRadiusApplication:"around",borderRadiusWhenStacked:"last",rangeBarOverlap:!0,rangeBarGroupRows:!1,hideZeroBarsWhenGrouped:!1,isDumbbell:!1,dumbbellColors:void 0,isFunnel:!1,isFunnel3d:!0,colors:{ranges:[],backgroundBarColors:[],backgroundBarOpacity:1,backgroundBarRadius:0},dataLabels:{position:"top",maxItems:100,hideOverflowingLabels:!0,orientation:"horizontal",total:{enabled:!1,formatter:void 0,offsetX:0,offsetY:0,style:{color:"#373d3f",fontSize:"12px",fontFamily:void 0,fontWeight:600}}}},bubble:{zScaling:!0,minBubbleRadius:void 0,maxBubbleRadius:void 0},candlestick:{colors:{upward:"#00B746",downward:"#EF403C"},wick:{useFillColor:!0}},boxPlot:{colors:{upper:"#00E396",lower:"#008FFB"}},heatmap:{radius:2,enableShades:!0,shadeIntensity:.5,reverseNegativeShade:!1,distributed:!1,useFillColorAsStroke:!1,colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},treemap:{enableShades:!0,shadeIntensity:.5,distributed:!1,reverseNegativeShade:!1,useFillColorAsStroke:!1,borderRadius:4,dataLabels:{format:"scale"},colorScale:{inverse:!1,ranges:[],min:void 0,max:void 0}},radialBar:{inverseOrder:!1,startAngle:0,endAngle:360,offsetX:0,offsetY:0,hollow:{margin:5,size:"50%",background:"transparent",image:void 0,imageWidth:150,imageHeight:150,imageOffsetX:0,imageOffsetY:0,imageClipped:!0,position:"front",dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},track:{show:!0,startAngle:void 0,endAngle:void 0,background:"#f2f2f2",strokeWidth:"97%",opacity:1,margin:5,dropShadow:{enabled:!1,top:0,left:0,blur:3,color:"#000",opacity:.5}},dataLabels:{show:!0,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:0,formatter:function(t){return t}},value:{show:!0,fontSize:"14px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:16,formatter:function(t){return t+"%"}},total:{show:!1,label:"Total",fontSize:"16px",fontWeight:600,fontFamily:void 0,color:void 0,formatter:function(t){return t.globals.seriesTotals.reduce((function(t,e){return t+e}),0)/t.globals.series.length+"%"}}},barLabels:{enabled:!1,margin:5,useSeriesColors:!0,fontFamily:void 0,fontWeight:600,fontSize:"16px",formatter:function(t){return t},onClick:void 0}},pie:{customScale:1,offsetX:0,offsetY:0,startAngle:0,endAngle:360,expandOnClick:!0,dataLabels:{offset:0,minAngleToShowLabel:10},donut:{size:"65%",background:"transparent",labels:{show:!1,name:{show:!0,fontSize:"16px",fontFamily:void 0,fontWeight:600,color:void 0,offsetY:-10,formatter:function(t){return t}},value:{show:!0,fontSize:"20px",fontFamily:void 0,fontWeight:400,color:void 0,offsetY:10,formatter:function(t){return t}},total:{show:!1,showAlways:!1,label:"Total",fontSize:"16px",fontWeight:400,fontFamily:void 0,color:void 0,formatter:function(t){return t.globals.seriesTotals.reduce((function(t,e){return t+e}),0)}}}}},polarArea:{rings:{strokeWidth:1,strokeColor:"#e8e8e8"},spokes:{strokeWidth:1,connectorColors:"#e8e8e8"}},radar:{size:void 0,offsetX:0,offsetY:0,polygons:{strokeWidth:1,strokeColors:"#e8e8e8",connectorColors:"#e8e8e8",fill:{colors:void 0}}}},colors:void 0,dataLabels:{enabled:!0,enabledOnSeries:void 0,formatter:function(t){return null!==t?t:""},textAnchor:"middle",distributed:!1,offsetX:0,offsetY:0,style:{fontSize:"12px",fontFamily:void 0,fontWeight:600,colors:void 0},background:{enabled:!0,foreColor:"#fff",borderRadius:2,padding:4,opacity:.9,borderWidth:1,borderColor:"#fff",dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},dropShadow:{enabled:!1,top:1,left:1,blur:1,color:"#000",opacity:.45}},fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]},image:{src:[],width:void 0,height:void 0},pattern:{style:"squares",width:6,height:6,strokeWidth:2}},forecastDataPoints:{count:0,fillOpacity:.5,strokeWidth:void 0,dashArray:4},grid:{show:!0,borderColor:"#e0e0e0",strokeDashArray:0,position:"back",xaxis:{lines:{show:!1}},yaxis:{lines:{show:!0}},row:{colors:void 0,opacity:.5},column:{colors:void 0,opacity:.5},padding:{top:0,right:10,bottom:0,left:12}},labels:[],legend:{show:!0,showForSingleSeries:!1,showForNullSeries:!0,showForZeroSeries:!0,floating:!1,position:"bottom",horizontalAlign:"center",inverseOrder:!1,fontSize:"12px",fontFamily:void 0,fontWeight:400,width:void 0,height:void 0,formatter:void 0,tooltipHoverFormatter:void 0,offsetX:-20,offsetY:4,customLegendItems:[],labels:{colors:void 0,useSeriesColors:!1},markers:{width:12,height:12,strokeWidth:0,fillColors:void 0,strokeColor:"#fff",radius:12,customHTML:void 0,offsetX:0,offsetY:0,onClick:void 0},itemMargin:{horizontal:5,vertical:2},onItemClick:{toggleDataSeries:!0},onItemHover:{highlightDataSeries:!0}},markers:{discrete:[],size:0,colors:void 0,strokeColors:"#fff",strokeWidth:2,strokeOpacity:.9,strokeDashArray:0,fillOpacity:1,shape:"circle",width:8,height:8,radius:2,offsetX:0,offsetY:0,onClick:void 0,onDblClick:void 0,showNullDataPoints:!0,hover:{size:void 0,sizeOffset:3}},noData:{text:void 0,align:"center",verticalAlign:"middle",offsetX:0,offsetY:0,style:{color:void 0,fontSize:"14px",fontFamily:void 0}},responsive:[],series:void 0,states:{normal:{filter:{type:"none",value:0}},hover:{filter:{type:"lighten",value:.1}},active:{allowMultipleDataPointsSelection:!1,filter:{type:"darken",value:.5}}},title:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:0,floating:!1,style:{fontSize:"14px",fontWeight:900,fontFamily:void 0,color:void 0}},subtitle:{text:void 0,align:"left",margin:5,offsetX:0,offsetY:30,floating:!1,style:{fontSize:"12px",fontWeight:400,fontFamily:void 0,color:void 0}},stroke:{show:!0,curve:"smooth",lineCap:"butt",width:2,colors:void 0,dashArray:0,fill:{type:"solid",colors:void 0,opacity:.85,gradient:{shade:"dark",type:"horizontal",shadeIntensity:.5,gradientToColors:void 0,inverseColors:!0,opacityFrom:1,opacityTo:1,stops:[0,50,100],colorStops:[]}}},tooltip:{enabled:!0,enabledOnSeries:void 0,shared:!0,hideEmptySeries:!1,followCursor:!1,intersect:!1,inverseOrder:!1,custom:void 0,fillSeriesColor:!1,theme:"light",cssClass:"",style:{fontSize:"12px",fontFamily:void 0},onDatasetHover:{highlightDataSeries:!1},x:{show:!0,format:"dd MMM",formatter:void 0},y:{formatter:void 0,title:{formatter:function(t){return t?t+": ":""}}},z:{formatter:void 0,title:"Size: "},marker:{show:!0,fillColors:void 0},items:{display:"flex"},fixed:{enabled:!1,position:"topRight",offsetX:0,offsetY:0}},xaxis:{type:"category",categories:[],convertedCatToNumeric:!1,offsetX:0,offsetY:0,overwriteCategories:void 0,labels:{show:!0,rotate:-45,rotateAlways:!1,hideOverlappingLabels:!0,trim:!1,minHeight:void 0,maxHeight:120,showDuplicates:!0,style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""},offsetX:0,offsetY:0,format:void 0,formatter:void 0,datetimeUTC:!0,datetimeFormatter:{year:"yyyy",month:"MMM 'yy",day:"dd MMM",hour:"HH:mm",minute:"HH:mm:ss",second:"HH:mm:ss"}},group:{groups:[],style:{colors:[],fontSize:"12px",fontWeight:400,fontFamily:void 0,cssClass:""}},axisBorder:{show:!0,color:"#e0e0e0",width:"100%",height:1,offsetX:0,offsetY:0},axisTicks:{show:!0,color:"#e0e0e0",height:6,offsetX:0,offsetY:0},stepSize:void 0,tickAmount:void 0,tickPlacement:"on",min:void 0,max:void 0,range:void 0,floating:!1,decimalsInFloat:void 0,position:"bottom",title:{text:void 0,offsetX:0,offsetY:0,style:{color:void 0,fontSize:"12px",fontWeight:900,fontFamily:void 0,cssClass:""}},crosshairs:{show:!0,width:1,position:"back",opacity:.9,stroke:{color:"#b6b6b6",width:1,dashArray:3},fill:{type:"solid",color:"#B1B9C4",gradient:{colorFrom:"#D8E3F0",colorTo:"#BED1E6",stops:[0,100],opacityFrom:.4,opacityTo:.5}},dropShadow:{enabled:!1,left:0,top:0,blur:1,opacity:.4}},tooltip:{enabled:!0,offsetY:0,formatter:void 0,style:{fontSize:"12px",fontFamily:void 0}}},yaxis:this.yAxis,theme:{mode:"light",palette:"palette1",monochrome:{enabled:!1,color:"#008FFB",shadeTo:"light",shadeIntensity:.65}}}}}]),t}(),E=function(){function t(e){i(this,t),this.ctx=e,this.w=e.w,this.graphics=new b(this.ctx),this.w.globals.isBarHorizontal&&(this.invertAxis=!0),this.helpers=new _(this),this.xAxisAnnotations=new w(this),this.yAxisAnnotations=new A(this),this.pointsAnnotations=new M(this),this.w.globals.isBarHorizontal&&this.w.config.yaxis[0].reversed&&(this.inversedReversedAxis=!0),this.xDivision=this.w.globals.gridWidth/this.w.globals.dataPoints}return o(t,[{key:"drawAxesAnnotations",value:function(){var t=this.w;if(t.globals.axisCharts){for(var e=this.yAxisAnnotations.drawYAxisAnnotations(),n=this.xAxisAnnotations.drawXAxisAnnotations(),i=this.pointsAnnotations.drawPointAnnotations(),r=t.config.chart.animations.enabled,o=[e,n,i],a=[n.node,e.node,i.node],s=0;s<3;s++)t.globals.dom.elGraphical.add(o[s]),!r||t.globals.resized||t.globals.dataChanged||"scatter"!==t.config.chart.type&&"bubble"!==t.config.chart.type&&t.globals.dataPoints>1&&a[s].classList.add("apexcharts-element-hidden"),t.globals.delayedElements.push({el:a[s],index:0});this.helpers.annotationsBackground()}}},{key:"drawImageAnnos",value:function(){var t=this;this.w.config.annotations.images.map((function(e,n){t.addImage(e,n)}))}},{key:"drawTextAnnos",value:function(){var t=this;this.w.config.annotations.texts.map((function(e,n){t.addText(e,n)}))}},{key:"addXaxisAnnotation",value:function(t,e,n){this.xAxisAnnotations.addXaxisAnnotation(t,e,n)}},{key:"addYaxisAnnotation",value:function(t,e,n){this.yAxisAnnotations.addYaxisAnnotation(t,e,n)}},{key:"addPointAnnotation",value:function(t,e,n){this.pointsAnnotations.addPointAnnotation(t,e,n)}},{key:"addText",value:function(t,e){var n=t.x,i=t.y,r=t.text,o=t.textAnchor,a=t.foreColor,s=t.fontSize,l=t.fontFamily,c=t.fontWeight,u=t.cssClass,h=t.backgroundColor,d=t.borderWidth,p=t.strokeDashArray,f=t.borderRadius,g=t.borderColor,m=t.appendTo,v=void 0===m?".apexcharts-svg":m,y=t.paddingLeft,b=void 0===y?4:y,x=t.paddingRight,_=void 0===x?4:x,w=t.paddingBottom,S=void 0===w?2:w,C=t.paddingTop,k=void 0===C?2:C,A=this.w,M=this.graphics.drawText({x:n,y:i,text:r,textAnchor:o||"start",fontSize:s||"12px",fontWeight:c||"regular",fontFamily:l||A.config.chart.fontFamily,foreColor:a||A.config.chart.foreColor,cssClass:u}),T=A.globals.dom.baseEl.querySelector(v);T&&T.appendChild(M.node);var I=M.bbox();if(r){var E=this.graphics.drawRect(I.x-b,I.y-k,I.width+b+_,I.height+S+k,f,h||"transparent",1,d,g,p);T.insertBefore(E.node,M.node)}}},{key:"addImage",value:function(t,e){var n=this.w,i=t.path,r=t.x,o=void 0===r?0:r,a=t.y,s=void 0===a?0:a,l=t.width,c=void 0===l?20:l,u=t.height,h=void 0===u?20:u,d=t.appendTo,p=void 0===d?".apexcharts-svg":d,f=n.globals.dom.Paper.image(i);f.size(c,h).move(o,s);var g=n.globals.dom.baseEl.querySelector(p);return g&&g.appendChild(f.node),f}},{key:"addXaxisAnnotationExternal",value:function(t,e,n){return this.addAnnotationExternal({params:t,pushToMemory:e,context:n,type:"xaxis",contextMethod:n.addXaxisAnnotation}),n}},{key:"addYaxisAnnotationExternal",value:function(t,e,n){return this.addAnnotationExternal({params:t,pushToMemory:e,context:n,type:"yaxis",contextMethod:n.addYaxisAnnotation}),n}},{key:"addPointAnnotationExternal",value:function(t,e,n){return void 0===this.invertAxis&&(this.invertAxis=n.w.globals.isBarHorizontal),this.addAnnotationExternal({params:t,pushToMemory:e,context:n,type:"point",contextMethod:n.addPointAnnotation}),n}},{key:"addAnnotationExternal",value:function(t){var e=t.params,n=t.pushToMemory,i=t.context,r=t.type,o=t.contextMethod,a=i,s=a.w,l=s.globals.dom.baseEl.querySelector(".apexcharts-".concat(r,"-annotations")),c=l.childNodes.length+1,u=new I,h=Object.assign({},"xaxis"===r?u.xAxisAnnotation:"yaxis"===r?u.yAxisAnnotation:u.pointAnnotation),d=m.extend(h,e);switch(r){case"xaxis":this.addXaxisAnnotation(d,l,c);break;case"yaxis":this.addYaxisAnnotation(d,l,c);break;case"point":this.addPointAnnotation(d,l,c)}var p=s.globals.dom.baseEl.querySelector(".apexcharts-".concat(r,"-annotations .apexcharts-").concat(r,"-annotation-label[rel='").concat(c,"']")),f=this.helpers.addBackgroundToAnno(p,d);return f&&l.insertBefore(f.node,p),n&&s.globals.memory.methodsToExec.push({context:a,id:d.id?d.id:m.randomId(),method:o,label:"addAnnotation",params:e}),i}},{key:"clearAnnotations",value:function(t){var e=t.w,n=e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-annotations, .apexcharts-xaxis-annotations, .apexcharts-point-annotations");e.globals.memory.methodsToExec.map((function(t,n){"addText"!==t.label&&"addAnnotation"!==t.label||e.globals.memory.methodsToExec.splice(n,1)})),n=m.listToArray(n),Array.prototype.forEach.call(n,(function(t){for(;t.firstChild;)t.removeChild(t.firstChild)}))}},{key:"removeAnnotation",value:function(t,e){var n=t.w,i=n.globals.dom.baseEl.querySelectorAll(".".concat(e));i&&(n.globals.memory.methodsToExec.map((function(t,i){t.id===e&&n.globals.memory.methodsToExec.splice(i,1)})),Array.prototype.forEach.call(i,(function(t){t.parentElement.removeChild(t)})))}}]),t}(),O=function(t){var e,n=t.isTimeline,i=t.ctx,r=t.seriesIndex,o=t.dataPointIndex,a=t.y1,s=t.y2,l=t.w,c=l.globals.seriesRangeStart[r][o],u=l.globals.seriesRangeEnd[r][o],h=l.globals.labels[o],d=l.config.series[r].name?l.config.series[r].name:"",p=l.globals.ttKeyFormatter,f=l.config.tooltip.y.title.formatter,g={w:l,seriesIndex:r,dataPointIndex:o,start:c,end:u};"function"==typeof f&&(d=f(d,g)),null!==(e=l.config.series[r].data[o])&&void 0!==e&&e.x&&(h=l.config.series[r].data[o].x),n||"datetime"===l.config.xaxis.type&&(h=new C(i).xLabelFormat(l.globals.ttKeyFormatter,h,h,{i:void 0,dateFormatter:new S(i).formatDate,w:l})),"function"==typeof p&&(h=p(h,g)),Number.isFinite(a)&&Number.isFinite(s)&&(c=a,u=s);var m="",v="",y=l.globals.colors[r];if(void 0===l.config.tooltip.x.formatter)if("datetime"===l.config.xaxis.type){var b=new S(i);m=b.formatDate(b.getDate(c),l.config.tooltip.x.format),v=b.formatDate(b.getDate(u),l.config.tooltip.x.format)}else m=c,v=u;else m=l.config.tooltip.x.formatter(c),v=l.config.tooltip.x.formatter(u);return{start:c,end:u,startVal:m,endVal:v,ylabel:h,color:y,seriesName:d}},D=function(t){var e=t.color,n=t.seriesName,i=t.ylabel,r=t.start,o=t.end,a=t.seriesIndex,s=t.dataPointIndex,l=t.ctx.tooltip.tooltipLabels.getFormatters(a);r=l.yLbFormatter(r),o=l.yLbFormatter(o);var c=l.yLbFormatter(t.w.globals.series[a][s]),u='<span class="value start-value">\n  '.concat(r,'\n  </span> <span class="separator">-</span> <span class="value end-value">\n  ').concat(o,"\n  </span>");return'<div class="apexcharts-tooltip-rangebar"><div> <span class="series-name" style="color: '+e+'">'+(n||"")+'</span></div><div> <span class="category">'+i+": </span> "+(t.w.globals.comboCharts?"rangeArea"===t.w.config.series[a].type||"rangeBar"===t.w.config.series[a].type?u:"<span>".concat(c,"</span>"):u)+" </div></div>"},L=function(){function t(e){i(this,t),this.opts=e}return o(t,[{key:"hideYAxis",value:function(){this.opts.yaxis[0].show=!1,this.opts.yaxis[0].title.text="",this.opts.yaxis[0].axisBorder.show=!1,this.opts.yaxis[0].axisTicks.show=!1,this.opts.yaxis[0].floating=!0}},{key:"line",value:function(){return{chart:{animations:{easing:"swing"}},dataLabels:{enabled:!1},stroke:{width:5,curve:"straight"},markers:{size:0,hover:{sizeOffset:6}},xaxis:{crosshairs:{width:1}}}}},{key:"sparkline",value:function(t){return this.hideYAxis(),m.extend(t,{grid:{show:!1,padding:{left:0,right:0,top:0,bottom:0}},legend:{show:!1},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}},chart:{toolbar:{show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1}})}},{key:"bar",value:function(){return{chart:{stacked:!1,animations:{easing:"swing"}},plotOptions:{bar:{dataLabels:{position:"center"}}},dataLabels:{style:{colors:["#fff"]},background:{enabled:!1}},stroke:{width:0,lineCap:"round"},fill:{opacity:.85},legend:{markers:{shape:"square",radius:2,size:8}},tooltip:{shared:!1,intersect:!0},xaxis:{tooltip:{enabled:!1},tickPlacement:"between",crosshairs:{width:"barWidth",position:"back",fill:{type:"gradient"},dropShadow:{enabled:!1},stroke:{width:0}}}}}},{key:"funnel",value:function(){return this.hideYAxis(),e(e({},this.bar()),{},{chart:{animations:{easing:"linear",speed:800,animateGradually:{enabled:!1}}},plotOptions:{bar:{horizontal:!0,borderRadiusApplication:"around",borderRadius:0,dataLabels:{position:"center"}}},grid:{show:!1,padding:{left:0,right:0}},xaxis:{labels:{show:!1},tooltip:{enabled:!1},axisBorder:{show:!1},axisTicks:{show:!1}}})}},{key:"candlestick",value:function(){var t=this;return{stroke:{width:1,colors:["#333"]},fill:{opacity:1},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(e){var n=e.seriesIndex,i=e.dataPointIndex,r=e.w;return t._getBoxTooltip(r,n,i,["Open","High","","Low","Close"],"candlestick")}},states:{active:{filter:{type:"none"}}},xaxis:{crosshairs:{width:1}}}}},{key:"boxPlot",value:function(){var t=this;return{chart:{animations:{dynamicAnimation:{enabled:!1}}},stroke:{width:1,colors:["#24292e"]},dataLabels:{enabled:!1},tooltip:{shared:!0,custom:function(e){var n=e.seriesIndex,i=e.dataPointIndex,r=e.w;return t._getBoxTooltip(r,n,i,["Minimum","Q1","Median","Q3","Maximum"],"boxPlot")}},markers:{size:5,strokeWidth:1,strokeColors:"#111"},xaxis:{crosshairs:{width:1}}}}},{key:"rangeBar",value:function(){return{chart:{animations:{animateGradually:!1}},stroke:{width:0,lineCap:"square"},plotOptions:{bar:{borderRadius:0,dataLabels:{position:"center"}}},dataLabels:{enabled:!1,formatter:function(t,e){e.ctx;var n=e.seriesIndex,i=e.dataPointIndex,r=e.w,o=function(){var t=r.globals.seriesRangeStart[n][i];return r.globals.seriesRangeEnd[n][i]-t};return r.globals.comboCharts?"rangeBar"===r.config.series[n].type||"rangeArea"===r.config.series[n].type?o():t:o()},background:{enabled:!1},style:{colors:["#fff"]}},markers:{size:10},tooltip:{shared:!1,followCursor:!0,custom:function(t){return t.w.config.plotOptions&&t.w.config.plotOptions.bar&&t.w.config.plotOptions.bar.horizontal?function(t){var n=O(e(e({},t),{},{isTimeline:!0})),i=n.color,r=n.seriesName,o=n.ylabel,a=n.startVal,s=n.endVal;return D(e(e({},t),{},{color:i,seriesName:r,ylabel:o,start:a,end:s}))}(t):function(t){var n=O(t),i=n.color,r=n.seriesName,o=n.ylabel,a=n.start,s=n.end;return D(e(e({},t),{},{color:i,seriesName:r,ylabel:o,start:a,end:s}))}(t)}},xaxis:{tickPlacement:"between",tooltip:{enabled:!1},crosshairs:{stroke:{width:0}}}}}},{key:"dumbbell",value:function(t){var e,n;return null!==(e=t.plotOptions.bar)&&void 0!==e&&e.barHeight||(t.plotOptions.bar.barHeight=2),null!==(n=t.plotOptions.bar)&&void 0!==n&&n.columnWidth||(t.plotOptions.bar.columnWidth=2),t}},{key:"area",value:function(){return{stroke:{width:4,fill:{type:"solid",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}}},fill:{type:"gradient",gradient:{inverseColors:!1,shade:"light",type:"vertical",opacityFrom:.65,opacityTo:.5,stops:[0,100,100]}},markers:{size:0,hover:{sizeOffset:6}},tooltip:{followCursor:!1}}}},{key:"rangeArea",value:function(){return{stroke:{curve:"straight",width:0},fill:{type:"solid",opacity:.6},markers:{size:0},states:{hover:{filter:{type:"none"}},active:{filter:{type:"none"}}},tooltip:{intersect:!1,shared:!0,followCursor:!0,custom:function(t){return function(t){var n=O(t),i=n.color,r=n.seriesName,o=n.ylabel,a=n.start,s=n.end;return D(e(e({},t),{},{color:i,seriesName:r,ylabel:o,start:a,end:s}))}(t)}}}}},{key:"brush",value:function(t){return m.extend(t,{chart:{toolbar:{autoSelected:"selection",show:!1},zoom:{enabled:!1}},dataLabels:{enabled:!1},stroke:{width:1},tooltip:{enabled:!1},xaxis:{tooltip:{enabled:!1}}})}},{key:"stacked100",value:function(t){t.dataLabels=t.dataLabels||{},t.dataLabels.formatter=t.dataLabels.formatter||void 0;var e=t.dataLabels.formatter;return t.yaxis.forEach((function(e,n){t.yaxis[n].min=0,t.yaxis[n].max=100})),"bar"===t.chart.type&&(t.dataLabels.formatter=e||function(t){return"number"==typeof t&&t?t.toFixed(0)+"%":t}),t}},{key:"stackedBars",value:function(){var t=this.bar();return e(e({},t),{},{plotOptions:e(e({},t.plotOptions),{},{bar:e(e({},t.plotOptions.bar),{},{borderRadiusApplication:"end",borderRadiusWhenStacked:"last"})})})}},{key:"convertCatToNumeric",value:function(t){return t.xaxis.convertedCatToNumeric=!0,t}},{key:"convertCatToNumericXaxis",value:function(t,e,n){t.xaxis.type="numeric",t.xaxis.labels=t.xaxis.labels||{},t.xaxis.labels.formatter=t.xaxis.labels.formatter||function(t){return m.isNumber(t)?Math.floor(t):t};var i=t.xaxis.labels.formatter,r=t.xaxis.categories&&t.xaxis.categories.length?t.xaxis.categories:t.labels;return n&&n.length&&(r=n.map((function(t){return Array.isArray(t)?t:String(t)}))),r&&r.length&&(t.xaxis.labels.formatter=function(t){return m.isNumber(t)?i(r[Math.floor(t)-1]):i(t)}),t.xaxis.categories=[],t.labels=[],t.xaxis.tickAmount=t.xaxis.tickAmount||"dataPoints",t}},{key:"bubble",value:function(){return{dataLabels:{style:{colors:["#fff"]}},tooltip:{shared:!1,intersect:!0},xaxis:{crosshairs:{width:0}},fill:{type:"solid",gradient:{shade:"light",inverse:!0,shadeIntensity:.55,opacityFrom:.4,opacityTo:.8}}}}},{key:"scatter",value:function(){return{dataLabels:{enabled:!1},tooltip:{shared:!1,intersect:!0},markers:{size:6,strokeWidth:1,hover:{sizeOffset:2}}}}},{key:"heatmap",value:function(){return{chart:{stacked:!1},fill:{opacity:1},dataLabels:{style:{colors:["#fff"]}},stroke:{colors:["#fff"]},tooltip:{followCursor:!0,marker:{show:!1},x:{show:!1}},legend:{position:"top",markers:{shape:"square",size:10,offsetY:2}},grid:{padding:{right:20}}}}},{key:"treemap",value:function(){return{chart:{zoom:{enabled:!1}},dataLabels:{style:{fontSize:14,fontWeight:600,colors:["#fff"]}},stroke:{show:!0,width:2,colors:["#fff"]},legend:{show:!1},fill:{gradient:{stops:[0,100]}},tooltip:{followCursor:!0,x:{show:!1}},grid:{padding:{left:0,right:0}},xaxis:{crosshairs:{show:!1},tooltip:{enabled:!1}}}}},{key:"pie",value:function(){return{chart:{toolbar:{show:!1}},plotOptions:{pie:{donut:{labels:{show:!1}}}},dataLabels:{formatter:function(t){return t.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",stops:[0,100]}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"donut",value:function(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(t){return t.toFixed(1)+"%"},style:{colors:["#fff"]},background:{enabled:!1},dropShadow:{enabled:!0}},stroke:{colors:["#fff"]},fill:{opacity:1,gradient:{shade:"light",shadeIntensity:.35,stops:[80,100],opacityFrom:1,opacityTo:1}},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"polarArea",value:function(){return{chart:{toolbar:{show:!1}},dataLabels:{formatter:function(t){return t.toFixed(1)+"%"},enabled:!1},stroke:{show:!0,width:2},fill:{opacity:.7},tooltip:{theme:"dark",fillSeriesColor:!0},legend:{position:"right"}}}},{key:"radar",value:function(){return this.opts.yaxis[0].labels.offsetY=this.opts.yaxis[0].labels.offsetY?this.opts.yaxis[0].labels.offsetY:6,{dataLabels:{enabled:!1,style:{fontSize:"11px"}},stroke:{width:2},markers:{size:3,strokeWidth:1,strokeOpacity:1},fill:{opacity:.2},tooltip:{shared:!1,intersect:!0,followCursor:!0},grid:{show:!1},xaxis:{labels:{formatter:function(t){return t},style:{colors:["#a8a8a8"],fontSize:"11px"}},tooltip:{enabled:!1},crosshairs:{show:!1}}}}},{key:"radialBar",value:function(){return{chart:{animations:{dynamicAnimation:{enabled:!0,speed:800}},toolbar:{show:!1}},fill:{gradient:{shade:"dark",shadeIntensity:.4,inverseColors:!1,type:"diagonal2",opacityFrom:1,opacityTo:1,stops:[70,98,100]}},legend:{show:!1,position:"right"},tooltip:{enabled:!1,fillSeriesColor:!0}}}},{key:"_getBoxTooltip",value:function(t,e,n,i,r){var o=t.globals.seriesCandleO[e][n],a=t.globals.seriesCandleH[e][n],s=t.globals.seriesCandleM[e][n],l=t.globals.seriesCandleL[e][n],c=t.globals.seriesCandleC[e][n];return t.config.series[e].type&&t.config.series[e].type!==r?'<div class="apexcharts-custom-tooltip">\n          '.concat(t.config.series[e].name?t.config.series[e].name:"series-"+(e+1),": <strong>").concat(t.globals.series[e][n],"</strong>\n        </div>"):'<div class="apexcharts-tooltip-box apexcharts-tooltip-'.concat(t.config.chart.type,'">')+"<div>".concat(i[0],': <span class="value">')+o+"</span></div>"+"<div>".concat(i[1],': <span class="value">')+a+"</span></div>"+(s?"<div>".concat(i[2],': <span class="value">')+s+"</span></div>":"")+"<div>".concat(i[3],': <span class="value">')+l+"</span></div>"+"<div>".concat(i[4],': <span class="value">')+c+"</span></div></div>"}}]),t}(),P=function(){function t(e){i(this,t),this.opts=e}return o(t,[{key:"init",value:function(t){var e=t.responsiveOverride,i=this.opts,r=new I,o=new L(i);this.chartType=i.chart.type,i=this.extendYAxis(i),i=this.extendAnnotations(i);var a=r.init(),s={};if(i&&"object"===n(i)){var l,c,u,h,d,p,f,g,v={};v=-1!==["line","area","bar","candlestick","boxPlot","rangeBar","rangeArea","bubble","scatter","heatmap","treemap","pie","polarArea","donut","radar","radialBar"].indexOf(i.chart.type)?o[i.chart.type]():o.line(),null!==(l=i.plotOptions)&&void 0!==l&&null!==(c=l.bar)&&void 0!==c&&c.isFunnel&&(v=o.funnel()),i.chart.stacked&&"bar"===i.chart.type&&(v=o.stackedBars()),null!==(u=i.chart.brush)&&void 0!==u&&u.enabled&&(v=o.brush(v)),i.chart.stacked&&"100%"===i.chart.stackType&&(i=o.stacked100(i)),null!==(h=i.plotOptions)&&void 0!==h&&null!==(d=h.bar)&&void 0!==d&&d.isDumbbell&&(i=o.dumbbell(i)),this.checkForDarkTheme(window.Apex),this.checkForDarkTheme(i),i.xaxis=i.xaxis||window.Apex.xaxis||{},e||(i.xaxis.convertedCatToNumeric=!1),(null!==(p=(i=this.checkForCatToNumericXAxis(this.chartType,v,i)).chart.sparkline)&&void 0!==p&&p.enabled||null!==(f=window.Apex.chart)&&void 0!==f&&null!==(g=f.sparkline)&&void 0!==g&&g.enabled)&&(v=o.sparkline(v)),s=m.extend(a,v)}var y=m.extend(s,window.Apex);return a=m.extend(y,i),this.handleUserInputErrors(a)}},{key:"checkForCatToNumericXAxis",value:function(t,e,n){var i,r,o=new L(n),a=("bar"===t||"boxPlot"===t)&&(null===(i=n.plotOptions)||void 0===i||null===(r=i.bar)||void 0===r?void 0:r.horizontal),s="pie"===t||"polarArea"===t||"donut"===t||"radar"===t||"radialBar"===t||"heatmap"===t,l="datetime"!==n.xaxis.type&&"numeric"!==n.xaxis.type,c=n.xaxis.tickPlacement?n.xaxis.tickPlacement:e.xaxis&&e.xaxis.tickPlacement;return a||s||!l||"between"===c||(n=o.convertCatToNumeric(n)),n}},{key:"extendYAxis",value:function(t,e){var n=new I;(void 0===t.yaxis||!t.yaxis||Array.isArray(t.yaxis)&&0===t.yaxis.length)&&(t.yaxis={}),t.yaxis.constructor!==Array&&window.Apex.yaxis&&window.Apex.yaxis.constructor!==Array&&(t.yaxis=m.extend(t.yaxis,window.Apex.yaxis)),t.yaxis.constructor!==Array?t.yaxis=[m.extend(n.yAxis,t.yaxis)]:t.yaxis=m.extendArray(t.yaxis,n.yAxis);var i=!1;t.yaxis.forEach((function(t){t.logarithmic&&(i=!0)}));var r=t.series;return e&&!r&&(r=e.config.series),i&&r.length!==t.yaxis.length&&r.length&&(t.yaxis=r.map((function(e,i){if(e.name||(r[i].name="series-".concat(i+1)),t.yaxis[i])return t.yaxis[i].seriesName=r[i].name,t.yaxis[i];var o=m.extend(n.yAxis,t.yaxis[0]);return o.show=!1,o}))),i&&r.length>1&&r.length!==t.yaxis.length&&console.warn("A multi-series logarithmic chart should have equal number of series and y-axes"),t}},{key:"extendAnnotations",value:function(t){return void 0===t.annotations&&(t.annotations={},t.annotations.yaxis=[],t.annotations.xaxis=[],t.annotations.points=[]),t=this.extendYAxisAnnotations(t),t=this.extendXAxisAnnotations(t),this.extendPointAnnotations(t)}},{key:"extendYAxisAnnotations",value:function(t){var e=new I;return t.annotations.yaxis=m.extendArray(void 0!==t.annotations.yaxis?t.annotations.yaxis:[],e.yAxisAnnotation),t}},{key:"extendXAxisAnnotations",value:function(t){var e=new I;return t.annotations.xaxis=m.extendArray(void 0!==t.annotations.xaxis?t.annotations.xaxis:[],e.xAxisAnnotation),t}},{key:"extendPointAnnotations",value:function(t){var e=new I;return t.annotations.points=m.extendArray(void 0!==t.annotations.points?t.annotations.points:[],e.pointAnnotation),t}},{key:"checkForDarkTheme",value:function(t){t.theme&&"dark"===t.theme.mode&&(t.tooltip||(t.tooltip={}),"light"!==t.tooltip.theme&&(t.tooltip.theme="dark"),t.chart.foreColor||(t.chart.foreColor="#f6f7f8"),t.chart.background||(t.chart.background="#424242"),t.theme.palette||(t.theme.palette="palette4"))}},{key:"handleUserInputErrors",value:function(t){var e=t;if(e.tooltip.shared&&e.tooltip.intersect)throw new Error("tooltip.shared cannot be enabled when tooltip.intersect is true. Turn off any other option by setting it to false.");if("bar"===e.chart.type&&e.plotOptions.bar.horizontal){if(e.yaxis.length>1)throw new Error("Multiple Y Axis for bars are not supported. Switch to column chart by setting plotOptions.bar.horizontal=false");e.yaxis[0].reversed&&(e.yaxis[0].opposite=!0),e.xaxis.tooltip.enabled=!1,e.yaxis[0].tooltip.enabled=!1,e.chart.zoom.enabled=!1}return"bar"!==e.chart.type&&"rangeBar"!==e.chart.type||e.tooltip.shared&&"barWidth"===e.xaxis.crosshairs.width&&e.series.length>1&&(e.xaxis.crosshairs.width="tickWidth"),"candlestick"!==e.chart.type&&"boxPlot"!==e.chart.type||e.yaxis[0].reversed&&(console.warn("Reversed y-axis in ".concat(e.chart.type," chart is not supported.")),e.yaxis[0].reversed=!1),e}}]),t}(),N=function(){function t(){i(this,t)}return o(t,[{key:"initGlobalVars",value:function(t){t.series=[],t.seriesCandleO=[],t.seriesCandleH=[],t.seriesCandleM=[],t.seriesCandleL=[],t.seriesCandleC=[],t.seriesRangeStart=[],t.seriesRangeEnd=[],t.seriesRange=[],t.seriesPercent=[],t.seriesGoals=[],t.seriesX=[],t.seriesZ=[],t.seriesNames=[],t.seriesTotals=[],t.seriesLog=[],t.seriesColors=[],t.stackedSeriesTotals=[],t.seriesXvalues=[],t.seriesYvalues=[],t.labels=[],t.hasXaxisGroups=!1,t.groups=[],t.hasSeriesGroups=!1,t.seriesGroups=[],t.categoryLabels=[],t.timescaleLabels=[],t.noLabelsProvided=!1,t.resizeTimer=null,t.selectionResizeTimer=null,t.delayedElements=[],t.pointsArray=[],t.dataLabelsRects=[],t.isXNumeric=!1,t.skipLastTimelinelabel=!1,t.skipFirstTimelinelabel=!1,t.isDataXYZ=!1,t.isMultiLineX=!1,t.isMultipleYAxis=!1,t.maxY=-Number.MAX_VALUE,t.minY=Number.MIN_VALUE,t.minYArr=[],t.maxYArr=[],t.maxX=-Number.MAX_VALUE,t.minX=Number.MAX_VALUE,t.initialMaxX=-Number.MAX_VALUE,t.initialMinX=Number.MAX_VALUE,t.maxDate=0,t.minDate=Number.MAX_VALUE,t.minZ=Number.MAX_VALUE,t.maxZ=-Number.MAX_VALUE,t.minXDiff=Number.MAX_VALUE,t.yAxisScale=[],t.xAxisScale=null,t.xAxisTicksPositions=[],t.yLabelsCoords=[],t.yTitleCoords=[],t.barPadForNumericAxis=0,t.padHorizontal=0,t.xRange=0,t.yRange=[],t.zRange=0,t.dataPoints=0,t.xTickAmount=0,t.multiAxisTickAmount=0}},{key:"globalVars",value:function(t){return{chartID:null,cuid:null,events:{beforeMount:[],mounted:[],updated:[],clicked:[],selection:[],dataPointSelection:[],zoomed:[],scrolled:[]},colors:[],clientX:null,clientY:null,fill:{colors:[]},stroke:{colors:[]},dataLabels:{style:{colors:[]}},radarPolygons:{fill:{colors:[]}},markers:{colors:[],size:t.markers.size,largestSize:0},animationEnded:!1,isTouchDevice:"ontouchstart"in window||navigator.msMaxTouchPoints,isDirty:!1,isExecCalled:!1,initialConfig:null,initialSeries:[],lastXAxis:[],lastYAxis:[],columnSeries:null,labels:[],timescaleLabels:[],noLabelsProvided:!1,allSeriesCollapsed:!1,collapsedSeries:[],collapsedSeriesIndices:[],ancillaryCollapsedSeries:[],ancillaryCollapsedSeriesIndices:[],risingSeries:[],dataFormatXNumeric:!1,capturedSeriesIndex:-1,capturedDataPointIndex:-1,selectedDataPoints:[],goldenPadding:35,invalidLogScale:!1,ignoreYAxisIndexes:[],maxValsInArrayIndex:0,radialSize:0,selection:void 0,zoomEnabled:"zoom"===t.chart.toolbar.autoSelected&&t.chart.toolbar.tools.zoom&&t.chart.zoom.enabled,panEnabled:"pan"===t.chart.toolbar.autoSelected&&t.chart.toolbar.tools.pan,selectionEnabled:"selection"===t.chart.toolbar.autoSelected&&t.chart.toolbar.tools.selection,yaxis:null,mousedown:!1,lastClientPosition:{},visibleXRange:void 0,yValueDecimal:0,total:0,SVGNS:"http://www.w3.org/2000/svg",svgWidth:0,svgHeight:0,noData:!1,locale:{},dom:{},memory:{methodsToExec:[]},shouldAnimate:!0,skipLastTimelinelabel:!1,skipFirstTimelinelabel:!1,delayedElements:[],axisCharts:!0,isDataXYZ:!1,resized:!1,resizeTimer:null,comboCharts:!1,dataChanged:!1,previousPaths:[],allSeriesHasEqualX:!0,pointsArray:[],dataLabelsRects:[],lastDrawnDataLabelsIndexes:[],hasNullValues:!1,easing:null,zoomed:!1,gridWidth:0,gridHeight:0,rotateXLabels:!1,defaultLabels:!1,xLabelFormatter:void 0,yLabelFormatters:[],xaxisTooltipFormatter:void 0,ttKeyFormatter:void 0,ttVal:void 0,ttZFormatter:void 0,LINE_HEIGHT_RATIO:1.618,xAxisLabelsHeight:0,xAxisGroupLabelsHeight:0,xAxisLabelsWidth:0,yAxisLabelsWidth:0,scaleX:1,scaleY:1,translateX:0,translateY:0,translateYAxisX:[],yAxisWidths:[],translateXAxisY:0,translateXAxisX:0,tooltip:null,niceScaleAllowedMagMsd:[[1,1,2,5,5,5,10,10,10,10,10],[1,1,2,5,5,5,10,10,10,10,10]],niceScaleDefaultTicks:[1,2,4,4,6,6,6,6,6,6,6,6,6,6,6,6,6,6,12,12,12,12,12,12,12,12,12,24],seriesYAxisMap:[],seriesYAxisReverseMap:[]}}},{key:"init",value:function(t){var e=this.globalVars(t);return this.initGlobalVars(e),e.initialConfig=m.extend({},t),e.initialSeries=m.clone(t.series),e.lastXAxis=m.clone(e.initialConfig.xaxis),e.lastYAxis=m.clone(e.initialConfig.yaxis),e}}]),t}(),R=function(){function t(e){i(this,t),this.opts=e}return o(t,[{key:"init",value:function(){var t=new P(this.opts).init({responsiveOverride:!1});return{config:t,globals:(new N).init(t)}}}]),t}(),B=function(){function t(e){i(this,t),this.ctx=e,this.w=e.w,this.opts=null,this.seriesIndex=0}return o(t,[{key:"clippedImgArea",value:function(t){var e=this.w,n=e.config,i=parseInt(e.globals.gridWidth,10),r=parseInt(e.globals.gridHeight,10),o=i>r?i:r,a=t.image,s=0,l=0;void 0===t.width&&void 0===t.height?void 0!==n.fill.image.width&&void 0!==n.fill.image.height?(s=n.fill.image.width+1,l=n.fill.image.height):(s=o+1,l=o):(s=t.width,l=t.height);var c=document.createElementNS(e.globals.SVGNS,"pattern");b.setAttrs(c,{id:t.patternID,patternUnits:t.patternUnits?t.patternUnits:"userSpaceOnUse",width:s+"px",height:l+"px"});var u=document.createElementNS(e.globals.SVGNS,"image");c.appendChild(u),u.setAttributeNS(window.SVG.xlink,"href",a),b.setAttrs(u,{x:0,y:0,preserveAspectRatio:"none",width:s+"px",height:l+"px"}),u.style.opacity=t.opacity,e.globals.dom.elDefs.node.appendChild(c)}},{key:"getSeriesIndex",value:function(t){var e=this.w,n=e.config.chart.type;return("bar"===n||"rangeBar"===n)&&e.config.plotOptions.bar.distributed||"heatmap"===n||"treemap"===n?this.seriesIndex=t.seriesNumber:this.seriesIndex=t.seriesNumber%e.globals.series.length,this.seriesIndex}},{key:"fillPath",value:function(t){var e=this.w;this.opts=t;var n,i,r,o=this.w.config;this.seriesIndex=this.getSeriesIndex(t);var a=this.getFillColors()[this.seriesIndex];void 0!==e.globals.seriesColors[this.seriesIndex]&&(a=e.globals.seriesColors[this.seriesIndex]),"function"==typeof a&&(a=a({seriesIndex:this.seriesIndex,dataPointIndex:t.dataPointIndex,value:t.value,w:e}));var s=t.fillType?t.fillType:this.getFillType(this.seriesIndex),l=Array.isArray(o.fill.opacity)?o.fill.opacity[this.seriesIndex]:o.fill.opacity;t.color&&(a=t.color),a||(a="#fff",console.warn("undefined color - ApexCharts"));var c=a;if(-1===a.indexOf("rgb")?a.length<9&&(c=m.hexToRgba(a,l)):a.indexOf("rgba")>-1&&(l=m.getOpacityFromRGBA(a)),t.opacity&&(l=t.opacity),"pattern"===s&&(i=this.handlePatternFill({fillConfig:t.fillConfig,patternFill:i,fillColor:a,fillOpacity:l,defaultColor:c})),"gradient"===s&&(r=this.handleGradientFill({fillConfig:t.fillConfig,fillColor:a,fillOpacity:l,i:this.seriesIndex})),"image"===s){var u=o.fill.image.src,h=t.patternID?t.patternID:"";this.clippedImgArea({opacity:l,image:Array.isArray(u)?t.seriesNumber<u.length?u[t.seriesNumber]:u[0]:u,width:t.width?t.width:void 0,height:t.height?t.height:void 0,patternUnits:t.patternUnits,patternID:"pattern".concat(e.globals.cuid).concat(t.seriesNumber+1).concat(h)}),n="url(#pattern".concat(e.globals.cuid).concat(t.seriesNumber+1).concat(h,")")}else n="gradient"===s?r:"pattern"===s?i:c;return t.solid&&(n=c),n}},{key:"getFillType",value:function(t){var e=this.w;return Array.isArray(e.config.fill.type)?e.config.fill.type[t]:e.config.fill.type}},{key:"getFillColors",value:function(){var t=this.w,e=t.config,n=this.opts,i=[];return t.globals.comboCharts?"line"===t.config.series[this.seriesIndex].type?Array.isArray(t.globals.stroke.colors)?i=t.globals.stroke.colors:i.push(t.globals.stroke.colors):Array.isArray(t.globals.fill.colors)?i=t.globals.fill.colors:i.push(t.globals.fill.colors):"line"===e.chart.type?Array.isArray(t.globals.stroke.colors)?i=t.globals.stroke.colors:i.push(t.globals.stroke.colors):Array.isArray(t.globals.fill.colors)?i=t.globals.fill.colors:i.push(t.globals.fill.colors),void 0!==n.fillColors&&(i=[],Array.isArray(n.fillColors)?i=n.fillColors.slice():i.push(n.fillColors)),i}},{key:"handlePatternFill",value:function(t){var e=t.fillConfig,n=(t.patternFill,t.fillColor),i=t.fillOpacity,r=t.defaultColor,o=this.w.config.fill;e&&(o=e);var a=this.opts,s=new b(this.ctx),l=Array.isArray(o.pattern.strokeWidth)?o.pattern.strokeWidth[this.seriesIndex]:o.pattern.strokeWidth,c=n;return Array.isArray(o.pattern.style)?void 0!==o.pattern.style[a.seriesNumber]?s.drawPattern(o.pattern.style[a.seriesNumber],o.pattern.width,o.pattern.height,c,l,i):r:s.drawPattern(o.pattern.style,o.pattern.width,o.pattern.height,c,l,i)}},{key:"handleGradientFill",value:function(t){var n=t.fillColor,i=t.fillOpacity,r=t.fillConfig,o=t.i,a=this.w.config.fill;r&&(a=e(e({},a),r));var s,l=this.opts,c=new b(this.ctx),u=new m,h=a.gradient.type,d=n,p=void 0===a.gradient.opacityFrom?i:Array.isArray(a.gradient.opacityFrom)?a.gradient.opacityFrom[o]:a.gradient.opacityFrom;d.indexOf("rgba")>-1&&(p=m.getOpacityFromRGBA(d));var f=void 0===a.gradient.opacityTo?i:Array.isArray(a.gradient.opacityTo)?a.gradient.opacityTo[o]:a.gradient.opacityTo;if(void 0===a.gradient.gradientToColors||0===a.gradient.gradientToColors.length)s="dark"===a.gradient.shade?u.shadeColor(-1*parseFloat(a.gradient.shadeIntensity),n.indexOf("rgb")>-1?m.rgb2hex(n):n):u.shadeColor(parseFloat(a.gradient.shadeIntensity),n.indexOf("rgb")>-1?m.rgb2hex(n):n);else if(a.gradient.gradientToColors[l.seriesNumber]){var g=a.gradient.gradientToColors[l.seriesNumber];s=g,g.indexOf("rgba")>-1&&(f=m.getOpacityFromRGBA(g))}else s=n;if(a.gradient.gradientFrom&&(d=a.gradient.gradientFrom),a.gradient.gradientTo&&(s=a.gradient.gradientTo),a.gradient.inverseColors){var v=d;d=s,s=v}return d.indexOf("rgb")>-1&&(d=m.rgb2hex(d)),s.indexOf("rgb")>-1&&(s=m.rgb2hex(s)),c.drawGradient(h,d,s,p,f,l.size,a.gradient.stops,a.gradient.colorStops,o)}}]),t}(),z=function(){function t(e,n){i(this,t),this.ctx=e,this.w=e.w}return o(t,[{key:"setGlobalMarkerSize",value:function(){var t=this.w;if(t.globals.markers.size=Array.isArray(t.config.markers.size)?t.config.markers.size:[t.config.markers.size],t.globals.markers.size.length>0){if(t.globals.markers.size.length<t.globals.series.length+1)for(var e=0;e<=t.globals.series.length;e++)void 0===t.globals.markers.size[e]&&t.globals.markers.size.push(t.globals.markers.size[0])}else t.globals.markers.size=t.config.series.map((function(e){return t.config.markers.size}))}},{key:"plotChartMarkers",value:function(t,e,n,i){var r,o=arguments.length>4&&void 0!==arguments[4]&&arguments[4],a=this.w,s=e,l=t,c=null,u=new b(this.ctx),h=a.config.markers.discrete&&a.config.markers.discrete.length;if((a.globals.markers.size[e]>0||o||h)&&(c=u.group({class:o||h?"":"apexcharts-series-markers"})).attr("clip-path","url(#gridRectMarkerMask".concat(a.globals.cuid,")")),Array.isArray(l.x))for(var d=0;d<l.x.length;d++){var p=n;1===n&&0===d&&(p=0),1===n&&1===d&&(p=1);var f="apexcharts-marker";if("line"!==a.config.chart.type&&"area"!==a.config.chart.type||a.globals.comboCharts||a.config.tooltip.intersect||(f+=" no-pointer-events"),(Array.isArray(a.config.markers.size)?a.globals.markers.size[e]>0:a.config.markers.size>0)||o||h){m.isNumber(l.y[d])?f+=" w".concat(m.randomId()):f="apexcharts-nullpoint";var g=this.getMarkerConfig({cssClass:f,seriesIndex:e,dataPointIndex:p});a.config.series[s].data[p]&&(a.config.series[s].data[p].fillColor&&(g.pointFillColor=a.config.series[s].data[p].fillColor),a.config.series[s].data[p].strokeColor&&(g.pointStrokeColor=a.config.series[s].data[p].strokeColor)),i&&(g.pSize=i),(l.x[d]<0||l.x[d]>a.globals.gridWidth||l.y[d]<-a.globals.markers.largestSize||l.y[d]>a.globals.gridHeight+a.globals.markers.largestSize)&&(g.pSize=0),(r=u.drawMarker(l.x[d],l.y[d],g)).attr("rel",p),r.attr("j",p),r.attr("index",e),r.node.setAttribute("default-marker-size",g.pSize),new y(this.ctx).setSelectionFilter(r,e,p),this.addEvents(r),c&&c.add(r)}else void 0===a.globals.pointsArray[e]&&(a.globals.pointsArray[e]=[]),a.globals.pointsArray[e].push([l.x[d],l.y[d]])}return c}},{key:"getMarkerConfig",value:function(t){var e=t.cssClass,n=t.seriesIndex,i=t.dataPointIndex,r=void 0===i?null:i,o=t.finishRadius,a=void 0===o?null:o,s=this.w,l=this.getMarkerStyle(n),c=s.globals.markers.size[n],u=s.config.markers;return null!==r&&u.discrete.length&&u.discrete.map((function(t){t.seriesIndex===n&&t.dataPointIndex===r&&(l.pointStrokeColor=t.strokeColor,l.pointFillColor=t.fillColor,c=t.size,l.pointShape=t.shape)})),{pSize:null===a?c:a,pRadius:u.radius,width:Array.isArray(u.width)?u.width[n]:u.width,height:Array.isArray(u.height)?u.height[n]:u.height,pointStrokeWidth:Array.isArray(u.strokeWidth)?u.strokeWidth[n]:u.strokeWidth,pointStrokeColor:l.pointStrokeColor,pointFillColor:l.pointFillColor,shape:l.pointShape||(Array.isArray(u.shape)?u.shape[n]:u.shape),class:e,pointStrokeOpacity:Array.isArray(u.strokeOpacity)?u.strokeOpacity[n]:u.strokeOpacity,pointStrokeDashArray:Array.isArray(u.strokeDashArray)?u.strokeDashArray[n]:u.strokeDashArray,pointFillOpacity:Array.isArray(u.fillOpacity)?u.fillOpacity[n]:u.fillOpacity,seriesIndex:n}}},{key:"addEvents",value:function(t){var e=this.w,n=new b(this.ctx);t.node.addEventListener("mouseenter",n.pathMouseEnter.bind(this.ctx,t)),t.node.addEventListener("mouseleave",n.pathMouseLeave.bind(this.ctx,t)),t.node.addEventListener("mousedown",n.pathMouseDown.bind(this.ctx,t)),t.node.addEventListener("click",e.config.markers.onClick),t.node.addEventListener("dblclick",e.config.markers.onDblClick),t.node.addEventListener("touchstart",n.pathMouseDown.bind(this.ctx,t),{passive:!0})}},{key:"getMarkerStyle",value:function(t){var e=this.w,n=e.globals.markers.colors,i=e.config.markers.strokeColor||e.config.markers.strokeColors;return{pointStrokeColor:Array.isArray(i)?i[t]:i,pointFillColor:Array.isArray(n)?n[t]:n}}}]),t}(),F=function(){function t(e){i(this,t),this.ctx=e,this.w=e.w,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled}return o(t,[{key:"draw",value:function(t,e,n){var i=this.w,r=new b(this.ctx),o=n.realIndex,a=n.pointsPos,s=n.zRatio,l=n.elParent,c=r.group({class:"apexcharts-series-markers apexcharts-series-".concat(i.config.chart.type)});if(c.attr("clip-path","url(#gridRectMarkerMask".concat(i.globals.cuid,")")),Array.isArray(a.x))for(var u=0;u<a.x.length;u++){var h=e+1,d=!0;0===e&&0===u&&(h=0),0===e&&1===u&&(h=1);var p=0,f=i.globals.markers.size[o];if(s!==1/0){var g=i.config.plotOptions.bubble;f=i.globals.seriesZ[o][h],g.zScaling&&(f/=s),g.minBubbleRadius&&f<g.minBubbleRadius&&(f=g.minBubbleRadius),g.maxBubbleRadius&&f>g.maxBubbleRadius&&(f=g.maxBubbleRadius)}i.config.chart.animations.enabled||(p=f);var m=a.x[u],v=a.y[u];if(p=p||0,null!==v&&void 0!==i.globals.series[o][h]||(d=!1),d){var y=this.drawPoint(m,v,p,f,o,h,e);c.add(y)}l.add(c)}}},{key:"drawPoint",value:function(t,e,n,i,r,o,a){var s=this.w,l=r,c=new v(this.ctx),u=new y(this.ctx),h=new B(this.ctx),d=new z(this.ctx),p=new b(this.ctx),f=d.getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:l,dataPointIndex:o,finishRadius:"bubble"===s.config.chart.type||s.globals.comboCharts&&s.config.series[r]&&"bubble"===s.config.series[r].type?i:null});i=f.pSize;var g,m=h.fillPath({seriesNumber:r,dataPointIndex:o,color:f.pointFillColor,patternUnits:"objectBoundingBox",value:s.globals.series[r][a]});if("circle"===f.shape?g=p.drawCircle(n):"square"!==f.shape&&"rect"!==f.shape||(g=p.drawRect(0,0,f.width-f.pointStrokeWidth/2,f.height-f.pointStrokeWidth/2,f.pRadius)),s.config.series[l].data[o]&&s.config.series[l].data[o].fillColor&&(m=s.config.series[l].data[o].fillColor),g.attr({x:t-f.width/2-f.pointStrokeWidth/2,y:e-f.height/2-f.pointStrokeWidth/2,cx:t,cy:e,fill:m,"fill-opacity":f.pointFillOpacity,stroke:f.pointStrokeColor,r:i,"stroke-width":f.pointStrokeWidth,"stroke-dasharray":f.pointStrokeDashArray,"stroke-opacity":f.pointStrokeOpacity}),s.config.chart.dropShadow.enabled){var x=s.config.chart.dropShadow;u.dropShadow(g,x,r)}if(!this.initialAnim||s.globals.dataChanged||s.globals.resized)s.globals.animationEnded=!0;else{var _=s.config.chart.animations.speed;c.animateMarker(g,0,"circle"===f.shape?i:{width:f.width,height:f.height},_,s.globals.easing,(function(){window.setTimeout((function(){c.animationCompleted(g)}),100)}))}if(s.globals.dataChanged&&"circle"===f.shape)if(this.dynamicAnim){var w,S,C,k,A=s.config.chart.animations.dynamicAnimation.speed;null!=(k=s.globals.previousPaths[r]&&s.globals.previousPaths[r][a])&&(w=k.x,S=k.y,C=void 0!==k.r?k.r:i);for(var M=0;M<s.globals.collapsedSeries.length;M++)s.globals.collapsedSeries[M].index===r&&(A=1,i=0);0===t&&0===e&&(i=0),c.animateCircle(g,{cx:w,cy:S,r:C},{cx:t,cy:e,r:i},A,s.globals.easing)}else g.attr({r:i});return g.attr({rel:o,j:o,index:r,"default-marker-size":i}),u.setSelectionFilter(g,r,o),d.addEvents(g),g.node.classList.add("apexcharts-marker"),g}},{key:"centerTextInBubble",value:function(t){var e=this.w;return{y:t+=parseInt(e.config.dataLabels.style.fontSize,10)/4}}}]),t}(),V=function(){function t(e){i(this,t),this.ctx=e,this.w=e.w}return o(t,[{key:"dataLabelsCorrection",value:function(t,e,n,i,r,o,a){var s=this.w,l=!1,c=new b(this.ctx).getTextRects(n,a),u=c.width,h=c.height;e<0&&(e=0),e>s.globals.gridHeight+h&&(e=s.globals.gridHeight+h/2),void 0===s.globals.dataLabelsRects[i]&&(s.globals.dataLabelsRects[i]=[]),s.globals.dataLabelsRects[i].push({x:t,y:e,width:u,height:h});var d=s.globals.dataLabelsRects[i].length-2,p=void 0!==s.globals.lastDrawnDataLabelsIndexes[i]?s.globals.lastDrawnDataLabelsIndexes[i][s.globals.lastDrawnDataLabelsIndexes[i].length-1]:0;if(void 0!==s.globals.dataLabelsRects[i][d]){var f=s.globals.dataLabelsRects[i][p];(t>f.x+f.width||e>f.y+f.height||e+h<f.y||t+u<f.x)&&(l=!0)}return(0===r||o)&&(l=!0),{x:t,y:e,textRects:c,drawnextLabel:l}}},{key:"drawDataLabel",value:function(t){var e=this,n=t.type,i=t.pos,r=t.i,o=t.j,a=t.isRangeStart,s=t.strokeWidth,l=void 0===s?2:s,c=this.w,u=new b(this.ctx),h=c.config.dataLabels,d=0,p=0,f=o,g=null;if(-1!==c.globals.collapsedSeriesIndices.indexOf(r)||!h.enabled||!Array.isArray(i.x))return g;g=u.group({class:"apexcharts-data-labels"});for(var m=0;m<i.x.length;m++)if(d=i.x[m]+h.offsetX,p=i.y[m]+h.offsetY+l,!isNaN(d)){1===o&&0===m&&(f=0),1===o&&1===m&&(f=1);var v=c.globals.series[r][f];"rangeArea"===n&&(v=a?c.globals.seriesRangeStart[r][f]:c.globals.seriesRangeEnd[r][f]);var y="",x=function(t){return c.config.dataLabels.formatter(t,{ctx:e.ctx,seriesIndex:r,dataPointIndex:f,w:c})};"bubble"===c.config.chart.type?(y=x(v=c.globals.seriesZ[r][f]),p=i.y[m],p=new F(this.ctx).centerTextInBubble(p,r,f).y):void 0!==v&&(y=x(v)),this.plotDataLabelsText({x:d,y:p,text:y,i:r,j:f,parent:g,offsetCorrection:!0,dataLabelsConfig:c.config.dataLabels})}return g}},{key:"plotDataLabelsText",value:function(t){var e=this.w,n=new b(this.ctx),i=t.x,r=t.y,o=t.i,a=t.j,s=t.text,l=t.textAnchor,c=t.fontSize,u=t.parent,h=t.dataLabelsConfig,d=t.color,p=t.alwaysDrawDataLabel,f=t.offsetCorrection;if(!(Array.isArray(e.config.dataLabels.enabledOnSeries)&&e.config.dataLabels.enabledOnSeries.indexOf(o)<0)){var g={x:i,y:r,drawnextLabel:!0,textRects:null};f&&(g=this.dataLabelsCorrection(i,r,s,o,a,p,parseInt(h.style.fontSize,10))),e.globals.zoomed||(i=g.x,r=g.y),g.textRects&&(i<-20-g.textRects.width||i>e.globals.gridWidth+g.textRects.width+30)&&(s="");var m=e.globals.dataLabels.style.colors[o];(("bar"===e.config.chart.type||"rangeBar"===e.config.chart.type)&&e.config.plotOptions.bar.distributed||e.config.dataLabels.distributed)&&(m=e.globals.dataLabels.style.colors[a]),"function"==typeof m&&(m=m({series:e.globals.series,seriesIndex:o,dataPointIndex:a,w:e})),d&&(m=d);var v=h.offsetX,x=h.offsetY;if("bar"!==e.config.chart.type&&"rangeBar"!==e.config.chart.type||(v=0,x=0),g.drawnextLabel){var _=n.drawText({width:100,height:parseInt(h.style.fontSize,10),x:i+v,y:r+x,foreColor:m,textAnchor:l||h.textAnchor,text:s,fontSize:c||h.style.fontSize,fontFamily:h.style.fontFamily,fontWeight:h.style.fontWeight||"normal"});if(_.attr({class:"apexcharts-datalabel",cx:i,cy:r}),h.dropShadow.enabled){var w=h.dropShadow;new y(this.ctx).dropShadow(_,w)}u.add(_),void 0===e.globals.lastDrawnDataLabelsIndexes[o]&&(e.globals.lastDrawnDataLabelsIndexes[o]=[]),e.globals.lastDrawnDataLabelsIndexes[o].push(a)}}}},{key:"addBackgroundToDataLabel",value:function(t,e){var n=this.w,i=n.config.dataLabels.background,r=i.padding,o=i.padding/2,a=e.width,s=e.height,l=new b(this.ctx).drawRect(e.x-r,e.y-o/2,a+2*r,s+o,i.borderRadius,"transparent"===n.config.chart.background?"#fff":n.config.chart.background,i.opacity,i.borderWidth,i.borderColor);return i.dropShadow.enabled&&new y(this.ctx).dropShadow(l,i.dropShadow),l}},{key:"dataLabelsBackground",value:function(){var t=this.w;if("bubble"!==t.config.chart.type)for(var e=t.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels text"),n=0;n<e.length;n++){var i=e[n],r=i.getBBox(),o=null;if(r.width&&r.height&&(o=this.addBackgroundToDataLabel(i,r)),o){i.parentNode.insertBefore(o.node,i);var a=i.getAttribute("fill");!t.config.chart.animations.enabled||t.globals.resized||t.globals.dataChanged?o.attr({fill:a}):o.animate().attr({fill:a}),i.setAttribute("fill",t.config.dataLabels.background.foreColor)}}}},{key:"bringForward",value:function(){for(var t=this.w,e=t.globals.dom.baseEl.querySelectorAll(".apexcharts-datalabels"),n=t.globals.dom.baseEl.querySelector(".apexcharts-plot-series:last-child"),i=0;i<e.length;i++)n&&n.insertBefore(e[i],n.nextSibling)}}]),t}(),H=function(){function t(e){i(this,t),this.ctx=e,this.w=e.w,this.legendInactiveClass="legend-mouseover-inactive"}return o(t,[{key:"getAllSeriesEls",value:function(){return this.w.globals.dom.baseEl.getElementsByClassName("apexcharts-series")}},{key:"getSeriesByName",value:function(t){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner .apexcharts-series[seriesName='".concat(m.escapeString(t),"']"))}},{key:"isSeriesHidden",value:function(t){var e=this.getSeriesByName(t),n=parseInt(e.getAttribute("data:realIndex"),10);return{isHidden:e.classList.contains("apexcharts-series-collapsed"),realIndex:n}}},{key:"addCollapsedClassToSeries",value:function(t,e){var n=this.w;function i(n){for(var i=0;i<n.length;i++)n[i].index===e&&t.node.classList.add("apexcharts-series-collapsed")}i(n.globals.collapsedSeries),i(n.globals.ancillaryCollapsedSeries)}},{key:"toggleSeries",value:function(t){var e=this.isSeriesHidden(t);return this.ctx.legend.legendHelpers.toggleDataSeries(e.realIndex,e.isHidden),e.isHidden}},{key:"showSeries",value:function(t){var e=this.isSeriesHidden(t);e.isHidden&&this.ctx.legend.legendHelpers.toggleDataSeries(e.realIndex,!0)}},{key:"hideSeries",value:function(t){var e=this.isSeriesHidden(t);e.isHidden||this.ctx.legend.legendHelpers.toggleDataSeries(e.realIndex,!1)}},{key:"resetSeries",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=this.w,r=m.clone(i.globals.initialSeries);i.globals.previousPaths=[],n?(i.globals.collapsedSeries=[],i.globals.ancillaryCollapsedSeries=[],i.globals.collapsedSeriesIndices=[],i.globals.ancillaryCollapsedSeriesIndices=[]):r=this.emptyCollapsedSeries(r),i.config.series=r,t&&(e&&(i.globals.zoomed=!1,this.ctx.updateHelpers.revertDefaultAxisMinMax()),this.ctx.updateHelpers._updateSeries(r,i.config.chart.animations.dynamicAnimation.enabled))}},{key:"emptyCollapsedSeries",value:function(t){for(var e=this.w,n=0;n<t.length;n++)e.globals.collapsedSeriesIndices.indexOf(n)>-1&&(t[n].data=[]);return t}},{key:"toggleSeriesOnHover",value:function(t,e){var n=this.w;e||(e=t.target);var i=n.globals.dom.baseEl.querySelectorAll(".apexcharts-series, .apexcharts-datalabels");if("mousemove"===t.type){var r=parseInt(e.getAttribute("rel"),10)-1,o=null,a=null;n.globals.axisCharts||"radialBar"===n.config.chart.type?n.globals.axisCharts?(o=n.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(r,"']")),a=n.globals.dom.baseEl.querySelector(".apexcharts-datalabels[data\\:realIndex='".concat(r,"']"))):o=n.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(r+1,"']")):o=n.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(r+1,"'] path"));for(var s=0;s<i.length;s++)i[s].classList.add(this.legendInactiveClass);null!==o&&(n.globals.axisCharts||o.parentNode.classList.remove(this.legendInactiveClass),o.classList.remove(this.legendInactiveClass),null!==a&&a.classList.remove(this.legendInactiveClass))}else if("mouseout"===t.type)for(var l=0;l<i.length;l++)i[l].classList.remove(this.legendInactiveClass)}},{key:"highlightRangeInSeries",value:function(t,e){var n=this,i=this.w,r=i.globals.dom.baseEl.getElementsByClassName("apexcharts-heatmap-rect"),o=function(t){for(var e=0;e<r.length;e++)r[e].classList[t](n.legendInactiveClass)};if("mousemove"===t.type){var a=parseInt(e.getAttribute("rel"),10)-1;o("add"),function(t){for(var e=0;e<r.length;e++){var i=parseInt(r[e].getAttribute("val"),10);i>=t.from&&i<=t.to&&r[e].classList.remove(n.legendInactiveClass)}}(i.config.plotOptions.heatmap.colorScale.ranges[a])}else"mouseout"===t.type&&o("remove")}},{key:"getActiveConfigSeriesIndex",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"asc",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=this.w,i=0;if(n.config.series.length>1)for(var r=n.config.series.map((function(t,i){return t.data&&t.data.length>0&&-1===n.globals.collapsedSeriesIndices.indexOf(i)&&(!n.globals.comboCharts||0===e.length||e.length&&e.indexOf(n.config.series[i].type)>-1)?i:-1})),o="asc"===t?0:r.length-1;"asc"===t?o<r.length:o>=0;"asc"===t?o++:o--)if(-1!==r[o]){i=r[o];break}return i}},{key:"getBarSeriesIndices",value:function(){return this.w.globals.comboCharts?this.w.config.series.map((function(t,e){return"bar"===t.type||"column"===t.type?e:-1})).filter((function(t){return-1!==t})):this.w.config.series.map((function(t,e){return e}))}},{key:"getPreviousPaths",value:function(){var t=this.w;function e(e,n,i){for(var r=e[n].childNodes,o={type:i,paths:[],realIndex:e[n].getAttribute("data:realIndex")},a=0;a<r.length;a++)if(r[a].hasAttribute("pathTo")){var s=r[a].getAttribute("pathTo");o.paths.push({d:s})}t.globals.previousPaths.push(o)}t.globals.previousPaths=[],["line","area","bar","rangebar","rangeArea","candlestick","radar"].forEach((function(n){for(var i,r=(i=n,t.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(i,"-series .apexcharts-series"))),o=0;o<r.length;o++)e(r,o,n)})),this.handlePrevBubbleScatterPaths("bubble"),this.handlePrevBubbleScatterPaths("scatter");var n=t.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(t.config.chart.type," .apexcharts-series"));if(n.length>0)for(var i=function(e){for(var n=t.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(t.config.chart.type," .apexcharts-series[data\\:realIndex='").concat(e,"'] rect")),i=[],r=function(t){var e=function(e){return n[t].getAttribute(e)},r={x:parseFloat(e("x")),y:parseFloat(e("y")),width:parseFloat(e("width")),height:parseFloat(e("height"))};i.push({rect:r,color:n[t].getAttribute("color")})},o=0;o<n.length;o++)r(o);t.globals.previousPaths.push(i)},r=0;r<n.length;r++)i(r);t.globals.axisCharts||(t.globals.previousPaths=t.globals.series)}},{key:"handlePrevBubbleScatterPaths",value:function(t){var e=this.w,n=e.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(t,"-series .apexcharts-series"));if(n.length>0)for(var i=0;i<n.length;i++){for(var r=e.globals.dom.baseEl.querySelectorAll(".apexcharts-".concat(t,"-series .apexcharts-series[data\\:realIndex='").concat(i,"'] circle")),o=[],a=0;a<r.length;a++)o.push({x:r[a].getAttribute("cx"),y:r[a].getAttribute("cy"),r:r[a].getAttribute("r")});e.globals.previousPaths.push(o)}}},{key:"clearPreviousPaths",value:function(){var t=this.w;t.globals.previousPaths=[],t.globals.allSeriesCollapsed=!1}},{key:"handleNoData",value:function(){var t=this.w,e=t.config.noData,n=new b(this.ctx),i=t.globals.svgWidth/2,r=t.globals.svgHeight/2,o="middle";if(t.globals.noData=!0,t.globals.animationEnded=!0,"left"===e.align?(i=10,o="start"):"right"===e.align&&(i=t.globals.svgWidth-10,o="end"),"top"===e.verticalAlign?r=50:"bottom"===e.verticalAlign&&(r=t.globals.svgHeight-50),i+=e.offsetX,r=r+parseInt(e.style.fontSize,10)+2+e.offsetY,void 0!==e.text&&""!==e.text){var a=n.drawText({x:i,y:r,text:e.text,textAnchor:o,fontSize:e.style.fontSize,fontFamily:e.style.fontFamily,foreColor:e.style.color,opacity:1,class:"apexcharts-text-nodata"});t.globals.dom.Paper.add(a)}}},{key:"setNullSeriesToZeroValues",value:function(t){for(var e=this.w,n=0;n<t.length;n++)if(0===t[n].length)for(var i=0;i<t[e.globals.maxValsInArrayIndex].length;i++)t[n].push(0);return t}},{key:"hasAllSeriesEqualX",value:function(){for(var t=!0,e=this.w,n=this.filteredSeriesX(),i=0;i<n.length-1;i++)if(n[i][0]!==n[i+1][0]){t=!1;break}return e.globals.allSeriesHasEqualX=t,t}},{key:"filteredSeriesX",value:function(){return this.w.globals.seriesX.map((function(t){return t.length>0?t:[]}))}}]),t}(),W=function(){function t(e){i(this,t),this.ctx=e,this.w=e.w,this.twoDSeries=[],this.threeDSeries=[],this.twoDSeriesX=[],this.seriesGoals=[],this.coreUtils=new x(this.ctx)}return o(t,[{key:"isMultiFormat",value:function(){return this.isFormatXY()||this.isFormat2DArray()}},{key:"isFormatXY",value:function(){var t=this.w.config.series.slice(),e=new H(this.ctx);if(this.activeSeriesIndex=e.getActiveConfigSeriesIndex(),void 0!==t[this.activeSeriesIndex].data&&t[this.activeSeriesIndex].data.length>0&&null!==t[this.activeSeriesIndex].data[0]&&void 0!==t[this.activeSeriesIndex].data[0].x&&null!==t[this.activeSeriesIndex].data[0])return!0}},{key:"isFormat2DArray",value:function(){var t=this.w.config.series.slice(),e=new H(this.ctx);if(this.activeSeriesIndex=e.getActiveConfigSeriesIndex(),void 0!==t[this.activeSeriesIndex].data&&t[this.activeSeriesIndex].data.length>0&&void 0!==t[this.activeSeriesIndex].data[0]&&null!==t[this.activeSeriesIndex].data[0]&&t[this.activeSeriesIndex].data[0].constructor===Array)return!0}},{key:"handleFormat2DArray",value:function(t,e){for(var n=this.w.config,i=this.w.globals,r="boxPlot"===n.chart.type||"boxPlot"===n.series[e].type,o=0;o<t[e].data.length;o++)if(void 0!==t[e].data[o][1]&&(Array.isArray(t[e].data[o][1])&&4===t[e].data[o][1].length&&!r?this.twoDSeries.push(m.parseNumber(t[e].data[o][1][3])):t[e].data[o].length>=5?this.twoDSeries.push(m.parseNumber(t[e].data[o][4])):this.twoDSeries.push(m.parseNumber(t[e].data[o][1])),i.dataFormatXNumeric=!0),"datetime"===n.xaxis.type){var a=new Date(t[e].data[o][0]);a=new Date(a).getTime(),this.twoDSeriesX.push(a)}else this.twoDSeriesX.push(t[e].data[o][0]);for(var s=0;s<t[e].data.length;s++)void 0!==t[e].data[s][2]&&(this.threeDSeries.push(t[e].data[s][2]),i.isDataXYZ=!0)}},{key:"handleFormatXY",value:function(t,e){var n=this.w.config,i=this.w.globals,r=new S(this.ctx),o=e;i.collapsedSeriesIndices.indexOf(e)>-1&&(o=this.activeSeriesIndex);for(var a=0;a<t[e].data.length;a++)void 0!==t[e].data[a].y&&(Array.isArray(t[e].data[a].y)?this.twoDSeries.push(m.parseNumber(t[e].data[a].y[t[e].data[a].y.length-1])):this.twoDSeries.push(m.parseNumber(t[e].data[a].y))),void 0!==t[e].data[a].goals&&Array.isArray(t[e].data[a].goals)?(void 0===this.seriesGoals[e]&&(this.seriesGoals[e]=[]),this.seriesGoals[e].push(t[e].data[a].goals)):(void 0===this.seriesGoals[e]&&(this.seriesGoals[e]=[]),this.seriesGoals[e].push(null));for(var s=0;s<t[o].data.length;s++){var l="string"==typeof t[o].data[s].x,c=Array.isArray(t[o].data[s].x),u=!c&&!!r.isValidDate(t[o].data[s].x);if(l||u)if(l||n.xaxis.convertedCatToNumeric){var h=i.isBarHorizontal&&i.isRangeData;"datetime"!==n.xaxis.type||h?(this.fallbackToCategory=!0,this.twoDSeriesX.push(t[o].data[s].x),isNaN(t[o].data[s].x)||"category"===this.w.config.xaxis.type||"string"==typeof t[o].data[s].x||(i.isXNumeric=!0)):this.twoDSeriesX.push(r.parseDate(t[o].data[s].x))}else"datetime"===n.xaxis.type?this.twoDSeriesX.push(r.parseDate(t[o].data[s].x.toString())):(i.dataFormatXNumeric=!0,i.isXNumeric=!0,this.twoDSeriesX.push(parseFloat(t[o].data[s].x)));else c?(this.fallbackToCategory=!0,this.twoDSeriesX.push(t[o].data[s].x)):(i.isXNumeric=!0,i.dataFormatXNumeric=!0,this.twoDSeriesX.push(t[o].data[s].x))}if(t[e].data[0]&&void 0!==t[e].data[0].z){for(var d=0;d<t[e].data.length;d++)this.threeDSeries.push(t[e].data[d].z);i.isDataXYZ=!0}}},{key:"handleRangeData",value:function(t,e){var n=this.w.globals,i={};return this.isFormat2DArray()?i=this.handleRangeDataFormat("array",t,e):this.isFormatXY()&&(i=this.handleRangeDataFormat("xy",t,e)),n.seriesRangeStart.push(void 0===i.start?[]:i.start),n.seriesRangeEnd.push(void 0===i.end?[]:i.end),n.seriesRange.push(i.rangeUniques),n.seriesRange.forEach((function(t,e){t&&t.forEach((function(t,e){t.y.forEach((function(e,n){for(var i=0;i<t.y.length;i++)if(n!==i){var r=e.y1,o=e.y2,a=t.y[i].y1;r<=t.y[i].y2&&a<=o&&(t.overlaps.indexOf(e.rangeName)<0&&t.overlaps.push(e.rangeName),t.overlaps.indexOf(t.y[i].rangeName)<0&&t.overlaps.push(t.y[i].rangeName))}}))}))})),i}},{key:"handleCandleStickBoxData",value:function(t,e){var n=this.w.globals,i={};return this.isFormat2DArray()?i=this.handleCandleStickBoxDataFormat("array",t,e):this.isFormatXY()&&(i=this.handleCandleStickBoxDataFormat("xy",t,e)),n.seriesCandleO[e]=i.o,n.seriesCandleH[e]=i.h,n.seriesCandleM[e]=i.m,n.seriesCandleL[e]=i.l,n.seriesCandleC[e]=i.c,i}},{key:"handleRangeDataFormat",value:function(t,e,n){var i=[],r=[],o=e[n].data.filter((function(t,e,n){return e===n.findIndex((function(e){return e.x===t.x}))})).map((function(t,e){return{x:t.x,overlaps:[],y:[]}}));if("array"===t)for(var a=0;a<e[n].data.length;a++)Array.isArray(e[n].data[a])?(i.push(e[n].data[a][1][0]),r.push(e[n].data[a][1][1])):(i.push(e[n].data[a]),r.push(e[n].data[a]));else if("xy"===t)for(var s=function(t){var a=Array.isArray(e[n].data[t].y),s=m.randomId(),l=e[n].data[t].x,c={y1:a?e[n].data[t].y[0]:e[n].data[t].y,y2:a?e[n].data[t].y[1]:e[n].data[t].y,rangeName:s};e[n].data[t].rangeName=s;var u=o.findIndex((function(t){return t.x===l}));o[u].y.push(c),i.push(c.y1),r.push(c.y2)},l=0;l<e[n].data.length;l++)s(l);return{start:i,end:r,rangeUniques:o}}},{key:"handleCandleStickBoxDataFormat",value:function(t,e,n){var i=this.w,r="boxPlot"===i.config.chart.type||"boxPlot"===i.config.series[n].type,o=[],a=[],s=[],l=[],c=[];if("array"===t)if(r&&6===e[n].data[0].length||!r&&5===e[n].data[0].length)for(var u=0;u<e[n].data.length;u++)o.push(e[n].data[u][1]),a.push(e[n].data[u][2]),r?(s.push(e[n].data[u][3]),l.push(e[n].data[u][4]),c.push(e[n].data[u][5])):(l.push(e[n].data[u][3]),c.push(e[n].data[u][4]));else for(var h=0;h<e[n].data.length;h++)Array.isArray(e[n].data[h][1])&&(o.push(e[n].data[h][1][0]),a.push(e[n].data[h][1][1]),r?(s.push(e[n].data[h][1][2]),l.push(e[n].data[h][1][3]),c.push(e[n].data[h][1][4])):(l.push(e[n].data[h][1][2]),c.push(e[n].data[h][1][3])));else if("xy"===t)for(var d=0;d<e[n].data.length;d++)Array.isArray(e[n].data[d].y)&&(o.push(e[n].data[d].y[0]),a.push(e[n].data[d].y[1]),r?(s.push(e[n].data[d].y[2]),l.push(e[n].data[d].y[3]),c.push(e[n].data[d].y[4])):(l.push(e[n].data[d].y[2]),c.push(e[n].data[d].y[3])));return{o:o,h:a,m:s,l:l,c:c}}},{key:"parseDataAxisCharts",value:function(t){var e,n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.ctx,r=this.w.config,o=this.w.globals,a=new S(i),s=r.labels.length>0?r.labels.slice():r.xaxis.categories.slice();if(o.isRangeBar="rangeBar"===r.chart.type&&o.isBarHorizontal,o.hasXaxisGroups="category"===r.xaxis.type&&r.xaxis.group.groups.length>0,o.hasXaxisGroups&&(o.groups=r.xaxis.group.groups),o.hasSeriesGroups=null===(e=t[0])||void 0===e?void 0:e.group,o.hasSeriesGroups){var l=[],c=p(new Set(t.map((function(t){return t.group}))));t.forEach((function(t,e){var n=c.indexOf(t.group);l[n]||(l[n]=[]),l[n].push(t.name)})),o.seriesGroups=l}for(var u=function(){for(var t=0;t<s.length;t++)if("string"==typeof s[t]){if(!a.isValidDate(s[t]))throw new Error("You have provided invalid Date format. Please provide a valid JavaScript Date");n.twoDSeriesX.push(a.parseDate(s[t]))}else n.twoDSeriesX.push(s[t])},h=0;h<t.length;h++){if(this.twoDSeries=[],this.twoDSeriesX=[],this.threeDSeries=[],void 0===t[h].data)return void console.error("It is a possibility that you may have not included 'data' property in series.");if("rangeBar"!==r.chart.type&&"rangeArea"!==r.chart.type&&"rangeBar"!==t[h].type&&"rangeArea"!==t[h].type||(o.isRangeData=!0,"rangeBar"!==r.chart.type&&"rangeArea"!==r.chart.type||this.handleRangeData(t,h)),this.isMultiFormat())this.isFormat2DArray()?this.handleFormat2DArray(t,h):this.isFormatXY()&&this.handleFormatXY(t,h),"candlestick"!==r.chart.type&&"candlestick"!==t[h].type&&"boxPlot"!==r.chart.type&&"boxPlot"!==t[h].type||this.handleCandleStickBoxData(t,h),o.series.push(this.twoDSeries),o.labels.push(this.twoDSeriesX),o.seriesX.push(this.twoDSeriesX),o.seriesGoals=this.seriesGoals,h!==this.activeSeriesIndex||this.fallbackToCategory||(o.isXNumeric=!0);else{"datetime"===r.xaxis.type?(o.isXNumeric=!0,u(),o.seriesX.push(this.twoDSeriesX)):"numeric"===r.xaxis.type&&(o.isXNumeric=!0,s.length>0&&(this.twoDSeriesX=s,o.seriesX.push(this.twoDSeriesX))),o.labels.push(this.twoDSeriesX);var d=t[h].data.map((function(t){return m.parseNumber(t)}));o.series.push(d)}o.seriesZ.push(this.threeDSeries),void 0!==t[h].name?o.seriesNames.push(t[h].name):o.seriesNames.push("series-"+parseInt(h+1,10)),void 0!==t[h].color?o.seriesColors.push(t[h].color):o.seriesColors.push(void 0)}return this.w}},{key:"parseDataNonAxisCharts",value:function(t){var e=this.w.globals,n=this.w.config;e.series=t.slice(),e.seriesNames=n.labels.slice();for(var i=0;i<e.series.length;i++)void 0===e.seriesNames[i]&&e.seriesNames.push("series-"+(i+1));return this.w}},{key:"handleExternalLabelsData",value:function(t){var e=this.w.config,n=this.w.globals;e.xaxis.categories.length>0?n.labels=e.xaxis.categories:e.labels.length>0?n.labels=e.labels.slice():this.fallbackToCategory?(n.labels=n.labels[0],n.seriesRange.length&&(n.seriesRange.map((function(t){t.forEach((function(t){n.labels.indexOf(t.x)<0&&t.x&&n.labels.push(t.x)}))})),n.labels=Array.from(new Set(n.labels.map(JSON.stringify)),JSON.parse)),e.xaxis.convertedCatToNumeric&&(new L(e).convertCatToNumericXaxis(e,this.ctx,n.seriesX[0]),this._generateExternalLabels(t))):this._generateExternalLabels(t)}},{key:"_generateExternalLabels",value:function(t){var e=this.w.globals,n=this.w.config,i=[];if(e.axisCharts){if(e.series.length>0)if(this.isFormatXY())for(var r=n.series.map((function(t,e){return t.data.filter((function(t,e,n){return n.findIndex((function(e){return e.x===t.x}))===e}))})),o=r.reduce((function(t,e,n,i){return i[t].length>e.length?t:n}),0),a=0;a<r[o].length;a++)i.push(a+1);else for(var s=0;s<e.series[e.maxValsInArrayIndex].length;s++)i.push(s+1);e.seriesX=[];for(var l=0;l<t.length;l++)e.seriesX.push(i);this.w.globals.isBarHorizontal||(e.isXNumeric=!0)}if(0===i.length){i=e.axisCharts?[]:e.series.map((function(t,e){return e+1}));for(var c=0;c<t.length;c++)e.seriesX.push(i)}e.labels=i,n.xaxis.convertedCatToNumeric&&(e.categoryLabels=i.map((function(t){return n.xaxis.labels.formatter(t)}))),e.noLabelsProvided=!0}},{key:"parseData",value:function(t){var e=this.w,n=e.config,i=e.globals;if(this.excludeCollapsedSeriesInYAxis(),this.fallbackToCategory=!1,this.ctx.core.resetGlobals(),this.ctx.core.isMultipleY(),i.axisCharts?(this.parseDataAxisCharts(t),this.coreUtils.getLargestSeries()):this.parseDataNonAxisCharts(t),n.chart.stacked){var r=new H(this.ctx);i.series=r.setNullSeriesToZeroValues(i.series)}this.coreUtils.getSeriesTotals(),i.axisCharts&&(i.stackedSeriesTotals=this.coreUtils.getStackedSeriesTotals(),i.stackedSeriesTotalsByGroups=this.coreUtils.getStackedSeriesTotalsByGroups()),this.coreUtils.getPercentSeries(),i.dataFormatXNumeric||i.isXNumeric&&("numeric"!==n.xaxis.type||0!==n.labels.length||0!==n.xaxis.categories.length)||this.handleExternalLabelsData(t);for(var o=this.coreUtils.getCategoryLabels(i.labels),a=0;a<o.length;a++)if(Array.isArray(o[a])){i.isMultiLineX=!0;break}}},{key:"excludeCollapsedSeriesInYAxis",value:function(){var t=this.w,e=[];t.globals.seriesYAxisMap.forEach((function(n,i){var r=0;n.forEach((function(e){-1!==t.globals.collapsedSeriesIndices.indexOf(e)&&r++})),r>0&&r==n.length&&e.push(i)})),t.globals.ignoreYAxisIndexes=e.map((function(t){return t}))}}]),t}(),j=function(){function t(e){i(this,t),this.ctx=e,this.w=e.w}return o(t,[{key:"scaleSvgNode",value:function(t,e){var n=parseFloat(t.getAttributeNS(null,"width")),i=parseFloat(t.getAttributeNS(null,"height"));t.setAttributeNS(null,"width",n*e),t.setAttributeNS(null,"height",i*e),t.setAttributeNS(null,"viewBox","0 0 "+n+" "+i)}},{key:"fixSvgStringForIe11",value:function(t){if(!m.isIE11())return t.replace(/&nbsp;/g,"&#160;");var e=0,n=t.replace(/xmlns="http:\/\/www.w3.org\/2000\/svg"/g,(function(t){return 2==++e?'xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:svgjs="http://svgjs.dev"':t}));return(n=n.replace(/xmlns:NS\d+=""/g,"")).replace(/NS\d+:(\w+:\w+=")/g,"$1")}},{key:"getSvgString",value:function(t){null==t&&(t=1);var e=this.w.globals.dom.Paper.svg();if(1!==t){var n=this.w.globals.dom.Paper.node.cloneNode(!0);this.scaleSvgNode(n,t),e=(new XMLSerializer).serializeToString(n)}return this.fixSvgStringForIe11(e)}},{key:"cleanup",value:function(){var t=this.w,e=t.globals.dom.baseEl.getElementsByClassName("apexcharts-xcrosshairs"),n=t.globals.dom.baseEl.getElementsByClassName("apexcharts-ycrosshairs"),i=t.globals.dom.baseEl.querySelectorAll(".apexcharts-zoom-rect, .apexcharts-selection-rect");Array.prototype.forEach.call(i,(function(t){t.setAttribute("width",0)})),e&&e[0]&&(e[0].setAttribute("x",-500),e[0].setAttribute("x1",-500),e[0].setAttribute("x2",-500)),n&&n[0]&&(n[0].setAttribute("y",-100),n[0].setAttribute("y1",-100),n[0].setAttribute("y2",-100))}},{key:"svgUrl",value:function(){this.cleanup();var t=this.getSvgString(),e=new Blob([t],{type:"image/svg+xml;charset=utf-8"});return URL.createObjectURL(e)}},{key:"dataURI",value:function(t){var e=this;return new Promise((function(n){var i=e.w,r=t?t.scale||t.width/i.globals.svgWidth:1;e.cleanup();var o=document.createElement("canvas");o.width=i.globals.svgWidth*r,o.height=parseInt(i.globals.dom.elWrap.style.height,10)*r;var a="transparent"===i.config.chart.background?"#fff":i.config.chart.background,s=o.getContext("2d");s.fillStyle=a,s.fillRect(0,0,o.width*r,o.height*r);var l=e.getSvgString(r);if(window.canvg&&m.isIE11()){var c=window.canvg.Canvg.fromString(s,l,{ignoreClear:!0,ignoreDimensions:!0});c.start();var u=o.msToBlob();c.stop(),n({blob:u})}else{var h="data:image/svg+xml,"+encodeURIComponent(l),d=new Image;d.crossOrigin="anonymous",d.onload=function(){if(s.drawImage(d,0,0),o.msToBlob){var t=o.msToBlob();n({blob:t})}else{var e=o.toDataURL("image/png");n({imgURI:e})}},d.src=h}}))}},{key:"exportToSVG",value:function(){this.triggerDownload(this.svgUrl(),this.w.config.chart.toolbar.export.svg.filename,".svg")}},{key:"exportToPng",value:function(){var t=this;this.dataURI().then((function(e){var n=e.imgURI,i=e.blob;i?navigator.msSaveOrOpenBlob(i,t.w.globals.chartID+".png"):t.triggerDownload(n,t.w.config.chart.toolbar.export.png.filename,".png")}))}},{key:"exportToCSV",value:function(t){var e=this,n=t.series,i=t.fileName,r=t.columnDelimiter,o=void 0===r?",":r,a=t.lineDelimiter,s=void 0===a?"\n":a,l=this.w;n||(n=l.config.series);var c,u,h=[],d=[],f="",g=l.globals.series.map((function(t,e){return-1===l.globals.collapsedSeriesIndices.indexOf(e)?t:[]})),v=function(t){return"datetime"===l.config.xaxis.type&&String(t).length>=10},y=Math.max.apply(Math,p(n.map((function(t){return t.data?t.data.length:0})))),b=new W(this.ctx),x=new k(this.ctx),_=function(t){var n="";if(l.globals.axisCharts){if("category"===l.config.xaxis.type||l.config.xaxis.convertedCatToNumeric)if(l.globals.isBarHorizontal){var i=l.globals.yLabelFormatters[0],r=new H(e.ctx).getActiveConfigSeriesIndex();n=i(l.globals.labels[t],{seriesIndex:r,dataPointIndex:t,w:l})}else n=x.getLabel(l.globals.labels,l.globals.timescaleLabels,0,t).text;"datetime"===l.config.xaxis.type&&(l.config.xaxis.categories.length?n=l.config.xaxis.categories[t]:l.config.labels.length&&(n=l.config.labels[t]))}else n=l.config.labels[t];return Array.isArray(n)&&(n=n.join(" ")),m.isNumber(n)?n:n.split(o).join("")};h.push(l.config.chart.toolbar.export.csv.headerCategory),"boxPlot"===l.config.chart.type?(h.push("minimum"),h.push("q1"),h.push("median"),h.push("q3"),h.push("maximum")):"candlestick"===l.config.chart.type?(h.push("open"),h.push("high"),h.push("low"),h.push("close")):"rangeBar"===l.config.chart.type?(h.push("minimum"),h.push("maximum")):n.map((function(t,e){var n=(t.name?t.name:"series-".concat(e))+"";l.globals.axisCharts&&h.push(n.split(o).join("")?n.split(o).join(""):"series-".concat(e))})),l.globals.axisCharts||(h.push(l.config.chart.toolbar.export.csv.headerValue),d.push(h.join(o))),l.globals.allSeriesHasEqualX||!l.globals.axisCharts||l.config.xaxis.categories.length||l.config.labels.length?n.map((function(t,e){l.globals.axisCharts?function(t,e){if(h.length&&0===e&&d.push(h.join(o)),t.data){t.data=t.data.length&&t.data||p(Array(y)).map((function(){return""}));for(var i=0;i<t.data.length;i++){h=[];var r=_(i);if(r||(b.isFormatXY()?r=n[e].data[i].x:b.isFormat2DArray()&&(r=n[e].data[i]?n[e].data[i][0]:"")),0===e){h.push(v(r)?l.config.chart.toolbar.export.csv.dateFormatter(r):m.isNumber(r)?r:r.split(o).join(""));for(var a=0;a<l.globals.series.length;a++){var s;b.isFormatXY()?h.push(null===(s=n[a].data[i])||void 0===s?void 0:s.y):h.push(g[a][i])}}("candlestick"===l.config.chart.type||t.type&&"candlestick"===t.type)&&(h.pop(),h.push(l.globals.seriesCandleO[e][i]),h.push(l.globals.seriesCandleH[e][i]),h.push(l.globals.seriesCandleL[e][i]),h.push(l.globals.seriesCandleC[e][i])),("boxPlot"===l.config.chart.type||t.type&&"boxPlot"===t.type)&&(h.pop(),h.push(l.globals.seriesCandleO[e][i]),h.push(l.globals.seriesCandleH[e][i]),h.push(l.globals.seriesCandleM[e][i]),h.push(l.globals.seriesCandleL[e][i]),h.push(l.globals.seriesCandleC[e][i])),"rangeBar"===l.config.chart.type&&(h.pop(),h.push(l.globals.seriesRangeStart[e][i]),h.push(l.globals.seriesRangeEnd[e][i])),h.length&&d.push(h.join(o))}}}(t,e):((h=[]).push(l.globals.labels[e].split(o).join("")),h.push(g[e]),d.push(h.join(o)))})):(c=new Set,u={},n.forEach((function(t,e){null==t||t.data.forEach((function(t){var i,r;if(b.isFormatXY())i=t.x,r=t.y;else{if(!b.isFormat2DArray())return;i=t[0],r=t[1]}u[i]||(u[i]=Array(n.length).fill("")),u[i][e]=r,c.add(i)}))})),h.length&&d.push(h.join(o)),Array.from(c).sort().forEach((function(t){d.push([v(t)&&"datetime"===l.config.xaxis.type?l.config.chart.toolbar.export.csv.dateFormatter(t):m.isNumber(t)?t:t.split(o).join(""),u[t].join(o)])}))),f+=d.join(s),this.triggerDownload("data:text/csv; charset=utf-8,"+encodeURIComponent("\ufeff"+f),i||l.config.chart.toolbar.export.csv.filename,".csv")}},{key:"triggerDownload",value:function(t,e,n){var i=document.createElement("a");i.href=t,i.download=(e||this.w.globals.chartID)+n,document.body.appendChild(i),i.click(),document.body.removeChild(i)}}]),t}(),Y=function(){function t(e,n){i(this,t),this.ctx=e,this.elgrid=n,this.w=e.w;var r=this.w;this.axesUtils=new k(e),this.xaxisLabels=r.globals.labels.slice(),r.globals.timescaleLabels.length>0&&!r.globals.isBarHorizontal&&(this.xaxisLabels=r.globals.timescaleLabels.slice()),r.config.xaxis.overwriteCategories&&(this.xaxisLabels=r.config.xaxis.overwriteCategories),this.drawnLabels=[],this.drawnLabelsRects=[],"top"===r.config.xaxis.position?this.offY=0:this.offY=r.globals.gridHeight+1,this.offY=this.offY+r.config.xaxis.axisBorder.offsetY,this.isCategoryBarHorizontal="bar"===r.config.chart.type&&r.config.plotOptions.bar.horizontal,this.xaxisFontSize=r.config.xaxis.labels.style.fontSize,this.xaxisFontFamily=r.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=r.config.xaxis.labels.style.colors,this.xaxisBorderWidth=r.config.xaxis.axisBorder.width,this.isCategoryBarHorizontal&&(this.xaxisBorderWidth=r.config.yaxis[0].axisBorder.width.toString()),this.xaxisBorderWidth.indexOf("%")>-1?this.xaxisBorderWidth=r.globals.gridWidth*parseInt(this.xaxisBorderWidth,10)/100:this.xaxisBorderWidth=parseInt(this.xaxisBorderWidth,10),this.xaxisBorderHeight=r.config.xaxis.axisBorder.height,this.yaxis=r.config.yaxis[0]}return o(t,[{key:"drawXaxis",value:function(){var t=this.w,e=new b(this.ctx),n=e.group({class:"apexcharts-xaxis",transform:"translate(".concat(t.config.xaxis.offsetX,", ").concat(t.config.xaxis.offsetY,")")}),i=e.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(t.globals.translateXAxisX,", ").concat(t.globals.translateXAxisY,")")});n.add(i);for(var r=[],o=0;o<this.xaxisLabels.length;o++)r.push(this.xaxisLabels[o]);if(this.drawXAxisLabelAndGroup(!0,e,i,r,t.globals.isXNumeric,(function(t,e){return e})),t.globals.hasXaxisGroups){var a=t.globals.groups;r=[];for(var s=0;s<a.length;s++)r.push(a[s].title);var l={};t.config.xaxis.group.style&&(l.xaxisFontSize=t.config.xaxis.group.style.fontSize,l.xaxisFontFamily=t.config.xaxis.group.style.fontFamily,l.xaxisForeColors=t.config.xaxis.group.style.colors,l.fontWeight=t.config.xaxis.group.style.fontWeight,l.cssClass=t.config.xaxis.group.style.cssClass),this.drawXAxisLabelAndGroup(!1,e,i,r,!1,(function(t,e){return a[t].cols*e}),l)}if(void 0!==t.config.xaxis.title.text){var c=e.group({class:"apexcharts-xaxis-title"}),u=e.drawText({x:t.globals.gridWidth/2+t.config.xaxis.title.offsetX,y:this.offY+parseFloat(this.xaxisFontSize)+("bottom"===t.config.xaxis.position?t.globals.xAxisLabelsHeight:-t.globals.xAxisLabelsHeight-10)+t.config.xaxis.title.offsetY,text:t.config.xaxis.title.text,textAnchor:"middle",fontSize:t.config.xaxis.title.style.fontSize,fontFamily:t.config.xaxis.title.style.fontFamily,fontWeight:t.config.xaxis.title.style.fontWeight,foreColor:t.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+t.config.xaxis.title.style.cssClass});c.add(u),n.add(c)}if(t.config.xaxis.axisBorder.show){var h=t.globals.barPadForNumericAxis,d=e.drawLine(t.globals.padHorizontal+t.config.xaxis.axisBorder.offsetX-h,this.offY,this.xaxisBorderWidth+h,this.offY,t.config.xaxis.axisBorder.color,0,this.xaxisBorderHeight);this.elgrid&&this.elgrid.elGridBorders&&t.config.grid.show?this.elgrid.elGridBorders.add(d):n.add(d)}return n}},{key:"drawXAxisLabelAndGroup",value:function(t,e,n,i,r,o){var a,s=this,l=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{},c=[],u=[],h=this.w,d=l.xaxisFontSize||this.xaxisFontSize,p=l.xaxisFontFamily||this.xaxisFontFamily,f=l.xaxisForeColors||this.xaxisForeColors,g=l.fontWeight||h.config.xaxis.labels.style.fontWeight,m=l.cssClass||h.config.xaxis.labels.style.cssClass,v=h.globals.padHorizontal,y=i.length,b="category"===h.config.xaxis.type?h.globals.dataPoints:y;if(0===b&&y>b&&(b=y),r){var x=b>1?b-1:b;a=h.globals.gridWidth/Math.min(x,y-1),v=v+o(0,a)/2+h.config.xaxis.labels.offsetX}else a=h.globals.gridWidth/b,v=v+o(0,a)+h.config.xaxis.labels.offsetX;for(var _=function(r){var l=v-o(r,a)/2+h.config.xaxis.labels.offsetX;0===r&&1===y&&a/2===v&&1===b&&(l=h.globals.gridWidth/2);var x=s.axesUtils.getLabel(i,h.globals.timescaleLabels,l,r,c,d,t),_=28;if(h.globals.rotateXLabels&&t&&(_=22),h.config.xaxis.title.text&&"top"===h.config.xaxis.position&&(_+=parseFloat(h.config.xaxis.title.style.fontSize)+2),t||(_=_+parseFloat(d)+(h.globals.xAxisLabelsHeight-h.globals.xAxisGroupLabelsHeight)+(h.globals.rotateXLabels?10:0)),x=void 0!==h.config.xaxis.tickAmount&&"dataPoints"!==h.config.xaxis.tickAmount&&"datetime"!==h.config.xaxis.type?s.axesUtils.checkLabelBasedOnTickamount(r,x,y):s.axesUtils.checkForOverflowingLabels(r,x,y,c,u),h.config.xaxis.labels.show){var w=e.drawText({x:x.x,y:s.offY+h.config.xaxis.labels.offsetY+_-("top"===h.config.xaxis.position?h.globals.xAxisHeight+h.config.xaxis.axisTicks.height-2:0),text:x.text,textAnchor:"middle",fontWeight:x.isBold?600:g,fontSize:d,fontFamily:p,foreColor:Array.isArray(f)?t&&h.config.xaxis.convertedCatToNumeric?f[h.globals.minX+r-1]:f[r]:f,isPlainText:!1,cssClass:(t?"apexcharts-xaxis-label ":"apexcharts-xaxis-group-label ")+m});if(n.add(w),w.on("click",(function(t){if("function"==typeof h.config.chart.events.xAxisLabelClick){var e=Object.assign({},h,{labelIndex:r});h.config.chart.events.xAxisLabelClick(t,s.ctx,e)}})),t){var S=document.createElementNS(h.globals.SVGNS,"title");S.textContent=Array.isArray(x.text)?x.text.join(" "):x.text,w.node.appendChild(S),""!==x.text&&(c.push(x.text),u.push(x))}}r<y-1&&(v+=o(r+1,a))},w=0;w<=y-1;w++)_(w)}},{key:"drawXaxisInversed",value:function(t){var e,n,i=this,r=this.w,o=new b(this.ctx),a=r.config.yaxis[0].opposite?r.globals.translateYAxisX[t]:0,s=o.group({class:"apexcharts-yaxis apexcharts-xaxis-inversed",rel:t}),l=o.group({class:"apexcharts-yaxis-texts-g apexcharts-xaxis-inversed-texts-g",transform:"translate("+a+", 0)"});s.add(l);var c=[];if(r.config.yaxis[t].show)for(var u=0;u<this.xaxisLabels.length;u++)c.push(this.xaxisLabels[u]);e=r.globals.gridHeight/c.length,n=-e/2.2;var h=r.globals.yLabelFormatters[0],d=r.config.yaxis[0].labels;if(d.show)for(var p=function(a){var s=void 0===c[a]?"":c[a];s=h(s,{seriesIndex:t,dataPointIndex:a,w:r});var u=i.axesUtils.getYAxisForeColor(d.style.colors,t),p=0;Array.isArray(s)&&(p=s.length/2*parseInt(d.style.fontSize,10));var f=d.offsetX-15,g="end";i.yaxis.opposite&&(g="start"),"left"===r.config.yaxis[0].labels.align?(f=d.offsetX,g="start"):"center"===r.config.yaxis[0].labels.align?(f=d.offsetX,g="middle"):"right"===r.config.yaxis[0].labels.align&&(g="end");var m=o.drawText({x:f,y:n+e+d.offsetY-p,text:s,textAnchor:g,foreColor:Array.isArray(u)?u[a]:u,fontSize:d.style.fontSize,fontFamily:d.style.fontFamily,fontWeight:d.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+d.style.cssClass,maxWidth:d.maxWidth});l.add(m),m.on("click",(function(t){if("function"==typeof r.config.chart.events.xAxisLabelClick){var e=Object.assign({},r,{labelIndex:a});r.config.chart.events.xAxisLabelClick(t,i.ctx,e)}}));var v=document.createElementNS(r.globals.SVGNS,"title");if(v.textContent=Array.isArray(s)?s.join(" "):s,m.node.appendChild(v),0!==r.config.yaxis[t].labels.rotate){var y=o.rotateAroundCenter(m.node);m.node.setAttribute("transform","rotate(".concat(r.config.yaxis[t].labels.rotate," 0 ").concat(y.y,")"))}n+=e},f=0;f<=c.length-1;f++)p(f);if(void 0!==r.config.yaxis[0].title.text){var g=o.group({class:"apexcharts-yaxis-title apexcharts-xaxis-title-inversed",transform:"translate("+a+", 0)"}),m=o.drawText({x:r.config.yaxis[0].title.offsetX,y:r.globals.gridHeight/2+r.config.yaxis[0].title.offsetY,text:r.config.yaxis[0].title.text,textAnchor:"middle",foreColor:r.config.yaxis[0].title.style.color,fontSize:r.config.yaxis[0].title.style.fontSize,fontWeight:r.config.yaxis[0].title.style.fontWeight,fontFamily:r.config.yaxis[0].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+r.config.yaxis[0].title.style.cssClass});g.add(m),s.add(g)}var v=0;this.isCategoryBarHorizontal&&r.config.yaxis[0].opposite&&(v=r.globals.gridWidth);var y=r.config.xaxis.axisBorder;if(y.show){var x=o.drawLine(r.globals.padHorizontal+y.offsetX+v,1+y.offsetY,r.globals.padHorizontal+y.offsetX+v,r.globals.gridHeight+y.offsetY,y.color,0);this.elgrid&&this.elgrid.elGridBorders&&r.config.grid.show?this.elgrid.elGridBorders.add(x):s.add(x)}return r.config.yaxis[0].axisTicks.show&&this.axesUtils.drawYAxisTicks(v,c.length,r.config.yaxis[0].axisBorder,r.config.yaxis[0].axisTicks,0,e,s),s}},{key:"drawXaxisTicks",value:function(t,e,n){var i=this.w,r=t;if(!(t<0||t-2>i.globals.gridWidth)){var o=this.offY+i.config.xaxis.axisTicks.offsetY;if(e=e+o+i.config.xaxis.axisTicks.height,"top"===i.config.xaxis.position&&(e=o-i.config.xaxis.axisTicks.height),i.config.xaxis.axisTicks.show){var a=new b(this.ctx).drawLine(t+i.config.xaxis.axisTicks.offsetX,o+i.config.xaxis.offsetY,r+i.config.xaxis.axisTicks.offsetX,e+i.config.xaxis.offsetY,i.config.xaxis.axisTicks.color);n.add(a),a.node.classList.add("apexcharts-xaxis-tick")}}}},{key:"getXAxisTicksPositions",value:function(){var t=this.w,e=[],n=this.xaxisLabels.length,i=t.globals.padHorizontal;if(t.globals.timescaleLabels.length>0)for(var r=0;r<n;r++)i=this.xaxisLabels[r].position,e.push(i);else for(var o=n,a=0;a<o;a++){var s=o;t.globals.isXNumeric&&"bar"!==t.config.chart.type&&(s-=1),i+=t.globals.gridWidth/s,e.push(i)}return e}},{key:"xAxisLabelCorrections",value:function(){var t=this.w,e=new b(this.ctx),n=t.globals.dom.baseEl.querySelector(".apexcharts-xaxis-texts-g"),i=t.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-texts-g text:not(.apexcharts-xaxis-group-label)"),r=t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis-inversed text"),o=t.globals.dom.baseEl.querySelectorAll(".apexcharts-xaxis-inversed-texts-g text tspan");if(t.globals.rotateXLabels||t.config.xaxis.labels.rotateAlways)for(var a=0;a<i.length;a++){var s=e.rotateAroundCenter(i[a]);s.y=s.y-1,s.x=s.x+1,i[a].setAttribute("transform","rotate(".concat(t.config.xaxis.labels.rotate," ").concat(s.x," ").concat(s.y,")")),i[a].setAttribute("text-anchor","end"),n.setAttribute("transform","translate(0, ".concat(-10,")"));var l=i[a].childNodes;t.config.xaxis.labels.trim&&Array.prototype.forEach.call(l,(function(n){e.placeTextWithEllipsis(n,n.textContent,t.globals.xAxisLabelsHeight-("bottom"===t.config.legend.position?20:10))}))}else!function(){for(var n=t.globals.gridWidth/(t.globals.labels.length+1),r=0;r<i.length;r++){var o=i[r].childNodes;t.config.xaxis.labels.trim&&"datetime"!==t.config.xaxis.type&&Array.prototype.forEach.call(o,(function(t){e.placeTextWithEllipsis(t,t.textContent,n)}))}}();if(r.length>0){var c=r[r.length-1].getBBox(),u=r[0].getBBox();c.x<-20&&r[r.length-1].parentNode.removeChild(r[r.length-1]),u.x+u.width>t.globals.gridWidth&&!t.globals.isBarHorizontal&&r[0].parentNode.removeChild(r[0]);for(var h=0;h<o.length;h++)e.placeTextWithEllipsis(o[h],o[h].textContent,t.config.yaxis[0].labels.maxWidth-(t.config.yaxis[0].title.text?2*parseFloat(t.config.yaxis[0].title.style.fontSize):0)-15)}}}]),t}(),X=function(){function t(e){i(this,t),this.ctx=e,this.w=e.w;var n=this.w;this.xaxisLabels=n.globals.labels.slice(),this.axesUtils=new k(e),this.isRangeBar=n.globals.seriesRange.length&&n.globals.isBarHorizontal,n.globals.timescaleLabels.length>0&&(this.xaxisLabels=n.globals.timescaleLabels.slice())}return o(t,[{key:"drawGridArea",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,e=this.w,n=new b(this.ctx);null===t&&(t=n.group({class:"apexcharts-grid"}));var i=n.drawLine(e.globals.padHorizontal,1,e.globals.padHorizontal,e.globals.gridHeight,"transparent"),r=n.drawLine(e.globals.padHorizontal,e.globals.gridHeight,e.globals.gridWidth,e.globals.gridHeight,"transparent");return t.add(r),t.add(i),t}},{key:"drawGrid",value:function(){var t=null;return this.w.globals.axisCharts&&(t=this.renderGrid(),this.drawGridArea(t.el)),t}},{key:"createGridMask",value:function(){var t=this.w,e=t.globals,n=new b(this.ctx),i=Array.isArray(t.config.stroke.width)?0:t.config.stroke.width;if(Array.isArray(t.config.stroke.width)){var r=0;t.config.stroke.width.forEach((function(t){r=Math.max(r,t)})),i=r}e.dom.elGridRectMask=document.createElementNS(e.SVGNS,"clipPath"),e.dom.elGridRectMask.setAttribute("id","gridRectMask".concat(e.cuid)),e.dom.elGridRectMarkerMask=document.createElementNS(e.SVGNS,"clipPath"),e.dom.elGridRectMarkerMask.setAttribute("id","gridRectMarkerMask".concat(e.cuid)),e.dom.elForecastMask=document.createElementNS(e.SVGNS,"clipPath"),e.dom.elForecastMask.setAttribute("id","forecastMask".concat(e.cuid)),e.dom.elNonForecastMask=document.createElementNS(e.SVGNS,"clipPath"),e.dom.elNonForecastMask.setAttribute("id","nonForecastMask".concat(e.cuid));var o=t.config.chart.type,a=0,s=0;("bar"===o||"rangeBar"===o||"candlestick"===o||"boxPlot"===o||t.globals.comboBarCount>0)&&t.globals.isXNumeric&&!t.globals.isBarHorizontal&&(a=t.config.grid.padding.left,s=t.config.grid.padding.right,e.barPadForNumericAxis>a&&(a=e.barPadForNumericAxis,s=e.barPadForNumericAxis)),e.dom.elGridRect=n.drawRect(-i/2-a-2,-i/2-2,e.gridWidth+i+s+a+4,e.gridHeight+i+4,0,"#fff");var l=t.globals.markers.largestSize+1;e.dom.elGridRectMarker=n.drawRect(2*-l,2*-l,e.gridWidth+4*l,e.gridHeight+4*l,0,"#fff"),e.dom.elGridRectMask.appendChild(e.dom.elGridRect.node),e.dom.elGridRectMarkerMask.appendChild(e.dom.elGridRectMarker.node);var c=e.dom.baseEl.querySelector("defs");c.appendChild(e.dom.elGridRectMask),c.appendChild(e.dom.elForecastMask),c.appendChild(e.dom.elNonForecastMask),c.appendChild(e.dom.elGridRectMarkerMask)}},{key:"_drawGridLines",value:function(t){var e=t.i,n=t.x1,i=t.y1,r=t.x2,o=t.y2,a=t.xCount,s=t.parent,l=this.w;if(!(0===e&&l.globals.skipFirstTimelinelabel||e===a-1&&l.globals.skipLastTimelinelabel&&!l.config.xaxis.labels.formatter||"radar"===l.config.chart.type)){l.config.grid.xaxis.lines.show&&this._drawGridLine({i:e,x1:n,y1:i,x2:r,y2:o,xCount:a,parent:s});var c=0;if(l.globals.hasXaxisGroups&&"between"===l.config.xaxis.tickPlacement){var u=l.globals.groups;if(u){for(var h=0,d=0;h<e&&d<u.length;d++)h+=u[d].cols;h===e&&(c=.6*l.globals.xAxisLabelsHeight)}}new Y(this.ctx).drawXaxisTicks(n,c,l.globals.dom.elGraphical)}}},{key:"_drawGridLine",value:function(t){var e=t.i,n=t.x1,i=t.y1,r=t.x2,o=t.y2,a=t.xCount,s=t.parent,l=this.w,c=!1,u=s.node.classList.contains("apexcharts-gridlines-horizontal"),h=l.config.grid.strokeDashArray,d=l.globals.barPadForNumericAxis;(0===i&&0===o||0===n&&0===r)&&(c=!0),i===l.globals.gridHeight&&o===l.globals.gridHeight&&(c=!0),!l.globals.isBarHorizontal||0!==e&&e!==a-1||(c=!0);var p=new b(this).drawLine(n-(u?d:0),i,r+(u?d:0),o,l.config.grid.borderColor,h);p.node.classList.add("apexcharts-gridline"),c&&l.config.grid.show?this.elGridBorders.add(p):s.add(p)}},{key:"_drawGridBandRect",value:function(t){var e=t.c,n=t.x1,i=t.y1,r=t.x2,o=t.y2,a=t.type,s=this.w,l=new b(this.ctx),c=s.globals.barPadForNumericAxis;if("column"!==a||"datetime"!==s.config.xaxis.type){var u=s.config.grid[a].colors[e],h=l.drawRect(n-("row"===a?c:0),i,r+("row"===a?2*c:0),o,0,u,s.config.grid[a].opacity);this.elg.add(h),h.attr("clip-path","url(#gridRectMask".concat(s.globals.cuid,")")),h.node.classList.add("apexcharts-grid-".concat(a))}}},{key:"_drawXYLines",value:function(t){var e=this,n=t.xCount,i=t.tickAmount,r=this.w;if(r.config.grid.xaxis.lines.show||r.config.xaxis.axisTicks.show){var o,a=r.globals.padHorizontal,s=r.globals.gridHeight;r.globals.timescaleLabels.length?function(t){for(var i=t.xC,r=t.x1,o=t.y1,a=t.x2,s=t.y2,l=0;l<i;l++)r=e.xaxisLabels[l].position,a=e.xaxisLabels[l].position,e._drawGridLines({i:l,x1:r,y1:o,x2:a,y2:s,xCount:n,parent:e.elgridLinesV})}({xC:n,x1:a,y1:0,x2:o,y2:s}):(r.globals.isXNumeric&&(n=r.globals.xAxisScale.result.length),function(t){for(var i=t.xC,o=t.x1,a=t.y1,s=t.x2,l=t.y2,c=0;c<i+(r.globals.isXNumeric?0:1);c++)0===c&&1===i&&1===r.globals.dataPoints&&(s=o=r.globals.gridWidth/2),e._drawGridLines({i:c,x1:o,y1:a,x2:s,y2:l,xCount:n,parent:e.elgridLinesV}),s=o+=r.globals.gridWidth/(r.globals.isXNumeric?i-1:i)}({xC:n,x1:a,y1:0,x2:o,y2:s}))}if(r.config.grid.yaxis.lines.show){var l=0,c=0,u=r.globals.gridWidth,h=i+1;this.isRangeBar&&(h=r.globals.labels.length);for(var d=0;d<h+(this.isRangeBar?1:0);d++)this._drawGridLine({i:d,xCount:h+(this.isRangeBar?1:0),x1:0,y1:l,x2:u,y2:c,parent:this.elgridLinesH}),c=l+=r.globals.gridHeight/(this.isRangeBar?h:i)}}},{key:"_drawInvertedXYLines",value:function(t){var e=t.xCount,n=this.w;if(n.config.grid.xaxis.lines.show||n.config.xaxis.axisTicks.show)for(var i,r=n.globals.padHorizontal,o=n.globals.gridHeight,a=0;a<e+1;a++)n.config.grid.xaxis.lines.show&&this._drawGridLine({i:a,xCount:e+1,x1:r,y1:0,x2:i,y2:o,parent:this.elgridLinesV}),new Y(this.ctx).drawXaxisTicks(r,0,n.globals.dom.elGraphical),i=r+=n.globals.gridWidth/e;if(n.config.grid.yaxis.lines.show)for(var s=0,l=0,c=n.globals.gridWidth,u=0;u<n.globals.dataPoints+1;u++)this._drawGridLine({i:u,xCount:n.globals.dataPoints+1,x1:0,y1:s,x2:c,y2:l,parent:this.elgridLinesH}),l=s+=n.globals.gridHeight/n.globals.dataPoints}},{key:"renderGrid",value:function(){var t=this.w,e=new b(this.ctx);this.elg=e.group({class:"apexcharts-grid"}),this.elgridLinesH=e.group({class:"apexcharts-gridlines-horizontal"}),this.elgridLinesV=e.group({class:"apexcharts-gridlines-vertical"}),this.elGridBorders=e.group({class:"apexcharts-grid-borders"}),this.elg.add(this.elgridLinesH),this.elg.add(this.elgridLinesV),t.config.grid.show||(this.elgridLinesV.hide(),this.elgridLinesH.hide(),this.elGridBorders.hide());for(var n=0;n<t.globals.seriesYAxisMap.length&&-1!==t.globals.ignoreYAxisIndexes.indexOf(n);)n++;n===t.globals.seriesYAxisMap.length&&(n=0);var i,r,o,a,s=t.globals.yAxisScale[n].result.length-1;!t.globals.isBarHorizontal||this.isRangeBar?(i=this.xaxisLabels.length,this.isRangeBar&&(i--,s=t.globals.labels.length,t.config.xaxis.tickAmount&&t.config.xaxis.labels.formatter&&(i=t.config.xaxis.tickAmount),(null===(r=t.globals.yAxisScale)||void 0===r||null===(o=r[n])||void 0===o||null===(a=o.result)||void 0===a?void 0:a.length)>0&&"datetime"!==t.config.xaxis.type&&(i=t.globals.yAxisScale[n].result.length-1)),this._drawXYLines({xCount:i,tickAmount:s})):(i=s,s=t.globals.xTickAmount,this._drawInvertedXYLines({xCount:i,tickAmount:s}));return this.drawGridBands(i,s),{el:this.elg,elGridBorders:this.elGridBorders,xAxisTickWidth:t.globals.gridWidth/i}}},{key:"drawGridBands",value:function(t,e){var n=this.w;if(void 0!==n.config.grid.row.colors&&n.config.grid.row.colors.length>0)for(var i=0,r=n.globals.gridHeight/e,o=n.globals.gridWidth,a=0,s=0;a<e;a++,s++)s>=n.config.grid.row.colors.length&&(s=0),this._drawGridBandRect({c:s,x1:0,y1:i,x2:o,y2:r,type:"row"}),i+=n.globals.gridHeight/e;if(void 0!==n.config.grid.column.colors&&n.config.grid.column.colors.length>0)for(var l=n.globals.isBarHorizontal||"on"!==n.config.xaxis.tickPlacement||"category"!==n.config.xaxis.type&&!n.config.xaxis.convertedCatToNumeric?t:t-1,c=n.globals.padHorizontal,u=n.globals.padHorizontal+n.globals.gridWidth/l,h=n.globals.gridHeight,d=0,p=0;d<t;d++,p++)p>=n.config.grid.column.colors.length&&(p=0),this._drawGridBandRect({c:p,x1:c,y1:0,x2:u,y2:h,type:"column"}),c+=n.globals.gridWidth/l}}]),t}(),G=function(){function t(e){i(this,t),this.ctx=e,this.w=e.w}return o(t,[{key:"niceScale",value:function(t,e){var n,i,r,o,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,s=1e-11,l=this.w,c=l.globals;c.isBarHorizontal?(n=l.config.xaxis,i=Math.max((c.svgWidth-100)/25,2)):(n=l.config.yaxis[a],i=Math.max((c.svgHeight-100)/15,2)),r=void 0!==n.min&&null!==n.min,o=void 0!==n.max&&null!==n.min;var u=void 0!==n.stepSize&&null!==n.stepSize,h=void 0!==n.tickAmount&&null!==n.tickAmount,d=h?n.tickAmount:n.forceNiceScale?c.niceScaleDefaultTicks[Math.min(Math.round(i/2),c.niceScaleDefaultTicks.length-1)]:10;if(c.isMultipleYAxis&&!h&&c.multiAxisTickAmount>0&&(d=c.multiAxisTickAmount,h=!0),d="dataPoints"===d?c.dataPoints-1:Math.abs(Math.round(d)),(t===Number.MIN_VALUE&&0===e||!m.isNumber(t)&&!m.isNumber(e)||t===Number.MIN_VALUE&&e===-Number.MAX_VALUE)&&(t=0,e=d,c.allSeriesCollapsed=!1),t>e){console.warn("axis.min cannot be greater than axis.max: swapping min and max");var p=e;e=t,t=p}else t===e&&(t=0===t?0:t-1,e=0===e?2:e+1);var f=[];d<1&&(d=1);var g=d,v=Math.abs(e-t);n.forceNiceScale&&(!r&&t>0&&t/v<.15&&(t=0,r=!0),!o&&e<0&&-e/v<.15&&(e=0,o=!0),v=Math.abs(e-t));var y=v/g,b=y,x=Math.floor(Math.log10(b)),_=Math.pow(10,x),w=Math.ceil(b/_);if(y=b=(w=c.niceScaleAllowedMagMsd[0===c.yValueDecimal?0:1][w])*_,c.isBarHorizontal&&n.stepSize&&"datetime"!==n.type?(y=n.stepSize,u=!0):u&&(y=n.stepSize),u&&n.forceNiceScale){var S=Math.floor(Math.log10(y));y*=Math.pow(10,x-S)}if(r&&o){var C=v/g;if(h)if(u)if(0!=m.mod(v,y)){var k=m.getGCD(y,C);y=C/k<10?k:C}else 0==m.mod(y,C)?y=C:(C=y,h=!1);else y=C;else if(u)0==m.mod(v,y)?C=y:y=C;else if(0==m.mod(v,y))C=y;else{C=v/(g=Math.ceil(v/y));var A=m.getGCD(v,y);v/A<i&&(C=A),y=C}g=Math.round(v/y)}else{if(r||o)if(o)if(h)t=e-y*g;else{var M=t;t=y*Math.floor(t/y),Math.abs(e-t)/m.getGCD(v,y)>i&&(t=e-y*d,t+=y*Math.floor((M-t)/y))}else r&&(e=h?t+y*g:y*Math.ceil(e/y));else if(h){var T=y/(e-t>e?1:2),I=T*Math.floor(t/T);Math.abs(I-t)<=T/2?e=(t=I)+y*g:t=(e=T*Math.ceil(e/T))-y*g}else t=y*Math.floor(t/y),e=y*Math.ceil(e/y);v=Math.abs(e-t),y=m.getGCD(v,y),g=Math.round(v/y)}if(h||r||o||(g=Math.ceil((v-s)/(y+s)))>16&&m.getPrimeFactors(g).length<2&&g++,!h&&n.forceNiceScale&&0===c.yValueDecimal&&g>v&&(g=v,y=Math.round(v/g)),c.isMultipleYAxis&&0==c.multiAxisTickAmount&&(c.multiAxisTickAmount=g),g>i&&(!h&&!u||n.forceNiceScale)){var E=m.getPrimeFactors(g),O=E.length-1,D=g;t:for(var L=0;L<O;L++)for(var P=0;P<=O-L;P++){for(var N=Math.min(P+L,O),R=D,B=1,z=P;z<=N;z++)B*=E[z];if((R/=B)<i){D=R;break t}}y=D===g?v:v/D}var F=t-y,V=y*s;do{F+=y,f.push(m.stripNumber(F,7))}while(e-F>V);return{result:f,niceMin:f[0],niceMax:f[f.length-1]}}},{key:"linearScale",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:10,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,r=arguments.length>4&&void 0!==arguments[4]?arguments[4]:void 0,o=Math.abs(e-t);"dataPoints"===(n=this._adjustTicksForSmallRange(n,i,o))&&(n=this.w.globals.dataPoints-1),r||(r=o/n),n===Number.MAX_VALUE&&(n=5,r=1);for(var a=[],s=t;n>=0;)a.push(s),s+=r,n-=1;return{result:a,niceMin:a[0],niceMax:a[a.length-1]}}},{key:"logarithmicScaleNice",value:function(t,e,n){e<=0&&(e=Math.max(t,n)),t<=0&&(t=Math.min(e,n));for(var i=[],r=Math.ceil(Math.log(e)/Math.log(n)+1),o=Math.floor(Math.log(t)/Math.log(n));o<r;o++)i.push(Math.pow(n,o));return{result:i,niceMin:i[0],niceMax:i[i.length-1]}}},{key:"logarithmicScale",value:function(t,e,n){e<=0&&(e=Math.max(t,n)),t<=0&&(t=Math.min(e,n));for(var i=[],r=Math.log(e)/Math.log(n),o=Math.log(t)/Math.log(n),a=r-o,s=Math.round(a),l=a/s,c=0,u=o;c<s;c++,u+=l)i.push(Math.pow(n,u));return i.push(Math.pow(n,r)),{result:i,niceMin:t,niceMax:e}}},{key:"_adjustTicksForSmallRange",value:function(t,e,n){var i=t;if(void 0!==e&&this.w.config.yaxis[e].labels.formatter&&void 0===this.w.config.yaxis[e].tickAmount){var r=Number(this.w.config.yaxis[e].labels.formatter(1));m.isNumber(r)&&0===this.w.globals.yValueDecimal&&(i=Math.ceil(n))}return i<t?i:t}},{key:"setYScaleForIndex",value:function(t,e,n){var i=this.w.globals,r=this.w.config,o=i.isBarHorizontal?r.xaxis:r.yaxis[t];void 0===i.yAxisScale[t]&&(i.yAxisScale[t]=[]);var a=Math.abs(n-e);o.logarithmic&&a<=5&&(i.invalidLogScale=!0),o.logarithmic&&a>5?(i.allSeriesCollapsed=!1,i.yAxisScale[t]=o.forceNiceScale?this.logarithmicScaleNice(e,n,o.logBase):this.logarithmicScale(e,n,o.logBase)):n!==-Number.MAX_VALUE&&m.isNumber(n)?(i.allSeriesCollapsed=!1,i.yAxisScale[t]=this.niceScale(e,n,t)):i.yAxisScale[t]=this.linearScale(0,10,10,t,r.yaxis[t].stepSize)}},{key:"setXScale",value:function(t,e){var n=this.w,i=n.globals,r=Math.abs(e-t);return e!==-Number.MAX_VALUE&&m.isNumber(e)?i.xAxisScale=this.linearScale(t,e,n.config.xaxis.tickAmount?n.config.xaxis.tickAmount:r<10&&r>1?r+1:10,0,n.config.xaxis.stepSize):i.xAxisScale=this.linearScale(0,10,10),i.xAxisScale}},{key:"setMultipleYScales",value:function(){var t=this.w.globals,e=this.w.config,n=t.minYArr,i=t.maxYArr,r=[],o=[],a=[],s=e.yaxis.length!==e.series.length;e.series.forEach((function(t,e){a.push(e),o.push(null)})),e.yaxis.forEach((function(t,e){r[e]=[]}));var l,c=[];e.yaxis.forEach((function(t,n){var i=!1;if(t.seriesName){var o=[];Array.isArray(t.seriesName)?o=t.seriesName:o.push(t.seriesName),o.forEach((function(t){e.series.forEach((function(e,o){if(e.name===t){n===o||s?r[n].push(o):r[o].push(n),i=!0;var l=a.indexOf(o);-1!==l&&a.splice(l,1)}}))}))}i||c.push(n)})),r.forEach((function(t,e){t.forEach((function(t){o[t]=e}))}));for(var u=0;u<c.length&&(l=c[u],r[l]=[],a);u++){var h=a[0];a.shift(),r[l].push(h),o[h]=l}l&&a.forEach((function(t){r[l].push(t),o[t]=l})),t.seriesYAxisMap=r.map((function(t){return t})),t.seriesYAxisReverseMap=o.map((function(t){return t})),this.sameScaleInMultipleAxes(n,i,r)}},{key:"sameScaleInMultipleAxes",value:function(t,e,n){var i=this,r=this.w.config,o=this.w.globals;n.forEach((function(n,a){if(n.length>0){var s=Number.MAX_VALUE,l=-Number.MAX_VALUE;if(r.chart.stacked){for(var c=o.seriesX[n[0]].map((function(t){return Number.MIN_VALUE})),u=o.seriesX[n[0]].map((function(t){return Number.MIN_VALUE})),h=o.seriesX[n[0]].map((function(t){return Number.MIN_VALUE})),d=r.series[n[0]].type,p=0;p<n.length;p++){var f=n[p];if(-1===o.collapsedSeriesIndices.indexOf(f))for(var g=0;g<o.series[f].length;g++){var m=o.series[f][g];m>=0?u[g]+=m:h[g]+=m,c[g]+=m}}"bar"===d?(s=Math.min.apply(null,h),l=Math.max.apply(null,u)):(s=Math.min.apply(null,c),l=Math.max.apply(null,c))}else{for(var v=0;v<n.length;v++)s=Math.min(s,t[n[v]]);for(var y=0;y<n.length;y++)l=Math.max(l,e[n[y]])}void 0!==r.yaxis[a].min&&(s="function"==typeof r.yaxis[a].min?r.yaxis[a].min(s):r.yaxis[a].min),void 0!==r.yaxis[a].max&&(l="function"==typeof r.yaxis[a].max?r.yaxis[a].max(l):r.yaxis[a].max),i.setYScaleForIndex(a,s,l),n.forEach((function(n){t[n]=o.yAxisScale[a].niceMin,e[n]=o.yAxisScale[a].niceMax}))}}))}}]),t}(),q=function(){function t(e){i(this,t),this.ctx=e,this.w=e.w,this.scales=new G(e)}return o(t,[{key:"init",value:function(){this.setYRange(),this.setXRange(),this.setZRange()}},{key:"getMinYMaxY",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-Number.MAX_VALUE,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=this.w.config,o=this.w.globals,a=-Number.MAX_VALUE,s=Number.MIN_VALUE;null===i&&(i=t+1);var l=0,c=0,u=void 0;if(o.seriesX.length>=i){var h,d;l=0,c=(u=p(new Set((h=[]).concat.apply(h,p(o.seriesX.slice(t,i)))))).length-1;var f=null===(d=o.brushSource)||void 0===d?void 0:d.w.config.chart.brush;if(r.chart.zoom.enabled&&r.chart.zoom.autoScaleYaxis||null!=f&&f.enabled&&null!=f&&f.autoScaleYaxis){if(r.xaxis.min)for(l=0;l<c&&u[l]<r.xaxis.min;l++);if(r.xaxis.max)for(;c>l&&u[c]>r.xaxis.max;c--);}}var g=o.series,v=g,y=g;"candlestick"===r.chart.type?(v=o.seriesCandleL,y=o.seriesCandleH):"boxPlot"===r.chart.type?(v=o.seriesCandleO,y=o.seriesCandleC):o.isRangeData&&(v=o.seriesRangeStart,y=o.seriesRangeEnd);for(var b=t;b<i;b++){o.dataPoints=Math.max(o.dataPoints,g[b].length);var x=r.series[b].type;o.categoryLabels.length&&(o.dataPoints=o.categoryLabels.filter((function(t){return void 0!==t})).length),o.labels.length&&"datetime"!==r.xaxis.type&&0!==o.series.reduce((function(t,e){return t+e.length}),0)&&(o.dataPoints=Math.max(o.dataPoints,o.labels.length)),u||(l=0,c=o.series[b].length);for(var _=l;_<=c&&_<o.series[b].length;_++){var w=g[b][_];if(null!==w&&m.isNumber(w)){switch(void 0!==y[b][_]&&(a=Math.max(a,y[b][_]),e=Math.min(e,y[b][_])),void 0!==v[b][_]&&(e=Math.min(e,v[b][_]),n=Math.max(n,v[b][_])),x){case"candlestick":void 0!==o.seriesCandleC[b][_]&&(a=Math.max(a,o.seriesCandleH[b][_]),e=Math.min(e,o.seriesCandleL[b][_]));case"boxPlot":void 0!==o.seriesCandleC[b][_]&&(a=Math.max(a,o.seriesCandleC[b][_]),e=Math.min(e,o.seriesCandleO[b][_]))}x&&"candlestick"!==x&&"boxPlot"!==x&&"rangeArea"!==x&&"rangeBar"!==x&&(a=Math.max(a,o.series[b][_]),e=Math.min(e,o.series[b][_])),n=a,o.seriesGoals[b]&&o.seriesGoals[b][_]&&Array.isArray(o.seriesGoals[b][_])&&o.seriesGoals[b][_].forEach((function(t){s!==Number.MIN_VALUE&&(s=Math.min(s,t.value),e=s),a=Math.max(a,t.value),n=a})),m.isFloat(w)&&(w=m.noExponents(w),o.yValueDecimal=Math.max(o.yValueDecimal,w.toString().split(".")[1].length)),s>v[b][_]&&v[b][_]<0&&(s=v[b][_])}else o.hasNullValues=!0}"bar"!==x&&"column"!==x||(s<0&&a<0&&(a=0,n=Math.max(n,0)),s===Number.MIN_VALUE&&(s=0,e=Math.min(e,0)))}return"rangeBar"===r.chart.type&&o.seriesRangeStart.length&&o.isBarHorizontal&&(s=e),"bar"===r.chart.type&&(s<0&&a<0&&(a=0),s===Number.MIN_VALUE&&(s=0)),{minY:s,maxY:a,lowestY:e,highestY:n}}},{key:"setYRange",value:function(){var t=this.w.globals,e=this.w.config;t.maxY=-Number.MAX_VALUE,t.minY=Number.MIN_VALUE;var n,i=Number.MAX_VALUE;if(t.isMultipleYAxis){i=Number.MAX_VALUE;for(var r=0;r<t.series.length;r++)n=this.getMinYMaxY(r),t.minYArr[r]=n.lowestY,t.maxYArr[r]=n.highestY,i=Math.min(i,n.lowestY)}return n=this.getMinYMaxY(0,i,null,t.series.length),"bar"===e.chart.type?(t.minY=n.minY,t.maxY=n.maxY):(t.minY=n.lowestY,t.maxY=n.highestY),i=n.lowestY,e.chart.stacked&&this._setStackedMinMax(),"line"===e.chart.type||"area"===e.chart.type||"scatter"===e.chart.type||"candlestick"===e.chart.type||"boxPlot"===e.chart.type||"rangeBar"===e.chart.type&&!t.isBarHorizontal?t.minY===Number.MIN_VALUE&&i!==-Number.MAX_VALUE&&i!==t.maxY&&(t.minY=i):t.minY=n.minY,e.yaxis.forEach((function(e,n){void 0!==e.max&&("number"==typeof e.max?t.maxYArr[n]=e.max:"function"==typeof e.max&&(t.maxYArr[n]=e.max(t.isMultipleYAxis?t.maxYArr[n]:t.maxY)),t.maxY=t.maxYArr[n]),void 0!==e.min&&("number"==typeof e.min?t.minYArr[n]=e.min:"function"==typeof e.min&&(t.minYArr[n]=e.min(t.isMultipleYAxis?t.minYArr[n]===Number.MIN_VALUE?0:t.minYArr[n]:t.minY)),t.minY=t.minYArr[n])})),t.isBarHorizontal&&["min","max"].forEach((function(n){void 0!==e.xaxis[n]&&"number"==typeof e.xaxis[n]&&("min"===n?t.minY=e.xaxis[n]:t.maxY=e.xaxis[n])})),t.isMultipleYAxis?(this.scales.setMultipleYScales(),t.minY=i):(this.scales.setYScaleForIndex(0,t.minY,t.maxY),t.minY=t.yAxisScale[0].niceMin,t.maxY=t.yAxisScale[0].niceMax,t.minYArr[0]=t.yAxisScale[0].niceMin,t.maxYArr[0]=t.yAxisScale[0].niceMax,t.seriesYAxisMap=[t.series.map((function(t,e){return e}))],t.seriesYAxisReverseMap=t.series.map((function(t,e){return 0}))),{minY:t.minY,maxY:t.maxY,minYArr:t.minYArr,maxYArr:t.maxYArr,yAxisScale:t.yAxisScale}}},{key:"setXRange",value:function(){var t=this.w.globals,e=this.w.config,n="numeric"===e.xaxis.type||"datetime"===e.xaxis.type||"category"===e.xaxis.type&&!t.noLabelsProvided||t.noLabelsProvided||t.isXNumeric;if(t.isXNumeric&&function(){for(var e=0;e<t.series.length;e++)if(t.labels[e])for(var n=0;n<t.labels[e].length;n++)null!==t.labels[e][n]&&m.isNumber(t.labels[e][n])&&(t.maxX=Math.max(t.maxX,t.labels[e][n]),t.initialMaxX=Math.max(t.maxX,t.labels[e][n]),t.minX=Math.min(t.minX,t.labels[e][n]),t.initialMinX=Math.min(t.minX,t.labels[e][n]))}(),t.noLabelsProvided&&0===e.xaxis.categories.length&&(t.maxX=t.labels[t.labels.length-1],t.initialMaxX=t.labels[t.labels.length-1],t.minX=1,t.initialMinX=1),t.isXNumeric||t.noLabelsProvided||t.dataFormatXNumeric){var i;if(void 0===e.xaxis.tickAmount?(i=Math.round(t.svgWidth/150),"numeric"===e.xaxis.type&&t.dataPoints<30&&(i=t.dataPoints-1),i>t.dataPoints&&0!==t.dataPoints&&(i=t.dataPoints-1)):"dataPoints"===e.xaxis.tickAmount?(t.series.length>1&&(i=t.series[t.maxValsInArrayIndex].length-1),t.isXNumeric&&(i=t.maxX-t.minX-1)):i=e.xaxis.tickAmount,t.xTickAmount=i,void 0!==e.xaxis.max&&"number"==typeof e.xaxis.max&&(t.maxX=e.xaxis.max),void 0!==e.xaxis.min&&"number"==typeof e.xaxis.min&&(t.minX=e.xaxis.min),void 0!==e.xaxis.range&&(t.minX=t.maxX-e.xaxis.range),t.minX!==Number.MAX_VALUE&&t.maxX!==-Number.MAX_VALUE)if(e.xaxis.convertedCatToNumeric&&!t.dataFormatXNumeric){for(var r=[],o=t.minX-1;o<t.maxX;o++)r.push(o+1);t.xAxisScale={result:r,niceMin:r[0],niceMax:r[r.length-1]}}else t.xAxisScale=this.scales.setXScale(t.minX,t.maxX);else t.xAxisScale=this.scales.linearScale(0,i,i,0,e.xaxis.stepSize),t.noLabelsProvided&&t.labels.length>0&&(t.xAxisScale=this.scales.linearScale(1,t.labels.length,i-1,0,e.xaxis.stepSize),t.seriesX=t.labels.slice());n&&(t.labels=t.xAxisScale.result.slice())}return t.isBarHorizontal&&t.labels.length&&(t.xTickAmount=t.labels.length),this._handleSingleDataPoint(),this._getMinXDiff(),{minX:t.minX,maxX:t.maxX}}},{key:"setZRange",value:function(){var t=this.w.globals;if(t.isDataXYZ)for(var e=0;e<t.series.length;e++)if(void 0!==t.seriesZ[e])for(var n=0;n<t.seriesZ[e].length;n++)null!==t.seriesZ[e][n]&&m.isNumber(t.seriesZ[e][n])&&(t.maxZ=Math.max(t.maxZ,t.seriesZ[e][n]),t.minZ=Math.min(t.minZ,t.seriesZ[e][n]))}},{key:"_handleSingleDataPoint",value:function(){var t=this.w.globals,e=this.w.config;if(t.minX===t.maxX){var n=new S(this.ctx);if("datetime"===e.xaxis.type){var i=n.getDate(t.minX);e.xaxis.labels.datetimeUTC?i.setUTCDate(i.getUTCDate()-2):i.setDate(i.getDate()-2),t.minX=new Date(i).getTime();var r=n.getDate(t.maxX);e.xaxis.labels.datetimeUTC?r.setUTCDate(r.getUTCDate()+2):r.setDate(r.getDate()+2),t.maxX=new Date(r).getTime()}else("numeric"===e.xaxis.type||"category"===e.xaxis.type&&!t.noLabelsProvided)&&(t.minX=t.minX-2,t.initialMinX=t.minX,t.maxX=t.maxX+2,t.initialMaxX=t.maxX)}}},{key:"_getMinXDiff",value:function(){var t=this.w.globals;t.isXNumeric&&t.seriesX.forEach((function(e,n){1===e.length&&e.push(t.seriesX[t.maxValsInArrayIndex][t.seriesX[t.maxValsInArrayIndex].length-1]);var i=e.slice();i.sort((function(t,e){return t-e})),i.forEach((function(e,n){if(n>0){var r=e-i[n-1];r>0&&(t.minXDiff=Math.min(r,t.minXDiff))}})),1!==t.dataPoints&&t.minXDiff!==Number.MAX_VALUE||(t.minXDiff=.5)}))}},{key:"_setStackedMinMax",value:function(){var t=this,e=this.w.globals;if(e.series.length){var n=e.seriesGroups;n.length||(n=[this.w.config.series.map((function(t){return t.name}))]);var i={},r={};n.forEach((function(n){i[n]=[],r[n]=[],t.w.config.series.map((function(t,e){return n.indexOf(t.name)>-1?e:null})).filter((function(t){return null!==t})).forEach((function(o){for(var a=0;a<e.series[e.maxValsInArrayIndex].length;a++){var s,l;void 0===i[n][a]&&(i[n][a]=0,r[n][a]=0),(t.w.config.chart.stacked&&!e.comboCharts||t.w.config.chart.stacked&&e.comboCharts&&(!t.w.config.chart.stackOnlyBar||"bar"===(null===(s=t.w.config.series)||void 0===s||null===(l=s[o])||void 0===l?void 0:l.type)))&&null!==e.series[o][a]&&m.isNumber(e.series[o][a])&&(e.series[o][a]>0?i[n][a]+=parseFloat(e.series[o][a])+1e-4:r[n][a]+=parseFloat(e.series[o][a]))}}))})),Object.entries(i).forEach((function(t){var n=d(t,1)[0];i[n].forEach((function(t,o){e.maxY=Math.max(e.maxY,i[n][o]),e.minY=Math.min(e.minY,r[n][o])}))}))}}}]),t}(),U=function(){function t(e,n){i(this,t),this.ctx=e,this.elgrid=n,this.w=e.w;var r=this.w;this.xaxisFontSize=r.config.xaxis.labels.style.fontSize,this.axisFontFamily=r.config.xaxis.labels.style.fontFamily,this.xaxisForeColors=r.config.xaxis.labels.style.colors,this.isCategoryBarHorizontal="bar"===r.config.chart.type&&r.config.plotOptions.bar.horizontal,this.xAxisoffX=0,"bottom"===r.config.xaxis.position&&(this.xAxisoffX=r.globals.gridHeight),this.drawnLabels=[],this.axesUtils=new k(e)}return o(t,[{key:"drawYaxis",value:function(t){var e=this,n=this.w,i=new b(this.ctx),r=n.config.yaxis[t].labels.style,o=r.fontSize,a=r.fontFamily,s=r.fontWeight,l=i.group({class:"apexcharts-yaxis",rel:t,transform:"translate("+n.globals.translateYAxisX[t]+", 0)"});if(this.axesUtils.isYAxisHidden(t))return l;var c=i.group({class:"apexcharts-yaxis-texts-g"});l.add(c);var u=n.globals.yAxisScale[t].result.length-1,h=n.globals.gridHeight/u,d=n.globals.translateY,p=n.globals.yLabelFormatters[t],f=n.globals.yAxisScale[t].result.slice();f=this.axesUtils.checkForReversedLabels(t,f);var g="";if(n.config.yaxis[t].labels.show)for(var m=function(l){var m=f[l];m=p(m,l,n);var v=n.config.yaxis[t].labels.padding;n.config.yaxis[t].opposite&&0!==n.config.yaxis.length&&(v*=-1);var y="end";n.config.yaxis[t].opposite&&(y="start"),"left"===n.config.yaxis[t].labels.align?y="start":"center"===n.config.yaxis[t].labels.align?y="middle":"right"===n.config.yaxis[t].labels.align&&(y="end");var b=e.axesUtils.getYAxisForeColor(r.colors,t),x=n.config.yaxis[t].labels.offsetY;"heatmap"===n.config.chart.type&&(x-=(n.globals.gridHeight/n.globals.series.length-1)/2);var _=i.drawText({x:v,y:d+u/10+x+1,text:m,textAnchor:y,fontSize:o,fontFamily:a,fontWeight:s,maxWidth:n.config.yaxis[t].labels.maxWidth,foreColor:Array.isArray(b)?b[l]:b,isPlainText:!1,cssClass:"apexcharts-yaxis-label "+r.cssClass});l===u&&(g=_),c.add(_);var w=document.createElementNS(n.globals.SVGNS,"title");if(w.textContent=Array.isArray(m)?m.join(" "):m,_.node.appendChild(w),0!==n.config.yaxis[t].labels.rotate){var S=i.rotateAroundCenter(g.node),C=i.rotateAroundCenter(_.node);_.node.setAttribute("transform","rotate(".concat(n.config.yaxis[t].labels.rotate," ").concat(S.x," ").concat(C.y,")"))}d+=h},v=u;v>=0;v--)m(v);if(void 0!==n.config.yaxis[t].title.text){var y=i.group({class:"apexcharts-yaxis-title"}),x=0;n.config.yaxis[t].opposite&&(x=n.globals.translateYAxisX[t]);var _=i.drawText({x:x,y:n.globals.gridHeight/2+n.globals.translateY+n.config.yaxis[t].title.offsetY,text:n.config.yaxis[t].title.text,textAnchor:"end",foreColor:n.config.yaxis[t].title.style.color,fontSize:n.config.yaxis[t].title.style.fontSize,fontWeight:n.config.yaxis[t].title.style.fontWeight,fontFamily:n.config.yaxis[t].title.style.fontFamily,cssClass:"apexcharts-yaxis-title-text "+n.config.yaxis[t].title.style.cssClass});y.add(_),l.add(y)}var w=n.config.yaxis[t].axisBorder,S=31+w.offsetX;if(n.config.yaxis[t].opposite&&(S=-31-w.offsetX),w.show){var C=i.drawLine(S,n.globals.translateY+w.offsetY-2,S,n.globals.gridHeight+n.globals.translateY+w.offsetY+2,w.color,0,w.width);l.add(C)}return n.config.yaxis[t].axisTicks.show&&this.axesUtils.drawYAxisTicks(S,u,w,n.config.yaxis[t].axisTicks,t,h,l),l}},{key:"drawYaxisInversed",value:function(t){var e=this.w,n=new b(this.ctx),i=n.group({class:"apexcharts-xaxis apexcharts-yaxis-inversed"}),r=n.group({class:"apexcharts-xaxis-texts-g",transform:"translate(".concat(e.globals.translateXAxisX,", ").concat(e.globals.translateXAxisY,")")});i.add(r);var o=e.globals.yAxisScale[t].result.length-1,a=e.globals.gridWidth/o+.1,s=a+e.config.xaxis.labels.offsetX,l=e.globals.xLabelFormatter,c=e.globals.yAxisScale[t].result.slice(),u=e.globals.timescaleLabels;u.length>0&&(this.xaxisLabels=u.slice(),o=(c=u.slice()).length),c=this.axesUtils.checkForReversedLabels(t,c);var h=u.length;if(e.config.xaxis.labels.show)for(var d=h?0:o;h?d<h:d>=0;h?d++:d--){var p=c[d];p=l(p,d,e);var f=e.globals.gridWidth+e.globals.padHorizontal-(s-a+e.config.xaxis.labels.offsetX);if(u.length){var g=this.axesUtils.getLabel(c,u,f,d,this.drawnLabels,this.xaxisFontSize);f=g.x,p=g.text,this.drawnLabels.push(g.text),0===d&&e.globals.skipFirstTimelinelabel&&(p=""),d===c.length-1&&e.globals.skipLastTimelinelabel&&(p="")}var m=n.drawText({x:f,y:this.xAxisoffX+e.config.xaxis.labels.offsetY+30-("top"===e.config.xaxis.position?e.globals.xAxisHeight+e.config.xaxis.axisTicks.height-2:0),text:p,textAnchor:"middle",foreColor:Array.isArray(this.xaxisForeColors)?this.xaxisForeColors[t]:this.xaxisForeColors,fontSize:this.xaxisFontSize,fontFamily:this.xaxisFontFamily,fontWeight:e.config.xaxis.labels.style.fontWeight,isPlainText:!1,cssClass:"apexcharts-xaxis-label "+e.config.xaxis.labels.style.cssClass});r.add(m),m.tspan(p);var v=document.createElementNS(e.globals.SVGNS,"title");v.textContent=p,m.node.appendChild(v),s+=a}return this.inversedYAxisTitleText(i),this.inversedYAxisBorder(i),i}},{key:"inversedYAxisBorder",value:function(t){var e=this.w,n=new b(this.ctx),i=e.config.xaxis.axisBorder;if(i.show){var r=0;"bar"===e.config.chart.type&&e.globals.isXNumeric&&(r-=15);var o=n.drawLine(e.globals.padHorizontal+r+i.offsetX,this.xAxisoffX,e.globals.gridWidth,this.xAxisoffX,i.color,0,i.height);this.elgrid&&this.elgrid.elGridBorders&&e.config.grid.show?this.elgrid.elGridBorders.add(o):t.add(o)}}},{key:"inversedYAxisTitleText",value:function(t){var e=this.w,n=new b(this.ctx);if(void 0!==e.config.xaxis.title.text){var i=n.group({class:"apexcharts-xaxis-title apexcharts-yaxis-title-inversed"}),r=n.drawText({x:e.globals.gridWidth/2+e.config.xaxis.title.offsetX,y:this.xAxisoffX+parseFloat(this.xaxisFontSize)+parseFloat(e.config.xaxis.title.style.fontSize)+e.config.xaxis.title.offsetY+20,text:e.config.xaxis.title.text,textAnchor:"middle",fontSize:e.config.xaxis.title.style.fontSize,fontFamily:e.config.xaxis.title.style.fontFamily,fontWeight:e.config.xaxis.title.style.fontWeight,foreColor:e.config.xaxis.title.style.color,cssClass:"apexcharts-xaxis-title-text "+e.config.xaxis.title.style.cssClass});i.add(r),t.add(i)}}},{key:"yAxisTitleRotate",value:function(t,e){var n=this.w,i=new b(this.ctx),r={width:0,height:0},o={width:0,height:0},a=n.globals.dom.baseEl.querySelector(" .apexcharts-yaxis[rel='".concat(t,"'] .apexcharts-yaxis-texts-g"));null!==a&&(r=a.getBoundingClientRect());var s=n.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(t,"'] .apexcharts-yaxis-title text"));if(null!==s&&(o=s.getBoundingClientRect()),null!==s){var l=this.xPaddingForYAxisTitle(t,r,o,e);s.setAttribute("x",l.xPos-(e?10:0))}if(null!==s){var c=i.rotateAroundCenter(s);s.setAttribute("transform","rotate(".concat(e?-1*n.config.yaxis[t].title.rotate:n.config.yaxis[t].title.rotate," ").concat(c.x," ").concat(c.y,")"))}}},{key:"xPaddingForYAxisTitle",value:function(t,e,n,i){var r=this.w,o=0,a=0,s=10;return void 0===r.config.yaxis[t].title.text||t<0?{xPos:a,padd:0}:(i?(a=e.width+r.config.yaxis[t].title.offsetX+n.width/2+s/2,0===(o+=1)&&(a-=s/2)):(a=-1*e.width+r.config.yaxis[t].title.offsetX+s/2+n.width/2,r.globals.isBarHorizontal&&(s=25,a=-1*e.width-r.config.yaxis[t].title.offsetX-s)),{xPos:a,padd:s})}},{key:"setYAxisXPosition",value:function(t,e){var n=this.w,i=0,r=0,o=18,a=1;n.config.yaxis.length>1&&(this.multipleYs=!0),n.config.yaxis.map((function(s,l){var c=n.globals.ignoreYAxisIndexes.indexOf(l)>-1||!s.show||s.floating||0===t[l].width,u=t[l].width+e[l].width;s.opposite?n.globals.isBarHorizontal?(r=n.globals.gridWidth+n.globals.translateX-1,n.globals.translateYAxisX[l]=r-s.labels.offsetX):(r=n.globals.gridWidth+n.globals.translateX+a,c||(a=a+u+20),n.globals.translateYAxisX[l]=r-s.labels.offsetX+20):(i=n.globals.translateX-o,c||(o=o+u+20),n.globals.translateYAxisX[l]=i+s.labels.offsetX)}))}},{key:"setYAxisTextAlignments",value:function(){var t=this.w,e=t.globals.dom.baseEl.getElementsByClassName("apexcharts-yaxis");(e=m.listToArray(e)).forEach((function(e,n){var i=t.config.yaxis[n];if(i&&!i.floating&&void 0!==i.labels.align){var r=t.globals.dom.baseEl.querySelector(".apexcharts-yaxis[rel='".concat(n,"'] .apexcharts-yaxis-texts-g")),o=t.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxis[rel='".concat(n,"'] .apexcharts-yaxis-label"));o=m.listToArray(o);var a=r.getBoundingClientRect();"left"===i.labels.align?(o.forEach((function(t,e){t.setAttribute("text-anchor","start")})),i.opposite||r.setAttribute("transform","translate(-".concat(a.width,", 0)"))):"center"===i.labels.align?(o.forEach((function(t,e){t.setAttribute("text-anchor","middle")})),r.setAttribute("transform","translate(".concat(a.width/2*(i.opposite?1:-1),", 0)"))):"right"===i.labels.align&&(o.forEach((function(t,e){t.setAttribute("text-anchor","end")})),i.opposite&&r.setAttribute("transform","translate(".concat(a.width,", 0)")))}}))}}]),t}(),$=function(){function t(e){i(this,t),this.ctx=e,this.w=e.w,this.documentEvent=m.bind(this.documentEvent,this)}return o(t,[{key:"addEventListener",value:function(t,e){var n=this.w;n.globals.events.hasOwnProperty(t)?n.globals.events[t].push(e):n.globals.events[t]=[e]}},{key:"removeEventListener",value:function(t,e){var n=this.w;if(n.globals.events.hasOwnProperty(t)){var i=n.globals.events[t].indexOf(e);-1!==i&&n.globals.events[t].splice(i,1)}}},{key:"fireEvent",value:function(t,e){var n=this.w;if(n.globals.events.hasOwnProperty(t)){e&&e.length||(e=[]);for(var i=n.globals.events[t],r=i.length,o=0;o<r;o++)i[o].apply(null,e)}}},{key:"setupEventHandlers",value:function(){var t=this,e=this.w,n=this.ctx,i=e.globals.dom.baseEl.querySelector(e.globals.chartClass);this.ctx.eventList.forEach((function(t){i.addEventListener(t,(function(t){var i=Object.assign({},e,{seriesIndex:e.globals.capturedSeriesIndex,dataPointIndex:e.globals.capturedDataPointIndex});"mousemove"===t.type||"touchmove"===t.type?"function"==typeof e.config.chart.events.mouseMove&&e.config.chart.events.mouseMove(t,n,i):"mouseleave"===t.type||"touchleave"===t.type?"function"==typeof e.config.chart.events.mouseLeave&&e.config.chart.events.mouseLeave(t,n,i):("mouseup"===t.type&&1===t.which||"touchend"===t.type)&&("function"==typeof e.config.chart.events.click&&e.config.chart.events.click(t,n,i),n.ctx.events.fireEvent("click",[t,n,i]))}),{capture:!1,passive:!0})})),this.ctx.eventList.forEach((function(n){e.globals.dom.baseEl.addEventListener(n,t.documentEvent,{passive:!0})})),this.ctx.core.setupBrushHandler()}},{key:"documentEvent",value:function(t){var e=this.w,n=t.target.className;if("click"===t.type){var i=e.globals.dom.baseEl.querySelector(".apexcharts-menu");i&&i.classList.contains("apexcharts-menu-open")&&"apexcharts-menu-icon"!==n&&i.classList.remove("apexcharts-menu-open")}e.globals.clientX="touchmove"===t.type?t.touches[0].clientX:t.clientX,e.globals.clientY="touchmove"===t.type?t.touches[0].clientY:t.clientY}}]),t}(),Z=function(){function t(e){i(this,t),this.ctx=e,this.w=e.w}return o(t,[{key:"setCurrentLocaleValues",value:function(t){var e=this.w.config.chart.locales;window.Apex.chart&&window.Apex.chart.locales&&window.Apex.chart.locales.length>0&&(e=this.w.config.chart.locales.concat(window.Apex.chart.locales));var n=e.filter((function(e){return e.name===t}))[0];if(!n)throw new Error("Wrong locale name provided. Please make sure you set the correct locale name in options");var i=m.extend(T,n);this.w.globals.locale=i.options}}]),t}(),K=function(){function t(e){i(this,t),this.ctx=e,this.w=e.w}return o(t,[{key:"drawAxis",value:function(t,e){var n,i,r=this,o=this.w.globals,a=this.w.config,s=new Y(this.ctx,e),l=new U(this.ctx,e);o.axisCharts&&"radar"!==t&&(o.isBarHorizontal?(i=l.drawYaxisInversed(0),n=s.drawXaxisInversed(0),o.dom.elGraphical.add(n),o.dom.elGraphical.add(i)):(n=s.drawXaxis(),o.dom.elGraphical.add(n),a.yaxis.map((function(t,e){if(-1===o.ignoreYAxisIndexes.indexOf(e)&&(i=l.drawYaxis(e),o.dom.Paper.add(i),"back"===r.w.config.grid.position)){var n=o.dom.Paper.children()[1];n.remove(),o.dom.Paper.add(n)}}))))}}]),t}(),Q=function(){function t(e){i(this,t),this.ctx=e,this.w=e.w}return o(t,[{key:"drawXCrosshairs",value:function(){var t=this.w,e=new b(this.ctx),n=new y(this.ctx),i=t.config.xaxis.crosshairs.fill.gradient,r=t.config.xaxis.crosshairs.dropShadow,o=t.config.xaxis.crosshairs.fill.type,a=i.colorFrom,s=i.colorTo,l=i.opacityFrom,c=i.opacityTo,u=i.stops,h=r.enabled,d=r.left,p=r.top,f=r.blur,g=r.color,v=r.opacity,x=t.config.xaxis.crosshairs.fill.color;if(t.config.xaxis.crosshairs.show){"gradient"===o&&(x=e.drawGradient("vertical",a,s,l,c,null,u,null));var _=e.drawRect();1===t.config.xaxis.crosshairs.width&&(_=e.drawLine());var w=t.globals.gridHeight;(!m.isNumber(w)||w<0)&&(w=0);var S=t.config.xaxis.crosshairs.width;(!m.isNumber(S)||S<0)&&(S=0),_.attr({class:"apexcharts-xcrosshairs",x:0,y:0,y2:w,width:S,height:w,fill:x,filter:"none","fill-opacity":t.config.xaxis.crosshairs.opacity,stroke:t.config.xaxis.crosshairs.stroke.color,"stroke-width":t.config.xaxis.crosshairs.stroke.width,"stroke-dasharray":t.config.xaxis.crosshairs.stroke.dashArray}),h&&(_=n.dropShadow(_,{left:d,top:p,blur:f,color:g,opacity:v})),t.globals.dom.elGraphical.add(_)}}},{key:"drawYCrosshairs",value:function(){var t=this.w,e=new b(this.ctx),n=t.config.yaxis[0].crosshairs,i=t.globals.barPadForNumericAxis;if(t.config.yaxis[0].crosshairs.show){var r=e.drawLine(-i,0,t.globals.gridWidth+i,0,n.stroke.color,n.stroke.dashArray,n.stroke.width);r.attr({class:"apexcharts-ycrosshairs"}),t.globals.dom.elGraphical.add(r)}var o=e.drawLine(-i,0,t.globals.gridWidth+i,0,n.stroke.color,0,0);o.attr({class:"apexcharts-ycrosshairs-hidden"}),t.globals.dom.elGraphical.add(o)}}]),t}(),J=function(){function t(e){i(this,t),this.ctx=e,this.w=e.w}return o(t,[{key:"checkResponsiveConfig",value:function(t){var e=this,n=this.w,i=n.config;if(0!==i.responsive.length){var r=i.responsive.slice();r.sort((function(t,e){return t.breakpoint>e.breakpoint?1:e.breakpoint>t.breakpoint?-1:0})).reverse();var o=new P({}),a=function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=r[0].breakpoint,a=window.innerWidth>0?window.innerWidth:screen.width;if(a>i){var s=x.extendArrayProps(o,n.globals.initialConfig,n);t=m.extend(s,t),t=m.extend(n.config,t),e.overrideResponsiveOptions(t)}else for(var l=0;l<r.length;l++)a<r[l].breakpoint&&(t=x.extendArrayProps(o,r[l].options,n),t=m.extend(n.config,t),e.overrideResponsiveOptions(t))};if(t){var s=x.extendArrayProps(o,t,n);s=m.extend(n.config,s),a(s=m.extend(s,t))}else a({})}}},{key:"overrideResponsiveOptions",value:function(t){var e=new P(t).init({responsiveOverride:!0});this.w.config=e}}]),t}(),tt=function(){function t(e){i(this,t),this.ctx=e,this.colors=[],this.w=e.w;var n=this.w;this.isColorFn=!1,this.isHeatmapDistributed="treemap"===n.config.chart.type&&n.config.plotOptions.treemap.distributed||"heatmap"===n.config.chart.type&&n.config.plotOptions.heatmap.distributed,this.isBarDistributed=n.config.plotOptions.bar.distributed&&("bar"===n.config.chart.type||"rangeBar"===n.config.chart.type)}return o(t,[{key:"init",value:function(){this.setDefaultColors()}},{key:"setDefaultColors",value:function(){var t,e=this,n=this.w,i=new m;if(n.globals.dom.elWrap.classList.add("apexcharts-theme-".concat(n.config.theme.mode)),void 0===n.config.colors||0===(null===(t=n.config.colors)||void 0===t?void 0:t.length)?n.globals.colors=this.predefined():(n.globals.colors=n.config.colors,Array.isArray(n.config.colors)&&n.config.colors.length>0&&"function"==typeof n.config.colors[0]&&(n.globals.colors=n.config.series.map((function(t,i){var r=n.config.colors[i];return r||(r=n.config.colors[0]),"function"==typeof r?(e.isColorFn=!0,r({value:n.globals.axisCharts?n.globals.series[i][0]?n.globals.series[i][0]:0:n.globals.series[i],seriesIndex:i,dataPointIndex:i,w:n})):r})))),n.globals.seriesColors.map((function(t,e){t&&(n.globals.colors[e]=t)})),n.config.theme.monochrome.enabled){var r=[],o=n.globals.series.length;(this.isBarDistributed||this.isHeatmapDistributed)&&(o=n.globals.series[0].length*n.globals.series.length);for(var a=n.config.theme.monochrome.color,s=1/(o/n.config.theme.monochrome.shadeIntensity),l=n.config.theme.monochrome.shadeTo,c=0,u=0;u<o;u++){var h=void 0;"dark"===l?(h=i.shadeColor(-1*c,a),c+=s):(h=i.shadeColor(c,a),c+=s),r.push(h)}n.globals.colors=r.slice()}var d=n.globals.colors.slice();this.pushExtraColors(n.globals.colors),["fill","stroke"].forEach((function(t){void 0===n.config[t].colors?n.globals[t].colors=e.isColorFn?n.config.colors:d:n.globals[t].colors=n.config[t].colors.slice(),e.pushExtraColors(n.globals[t].colors)})),void 0===n.config.dataLabels.style.colors?n.globals.dataLabels.style.colors=d:n.globals.dataLabels.style.colors=n.config.dataLabels.style.colors.slice(),this.pushExtraColors(n.globals.dataLabels.style.colors,50),void 0===n.config.plotOptions.radar.polygons.fill.colors?n.globals.radarPolygons.fill.colors=["dark"===n.config.theme.mode?"#424242":"none"]:n.globals.radarPolygons.fill.colors=n.config.plotOptions.radar.polygons.fill.colors.slice(),this.pushExtraColors(n.globals.radarPolygons.fill.colors,20),void 0===n.config.markers.colors?n.globals.markers.colors=d:n.globals.markers.colors=n.config.markers.colors.slice(),this.pushExtraColors(n.globals.markers.colors)}},{key:"pushExtraColors",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=this.w,r=e||i.globals.series.length;if(null===n&&(n=this.isBarDistributed||this.isHeatmapDistributed||"heatmap"===i.config.chart.type&&i.config.plotOptions.heatmap.colorScale.inverse),n&&i.globals.series.length&&(r=i.globals.series[i.globals.maxValsInArrayIndex].length*i.globals.series.length),t.length<r)for(var o=r-t.length,a=0;a<o;a++)t.push(t[a])}},{key:"updateThemeOptions",value:function(t){t.chart=t.chart||{},t.tooltip=t.tooltip||{};var e=t.theme.mode||"light",n=t.theme.palette?t.theme.palette:"dark"===e?"palette4":"palette1",i=t.chart.foreColor?t.chart.foreColor:"dark"===e?"#f6f7f8":"#373d3f";return t.tooltip.theme=e,t.chart.foreColor=i,t.theme.palette=n,t}},{key:"predefined",value:function(){switch(this.w.config.theme.palette){case"palette1":default:this.colors=["#008FFB","#00E396","#FEB019","#FF4560","#775DD0"];break;case"palette2":this.colors=["#3f51b5","#03a9f4","#4caf50","#f9ce1d","#FF9800"];break;case"palette3":this.colors=["#33b2df","#546E7A","#d4526e","#13d8aa","#A5978B"];break;case"palette4":this.colors=["#4ecdc4","#c7f464","#81D4FA","#fd6a6a","#546E7A"];break;case"palette5":this.colors=["#2b908f","#f9a3a4","#90ee7e","#fa4443","#69d2e7"];break;case"palette6":this.colors=["#449DD1","#F86624","#EA3546","#662E9B","#C5D86D"];break;case"palette7":this.colors=["#D7263D","#1B998B","#2E294E","#F46036","#E2C044"];break;case"palette8":this.colors=["#662E9B","#F86624","#F9C80E","#EA3546","#43BCCD"];break;case"palette9":this.colors=["#5C4742","#A5978B","#8D5B4C","#5A2A27","#C4BBAF"];break;case"palette10":this.colors=["#A300D6","#7D02EB","#5653FE","#2983FF","#00B1F2"]}return this.colors}}]),t}(),et=function(){function t(e){i(this,t),this.ctx=e,this.w=e.w}return o(t,[{key:"draw",value:function(){this.drawTitleSubtitle("title"),this.drawTitleSubtitle("subtitle")}},{key:"drawTitleSubtitle",value:function(t){var e=this.w,n="title"===t?e.config.title:e.config.subtitle,i=e.globals.svgWidth/2,r=n.offsetY,o="middle";if("left"===n.align?(i=10,o="start"):"right"===n.align&&(i=e.globals.svgWidth-10,o="end"),i+=n.offsetX,r=r+parseInt(n.style.fontSize,10)+n.margin/2,void 0!==n.text){var a=new b(this.ctx).drawText({x:i,y:r,text:n.text,textAnchor:o,fontSize:n.style.fontSize,fontFamily:n.style.fontFamily,fontWeight:n.style.fontWeight,foreColor:n.style.color,opacity:1});a.node.setAttribute("class","apexcharts-".concat(t,"-text")),e.globals.dom.Paper.add(a)}}}]),t}(),nt=function(){function t(e){i(this,t),this.w=e.w,this.dCtx=e}return o(t,[{key:"getTitleSubtitleCoords",value:function(t){var e=this.w,n=0,i=0,r="title"===t?e.config.title.floating:e.config.subtitle.floating,o=e.globals.dom.baseEl.querySelector(".apexcharts-".concat(t,"-text"));if(null!==o&&!r){var a=o.getBoundingClientRect();n=a.width,i=e.globals.axisCharts?a.height+5:a.height}return{width:n,height:i}}},{key:"getLegendsRect",value:function(){var t=this.w,e=t.globals.dom.elLegendWrap;t.config.legend.height||"top"!==t.config.legend.position&&"bottom"!==t.config.legend.position||(e.style.maxHeight=t.globals.svgHeight/2+"px");var n=Object.assign({},m.getBoundingClientRect(e));return null!==e&&!t.config.legend.floating&&t.config.legend.show?this.dCtx.lgRect={x:n.x,y:n.y,height:n.height,width:0===n.height?0:n.width}:this.dCtx.lgRect={x:0,y:0,height:0,width:0},"left"!==t.config.legend.position&&"right"!==t.config.legend.position||1.5*this.dCtx.lgRect.width>t.globals.svgWidth&&(this.dCtx.lgRect.width=t.globals.svgWidth/1.5),this.dCtx.lgRect}},{key:"getLargestStringFromMultiArr",value:function(t,e){var n=t;if(this.w.globals.isMultiLineX){var i=e.map((function(t,e){return Array.isArray(t)?t.length:1})),r=Math.max.apply(Math,p(i));n=e[i.indexOf(r)]}return n}}]),t}(),it=function(){function t(e){i(this,t),this.w=e.w,this.dCtx=e}return o(t,[{key:"getxAxisLabelsCoords",value:function(){var t,e=this.w,n=e.globals.labels.slice();if(e.config.xaxis.convertedCatToNumeric&&0===n.length&&(n=e.globals.categoryLabels),e.globals.timescaleLabels.length>0){var i=this.getxAxisTimeScaleLabelsCoords();t={width:i.width,height:i.height},e.globals.rotateXLabels=!1}else{this.dCtx.lgWidthForSideLegends="left"!==e.config.legend.position&&"right"!==e.config.legend.position||e.config.legend.floating?0:this.dCtx.lgRect.width;var r=e.globals.xLabelFormatter,o=m.getLargestStringFromArr(n),a=this.dCtx.dimHelpers.getLargestStringFromMultiArr(o,n);e.globals.isBarHorizontal&&(a=o=e.globals.yAxisScale[0].result.reduce((function(t,e){return t.length>e.length?t:e}),0));var s=new C(this.dCtx.ctx),l=o;o=s.xLabelFormat(r,o,l,{i:void 0,dateFormatter:new S(this.dCtx.ctx).formatDate,w:e}),a=s.xLabelFormat(r,a,l,{i:void 0,dateFormatter:new S(this.dCtx.ctx).formatDate,w:e}),(e.config.xaxis.convertedCatToNumeric&&void 0===o||""===String(o).trim())&&(a=o="1");var c=new b(this.dCtx.ctx),u=c.getTextRects(o,e.config.xaxis.labels.style.fontSize),h=u;if(o!==a&&(h=c.getTextRects(a,e.config.xaxis.labels.style.fontSize)),(t={width:u.width>=h.width?u.width:h.width,height:u.height>=h.height?u.height:h.height}).width*n.length>e.globals.svgWidth-this.dCtx.lgWidthForSideLegends-this.dCtx.yAxisWidth-this.dCtx.gridPad.left-this.dCtx.gridPad.right&&0!==e.config.xaxis.labels.rotate||e.config.xaxis.labels.rotateAlways){if(!e.globals.isBarHorizontal){e.globals.rotateXLabels=!0;var d=function(t){return c.getTextRects(t,e.config.xaxis.labels.style.fontSize,e.config.xaxis.labels.style.fontFamily,"rotate(".concat(e.config.xaxis.labels.rotate," 0 0)"),!1)};u=d(o),o!==a&&(h=d(a)),t.height=(u.height>h.height?u.height:h.height)/1.5,t.width=u.width>h.width?u.width:h.width}}else e.globals.rotateXLabels=!1}return e.config.xaxis.labels.show||(t={width:0,height:0}),{width:t.width,height:t.height}}},{key:"getxAxisGroupLabelsCoords",value:function(){var t,e=this.w;if(!e.globals.hasXaxisGroups)return{width:0,height:0};var n,i=(null===(t=e.config.xaxis.group.style)||void 0===t?void 0:t.fontSize)||e.config.xaxis.labels.style.fontSize,r=e.globals.groups.map((function(t){return t.title})),o=m.getLargestStringFromArr(r),a=this.dCtx.dimHelpers.getLargestStringFromMultiArr(o,r),s=new b(this.dCtx.ctx),l=s.getTextRects(o,i),c=l;return o!==a&&(c=s.getTextRects(a,i)),n={width:l.width>=c.width?l.width:c.width,height:l.height>=c.height?l.height:c.height},e.config.xaxis.labels.show||(n={width:0,height:0}),{width:n.width,height:n.height}}},{key:"getxAxisTitleCoords",value:function(){var t=this.w,e=0,n=0;if(void 0!==t.config.xaxis.title.text){var i=new b(this.dCtx.ctx).getTextRects(t.config.xaxis.title.text,t.config.xaxis.title.style.fontSize);e=i.width,n=i.height}return{width:e,height:n}}},{key:"getxAxisTimeScaleLabelsCoords",value:function(){var t,e=this.w;this.dCtx.timescaleLabels=e.globals.timescaleLabels.slice();var n=this.dCtx.timescaleLabels.map((function(t){return t.value})),i=n.reduce((function(t,e){return void 0===t?(console.error("You have possibly supplied invalid Date format. Please supply a valid JavaScript Date"),0):t.length>e.length?t:e}),0);return 1.05*(t=new b(this.dCtx.ctx).getTextRects(i,e.config.xaxis.labels.style.fontSize)).width*n.length>e.globals.gridWidth&&0!==e.config.xaxis.labels.rotate&&(e.globals.overlappingXLabels=!0),t}},{key:"additionalPaddingXLabels",value:function(t){var e=this,n=this.w,i=n.globals,r=n.config,o=r.xaxis.type,a=t.width;i.skipLastTimelinelabel=!1,i.skipFirstTimelinelabel=!1;var s=n.config.yaxis[0].opposite&&n.globals.isBarHorizontal,l=function(t,s){r.yaxis.length>1&&function(t){return-1!==i.collapsedSeriesIndices.indexOf(t)}(s)||function(t){if(e.dCtx.timescaleLabels&&e.dCtx.timescaleLabels.length){var s=e.dCtx.timescaleLabels[0],l=e.dCtx.timescaleLabels[e.dCtx.timescaleLabels.length-1].position+a/1.75-e.dCtx.yAxisWidthRight,c=s.position-a/1.75+e.dCtx.yAxisWidthLeft,u="right"===n.config.legend.position&&e.dCtx.lgRect.width>0?e.dCtx.lgRect.width:0;l>i.svgWidth-i.translateX-u&&(i.skipLastTimelinelabel=!0),c<-(t.show&&!t.floating||"bar"!==r.chart.type&&"candlestick"!==r.chart.type&&"rangeBar"!==r.chart.type&&"boxPlot"!==r.chart.type?10:a/1.75)&&(i.skipFirstTimelinelabel=!0)}else"datetime"===o?e.dCtx.gridPad.right<a&&!i.rotateXLabels&&(i.skipLastTimelinelabel=!0):"datetime"!==o&&e.dCtx.gridPad.right<a/2-e.dCtx.yAxisWidthRight&&!i.rotateXLabels&&!n.config.xaxis.labels.trim&&("between"!==n.config.xaxis.tickPlacement||n.globals.isBarHorizontal)&&(e.dCtx.xPadRight=a/2+1)}(t)};r.yaxis.forEach((function(t,n){s?(e.dCtx.gridPad.left<a&&(e.dCtx.xPadLeft=a/2+1),e.dCtx.xPadRight=a/2+1):l(t,n)}))}}]),t}(),rt=function(){function t(e){i(this,t),this.w=e.w,this.dCtx=e}return o(t,[{key:"getyAxisLabelsCoords",value:function(){var t=this,e=this.w,n=[],i=10,r=new k(this.dCtx.ctx);return e.config.yaxis.map((function(o,a){var s={seriesIndex:a,dataPointIndex:-1,w:e},l=e.globals.yAxisScale[a],c=0;if(!r.isYAxisHidden(a)&&o.labels.show&&void 0!==o.labels.minWidth&&(c=o.labels.minWidth),!r.isYAxisHidden(a)&&o.labels.show&&l.result.length){var u=e.globals.yLabelFormatters[a],h=l.niceMin===Number.MIN_VALUE?0:l.niceMin,d=l.result.reduce((function(t,e){var n,i;return(null===(n=String(u(t,s)))||void 0===n?void 0:n.length)>(null===(i=String(u(e,s)))||void 0===i?void 0:i.length)?t:e}),h),p=d=u(d,s);if(void 0!==d&&0!==d.length||(d=l.niceMax),e.globals.isBarHorizontal){i=0;var f=e.globals.labels.slice();d=m.getLargestStringFromArr(f),d=u(d,{seriesIndex:a,dataPointIndex:-1,w:e}),p=t.dCtx.dimHelpers.getLargestStringFromMultiArr(d,f)}var g=new b(t.dCtx.ctx),v="rotate(".concat(o.labels.rotate," 0 0)"),y=g.getTextRects(d,o.labels.style.fontSize,o.labels.style.fontFamily,v,!1),x=y;d!==p&&(x=g.getTextRects(p,o.labels.style.fontSize,o.labels.style.fontFamily,v,!1)),n.push({width:(c>x.width||c>y.width?c:x.width>y.width?x.width:y.width)+i,height:x.height>y.height?x.height:y.height})}else n.push({width:0,height:0})})),n}},{key:"getyAxisTitleCoords",value:function(){var t=this,e=this.w,n=[];return e.config.yaxis.map((function(e,i){if(e.show&&void 0!==e.title.text){var r=new b(t.dCtx.ctx),o="rotate(".concat(e.title.rotate," 0 0)"),a=r.getTextRects(e.title.text,e.title.style.fontSize,e.title.style.fontFamily,o,!1);n.push({width:a.width,height:a.height})}else n.push({width:0,height:0})})),n}},{key:"getTotalYAxisWidth",value:function(){var t=this.w,e=0,n=0,i=0,r=t.globals.yAxisScale.length>1?10:0,o=new k(this.dCtx.ctx),a=function(a,s){var l=t.config.yaxis[s].floating,c=0;a.width>0&&!l?(c=a.width+r,function(e){return t.globals.ignoreYAxisIndexes.indexOf(e)>-1}(s)&&(c=c-a.width-r)):c=l||o.isYAxisHidden(s)?0:5,t.config.yaxis[s].opposite?i+=c:n+=c,e+=c};return t.globals.yLabelsCoords.map((function(t,e){a(t,e)})),t.globals.yTitleCoords.map((function(t,e){a(t,e)})),t.globals.isBarHorizontal&&!t.config.yaxis[0].floating&&(e=t.globals.yLabelsCoords[0].width+t.globals.yTitleCoords[0].width+15),this.dCtx.yAxisWidthLeft=n,this.dCtx.yAxisWidthRight=i,e}}]),t}(),ot=function(){function t(e){i(this,t),this.w=e.w,this.dCtx=e}return o(t,[{key:"gridPadForColumnsInNumericAxis",value:function(t){var e=this.w;if(e.globals.noData||e.globals.allSeriesCollapsed)return 0;var n=function(t){return"bar"===t||"rangeBar"===t||"candlestick"===t||"boxPlot"===t},i=e.config.chart.type,r=0,o=n(i)?e.config.series.length:1;if(e.globals.comboBarCount>0&&(o=e.globals.comboBarCount),e.globals.collapsedSeries.forEach((function(t){n(t.type)&&(o-=1)})),e.config.chart.stacked&&(o=1),(n(i)||e.globals.comboBarCount>0)&&e.globals.isXNumeric&&!e.globals.isBarHorizontal&&o>0){var a,s,l=Math.abs(e.globals.initialMaxX-e.globals.initialMinX);l<=3&&(l=e.globals.dataPoints),a=l/t,e.globals.minXDiff&&e.globals.minXDiff/a>0&&(s=e.globals.minXDiff/a),s>t/2&&(s/=2),(r=s*parseInt(e.config.plotOptions.bar.columnWidth,10)/100)<1&&(r=1),e.globals.barPadForNumericAxis=r}return r}},{key:"gridPadFortitleSubtitle",value:function(){var t=this,e=this.w,n=e.globals,i=this.dCtx.isSparkline||!e.globals.axisCharts?0:10;["title","subtitle"].forEach((function(n){void 0!==e.config[n].text?i+=e.config[n].margin:i+=t.dCtx.isSparkline||!e.globals.axisCharts?0:5})),!e.config.legend.show||"bottom"!==e.config.legend.position||e.config.legend.floating||e.globals.axisCharts||(i+=10);var r=this.dCtx.dimHelpers.getTitleSubtitleCoords("title"),o=this.dCtx.dimHelpers.getTitleSubtitleCoords("subtitle");n.gridHeight=n.gridHeight-r.height-o.height-i,n.translateY=n.translateY+r.height+o.height+i}},{key:"setGridXPosForDualYAxis",value:function(t,e){var n=this.w,i=new k(this.dCtx.ctx);n.config.yaxis.map((function(r,o){-1!==n.globals.ignoreYAxisIndexes.indexOf(o)||r.floating||i.isYAxisHidden(o)||(r.opposite&&(n.globals.translateX=n.globals.translateX-(e[o].width+t[o].width)-parseInt(n.config.yaxis[o].labels.style.fontSize,10)/1.2-12),n.globals.translateX<2&&(n.globals.translateX=2))}))}}]),t}(),at=function(){function t(e){i(this,t),this.ctx=e,this.w=e.w,this.lgRect={},this.yAxisWidth=0,this.yAxisWidthLeft=0,this.yAxisWidthRight=0,this.xAxisHeight=0,this.isSparkline=this.w.config.chart.sparkline.enabled,this.dimHelpers=new nt(this),this.dimYAxis=new rt(this),this.dimXAxis=new it(this),this.dimGrid=new ot(this),this.lgWidthForSideLegends=0,this.gridPad=this.w.config.grid.padding,this.xPadRight=0,this.xPadLeft=0}return o(t,[{key:"plotCoords",value:function(){var t=this,e=this.w,n=e.globals;this.lgRect=this.dimHelpers.getLegendsRect(),this.isSparkline&&((e.config.markers.discrete.length>0||e.config.markers.size>0)&&Object.entries(this.gridPad).forEach((function(e){var n=d(e,2),i=n[0],r=n[1];t.gridPad[i]=Math.max(r,t.w.globals.markers.largestSize/1.5)})),this.gridPad.top=Math.max(e.config.stroke.width/2,this.gridPad.top),this.gridPad.bottom=Math.max(e.config.stroke.width/2,this.gridPad.bottom)),n.axisCharts?this.setDimensionsForAxisCharts():this.setDimensionsForNonAxisCharts(),this.dimGrid.gridPadFortitleSubtitle(),n.gridHeight=n.gridHeight-this.gridPad.top-this.gridPad.bottom,n.gridWidth=n.gridWidth-this.gridPad.left-this.gridPad.right-this.xPadRight-this.xPadLeft;var i=this.dimGrid.gridPadForColumnsInNumericAxis(n.gridWidth);n.gridWidth=n.gridWidth-2*i,n.translateX=n.translateX+this.gridPad.left+this.xPadLeft+(i>0?i+4:0),n.translateY=n.translateY+this.gridPad.top}},{key:"setDimensionsForAxisCharts",value:function(){var t=this,e=this.w,n=e.globals,i=this.dimYAxis.getyAxisLabelsCoords(),r=this.dimYAxis.getyAxisTitleCoords();e.globals.yLabelsCoords=[],e.globals.yTitleCoords=[],e.config.yaxis.map((function(t,n){e.globals.yLabelsCoords.push({width:i[n].width,index:n}),e.globals.yTitleCoords.push({width:r[n].width,index:n})})),this.yAxisWidth=this.dimYAxis.getTotalYAxisWidth();var o=this.dimXAxis.getxAxisLabelsCoords(),a=this.dimXAxis.getxAxisGroupLabelsCoords(),s=this.dimXAxis.getxAxisTitleCoords();this.conditionalChecksForAxisCoords(o,s,a),n.translateXAxisY=e.globals.rotateXLabels?this.xAxisHeight/8:-4,n.translateXAxisX=e.globals.rotateXLabels&&e.globals.isXNumeric&&e.config.xaxis.labels.rotate<=-45?-this.xAxisWidth/4:0,e.globals.isBarHorizontal&&(n.rotateXLabels=!1,n.translateXAxisY=parseInt(e.config.xaxis.labels.style.fontSize,10)/1.5*-1),n.translateXAxisY=n.translateXAxisY+e.config.xaxis.labels.offsetY,n.translateXAxisX=n.translateXAxisX+e.config.xaxis.labels.offsetX;var l=this.yAxisWidth,c=this.xAxisHeight;n.xAxisLabelsHeight=this.xAxisHeight-s.height,n.xAxisGroupLabelsHeight=n.xAxisLabelsHeight-o.height,n.xAxisLabelsWidth=this.xAxisWidth,n.xAxisHeight=this.xAxisHeight;var u=10;("radar"===e.config.chart.type||this.isSparkline)&&(l=0,c=n.goldenPadding),this.isSparkline&&(this.lgRect={height:0,width:0}),(this.isSparkline||"treemap"===e.config.chart.type)&&(l=0,c=0,u=0),this.isSparkline||this.dimXAxis.additionalPaddingXLabels(o);var h=function(){n.translateX=l,n.gridHeight=n.svgHeight-t.lgRect.height-c-(t.isSparkline||"treemap"===e.config.chart.type?0:e.globals.rotateXLabels?10:15),n.gridWidth=n.svgWidth-l};switch("top"===e.config.xaxis.position&&(u=n.xAxisHeight-e.config.xaxis.axisTicks.height-5),e.config.legend.position){case"bottom":n.translateY=u,h();break;case"top":n.translateY=this.lgRect.height+u,h();break;case"left":n.translateY=u,n.translateX=this.lgRect.width+l,n.gridHeight=n.svgHeight-c-12,n.gridWidth=n.svgWidth-this.lgRect.width-l;break;case"right":n.translateY=u,n.translateX=l,n.gridHeight=n.svgHeight-c-12,n.gridWidth=n.svgWidth-this.lgRect.width-l-5;break;default:throw new Error("Legend position not supported")}this.dimGrid.setGridXPosForDualYAxis(r,i),new U(this.ctx).setYAxisXPosition(i,r)}},{key:"setDimensionsForNonAxisCharts",value:function(){var t=this.w,e=t.globals,n=t.config,i=0;t.config.legend.show&&!t.config.legend.floating&&(i=20);var r="pie"===n.chart.type||"polarArea"===n.chart.type||"donut"===n.chart.type?"pie":"radialBar",o=n.plotOptions[r].offsetY,a=n.plotOptions[r].offsetX;if(!n.legend.show||n.legend.floating)return e.gridHeight=e.svgHeight-n.grid.padding.left+n.grid.padding.right,e.gridWidth=e.gridHeight,e.translateY=o,void(e.translateX=a+(e.svgWidth-e.gridWidth)/2);switch(n.legend.position){case"bottom":e.gridHeight=e.svgHeight-this.lgRect.height-e.goldenPadding,e.gridWidth=e.svgWidth,e.translateY=o-10,e.translateX=a+(e.svgWidth-e.gridWidth)/2;break;case"top":e.gridHeight=e.svgHeight-this.lgRect.height-e.goldenPadding,e.gridWidth=e.svgWidth,e.translateY=this.lgRect.height+o+10,e.translateX=a+(e.svgWidth-e.gridWidth)/2;break;case"left":e.gridWidth=e.svgWidth-this.lgRect.width-i,e.gridHeight="auto"!==n.chart.height?e.svgHeight:e.gridWidth,e.translateY=o,e.translateX=a+this.lgRect.width+i;break;case"right":e.gridWidth=e.svgWidth-this.lgRect.width-i-5,e.gridHeight="auto"!==n.chart.height?e.svgHeight:e.gridWidth,e.translateY=o,e.translateX=a+10;break;default:throw new Error("Legend position not supported")}}},{key:"conditionalChecksForAxisCoords",value:function(t,e,n){var i=this.w,r=i.globals.hasXaxisGroups?2:1,o=n.height+t.height+e.height,a=i.globals.isMultiLineX?1.2:i.globals.LINE_HEIGHT_RATIO,s=i.globals.rotateXLabels?22:10,l=i.globals.rotateXLabels&&"bottom"===i.config.legend.position?10:0;this.xAxisHeight=o*a+r*s+l,this.xAxisWidth=t.width,this.xAxisHeight-e.height>i.config.xaxis.labels.maxHeight&&(this.xAxisHeight=i.config.xaxis.labels.maxHeight),i.config.xaxis.labels.minHeight&&this.xAxisHeight<i.config.xaxis.labels.minHeight&&(this.xAxisHeight=i.config.xaxis.labels.minHeight),i.config.xaxis.floating&&(this.xAxisHeight=0);var c=0,u=0;i.config.yaxis.forEach((function(t){c+=t.labels.minWidth,u+=t.labels.maxWidth})),this.yAxisWidth<c&&(this.yAxisWidth=c),this.yAxisWidth>u&&(this.yAxisWidth=u)}}]),t}(),st=function(){function t(e){i(this,t),this.w=e.w,this.lgCtx=e}return o(t,[{key:"getLegendStyles",value:function(){var t,e,n,i=document.createElement("style");i.setAttribute("type","text/css");var r=(null===(t=this.lgCtx.ctx)||void 0===t||null===(e=t.opts)||void 0===e||null===(n=e.chart)||void 0===n?void 0:n.nonce)||this.w.config.chart.nonce;r&&i.setAttribute("nonce",r);var o=document.createTextNode("\n      .apexcharts-legend {\n        display: flex;\n        overflow: auto;\n        padding: 0 10px;\n      }\n      .apexcharts-legend.apx-legend-position-bottom, .apexcharts-legend.apx-legend-position-top {\n        flex-wrap: wrap\n      }\n      .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {\n        flex-direction: column;\n        bottom: 0;\n      }\n      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-left, .apexcharts-legend.apx-legend-position-top.apexcharts-align-left, .apexcharts-legend.apx-legend-position-right, .apexcharts-legend.apx-legend-position-left {\n        justify-content: flex-start;\n      }\n      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-center, .apexcharts-legend.apx-legend-position-top.apexcharts-align-center {\n        justify-content: center;\n      }\n      .apexcharts-legend.apx-legend-position-bottom.apexcharts-align-right, .apexcharts-legend.apx-legend-position-top.apexcharts-align-right {\n        justify-content: flex-end;\n      }\n      .apexcharts-legend-series {\n        cursor: pointer;\n        line-height: normal;\n      }\n      .apexcharts-legend.apx-legend-position-bottom .apexcharts-legend-series, .apexcharts-legend.apx-legend-position-top .apexcharts-legend-series{\n        display: flex;\n        align-items: center;\n      }\n      .apexcharts-legend-text {\n        position: relative;\n        font-size: 14px;\n      }\n      .apexcharts-legend-text *, .apexcharts-legend-marker * {\n        pointer-events: none;\n      }\n      .apexcharts-legend-marker {\n        position: relative;\n        display: inline-block;\n        cursor: pointer;\n        margin-right: 3px;\n        border-style: solid;\n      }\n\n      .apexcharts-legend.apexcharts-align-right .apexcharts-legend-series, .apexcharts-legend.apexcharts-align-left .apexcharts-legend-series{\n        display: inline-block;\n      }\n      .apexcharts-legend-series.apexcharts-no-click {\n        cursor: auto;\n      }\n      .apexcharts-legend .apexcharts-hidden-zero-series, .apexcharts-legend .apexcharts-hidden-null-series {\n        display: none !important;\n      }\n      .apexcharts-inactive-legend {\n        opacity: 0.45;\n      }");return i.appendChild(o),i}},{key:"getLegendBBox",value:function(){var t=this.w.globals.dom.baseEl.querySelector(".apexcharts-legend").getBoundingClientRect(),e=t.width;return{clwh:t.height,clww:e}}},{key:"appendToForeignObject",value:function(){this.w.globals.dom.elLegendForeign.appendChild(this.getLegendStyles())}},{key:"toggleDataSeries",value:function(t,e){var n=this,i=this.w;if(i.globals.axisCharts||"radialBar"===i.config.chart.type){i.globals.resized=!0;var r=null,o=null;i.globals.risingSeries=[],i.globals.axisCharts?(r=i.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(t,"']")),o=parseInt(r.getAttribute("data:realIndex"),10)):(r=i.globals.dom.baseEl.querySelector(".apexcharts-series[rel='".concat(t+1,"']")),o=parseInt(r.getAttribute("rel"),10)-1),e?[{cs:i.globals.collapsedSeries,csi:i.globals.collapsedSeriesIndices},{cs:i.globals.ancillaryCollapsedSeries,csi:i.globals.ancillaryCollapsedSeriesIndices}].forEach((function(t){n.riseCollapsedSeries(t.cs,t.csi,o)})):this.hideSeries({seriesEl:r,realIndex:o})}else{var a=i.globals.dom.Paper.select(" .apexcharts-series[rel='".concat(t+1,"'] path")),s=i.config.chart.type;if("pie"===s||"polarArea"===s||"donut"===s){var l=i.config.plotOptions.pie.donut.labels;new b(this.lgCtx.ctx).pathMouseDown(a.members[0],null),this.lgCtx.ctx.pie.printDataLabelsInner(a.members[0].node,l)}a.fire("click")}}},{key:"hideSeries",value:function(t){var e=t.seriesEl,n=t.realIndex,i=this.w,r=m.clone(i.config.series);if(i.globals.axisCharts){var o=i.config.yaxis[i.globals.seriesYAxisReverseMap[n]];if(o&&o.show&&o.showAlways)i.globals.ancillaryCollapsedSeriesIndices.indexOf(n)<0&&(i.globals.ancillaryCollapsedSeries.push({index:n,data:r[n].data.slice(),type:e.parentNode.className.baseVal.split("-")[1]}),i.globals.ancillaryCollapsedSeriesIndices.push(n));else if(i.globals.collapsedSeriesIndices.indexOf(n)<0){i.globals.collapsedSeries.push({index:n,data:r[n].data.slice(),type:e.parentNode.className.baseVal.split("-")[1]}),i.globals.collapsedSeriesIndices.push(n);var a=i.globals.risingSeries.indexOf(n);i.globals.risingSeries.splice(a,1)}}else i.globals.collapsedSeries.push({index:n,data:r[n]}),i.globals.collapsedSeriesIndices.push(n);for(var s=e.childNodes,l=0;l<s.length;l++)s[l].classList.contains("apexcharts-series-markers-wrap")&&(s[l].classList.contains("apexcharts-hide")?s[l].classList.remove("apexcharts-hide"):s[l].classList.add("apexcharts-hide"));i.globals.allSeriesCollapsed=i.globals.collapsedSeries.length===i.config.series.length,r=this._getSeriesBasedOnCollapsedState(r),this.lgCtx.ctx.updateHelpers._updateSeries(r,i.config.chart.animations.dynamicAnimation.enabled)}},{key:"riseCollapsedSeries",value:function(t,e,n){var i=this.w,r=m.clone(i.config.series);if(t.length>0){for(var o=0;o<t.length;o++)t[o].index===n&&(i.globals.axisCharts?(r[n].data=t[o].data.slice(),t.splice(o,1),e.splice(o,1),i.globals.risingSeries.push(n)):(r[n]=t[o].data,t.splice(o,1),e.splice(o,1),i.globals.risingSeries.push(n)));r=this._getSeriesBasedOnCollapsedState(r),this.lgCtx.ctx.updateHelpers._updateSeries(r,i.config.chart.animations.dynamicAnimation.enabled)}}},{key:"_getSeriesBasedOnCollapsedState",value:function(t){var e=this.w;return e.globals.axisCharts?t.forEach((function(n,i){e.globals.collapsedSeriesIndices.indexOf(i)>-1&&(t[i].data=[])})):t.forEach((function(n,i){e.globals.collapsedSeriesIndices.indexOf(i)>-1&&(t[i]=0)})),t}}]),t}(),lt=function(){function t(e){i(this,t),this.ctx=e,this.w=e.w,this.onLegendClick=this.onLegendClick.bind(this),this.onLegendHovered=this.onLegendHovered.bind(this),this.isBarsDistributed="bar"===this.w.config.chart.type&&this.w.config.plotOptions.bar.distributed&&1===this.w.config.series.length,this.legendHelpers=new st(this)}return o(t,[{key:"init",value:function(){var t=this.w,e=t.globals,n=t.config;if((n.legend.showForSingleSeries&&1===e.series.length||this.isBarsDistributed||e.series.length>1||!e.axisCharts)&&n.legend.show){for(;e.dom.elLegendWrap.firstChild;)e.dom.elLegendWrap.removeChild(e.dom.elLegendWrap.firstChild);this.drawLegends(),m.isIE11()?document.getElementsByTagName("head")[0].appendChild(this.legendHelpers.getLegendStyles()):this.legendHelpers.appendToForeignObject(),"bottom"===n.legend.position||"top"===n.legend.position?this.legendAlignHorizontal():"right"!==n.legend.position&&"left"!==n.legend.position||this.legendAlignVertical()}}},{key:"drawLegends",value:function(){var t=this,e=this.w,n=e.config.legend.fontFamily,i=e.globals.seriesNames,r=e.globals.colors.slice();if("heatmap"===e.config.chart.type){var o=e.config.plotOptions.heatmap.colorScale.ranges;i=o.map((function(t){return t.name?t.name:t.from+" - "+t.to})),r=o.map((function(t){return t.color}))}else this.isBarsDistributed&&(i=e.globals.labels.slice());e.config.legend.customLegendItems.length&&(i=e.config.legend.customLegendItems);for(var a=e.globals.legendFormatter,s=e.config.legend.inverseOrder,l=s?i.length-1:0;s?l>=0:l<=i.length-1;s?l--:l++){var c,u=a(i[l],{seriesIndex:l,w:e}),h=!1,d=!1;if(e.globals.collapsedSeries.length>0)for(var p=0;p<e.globals.collapsedSeries.length;p++)e.globals.collapsedSeries[p].index===l&&(h=!0);if(e.globals.ancillaryCollapsedSeriesIndices.length>0)for(var f=0;f<e.globals.ancillaryCollapsedSeriesIndices.length;f++)e.globals.ancillaryCollapsedSeriesIndices[f]===l&&(d=!0);var g=document.createElement("span");g.classList.add("apexcharts-legend-marker");var v=e.config.legend.markers.offsetX,y=e.config.legend.markers.offsetY,_=e.config.legend.markers.height,w=e.config.legend.markers.width,S=e.config.legend.markers.strokeWidth,C=e.config.legend.markers.strokeColor,k=e.config.legend.markers.radius,A=g.style;A.background=r[l],A.color=r[l],A.setProperty("background",r[l],"important"),e.config.legend.markers.fillColors&&e.config.legend.markers.fillColors[l]&&(A.background=e.config.legend.markers.fillColors[l]),void 0!==e.globals.seriesColors[l]&&(A.background=e.globals.seriesColors[l],A.color=e.globals.seriesColors[l]),A.height=Array.isArray(_)?parseFloat(_[l])+"px":parseFloat(_)+"px",A.width=Array.isArray(w)?parseFloat(w[l])+"px":parseFloat(w)+"px",A.left=(Array.isArray(v)?parseFloat(v[l]):parseFloat(v))+"px",A.top=(Array.isArray(y)?parseFloat(y[l]):parseFloat(y))+"px",A.borderWidth=Array.isArray(S)?S[l]:S,A.borderColor=Array.isArray(C)?C[l]:C,A.borderRadius=Array.isArray(k)?parseFloat(k[l])+"px":parseFloat(k)+"px",e.config.legend.markers.customHTML&&(Array.isArray(e.config.legend.markers.customHTML)?e.config.legend.markers.customHTML[l]&&(g.innerHTML=e.config.legend.markers.customHTML[l]()):g.innerHTML=e.config.legend.markers.customHTML()),b.setAttrs(g,{rel:l+1,"data:collapsed":h||d}),(h||d)&&g.classList.add("apexcharts-inactive-legend");var M=document.createElement("div"),T=document.createElement("span");T.classList.add("apexcharts-legend-text"),T.innerHTML=Array.isArray(u)?u.join(" "):u;var I=e.config.legend.labels.useSeriesColors?e.globals.colors[l]:Array.isArray(e.config.legend.labels.colors)?null===(c=e.config.legend.labels.colors)||void 0===c?void 0:c[l]:e.config.legend.labels.colors;I||(I=e.config.chart.foreColor),T.style.color=I,T.style.fontSize=parseFloat(e.config.legend.fontSize)+"px",T.style.fontWeight=e.config.legend.fontWeight,T.style.fontFamily=n||e.config.chart.fontFamily,b.setAttrs(T,{rel:l+1,i:l,"data:default-text":encodeURIComponent(u),"data:collapsed":h||d}),M.appendChild(g),M.appendChild(T);var E=new x(this.ctx);e.config.legend.showForZeroSeries||0===E.getSeriesTotalByIndex(l)&&E.seriesHaveSameValues(l)&&!E.isSeriesNull(l)&&-1===e.globals.collapsedSeriesIndices.indexOf(l)&&-1===e.globals.ancillaryCollapsedSeriesIndices.indexOf(l)&&M.classList.add("apexcharts-hidden-zero-series"),e.config.legend.showForNullSeries||E.isSeriesNull(l)&&-1===e.globals.collapsedSeriesIndices.indexOf(l)&&-1===e.globals.ancillaryCollapsedSeriesIndices.indexOf(l)&&M.classList.add("apexcharts-hidden-null-series"),e.globals.dom.elLegendWrap.appendChild(M),e.globals.dom.elLegendWrap.classList.add("apexcharts-align-".concat(e.config.legend.horizontalAlign)),e.globals.dom.elLegendWrap.classList.add("apx-legend-position-"+e.config.legend.position),M.classList.add("apexcharts-legend-series"),M.style.margin="".concat(e.config.legend.itemMargin.vertical,"px ").concat(e.config.legend.itemMargin.horizontal,"px"),e.globals.dom.elLegendWrap.style.width=e.config.legend.width?e.config.legend.width+"px":"",e.globals.dom.elLegendWrap.style.height=e.config.legend.height?e.config.legend.height+"px":"",b.setAttrs(M,{rel:l+1,seriesName:m.escapeString(i[l]),"data:collapsed":h||d}),(h||d)&&M.classList.add("apexcharts-inactive-legend"),e.config.legend.onItemClick.toggleDataSeries||M.classList.add("apexcharts-no-click")}e.globals.dom.elWrap.addEventListener("click",t.onLegendClick,!0),e.config.legend.onItemHover.highlightDataSeries&&0===e.config.legend.customLegendItems.length&&(e.globals.dom.elWrap.addEventListener("mousemove",t.onLegendHovered,!0),e.globals.dom.elWrap.addEventListener("mouseout",t.onLegendHovered,!0))}},{key:"setLegendWrapXY",value:function(t,e){var n=this.w,i=n.globals.dom.elLegendWrap,r=i.getBoundingClientRect(),o=0,a=0;if("bottom"===n.config.legend.position)a+=n.globals.svgHeight-r.height/2;else if("top"===n.config.legend.position){var s=new at(this.ctx),l=s.dimHelpers.getTitleSubtitleCoords("title").height,c=s.dimHelpers.getTitleSubtitleCoords("subtitle").height;a=a+(l>0?l-10:0)+(c>0?c-10:0)}i.style.position="absolute",o=o+t+n.config.legend.offsetX,a=a+e+n.config.legend.offsetY,i.style.left=o+"px",i.style.top=a+"px","bottom"===n.config.legend.position?(i.style.top="auto",i.style.bottom=5-n.config.legend.offsetY+"px"):"right"===n.config.legend.position&&(i.style.left="auto",i.style.right=25+n.config.legend.offsetX+"px"),["width","height"].forEach((function(t){i.style[t]&&(i.style[t]=parseInt(n.config.legend[t],10)+"px")}))}},{key:"legendAlignHorizontal",value:function(){var t=this.w;t.globals.dom.elLegendWrap.style.right=0;var e=this.legendHelpers.getLegendBBox(),n=new at(this.ctx),i=n.dimHelpers.getTitleSubtitleCoords("title"),r=n.dimHelpers.getTitleSubtitleCoords("subtitle"),o=0;"bottom"===t.config.legend.position?o=-e.clwh/1.8:"top"===t.config.legend.position&&(o=i.height+r.height+t.config.title.margin+t.config.subtitle.margin-10),this.setLegendWrapXY(20,o)}},{key:"legendAlignVertical",value:function(){var t=this.w,e=this.legendHelpers.getLegendBBox(),n=0;"left"===t.config.legend.position&&(n=20),"right"===t.config.legend.position&&(n=t.globals.svgWidth-e.clww-10),this.setLegendWrapXY(n,20)}},{key:"onLegendHovered",value:function(t){var e=this.w,n=t.target.classList.contains("apexcharts-legend-series")||t.target.classList.contains("apexcharts-legend-text")||t.target.classList.contains("apexcharts-legend-marker");if("heatmap"===e.config.chart.type||this.isBarsDistributed){if(n){var i=parseInt(t.target.getAttribute("rel"),10)-1;this.ctx.events.fireEvent("legendHover",[this.ctx,i,this.w]),new H(this.ctx).highlightRangeInSeries(t,t.target)}}else!t.target.classList.contains("apexcharts-inactive-legend")&&n&&new H(this.ctx).toggleSeriesOnHover(t,t.target)}},{key:"onLegendClick",value:function(t){var e=this.w;if(!e.config.legend.customLegendItems.length&&(t.target.classList.contains("apexcharts-legend-series")||t.target.classList.contains("apexcharts-legend-text")||t.target.classList.contains("apexcharts-legend-marker"))){var n=parseInt(t.target.getAttribute("rel"),10)-1,i="true"===t.target.getAttribute("data:collapsed"),r=this.w.config.chart.events.legendClick;"function"==typeof r&&r(this.ctx,n,this.w),this.ctx.events.fireEvent("legendClick",[this.ctx,n,this.w]);var o=this.w.config.legend.markers.onClick;"function"==typeof o&&t.target.classList.contains("apexcharts-legend-marker")&&(o(this.ctx,n,this.w),this.ctx.events.fireEvent("legendMarkerClick",[this.ctx,n,this.w])),"treemap"!==e.config.chart.type&&"heatmap"!==e.config.chart.type&&!this.isBarsDistributed&&e.config.legend.onItemClick.toggleDataSeries&&this.legendHelpers.toggleDataSeries(n,i)}}}]),t}(),ct=function(){function t(e){i(this,t),this.ctx=e,this.w=e.w;var n=this.w;this.ev=this.w.config.chart.events,this.selectedClass="apexcharts-selected",this.localeValues=this.w.globals.locale.toolbar,this.minX=n.globals.minX,this.maxX=n.globals.maxX}return o(t,[{key:"createToolbar",value:function(){var t=this,e=this.w,n=function(){return document.createElement("div")},i=n();if(i.setAttribute("class","apexcharts-toolbar"),i.style.top=e.config.chart.toolbar.offsetY+"px",i.style.right=3-e.config.chart.toolbar.offsetX+"px",e.globals.dom.elWrap.appendChild(i),this.elZoom=n(),this.elZoomIn=n(),this.elZoomOut=n(),this.elPan=n(),this.elSelection=n(),this.elZoomReset=n(),this.elMenuIcon=n(),this.elMenu=n(),this.elCustomIcons=[],this.t=e.config.chart.toolbar.tools,Array.isArray(this.t.customIcons))for(var r=0;r<this.t.customIcons.length;r++)this.elCustomIcons.push(n());var o=[],a=function(n,i,r){var a=n.toLowerCase();t.t[a]&&e.config.chart.zoom.enabled&&o.push({el:i,icon:"string"==typeof t.t[a]?t.t[a]:r,title:t.localeValues[n],class:"apexcharts-".concat(a,"-icon")})};a("zoomIn",this.elZoomIn,'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4V7zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>\n</svg>\n'),a("zoomOut",this.elZoomOut,'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M7 11v2h10v-2H7zm5-9C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8z"/>\n</svg>\n');var s=function(n){t.t[n]&&e.config.chart[n].enabled&&o.push({el:"zoom"===n?t.elZoom:t.elSelection,icon:"string"==typeof t.t[n]?t.t[n]:"zoom"===n?'<svg xmlns="http://www.w3.org/2000/svg" fill="#000000" height="24" viewBox="0 0 24 24" width="24">\n    <path d="M15.5 14h-.79l-.28-.27C15.41 12.59 16 11.11 16 9.5 16 5.91 13.09 3 9.5 3S3 5.91 3 9.5 5.91 16 9.5 16c1.61 0 3.09-.59 4.23-1.57l.27.28v.79l5 4.99L20.49 19l-4.99-5zm-6 0C7.01 14 5 11.99 5 9.5S7.01 5 9.5 5 14 7.01 14 9.5 11.99 14 9.5 14z"/>\n    <path d="M0 0h24v24H0V0z" fill="none"/>\n    <path d="M12 10h-2v2H9v-2H7V9h2V7h1v2h2v1z"/>\n</svg>':'<svg fill="#6E8192" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M0 0h24v24H0z" fill="none"/>\n    <path d="M3 5h2V3c-1.1 0-2 .9-2 2zm0 8h2v-2H3v2zm4 8h2v-2H7v2zM3 9h2V7H3v2zm10-6h-2v2h2V3zm6 0v2h2c0-1.1-.9-2-2-2zM5 21v-2H3c0 1.1.9 2 2 2zm-2-4h2v-2H3v2zM9 3H7v2h2V3zm2 18h2v-2h-2v2zm8-8h2v-2h-2v2zm0 8c1.1 0 2-.9 2-2h-2v2zm0-12h2V7h-2v2zm0 8h2v-2h-2v2zm-4 4h2v-2h-2v2zm0-16h2V3h-2v2z"/>\n</svg>',title:t.localeValues["zoom"===n?"selectionZoom":"selection"],class:e.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-".concat(n,"-icon")})};s("zoom"),s("selection"),this.t.pan&&e.config.chart.zoom.enabled&&o.push({el:this.elPan,icon:"string"==typeof this.t.pan?this.t.pan:'<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" fill="#000000" height="24" viewBox="0 0 24 24" width="24">\n    <defs>\n        <path d="M0 0h24v24H0z" id="a"/>\n    </defs>\n    <clipPath id="b">\n        <use overflow="visible" xlink:href="#a"/>\n    </clipPath>\n    <path clip-path="url(#b)" d="M23 5.5V20c0 2.2-1.8 4-4 4h-7.3c-1.08 0-2.1-.43-2.85-1.19L1 14.83s1.26-1.23 1.3-1.25c.22-.19.49-.29.79-.29.22 0 .42.06.6.16.04.01 4.31 2.46 4.31 2.46V4c0-.83.67-1.5 1.5-1.5S11 3.17 11 4v7h1V1.5c0-.83.67-1.5 1.5-1.5S15 .67 15 1.5V11h1V2.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5V11h1V5.5c0-.83.67-1.5 1.5-1.5s1.5.67 1.5 1.5z"/>\n</svg>',title:this.localeValues.pan,class:e.globals.isTouchDevice?"apexcharts-element-hidden":"apexcharts-pan-icon"}),a("reset",this.elZoomReset,'<svg fill="#000000" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">\n    <path d="M10 20v-6h4v6h5v-8h3L12 3 2 12h3v8z"/>\n    <path d="M0 0h24v24H0z" fill="none"/>\n</svg>'),this.t.download&&o.push({el:this.elMenuIcon,icon:"string"==typeof this.t.download?this.t.download:'<svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path fill="none" d="M0 0h24v24H0V0z"/><path d="M3 18h18v-2H3v2zm0-5h18v-2H3v2zm0-7v2h18V6H3z"/></svg>',title:this.localeValues.menu,class:"apexcharts-menu-icon"});for(var l=0;l<this.elCustomIcons.length;l++)o.push({el:this.elCustomIcons[l],icon:this.t.customIcons[l].icon,title:this.t.customIcons[l].title,index:this.t.customIcons[l].index,class:"apexcharts-toolbar-custom-icon "+this.t.customIcons[l].class});o.forEach((function(t,e){t.index&&m.moveIndexInArray(o,e,t.index)}));for(var c=0;c<o.length;c++)b.setAttrs(o[c].el,{class:o[c].class,title:o[c].title}),o[c].el.innerHTML=o[c].icon,i.appendChild(o[c].el);this._createHamburgerMenu(i),e.globals.zoomEnabled?this.elZoom.classList.add(this.selectedClass):e.globals.panEnabled?this.elPan.classList.add(this.selectedClass):e.globals.selectionEnabled&&this.elSelection.classList.add(this.selectedClass),this.addToolbarEventListeners()}},{key:"_createHamburgerMenu",value:function(t){this.elMenuItems=[],t.appendChild(this.elMenu),b.setAttrs(this.elMenu,{class:"apexcharts-menu"});for(var e=[{name:"exportSVG",title:this.localeValues.exportToSVG},{name:"exportPNG",title:this.localeValues.exportToPNG},{name:"exportCSV",title:this.localeValues.exportToCSV}],n=0;n<e.length;n++)this.elMenuItems.push(document.createElement("div")),this.elMenuItems[n].innerHTML=e[n].title,b.setAttrs(this.elMenuItems[n],{class:"apexcharts-menu-item ".concat(e[n].name),title:e[n].title}),this.elMenu.appendChild(this.elMenuItems[n])}},{key:"addToolbarEventListeners",value:function(){var t=this;this.elZoomReset.addEventListener("click",this.handleZoomReset.bind(this)),this.elSelection.addEventListener("click",this.toggleZoomSelection.bind(this,"selection")),this.elZoom.addEventListener("click",this.toggleZoomSelection.bind(this,"zoom")),this.elZoomIn.addEventListener("click",this.handleZoomIn.bind(this)),this.elZoomOut.addEventListener("click",this.handleZoomOut.bind(this)),this.elPan.addEventListener("click",this.togglePanning.bind(this)),this.elMenuIcon.addEventListener("click",this.toggleMenu.bind(this)),this.elMenuItems.forEach((function(e){e.classList.contains("exportSVG")?e.addEventListener("click",t.handleDownload.bind(t,"svg")):e.classList.contains("exportPNG")?e.addEventListener("click",t.handleDownload.bind(t,"png")):e.classList.contains("exportCSV")&&e.addEventListener("click",t.handleDownload.bind(t,"csv"))}));for(var e=0;e<this.t.customIcons.length;e++)this.elCustomIcons[e].addEventListener("click",this.t.customIcons[e].click.bind(this,this.ctx,this.ctx.w))}},{key:"toggleZoomSelection",value:function(t){this.ctx.getSyncedCharts().forEach((function(e){e.ctx.toolbar.toggleOtherControls();var n="selection"===t?e.ctx.toolbar.elSelection:e.ctx.toolbar.elZoom,i="selection"===t?"selectionEnabled":"zoomEnabled";e.w.globals[i]=!e.w.globals[i],n.classList.contains(e.ctx.toolbar.selectedClass)?n.classList.remove(e.ctx.toolbar.selectedClass):n.classList.add(e.ctx.toolbar.selectedClass)}))}},{key:"getToolbarIconsReference",value:function(){var t=this.w;this.elZoom||(this.elZoom=t.globals.dom.baseEl.querySelector(".apexcharts-zoom-icon")),this.elPan||(this.elPan=t.globals.dom.baseEl.querySelector(".apexcharts-pan-icon")),this.elSelection||(this.elSelection=t.globals.dom.baseEl.querySelector(".apexcharts-selection-icon"))}},{key:"enableZoomPanFromToolbar",value:function(t){this.toggleOtherControls(),"pan"===t?this.w.globals.panEnabled=!0:this.w.globals.zoomEnabled=!0;var e="pan"===t?this.elPan:this.elZoom,n="pan"===t?this.elZoom:this.elPan;e&&e.classList.add(this.selectedClass),n&&n.classList.remove(this.selectedClass)}},{key:"togglePanning",value:function(){this.ctx.getSyncedCharts().forEach((function(t){t.ctx.toolbar.toggleOtherControls(),t.w.globals.panEnabled=!t.w.globals.panEnabled,t.ctx.toolbar.elPan.classList.contains(t.ctx.toolbar.selectedClass)?t.ctx.toolbar.elPan.classList.remove(t.ctx.toolbar.selectedClass):t.ctx.toolbar.elPan.classList.add(t.ctx.toolbar.selectedClass)}))}},{key:"toggleOtherControls",value:function(){var t=this,e=this.w;e.globals.panEnabled=!1,e.globals.zoomEnabled=!1,e.globals.selectionEnabled=!1,this.getToolbarIconsReference(),[this.elPan,this.elSelection,this.elZoom].forEach((function(e){e&&e.classList.remove(t.selectedClass)}))}},{key:"handleZoomIn",value:function(){var t=this.w;t.globals.isRangeBar&&(this.minX=t.globals.minY,this.maxX=t.globals.maxY);var e=(this.minX+this.maxX)/2,n=(this.minX+e)/2,i=(this.maxX+e)/2,r=this._getNewMinXMaxX(n,i);t.globals.disableZoomIn||this.zoomUpdateOptions(r.minX,r.maxX)}},{key:"handleZoomOut",value:function(){var t=this.w;if(t.globals.isRangeBar&&(this.minX=t.globals.minY,this.maxX=t.globals.maxY),!("datetime"===t.config.xaxis.type&&new Date(this.minX).getUTCFullYear()<1e3)){var e=(this.minX+this.maxX)/2,n=this.minX-(e-this.minX),i=this.maxX-(e-this.maxX),r=this._getNewMinXMaxX(n,i);t.globals.disableZoomOut||this.zoomUpdateOptions(r.minX,r.maxX)}}},{key:"_getNewMinXMaxX",value:function(t,e){var n=this.w.config.xaxis.convertedCatToNumeric;return{minX:n?Math.floor(t):t,maxX:n?Math.floor(e):e}}},{key:"zoomUpdateOptions",value:function(t,e){var n=this.w;if(void 0!==t||void 0!==e){if(!(n.config.xaxis.convertedCatToNumeric&&(t<1&&(t=1,e=n.globals.dataPoints),e-t<2))){var i={min:t,max:e},r=this.getBeforeZoomRange(i);r&&(i=r.xaxis);var o={xaxis:i},a=m.clone(n.globals.initialConfig.yaxis);n.config.chart.group||(o.yaxis=a),this.w.globals.zoomed=!0,this.ctx.updateHelpers._updateOptions(o,!1,this.w.config.chart.animations.dynamicAnimation.enabled),this.zoomCallback(i,a)}}else this.handleZoomReset()}},{key:"zoomCallback",value:function(t,e){"function"==typeof this.ev.zoomed&&this.ev.zoomed(this.ctx,{xaxis:t,yaxis:e})}},{key:"getBeforeZoomRange",value:function(t,e){var n=null;return"function"==typeof this.ev.beforeZoom&&(n=this.ev.beforeZoom(this,{xaxis:t,yaxis:e})),n}},{key:"toggleMenu",value:function(){var t=this;window.setTimeout((function(){t.elMenu.classList.contains("apexcharts-menu-open")?t.elMenu.classList.remove("apexcharts-menu-open"):t.elMenu.classList.add("apexcharts-menu-open")}),0)}},{key:"handleDownload",value:function(t){var e=this.w,n=new j(this.ctx);switch(t){case"svg":n.exportToSVG(this.ctx);break;case"png":n.exportToPng(this.ctx);break;case"csv":n.exportToCSV({series:e.config.series,columnDelimiter:e.config.chart.toolbar.export.csv.columnDelimiter})}}},{key:"handleZoomReset",value:function(t){this.ctx.getSyncedCharts().forEach((function(t){var e=t.w;if(e.globals.lastXAxis.min=e.globals.initialConfig.xaxis.min,e.globals.lastXAxis.max=e.globals.initialConfig.xaxis.max,t.updateHelpers.revertDefaultAxisMinMax(),"function"==typeof e.config.chart.events.beforeResetZoom){var n=e.config.chart.events.beforeResetZoom(t,e);n&&t.updateHelpers.revertDefaultAxisMinMax(n)}"function"==typeof e.config.chart.events.zoomed&&t.ctx.toolbar.zoomCallback({min:e.config.xaxis.min,max:e.config.xaxis.max}),e.globals.zoomed=!1;var i=t.ctx.series.emptyCollapsedSeries(m.clone(e.globals.initialSeries));t.updateHelpers._updateSeries(i,e.config.chart.animations.dynamicAnimation.enabled)}))}},{key:"destroy",value:function(){this.elZoom=null,this.elZoomIn=null,this.elZoomOut=null,this.elPan=null,this.elSelection=null,this.elZoomReset=null,this.elMenuIcon=null}}]),t}(),ut=function(t){s(n,t);var e=h(n);function n(t){var r;return i(this,n),(r=e.call(this,t)).ctx=t,r.w=t.w,r.dragged=!1,r.graphics=new b(r.ctx),r.eventList=["mousedown","mouseleave","mousemove","touchstart","touchmove","mouseup","touchend"],r.clientX=0,r.clientY=0,r.startX=0,r.endX=0,r.dragX=0,r.startY=0,r.endY=0,r.dragY=0,r.moveDirection="none",r}return o(n,[{key:"init",value:function(t){var e=this,n=t.xyRatios,i=this.w,r=this;this.xyRatios=n,this.zoomRect=this.graphics.drawRect(0,0,0,0),this.selectionRect=this.graphics.drawRect(0,0,0,0),this.gridRect=i.globals.dom.baseEl.querySelector(".apexcharts-grid"),this.zoomRect.node.classList.add("apexcharts-zoom-rect"),this.selectionRect.node.classList.add("apexcharts-selection-rect"),i.globals.dom.elGraphical.add(this.zoomRect),i.globals.dom.elGraphical.add(this.selectionRect),"x"===i.config.chart.selection.type?this.slDraggableRect=this.selectionRect.draggable({minX:0,minY:0,maxX:i.globals.gridWidth,maxY:i.globals.gridHeight}).on("dragmove",this.selectionDragging.bind(this,"dragging")):"y"===i.config.chart.selection.type?this.slDraggableRect=this.selectionRect.draggable({minX:0,maxX:i.globals.gridWidth}).on("dragmove",this.selectionDragging.bind(this,"dragging")):this.slDraggableRect=this.selectionRect.draggable().on("dragmove",this.selectionDragging.bind(this,"dragging")),this.preselectedSelection(),this.hoverArea=i.globals.dom.baseEl.querySelector("".concat(i.globals.chartClass," .apexcharts-svg")),this.hoverArea.classList.add("apexcharts-zoomable"),this.eventList.forEach((function(t){e.hoverArea.addEventListener(t,r.svgMouseEvents.bind(r,n),{capture:!1,passive:!0})}))}},{key:"destroy",value:function(){this.slDraggableRect&&(this.slDraggableRect.draggable(!1),this.slDraggableRect.off(),this.selectionRect.off()),this.selectionRect=null,this.zoomRect=null,this.gridRect=null}},{key:"svgMouseEvents",value:function(t,e){var n=this.w,i=this,r=this.ctx.toolbar,o=n.globals.zoomEnabled?n.config.chart.zoom.type:n.config.chart.selection.type,a=n.config.chart.toolbar.autoSelected;if(e.shiftKey?(this.shiftWasPressed=!0,r.enableZoomPanFromToolbar("pan"===a?"zoom":"pan")):this.shiftWasPressed&&(r.enableZoomPanFromToolbar(a),this.shiftWasPressed=!1),e.target){var s,l=e.target.classList;if(e.target.parentNode&&null!==e.target.parentNode&&(s=e.target.parentNode.classList),!(l.contains("apexcharts-selection-rect")||l.contains("apexcharts-legend-marker")||l.contains("apexcharts-legend-text")||s&&s.contains("apexcharts-toolbar"))){if(i.clientX="touchmove"===e.type||"touchstart"===e.type?e.touches[0].clientX:"touchend"===e.type?e.changedTouches[0].clientX:e.clientX,i.clientY="touchmove"===e.type||"touchstart"===e.type?e.touches[0].clientY:"touchend"===e.type?e.changedTouches[0].clientY:e.clientY,("mousedown"===e.type||"touchmove"===e.type)&&1===e.which){var c=i.gridRect.getBoundingClientRect();i.startX=i.clientX-c.left,i.startY=i.clientY-c.top,i.dragged=!1,i.w.globals.mousedown=!0}if("mousemove"===e.type&&1===e.which||"touchmove"===e.type)if(i.dragged=!0,n.globals.panEnabled){if(n.globals.selection=null,i.w.globals.mousedown||"touchmove"===e.type){if("touchmove"===e.type&&!i.w.globals.mousedown){console.warn("me.w.globals.mousedown ",i.w.globals.mousedown);var u=i.gridRect.getBoundingClientRect();i.startX=i.clientX-u.left,i.startY=i.clientY-u.top,i.w.globals.mousedown=!0}i.panDragging({context:i,zoomtype:o,xyRatios:t})}}else{if("touchmove"===e.type){if(!i.w.globals.mousedown){var h=i.gridRect.getBoundingClientRect();i.startX=i.clientX-h.left,i.startY=i.clientY-h.top}i.w.globals.mousedown=!0}(i.w.globals.mousedown&&n.globals.zoomEnabled||i.w.globals.mousedown&&n.globals.selectionEnabled)&&(i.selection=i.selectionDrawing({context:i,zoomtype:o}))}if("mouseup"===e.type||"touchend"===e.type||"mouseleave"===e.type){var d=i.gridRect.getBoundingClientRect();i.w.globals.mousedown&&(i.endX=i.clientX-d.left,i.endY=i.clientY-d.top,i.dragX=Math.abs(i.endX-i.startX),i.dragY=Math.abs(i.endY-i.startY),(n.globals.zoomEnabled||n.globals.selectionEnabled)&&i.selectionDrawn({context:i,zoomtype:o}),n.globals.panEnabled&&n.config.xaxis.convertedCatToNumeric&&i.delayedPanScrolled()),n.globals.zoomEnabled&&i.hideSelectionRect(this.selectionRect),i.dragged=!1,i.w.globals.mousedown=!1}this.makeSelectionRectDraggable()}}}},{key:"makeSelectionRectDraggable",value:function(){var t=this.w;if(this.selectionRect){var e=this.selectionRect.node.getBoundingClientRect();e.width>0&&e.height>0&&this.slDraggableRect.selectize({points:"l, r",pointSize:8,pointType:"rect"}).resize({constraint:{minX:0,minY:0,maxX:t.globals.gridWidth,maxY:t.globals.gridHeight}}).on("resizing",this.selectionDragging.bind(this,"resizing"))}}},{key:"preselectedSelection",value:function(){var t=this.w,e=this.xyRatios;if(!t.globals.zoomEnabled)if(void 0!==t.globals.selection&&null!==t.globals.selection)this.drawSelectionRect(t.globals.selection);else if(void 0!==t.config.chart.selection.xaxis.min&&void 0!==t.config.chart.selection.xaxis.max){var n=(t.config.chart.selection.xaxis.min-t.globals.minX)/e.xRatio,i=t.globals.gridWidth-(t.globals.maxX-t.config.chart.selection.xaxis.max)/e.xRatio-n;t.globals.isRangeBar&&(n=(t.config.chart.selection.xaxis.min-t.globals.yAxisScale[0].niceMin)/e.invertedYRatio,i=(t.config.chart.selection.xaxis.max-t.config.chart.selection.xaxis.min)/e.invertedYRatio);var r={x:n,y:0,width:i,height:t.globals.gridHeight,translateX:0,translateY:0,selectionEnabled:!0};this.drawSelectionRect(r),this.makeSelectionRectDraggable(),"function"==typeof t.config.chart.events.selection&&t.config.chart.events.selection(this.ctx,{xaxis:{min:t.config.chart.selection.xaxis.min,max:t.config.chart.selection.xaxis.max},yaxis:{}})}}},{key:"drawSelectionRect",value:function(t){var e=t.x,n=t.y,i=t.width,r=t.height,o=t.translateX,a=void 0===o?0:o,s=t.translateY,l=void 0===s?0:s,c=this.w,u=this.zoomRect,h=this.selectionRect;if(this.dragged||null!==c.globals.selection){var d={transform:"translate("+a+", "+l+")"};c.globals.zoomEnabled&&this.dragged&&(i<0&&(i=1),u.attr({x:e,y:n,width:i,height:r,fill:c.config.chart.zoom.zoomedArea.fill.color,"fill-opacity":c.config.chart.zoom.zoomedArea.fill.opacity,stroke:c.config.chart.zoom.zoomedArea.stroke.color,"stroke-width":c.config.chart.zoom.zoomedArea.stroke.width,"stroke-opacity":c.config.chart.zoom.zoomedArea.stroke.opacity}),b.setAttrs(u.node,d)),c.globals.selectionEnabled&&(h.attr({x:e,y:n,width:i>0?i:0,height:r>0?r:0,fill:c.config.chart.selection.fill.color,"fill-opacity":c.config.chart.selection.fill.opacity,stroke:c.config.chart.selection.stroke.color,"stroke-width":c.config.chart.selection.stroke.width,"stroke-dasharray":c.config.chart.selection.stroke.dashArray,"stroke-opacity":c.config.chart.selection.stroke.opacity}),b.setAttrs(h.node,d))}}},{key:"hideSelectionRect",value:function(t){t&&t.attr({x:0,y:0,width:0,height:0})}},{key:"selectionDrawing",value:function(t){var e,n=t.context,i=t.zoomtype,r=this.w,o=n,a=this.gridRect.getBoundingClientRect(),s=o.startX-1,l=o.startY,c=!1,u=!1,h=o.clientX-a.left-s,d=o.clientY-a.top-l;return Math.abs(h+s)>r.globals.gridWidth?h=r.globals.gridWidth-s:o.clientX-a.left<0&&(h=s),s>o.clientX-a.left&&(c=!0,h=Math.abs(h)),l>o.clientY-a.top&&(u=!0,d=Math.abs(d)),e="x"===i?{x:c?s-h:s,y:0,width:h,height:r.globals.gridHeight}:"y"===i?{x:0,y:u?l-d:l,width:r.globals.gridWidth,height:d}:{x:c?s-h:s,y:u?l-d:l,width:h,height:d},o.drawSelectionRect(e),o.selectionDragging("resizing"),e}},{key:"selectionDragging",value:function(t,e){var n=this,i=this.w,r=this.xyRatios,o=this.selectionRect,a=0;"resizing"===t&&(a=30);var s=function(t){return parseFloat(o.node.getAttribute(t))},l={x:s("x"),y:s("y"),width:s("width"),height:s("height")};i.globals.selection=l,"function"==typeof i.config.chart.events.selection&&i.globals.selectionEnabled&&(clearTimeout(this.w.globals.selectionResizeTimer),this.w.globals.selectionResizeTimer=window.setTimeout((function(){var t,e,a,s,l=n.gridRect.getBoundingClientRect(),c=o.node.getBoundingClientRect();i.globals.isRangeBar?(t=i.globals.yAxisScale[0].niceMin+(c.left-l.left)*r.invertedYRatio,e=i.globals.yAxisScale[0].niceMin+(c.right-l.left)*r.invertedYRatio,a=0,s=1):(t=i.globals.xAxisScale.niceMin+(c.left-l.left)*r.xRatio,e=i.globals.xAxisScale.niceMin+(c.right-l.left)*r.xRatio,a=i.globals.yAxisScale[0].niceMin+(l.bottom-c.bottom)*r.yRatio[0],s=i.globals.yAxisScale[0].niceMax-(c.top-l.top)*r.yRatio[0]);var u={xaxis:{min:t,max:e},yaxis:{min:a,max:s}};i.config.chart.events.selection(n.ctx,u),i.config.chart.brush.enabled&&void 0!==i.config.chart.events.brushScrolled&&i.config.chart.events.brushScrolled(n.ctx,u)}),a))}},{key:"selectionDrawn",value:function(t){var e=t.context,n=t.zoomtype,i=this.w,r=e,o=this.xyRatios,a=this.ctx.toolbar;if(r.startX>r.endX){var s=r.startX;r.startX=r.endX,r.endX=s}if(r.startY>r.endY){var l=r.startY;r.startY=r.endY,r.endY=l}var c=void 0,u=void 0;i.globals.isRangeBar?(c=i.globals.yAxisScale[0].niceMin+r.startX*o.invertedYRatio,u=i.globals.yAxisScale[0].niceMin+r.endX*o.invertedYRatio):(c=i.globals.xAxisScale.niceMin+r.startX*o.xRatio,u=i.globals.xAxisScale.niceMin+r.endX*o.xRatio);var h=[],d=[];if(i.config.yaxis.forEach((function(t,e){var n=i.globals.seriesYAxisMap[e][0];h.push(i.globals.yAxisScale[e].niceMax-o.yRatio[n]*r.startY),d.push(i.globals.yAxisScale[e].niceMax-o.yRatio[n]*r.endY)})),r.dragged&&(r.dragX>10||r.dragY>10)&&c!==u)if(i.globals.zoomEnabled){var p=m.clone(i.globals.initialConfig.yaxis),f=m.clone(i.globals.initialConfig.xaxis);if(i.globals.zoomed=!0,i.config.xaxis.convertedCatToNumeric&&(c=Math.floor(c),u=Math.floor(u),c<1&&(c=1,u=i.globals.dataPoints),u-c<2&&(u=c+1)),"xy"!==n&&"x"!==n||(f={min:c,max:u}),"xy"!==n&&"y"!==n||p.forEach((function(t,e){p[e].min=d[e],p[e].max=h[e]})),a){var g=a.getBeforeZoomRange(f,p);g&&(f=g.xaxis?g.xaxis:f,p=g.yaxis?g.yaxis:p)}var v={xaxis:f};i.config.chart.group||(v.yaxis=p),r.ctx.updateHelpers._updateOptions(v,!1,r.w.config.chart.animations.dynamicAnimation.enabled),"function"==typeof i.config.chart.events.zoomed&&a.zoomCallback(f,p)}else if(i.globals.selectionEnabled){var y,b=null;y={min:c,max:u},"xy"!==n&&"y"!==n||(b=m.clone(i.config.yaxis)).forEach((function(t,e){b[e].min=d[e],b[e].max=h[e]})),i.globals.selection=r.selection,"function"==typeof i.config.chart.events.selection&&i.config.chart.events.selection(r.ctx,{xaxis:y,yaxis:b})}}},{key:"panDragging",value:function(t){var e=t.context,n=this.w,i=e;if(void 0!==n.globals.lastClientPosition.x){var r=n.globals.lastClientPosition.x-i.clientX,o=n.globals.lastClientPosition.y-i.clientY;Math.abs(r)>Math.abs(o)&&r>0?this.moveDirection="left":Math.abs(r)>Math.abs(o)&&r<0?this.moveDirection="right":Math.abs(o)>Math.abs(r)&&o>0?this.moveDirection="up":Math.abs(o)>Math.abs(r)&&o<0&&(this.moveDirection="down")}n.globals.lastClientPosition={x:i.clientX,y:i.clientY};var a=n.globals.isRangeBar?n.globals.minY:n.globals.minX,s=n.globals.isRangeBar?n.globals.maxY:n.globals.maxX;n.config.xaxis.convertedCatToNumeric||i.panScrolled(a,s)}},{key:"delayedPanScrolled",value:function(){var t=this.w,e=t.globals.minX,n=t.globals.maxX,i=(t.globals.maxX-t.globals.minX)/2;"left"===this.moveDirection?(e=t.globals.minX+i,n=t.globals.maxX+i):"right"===this.moveDirection&&(e=t.globals.minX-i,n=t.globals.maxX-i),e=Math.floor(e),n=Math.floor(n),this.updateScrolledChart({xaxis:{min:e,max:n}},e,n)}},{key:"panScrolled",value:function(t,e){var n=this.w,i=this.xyRatios,r=m.clone(n.globals.initialConfig.yaxis),o=i.xRatio,a=n.globals.minX,s=n.globals.maxX;n.globals.isRangeBar&&(o=i.invertedYRatio,a=n.globals.minY,s=n.globals.maxY),"left"===this.moveDirection?(t=a+n.globals.gridWidth/15*o,e=s+n.globals.gridWidth/15*o):"right"===this.moveDirection&&(t=a-n.globals.gridWidth/15*o,e=s-n.globals.gridWidth/15*o),n.globals.isRangeBar||(t<n.globals.initialMinX||e>n.globals.initialMaxX)&&(t=a,e=s);var l={xaxis:{min:t,max:e}};n.config.chart.group||(l.yaxis=r),this.updateScrolledChart(l,t,e)}},{key:"updateScrolledChart",value:function(t,e,n){var i=this.w;this.ctx.updateHelpers._updateOptions(t,!1,!1),"function"==typeof i.config.chart.events.scrolled&&i.config.chart.events.scrolled(this.ctx,{xaxis:{min:e,max:n}})}}]),n}(ct),ht=function(){function t(e){i(this,t),this.w=e.w,this.ttCtx=e,this.ctx=e.ctx}return o(t,[{key:"getNearestValues",value:function(t){var e=t.hoverArea,n=t.elGrid,i=t.clientX,r=t.clientY,o=this.w,a=n.getBoundingClientRect(),s=a.width,l=a.height,c=s/(o.globals.dataPoints-1),u=l/o.globals.dataPoints,h=this.hasBars();!o.globals.comboCharts&&!h||o.config.xaxis.convertedCatToNumeric||(c=s/o.globals.dataPoints);var d=i-a.left-o.globals.barPadForNumericAxis,p=r-a.top;d<0||p<0||d>s||p>l?(e.classList.remove("hovering-zoom"),e.classList.remove("hovering-pan")):o.globals.zoomEnabled?(e.classList.remove("hovering-pan"),e.classList.add("hovering-zoom")):o.globals.panEnabled&&(e.classList.remove("hovering-zoom"),e.classList.add("hovering-pan"));var f=Math.round(d/c),g=Math.floor(p/u);h&&!o.config.xaxis.convertedCatToNumeric&&(f=Math.ceil(d/c),f-=1);var v=null,y=null,b=o.globals.seriesXvalues.map((function(t){return t.filter((function(t){return m.isNumber(t)}))})),x=o.globals.seriesYvalues.map((function(t){return t.filter((function(t){return m.isNumber(t)}))}));if(o.globals.isXNumeric){var _=this.ttCtx.getElGrid().getBoundingClientRect(),w=d*(_.width/s),S=p*(_.height/l);v=(y=this.closestInMultiArray(w,S,b,x)).index,f=y.j,null!==v&&(b=o.globals.seriesXvalues[v],f=(y=this.closestInArray(w,b)).index)}return o.globals.capturedSeriesIndex=null===v?-1:v,(!f||f<1)&&(f=0),o.globals.isBarHorizontal?o.globals.capturedDataPointIndex=g:o.globals.capturedDataPointIndex=f,{capturedSeries:v,j:o.globals.isBarHorizontal?g:f,hoverX:d,hoverY:p}}},{key:"closestInMultiArray",value:function(t,e,n,i){var r=this.w,o=0,a=null,s=-1;r.globals.series.length>1?o=this.getFirstActiveXArray(n):a=0;var l=n[o][0],c=Math.abs(t-l);if(n.forEach((function(e){e.forEach((function(e,n){var i=Math.abs(t-e);i<=c&&(c=i,s=n)}))})),-1!==s){var u=i[o][s],h=Math.abs(e-u);a=o,i.forEach((function(t,n){var i=Math.abs(e-t[s]);i<=h&&(h=i,a=n)}))}return{index:a,j:s}}},{key:"getFirstActiveXArray",value:function(t){for(var e=this.w,n=0,i=t.map((function(t,e){return t.length>0?e:-1})),r=0;r<i.length;r++)if(-1!==i[r]&&-1===e.globals.collapsedSeriesIndices.indexOf(r)&&-1===e.globals.ancillaryCollapsedSeriesIndices.indexOf(r)){n=i[r];break}return n}},{key:"closestInArray",value:function(t,e){for(var n=e[0],i=null,r=Math.abs(t-n),o=0;o<e.length;o++){var a=Math.abs(t-e[o]);a<r&&(r=a,i=o)}return{index:i}}},{key:"isXoverlap",value:function(t){var e=[],n=this.w.globals.seriesX.filter((function(t){return void 0!==t[0]}));if(n.length>0)for(var i=0;i<n.length-1;i++)void 0!==n[i][t]&&void 0!==n[i+1][t]&&n[i][t]!==n[i+1][t]&&e.push("unEqual");return 0===e.length}},{key:"isInitialSeriesSameLen",value:function(){for(var t=!0,e=this.w.globals.initialSeries,n=0;n<e.length-1;n++)if(e[n].data.length!==e[n+1].data.length){t=!1;break}return t}},{key:"getBarsHeight",value:function(t){return p(t).reduce((function(t,e){return t+e.getBBox().height}),0)}},{key:"getElMarkers",value:function(t){return"number"==typeof t?this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series[data\\:realIndex='".concat(t,"'] .apexcharts-series-markers-wrap > *")):this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers-wrap > *")}},{key:"getAllMarkers",value:function(){var t=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers-wrap");(t=p(t)).sort((function(t,e){var n=Number(t.getAttribute("data:realIndex")),i=Number(e.getAttribute("data:realIndex"));return i<n?1:i>n?-1:0}));var e=[];return t.forEach((function(t){e.push(t.querySelector(".apexcharts-marker"))})),e}},{key:"hasMarkers",value:function(t){return this.getElMarkers(t).length>0}},{key:"getElBars",value:function(){return this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-bar-series,  .apexcharts-candlestick-series, .apexcharts-boxPlot-series, .apexcharts-rangebar-series")}},{key:"hasBars",value:function(){return this.getElBars().length>0}},{key:"getHoverMarkerSize",value:function(t){var e=this.w,n=e.config.markers.hover.size;return void 0===n&&(n=e.globals.markers.size[t]+e.config.markers.hover.sizeOffset),n}},{key:"toggleAllTooltipSeriesGroups",value:function(t){var e=this.w,n=this.ttCtx;0===n.allTooltipSeriesGroups.length&&(n.allTooltipSeriesGroups=e.globals.dom.baseEl.querySelectorAll(".apexcharts-tooltip-series-group"));for(var i=n.allTooltipSeriesGroups,r=0;r<i.length;r++)"enable"===t?(i[r].classList.add("apexcharts-active"),i[r].style.display=e.config.tooltip.items.display):(i[r].classList.remove("apexcharts-active"),i[r].style.display="none")}}]),t}(),dt=function(){function t(e){i(this,t),this.w=e.w,this.ctx=e.ctx,this.ttCtx=e,this.tooltipUtil=new ht(e)}return o(t,[{key:"drawSeriesTexts",value:function(t){var e=t.shared,n=void 0===e||e,i=t.ttItems,r=t.i,o=void 0===r?0:r,a=t.j,s=void 0===a?null:a,l=t.y1,c=t.y2,u=t.e,h=this.w;void 0!==h.config.tooltip.custom?this.handleCustomTooltip({i:o,j:s,y1:l,y2:c,w:h}):this.toggleActiveInactiveSeries(n);var d=this.getValuesToPrint({i:o,j:s});this.printLabels({i:o,j:s,values:d,ttItems:i,shared:n,e:u});var p=this.ttCtx.getElTooltip();this.ttCtx.tooltipRect.ttWidth=p.getBoundingClientRect().width,this.ttCtx.tooltipRect.ttHeight=p.getBoundingClientRect().height}},{key:"printLabels",value:function(t){var n,i=this,r=t.i,o=t.j,a=t.values,s=t.ttItems,l=t.shared,c=t.e,u=this.w,h=[],d=function(t){return u.globals.seriesGoals[t]&&u.globals.seriesGoals[t][o]&&Array.isArray(u.globals.seriesGoals[t][o])},p=a.xVal,f=a.zVal,g=a.xAxisTTVal,m="",v=u.globals.colors[r];null!==o&&u.config.plotOptions.bar.distributed&&(v=u.globals.colors[o]);for(var y=function(t,a){var y=i.getFormatters(r);m=i.getSeriesName({fn:y.yLbTitleFormatter,index:r,seriesIndex:r,j:o}),"treemap"===u.config.chart.type&&(m=y.yLbTitleFormatter(String(u.config.series[r].data[o].x),{series:u.globals.series,seriesIndex:r,dataPointIndex:o,w:u}));var b=u.config.tooltip.inverseOrder?a:t;if(u.globals.axisCharts){var x=function(t){var e,n,i,r;return u.globals.isRangeData?y.yLbFormatter(null===(e=u.globals.seriesRangeStart)||void 0===e||null===(n=e[t])||void 0===n?void 0:n[o],{series:u.globals.seriesRangeStart,seriesIndex:t,dataPointIndex:o,w:u})+" - "+y.yLbFormatter(null===(i=u.globals.seriesRangeEnd)||void 0===i||null===(r=i[t])||void 0===r?void 0:r[o],{series:u.globals.seriesRangeEnd,seriesIndex:t,dataPointIndex:o,w:u}):y.yLbFormatter(u.globals.series[t][o],{series:u.globals.series,seriesIndex:t,dataPointIndex:o,w:u})};if(l)y=i.getFormatters(b),m=i.getSeriesName({fn:y.yLbTitleFormatter,index:b,seriesIndex:r,j:o}),v=u.globals.colors[b],n=x(b),d(b)&&(h=u.globals.seriesGoals[b][o].map((function(t){return{attrs:t,val:y.yLbFormatter(t.value,{seriesIndex:b,dataPointIndex:o,w:u})}})));else{var _,w=null==c||null===(_=c.target)||void 0===_?void 0:_.getAttribute("fill");w&&(v=-1!==w.indexOf("url")?document.querySelector(w.substr(4).slice(0,-1)).childNodes[0].getAttribute("stroke"):w),n=x(r),d(r)&&Array.isArray(u.globals.seriesGoals[r][o])&&(h=u.globals.seriesGoals[r][o].map((function(t){return{attrs:t,val:y.yLbFormatter(t.value,{seriesIndex:r,dataPointIndex:o,w:u})}})))}}null===o&&(n=y.yLbFormatter(u.globals.series[r],e(e({},u),{},{seriesIndex:r,dataPointIndex:r}))),i.DOMHandling({i:r,t:b,j:o,ttItems:s,values:{val:n,goalVals:h,xVal:p,xAxisTTVal:g,zVal:f},seriesName:m,shared:l,pColor:v})},b=0,x=u.globals.series.length-1;b<u.globals.series.length;b++,x--)y(b,x)}},{key:"getFormatters",value:function(t){var e,n=this.w,i=n.globals.yLabelFormatters[t];return void 0!==n.globals.ttVal?Array.isArray(n.globals.ttVal)?(i=n.globals.ttVal[t]&&n.globals.ttVal[t].formatter,e=n.globals.ttVal[t]&&n.globals.ttVal[t].title&&n.globals.ttVal[t].title.formatter):(i=n.globals.ttVal.formatter,"function"==typeof n.globals.ttVal.title.formatter&&(e=n.globals.ttVal.title.formatter)):e=n.config.tooltip.y.title.formatter,"function"!=typeof i&&(i=n.globals.yLabelFormatters[0]?n.globals.yLabelFormatters[0]:function(t){return t}),"function"!=typeof e&&(e=function(t){return t}),{yLbFormatter:i,yLbTitleFormatter:e}}},{key:"getSeriesName",value:function(t){var e=t.fn,n=t.index,i=t.seriesIndex,r=t.j,o=this.w;return e(String(o.globals.seriesNames[n]),{series:o.globals.series,seriesIndex:i,dataPointIndex:r,w:o})}},{key:"DOMHandling",value:function(t){t.i;var e=t.t,n=t.j,i=t.ttItems,r=t.values,o=t.seriesName,a=t.shared,s=t.pColor,l=this.w,c=this.ttCtx,u=r.val,h=r.goalVals,d=r.xVal,p=r.xAxisTTVal,f=r.zVal,g=null;g=i[e].children,l.config.tooltip.fillSeriesColor&&(i[e].style.backgroundColor=s,g[0].style.display="none"),c.showTooltipTitle&&(null===c.tooltipTitle&&(c.tooltipTitle=l.globals.dom.baseEl.querySelector(".apexcharts-tooltip-title")),c.tooltipTitle.innerHTML=d),c.isXAxisTooltipEnabled&&(c.xaxisTooltipText.innerHTML=""!==p?p:d);var m=i[e].querySelector(".apexcharts-tooltip-text-y-label");m&&(m.innerHTML=o||"");var v=i[e].querySelector(".apexcharts-tooltip-text-y-value");v&&(v.innerHTML=void 0!==u?u:""),g[0]&&g[0].classList.contains("apexcharts-tooltip-marker")&&(l.config.tooltip.marker.fillColors&&Array.isArray(l.config.tooltip.marker.fillColors)&&(s=l.config.tooltip.marker.fillColors[e]),g[0].style.backgroundColor=s),l.config.tooltip.marker.show||(g[0].style.display="none");var y=i[e].querySelector(".apexcharts-tooltip-text-goals-label"),b=i[e].querySelector(".apexcharts-tooltip-text-goals-value");if(h.length&&l.globals.seriesGoals[e]){var x=function(){var t="<div >",e="<div>";h.forEach((function(n,i){t+=' <div style="display: flex"><span class="apexcharts-tooltip-marker" style="background-color: '.concat(n.attrs.strokeColor,'; height: 3px; border-radius: 0; top: 5px;"></span> ').concat(n.attrs.name,"</div>"),e+="<div>".concat(n.val,"</div>")})),y.innerHTML=t+"</div>",b.innerHTML=e+"</div>"};a?l.globals.seriesGoals[e][n]&&Array.isArray(l.globals.seriesGoals[e][n])?x():(y.innerHTML="",b.innerHTML=""):x()}else y.innerHTML="",b.innerHTML="";if(null!==f&&(i[e].querySelector(".apexcharts-tooltip-text-z-label").innerHTML=l.config.tooltip.z.title,i[e].querySelector(".apexcharts-tooltip-text-z-value").innerHTML=void 0!==f?f:""),a&&g[0]){if(l.config.tooltip.hideEmptySeries){var _=i[e].querySelector(".apexcharts-tooltip-marker"),w=i[e].querySelector(".apexcharts-tooltip-text");0==parseFloat(u)?(_.style.display="none",w.style.display="none"):(_.style.display="block",w.style.display="block")}null==u||l.globals.ancillaryCollapsedSeriesIndices.indexOf(e)>-1||l.globals.collapsedSeriesIndices.indexOf(e)>-1?g[0].parentNode.style.display="none":g[0].parentNode.style.display=l.config.tooltip.items.display}}},{key:"toggleActiveInactiveSeries",value:function(t){var e=this.w;if(t)this.tooltipUtil.toggleAllTooltipSeriesGroups("enable");else{this.tooltipUtil.toggleAllTooltipSeriesGroups("disable");var n=e.globals.dom.baseEl.querySelector(".apexcharts-tooltip-series-group");n&&(n.classList.add("apexcharts-active"),n.style.display=e.config.tooltip.items.display)}}},{key:"getValuesToPrint",value:function(t){var e=t.i,n=t.j,i=this.w,r=this.ctx.series.filteredSeriesX(),o="",a="",s=null,l=null,c={series:i.globals.series,seriesIndex:e,dataPointIndex:n,w:i},u=i.globals.ttZFormatter;null===n?l=i.globals.series[e]:i.globals.isXNumeric&&"treemap"!==i.config.chart.type?(o=r[e][n],0===r[e].length&&(o=r[this.tooltipUtil.getFirstActiveXArray(r)][n])):o=void 0!==i.globals.labels[n]?i.globals.labels[n]:"";var h=o;return o=i.globals.isXNumeric&&"datetime"===i.config.xaxis.type?new C(this.ctx).xLabelFormat(i.globals.ttKeyFormatter,h,h,{i:void 0,dateFormatter:new S(this.ctx).formatDate,w:this.w}):i.globals.isBarHorizontal?i.globals.yLabelFormatters[0](h,c):i.globals.xLabelFormatter(h,c),void 0!==i.config.tooltip.x.formatter&&(o=i.globals.ttKeyFormatter(h,c)),i.globals.seriesZ.length>0&&i.globals.seriesZ[e].length>0&&(s=u(i.globals.seriesZ[e][n],i)),a="function"==typeof i.config.xaxis.tooltip.formatter?i.globals.xaxisTooltipFormatter(h,c):o,{val:Array.isArray(l)?l.join(" "):l,xVal:Array.isArray(o)?o.join(" "):o,xAxisTTVal:Array.isArray(a)?a.join(" "):a,zVal:s}}},{key:"handleCustomTooltip",value:function(t){var e=t.i,n=t.j,i=t.y1,r=t.y2,o=t.w,a=this.ttCtx.getElTooltip(),s=o.config.tooltip.custom;Array.isArray(s)&&s[e]&&(s=s[e]),a.innerHTML=s({ctx:this.ctx,series:o.globals.series,seriesIndex:e,dataPointIndex:n,y1:i,y2:r,w:o})}}]),t}(),pt=function(){function t(e){i(this,t),this.ttCtx=e,this.ctx=e.ctx,this.w=e.w}return o(t,[{key:"moveXCrosshairs",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,n=this.ttCtx,i=this.w,r=n.getElXCrosshairs(),o=t-n.xcrosshairsWidth/2,a=i.globals.labels.slice().length;if(null!==e&&(o=i.globals.gridWidth/a*e),null===r||i.globals.isBarHorizontal||(r.setAttribute("x",o),r.setAttribute("x1",o),r.setAttribute("x2",o),r.setAttribute("y2",i.globals.gridHeight),r.classList.add("apexcharts-active")),o<0&&(o=0),o>i.globals.gridWidth&&(o=i.globals.gridWidth),n.isXAxisTooltipEnabled){var s=o;"tickWidth"!==i.config.xaxis.crosshairs.width&&"barWidth"!==i.config.xaxis.crosshairs.width||(s=o+n.xcrosshairsWidth/2),this.moveXAxisTooltip(s)}}},{key:"moveYCrosshairs",value:function(t){var e=this.ttCtx;null!==e.ycrosshairs&&b.setAttrs(e.ycrosshairs,{y1:t,y2:t}),null!==e.ycrosshairsHidden&&b.setAttrs(e.ycrosshairsHidden,{y1:t,y2:t})}},{key:"moveXAxisTooltip",value:function(t){var e=this.w,n=this.ttCtx;if(null!==n.xaxisTooltip&&0!==n.xcrosshairsWidth){n.xaxisTooltip.classList.add("apexcharts-active");var i,r=n.xaxisOffY+e.config.xaxis.tooltip.offsetY+e.globals.translateY+1+e.config.xaxis.offsetY;if(t-=n.xaxisTooltip.getBoundingClientRect().width/2,!isNaN(t))t+=e.globals.translateX,i=new b(this.ctx).getTextRects(n.xaxisTooltipText.innerHTML),n.xaxisTooltipText.style.minWidth=i.width+"px",n.xaxisTooltip.style.left=t+"px",n.xaxisTooltip.style.top=r+"px"}}},{key:"moveYAxisTooltip",value:function(t){var e=this.w,n=this.ttCtx;null===n.yaxisTTEls&&(n.yaxisTTEls=e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));var i=parseInt(n.ycrosshairsHidden.getAttribute("y1"),10),r=e.globals.translateY+i,o=n.yaxisTTEls[t].getBoundingClientRect().height,a=e.globals.translateYAxisX[t]-2;e.config.yaxis[t].opposite&&(a-=26),r-=o/2,-1===e.globals.ignoreYAxisIndexes.indexOf(t)?(n.yaxisTTEls[t].classList.add("apexcharts-active"),n.yaxisTTEls[t].style.top=r+"px",n.yaxisTTEls[t].style.left=a+e.config.yaxis[t].tooltip.offsetX+"px"):n.yaxisTTEls[t].classList.remove("apexcharts-active")}},{key:"moveTooltip",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=this.w,r=this.ttCtx,o=r.getElTooltip(),a=r.tooltipRect,s=null!==n?parseFloat(n):1,l=parseFloat(t)+s+5,c=parseFloat(e)+s/2;if(l>i.globals.gridWidth/2&&(l=l-a.ttWidth-s-10),l>i.globals.gridWidth-a.ttWidth-10&&(l=i.globals.gridWidth-a.ttWidth),l<-20&&(l=-20),i.config.tooltip.followCursor){var u=r.getElGrid().getBoundingClientRect();(l=r.e.clientX-u.left)>i.globals.gridWidth/2&&(l-=r.tooltipRect.ttWidth),(c=r.e.clientY+i.globals.translateY-u.top)>i.globals.gridHeight/2&&(c-=r.tooltipRect.ttHeight)}else i.globals.isBarHorizontal||a.ttHeight/2+c>i.globals.gridHeight&&(c=i.globals.gridHeight-a.ttHeight+i.globals.translateY);isNaN(l)||(l+=i.globals.translateX,o.style.left=l+"px",o.style.top=c+"px")}},{key:"moveMarkers",value:function(t,e){var n=this.w,i=this.ttCtx;if(n.globals.markers.size[t]>0)for(var r=n.globals.dom.baseEl.querySelectorAll(" .apexcharts-series[data\\:realIndex='".concat(t,"'] .apexcharts-marker")),o=0;o<r.length;o++)parseInt(r[o].getAttribute("rel"),10)===e&&(i.marker.resetPointsSize(),i.marker.enlargeCurrentPoint(e,r[o]));else i.marker.resetPointsSize(),this.moveDynamicPointOnHover(e,t)}},{key:"moveDynamicPointOnHover",value:function(t,e){var n,i,r=this.w,o=this.ttCtx,a=r.globals.pointsArray,s=o.tooltipUtil.getHoverMarkerSize(e),l=r.config.series[e].type;if(!l||"column"!==l&&"candlestick"!==l&&"boxPlot"!==l){n=a[e][t][0],i=a[e][t][1]?a[e][t][1]:0;var c=r.globals.dom.baseEl.querySelector(".apexcharts-series[data\\:realIndex='".concat(e,"'] .apexcharts-series-markers circle"));c&&i<r.globals.gridHeight&&i>0&&(c.setAttribute("r",s),c.setAttribute("cx",n),c.setAttribute("cy",i)),this.moveXCrosshairs(n),o.fixedTooltip||this.moveTooltip(n,i,s)}}},{key:"moveDynamicPointsOnHover",value:function(t){var e,n=this.ttCtx,i=n.w,r=0,o=0,a=i.globals.pointsArray;e=new H(this.ctx).getActiveConfigSeriesIndex("asc",["line","area","scatter","bubble"]);var s=n.tooltipUtil.getHoverMarkerSize(e);a[e]&&(r=a[e][t][0],o=a[e][t][1]);var l=n.tooltipUtil.getAllMarkers();if(null!==l)for(var c=0;c<i.globals.series.length;c++){var u=a[c];if(i.globals.comboCharts&&void 0===u&&l.splice(c,0,null),u&&u.length){var h=a[c][t][1],d=void 0;if(l[c].setAttribute("cx",r),"rangeArea"===i.config.chart.type&&!i.globals.comboCharts){var p=t+i.globals.series[c].length;d=a[c][p][1],h-=Math.abs(h-d)/2}null!==h&&!isNaN(h)&&h<i.globals.gridHeight+s&&h+s>0?(l[c]&&l[c].setAttribute("r",s),l[c]&&l[c].setAttribute("cy",h)):l[c]&&l[c].setAttribute("r",0)}}this.moveXCrosshairs(r),n.fixedTooltip||this.moveTooltip(r,o||i.globals.gridHeight,s)}},{key:"moveStickyTooltipOverBars",value:function(t,e){var n=this.w,i=this.ttCtx,r=n.globals.columnSeries?n.globals.columnSeries.length:n.globals.series.length,o=r>=2&&r%2==0?Math.floor(r/2):Math.floor(r/2)+1;n.globals.isBarHorizontal&&(o=new H(this.ctx).getActiveConfigSeriesIndex("desc")+1);var a=n.globals.dom.baseEl.querySelector(".apexcharts-bar-series .apexcharts-series[rel='".concat(o,"'] path[j='").concat(t,"'], .apexcharts-candlestick-series .apexcharts-series[rel='").concat(o,"'] path[j='").concat(t,"'], .apexcharts-boxPlot-series .apexcharts-series[rel='").concat(o,"'] path[j='").concat(t,"'], .apexcharts-rangebar-series .apexcharts-series[rel='").concat(o,"'] path[j='").concat(t,"']"));a||"number"!=typeof e||(a=n.globals.dom.baseEl.querySelector(".apexcharts-bar-series .apexcharts-series[data\\:realIndex='".concat(e,"'] path[j='").concat(t,"'],\n        .apexcharts-candlestick-series .apexcharts-series[data\\:realIndex='").concat(e,"'] path[j='").concat(t,"'],\n        .apexcharts-boxPlot-series .apexcharts-series[data\\:realIndex='").concat(e,"'] path[j='").concat(t,"'],\n        .apexcharts-rangebar-series .apexcharts-series[data\\:realIndex='").concat(e,"'] path[j='").concat(t,"']")));var s=a?parseFloat(a.getAttribute("cx")):0,l=a?parseFloat(a.getAttribute("cy")):0,c=a?parseFloat(a.getAttribute("barWidth")):0,u=i.getElGrid().getBoundingClientRect(),h=a&&(a.classList.contains("apexcharts-candlestick-area")||a.classList.contains("apexcharts-boxPlot-area"));n.globals.isXNumeric?(a&&!h&&(s-=r%2!=0?c/2:0),a&&h&&n.globals.comboCharts&&(s-=c/2)):n.globals.isBarHorizontal||(s=i.xAxisTicksPositions[t-1]+i.dataPointsDividedWidth/2,isNaN(s)&&(s=i.xAxisTicksPositions[t]-i.dataPointsDividedWidth/2)),n.globals.isBarHorizontal?l-=i.tooltipRect.ttHeight:n.config.tooltip.followCursor?l=i.e.clientY-u.top-i.tooltipRect.ttHeight/2:l+i.tooltipRect.ttHeight+15>n.globals.gridHeight&&(l=n.globals.gridHeight),n.globals.isBarHorizontal||this.moveXCrosshairs(s),i.fixedTooltip||this.moveTooltip(s,l||n.globals.gridHeight)}}]),t}(),ft=function(){function t(e){i(this,t),this.w=e.w,this.ttCtx=e,this.ctx=e.ctx,this.tooltipPosition=new pt(e)}return o(t,[{key:"drawDynamicPoints",value:function(){var t=this.w,e=new b(this.ctx),n=new z(this.ctx),i=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series");i=p(i),t.config.chart.stacked&&i.sort((function(t,e){return parseFloat(t.getAttribute("data:realIndex"))-parseFloat(e.getAttribute("data:realIndex"))}));for(var r=0;r<i.length;r++){var o=i[r].querySelector(".apexcharts-series-markers-wrap");if(null!==o){var a=void 0,s="apexcharts-marker w".concat((Math.random()+1).toString(36).substring(4));"line"!==t.config.chart.type&&"area"!==t.config.chart.type||t.globals.comboCharts||t.config.tooltip.intersect||(s+=" no-pointer-events");var l=n.getMarkerConfig({cssClass:s,seriesIndex:Number(o.getAttribute("data:realIndex"))});(a=e.drawMarker(0,0,l)).node.setAttribute("default-marker-size",0);var c=document.createElementNS(t.globals.SVGNS,"g");c.classList.add("apexcharts-series-markers"),c.appendChild(a.node),o.appendChild(c)}}}},{key:"enlargeCurrentPoint",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,r=this.w;"bubble"!==r.config.chart.type&&this.newPointSize(t,e);var o=e.getAttribute("cx"),a=e.getAttribute("cy");if(null!==n&&null!==i&&(o=n,a=i),this.tooltipPosition.moveXCrosshairs(o),!this.fixedTooltip){if("radar"===r.config.chart.type){var s=this.ttCtx.getElGrid().getBoundingClientRect();o=this.ttCtx.e.clientX-s.left}this.tooltipPosition.moveTooltip(o,a,r.config.markers.hover.size)}}},{key:"enlargePoints",value:function(t){for(var e=this.w,n=this,i=this.ttCtx,r=t,o=e.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),a=e.config.markers.hover.size,s=0;s<o.length;s++){var l=o[s].getAttribute("rel"),c=o[s].getAttribute("index");if(void 0===a&&(a=e.globals.markers.size[c]+e.config.markers.hover.sizeOffset),r===parseInt(l,10)){n.newPointSize(r,o[s]);var u=o[s].getAttribute("cx"),h=o[s].getAttribute("cy");n.tooltipPosition.moveXCrosshairs(u),i.fixedTooltip||n.tooltipPosition.moveTooltip(u,h,a)}else n.oldPointSize(o[s])}}},{key:"newPointSize",value:function(t,e){var n=this.w,i=n.config.markers.hover.size,r=0===t?e.parentNode.firstChild:e.parentNode.lastChild;if("0"!==r.getAttribute("default-marker-size")){var o=parseInt(r.getAttribute("index"),10);void 0===i&&(i=n.globals.markers.size[o]+n.config.markers.hover.sizeOffset),i<0&&(i=0),r.setAttribute("r",i)}}},{key:"oldPointSize",value:function(t){var e=parseFloat(t.getAttribute("default-marker-size"));t.setAttribute("r",e)}},{key:"resetPointsSize",value:function(){for(var t=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series:not(.apexcharts-series-collapsed) .apexcharts-marker"),e=0;e<t.length;e++){var n=parseFloat(t[e].getAttribute("default-marker-size"));m.isNumber(n)&&n>=0?t[e].setAttribute("r",n):t[e].setAttribute("r",0)}}}]),t}(),gt=function(){function t(e){i(this,t),this.w=e.w;var n=this.w;this.ttCtx=e,this.isVerticalGroupedRangeBar=!n.globals.isBarHorizontal&&"rangeBar"===n.config.chart.type&&n.config.plotOptions.bar.rangeBarGroupRows}return o(t,[{key:"getAttr",value:function(t,e){return parseFloat(t.target.getAttribute(e))}},{key:"handleHeatTreeTooltip",value:function(t){var e=t.e,n=t.opt,i=t.x,r=t.y,o=t.type,a=this.ttCtx,s=this.w;if(e.target.classList.contains("apexcharts-".concat(o,"-rect"))){var l=this.getAttr(e,"i"),c=this.getAttr(e,"j"),u=this.getAttr(e,"cx"),h=this.getAttr(e,"cy"),d=this.getAttr(e,"width"),p=this.getAttr(e,"height");if(a.tooltipLabels.drawSeriesTexts({ttItems:n.ttItems,i:l,j:c,shared:!1,e:e}),s.globals.capturedSeriesIndex=l,s.globals.capturedDataPointIndex=c,i=u+a.tooltipRect.ttWidth/2+d,r=h+a.tooltipRect.ttHeight/2-p/2,a.tooltipPosition.moveXCrosshairs(u+d/2),i>s.globals.gridWidth/2&&(i=u-a.tooltipRect.ttWidth/2+d),a.w.config.tooltip.followCursor){var f=s.globals.dom.elWrap.getBoundingClientRect();i=s.globals.clientX-f.left-(i>s.globals.gridWidth/2?a.tooltipRect.ttWidth:0),r=s.globals.clientY-f.top-(r>s.globals.gridHeight/2?a.tooltipRect.ttHeight:0)}}return{x:i,y:r}}},{key:"handleMarkerTooltip",value:function(t){var e,n,i=t.e,r=t.opt,o=t.x,a=t.y,s=this.w,l=this.ttCtx;if(i.target.classList.contains("apexcharts-marker")){var c=parseInt(r.paths.getAttribute("cx"),10),u=parseInt(r.paths.getAttribute("cy"),10),h=parseFloat(r.paths.getAttribute("val"));if(n=parseInt(r.paths.getAttribute("rel"),10),e=parseInt(r.paths.parentNode.parentNode.parentNode.getAttribute("rel"),10)-1,l.intersect){var d=m.findAncestor(r.paths,"apexcharts-series");d&&(e=parseInt(d.getAttribute("data:realIndex"),10))}if(l.tooltipLabels.drawSeriesTexts({ttItems:r.ttItems,i:e,j:n,shared:!l.showOnIntersect&&s.config.tooltip.shared,e:i}),"mouseup"===i.type&&l.markerClick(i,e,n),s.globals.capturedSeriesIndex=e,s.globals.capturedDataPointIndex=n,o=c,a=u+s.globals.translateY-1.4*l.tooltipRect.ttHeight,l.w.config.tooltip.followCursor){var p=l.getElGrid().getBoundingClientRect();a=l.e.clientY+s.globals.translateY-p.top}h<0&&(a=u),l.marker.enlargeCurrentPoint(n,r.paths,o,a)}return{x:o,y:a}}},{key:"handleBarTooltip",value:function(t){var e,n,i=t.e,r=t.opt,o=this.w,a=this.ttCtx,s=a.getElTooltip(),l=0,c=0,u=0,h=this.getBarTooltipXY({e:i,opt:r});e=h.i;var d=h.barHeight,p=h.j;o.globals.capturedSeriesIndex=e,o.globals.capturedDataPointIndex=p,o.globals.isBarHorizontal&&a.tooltipUtil.hasBars()||!o.config.tooltip.shared?(c=h.x,u=h.y,n=Array.isArray(o.config.stroke.width)?o.config.stroke.width[e]:o.config.stroke.width,l=c):o.globals.comboCharts||o.config.tooltip.shared||(l/=2),isNaN(u)&&(u=o.globals.svgHeight-a.tooltipRect.ttHeight);var f=parseInt(r.paths.parentNode.getAttribute("data:realIndex"),10),g=o.globals.isMultipleYAxis?o.config.yaxis[f]&&o.config.yaxis[f].reversed:o.config.yaxis[0].reversed;if(c+a.tooltipRect.ttWidth>o.globals.gridWidth&&!g?c-=a.tooltipRect.ttWidth:c<0&&(c=0),a.w.config.tooltip.followCursor){var m=a.getElGrid().getBoundingClientRect();u=a.e.clientY-m.top}null===a.tooltip&&(a.tooltip=o.globals.dom.baseEl.querySelector(".apexcharts-tooltip")),o.config.tooltip.shared||(o.globals.comboBarCount>0?a.tooltipPosition.moveXCrosshairs(l+n/2):a.tooltipPosition.moveXCrosshairs(l)),!a.fixedTooltip&&(!o.config.tooltip.shared||o.globals.isBarHorizontal&&a.tooltipUtil.hasBars())&&(g&&(c-=a.tooltipRect.ttWidth)<0&&(c=0),!g||o.globals.isBarHorizontal&&a.tooltipUtil.hasBars()||(u=u+d-2*(o.globals.series[e][p]<0?d:0)),u=u+o.globals.translateY-a.tooltipRect.ttHeight/2,s.style.left=c+o.globals.translateX+"px",s.style.top=u+"px")}},{key:"getBarTooltipXY",value:function(t){var e=this,n=t.e,i=t.opt,r=this.w,o=null,a=this.ttCtx,s=0,l=0,c=0,u=0,h=0,d=n.target.classList;if(d.contains("apexcharts-bar-area")||d.contains("apexcharts-candlestick-area")||d.contains("apexcharts-boxPlot-area")||d.contains("apexcharts-rangebar-area")){var p=n.target,f=p.getBoundingClientRect(),g=i.elGrid.getBoundingClientRect(),m=f.height;h=f.height;var v=f.width,y=parseInt(p.getAttribute("cx"),10),b=parseInt(p.getAttribute("cy"),10);u=parseFloat(p.getAttribute("barWidth"));var x="touchmove"===n.type?n.touches[0].clientX:n.clientX;o=parseInt(p.getAttribute("j"),10),s=parseInt(p.parentNode.getAttribute("rel"),10)-1;var _=p.getAttribute("data-range-y1"),w=p.getAttribute("data-range-y2");r.globals.comboCharts&&(s=parseInt(p.parentNode.getAttribute("data:realIndex"),10));var S=function(t){return r.globals.isXNumeric?y-v/2:e.isVerticalGroupedRangeBar?y+v/2:y-a.dataPointsDividedWidth+v/2},C=function(){return b-a.dataPointsDividedHeight+m/2-a.tooltipRect.ttHeight/2};a.tooltipLabels.drawSeriesTexts({ttItems:i.ttItems,i:s,j:o,y1:_?parseInt(_,10):null,y2:w?parseInt(w,10):null,shared:!a.showOnIntersect&&r.config.tooltip.shared,e:n}),r.config.tooltip.followCursor?r.globals.isBarHorizontal?(l=x-g.left+15,c=C()):(l=S(),c=n.clientY-g.top-a.tooltipRect.ttHeight/2-15):r.globals.isBarHorizontal?((l=y)<a.xyRatios.baseLineInvertedY&&(l=y-a.tooltipRect.ttWidth),c=C()):(l=S(),c=b)}return{x:l,y:c,barHeight:h,barWidth:u,i:s,j:o}}}]),t}(),mt=function(){function t(e){i(this,t),this.w=e.w,this.ttCtx=e}return o(t,[{key:"drawXaxisTooltip",value:function(){var t=this.w,e=this.ttCtx,n="bottom"===t.config.xaxis.position;e.xaxisOffY=n?t.globals.gridHeight+1:-t.globals.xAxisHeight-t.config.xaxis.axisTicks.height+3;var i=n?"apexcharts-xaxistooltip apexcharts-xaxistooltip-bottom":"apexcharts-xaxistooltip apexcharts-xaxistooltip-top",r=t.globals.dom.elWrap;e.isXAxisTooltipEnabled&&null===t.globals.dom.baseEl.querySelector(".apexcharts-xaxistooltip")&&(e.xaxisTooltip=document.createElement("div"),e.xaxisTooltip.setAttribute("class",i+" apexcharts-theme-"+t.config.tooltip.theme),r.appendChild(e.xaxisTooltip),e.xaxisTooltipText=document.createElement("div"),e.xaxisTooltipText.classList.add("apexcharts-xaxistooltip-text"),e.xaxisTooltipText.style.fontFamily=t.config.xaxis.tooltip.style.fontFamily||t.config.chart.fontFamily,e.xaxisTooltipText.style.fontSize=t.config.xaxis.tooltip.style.fontSize,e.xaxisTooltip.appendChild(e.xaxisTooltipText))}},{key:"drawYaxisTooltip",value:function(){for(var t=this.w,e=this.ttCtx,n=0;n<t.config.yaxis.length;n++){var i=t.config.yaxis[n].opposite||t.config.yaxis[n].crosshairs.opposite;e.yaxisOffX=i?t.globals.gridWidth+1:1;var r="apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(n,i?" apexcharts-yaxistooltip-right":" apexcharts-yaxistooltip-left"),o=t.globals.dom.elWrap;null===t.globals.dom.baseEl.querySelector(".apexcharts-yaxistooltip apexcharts-yaxistooltip-".concat(n))&&(e.yaxisTooltip=document.createElement("div"),e.yaxisTooltip.setAttribute("class",r+" apexcharts-theme-"+t.config.tooltip.theme),o.appendChild(e.yaxisTooltip),0===n&&(e.yaxisTooltipText=[]),e.yaxisTooltipText[n]=document.createElement("div"),e.yaxisTooltipText[n].classList.add("apexcharts-yaxistooltip-text"),e.yaxisTooltip.appendChild(e.yaxisTooltipText[n]))}}},{key:"setXCrosshairWidth",value:function(){var t=this.w,e=this.ttCtx,n=e.getElXCrosshairs();if(e.xcrosshairsWidth=parseInt(t.config.xaxis.crosshairs.width,10),t.globals.comboCharts){var i=t.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(null!==i&&"barWidth"===t.config.xaxis.crosshairs.width){var r=parseFloat(i.getAttribute("barWidth"));e.xcrosshairsWidth=r}else if("tickWidth"===t.config.xaxis.crosshairs.width){var o=t.globals.labels.length;e.xcrosshairsWidth=t.globals.gridWidth/o}}else if("tickWidth"===t.config.xaxis.crosshairs.width){var a=t.globals.labels.length;e.xcrosshairsWidth=t.globals.gridWidth/a}else if("barWidth"===t.config.xaxis.crosshairs.width){var s=t.globals.dom.baseEl.querySelector(".apexcharts-bar-area");if(null!==s){var l=parseFloat(s.getAttribute("barWidth"));e.xcrosshairsWidth=l}else e.xcrosshairsWidth=1}t.globals.isBarHorizontal&&(e.xcrosshairsWidth=0),null!==n&&e.xcrosshairsWidth>0&&n.setAttribute("width",e.xcrosshairsWidth)}},{key:"handleYCrosshair",value:function(){var t=this.w,e=this.ttCtx;e.ycrosshairs=t.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs"),e.ycrosshairsHidden=t.globals.dom.baseEl.querySelector(".apexcharts-ycrosshairs-hidden")}},{key:"drawYaxisTooltipText",value:function(t,e,n){var i=this.ttCtx,r=this.w,o=r.globals.yLabelFormatters[t];if(i.yaxisTooltips[t]){var a=i.getElGrid().getBoundingClientRect(),s=r.globals.seriesYAxisMap[anno.yAxisIndex][0],l=(e-a.top)*n.yRatio[s],c=r.globals.maxYArr[s]-r.globals.minYArr[s],u=r.globals.minYArr[s]+(c-l);i.tooltipPosition.moveYCrosshairs(e-a.top),i.yaxisTooltipText[t].innerHTML=o(u),i.tooltipPosition.moveYAxisTooltip(t)}}}]),t}(),vt=function(){function t(e){i(this,t),this.ctx=e,this.w=e.w;var n=this.w;this.tConfig=n.config.tooltip,this.tooltipUtil=new ht(this),this.tooltipLabels=new dt(this),this.tooltipPosition=new pt(this),this.marker=new ft(this),this.intersect=new gt(this),this.axesTooltip=new mt(this),this.showOnIntersect=this.tConfig.intersect,this.showTooltipTitle=this.tConfig.x.show,this.fixedTooltip=this.tConfig.fixed.enabled,this.xaxisTooltip=null,this.yaxisTTEls=null,this.isBarShared=!n.globals.isBarHorizontal&&this.tConfig.shared,this.lastHoverTime=Date.now()}return o(t,[{key:"getElTooltip",value:function(t){return t||(t=this),t.w.globals.dom.baseEl?t.w.globals.dom.baseEl.querySelector(".apexcharts-tooltip"):null}},{key:"getElXCrosshairs",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-xcrosshairs")}},{key:"getElGrid",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-grid")}},{key:"drawTooltip",value:function(t){var e=this.w;this.xyRatios=t,this.isXAxisTooltipEnabled=e.config.xaxis.tooltip.enabled&&e.globals.axisCharts,this.yaxisTooltips=e.config.yaxis.map((function(t,n){return!!(t.show&&t.tooltip.enabled&&e.globals.axisCharts)})),this.allTooltipSeriesGroups=[],e.globals.axisCharts||(this.showTooltipTitle=!1);var n=document.createElement("div");if(n.classList.add("apexcharts-tooltip"),e.config.tooltip.cssClass&&n.classList.add(e.config.tooltip.cssClass),n.classList.add("apexcharts-theme-".concat(this.tConfig.theme)),e.globals.dom.elWrap.appendChild(n),e.globals.axisCharts){this.axesTooltip.drawXaxisTooltip(),this.axesTooltip.drawYaxisTooltip(),this.axesTooltip.setXCrosshairWidth(),this.axesTooltip.handleYCrosshair();var i=new Y(this.ctx);this.xAxisTicksPositions=i.getXAxisTicksPositions()}if(!e.globals.comboCharts&&!this.tConfig.intersect&&"rangeBar"!==e.config.chart.type||this.tConfig.shared||(this.showOnIntersect=!0),0!==e.config.markers.size&&0!==e.globals.markers.largestSize||this.marker.drawDynamicPoints(this),e.globals.collapsedSeries.length!==e.globals.series.length){this.dataPointsDividedHeight=e.globals.gridHeight/e.globals.dataPoints,this.dataPointsDividedWidth=e.globals.gridWidth/e.globals.dataPoints,this.showTooltipTitle&&(this.tooltipTitle=document.createElement("div"),this.tooltipTitle.classList.add("apexcharts-tooltip-title"),this.tooltipTitle.style.fontFamily=this.tConfig.style.fontFamily||e.config.chart.fontFamily,this.tooltipTitle.style.fontSize=this.tConfig.style.fontSize,n.appendChild(this.tooltipTitle));var r=e.globals.series.length;(e.globals.xyCharts||e.globals.comboCharts)&&this.tConfig.shared&&(r=this.showOnIntersect?1:e.globals.series.length),this.legendLabels=e.globals.dom.baseEl.querySelectorAll(".apexcharts-legend-text"),this.ttItems=this.createTTElements(r),this.addSVGEvents()}}},{key:"createTTElements",value:function(t){for(var e=this,n=this.w,i=[],r=this.getElTooltip(),o=function(o){var a=document.createElement("div");a.classList.add("apexcharts-tooltip-series-group"),a.style.order=n.config.tooltip.inverseOrder?t-o:o+1,e.tConfig.shared&&e.tConfig.enabledOnSeries&&Array.isArray(e.tConfig.enabledOnSeries)&&e.tConfig.enabledOnSeries.indexOf(o)<0&&a.classList.add("apexcharts-tooltip-series-group-hidden");var s=document.createElement("span");s.classList.add("apexcharts-tooltip-marker"),s.style.backgroundColor=n.globals.colors[o],a.appendChild(s);var l=document.createElement("div");l.classList.add("apexcharts-tooltip-text"),l.style.fontFamily=e.tConfig.style.fontFamily||n.config.chart.fontFamily,l.style.fontSize=e.tConfig.style.fontSize,["y","goals","z"].forEach((function(t){var e=document.createElement("div");e.classList.add("apexcharts-tooltip-".concat(t,"-group"));var n=document.createElement("span");n.classList.add("apexcharts-tooltip-text-".concat(t,"-label")),e.appendChild(n);var i=document.createElement("span");i.classList.add("apexcharts-tooltip-text-".concat(t,"-value")),e.appendChild(i),l.appendChild(e)})),a.appendChild(l),r.appendChild(a),i.push(a)},a=0;a<t;a++)o(a);return i}},{key:"addSVGEvents",value:function(){var t=this.w,e=t.config.chart.type,n=this.getElTooltip(),i=!("bar"!==e&&"candlestick"!==e&&"boxPlot"!==e&&"rangeBar"!==e),r="area"===e||"line"===e||"scatter"===e||"bubble"===e||"radar"===e,o=t.globals.dom.Paper.node,a=this.getElGrid();a&&(this.seriesBound=a.getBoundingClientRect());var s,l=[],c=[],u={hoverArea:o,elGrid:a,tooltipEl:n,tooltipY:l,tooltipX:c,ttItems:this.ttItems};if(t.globals.axisCharts&&(r?s=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series[data\\:longestSeries='true'] .apexcharts-marker"):i?s=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-bar-area, .apexcharts-series .apexcharts-candlestick-area, .apexcharts-series .apexcharts-boxPlot-area, .apexcharts-series .apexcharts-rangebar-area"):"heatmap"!==e&&"treemap"!==e||(s=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series .apexcharts-heatmap, .apexcharts-series .apexcharts-treemap")),s&&s.length))for(var h=0;h<s.length;h++)l.push(s[h].getAttribute("cy")),c.push(s[h].getAttribute("cx"));if(t.globals.xyCharts&&!this.showOnIntersect||t.globals.comboCharts&&!this.showOnIntersect||i&&this.tooltipUtil.hasBars()&&this.tConfig.shared)this.addPathsEventListeners([o],u);else if(i&&!t.globals.comboCharts||r&&this.showOnIntersect)this.addDatapointEventsListeners(u);else if(!t.globals.axisCharts||"heatmap"===e||"treemap"===e){var d=t.globals.dom.baseEl.querySelectorAll(".apexcharts-series");this.addPathsEventListeners(d,u)}if(this.showOnIntersect){var p=t.globals.dom.baseEl.querySelectorAll(".apexcharts-line-series .apexcharts-marker, .apexcharts-area-series .apexcharts-marker");p.length>0&&this.addPathsEventListeners(p,u),this.tooltipUtil.hasBars()&&!this.tConfig.shared&&this.addDatapointEventsListeners(u)}}},{key:"drawFixedTooltipRect",value:function(){var t=this.w,e=this.getElTooltip(),n=e.getBoundingClientRect(),i=n.width+10,r=n.height+10,o=this.tConfig.fixed.offsetX,a=this.tConfig.fixed.offsetY,s=this.tConfig.fixed.position.toLowerCase();return s.indexOf("right")>-1&&(o=o+t.globals.svgWidth-i+10),s.indexOf("bottom")>-1&&(a=a+t.globals.svgHeight-r-10),e.style.left=o+"px",e.style.top=a+"px",{x:o,y:a,ttWidth:i,ttHeight:r}}},{key:"addDatapointEventsListeners",value:function(t){var e=this.w.globals.dom.baseEl.querySelectorAll(".apexcharts-series-markers .apexcharts-marker, .apexcharts-bar-area, .apexcharts-candlestick-area, .apexcharts-boxPlot-area, .apexcharts-rangebar-area");this.addPathsEventListeners(e,t)}},{key:"addPathsEventListeners",value:function(t,e){for(var n=this,i=function(i){var r={paths:t[i],tooltipEl:e.tooltipEl,tooltipY:e.tooltipY,tooltipX:e.tooltipX,elGrid:e.elGrid,hoverArea:e.hoverArea,ttItems:e.ttItems};["mousemove","mouseup","touchmove","mouseout","touchend"].map((function(e){return t[i].addEventListener(e,n.onSeriesHover.bind(n,r),{capture:!1,passive:!0})}))},r=0;r<t.length;r++)i(r)}},{key:"onSeriesHover",value:function(t,e){var n=this,i=Date.now()-this.lastHoverTime;i>=100?this.seriesHover(t,e):(clearTimeout(this.seriesHoverTimeout),this.seriesHoverTimeout=setTimeout((function(){n.seriesHover(t,e)}),100-i))}},{key:"seriesHover",value:function(t,e){var n=this;this.lastHoverTime=Date.now();var i=[],r=this.w;r.config.chart.group&&(i=this.ctx.getGroupedCharts()),r.globals.axisCharts&&(r.globals.minX===-1/0&&r.globals.maxX===1/0||0===r.globals.dataPoints)||(i.length?i.forEach((function(i){var r=n.getElTooltip(i),o={paths:t.paths,tooltipEl:r,tooltipY:t.tooltipY,tooltipX:t.tooltipX,elGrid:t.elGrid,hoverArea:t.hoverArea,ttItems:i.w.globals.tooltip.ttItems};i.w.globals.minX===n.w.globals.minX&&i.w.globals.maxX===n.w.globals.maxX&&i.w.globals.tooltip.seriesHoverByContext({chartCtx:i,ttCtx:i.w.globals.tooltip,opt:o,e:e})})):this.seriesHoverByContext({chartCtx:this.ctx,ttCtx:this.w.globals.tooltip,opt:t,e:e}))}},{key:"seriesHoverByContext",value:function(t){var e=t.chartCtx,n=t.ttCtx,i=t.opt,r=t.e,o=e.w,a=this.getElTooltip();a&&(n.tooltipRect={x:0,y:0,ttWidth:a.getBoundingClientRect().width,ttHeight:a.getBoundingClientRect().height},n.e=r,!n.tooltipUtil.hasBars()||o.globals.comboCharts||n.isBarShared||this.tConfig.onDatasetHover.highlightDataSeries&&new H(e).toggleSeriesOnHover(r,r.target.parentNode),n.fixedTooltip&&n.drawFixedTooltipRect(),o.globals.axisCharts?n.axisChartsTooltips({e:r,opt:i,tooltipRect:n.tooltipRect}):n.nonAxisChartsTooltips({e:r,opt:i,tooltipRect:n.tooltipRect}))}},{key:"axisChartsTooltips",value:function(t){var e,n,i=t.e,r=t.opt,o=this.w,a=r.elGrid.getBoundingClientRect(),s="touchmove"===i.type?i.touches[0].clientX:i.clientX,l="touchmove"===i.type?i.touches[0].clientY:i.clientY;if(this.clientY=l,this.clientX=s,o.globals.capturedSeriesIndex=-1,o.globals.capturedDataPointIndex=-1,l<a.top||l>a.top+a.height)this.handleMouseOut(r);else{if(Array.isArray(this.tConfig.enabledOnSeries)&&!o.config.tooltip.shared){var c=parseInt(r.paths.getAttribute("index"),10);if(this.tConfig.enabledOnSeries.indexOf(c)<0)return void this.handleMouseOut(r)}var u=this.getElTooltip(),h=this.getElXCrosshairs(),d=o.globals.xyCharts||"bar"===o.config.chart.type&&!o.globals.isBarHorizontal&&this.tooltipUtil.hasBars()&&this.tConfig.shared||o.globals.comboCharts&&this.tooltipUtil.hasBars();if("mousemove"===i.type||"touchmove"===i.type||"mouseup"===i.type){if(o.globals.collapsedSeries.length+o.globals.ancillaryCollapsedSeries.length===o.globals.series.length)return;null!==h&&h.classList.add("apexcharts-active");var p=this.yaxisTooltips.filter((function(t){return!0===t}));if(null!==this.ycrosshairs&&p.length&&this.ycrosshairs.classList.add("apexcharts-active"),d&&!this.showOnIntersect)this.handleStickyTooltip(i,s,l,r);else if("heatmap"===o.config.chart.type||"treemap"===o.config.chart.type){var f=this.intersect.handleHeatTreeTooltip({e:i,opt:r,x:e,y:n,type:o.config.chart.type});e=f.x,n=f.y,u.style.left=e+"px",u.style.top=n+"px"}else this.tooltipUtil.hasBars()&&this.intersect.handleBarTooltip({e:i,opt:r}),this.tooltipUtil.hasMarkers()&&this.intersect.handleMarkerTooltip({e:i,opt:r,x:e,y:n});if(this.yaxisTooltips.length)for(var g=0;g<o.config.yaxis.length;g++)this.axesTooltip.drawYaxisTooltipText(g,l,this.xyRatios);r.tooltipEl.classList.add("apexcharts-active")}else"mouseout"!==i.type&&"touchend"!==i.type||this.handleMouseOut(r)}}},{key:"nonAxisChartsTooltips",value:function(t){var e=t.e,n=t.opt,i=t.tooltipRect,r=this.w,o=n.paths.getAttribute("rel"),a=this.getElTooltip(),s=r.globals.dom.elWrap.getBoundingClientRect();if("mousemove"===e.type||"touchmove"===e.type){a.classList.add("apexcharts-active"),this.tooltipLabels.drawSeriesTexts({ttItems:n.ttItems,i:parseInt(o,10)-1,shared:!1});var l=r.globals.clientX-s.left-i.ttWidth/2,c=r.globals.clientY-s.top-i.ttHeight-10;if(a.style.left=l+"px",a.style.top=c+"px",r.config.legend.tooltipHoverFormatter){var u=o-1,h=(0,r.config.legend.tooltipHoverFormatter)(this.legendLabels[u].getAttribute("data:default-text"),{seriesIndex:u,dataPointIndex:u,w:r});this.legendLabels[u].innerHTML=h}}else"mouseout"!==e.type&&"touchend"!==e.type||(a.classList.remove("apexcharts-active"),r.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach((function(t){var e=t.getAttribute("data:default-text");t.innerHTML=decodeURIComponent(e)})))}},{key:"handleStickyTooltip",value:function(t,e,n,i){var r=this.w,o=this.tooltipUtil.getNearestValues({context:this,hoverArea:i.hoverArea,elGrid:i.elGrid,clientX:e,clientY:n}),a=o.j,s=o.capturedSeries;r.globals.collapsedSeriesIndices.includes(s)&&(s=null);var l=i.elGrid.getBoundingClientRect();if(o.hoverX<0||o.hoverX>l.width)this.handleMouseOut(i);else if(null!==s)this.handleStickyCapturedSeries(t,s,i,a);else if(this.tooltipUtil.isXoverlap(a)||r.globals.isBarHorizontal){var c=r.globals.series.findIndex((function(t,e){return!r.globals.collapsedSeriesIndices.includes(e)}));this.create(t,this,c,a,i.ttItems)}}},{key:"handleStickyCapturedSeries",value:function(t,e,n,i){var r=this.w;if(this.tConfig.shared||null!==r.globals.series[e][i]){if(void 0!==r.globals.series[e][i])this.tConfig.shared&&this.tooltipUtil.isXoverlap(i)&&this.tooltipUtil.isInitialSeriesSameLen()?this.create(t,this,e,i,n.ttItems):this.create(t,this,e,i,n.ttItems,!1);else if(this.tooltipUtil.isXoverlap(i)){var o=r.globals.series.findIndex((function(t,e){return!r.globals.collapsedSeriesIndices.includes(e)}));this.create(t,this,o,i,n.ttItems)}}else this.handleMouseOut(n)}},{key:"deactivateHoverFilter",value:function(){for(var t=this.w,e=new b(this.ctx),n=t.globals.dom.Paper.select(".apexcharts-bar-area"),i=0;i<n.length;i++)e.pathMouseLeave(n[i])}},{key:"handleMouseOut",value:function(t){var e=this.w,n=this.getElXCrosshairs();if(t.tooltipEl.classList.remove("apexcharts-active"),this.deactivateHoverFilter(),"bubble"!==e.config.chart.type&&this.marker.resetPointsSize(),null!==n&&n.classList.remove("apexcharts-active"),null!==this.ycrosshairs&&this.ycrosshairs.classList.remove("apexcharts-active"),this.isXAxisTooltipEnabled&&this.xaxisTooltip.classList.remove("apexcharts-active"),this.yaxisTooltips.length){null===this.yaxisTTEls&&(this.yaxisTTEls=e.globals.dom.baseEl.querySelectorAll(".apexcharts-yaxistooltip"));for(var i=0;i<this.yaxisTTEls.length;i++)this.yaxisTTEls[i].classList.remove("apexcharts-active")}e.config.legend.tooltipHoverFormatter&&this.legendLabels.forEach((function(t){var e=t.getAttribute("data:default-text");t.innerHTML=decodeURIComponent(e)}))}},{key:"markerClick",value:function(t,e,n){var i=this.w;"function"==typeof i.config.chart.events.markerClick&&i.config.chart.events.markerClick(t,this.ctx,{seriesIndex:e,dataPointIndex:n,w:i}),this.ctx.events.fireEvent("markerClick",[t,this.ctx,{seriesIndex:e,dataPointIndex:n,w:i}])}},{key:"create",value:function(t,n,i,r,o){var a,s,l,c,u,h,d,p,f,g,m,v,y,x,_,w,S=arguments.length>5&&void 0!==arguments[5]?arguments[5]:null,C=this.w,k=n;"mouseup"===t.type&&this.markerClick(t,i,r),null===S&&(S=this.tConfig.shared);var A=this.tooltipUtil.hasMarkers(i),M=this.tooltipUtil.getElBars();if(C.config.legend.tooltipHoverFormatter){var T=C.config.legend.tooltipHoverFormatter,I=Array.from(this.legendLabels);I.forEach((function(t){var e=t.getAttribute("data:default-text");t.innerHTML=decodeURIComponent(e)}));for(var E=0;E<I.length;E++){var O=I[E],D=parseInt(O.getAttribute("i"),10),L=decodeURIComponent(O.getAttribute("data:default-text")),P=T(L,{seriesIndex:S?D:i,dataPointIndex:r,w:C});if(S)O.innerHTML=C.globals.collapsedSeriesIndices.indexOf(D)<0?P:L;else if(O.innerHTML=D===i?P:L,i===D)break}}var N=e(e({ttItems:o,i:i,j:r},void 0!==(null===(a=C.globals.seriesRange)||void 0===a||null===(s=a[i])||void 0===s||null===(l=s[r])||void 0===l||null===(c=l.y[0])||void 0===c?void 0:c.y1)&&{y1:null===(u=C.globals.seriesRange)||void 0===u||null===(h=u[i])||void 0===h||null===(d=h[r])||void 0===d||null===(p=d.y[0])||void 0===p?void 0:p.y1}),void 0!==(null===(f=C.globals.seriesRange)||void 0===f||null===(g=f[i])||void 0===g||null===(m=g[r])||void 0===m||null===(v=m.y[0])||void 0===v?void 0:v.y2)&&{y2:null===(y=C.globals.seriesRange)||void 0===y||null===(x=y[i])||void 0===x||null===(_=x[r])||void 0===_||null===(w=_.y[0])||void 0===w?void 0:w.y2});if(S){if(k.tooltipLabels.drawSeriesTexts(e(e({},N),{},{shared:!this.showOnIntersect&&this.tConfig.shared})),A)C.globals.markers.largestSize>0?k.marker.enlargePoints(r):k.tooltipPosition.moveDynamicPointsOnHover(r);else if(this.tooltipUtil.hasBars()&&(this.barSeriesHeight=this.tooltipUtil.getBarsHeight(M),this.barSeriesHeight>0)){var R=new b(this.ctx),B=C.globals.dom.Paper.select(".apexcharts-bar-area[j='".concat(r,"']"));this.deactivateHoverFilter(),this.tooltipPosition.moveStickyTooltipOverBars(r,i);for(var z=0;z<B.length;z++)R.pathMouseEnter(B[z])}}else k.tooltipLabels.drawSeriesTexts(e({shared:!1},N)),this.tooltipUtil.hasBars()&&k.tooltipPosition.moveStickyTooltipOverBars(r,i),A&&k.tooltipPosition.moveMarkers(i,r)}}]),t}(),yt=function(){function t(e){i(this,t),this.w=e.w,this.barCtx=e,this.totalFormatter=this.w.config.plotOptions.bar.dataLabels.total.formatter,this.totalFormatter||(this.totalFormatter=this.w.config.dataLabels.formatter)}return o(t,[{key:"handleBarDataLabels",value:function(t){var e=t.x,n=t.y,i=t.y1,r=t.y2,o=t.i,a=t.j,s=t.realIndex,l=t.groupIndex,c=t.series,u=t.barHeight,h=t.barWidth,d=t.barXPosition,p=t.barYPosition,f=t.visibleSeries,g=t.renderedPath,m=this.w,v=new b(this.barCtx.ctx),y=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[s]:this.barCtx.strokeWidth,x=e+parseFloat(h*f),_=n+parseFloat(u*f);m.globals.isXNumeric&&!m.globals.isBarHorizontal&&(x=e+parseFloat(h*(f+1)),_=n+parseFloat(u*(f+1))-y);var w,S,C=null,k=e,A=n,M=m.config.dataLabels,T=this.barCtx.barOptions.dataLabels,I=this.barCtx.barOptions.dataLabels.total;void 0!==p&&this.barCtx.isRangeBar&&(_=p,A=p),void 0!==d&&this.barCtx.isVerticalGroupedRangeBar&&(x=d,k=d);var E=M.offsetX,O=M.offsetY,D={width:0,height:0};if(m.config.dataLabels.enabled){var L=this.barCtx.series[o][a];D=v.getTextRects(m.globals.yLabelFormatters[0](L),parseFloat(M.style.fontSize))}var P={x:e,y:n,i:o,j:a,realIndex:s,groupIndex:l||-1,renderedPath:g,bcx:x,bcy:_,barHeight:u,barWidth:h,textRects:D,strokeWidth:y,dataLabelsX:k,dataLabelsY:A,dataLabelsConfig:M,barDataLabelsConfig:T,barTotalDataLabelsConfig:I,offX:E,offY:O};return S=this.barCtx.isHorizontal?this.calculateBarsDataLabelsPosition(P):this.calculateColumnsDataLabelsPosition(P),g.attr({cy:S.bcy,cx:S.bcx,j:a,val:c[o][a],barHeight:u,barWidth:h}),w=this.drawCalculatedDataLabels({x:S.dataLabelsX,y:S.dataLabelsY,val:this.barCtx.isRangeBar?[i,r]:c[o][a],i:s,j:a,barWidth:h,barHeight:u,textRects:D,dataLabelsConfig:M}),m.config.chart.stacked&&I.enabled&&(C=this.drawTotalDataLabels({x:S.totalDataLabelsX,y:S.totalDataLabelsY,barWidth:h,barHeight:u,realIndex:s,textAnchor:S.totalDataLabelsAnchor,val:this.getStackedTotalDataLabel({realIndex:s,j:a}),dataLabelsConfig:M,barTotalDataLabelsConfig:I})),{dataLabels:w,totalDataLabels:C}}},{key:"getStackedTotalDataLabel",value:function(t){var n=t.realIndex,i=t.j,r=this.w,o=this.barCtx.stackedSeriesTotals[i];return this.totalFormatter&&(o=this.totalFormatter(o,e(e({},r),{},{seriesIndex:n,dataPointIndex:i,w:r}))),o}},{key:"calculateColumnsDataLabelsPosition",value:function(t){var e,n,i=this.w,r=t.i,o=t.j,a=t.realIndex,s=t.groupIndex,l=t.y,c=t.bcx,u=t.barWidth,h=t.barHeight,d=t.textRects,p=t.dataLabelsX,f=t.dataLabelsY,g=t.dataLabelsConfig,m=t.barDataLabelsConfig,v=t.barTotalDataLabelsConfig,y=t.strokeWidth,x=t.offX,_=t.offY;h=Math.abs(h);var w="vertical"===i.config.plotOptions.bar.dataLabels.orientation,S=this.barCtx.barHelpers.getZeroValueEncounters({i:r,j:o}).zeroEncounters;c=c-y/2+(-1!==s?s*u:0);var C=i.globals.gridWidth/i.globals.dataPoints;this.barCtx.isVerticalGroupedRangeBar?p+=u/2:(p=i.globals.isXNumeric?c-u/2+x:c-C+u/2+x,S>0&&i.config.plotOptions.bar.hideZeroBarsWhenGrouped&&(p-=u*S)),w&&(p=p+d.height/2-y/2-2);var k=this.barCtx.series[r][o]<0,A=l;switch(this.barCtx.isReversed&&(A=l-h+(k?2*h:0),l-=h),m.position){case"center":f=w?k?A-h/2+_:A+h/2-_:k?A-h/2+d.height/2+_:A+h/2+d.height/2-_;break;case"bottom":f=w?k?A-h+_:A+h-_:k?A-h+d.height+y+_:A+h-d.height/2+y-_;break;case"top":f=w?k?A+_:A-_:k?A-d.height/2-_:A+d.height+_}if(this.barCtx.lastActiveBarSerieIndex===a&&v.enabled){var M=new b(this.barCtx.ctx).getTextRects(this.getStackedTotalDataLabel({realIndex:a,j:o}),g.fontSize);e=k?A-M.height/2-_-v.offsetY+18:A+M.height+_+v.offsetY-18,n=p+v.offsetX}return i.config.chart.stacked||(f<0?f=0+y:f+d.height/3>i.globals.gridHeight&&(f=i.globals.gridHeight-y)),{bcx:c,bcy:l,dataLabelsX:p,dataLabelsY:f,totalDataLabelsX:n,totalDataLabelsY:e,totalDataLabelsAnchor:"middle"}}},{key:"calculateBarsDataLabelsPosition",value:function(t){var e=this.w,n=t.x,i=t.i,r=t.j,o=t.realIndex,a=t.groupIndex,s=t.bcy,l=t.barHeight,c=t.barWidth,u=t.textRects,h=t.dataLabelsX,d=t.strokeWidth,p=t.dataLabelsConfig,f=t.barDataLabelsConfig,g=t.barTotalDataLabelsConfig,m=t.offX,v=t.offY,y=e.globals.gridHeight/e.globals.dataPoints;c=Math.abs(c);var x,_,w=(s+=-1!==a?a*l:0)-(this.barCtx.isRangeBar?0:y)+l/2+u.height/2+v-3,S="start",C=this.barCtx.series[i][r]<0,k=n;switch(this.barCtx.isReversed&&(k=n+c-(C?2*c:0),n=e.globals.gridWidth-c),f.position){case"center":h=C?k+c/2-m:Math.max(u.width/2,k-c/2)+m;break;case"bottom":h=C?k+c-d-Math.round(u.width/2)-m:k-c+d+Math.round(u.width/2)+m;break;case"top":h=C?k-d+Math.round(u.width/2)-m:k-d-Math.round(u.width/2)+m}if(this.barCtx.lastActiveBarSerieIndex===o&&g.enabled){var A=new b(this.barCtx.ctx).getTextRects(this.getStackedTotalDataLabel({realIndex:o,j:r}),p.fontSize);C?(x=k-d+Math.round(A.width/2)-m-g.offsetX-15,S="end"):x=k-d-Math.round(A.width/2)+m+g.offsetX+15,_=w+g.offsetY}return e.config.chart.stacked||(h<0?h=h+u.width+d:h+u.width/2>e.globals.gridWidth&&(h=e.globals.gridWidth-u.width-d)),{bcx:n,bcy:s,dataLabelsX:h,dataLabelsY:w,totalDataLabelsX:x,totalDataLabelsY:_,totalDataLabelsAnchor:S}}},{key:"drawCalculatedDataLabels",value:function(t){var n=t.x,i=t.y,r=t.val,o=t.i,a=t.j,s=t.textRects,l=t.barHeight,c=t.barWidth,u=t.dataLabelsConfig,h=this.w,d="rotate(0)";"vertical"===h.config.plotOptions.bar.dataLabels.orientation&&(d="rotate(-90, ".concat(n,", ").concat(i,")"));var p=new V(this.barCtx.ctx),f=new b(this.barCtx.ctx),g=u.formatter,m=null,v=h.globals.collapsedSeriesIndices.indexOf(o)>-1;if(u.enabled&&!v){m=f.group({class:"apexcharts-data-labels",transform:d});var y="";void 0!==r&&(y=g(r,e(e({},h),{},{seriesIndex:o,dataPointIndex:a,w:h}))),!r&&h.config.plotOptions.bar.hideZeroBarsWhenGrouped&&(y="");var x=h.globals.series[o][a]<0,_=h.config.plotOptions.bar.dataLabels.position;"vertical"===h.config.plotOptions.bar.dataLabels.orientation&&("top"===_&&(u.textAnchor=x?"end":"start"),"center"===_&&(u.textAnchor="middle"),"bottom"===_&&(u.textAnchor=x?"end":"start")),this.barCtx.isRangeBar&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&c<f.getTextRects(y,parseFloat(u.style.fontSize)).width&&(y=""),h.config.chart.stacked&&this.barCtx.barOptions.dataLabels.hideOverflowingLabels&&(this.barCtx.isHorizontal?s.width/1.6>Math.abs(c)&&(y=""):s.height/1.6>Math.abs(l)&&(y=""));var w=e({},u);this.barCtx.isHorizontal&&r<0&&("start"===u.textAnchor?w.textAnchor="end":"end"===u.textAnchor&&(w.textAnchor="start")),p.plotDataLabelsText({x:n,y:i,text:y,i:o,j:a,parent:m,dataLabelsConfig:w,alwaysDrawDataLabel:!0,offsetCorrection:!0})}return m}},{key:"drawTotalDataLabels",value:function(t){var e,n=t.x,i=t.y,r=t.val,o=t.barWidth,a=t.barHeight,s=t.realIndex,l=t.textAnchor,c=t.barTotalDataLabelsConfig,u=this.w,h=new b(this.barCtx.ctx);return c.enabled&&void 0!==n&&void 0!==i&&this.barCtx.lastActiveBarSerieIndex===s&&(e=h.drawText({x:n-(!u.globals.isBarHorizontal&&u.globals.seriesGroups.length?o/u.globals.seriesGroups.length:0),y:i-(u.globals.isBarHorizontal&&u.globals.seriesGroups.length?a/u.globals.seriesGroups.length:0),foreColor:c.style.color,text:r,textAnchor:l,fontFamily:c.style.fontFamily,fontSize:c.style.fontSize,fontWeight:c.style.fontWeight})),e}}]),t}(),bt=function(){function t(e){i(this,t),this.w=e.w,this.barCtx=e}return o(t,[{key:"initVariables",value:function(t){var e=this.w;this.barCtx.series=t,this.barCtx.totalItems=0,this.barCtx.seriesLen=0,this.barCtx.visibleI=-1,this.barCtx.visibleItems=1;for(var n=0;n<t.length;n++)if(t[n].length>0&&(this.barCtx.seriesLen=this.barCtx.seriesLen+1,this.barCtx.totalItems+=t[n].length),e.globals.isXNumeric)for(var i=0;i<t[n].length;i++)e.globals.seriesX[n][i]>e.globals.minX&&e.globals.seriesX[n][i]<e.globals.maxX&&this.barCtx.visibleItems++;else this.barCtx.visibleItems=e.globals.dataPoints;0===this.barCtx.seriesLen&&(this.barCtx.seriesLen=1),this.barCtx.zeroSerieses=[],e.globals.comboCharts||this.checkZeroSeries({series:t})}},{key:"initialPositions",value:function(){var t,e,n,i,r,o,a,s,l=this.w,c=l.globals.dataPoints;this.barCtx.isRangeBar&&(c=l.globals.labels.length);var u=this.barCtx.seriesLen;if(l.config.plotOptions.bar.rangeBarGroupRows&&(u=1),this.barCtx.isHorizontal)r=(n=l.globals.gridHeight/c)/u,l.globals.isXNumeric&&(r=(n=l.globals.gridHeight/this.barCtx.totalItems)/this.barCtx.seriesLen),r=r*parseInt(this.barCtx.barOptions.barHeight,10)/100,-1===String(this.barCtx.barOptions.barHeight).indexOf("%")&&(r=parseInt(this.barCtx.barOptions.barHeight,10)),s=this.barCtx.baseLineInvertedY+l.globals.padHorizontal+(this.barCtx.isReversed?l.globals.gridWidth:0)-(this.barCtx.isReversed?2*this.barCtx.baseLineInvertedY:0),this.barCtx.isFunnel&&(s=l.globals.gridWidth/2),e=(n-r*this.barCtx.seriesLen)/2;else{if(i=l.globals.gridWidth/this.barCtx.visibleItems,l.config.xaxis.convertedCatToNumeric&&(i=l.globals.gridWidth/l.globals.dataPoints),o=i/u*parseInt(this.barCtx.barOptions.columnWidth,10)/100,l.globals.isXNumeric){var h=this.barCtx.xRatio;l.globals.minXDiff&&.5!==l.globals.minXDiff&&l.globals.minXDiff/h>0&&(i=l.globals.minXDiff/h),(o=i/u*parseInt(this.barCtx.barOptions.columnWidth,10)/100)<1&&(o=1)}-1===String(this.barCtx.barOptions.columnWidth).indexOf("%")&&(o=parseInt(this.barCtx.barOptions.columnWidth,10)),a=l.globals.gridHeight-this.barCtx.baseLineY[this.barCtx.translationsIndex]-(this.barCtx.isReversed?l.globals.gridHeight:0)+(this.barCtx.isReversed?2*this.barCtx.baseLineY[this.barCtx.translationsIndex]:0),t=l.globals.padHorizontal+(i-o*this.barCtx.seriesLen)/2}return l.globals.barHeight=r,l.globals.barWidth=o,{x:t,y:e,yDivision:n,xDivision:i,barHeight:r,barWidth:o,zeroH:a,zeroW:s}}},{key:"initializeStackedPrevVars",value:function(t){var e=t.w;e.globals.hasSeriesGroups?e.globals.seriesGroups.forEach((function(e){t[e]||(t[e]={}),t[e].prevY=[],t[e].prevX=[],t[e].prevYF=[],t[e].prevXF=[],t[e].prevYVal=[],t[e].prevXVal=[]})):(t.prevY=[],t.prevX=[],t.prevYF=[],t.prevXF=[],t.prevYVal=[],t.prevXVal=[])}},{key:"initializeStackedXYVars",value:function(t){var e=t.w;e.globals.hasSeriesGroups?e.globals.seriesGroups.forEach((function(e){t[e]||(t[e]={}),t[e].xArrj=[],t[e].xArrjF=[],t[e].xArrjVal=[],t[e].yArrj=[],t[e].yArrjF=[],t[e].yArrjVal=[]})):(t.xArrj=[],t.xArrjF=[],t.xArrjVal=[],t.yArrj=[],t.yArrjF=[],t.yArrjVal=[])}},{key:"getPathFillColor",value:function(t,e,n,i){var r,o,a,s,l=this.w,c=new B(this.barCtx.ctx),u=null,h=this.barCtx.barOptions.distributed?n:e;return this.barCtx.barOptions.colors.ranges.length>0&&this.barCtx.barOptions.colors.ranges.map((function(i){t[e][n]>=i.from&&t[e][n]<=i.to&&(u=i.color)})),l.config.series[e].data[n]&&l.config.series[e].data[n].fillColor&&(u=l.config.series[e].data[n].fillColor),c.fillPath({seriesNumber:this.barCtx.barOptions.distributed?h:i,dataPointIndex:n,color:u,value:t[e][n],fillConfig:null===(r=l.config.series[e].data[n])||void 0===r?void 0:r.fill,fillType:null!==(o=l.config.series[e].data[n])&&void 0!==o&&null!==(a=o.fill)&&void 0!==a&&a.type?null===(s=l.config.series[e].data[n])||void 0===s?void 0:s.fill.type:Array.isArray(l.config.fill.type)?l.config.fill.type[e]:l.config.fill.type})}},{key:"getStrokeWidth",value:function(t,e,n){var i=0,r=this.w;return void 0===this.barCtx.series[t][e]||null===this.barCtx.series[t][e]?this.barCtx.isNullValue=!0:this.barCtx.isNullValue=!1,r.config.stroke.show&&(this.barCtx.isNullValue||(i=Array.isArray(this.barCtx.strokeWidth)?this.barCtx.strokeWidth[n]:this.barCtx.strokeWidth)),i}},{key:"shouldApplyRadius",value:function(t){var e=this.w,n=!1;return e.config.plotOptions.bar.borderRadius>0&&(e.config.chart.stacked&&"last"===e.config.plotOptions.bar.borderRadiusWhenStacked?this.barCtx.lastActiveBarSerieIndex===t&&(n=!0):n=!0),n}},{key:"barBackground",value:function(t){var e=t.j,n=t.i,i=t.x1,r=t.x2,o=t.y1,a=t.y2,s=t.elSeries,l=this.w,c=new b(this.barCtx.ctx),u=new H(this.barCtx.ctx).getActiveConfigSeriesIndex();if(this.barCtx.barOptions.colors.backgroundBarColors.length>0&&u===n){e>=this.barCtx.barOptions.colors.backgroundBarColors.length&&(e%=this.barCtx.barOptions.colors.backgroundBarColors.length);var h=this.barCtx.barOptions.colors.backgroundBarColors[e],d=c.drawRect(void 0!==i?i:0,void 0!==o?o:0,void 0!==r?r:l.globals.gridWidth,void 0!==a?a:l.globals.gridHeight,this.barCtx.barOptions.colors.backgroundBarRadius,h,this.barCtx.barOptions.colors.backgroundBarOpacity);s.add(d),d.node.classList.add("apexcharts-backgroundBar")}}},{key:"getColumnPaths",value:function(t){var e,n=t.barWidth,i=t.barXPosition,r=t.y1,o=t.y2,a=t.strokeWidth,s=t.seriesGroup,l=t.realIndex,c=t.i,u=t.j,h=t.w,d=new b(this.barCtx.ctx);(a=Array.isArray(a)?a[l]:a)||(a=0);var p=n,f=i;null!==(e=h.config.series[l].data[u])&&void 0!==e&&e.columnWidthOffset&&(f=i-h.config.series[l].data[u].columnWidthOffset/2,p=n+h.config.series[l].data[u].columnWidthOffset);var g=f,m=f+p;r+=.001,o+=.001;var v=d.move(g,r),y=d.move(g,r),x=d.line(m-a,r);if(h.globals.previousPaths.length>0&&(y=this.barCtx.getPreviousPath(l,u,!1)),v=v+d.line(g,o)+d.line(m-a,o)+d.line(m-a,r)+("around"===h.config.plotOptions.bar.borderRadiusApplication?" Z":" z"),y=y+d.line(g,r)+x+x+x+x+x+d.line(g,r)+("around"===h.config.plotOptions.bar.borderRadiusApplication?" Z":" z"),this.shouldApplyRadius(l)&&(v=d.roundPathCorners(v,h.config.plotOptions.bar.borderRadius)),h.config.chart.stacked){var _=this.barCtx;h.globals.hasSeriesGroups&&s&&(_=this.barCtx[s]),_.yArrj.push(o),_.yArrjF.push(Math.abs(r-o)),_.yArrjVal.push(this.barCtx.series[c][u])}return{pathTo:v,pathFrom:y}}},{key:"getBarpaths",value:function(t){var e,n=t.barYPosition,i=t.barHeight,r=t.x1,o=t.x2,a=t.strokeWidth,s=t.seriesGroup,l=t.realIndex,c=t.i,u=t.j,h=t.w,d=new b(this.barCtx.ctx);(a=Array.isArray(a)?a[l]:a)||(a=0);var p=n,f=i;null!==(e=h.config.series[l].data[u])&&void 0!==e&&e.barHeightOffset&&(p=n-h.config.series[l].data[u].barHeightOffset/2,f=i+h.config.series[l].data[u].barHeightOffset);var g=p,m=p+f;r+=.001,o+=.001;var v=d.move(r,g),y=d.move(r,g);h.globals.previousPaths.length>0&&(y=this.barCtx.getPreviousPath(l,u,!1));var x=d.line(r,m-a);if(v=v+d.line(o,g)+d.line(o,m-a)+x+("around"===h.config.plotOptions.bar.borderRadiusApplication?" Z":" z"),y=y+d.line(r,g)+x+x+x+x+x+d.line(r,g)+("around"===h.config.plotOptions.bar.borderRadiusApplication?" Z":" z"),this.shouldApplyRadius(l)&&(v=d.roundPathCorners(v,h.config.plotOptions.bar.borderRadius)),h.config.chart.stacked){var _=this.barCtx;h.globals.hasSeriesGroups&&s&&(_=this.barCtx[s]),_.xArrj.push(o),_.xArrjF.push(Math.abs(r-o)),_.xArrjVal.push(this.barCtx.series[c][u])}return{pathTo:v,pathFrom:y}}},{key:"checkZeroSeries",value:function(t){for(var e=t.series,n=this.w,i=0;i<e.length;i++){for(var r=0,o=0;o<e[n.globals.maxValsInArrayIndex].length;o++)r+=e[i][o];0===r&&this.barCtx.zeroSerieses.push(i)}}},{key:"getXForValue",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&!arguments[2]?null:e;return null!=t&&(n=e+t/this.barCtx.invertedYRatio-2*(this.barCtx.isReversed?t/this.barCtx.invertedYRatio:0)),n}},{key:"getYForValue",value:function(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]&&!arguments[3]?null:e;return null!=t&&(i=e-t/this.barCtx.yRatio[n]+2*(this.barCtx.isReversed?t/this.barCtx.yRatio[n]:0)),i}},{key:"getGoalValues",value:function(t,n,i,r,o,s){var l=this,c=this.w,u=[],h=function(e,r){var o;u.push((a(o={},t,"x"===t?l.getXForValue(e,n,!1):l.getYForValue(e,i,s,!1)),a(o,"attrs",r),o))};if(c.globals.seriesGoals[r]&&c.globals.seriesGoals[r][o]&&Array.isArray(c.globals.seriesGoals[r][o])&&c.globals.seriesGoals[r][o].forEach((function(t){h(t.value,t)})),this.barCtx.barOptions.isDumbbell&&c.globals.seriesRange.length){var d=this.barCtx.barOptions.dumbbellColors?this.barCtx.barOptions.dumbbellColors:c.globals.colors,p={strokeHeight:"x"===t?0:c.globals.markers.size[r],strokeWidth:"x"===t?c.globals.markers.size[r]:0,strokeDashArray:0,strokeLineCap:"round",strokeColor:Array.isArray(d[r])?d[r][0]:d[r]};h(c.globals.seriesRangeStart[r][o],p),h(c.globals.seriesRangeEnd[r][o],e(e({},p),{},{strokeColor:Array.isArray(d[r])?d[r][1]:d[r]}))}return u}},{key:"drawGoalLine",value:function(t){var e=t.barXPosition,n=t.barYPosition,i=t.goalX,r=t.goalY,o=t.barWidth,a=t.barHeight,s=new b(this.barCtx.ctx),l=s.group({className:"apexcharts-bar-goals-groups"});l.node.classList.add("apexcharts-element-hidden"),this.barCtx.w.globals.delayedElements.push({el:l.node}),l.attr("clip-path","url(#gridRectMarkerMask".concat(this.barCtx.w.globals.cuid,")"));var c=null;return this.barCtx.isHorizontal?Array.isArray(i)&&i.forEach((function(t){if(t.x>=-1&&t.x<=s.w.globals.gridWidth+1){var e=void 0!==t.attrs.strokeHeight?t.attrs.strokeHeight:a/2,i=n+e+a/2;c=s.drawLine(t.x,i-2*e,t.x,i,t.attrs.strokeColor?t.attrs.strokeColor:void 0,t.attrs.strokeDashArray,t.attrs.strokeWidth?t.attrs.strokeWidth:2,t.attrs.strokeLineCap),l.add(c)}})):Array.isArray(r)&&r.forEach((function(t){if(t.y>=-1&&t.y<=s.w.globals.gridHeight+1){var n=void 0!==t.attrs.strokeWidth?t.attrs.strokeWidth:o/2,i=e+n+o/2;c=s.drawLine(i-2*n,t.y,i,t.y,t.attrs.strokeColor?t.attrs.strokeColor:void 0,t.attrs.strokeDashArray,t.attrs.strokeHeight?t.attrs.strokeHeight:2,t.attrs.strokeLineCap),l.add(c)}})),l}},{key:"drawBarShadow",value:function(t){var e=t.prevPaths,n=t.currPaths,i=t.color,r=this.w,o=e.x,a=e.x1,s=e.barYPosition,l=n.x,c=n.x1,u=n.barYPosition,h=s+n.barHeight,d=new b(this.barCtx.ctx),p=new m,f=d.move(a,h)+d.line(o,h)+d.line(l,u)+d.line(c,u)+d.line(a,h)+("around"===r.config.plotOptions.bar.borderRadiusApplication?" Z":" z");return d.drawPath({d:f,fill:p.shadeColor(.5,m.rgb2hex(i)),stroke:"none",strokeWidth:0,fillOpacity:1,classes:"apexcharts-bar-shadows"})}},{key:"getZeroValueEncounters",value:function(t){var e=t.i,n=t.j,i=this.w,r=0,o=0;return i.globals.seriesPercent.forEach((function(t,i){t[n]&&r++,i<e&&0===t[n]&&o++})),{nonZeroColumns:r,zeroEncounters:o}}}]),t}(),xt=function(){function t(e,n){i(this,t),this.ctx=e,this.w=e.w;var r=this.w;this.barOptions=r.config.plotOptions.bar,this.isHorizontal=this.barOptions.horizontal,this.strokeWidth=r.config.stroke.width,this.isNullValue=!1,this.isRangeBar=r.globals.seriesRange.length&&this.isHorizontal,this.isVerticalGroupedRangeBar=!r.globals.isBarHorizontal&&r.globals.seriesRange.length&&r.config.plotOptions.bar.rangeBarGroupRows,this.isFunnel=this.barOptions.isFunnel,this.xyRatios=n,null!==this.xyRatios&&(this.xRatio=n.xRatio,this.yRatio=n.yRatio,this.invertedXRatio=n.invertedXRatio,this.invertedYRatio=n.invertedYRatio,this.baseLineY=n.baseLineY,this.baseLineInvertedY=n.baseLineInvertedY),this.yaxisIndex=0,this.translationsIndex=0,this.seriesLen=0,this.pathArr=[];var o=new H(this.ctx);this.lastActiveBarSerieIndex=o.getActiveConfigSeriesIndex("desc",["bar","column"]);var a=o.getBarSeriesIndices(),s=new x(this.ctx);this.stackedSeriesTotals=s.getStackedSeriesTotals(this.w.config.series.map((function(t,e){return-1===a.indexOf(e)?e:-1})).filter((function(t){return-1!==t}))),this.barHelpers=new bt(this)}return o(t,[{key:"draw",value:function(t,n){var i=this.w,r=new b(this.ctx),o=new x(this.ctx,i);t=o.getLogSeries(t),this.series=t,this.yRatio=o.getLogYRatios(this.yRatio),this.barHelpers.initVariables(t);var a=r.group({class:"apexcharts-bar-series apexcharts-plot-series"});i.config.dataLabels.enabled&&this.totalItems>this.barOptions.dataLabels.maxItems&&console.warn("WARNING: DataLabels are enabled but there are too many to display. This may cause performance issue when rendering - ApexCharts");for(var s=0,l=0;s<t.length;s++,l++){var c,u,h,d,p=void 0,f=void 0,g=[],v=[],y=i.globals.comboCharts?n[s]:s,_=r.group({class:"apexcharts-series",rel:s+1,seriesName:m.escapeString(i.globals.seriesNames[y]),"data:realIndex":y});this.ctx.series.addCollapsedClassToSeries(_,y),t[s].length>0&&(this.visibleI=this.visibleI+1);var w=0,S=0;this.yRatio.length>1&&(this.yaxisIndex=i.globals.seriesYAxisReverseMap[y],this.translationsIndex=y);var C=this.translationsIndex;this.isReversed=i.config.yaxis[this.yaxisIndex]&&i.config.yaxis[this.yaxisIndex].reversed;var k=this.barHelpers.initialPositions();f=k.y,w=k.barHeight,u=k.yDivision,d=k.zeroW,p=k.x,S=k.barWidth,c=k.xDivision,h=k.zeroH,this.horizontal||v.push(p+S/2);var A=r.group({class:"apexcharts-datalabels","data:realIndex":y});i.globals.delayedElements.push({el:A.node}),A.node.classList.add("apexcharts-element-hidden");var M=r.group({class:"apexcharts-bar-goals-markers"}),T=r.group({class:"apexcharts-bar-shadows"});i.globals.delayedElements.push({el:T.node}),T.node.classList.add("apexcharts-element-hidden");for(var I=0;I<t[s].length;I++){var E=this.barHelpers.getStrokeWidth(s,I,y),O=null,D={indexes:{i:s,j:I,realIndex:y,translationsIndex:C,bc:l},x:p,y:f,strokeWidth:E,elSeries:_};this.isHorizontal?(O=this.drawBarPaths(e(e({},D),{},{barHeight:w,zeroW:d,yDivision:u})),S=this.series[s][I]/this.invertedYRatio):(O=this.drawColumnPaths(e(e({},D),{},{xDivision:c,barWidth:S,zeroH:h})),w=this.series[s][I]/this.yRatio[C]);var L=this.barHelpers.getPathFillColor(t,s,I,y);if(this.isFunnel&&this.barOptions.isFunnel3d&&this.pathArr.length&&I>0){var P=this.barHelpers.drawBarShadow({color:"string"==typeof L&&-1===(null==L?void 0:L.indexOf("url"))?L:m.hexToRgba(i.globals.colors[s]),prevPaths:this.pathArr[this.pathArr.length-1],currPaths:O});P&&T.add(P)}this.pathArr.push(O);var N=this.barHelpers.drawGoalLine({barXPosition:O.barXPosition,barYPosition:O.barYPosition,goalX:O.goalX,goalY:O.goalY,barHeight:w,barWidth:S});N&&M.add(N),f=O.y,p=O.x,I>0&&v.push(p+S/2),g.push(f),this.renderSeries({realIndex:y,pathFill:L,j:I,i:s,pathFrom:O.pathFrom,pathTo:O.pathTo,strokeWidth:E,elSeries:_,x:p,y:f,series:t,barHeight:O.barHeight?O.barHeight:w,barWidth:O.barWidth?O.barWidth:S,elDataLabelsWrap:A,elGoalsMarkers:M,elBarShadows:T,visibleSeries:this.visibleI,type:"bar"})}i.globals.seriesXvalues[y]=v,i.globals.seriesYvalues[y]=g,a.add(_)}return a}},{key:"renderSeries",value:function(t){var e=t.realIndex,n=t.pathFill,i=t.lineFill,r=t.j,o=t.i,a=t.groupIndex,s=t.pathFrom,l=t.pathTo,c=t.strokeWidth,u=t.elSeries,h=t.x,d=t.y,p=t.y1,f=t.y2,g=t.series,m=t.barHeight,v=t.barWidth,x=t.barXPosition,_=t.barYPosition,w=t.elDataLabelsWrap,S=t.elGoalsMarkers,C=t.elBarShadows,k=t.visibleSeries,A=t.type,M=this.w,T=new b(this.ctx);i||(i=this.barOptions.distributed?M.globals.stroke.colors[r]:M.globals.stroke.colors[e]),M.config.series[o].data[r]&&M.config.series[o].data[r].strokeColor&&(i=M.config.series[o].data[r].strokeColor),this.isNullValue&&(n="none");var I=r/M.config.chart.animations.animateGradually.delay*(M.config.chart.animations.speed/M.globals.dataPoints)/2.4,E=T.renderPaths({i:o,j:r,realIndex:e,pathFrom:s,pathTo:l,stroke:i,strokeWidth:c,strokeLineCap:M.config.stroke.lineCap,fill:n,animationDelay:I,initialSpeed:M.config.chart.animations.speed,dataChangeSpeed:M.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(A,"-area")});E.attr("clip-path","url(#gridRectMask".concat(M.globals.cuid,")"));var O=M.config.forecastDataPoints;O.count>0&&r>=M.globals.dataPoints-O.count&&(E.node.setAttribute("stroke-dasharray",O.dashArray),E.node.setAttribute("stroke-width",O.strokeWidth),E.node.setAttribute("fill-opacity",O.fillOpacity)),void 0!==p&&void 0!==f&&(E.attr("data-range-y1",p),E.attr("data-range-y2",f)),new y(this.ctx).setSelectionFilter(E,e,r),u.add(E);var D=new yt(this).handleBarDataLabels({x:h,y:d,y1:p,y2:f,i:o,j:r,series:g,realIndex:e,groupIndex:a,barHeight:m,barWidth:v,barXPosition:x,barYPosition:_,renderedPath:E,visibleSeries:k});return null!==D.dataLabels&&w.add(D.dataLabels),D.totalDataLabels&&w.add(D.totalDataLabels),u.add(w),S&&u.add(S),C&&u.add(C),u}},{key:"drawBarPaths",value:function(t){var e,n=t.indexes,i=t.barHeight,r=t.strokeWidth,o=t.zeroW,a=t.x,s=t.y,l=t.yDivision,c=t.elSeries,u=this.w,h=n.i,d=n.j;if(u.globals.isXNumeric)e=(s=(u.globals.seriesX[h][d]-u.globals.minX)/this.invertedXRatio-i)+i*this.visibleI;else if(u.config.plotOptions.bar.hideZeroBarsWhenGrouped){var p=0,f=0;u.globals.seriesPercent.forEach((function(t,e){t[d]&&p++,e<h&&0===t[d]&&f++})),p>0&&(i=this.seriesLen*i/p),e=s+i*this.visibleI,e-=i*f}else e=s+i*this.visibleI;this.isFunnel&&(o-=(this.barHelpers.getXForValue(this.series[h][d],o)-o)/2),a=this.barHelpers.getXForValue(this.series[h][d],o);var g=this.barHelpers.getBarpaths({barYPosition:e,barHeight:i,x1:o,x2:a,strokeWidth:r,series:this.series,realIndex:n.realIndex,i:h,j:d,w:u});return u.globals.isXNumeric||(s+=l),this.barHelpers.barBackground({j:d,i:h,y1:e-i*this.visibleI,y2:i*this.seriesLen,elSeries:c}),{pathTo:g.pathTo,pathFrom:g.pathFrom,x1:o,x:a,y:s,goalX:this.barHelpers.getGoalValues("x",o,null,h,d),barYPosition:e,barHeight:i}}},{key:"drawColumnPaths",value:function(t){var e,n=t.indexes,i=t.x,r=t.y,o=t.xDivision,a=t.barWidth,s=t.zeroH,l=t.strokeWidth,c=t.elSeries,u=this.w,h=n.realIndex,d=n.translationsIndex,p=n.i,f=n.j,g=n.bc;if(u.globals.isXNumeric){var m=this.getBarXForNumericXAxis({x:i,j:f,realIndex:h,barWidth:a});i=m.x,e=m.barXPosition}else if(u.config.plotOptions.bar.hideZeroBarsWhenGrouped){var v=this.barHelpers.getZeroValueEncounters({i:p,j:f}),y=v.nonZeroColumns,b=v.zeroEncounters;y>0&&(a=this.seriesLen*a/y),e=i+a*this.visibleI,e-=a*b}else e=i+a*this.visibleI;r=this.barHelpers.getYForValue(this.series[p][f],s,d);var x=this.barHelpers.getColumnPaths({barXPosition:e,barWidth:a,y1:s,y2:r,strokeWidth:l,series:this.series,realIndex:h,i:p,j:f,w:u});return u.globals.isXNumeric||(i+=o),this.barHelpers.barBackground({bc:g,j:f,i:p,x1:e-l/2-a*this.visibleI,x2:a*this.seriesLen+l/2,elSeries:c}),{pathTo:x.pathTo,pathFrom:x.pathFrom,x:i,y:r,goalY:this.barHelpers.getGoalValues("y",null,s,p,f,d),barXPosition:e,barWidth:a}}},{key:"getBarXForNumericXAxis",value:function(t){var e=t.x,n=t.barWidth,i=t.realIndex,r=t.j,o=this.w,a=i;return o.globals.seriesX[i].length||(a=o.globals.maxValsInArrayIndex),o.globals.seriesX[a][r]&&(e=(o.globals.seriesX[a][r]-o.globals.minX)/this.xRatio-n*this.seriesLen/2),{barXPosition:e+n*this.visibleI,x:e}}},{key:"getPreviousPath",value:function(t,e){for(var n,i=this.w,r=0;r<i.globals.previousPaths.length;r++){var o=i.globals.previousPaths[r];o.paths&&o.paths.length>0&&parseInt(o.realIndex,10)===parseInt(t,10)&&void 0!==i.globals.previousPaths[r].paths[e]&&(n=i.globals.previousPaths[r].paths[e].d)}return n}}]),t}(),_t=function(t){s(r,t);var n=h(r);function r(){return i(this,r),n.apply(this,arguments)}return o(r,[{key:"draw",value:function(t,n){var i=this,r=this.w;this.graphics=new b(this.ctx),this.bar=new xt(this.ctx,this.xyRatios);var o=new x(this.ctx,r);t=o.getLogSeries(t),this.yRatio=o.getLogYRatios(this.yRatio),this.barHelpers.initVariables(t),"100%"===r.config.chart.stackType&&(t=r.globals.seriesPercent.slice()),this.series=t,this.barHelpers.initializeStackedPrevVars(this);for(var a=this.graphics.group({class:"apexcharts-bar-series apexcharts-plot-series"}),s=0,l=0,c=function(o,c){var u=void 0,h=void 0,d=void 0,p=void 0,f=-1;i.groupCtx=i,r.globals.seriesGroups.forEach((function(t,e){t.indexOf(r.config.series[o].name)>-1&&(f=e)})),-1!==f&&(i.groupCtx=i[r.globals.seriesGroups[f]]);var g=[],v=[],y=r.globals.comboCharts?n[o]:o,b=0;i.yRatio.length>1&&(i.yaxisIndex=r.globals.seriesYAxisReverseMap[y][0],b=y),i.isReversed=r.config.yaxis[i.yaxisIndex]&&r.config.yaxis[i.yaxisIndex].reversed;var x=i.graphics.group({class:"apexcharts-series",seriesName:m.escapeString(r.globals.seriesNames[y]),rel:o+1,"data:realIndex":y});i.ctx.series.addCollapsedClassToSeries(x,y);var _=i.graphics.group({class:"apexcharts-datalabels","data:realIndex":y}),w=i.graphics.group({class:"apexcharts-bar-goals-markers"}),S=0,C=0,k=i.initialPositions(s,l,u,h,d,p,b);l=k.y,S=k.barHeight,h=k.yDivision,p=k.zeroW,s=k.x,C=k.barWidth,u=k.xDivision,d=k.zeroH,r.globals.barHeight=S,r.globals.barWidth=C,i.barHelpers.initializeStackedXYVars(i),1===i.groupCtx.prevY.length&&i.groupCtx.prevY[0].every((function(t){return isNaN(t)}))&&(i.groupCtx.prevY[0]=i.groupCtx.prevY[0].map((function(t){return d})),i.groupCtx.prevYF[0]=i.groupCtx.prevYF[0].map((function(t){return 0})));for(var A=0;A<r.globals.dataPoints;A++){var M=i.barHelpers.getStrokeWidth(o,A,y),T={indexes:{i:o,j:A,realIndex:y,translationsIndex:b,bc:c},strokeWidth:M,x:s,y:l,elSeries:x,groupIndex:f,seriesGroup:r.globals.seriesGroups[f]},I=null;i.isHorizontal?(I=i.drawStackedBarPaths(e(e({},T),{},{zeroW:p,barHeight:S,yDivision:h})),C=i.series[o][A]/i.invertedYRatio):(I=i.drawStackedColumnPaths(e(e({},T),{},{xDivision:u,barWidth:C,zeroH:d})),S=i.series[o][A]/i.yRatio[b]);var E=i.barHelpers.drawGoalLine({barXPosition:I.barXPosition,barYPosition:I.barYPosition,goalX:I.goalX,goalY:I.goalY,barHeight:S,barWidth:C});E&&w.add(E),l=I.y,s=I.x,g.push(s),v.push(l);var O=i.barHelpers.getPathFillColor(t,o,A,y);x=i.renderSeries({realIndex:y,pathFill:O,j:A,i:o,groupIndex:f,pathFrom:I.pathFrom,pathTo:I.pathTo,strokeWidth:M,elSeries:x,x:s,y:l,series:t,barHeight:S,barWidth:C,elDataLabelsWrap:_,elGoalsMarkers:w,type:"bar",visibleSeries:0})}r.globals.seriesXvalues[y]=g,r.globals.seriesYvalues[y]=v,i.groupCtx.prevY.push(i.groupCtx.yArrj),i.groupCtx.prevYF.push(i.groupCtx.yArrjF),i.groupCtx.prevYVal.push(i.groupCtx.yArrjVal),i.groupCtx.prevX.push(i.groupCtx.xArrj),i.groupCtx.prevXF.push(i.groupCtx.xArrjF),i.groupCtx.prevXVal.push(i.groupCtx.xArrjVal),a.add(x)},u=0,h=0;u<t.length;u++,h++)c(u,h);return a}},{key:"initialPositions",value:function(t,e,n,i,r,o,a){var s,l,c,u,h=this.w;return this.isHorizontal?(c=(c=i=h.globals.gridHeight/h.globals.dataPoints)*parseInt(h.config.plotOptions.bar.barHeight,10)/100,-1===String(h.config.plotOptions.bar.barHeight).indexOf("%")&&(c=parseInt(h.config.plotOptions.bar.barHeight,10)),o=this.baseLineInvertedY+h.globals.padHorizontal+(this.isReversed?h.globals.gridWidth:0)-(this.isReversed?2*this.baseLineInvertedY:0),e=(i-c)/2):(u=n=h.globals.gridWidth/h.globals.dataPoints,u=h.globals.isXNumeric&&h.globals.dataPoints>1?(n=h.globals.minXDiff/this.xRatio)*parseInt(this.barOptions.columnWidth,10)/100:u*parseInt(h.config.plotOptions.bar.columnWidth,10)/100,-1===String(h.config.plotOptions.bar.columnWidth).indexOf("%")&&(u=parseInt(h.config.plotOptions.bar.columnWidth,10)),r=h.globals.gridHeight-this.baseLineY[a]-(this.isReversed?h.globals.gridHeight:0)+(this.isReversed?2*this.baseLineY[a]:0),t=h.globals.padHorizontal+(n-u)/2),{x:t,y:e,yDivision:i,xDivision:n,barHeight:null!==(s=h.globals.seriesGroups)&&void 0!==s&&s.length?c/h.globals.seriesGroups.length:c,barWidth:null!==(l=h.globals.seriesGroups)&&void 0!==l&&l.length?u/h.globals.seriesGroups.length:u,zeroH:r,zeroW:o}}},{key:"drawStackedBarPaths",value:function(t){for(var e,n=t.indexes,i=t.barHeight,r=t.strokeWidth,o=t.zeroW,a=t.x,s=t.y,l=t.groupIndex,c=t.seriesGroup,u=t.yDivision,h=t.elSeries,d=this.w,p=s+(-1!==l?l*i:0),f=n.i,g=n.j,m=n.translationsIndex,v=0,y=0;y<this.groupCtx.prevXF.length;y++)v+=this.groupCtx.prevXF[y][g];var b=f;if(c&&(b=c.indexOf(d.config.series[f].name)),b>0){var x=o;this.groupCtx.prevXVal[b-1][g]<0?x=this.series[f][g]>=0?this.groupCtx.prevX[b-1][g]+v-2*(this.isReversed?v:0):this.groupCtx.prevX[b-1][g]:this.groupCtx.prevXVal[b-1][g]>=0&&(x=this.series[f][g]>=0?this.groupCtx.prevX[b-1][g]:this.groupCtx.prevX[b-1][g]-v+2*(this.isReversed?v:0)),e=x}else e=o;a=null===this.series[f][g]?e:e+this.series[f][g]/this.invertedYRatio-2*(this.isReversed?this.series[f][g]/this.invertedYRatio:0);var _=this.barHelpers.getBarpaths({barYPosition:p,barHeight:i,x1:e,x2:a,strokeWidth:r,series:this.series,realIndex:n.realIndex,seriesGroup:c,i:f,j:g,w:d});return this.barHelpers.barBackground({j:g,i:f,y1:p,y2:i,elSeries:h}),s+=u,{pathTo:_.pathTo,pathFrom:_.pathFrom,goalX:this.barHelpers.getGoalValues("x",o,null,f,g,m),barYPosition:p,x:a,y:s}}},{key:"drawStackedColumnPaths",value:function(t){var e=t.indexes,n=t.x,i=t.y,r=t.xDivision,o=t.barWidth,a=t.zeroH,s=t.groupIndex,l=t.seriesGroup,c=t.elSeries,u=this.w,h=e.i,d=e.j,p=e.bc,f=e.translationsIndex;if(u.globals.isXNumeric){var g=u.globals.seriesX[h][d];g||(g=0),n=(g-u.globals.minX)/this.xRatio-o/2,u.globals.seriesGroups.length&&(n=(g-u.globals.minX)/this.xRatio-o/2*u.globals.seriesGroups.length)}for(var m,v=n+(-1!==s?s*o:0),y=0,b=0;b<this.groupCtx.prevYF.length;b++)y+=isNaN(this.groupCtx.prevYF[b][d])?0:this.groupCtx.prevYF[b][d];var x=h;if(l&&(x=l.indexOf(u.config.series[h].name)),x>0&&!u.globals.isXNumeric||x>0&&u.globals.isXNumeric&&u.globals.seriesX[h-1][d]===u.globals.seriesX[h][d]){var _,w,S,C=Math.min(this.yRatio.length+1,h+1);if(void 0!==this.groupCtx.prevY[x-1]&&this.groupCtx.prevY[x-1].length)for(var k=1;k<C;k++){var A;if(!isNaN(null===(A=this.groupCtx.prevY[x-k])||void 0===A?void 0:A[d])){S=this.groupCtx.prevY[x-k][d];break}}for(var M=1;M<C;M++){var T,I;if((null===(T=this.groupCtx.prevYVal[x-M])||void 0===T?void 0:T[d])<0){w=this.series[h][d]>=0?S-y+2*(this.isReversed?y:0):S;break}if((null===(I=this.groupCtx.prevYVal[x-M])||void 0===I?void 0:I[d])>=0){w=this.series[h][d]>=0?S:S+y-2*(this.isReversed?y:0);break}}void 0===w&&(w=u.globals.gridHeight),m=null!==(_=this.groupCtx.prevYF[0])&&void 0!==_&&_.every((function(t){return 0===t}))&&this.groupCtx.prevYF.slice(1,x).every((function(t){return t.every((function(t){return isNaN(t)}))}))?a:w}else m=a;i=this.series[h][d]?m-this.series[h][d]/this.yRatio[f]+2*(this.isReversed?this.series[h][d]/this.yRatio[f]:0):m;var E=this.barHelpers.getColumnPaths({barXPosition:v,barWidth:o,y1:m,y2:i,yRatio:this.yRatio[f],strokeWidth:this.strokeWidth,series:this.series,seriesGroup:l,realIndex:e.realIndex,i:h,j:d,w:u});return this.barHelpers.barBackground({bc:p,j:d,i:h,x1:v,x2:o,elSeries:c}),n+=r,{pathTo:E.pathTo,pathFrom:E.pathFrom,goalY:this.barHelpers.getGoalValues("y",null,a,h,d),barXPosition:v,x:u.globals.isXNumeric?n-r:n,y:i}}}]),r}(xt),wt=function(t){s(r,t);var n=h(r);function r(){return i(this,r),n.apply(this,arguments)}return o(r,[{key:"draw",value:function(t,n,i){var r=this,o=this.w,a=new b(this.ctx),s=o.globals.comboCharts?n:o.config.chart.type,l=new B(this.ctx);this.candlestickOptions=this.w.config.plotOptions.candlestick,this.boxOptions=this.w.config.plotOptions.boxPlot,this.isHorizontal=o.config.plotOptions.bar.horizontal;var c=new x(this.ctx,o);t=c.getLogSeries(t),this.series=t,this.yRatio=c.getLogYRatios(this.yRatio),this.barHelpers.initVariables(t);for(var u=a.group({class:"apexcharts-".concat(s,"-series apexcharts-plot-series")}),h=function(n){r.isBoxPlot="boxPlot"===o.config.chart.type||"boxPlot"===o.config.series[n].type;var s,c,h,d,p=void 0,f=void 0,g=[],v=[],y=o.globals.comboCharts?i[n]:n,b=a.group({class:"apexcharts-series",seriesName:m.escapeString(o.globals.seriesNames[y]),rel:n+1,"data:realIndex":y});r.ctx.series.addCollapsedClassToSeries(b,y),t[n].length>0&&(r.visibleI=r.visibleI+1);var x,_,w=0;r.yRatio.length>1&&(r.yaxisIndex=o.globals.seriesYAxisReverseMap[y][0],w=y);var S=r.barHelpers.initialPositions();f=S.y,x=S.barHeight,c=S.yDivision,d=S.zeroW,p=S.x,_=S.barWidth,s=S.xDivision,h=S.zeroH,v.push(p+_/2);for(var C=a.group({class:"apexcharts-datalabels","data:realIndex":y}),k=function(i){var a=r.barHelpers.getStrokeWidth(n,i,y),u=null,m={indexes:{i:n,j:i,realIndex:y,translationsIndex:w},x:p,y:f,strokeWidth:a,elSeries:b};u=r.isHorizontal?r.drawHorizontalBoxPaths(e(e({},m),{},{yDivision:c,barHeight:x,zeroW:d})):r.drawVerticalBoxPaths(e(e({},m),{},{xDivision:s,barWidth:_,zeroH:h})),f=u.y,p=u.x,i>0&&v.push(p+_/2),g.push(f),u.pathTo.forEach((function(e,s){var c=!r.isBoxPlot&&r.candlestickOptions.wick.useFillColor?u.color[s]:o.globals.stroke.colors[n],h=l.fillPath({seriesNumber:y,dataPointIndex:i,color:u.color[s],value:t[n][i]});r.renderSeries({realIndex:y,pathFill:h,lineFill:c,j:i,i:n,pathFrom:u.pathFrom,pathTo:e,strokeWidth:a,elSeries:b,x:p,y:f,series:t,barHeight:x,barWidth:_,elDataLabelsWrap:C,visibleSeries:r.visibleI,type:o.config.chart.type})}))},A=0;A<o.globals.dataPoints;A++)k(A);o.globals.seriesXvalues[y]=v,o.globals.seriesYvalues[y]=g,u.add(b)},d=0;d<t.length;d++)h(d);return u}},{key:"drawVerticalBoxPaths",value:function(t){var e=t.indexes,n=t.x;t.y;var i=t.xDivision,r=t.barWidth,o=t.zeroH,a=t.strokeWidth,s=this.w,l=new b(this.ctx),c=e.i,u=e.j,h=!0,d=s.config.plotOptions.candlestick.colors.upward,p=s.config.plotOptions.candlestick.colors.downward,f="";this.isBoxPlot&&(f=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);var g=this.yRatio[e.translationsIndex],m=e.realIndex,v=this.getOHLCValue(m,u),y=o,x=o;v.o>v.c&&(h=!1);var _=Math.min(v.o,v.c),w=Math.max(v.o,v.c),S=v.m;s.globals.isXNumeric&&(n=(s.globals.seriesX[m][u]-s.globals.minX)/this.xRatio-r/2);var C=n+r*this.visibleI;void 0===this.series[c][u]||null===this.series[c][u]?(_=o,w=o):(_=o-_/g,w=o-w/g,y=o-v.h/g,x=o-v.l/g,S=o-v.m/g);var k=l.move(C,o),A=l.move(C+r/2,_);return s.globals.previousPaths.length>0&&(A=this.getPreviousPath(m,u,!0)),k=this.isBoxPlot?[l.move(C,_)+l.line(C+r/2,_)+l.line(C+r/2,y)+l.line(C+r/4,y)+l.line(C+r-r/4,y)+l.line(C+r/2,y)+l.line(C+r/2,_)+l.line(C+r,_)+l.line(C+r,S)+l.line(C,S)+l.line(C,_+a/2),l.move(C,S)+l.line(C+r,S)+l.line(C+r,w)+l.line(C+r/2,w)+l.line(C+r/2,x)+l.line(C+r-r/4,x)+l.line(C+r/4,x)+l.line(C+r/2,x)+l.line(C+r/2,w)+l.line(C,w)+l.line(C,S)+"z"]:[l.move(C,w)+l.line(C+r/2,w)+l.line(C+r/2,y)+l.line(C+r/2,w)+l.line(C+r,w)+l.line(C+r,_)+l.line(C+r/2,_)+l.line(C+r/2,x)+l.line(C+r/2,_)+l.line(C,_)+l.line(C,w-a/2)],A+=l.move(C,_),s.globals.isXNumeric||(n+=i),{pathTo:k,pathFrom:A,x:n,y:w,barXPosition:C,color:this.isBoxPlot?f:h?[d]:[p]}}},{key:"drawHorizontalBoxPaths",value:function(t){var e=t.indexes;t.x;var n=t.y,i=t.yDivision,r=t.barHeight,o=t.zeroW,a=t.strokeWidth,s=this.w,l=new b(this.ctx),c=e.i,u=e.j,h=this.boxOptions.colors.lower;this.isBoxPlot&&(h=[this.boxOptions.colors.lower,this.boxOptions.colors.upper]);var d=this.invertedYRatio,p=e.realIndex,f=this.getOHLCValue(p,u),g=o,m=o,v=Math.min(f.o,f.c),y=Math.max(f.o,f.c),x=f.m;s.globals.isXNumeric&&(n=(s.globals.seriesX[p][u]-s.globals.minX)/this.invertedXRatio-r/2);var _=n+r*this.visibleI;void 0===this.series[c][u]||null===this.series[c][u]?(v=o,y=o):(v=o+v/d,y=o+y/d,g=o+f.h/d,m=o+f.l/d,x=o+f.m/d);var w=l.move(o,_),S=l.move(v,_+r/2);return s.globals.previousPaths.length>0&&(S=this.getPreviousPath(p,u,!0)),w=[l.move(v,_)+l.line(v,_+r/2)+l.line(g,_+r/2)+l.line(g,_+r/2-r/4)+l.line(g,_+r/2+r/4)+l.line(g,_+r/2)+l.line(v,_+r/2)+l.line(v,_+r)+l.line(x,_+r)+l.line(x,_)+l.line(v+a/2,_),l.move(x,_)+l.line(x,_+r)+l.line(y,_+r)+l.line(y,_+r/2)+l.line(m,_+r/2)+l.line(m,_+r-r/4)+l.line(m,_+r/4)+l.line(m,_+r/2)+l.line(y,_+r/2)+l.line(y,_)+l.line(x,_)+"z"],S+=l.move(v,_),s.globals.isXNumeric||(n+=i),{pathTo:w,pathFrom:S,x:y,y:n,barYPosition:_,color:h}}},{key:"getOHLCValue",value:function(t,e){var n=this.w;return{o:this.isBoxPlot?n.globals.seriesCandleH[t][e]:n.globals.seriesCandleO[t][e],h:this.isBoxPlot?n.globals.seriesCandleO[t][e]:n.globals.seriesCandleH[t][e],m:n.globals.seriesCandleM[t][e],l:this.isBoxPlot?n.globals.seriesCandleC[t][e]:n.globals.seriesCandleL[t][e],c:this.isBoxPlot?n.globals.seriesCandleL[t][e]:n.globals.seriesCandleC[t][e]}}}]),r}(xt),St=function(){function t(e){i(this,t),this.ctx=e,this.w=e.w}return o(t,[{key:"checkColorRange",value:function(){var t=this.w,e=!1,n=t.config.plotOptions[t.config.chart.type];return n.colorScale.ranges.length>0&&n.colorScale.ranges.map((function(t,n){t.from<=0&&(e=!0)})),e}},{key:"getShadeColor",value:function(t,e,n,i){var r=this.w,o=1,a=r.config.plotOptions[t].shadeIntensity,s=this.determineColor(t,e,n);r.globals.hasNegs||i?o=r.config.plotOptions[t].reverseNegativeShade?s.percent<0?s.percent/100*(1.25*a):(1-s.percent/100)*(1.25*a):s.percent<=0?1-(1+s.percent/100)*a:(1-s.percent/100)*a:(o=1-s.percent/100,"treemap"===t&&(o=(1-s.percent/100)*(1.25*a)));var l=s.color,c=new m;return r.config.plotOptions[t].enableShades&&(l="dark"===this.w.config.theme.mode?m.hexToRgba(c.shadeColor(-1*o,s.color),r.config.fill.opacity):m.hexToRgba(c.shadeColor(o,s.color),r.config.fill.opacity)),{color:l,colorProps:s}}},{key:"determineColor",value:function(t,e,n){var i=this.w,r=i.globals.series[e][n],o=i.config.plotOptions[t],a=o.colorScale.inverse?n:e;o.distributed&&"treemap"===i.config.chart.type&&(a=n);var s=i.globals.colors[a],l=null,c=Math.min.apply(Math,p(i.globals.series[e])),u=Math.max.apply(Math,p(i.globals.series[e]));o.distributed||"heatmap"!==t||(c=i.globals.minY,u=i.globals.maxY),void 0!==o.colorScale.min&&(c=o.colorScale.min<i.globals.minY?o.colorScale.min:i.globals.minY,u=o.colorScale.max>i.globals.maxY?o.colorScale.max:i.globals.maxY);var h=Math.abs(u)+Math.abs(c),d=100*r/(0===h?h-1e-6:h);return o.colorScale.ranges.length>0&&o.colorScale.ranges.map((function(t,e){if(r>=t.from&&r<=t.to){s=t.color,l=t.foreColor?t.foreColor:null,c=t.from,u=t.to;var n=Math.abs(u)+Math.abs(c);d=100*r/(0===n?n-1e-6:n)}})),{color:s,foreColor:l,percent:d}}},{key:"calculateDataLabels",value:function(t){var e=t.text,n=t.x,i=t.y,r=t.i,o=t.j,a=t.colorProps,s=t.fontSize,l=this.w.config.dataLabels,c=new b(this.ctx),u=new V(this.ctx),h=null;if(l.enabled){h=c.group({class:"apexcharts-data-labels"});var d=l.offsetX,p=l.offsetY,f=n+d,g=i+parseFloat(l.style.fontSize)/3+p;u.plotDataLabelsText({x:f,y:g,text:e,i:r,j:o,color:a.foreColor,parent:h,fontSize:s,dataLabelsConfig:l})}return h}},{key:"addListeners",value:function(t){var e=new b(this.ctx);t.node.addEventListener("mouseenter",e.pathMouseEnter.bind(this,t)),t.node.addEventListener("mouseleave",e.pathMouseLeave.bind(this,t)),t.node.addEventListener("mousedown",e.pathMouseDown.bind(this,t))}}]),t}(),Ct=function(){function t(e,n){i(this,t),this.ctx=e,this.w=e.w,this.xRatio=n.xRatio,this.yRatio=n.yRatio,this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.helpers=new St(e),this.rectRadius=this.w.config.plotOptions.heatmap.radius,this.strokeWidth=this.w.config.stroke.show?this.w.config.stroke.width:0}return o(t,[{key:"draw",value:function(t){var e=this.w,n=new b(this.ctx),i=n.group({class:"apexcharts-heatmap"});i.attr("clip-path","url(#gridRectMask".concat(e.globals.cuid,")"));var r=e.globals.gridWidth/e.globals.dataPoints,o=e.globals.gridHeight/e.globals.series.length,a=0,s=!1;this.negRange=this.helpers.checkColorRange();var l=t.slice();e.config.yaxis[0].reversed&&(s=!0,l.reverse());for(var c=s?0:l.length-1;s?c<l.length:c>=0;s?c++:c--){var u=n.group({class:"apexcharts-series apexcharts-heatmap-series",seriesName:m.escapeString(e.globals.seriesNames[c]),rel:c+1,"data:realIndex":c});if(this.ctx.series.addCollapsedClassToSeries(u,c),e.config.chart.dropShadow.enabled){var h=e.config.chart.dropShadow;new y(this.ctx).dropShadow(u,h,c)}for(var d=0,p=e.config.plotOptions.heatmap.shadeIntensity,f=0;f<l[c].length;f++){var g=this.helpers.getShadeColor(e.config.chart.type,c,f,this.negRange),v=g.color,x=g.colorProps;"image"===e.config.fill.type&&(v=new B(this.ctx).fillPath({seriesNumber:c,dataPointIndex:f,opacity:e.globals.hasNegs?x.percent<0?1-(1+x.percent/100):p+x.percent/100:x.percent/100,patternID:m.randomId(),width:e.config.fill.image.width?e.config.fill.image.width:r,height:e.config.fill.image.height?e.config.fill.image.height:o}));var _=this.rectRadius,w=n.drawRect(d,a,r,o,_);if(w.attr({cx:d,cy:a}),w.node.classList.add("apexcharts-heatmap-rect"),u.add(w),w.attr({fill:v,i:c,index:c,j:f,val:t[c][f],"stroke-width":this.strokeWidth,stroke:e.config.plotOptions.heatmap.useFillColorAsStroke?v:e.globals.stroke.colors[0],color:v}),this.helpers.addListeners(w),e.config.chart.animations.enabled&&!e.globals.dataChanged){var S=1;e.globals.resized||(S=e.config.chart.animations.speed),this.animateHeatMap(w,d,a,r,o,S)}if(e.globals.dataChanged){var C=1;if(this.dynamicAnim.enabled&&e.globals.shouldAnimate){C=this.dynamicAnim.speed;var k=e.globals.previousPaths[c]&&e.globals.previousPaths[c][f]&&e.globals.previousPaths[c][f].color;k||(k="rgba(255, 255, 255, 0)"),this.animateHeatColor(w,m.isColorHex(k)?k:m.rgb2hex(k),m.isColorHex(v)?v:m.rgb2hex(v),C)}}var A=(0,e.config.dataLabels.formatter)(e.globals.series[c][f],{value:e.globals.series[c][f],seriesIndex:c,dataPointIndex:f,w:e}),M=this.helpers.calculateDataLabels({text:A,x:d+r/2,y:a+o/2,i:c,j:f,colorProps:x,series:l});null!==M&&u.add(M),d+=r}a+=o,i.add(u)}var T=e.globals.yAxisScale[0].result.slice();return e.config.yaxis[0].reversed?T.unshift(""):T.push(""),e.globals.yAxisScale[0].result=T,i}},{key:"animateHeatMap",value:function(t,e,n,i,r,o){var a=new v(this.ctx);a.animateRect(t,{x:e+i/2,y:n+r/2,width:0,height:0},{x:e,y:n,width:i,height:r},o,(function(){a.animationCompleted(t)}))}},{key:"animateHeatColor",value:function(t,e,n,i){t.attr({fill:e}).animate(i).attr({fill:n})}}]),t}(),kt=function(){function t(e){i(this,t),this.ctx=e,this.w=e.w}return o(t,[{key:"drawYAxisTexts",value:function(t,e,n,i){var r=this.w,o=r.config.yaxis[0],a=r.globals.yLabelFormatters[0];return new b(this.ctx).drawText({x:t+o.labels.offsetX,y:e+o.labels.offsetY,text:a(i,n),textAnchor:"middle",fontSize:o.labels.style.fontSize,fontFamily:o.labels.style.fontFamily,foreColor:Array.isArray(o.labels.style.colors)?o.labels.style.colors[n]:o.labels.style.colors})}}]),t}(),At=function(){function t(e){i(this,t),this.ctx=e,this.w=e.w;var n=this.w;this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animBeginArr=[0],this.animDur=0,this.donutDataLabels=this.w.config.plotOptions.pie.donut.labels,this.lineColorArr=void 0!==n.globals.stroke.colors?n.globals.stroke.colors:n.globals.colors,this.defaultSize=Math.min(n.globals.gridWidth,n.globals.gridHeight),this.centerY=this.defaultSize/2,this.centerX=n.globals.gridWidth/2,"radialBar"===n.config.chart.type?this.fullAngle=360:this.fullAngle=Math.abs(n.config.plotOptions.pie.endAngle-n.config.plotOptions.pie.startAngle),this.initialAngle=n.config.plotOptions.pie.startAngle%this.fullAngle,n.globals.radialSize=this.defaultSize/2.05-n.config.stroke.width-(n.config.chart.sparkline.enabled?0:n.config.chart.dropShadow.blur),this.donutSize=n.globals.radialSize*parseInt(n.config.plotOptions.pie.donut.size,10)/100,this.maxY=0,this.sliceLabels=[],this.sliceSizes=[],this.prevSectorAngleArr=[]}return o(t,[{key:"draw",value:function(t){var e=this,n=this.w,i=new b(this.ctx);if(this.ret=i.group({class:"apexcharts-pie"}),n.globals.noData)return this.ret;for(var r=0,o=0;o<t.length;o++)r+=m.negToZero(t[o]);var a=[],s=i.group();0===r&&(r=1e-5),t.forEach((function(t){e.maxY=Math.max(e.maxY,t)})),n.config.yaxis[0].max&&(this.maxY=n.config.yaxis[0].max),"back"===n.config.grid.position&&"polarArea"===this.chartType&&this.drawPolarElements(this.ret);for(var l=0;l<t.length;l++){var c=this.fullAngle*m.negToZero(t[l])/r;a.push(c),"polarArea"===this.chartType?(a[l]=this.fullAngle/t.length,this.sliceSizes.push(n.globals.radialSize*t[l]/this.maxY)):this.sliceSizes.push(n.globals.radialSize)}if(n.globals.dataChanged){for(var u,h=0,d=0;d<n.globals.previousPaths.length;d++)h+=m.negToZero(n.globals.previousPaths[d]);for(var p=0;p<n.globals.previousPaths.length;p++)u=this.fullAngle*m.negToZero(n.globals.previousPaths[p])/h,this.prevSectorAngleArr.push(u)}this.donutSize<0&&(this.donutSize=0);var f=n.config.plotOptions.pie.customScale,g=n.globals.gridWidth/2,v=n.globals.gridHeight/2,y=g-n.globals.gridWidth/2*f,x=v-n.globals.gridHeight/2*f;if("donut"===this.chartType){var _=i.drawCircle(this.donutSize);_.attr({cx:this.centerX,cy:this.centerY,fill:n.config.plotOptions.pie.donut.background?n.config.plotOptions.pie.donut.background:"transparent"}),s.add(_)}var w=this.drawArcs(a,t);if(this.sliceLabels.forEach((function(t){w.add(t)})),s.attr({transform:"translate(".concat(y,", ").concat(x,") scale(").concat(f,")")}),s.add(w),this.ret.add(s),this.donutDataLabels.show){var S=this.renderInnerDataLabels(this.donutDataLabels,{hollowSize:this.donutSize,centerX:this.centerX,centerY:this.centerY,opacity:this.donutDataLabels.show,translateX:y,translateY:x});this.ret.add(S)}return"front"===n.config.grid.position&&"polarArea"===this.chartType&&this.drawPolarElements(this.ret),this.ret}},{key:"drawArcs",value:function(t,e){var n=this.w,i=new y(this.ctx),r=new b(this.ctx),o=new B(this.ctx),a=r.group({class:"apexcharts-slices"}),s=this.initialAngle,l=this.initialAngle,c=this.initialAngle,u=this.initialAngle;this.strokeWidth=n.config.stroke.show?n.config.stroke.width:0;for(var h=0;h<t.length;h++){var d=r.group({class:"apexcharts-series apexcharts-pie-series",seriesName:m.escapeString(n.globals.seriesNames[h]),rel:h+1,"data:realIndex":h});a.add(d),l=u,c=(s=c)+t[h],u=l+this.prevSectorAngleArr[h];var p=c<s?this.fullAngle+c-s:c-s,f=o.fillPath({seriesNumber:h,size:this.sliceSizes[h],value:e[h]}),g=this.getChangedPath(l,u),v=r.drawPath({d:g,stroke:Array.isArray(this.lineColorArr)?this.lineColorArr[h]:this.lineColorArr,strokeWidth:0,fill:f,fillOpacity:n.config.fill.opacity,classes:"apexcharts-pie-area apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(h)});if(v.attr({index:0,j:h}),i.setSelectionFilter(v,0,h),n.config.chart.dropShadow.enabled){var x=n.config.chart.dropShadow;i.dropShadow(v,x,h)}this.addListeners(v,this.donutDataLabels),b.setAttrs(v.node,{"data:angle":p,"data:startAngle":s,"data:strokeWidth":this.strokeWidth,"data:value":e[h]});var _={x:0,y:0};"pie"===this.chartType||"polarArea"===this.chartType?_=m.polarToCartesian(this.centerX,this.centerY,n.globals.radialSize/1.25+n.config.plotOptions.pie.dataLabels.offset,(s+p/2)%this.fullAngle):"donut"===this.chartType&&(_=m.polarToCartesian(this.centerX,this.centerY,(n.globals.radialSize+this.donutSize)/2+n.config.plotOptions.pie.dataLabels.offset,(s+p/2)%this.fullAngle)),d.add(v);var w=0;if(!this.initialAnim||n.globals.resized||n.globals.dataChanged?this.animBeginArr.push(0):(0==(w=p/this.fullAngle*n.config.chart.animations.speed)&&(w=1),this.animDur=w+this.animDur,this.animBeginArr.push(this.animDur)),this.dynamicAnim&&n.globals.dataChanged?this.animatePaths(v,{size:this.sliceSizes[h],endAngle:c,startAngle:s,prevStartAngle:l,prevEndAngle:u,animateStartingPos:!0,i:h,animBeginArr:this.animBeginArr,shouldSetPrevPaths:!0,dur:n.config.chart.animations.dynamicAnimation.speed}):this.animatePaths(v,{size:this.sliceSizes[h],endAngle:c,startAngle:s,i:h,totalItems:t.length-1,animBeginArr:this.animBeginArr,dur:w}),n.config.plotOptions.pie.expandOnClick&&"polarArea"!==this.chartType&&v.click(this.pieClicked.bind(this,h)),void 0!==n.globals.selectedDataPoints[0]&&n.globals.selectedDataPoints[0].indexOf(h)>-1&&this.pieClicked(h),n.config.dataLabels.enabled){var S=_.x,C=_.y,k=100*p/this.fullAngle+"%";if(0!==p&&n.config.plotOptions.pie.dataLabels.minAngleToShowLabel<t[h]){var A=n.config.dataLabels.formatter;void 0!==A&&(k=A(n.globals.seriesPercent[h][0],{seriesIndex:h,w:n}));var M=n.globals.dataLabels.style.colors[h],T=r.group({class:"apexcharts-datalabels"}),I=r.drawText({x:S,y:C,text:k,textAnchor:"middle",fontSize:n.config.dataLabels.style.fontSize,fontFamily:n.config.dataLabels.style.fontFamily,fontWeight:n.config.dataLabels.style.fontWeight,foreColor:M});if(T.add(I),n.config.dataLabels.dropShadow.enabled){var E=n.config.dataLabels.dropShadow;i.dropShadow(I,E)}I.node.classList.add("apexcharts-pie-label"),n.config.chart.animations.animate&&!1===n.globals.resized&&(I.node.classList.add("apexcharts-pie-label-delay"),I.node.style.animationDelay=n.config.chart.animations.speed/940+"s"),this.sliceLabels.push(T)}}}return a}},{key:"addListeners",value:function(t,e){var n=new b(this.ctx);t.node.addEventListener("mouseenter",n.pathMouseEnter.bind(this,t)),t.node.addEventListener("mouseleave",n.pathMouseLeave.bind(this,t)),t.node.addEventListener("mouseleave",this.revertDataLabelsInner.bind(this,t.node,e)),t.node.addEventListener("mousedown",n.pathMouseDown.bind(this,t)),this.donutDataLabels.total.showAlways||(t.node.addEventListener("mouseenter",this.printDataLabelsInner.bind(this,t.node,e)),t.node.addEventListener("mousedown",this.printDataLabelsInner.bind(this,t.node,e)))}},{key:"animatePaths",value:function(t,e){var n=this.w,i=e.endAngle<e.startAngle?this.fullAngle+e.endAngle-e.startAngle:e.endAngle-e.startAngle,r=i,o=e.startAngle,a=e.startAngle;void 0!==e.prevStartAngle&&void 0!==e.prevEndAngle&&(o=e.prevEndAngle,r=e.prevEndAngle<e.prevStartAngle?this.fullAngle+e.prevEndAngle-e.prevStartAngle:e.prevEndAngle-e.prevStartAngle),e.i===n.config.series.length-1&&(i+a>this.fullAngle?e.endAngle=e.endAngle-(i+a):i+a<this.fullAngle&&(e.endAngle=e.endAngle+(this.fullAngle-(i+a)))),i===this.fullAngle&&(i=this.fullAngle-.01),this.animateArc(t,o,a,i,r,e)}},{key:"animateArc",value:function(t,e,n,i,r,o){var a,s=this,l=this.w,c=new v(this.ctx),u=o.size;(isNaN(e)||isNaN(r))&&(e=n,r=i,o.dur=0);var h=i,d=n,p=e<n?this.fullAngle+e-n:e-n;l.globals.dataChanged&&o.shouldSetPrevPaths&&o.prevEndAngle&&(a=s.getPiePath({me:s,startAngle:o.prevStartAngle,angle:o.prevEndAngle<o.prevStartAngle?this.fullAngle+o.prevEndAngle-o.prevStartAngle:o.prevEndAngle-o.prevStartAngle,size:u}),t.attr({d:a})),0!==o.dur?t.animate(o.dur,l.globals.easing,o.animBeginArr[o.i]).afterAll((function(){"pie"!==s.chartType&&"donut"!==s.chartType&&"polarArea"!==s.chartType||this.animate(l.config.chart.animations.dynamicAnimation.speed).attr({"stroke-width":s.strokeWidth}),o.i===l.config.series.length-1&&c.animationCompleted(t)})).during((function(l){h=p+(i-p)*l,o.animateStartingPos&&(h=r+(i-r)*l,d=e-r+(n-(e-r))*l),a=s.getPiePath({me:s,startAngle:d,angle:h,size:u}),t.node.setAttribute("data:pathOrig",a),t.attr({d:a})})):(a=s.getPiePath({me:s,startAngle:d,angle:i,size:u}),o.isTrack||(l.globals.animationEnded=!0),t.node.setAttribute("data:pathOrig",a),t.attr({d:a,"stroke-width":s.strokeWidth}))}},{key:"pieClicked",value:function(t){var e,n=this.w,i=this,r=i.sliceSizes[t]+(n.config.plotOptions.pie.expandOnClick?4:0),o=n.globals.dom.Paper.select(".apexcharts-".concat(i.chartType.toLowerCase(),"-slice-").concat(t)).members[0];if("true"!==o.attr("data:pieClicked")){var a=n.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area");Array.prototype.forEach.call(a,(function(t){t.setAttribute("data:pieClicked","false");var e=t.getAttribute("data:pathOrig");e&&t.setAttribute("d",e)})),o.attr("data:pieClicked","true");var s=parseInt(o.attr("data:startAngle"),10),l=parseInt(o.attr("data:angle"),10);e=i.getPiePath({me:i,startAngle:s,angle:l,size:r}),360!==l&&o.plot(e)}else{o.attr({"data:pieClicked":"false"}),this.revertDataLabelsInner(o.node,this.donutDataLabels);var c=o.attr("data:pathOrig");o.attr({d:c})}}},{key:"getChangedPath",value:function(t,e){var n="";return this.dynamicAnim&&this.w.globals.dataChanged&&(n=this.getPiePath({me:this,startAngle:t,angle:e-t,size:this.size})),n}},{key:"getPiePath",value:function(t){var e,n=t.me,i=t.startAngle,r=t.angle,o=t.size,a=new b(this.ctx),s=i,l=Math.PI*(s-90)/180,c=r+i;Math.ceil(c)>=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle&&(c=this.fullAngle+this.w.config.plotOptions.pie.startAngle%this.fullAngle-.01),Math.ceil(c)>this.fullAngle&&(c-=this.fullAngle);var u=Math.PI*(c-90)/180,h=n.centerX+o*Math.cos(l),d=n.centerY+o*Math.sin(l),p=n.centerX+o*Math.cos(u),f=n.centerY+o*Math.sin(u),g=m.polarToCartesian(n.centerX,n.centerY,n.donutSize,c),v=m.polarToCartesian(n.centerX,n.centerY,n.donutSize,s),y=r>180?1:0,x=["M",h,d,"A",o,o,0,y,1,p,f];return e="donut"===n.chartType?[].concat(x,["L",g.x,g.y,"A",n.donutSize,n.donutSize,0,y,0,v.x,v.y,"L",h,d,"z"]).join(" "):"pie"===n.chartType||"polarArea"===n.chartType?[].concat(x,["L",n.centerX,n.centerY,"L",h,d]).join(" "):[].concat(x).join(" "),a.roundPathCorners(e,2*this.strokeWidth)}},{key:"drawPolarElements",value:function(t){var e=this.w,n=new G(this.ctx),i=new b(this.ctx),r=new kt(this.ctx),o=i.group(),a=i.group(),s=n.niceScale(0,Math.ceil(this.maxY),0),l=s.result.reverse(),c=s.result.length;this.maxY=s.niceMax;for(var u=e.globals.radialSize,h=u/(c-1),d=0;d<c-1;d++){var p=i.drawCircle(u);if(p.attr({cx:this.centerX,cy:this.centerY,fill:"none","stroke-width":e.config.plotOptions.polarArea.rings.strokeWidth,stroke:e.config.plotOptions.polarArea.rings.strokeColor}),e.config.yaxis[0].show){var f=r.drawYAxisTexts(this.centerX,this.centerY-u+parseInt(e.config.yaxis[0].labels.style.fontSize,10)/2,d,l[d]);a.add(f)}o.add(p),u-=h}this.drawSpokes(t),t.add(o),t.add(a)}},{key:"renderInnerDataLabels",value:function(t,e){var n=this.w,i=new b(this.ctx),r=i.group({class:"apexcharts-datalabels-group",transform:"translate(".concat(e.translateX?e.translateX:0,", ").concat(e.translateY?e.translateY:0,") scale(").concat(n.config.plotOptions.pie.customScale,")")}),o=t.total.show;r.node.style.opacity=e.opacity;var a,s,l=e.centerX,c=e.centerY;a=void 0===t.name.color?n.globals.colors[0]:t.name.color;var u=t.name.fontSize,h=t.name.fontFamily,d=t.name.fontWeight;s=void 0===t.value.color?n.config.chart.foreColor:t.value.color;var p=t.value.formatter,f="",g="";if(o?(a=t.total.color,u=t.total.fontSize,h=t.total.fontFamily,d=t.total.fontWeight,g=t.total.label,f=t.total.formatter(n)):1===n.globals.series.length&&(f=p(n.globals.series[0],n),g=n.globals.seriesNames[0]),g&&(g=t.name.formatter(g,t.total.show,n)),t.name.show){var m=i.drawText({x:l,y:c+parseFloat(t.name.offsetY),text:g,textAnchor:"middle",foreColor:a,fontSize:u,fontWeight:d,fontFamily:h});m.node.classList.add("apexcharts-datalabel-label"),r.add(m)}if(t.value.show){var v=t.name.show?parseFloat(t.value.offsetY)+16:t.value.offsetY,y=i.drawText({x:l,y:c+v,text:f,textAnchor:"middle",foreColor:s,fontWeight:t.value.fontWeight,fontSize:t.value.fontSize,fontFamily:t.value.fontFamily});y.node.classList.add("apexcharts-datalabel-value"),r.add(y)}return r}},{key:"printInnerLabels",value:function(t,e,n,i){var r,o=this.w;i?r=void 0===t.name.color?o.globals.colors[parseInt(i.parentNode.getAttribute("rel"),10)-1]:t.name.color:o.globals.series.length>1&&t.total.show&&(r=t.total.color);var a=o.globals.dom.baseEl.querySelector(".apexcharts-datalabel-label"),s=o.globals.dom.baseEl.querySelector(".apexcharts-datalabel-value");n=(0,t.value.formatter)(n,o),i||"function"!=typeof t.total.formatter||(n=t.total.formatter(o));var l=e===t.total.label;e=t.name.formatter(e,l,o),null!==a&&(a.textContent=e),null!==s&&(s.textContent=n),null!==a&&(a.style.fill=r)}},{key:"printDataLabelsInner",value:function(t,e){var n=this.w,i=t.getAttribute("data:value"),r=n.globals.seriesNames[parseInt(t.parentNode.getAttribute("rel"),10)-1];n.globals.series.length>1&&this.printInnerLabels(e,r,i,t);var o=n.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group");null!==o&&(o.style.opacity=1)}},{key:"drawSpokes",value:function(t){var e=this,n=this.w,i=new b(this.ctx),r=n.config.plotOptions.polarArea.spokes;if(0!==r.strokeWidth){for(var o=[],a=360/n.globals.series.length,s=0;s<n.globals.series.length;s++)o.push(m.polarToCartesian(this.centerX,this.centerY,n.globals.radialSize,n.config.plotOptions.pie.startAngle+a*s));o.forEach((function(n,o){var a=i.drawLine(n.x,n.y,e.centerX,e.centerY,Array.isArray(r.connectorColors)?r.connectorColors[o]:r.connectorColors);t.add(a)}))}}},{key:"revertDataLabelsInner",value:function(t,e,n){var i=this,r=this.w,o=r.globals.dom.baseEl.querySelector(".apexcharts-datalabels-group"),a=!1,s=r.globals.dom.baseEl.getElementsByClassName("apexcharts-pie-area"),l=function(t){var n=t.makeSliceOut,r=t.printLabel;Array.prototype.forEach.call(s,(function(t){"true"===t.getAttribute("data:pieClicked")&&(n&&(a=!0),r&&i.printDataLabelsInner(t,e))}))};if(l({makeSliceOut:!0,printLabel:!1}),e.total.show&&r.globals.series.length>1)a&&!e.total.showAlways?l({makeSliceOut:!1,printLabel:!0}):this.printInnerLabels(e,e.total.label,e.total.formatter(r));else if(l({makeSliceOut:!1,printLabel:!0}),!a)if(r.globals.selectedDataPoints.length&&r.globals.series.length>1)if(r.globals.selectedDataPoints[0].length>0){var c=r.globals.selectedDataPoints[0],u=r.globals.dom.baseEl.querySelector(".apexcharts-".concat(this.chartType.toLowerCase(),"-slice-").concat(c));this.printDataLabelsInner(u,e)}else o&&r.globals.selectedDataPoints.length&&0===r.globals.selectedDataPoints[0].length&&(o.style.opacity=0);else o&&r.globals.series.length>1&&(o.style.opacity=0)}}]),t}(),Mt=function(){function t(e){i(this,t),this.ctx=e,this.w=e.w,this.chartType=this.w.config.chart.type,this.initialAnim=this.w.config.chart.animations.enabled,this.dynamicAnim=this.initialAnim&&this.w.config.chart.animations.dynamicAnimation.enabled,this.animDur=0;var n=this.w;this.graphics=new b(this.ctx),this.lineColorArr=void 0!==n.globals.stroke.colors?n.globals.stroke.colors:n.globals.colors,this.defaultSize=n.globals.svgHeight<n.globals.svgWidth?n.globals.gridHeight+1.5*n.globals.goldenPadding:n.globals.gridWidth,this.isLog=n.config.yaxis[0].logarithmic,this.logBase=n.config.yaxis[0].logBase,this.coreUtils=new x(this.ctx),this.maxValue=this.isLog?this.coreUtils.getLogVal(this.logBase,n.globals.maxY,0):n.globals.maxY,this.minValue=this.isLog?this.coreUtils.getLogVal(this.logBase,this.w.globals.minY,0):n.globals.minY,this.polygons=n.config.plotOptions.radar.polygons,this.strokeWidth=n.config.stroke.show?n.config.stroke.width:0,this.size=this.defaultSize/2.1-this.strokeWidth-n.config.chart.dropShadow.blur,n.config.xaxis.labels.show&&(this.size=this.size-n.globals.xAxisLabelsWidth/1.75),void 0!==n.config.plotOptions.radar.size&&(this.size=n.config.plotOptions.radar.size),this.dataRadiusOfPercent=[],this.dataRadius=[],this.angleArr=[],this.yaxisLabelsTextsPos=[]}return o(t,[{key:"draw",value:function(t){var n=this,i=this.w,r=new B(this.ctx),o=[],a=new V(this.ctx);t.length&&(this.dataPointsLen=t[i.globals.maxValsInArrayIndex].length),this.disAngle=2*Math.PI/this.dataPointsLen;var s=i.globals.gridWidth/2,l=i.globals.gridHeight/2,c=s+i.config.plotOptions.radar.offsetX,u=l+i.config.plotOptions.radar.offsetY,h=this.graphics.group({class:"apexcharts-radar-series apexcharts-plot-series",transform:"translate(".concat(c||0,", ").concat(u||0,")")}),d=[],p=null,f=null;if(this.yaxisLabels=this.graphics.group({class:"apexcharts-yaxis"}),t.forEach((function(t,s){var l=t.length===i.globals.dataPoints,c=n.graphics.group().attr({class:"apexcharts-series","data:longestSeries":l,seriesName:m.escapeString(i.globals.seriesNames[s]),rel:s+1,"data:realIndex":s});n.dataRadiusOfPercent[s]=[],n.dataRadius[s]=[],n.angleArr[s]=[],t.forEach((function(t,e){var i=Math.abs(n.maxValue-n.minValue);t+=Math.abs(n.minValue),n.isLog&&(t=n.coreUtils.getLogVal(n.logBase,t,0)),n.dataRadiusOfPercent[s][e]=t/i,n.dataRadius[s][e]=n.dataRadiusOfPercent[s][e]*n.size,n.angleArr[s][e]=e*n.disAngle})),d=n.getDataPointsPos(n.dataRadius[s],n.angleArr[s]);var u=n.createPaths(d,{x:0,y:0});p=n.graphics.group({class:"apexcharts-series-markers-wrap apexcharts-element-hidden"}),f=n.graphics.group({class:"apexcharts-datalabels","data:realIndex":s}),i.globals.delayedElements.push({el:p.node,index:s});var h={i:s,realIndex:s,animationDelay:s,initialSpeed:i.config.chart.animations.speed,dataChangeSpeed:i.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-radar",shouldClipToGrid:!1,bindEventsOnPaths:!1,stroke:i.globals.stroke.colors[s],strokeLineCap:i.config.stroke.lineCap},g=null;i.globals.previousPaths.length>0&&(g=n.getPreviousPath(s));for(var v=0;v<u.linePathsTo.length;v++){var b=n.graphics.renderPaths(e(e({},h),{},{pathFrom:null===g?u.linePathsFrom[v]:g,pathTo:u.linePathsTo[v],strokeWidth:Array.isArray(n.strokeWidth)?n.strokeWidth[s]:n.strokeWidth,fill:"none",drawShadow:!1}));c.add(b);var x=r.fillPath({seriesNumber:s}),_=n.graphics.renderPaths(e(e({},h),{},{pathFrom:null===g?u.areaPathsFrom[v]:g,pathTo:u.areaPathsTo[v],strokeWidth:0,fill:x,drawShadow:!1}));if(i.config.chart.dropShadow.enabled){var w=new y(n.ctx),S=i.config.chart.dropShadow;w.dropShadow(_,Object.assign({},S,{noUserSpaceOnUse:!0}),s)}c.add(_)}t.forEach((function(t,r){var o=new z(n.ctx).getMarkerConfig({cssClass:"apexcharts-marker",seriesIndex:s,dataPointIndex:r}),l=n.graphics.drawMarker(d[r].x,d[r].y,o);l.attr("rel",r),l.attr("j",r),l.attr("index",s),l.node.setAttribute("default-marker-size",o.pSize);var u=n.graphics.group({class:"apexcharts-series-markers"});u&&u.add(l),p.add(u),c.add(p);var h=i.config.dataLabels;if(h.enabled){var g=h.formatter(i.globals.series[s][r],{seriesIndex:s,dataPointIndex:r,w:i});a.plotDataLabelsText({x:d[r].x,y:d[r].y,text:g,textAnchor:"middle",i:s,j:s,parent:f,offsetCorrection:!1,dataLabelsConfig:e({},h)})}c.add(f)})),o.push(c)})),this.drawPolygons({parent:h}),i.config.xaxis.labels.show){var g=this.drawXAxisTexts();h.add(g)}return o.forEach((function(t){h.add(t)})),h.add(this.yaxisLabels),h}},{key:"drawPolygons",value:function(t){for(var e=this,n=this.w,i=t.parent,r=new kt(this.ctx),o=n.globals.yAxisScale[0].result.reverse(),a=o.length,s=[],l=this.size/(a-1),c=0;c<a;c++)s[c]=l*c;s.reverse();var u=[],h=[];s.forEach((function(t,n){var i=m.getPolygonPos(t,e.dataPointsLen),r="";i.forEach((function(t,i){if(0===n){var o=e.graphics.drawLine(t.x,t.y,0,0,Array.isArray(e.polygons.connectorColors)?e.polygons.connectorColors[i]:e.polygons.connectorColors);h.push(o)}0===i&&e.yaxisLabelsTextsPos.push({x:t.x,y:t.y}),r+=t.x+","+t.y+" "})),u.push(r)})),u.forEach((function(t,r){var o=e.polygons.strokeColors,a=e.polygons.strokeWidth,s=e.graphics.drawPolygon(t,Array.isArray(o)?o[r]:o,Array.isArray(a)?a[r]:a,n.globals.radarPolygons.fill.colors[r]);i.add(s)})),h.forEach((function(t){i.add(t)})),n.config.yaxis[0].show&&this.yaxisLabelsTextsPos.forEach((function(t,n){var i=r.drawYAxisTexts(t.x,t.y,n,o[n]);e.yaxisLabels.add(i)}))}},{key:"drawXAxisTexts",value:function(){var t=this,n=this.w,i=n.config.xaxis.labels,r=this.graphics.group({class:"apexcharts-xaxis"}),o=m.getPolygonPos(this.size,this.dataPointsLen);return n.globals.labels.forEach((function(a,s){var l=n.config.xaxis.labels.formatter,c=new V(t.ctx);if(o[s]){var u=t.getTextPos(o[s],t.size),h=l(a,{seriesIndex:-1,dataPointIndex:s,w:n});c.plotDataLabelsText({x:u.newX,y:u.newY,text:h,textAnchor:u.textAnchor,i:s,j:s,parent:r,color:Array.isArray(i.style.colors)&&i.style.colors[s]?i.style.colors[s]:"#a8a8a8",dataLabelsConfig:e({textAnchor:u.textAnchor,dropShadow:{enabled:!1}},i),offsetCorrection:!1})}})),r}},{key:"createPaths",value:function(t,e){var n=this,i=[],r=[],o=[],a=[];if(t.length){r=[this.graphics.move(e.x,e.y)],a=[this.graphics.move(e.x,e.y)];var s=this.graphics.move(t[0].x,t[0].y),l=this.graphics.move(t[0].x,t[0].y);t.forEach((function(e,i){s+=n.graphics.line(e.x,e.y),l+=n.graphics.line(e.x,e.y),i===t.length-1&&(s+="Z",l+="Z")})),i.push(s),o.push(l)}return{linePathsFrom:r,linePathsTo:i,areaPathsFrom:a,areaPathsTo:o}}},{key:"getTextPos",value:function(t,e){var n="middle",i=t.x,r=t.y;return Math.abs(t.x)>=10?t.x>0?(n="start",i+=10):t.x<0&&(n="end",i-=10):n="middle",Math.abs(t.y)>=e-10&&(t.y<0?r-=10:t.y>0&&(r+=10)),{textAnchor:n,newX:i,newY:r}}},{key:"getPreviousPath",value:function(t){for(var e=this.w,n=null,i=0;i<e.globals.previousPaths.length;i++){var r=e.globals.previousPaths[i];r.paths.length>0&&parseInt(r.realIndex,10)===parseInt(t,10)&&void 0!==e.globals.previousPaths[i].paths[0]&&(n=e.globals.previousPaths[i].paths[0].d)}return n}},{key:"getDataPointsPos",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.dataPointsLen;t=t||[],e=e||[];for(var i=[],r=0;r<n;r++){var o={};o.x=t[r]*Math.sin(e[r]),o.y=-t[r]*Math.cos(e[r]),i.push(o)}return i}}]),t}(),Tt=function(t){s(n,t);var e=h(n);function n(t){var r;i(this,n),(r=e.call(this,t)).ctx=t,r.w=t.w,r.animBeginArr=[0],r.animDur=0;var o=r.w;return r.startAngle=o.config.plotOptions.radialBar.startAngle,r.endAngle=o.config.plotOptions.radialBar.endAngle,r.totalAngle=Math.abs(o.config.plotOptions.radialBar.endAngle-o.config.plotOptions.radialBar.startAngle),r.trackStartAngle=o.config.plotOptions.radialBar.track.startAngle,r.trackEndAngle=o.config.plotOptions.radialBar.track.endAngle,r.barLabels=r.w.config.plotOptions.radialBar.barLabels,r.donutDataLabels=r.w.config.plotOptions.radialBar.dataLabels,r.radialDataLabels=r.donutDataLabels,r.trackStartAngle||(r.trackStartAngle=r.startAngle),r.trackEndAngle||(r.trackEndAngle=r.endAngle),360===r.endAngle&&(r.endAngle=359.99),r.margin=parseInt(o.config.plotOptions.radialBar.track.margin,10),r.onBarLabelClick=r.onBarLabelClick.bind(u(r)),r}return o(n,[{key:"draw",value:function(t){var e=this.w,n=new b(this.ctx),i=n.group({class:"apexcharts-radialbar"});if(e.globals.noData)return i;var r=n.group(),o=this.defaultSize/2,a=e.globals.gridWidth/2,s=this.defaultSize/2.05;e.config.chart.sparkline.enabled||(s=s-e.config.stroke.width-e.config.chart.dropShadow.blur);var l=e.globals.fill.colors;if(e.config.plotOptions.radialBar.track.show){var c=this.drawTracks({size:s,centerX:a,centerY:o,colorArr:l,series:t});r.add(c)}var u=this.drawArcs({size:s,centerX:a,centerY:o,colorArr:l,series:t}),h=360;e.config.plotOptions.radialBar.startAngle<0&&(h=this.totalAngle);var d=(360-h)/360;if(e.globals.radialSize=s-s*d,this.radialDataLabels.value.show){var p=Math.max(this.radialDataLabels.value.offsetY,this.radialDataLabels.name.offsetY);e.globals.radialSize+=p*d}return r.add(u.g),"front"===e.config.plotOptions.radialBar.hollow.position&&(u.g.add(u.elHollow),u.dataLabels&&u.g.add(u.dataLabels)),i.add(r),i}},{key:"drawTracks",value:function(t){var e=this.w,n=new b(this.ctx),i=n.group({class:"apexcharts-tracks"}),r=new y(this.ctx),o=new B(this.ctx),a=this.getStrokeWidth(t);t.size=t.size-a/2;for(var s=0;s<t.series.length;s++){var l=n.group({class:"apexcharts-radialbar-track apexcharts-track"});i.add(l),l.attr({rel:s+1}),t.size=t.size-a-this.margin;var c=e.config.plotOptions.radialBar.track,u=o.fillPath({seriesNumber:0,size:t.size,fillColors:Array.isArray(c.background)?c.background[s]:c.background,solid:!0}),h=this.trackStartAngle,d=this.trackEndAngle;Math.abs(d)+Math.abs(h)>=360&&(d=360-Math.abs(this.startAngle)-.1);var p=n.drawPath({d:"",stroke:u,strokeWidth:a*parseInt(c.strokeWidth,10)/100,fill:"none",strokeOpacity:c.opacity,classes:"apexcharts-radialbar-area"});if(c.dropShadow.enabled){var f=c.dropShadow;r.dropShadow(p,f)}l.add(p),p.attr("id","apexcharts-radialbarTrack-"+s),this.animatePaths(p,{centerX:t.centerX,centerY:t.centerY,endAngle:d,startAngle:h,size:t.size,i:s,totalItems:2,animBeginArr:0,dur:0,isTrack:!0,easing:e.globals.easing})}return i}},{key:"drawArcs",value:function(t){var e=this.w,n=new b(this.ctx),i=new B(this.ctx),r=new y(this.ctx),o=n.group(),a=this.getStrokeWidth(t);t.size=t.size-a/2;var s=e.config.plotOptions.radialBar.hollow.background,l=t.size-a*t.series.length-this.margin*t.series.length-a*parseInt(e.config.plotOptions.radialBar.track.strokeWidth,10)/100/2,c=l-e.config.plotOptions.radialBar.hollow.margin;void 0!==e.config.plotOptions.radialBar.hollow.image&&(s=this.drawHollowImage(t,o,l,s));var u=this.drawHollow({size:c,centerX:t.centerX,centerY:t.centerY,fill:s||"transparent"});if(e.config.plotOptions.radialBar.hollow.dropShadow.enabled){var h=e.config.plotOptions.radialBar.hollow.dropShadow;r.dropShadow(u,h)}var d=1;!this.radialDataLabels.total.show&&e.globals.series.length>1&&(d=0);var p=null;this.radialDataLabels.show&&(p=this.renderInnerDataLabels(this.radialDataLabels,{hollowSize:l,centerX:t.centerX,centerY:t.centerY,opacity:d})),"back"===e.config.plotOptions.radialBar.hollow.position&&(o.add(u),p&&o.add(p));var f=!1;e.config.plotOptions.radialBar.inverseOrder&&(f=!0);for(var g=f?t.series.length-1:0;f?g>=0:g<t.series.length;f?g--:g++){var v=n.group({class:"apexcharts-series apexcharts-radial-series",seriesName:m.escapeString(e.globals.seriesNames[g])});o.add(v),v.attr({rel:g+1,"data:realIndex":g}),this.ctx.series.addCollapsedClassToSeries(v,g),t.size=t.size-a-this.margin;var x=i.fillPath({seriesNumber:g,size:t.size,value:t.series[g]}),_=this.startAngle,w=void 0,S=m.negToZero(t.series[g]>100?100:t.series[g])/100,C=Math.round(this.totalAngle*S)+this.startAngle,k=void 0;e.globals.dataChanged&&(w=this.startAngle,k=Math.round(this.totalAngle*m.negToZero(e.globals.previousPaths[g])/100)+w),Math.abs(C)+Math.abs(_)>=360&&(C-=.01),Math.abs(k)+Math.abs(w)>=360&&(k-=.01);var A=C-_,M=Array.isArray(e.config.stroke.dashArray)?e.config.stroke.dashArray[g]:e.config.stroke.dashArray,T=n.drawPath({d:"",stroke:x,strokeWidth:a,fill:"none",fillOpacity:e.config.fill.opacity,classes:"apexcharts-radialbar-area apexcharts-radialbar-slice-"+g,strokeDashArray:M});if(b.setAttrs(T.node,{"data:angle":A,"data:value":t.series[g]}),e.config.chart.dropShadow.enabled){var I=e.config.chart.dropShadow;r.dropShadow(T,I,g)}if(r.setSelectionFilter(T,0,g),this.addListeners(T,this.radialDataLabels),v.add(T),T.attr({index:0,j:g}),this.barLabels.enabled){var E=m.polarToCartesian(t.centerX,t.centerY,t.size,_),O=this.barLabels.formatter(e.globals.seriesNames[g],{seriesIndex:g,w:e}),D=["apexcharts-radialbar-label"];this.barLabels.onClick||D.push("apexcharts-no-click");var L=this.barLabels.useSeriesColors?e.globals.colors[g]:e.config.chart.foreColor;L||(L=e.config.chart.foreColor);var P=E.x-this.barLabels.margin,N=E.y,R=n.drawText({x:P,y:N,text:O,textAnchor:"end",dominantBaseline:"middle",fontFamily:this.barLabels.fontFamily,fontWeight:this.barLabels.fontWeight,fontSize:this.barLabels.fontSize,foreColor:L,cssClass:D.join(" ")});R.on("click",this.onBarLabelClick),R.attr({rel:g+1}),0!==_&&R.attr({"transform-origin":"".concat(P," ").concat(N),transform:"rotate(".concat(_," 0 0)")}),v.add(R)}var z=0;!this.initialAnim||e.globals.resized||e.globals.dataChanged||(z=e.config.chart.animations.speed),e.globals.dataChanged&&(z=e.config.chart.animations.dynamicAnimation.speed),this.animDur=z/(1.2*t.series.length)+this.animDur,this.animBeginArr.push(this.animDur),this.animatePaths(T,{centerX:t.centerX,centerY:t.centerY,endAngle:C,startAngle:_,prevEndAngle:k,prevStartAngle:w,size:t.size,i:g,totalItems:2,animBeginArr:this.animBeginArr,dur:z,shouldSetPrevPaths:!0,easing:e.globals.easing})}return{g:o,elHollow:u,dataLabels:p}}},{key:"drawHollow",value:function(t){var e=new b(this.ctx).drawCircle(2*t.size);return e.attr({class:"apexcharts-radialbar-hollow",cx:t.centerX,cy:t.centerY,r:t.size,fill:t.fill}),e}},{key:"drawHollowImage",value:function(t,e,n,i){var r=this.w,o=new B(this.ctx),a=m.randomId(),s=r.config.plotOptions.radialBar.hollow.image;if(r.config.plotOptions.radialBar.hollow.imageClipped)o.clippedImgArea({width:n,height:n,image:s,patternID:"pattern".concat(r.globals.cuid).concat(a)}),i="url(#pattern".concat(r.globals.cuid).concat(a,")");else{var l=r.config.plotOptions.radialBar.hollow.imageWidth,c=r.config.plotOptions.radialBar.hollow.imageHeight;if(void 0===l&&void 0===c){var u=r.globals.dom.Paper.image(s).loaded((function(e){this.move(t.centerX-e.width/2+r.config.plotOptions.radialBar.hollow.imageOffsetX,t.centerY-e.height/2+r.config.plotOptions.radialBar.hollow.imageOffsetY)}));e.add(u)}else{var h=r.globals.dom.Paper.image(s).loaded((function(e){this.move(t.centerX-l/2+r.config.plotOptions.radialBar.hollow.imageOffsetX,t.centerY-c/2+r.config.plotOptions.radialBar.hollow.imageOffsetY),this.size(l,c)}));e.add(h)}}return i}},{key:"getStrokeWidth",value:function(t){var e=this.w;return t.size*(100-parseInt(e.config.plotOptions.radialBar.hollow.size,10))/100/(t.series.length+1)-this.margin}},{key:"onBarLabelClick",value:function(t){var e=parseInt(t.target.getAttribute("rel"),10)-1,n=this.barLabels.onClick,i=this.w;n&&n(i.globals.seriesNames[e],{w:i,seriesIndex:e})}}]),n}(At),It=function(t){s(r,t);var n=h(r);function r(){return i(this,r),n.apply(this,arguments)}return o(r,[{key:"draw",value:function(t,n){var i=this.w,r=new b(this.ctx);this.rangeBarOptions=this.w.config.plotOptions.rangeBar,this.series=t,this.seriesRangeStart=i.globals.seriesRangeStart,this.seriesRangeEnd=i.globals.seriesRangeEnd,this.barHelpers.initVariables(t);for(var o=r.group({class:"apexcharts-rangebar-series apexcharts-plot-series"}),s=0;s<t.length;s++){var l,c,u,h,d=void 0,p=void 0,f=i.globals.comboCharts?n[s]:s,g=r.group({class:"apexcharts-series",seriesName:m.escapeString(i.globals.seriesNames[f]),rel:s+1,"data:realIndex":f});this.ctx.series.addCollapsedClassToSeries(g,f),t[s].length>0&&(this.visibleI=this.visibleI+1);var v=0,y=0,x=0;this.yRatio.length>1&&(this.yaxisIndex=i.globals.seriesYAxisReverseMap[f][0],x=f);var _=this.barHelpers.initialPositions();p=_.y,h=_.zeroW,d=_.x,y=_.barWidth,v=_.barHeight,l=_.xDivision,c=_.yDivision,u=_.zeroH;for(var w=r.group({class:"apexcharts-datalabels","data:realIndex":f}),S=r.group({class:"apexcharts-rangebar-goals-markers"}),C=0;C<i.globals.dataPoints;C++){var k,A=this.barHelpers.getStrokeWidth(s,C,f),M=this.seriesRangeStart[s][C],T=this.seriesRangeEnd[s][C],I=null,E=null,O=null,D={x:d,y:p,strokeWidth:A,elSeries:g},L=this.seriesLen;if(i.config.plotOptions.bar.rangeBarGroupRows&&(L=1),void 0===i.config.series[s].data[C])break;if(this.isHorizontal){O=p+v*this.visibleI;var P=(c-v*L)/2;if(i.config.series[s].data[C].x){var N=this.detectOverlappingBars({i:s,j:C,barYPosition:O,srty:P,barHeight:v,yDivision:c,initPositions:_});v=N.barHeight,O=N.barYPosition}y=(I=this.drawRangeBarPaths(e({indexes:{i:s,j:C,realIndex:f},barHeight:v,barYPosition:O,zeroW:h,yDivision:c,y1:M,y2:T},D))).barWidth}else{i.globals.isXNumeric&&(d=(i.globals.seriesX[s][C]-i.globals.minX)/this.xRatio-y/2),E=d+y*this.visibleI;var R=(l-y*L)/2;if(i.config.series[s].data[C].x){var B=this.detectOverlappingBars({i:s,j:C,barXPosition:E,srtx:R,barWidth:y,xDivision:l,initPositions:_});y=B.barWidth,E=B.barXPosition}v=(I=this.drawRangeColumnPaths(e({indexes:{i:s,j:C,realIndex:f,translationsIndex:x},barWidth:y,barXPosition:E,zeroH:u,xDivision:l},D))).barHeight}var z=this.barHelpers.drawGoalLine({barXPosition:I.barXPosition,barYPosition:O,goalX:I.goalX,goalY:I.goalY,barHeight:v,barWidth:y});z&&S.add(z),p=I.y,d=I.x;var F=this.barHelpers.getPathFillColor(t,s,C,f),V=i.globals.stroke.colors[f];this.renderSeries((a(k={realIndex:f,pathFill:F,lineFill:V,j:C,i:s,x:d,y:p,y1:M,y2:T,pathFrom:I.pathFrom,pathTo:I.pathTo,strokeWidth:A,elSeries:g,series:t,barHeight:v,barWidth:y,barXPosition:E,barYPosition:O},"barWidth",y),a(k,"elDataLabelsWrap",w),a(k,"elGoalsMarkers",S),a(k,"visibleSeries",this.visibleI),a(k,"type","rangebar"),k))}o.add(g)}return o}},{key:"detectOverlappingBars",value:function(t){var e=t.i,n=t.j,i=t.barYPosition,r=t.barXPosition,o=t.srty,a=t.srtx,s=t.barHeight,l=t.barWidth,c=t.yDivision,u=t.xDivision,h=t.initPositions,d=this.w,p=[],f=d.config.series[e].data[n].rangeName,g=d.config.series[e].data[n].x,m=Array.isArray(g)?g.join(" "):g,v=d.globals.labels.map((function(t){return Array.isArray(t)?t.join(" "):t})).indexOf(m),y=d.globals.seriesRange[e].findIndex((function(t){return t.x===m&&t.overlaps.length>0}));return this.isHorizontal?(i=d.config.plotOptions.bar.rangeBarGroupRows?o+c*v:o+s*this.visibleI+c*v,y>-1&&!d.config.plotOptions.bar.rangeBarOverlap&&(p=d.globals.seriesRange[e][y].overlaps).indexOf(f)>-1&&(i=(s=h.barHeight/p.length)*this.visibleI+c*(100-parseInt(this.barOptions.barHeight,10))/100/2+s*(this.visibleI+p.indexOf(f))+c*v)):(v>-1&&(r=d.config.plotOptions.bar.rangeBarGroupRows?a+u*v:a+l*this.visibleI+u*v),y>-1&&!d.config.plotOptions.bar.rangeBarOverlap&&(p=d.globals.seriesRange[e][y].overlaps).indexOf(f)>-1&&(r=(l=h.barWidth/p.length)*this.visibleI+u*(100-parseInt(this.barOptions.barWidth,10))/100/2+l*(this.visibleI+p.indexOf(f))+u*v)),{barYPosition:i,barXPosition:r,barHeight:s,barWidth:l}}},{key:"drawRangeColumnPaths",value:function(t){var e=t.indexes,n=t.x,i=t.xDivision,r=t.barWidth,o=t.barXPosition,a=t.zeroH,s=this.w,l=e.i,c=e.j,u=this.yRatio[e.translationsIndex],h=e.realIndex,d=this.getRangeValue(h,c),p=Math.min(d.start,d.end),f=Math.max(d.start,d.end);void 0===this.series[l][c]||null===this.series[l][c]?p=a:(p=a-p/u,f=a-f/u);var g=Math.abs(f-p),m=this.barHelpers.getColumnPaths({barXPosition:o,barWidth:r,y1:p,y2:f,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,realIndex:e.realIndex,i:h,j:c,w:s});if(s.globals.isXNumeric){var v=this.getBarXForNumericXAxis({x:n,j:c,realIndex:h,barWidth:r});n=v.x,o=v.barXPosition}else n+=i;return{pathTo:m.pathTo,pathFrom:m.pathFrom,barHeight:g,x:n,y:f,goalY:this.barHelpers.getGoalValues("y",null,a,l,c,e.translationsIndex),barXPosition:o}}},{key:"drawRangeBarPaths",value:function(t){var e=t.indexes,n=t.y,i=t.y1,r=t.y2,o=t.yDivision,a=t.barHeight,s=t.barYPosition,l=t.zeroW,c=this.w,u=l+i/this.invertedYRatio,h=l+r/this.invertedYRatio,d=Math.abs(h-u),p=this.barHelpers.getBarpaths({barYPosition:s,barHeight:a,x1:u,x2:h,strokeWidth:this.strokeWidth,series:this.seriesRangeEnd,i:e.realIndex,realIndex:e.realIndex,j:e.j,w:c});return c.globals.isXNumeric||(n+=o),{pathTo:p.pathTo,pathFrom:p.pathFrom,barWidth:d,x:h,goalX:this.barHelpers.getGoalValues("x",l,null,e.realIndex,e.j),y:n}}},{key:"getRangeValue",value:function(t,e){var n=this.w;return{start:n.globals.seriesRangeStart[t][e],end:n.globals.seriesRangeEnd[t][e]}}}]),r}(xt),Et=function(){function t(e){i(this,t),this.w=e.w,this.lineCtx=e}return o(t,[{key:"sameValueSeriesFix",value:function(t,e){var n=this.w;if(("gradient"===n.config.fill.type||"gradient"===n.config.fill.type[t])&&new x(this.lineCtx.ctx,n).seriesHaveSameValues(t)){var i=e[t].slice();i[i.length-1]=i[i.length-1]+1e-6,e[t]=i}return e}},{key:"calculatePoints",value:function(t){var e=t.series,n=t.realIndex,i=t.x,r=t.y,o=t.i,a=t.j,s=t.prevY,l=this.w,c=[],u=[];if(0===a){var h=this.lineCtx.categoryAxisCorrection+l.config.markers.offsetX;l.globals.isXNumeric&&(h=(l.globals.seriesX[n][0]-l.globals.minX)/this.lineCtx.xRatio+l.config.markers.offsetX),c.push(h),u.push(m.isNumber(e[o][0])?s+l.config.markers.offsetY:null),c.push(i+l.config.markers.offsetX),u.push(m.isNumber(e[o][a+1])?r+l.config.markers.offsetY:null)}else c.push(i+l.config.markers.offsetX),u.push(m.isNumber(e[o][a+1])?r+l.config.markers.offsetY:null);return{x:c,y:u}}},{key:"checkPreviousPaths",value:function(t){for(var e=t.pathFromLine,n=t.pathFromArea,i=t.realIndex,r=this.w,o=0;o<r.globals.previousPaths.length;o++){var a=r.globals.previousPaths[o];("line"===a.type||"area"===a.type)&&a.paths.length>0&&parseInt(a.realIndex,10)===parseInt(i,10)&&("line"===a.type?(this.lineCtx.appendPathFrom=!1,e=r.globals.previousPaths[o].paths[0].d):"area"===a.type&&(this.lineCtx.appendPathFrom=!1,n=r.globals.previousPaths[o].paths[0].d,r.config.stroke.show&&r.globals.previousPaths[o].paths[1]&&(e=r.globals.previousPaths[o].paths[1].d)))}return{pathFromLine:e,pathFromArea:n}}},{key:"determineFirstPrevY",value:function(t){var e,n,i=t.i,r=t.series,o=t.prevY,a=t.lineYPosition,s=t.translationsIndex,l=this.w,c=l.config.chart.stacked&&!l.globals.comboCharts||l.config.chart.stacked&&l.globals.comboCharts&&(!this.w.config.chart.stackOnlyBar||"bar"===(null===(e=this.w.config.series[i])||void 0===e?void 0:e.type));if(void 0!==(null===(n=r[i])||void 0===n?void 0:n[0]))o=(a=c&&i>0?this.lineCtx.prevSeriesY[i-1][0]:this.lineCtx.zeroY)-r[i][0]/this.lineCtx.yRatio[s]+2*(this.lineCtx.isReversed?r[i][0]/this.lineCtx.yRatio[s]:0);else if(c&&i>0&&void 0===r[i][0])for(var u=i-1;u>=0;u--)if(null!==r[u][0]&&void 0!==r[u][0]){o=a=this.lineCtx.prevSeriesY[u][0];break}return{prevY:o,lineYPosition:a}}}]),t}(),Ot=function(t){for(var e="",n=0;n<t.length;n++){var i=t[n],r=i.length;r>4?(e+="C".concat(i[0],", ").concat(i[1]),e+=", ".concat(i[2],", ").concat(i[3]),e+=", ".concat(i[4],", ").concat(i[5])):r>2&&(e+="S".concat(i[0],", ").concat(i[1]),e+=", ".concat(i[2],", ").concat(i[3]))}return e},Dt=function(t){var e=function(t){for(var e,n,i,r,o=function(t){for(var e=[],n=t[0],i=t[1],r=e[0]=Lt(n,i),o=1,a=t.length-1;o<a;o++)n=i,i=t[o+1],e[o]=.5*(r+(r=Lt(n,i)));return e[o]=r,e}(t),a=t.length-1,s=[],l=0;l<a;l++)i=Lt(t[l],t[l+1]),Math.abs(i)<1e-6?o[l]=o[l+1]=0:(r=(e=o[l]/i)*e+(n=o[l+1]/i)*n)>9&&(r=3*i/Math.sqrt(r),o[l]=r*e,o[l+1]=r*n);for(var c=0;c<=a;c++)r=(t[Math.min(a,c+1)][0]-t[Math.max(0,c-1)][0])/(6*(1+o[c]*o[c])),s.push([r||0,o[c]*r||0]);return s}(t),n=t[1],i=t[0],r=[],o=e[1],a=e[0];r.push(i,[i[0]+a[0],i[1]+a[1],n[0]-o[0],n[1]-o[1],n[0],n[1]]);for(var s=2,l=e.length;s<l;s++){var c=t[s],u=e[s];r.push([c[0]-u[0],c[1]-u[1],c[0],c[1]])}return r};function Lt(t,e){return(e[1]-t[1])/(e[0]-t[0])}var Pt=function(){function t(e,n,r){i(this,t),this.ctx=e,this.w=e.w,this.xyRatios=n,this.pointsChart=!("bubble"!==this.w.config.chart.type&&"scatter"!==this.w.config.chart.type)||r,this.scatter=new F(this.ctx),this.noNegatives=this.w.globals.minX===Number.MAX_VALUE,this.lineHelpers=new Et(this),this.markers=new z(this.ctx),this.prevSeriesY=[],this.categoryAxisCorrection=0,this.yaxisIndex=0}return o(t,[{key:"draw",value:function(t,n,i,r){var o,a=this.w,s=new b(this.ctx),l=a.globals.comboCharts?n:a.config.chart.type,c=s.group({class:"apexcharts-".concat(l,"-series apexcharts-plot-series")}),u=new x(this.ctx,a);this.yRatio=this.xyRatios.yRatio,this.zRatio=this.xyRatios.zRatio,this.xRatio=this.xyRatios.xRatio,this.baseLineY=this.xyRatios.baseLineY,t=u.getLogSeries(t),this.yRatio=u.getLogYRatios(this.yRatio);for(var h=[],d=0;d<t.length;d++){t=this.lineHelpers.sameValueSeriesFix(d,t);var p=a.globals.comboCharts?i[d]:d,f=this.yRatio.length>1?p:0;this._initSerieVariables(t,d,p);var g=[],m=[],v=[],y=a.globals.padHorizontal+this.categoryAxisCorrection;this.ctx.series.addCollapsedClassToSeries(this.elSeries,p),a.globals.isXNumeric&&a.globals.seriesX.length>0&&(y=(a.globals.seriesX[p][0]-a.globals.minX)/this.xRatio),v.push(y);var _,w=y,S=void 0,C=w,k=this.zeroY,A=this.zeroY;k=this.lineHelpers.determineFirstPrevY({i:d,series:t,prevY:k,lineYPosition:0,translationsIndex:f}).prevY,"monotonCubic"===a.config.stroke.curve&&null===t[d][0]?g.push(null):g.push(k),_=k,"rangeArea"===l&&(S=A=this.lineHelpers.determineFirstPrevY({i:d,series:r,prevY:A,lineYPosition:0,translationsIndex:f}).prevY,m.push(A));var M={type:l,series:t,realIndex:p,translationsIndex:f,i:d,x:y,y:1,pX:w,pY:_,pathsFrom:this._calculatePathsFrom({type:l,series:t,i:d,realIndex:p,prevX:C,prevY:k,prevY2:A}),linePaths:[],areaPaths:[],seriesIndex:i,lineYPosition:0,xArrj:v,yArrj:g,y2Arrj:m,seriesRangeEnd:r},T=this._iterateOverDataPoints(e(e({},M),{},{iterations:"rangeArea"===l?t[d].length-1:void 0,isRangeStart:!0}));if("rangeArea"===l){var I=this._calculatePathsFrom({series:r,i:d,realIndex:p,prevX:C,prevY:A}),E=this._iterateOverDataPoints(e(e({},M),{},{series:r,pY:S,pathsFrom:I,iterations:r[d].length-1,isRangeStart:!1}));T.linePaths[0]=E.linePath+T.linePath,T.pathFromLine=E.pathFromLine+T.pathFromLine}this._handlePaths({type:l,realIndex:p,i:d,paths:T}),this.elSeries.add(this.elPointsMain),this.elSeries.add(this.elDataLabelsWrap),h.push(this.elSeries)}if(void 0!==(null===(o=a.config.series[0])||void 0===o?void 0:o.zIndex)&&h.sort((function(t,e){return Number(t.node.getAttribute("zIndex"))-Number(e.node.getAttribute("zIndex"))})),a.config.chart.stacked)for(var O=h.length;O>0;O--)c.add(h[O-1]);else for(var D=0;D<h.length;D++)c.add(h[D]);return c}},{key:"_initSerieVariables",value:function(t,e,n){var i=this.w,r=new b(this.ctx);this.xDivision=i.globals.gridWidth/(i.globals.dataPoints-("on"===i.config.xaxis.tickPlacement?1:0)),this.strokeWidth=Array.isArray(i.config.stroke.width)?i.config.stroke.width[n]:i.config.stroke.width;var o=0;this.yRatio.length>1&&(this.yaxisIndex=i.globals.seriesYAxisReverseMap[n],o=n),this.isReversed=i.config.yaxis[this.yaxisIndex]&&i.config.yaxis[this.yaxisIndex].reversed,this.zeroY=i.globals.gridHeight-this.baseLineY[o]-(this.isReversed?i.globals.gridHeight:0)+(this.isReversed?2*this.baseLineY[o]:0),this.areaBottomY=this.zeroY,(this.zeroY>i.globals.gridHeight||"end"===i.config.plotOptions.area.fillTo)&&(this.areaBottomY=i.globals.gridHeight),this.categoryAxisCorrection=this.xDivision/2,this.elSeries=r.group({class:"apexcharts-series",zIndex:void 0!==i.config.series[n].zIndex?i.config.series[n].zIndex:n,seriesName:m.escapeString(i.globals.seriesNames[n])}),this.elPointsMain=r.group({class:"apexcharts-series-markers-wrap","data:realIndex":n}),this.elDataLabelsWrap=r.group({class:"apexcharts-datalabels","data:realIndex":n});var a=t[e].length===i.globals.dataPoints;this.elSeries.attr({"data:longestSeries":a,rel:e+1,"data:realIndex":n}),this.appendPathFrom=!0}},{key:"_calculatePathsFrom",value:function(t){var e,n,i,r,o=t.type,a=t.series,s=t.i,l=t.realIndex,c=t.prevX,u=t.prevY,h=t.prevY2,d=this.w,p=new b(this.ctx);if(null===a[s][0]){for(var f=0;f<a[s].length;f++)if(null!==a[s][f]){c=this.xDivision*f,u=this.zeroY-a[s][f]/this.yRatio[l],e=p.move(c,u),n=p.move(c,this.areaBottomY);break}}else e=p.move(c,u),"rangeArea"===o&&(e=p.move(c,h)+p.line(c,u)),n=p.move(c,this.areaBottomY)+p.line(c,u);if(i=p.move(-1,this.zeroY)+p.line(-1,this.zeroY),r=p.move(-1,this.zeroY)+p.line(-1,this.zeroY),d.globals.previousPaths.length>0){var g=this.lineHelpers.checkPreviousPaths({pathFromLine:i,pathFromArea:r,realIndex:l});i=g.pathFromLine,r=g.pathFromArea}return{prevX:c,prevY:u,linePath:e,areaPath:n,pathFromLine:i,pathFromArea:r}}},{key:"_handlePaths",value:function(t){var n=t.type,i=t.realIndex,r=t.i,o=t.paths,a=this.w,s=new b(this.ctx),l=new B(this.ctx);this.prevSeriesY.push(o.yArrj),a.globals.seriesXvalues[i]=o.xArrj,a.globals.seriesYvalues[i]=o.yArrj;var c=a.config.forecastDataPoints;if(c.count>0&&"rangeArea"!==n){var u=a.globals.seriesXvalues[i][a.globals.seriesXvalues[i].length-c.count-1],h=s.drawRect(u,0,a.globals.gridWidth,a.globals.gridHeight,0);a.globals.dom.elForecastMask.appendChild(h.node);var d=s.drawRect(0,0,u,a.globals.gridHeight,0);a.globals.dom.elNonForecastMask.appendChild(d.node)}this.pointsChart||a.globals.delayedElements.push({el:this.elPointsMain.node,index:i});var p={i:r,realIndex:i,animationDelay:r,initialSpeed:a.config.chart.animations.speed,dataChangeSpeed:a.config.chart.animations.dynamicAnimation.speed,className:"apexcharts-".concat(n)};if("area"===n)for(var f=l.fillPath({seriesNumber:i}),g=0;g<o.areaPaths.length;g++){var m=s.renderPaths(e(e({},p),{},{pathFrom:o.pathFromArea,pathTo:o.areaPaths[g],stroke:"none",strokeWidth:0,strokeLineCap:null,fill:f}));this.elSeries.add(m)}if(a.config.stroke.show&&!this.pointsChart){var v=null;if("line"===n)v=l.fillPath({seriesNumber:i,i:r});else if("solid"===a.config.stroke.fill.type)v=a.globals.stroke.colors[i];else{var y=a.config.fill;a.config.fill=a.config.stroke.fill,v=l.fillPath({seriesNumber:i,i:r}),a.config.fill=y}for(var x=0;x<o.linePaths.length;x++){var _=v;"rangeArea"===n&&(_=l.fillPath({seriesNumber:i}));var w=e(e({},p),{},{pathFrom:o.pathFromLine,pathTo:o.linePaths[x],stroke:v,strokeWidth:this.strokeWidth,strokeLineCap:a.config.stroke.lineCap,fill:"rangeArea"===n?_:"none"}),S=s.renderPaths(w);if(this.elSeries.add(S),S.attr("fill-rule","evenodd"),c.count>0&&"rangeArea"!==n){var C=s.renderPaths(w);C.node.setAttribute("stroke-dasharray",c.dashArray),c.strokeWidth&&C.node.setAttribute("stroke-width",c.strokeWidth),this.elSeries.add(C),C.attr("clip-path","url(#forecastMask".concat(a.globals.cuid,")")),S.attr("clip-path","url(#nonForecastMask".concat(a.globals.cuid,")"))}}}}},{key:"_iterateOverDataPoints",value:function(t){var e,n=this,i=t.type,r=t.series,o=t.iterations,a=t.realIndex,s=t.translationsIndex,l=t.i,c=t.x,u=t.y,h=t.pX,d=t.pY,p=t.pathsFrom,f=t.linePaths,g=t.areaPaths,v=t.seriesIndex,y=t.lineYPosition,x=t.xArrj,_=t.yArrj,w=t.y2Arrj,S=t.isRangeStart,C=t.seriesRangeEnd,k=this.w,A=new b(this.ctx),M=this.yRatio,T=p.prevY,I=p.linePath,E=p.areaPath,O=p.pathFromLine,D=p.pathFromArea,L=m.isNumber(k.globals.minYArr[a])?k.globals.minYArr[a]:k.globals.minY;o||(o=k.globals.dataPoints>1?k.globals.dataPoints-1:k.globals.dataPoints);for(var P=function(t,e){return e-t/M[s]+2*(n.isReversed?t/M[s]:0)},N=u,R=k.config.chart.stacked&&!k.globals.comboCharts||k.config.chart.stacked&&k.globals.comboCharts&&(!this.w.config.chart.stackOnlyBar||"bar"===(null===(e=this.w.config.series[a])||void 0===e?void 0:e.type)),B=0;B<o;B++){var z=void 0===r[l][B+1]||null===r[l][B+1];if(k.globals.isXNumeric){var F=k.globals.seriesX[a][B+1];void 0===k.globals.seriesX[a][B+1]&&(F=k.globals.seriesX[a][o-1]),c=(F-k.globals.minX)/this.xRatio}else c+=this.xDivision;y=R&&l>0&&k.globals.collapsedSeries.length<k.config.series.length-1?this.prevSeriesY[function(t){for(var e=t,n=0;n<k.globals.series.length;n++)if(k.globals.collapsedSeriesIndices.indexOf(t)>-1){e--;break}return e>=0?e:0}(l-1)][B+1]:this.zeroY,z?u=P(L,y):(u=P(r[l][B+1],y),"rangeArea"===i&&(N=P(C[l][B+1],y))),x.push(c),z&&"smooth"===k.config.stroke.curve?_.push(null):_.push(u),w.push(N);var V=this.lineHelpers.calculatePoints({series:r,x:c,y:u,realIndex:a,i:l,j:B,prevY:T}),H=this._createPaths({type:i,series:r,i:l,realIndex:a,j:B,x:c,y:u,y2:N,xArrj:x,yArrj:_,y2Arrj:w,pX:h,pY:d,linePath:I,areaPath:E,linePaths:f,areaPaths:g,seriesIndex:v,isRangeStart:S});g=H.areaPaths,f=H.linePaths,h=H.pX,d=H.pY,E=H.areaPath,I=H.linePath,!this.appendPathFrom||"monotoneCubic"===k.config.stroke.curve&&"rangeArea"===i||(O+=A.line(c,this.zeroY),D+=A.line(c,this.zeroY)),this.handleNullDataPoints(r,V,l,B,a),this._handleMarkersAndLabels({type:i,pointsPos:V,i:l,j:B,realIndex:a,isRangeStart:S})}return{yArrj:_,xArrj:x,pathFromArea:D,areaPaths:g,pathFromLine:O,linePaths:f,linePath:I,areaPath:E}}},{key:"_handleMarkersAndLabels",value:function(t){var e=t.type,n=t.pointsPos,i=t.isRangeStart,r=t.i,o=t.j,a=t.realIndex,s=this.w,l=new V(this.ctx);if(this.pointsChart)this.scatter.draw(this.elSeries,o,{realIndex:a,pointsPos:n,zRatio:this.zRatio,elParent:this.elPointsMain});else{s.globals.series[r].length>1&&this.elPointsMain.node.classList.add("apexcharts-element-hidden");var c=this.markers.plotChartMarkers(n,a,o+1);null!==c&&this.elPointsMain.add(c)}var u=l.drawDataLabel({type:e,isRangeStart:i,pos:n,i:a,j:o+1});null!==u&&this.elDataLabelsWrap.add(u)}},{key:"_createPaths",value:function(t){var e=t.type,n=t.series,i=t.i,r=t.realIndex,o=t.j,a=t.x,s=t.y,l=t.xArrj,c=t.yArrj,u=t.y2,h=t.y2Arrj,d=t.pX,p=t.pY,f=t.linePath,g=t.areaPath,m=t.linePaths,v=t.areaPaths,y=t.seriesIndex,x=t.isRangeStart,_=this.w,w=new b(this.ctx),S=_.config.stroke.curve,C=this.areaBottomY;if(Array.isArray(_.config.stroke.curve)&&(S=Array.isArray(y)?_.config.stroke.curve[y[i]]:_.config.stroke.curve[i]),"rangeArea"===e&&(_.globals.hasNullValues||_.config.forecastDataPoints.count>0)&&"monotoneCubic"===S&&(S="straight"),"monotoneCubic"===S){var k="rangeArea"===e?l.length===_.globals.dataPoints:o===n[i].length-2,A=l.map((function(t,e){return[l[e],c[e]]})).filter((function(t){return null!==t[1]}));if(k&&A.length>1){var M=Dt(A);if(f+=Ot(M),null===n[i][0]?g=f:g+=Ot(M),"rangeArea"===e&&x){f+=w.line(l[l.length-1],h[h.length-1]);var T=l.slice().reverse(),I=h.slice().reverse(),E=T.map((function(t,e){return[T[e],I[e]]})),O=Dt(E);g=f+=Ot(O)}else g+=w.line(A[A.length-1][0],C)+w.line(A[0][0],C)+w.move(A[0][0],A[0][1])+"z";m.push(f),v.push(g)}}else if("smooth"===S){var D=.35*(a-d);_.globals.hasNullValues?(null!==n[i][o]&&(null!==n[i][o+1]?(f=w.move(d,p)+w.curve(d+D,p,a-D,s,a+1,s),g=w.move(d+1,p)+w.curve(d+D,p,a-D,s,a+1,s)+w.line(a,C)+w.line(d,C)+"z"):(f=w.move(d,p),g=w.move(d,p)+"z")),m.push(f),v.push(g)):(f+=w.curve(d+D,p,a-D,s,a,s),g+=w.curve(d+D,p,a-D,s,a,s)),d=a,p=s,o===n[i].length-2&&(g=g+w.curve(d,p,a,s,a,C)+w.move(a,s)+"z","rangeArea"===e&&x?f=f+w.curve(d,p,a,s,a,u)+w.move(a,u)+"z":_.globals.hasNullValues||(m.push(f),v.push(g)))}else{if(null===n[i][o+1]){f+=w.move(a,s);var L=_.globals.isXNumeric?(_.globals.seriesX[r][o]-_.globals.minX)/this.xRatio:a-this.xDivision;g=g+w.line(L,C)+w.move(a,s)+"z"}null===n[i][o]&&(f+=w.move(a,s),g+=w.move(a,C)),"stepline"===S?(f=f+w.line(a,null,"H")+w.line(null,s,"V"),g=g+w.line(a,null,"H")+w.line(null,s,"V")):"linestep"===S?(f=f+w.line(null,s,"V")+w.line(a,null,"H"),g=g+w.line(null,s,"V")+w.line(a,null,"H")):"straight"===S&&(f+=w.line(a,s),g+=w.line(a,s)),o===n[i].length-2&&(g=g+w.line(a,C)+w.move(a,s)+"z","rangeArea"===e&&x?f=f+w.line(a,u)+w.move(a,u)+"z":(m.push(f),v.push(g)))}return{linePaths:m,areaPaths:v,pX:d,pY:p,linePath:f,areaPath:g}}},{key:"handleNullDataPoints",value:function(t,e,n,i,r){var o=this.w;if(null===t[n][i]&&o.config.markers.showNullDataPoints||1===t[n].length){var a=this.markers.plotChartMarkers(e,r,i+1,this.strokeWidth-o.config.markers.strokeWidth/2,!0);null!==a&&this.elPointsMain.add(a)}}}]),t}();window.TreemapSquared={},window.TreemapSquared.generate=function(){function t(e,n,i,r){this.xoffset=e,this.yoffset=n,this.height=r,this.width=i,this.shortestEdge=function(){return Math.min(this.height,this.width)},this.getCoordinates=function(t){var e,n=[],i=this.xoffset,r=this.yoffset,a=o(t)/this.height,s=o(t)/this.width;if(this.width>=this.height)for(e=0;e<t.length;e++)n.push([i,r,i+a,r+t[e]/a]),r+=t[e]/a;else for(e=0;e<t.length;e++)n.push([i,r,i+t[e]/s,r+s]),i+=t[e]/s;return n},this.cutArea=function(e){var n;if(this.width>=this.height){var i=e/this.height,r=this.width-i;n=new t(this.xoffset+i,this.yoffset,r,this.height)}else{var o=e/this.width,a=this.height-o;n=new t(this.xoffset,this.yoffset+o,this.width,a)}return n}}function e(e,i,r,a,s){a=void 0===a?0:a,s=void 0===s?0:s;var l=n(function(t,e){var n,i=[],r=e/o(t);for(n=0;n<t.length;n++)i[n]=t[n]*r;return i}(e,i*r),[],new t(a,s,i,r),[]);return function(t){var e,n,i=[];for(e=0;e<t.length;e++)for(n=0;n<t[e].length;n++)i.push(t[e][n]);return i}(l)}function n(t,e,r,a){var s,l,c;if(0!==t.length)return s=r.shortestEdge(),function(t,e,n){var r;return 0===t.length||((r=t.slice()).push(e),i(t,n)>=i(r,n))}(e,l=t[0],s)?(e.push(l),n(t.slice(1),e,r,a)):(c=r.cutArea(o(e),a),a.push(r.getCoordinates(e)),n(t,[],c,a)),a;a.push(r.getCoordinates(e))}function i(t,e){var n=Math.min.apply(Math,t),i=Math.max.apply(Math,t),r=o(t);return Math.max(Math.pow(e,2)*i/Math.pow(r,2),Math.pow(r,2)/(Math.pow(e,2)*n))}function r(t){return t&&t.constructor===Array}function o(t){var e,n=0;for(e=0;e<t.length;e++)n+=t[e];return n}function a(t){var e,n=0;if(r(t[0]))for(e=0;e<t.length;e++)n+=a(t[e]);else n=o(t);return n}return function t(n,i,o,s,l){s=void 0===s?0:s,l=void 0===l?0:l;var c,u,h=[],d=[];if(r(n[0])){for(u=0;u<n.length;u++)h[u]=a(n[u]);for(c=e(h,i,o,s,l),u=0;u<n.length;u++)d.push(t(n[u],c[u][2]-c[u][0],c[u][3]-c[u][1],c[u][0],c[u][1]))}else d=e(n,i,o,s,l);return d}}();var Nt,Rt,Bt=function(){function t(e,n){i(this,t),this.ctx=e,this.w=e.w,this.strokeWidth=this.w.config.stroke.width,this.helpers=new St(e),this.dynamicAnim=this.w.config.chart.animations.dynamicAnimation,this.labels=[]}return o(t,[{key:"draw",value:function(t){var e=this,n=this.w,i=new b(this.ctx),r=new B(this.ctx),o=i.group({class:"apexcharts-treemap"});if(n.globals.noData)return o;var a=[];return t.forEach((function(t){var e=t.map((function(t){return Math.abs(t)}));a.push(e)})),this.negRange=this.helpers.checkColorRange(),n.config.series.forEach((function(t,n){t.data.forEach((function(t){Array.isArray(e.labels[n])||(e.labels[n]=[]),e.labels[n].push(t.x)}))})),window.TreemapSquared.generate(a,n.globals.gridWidth,n.globals.gridHeight).forEach((function(a,s){var l=i.group({class:"apexcharts-series apexcharts-treemap-series",seriesName:m.escapeString(n.globals.seriesNames[s]),rel:s+1,"data:realIndex":s});if(n.config.chart.dropShadow.enabled){var c=n.config.chart.dropShadow;new y(e.ctx).dropShadow(o,c,s)}var u=i.group({class:"apexcharts-data-labels"});a.forEach((function(o,a){var c=o[0],u=o[1],h=o[2],d=o[3],p=i.drawRect(c,u,h-c,d-u,n.config.plotOptions.treemap.borderRadius,"#fff",1,e.strokeWidth,n.config.plotOptions.treemap.useFillColorAsStroke?g:n.globals.stroke.colors[s]);p.attr({cx:c,cy:u,index:s,i:s,j:a,width:h-c,height:d-u});var f=e.helpers.getShadeColor(n.config.chart.type,s,a,e.negRange),g=f.color;void 0!==n.config.series[s].data[a]&&n.config.series[s].data[a].fillColor&&(g=n.config.series[s].data[a].fillColor);var m=r.fillPath({color:g,seriesNumber:s,dataPointIndex:a});p.node.classList.add("apexcharts-treemap-rect"),p.attr({fill:m}),e.helpers.addListeners(p);var v={x:c+(h-c)/2,y:u+(d-u)/2,width:0,height:0},y={x:c,y:u,width:h-c,height:d-u};if(n.config.chart.animations.enabled&&!n.globals.dataChanged){var b=1;n.globals.resized||(b=n.config.chart.animations.speed),e.animateTreemap(p,v,y,b)}if(n.globals.dataChanged){var x=1;e.dynamicAnim.enabled&&n.globals.shouldAnimate&&(x=e.dynamicAnim.speed,n.globals.previousPaths[s]&&n.globals.previousPaths[s][a]&&n.globals.previousPaths[s][a].rect&&(v=n.globals.previousPaths[s][a].rect),e.animateTreemap(p,v,y,x))}var _=e.getFontSize(o),w=n.config.dataLabels.formatter(e.labels[s][a],{value:n.globals.series[s][a],seriesIndex:s,dataPointIndex:a,w:n});"truncate"===n.config.plotOptions.treemap.dataLabels.format&&(_=parseInt(n.config.dataLabels.style.fontSize,10),w=e.truncateLabels(w,_,c,u,h,d));var S=e.helpers.calculateDataLabels({text:w,x:(c+h)/2,y:(u+d)/2+e.strokeWidth/2+_/3,i:s,j:a,colorProps:f,fontSize:_,series:t});n.config.dataLabels.enabled&&S&&e.rotateToFitLabel(S,_,w,c,u,h,d),l.add(p),null!==S&&l.add(S)})),l.add(u),o.add(l)})),o}},{key:"getFontSize",value:function(t){var e,n,i=this.w,r=function t(e){var n,i=0;if(Array.isArray(e[0]))for(n=0;n<e.length;n++)i+=t(e[n]);else for(n=0;n<e.length;n++)i+=e[n].length;return i}(this.labels)/function t(e){var n,i=0;if(Array.isArray(e[0]))for(n=0;n<e.length;n++)i+=t(e[n]);else for(n=0;n<e.length;n++)i+=1;return i}(this.labels);return e=(t[2]-t[0])*(t[3]-t[1]),n=Math.pow(e,.5),Math.min(n/r,parseInt(i.config.dataLabels.style.fontSize,10))}},{key:"rotateToFitLabel",value:function(t,e,n,i,r,o,a){var s=new b(this.ctx),l=s.getTextRects(n,e);if(l.width+this.w.config.stroke.width+5>o-i&&l.width<=a-r){var c=s.rotateAroundCenter(t.node);t.node.setAttribute("transform","rotate(-90 ".concat(c.x," ").concat(c.y,") translate(").concat(l.height/3,")"))}}},{key:"truncateLabels",value:function(t,e,n,i,r,o){var a=new b(this.ctx),s=a.getTextRects(t,e).width+this.w.config.stroke.width+5>r-n&&o-i>r-n?o-i:r-n,l=a.getTextBasedOnMaxWidth({text:t,maxWidth:s,fontSize:e});return t.length!==l.length&&s/e<5?"":l}},{key:"animateTreemap",value:function(t,e,n,i){var r=new v(this.ctx);r.animateRect(t,{x:e.x,y:e.y,width:e.width,height:e.height},{x:n.x,y:n.y,width:n.width,height:n.height},i,(function(){r.animationCompleted(t)}))}}]),t}(),zt=function(){function t(e){i(this,t),this.ctx=e,this.w=e.w,this.timeScaleArray=[],this.utc=this.w.config.xaxis.labels.datetimeUTC}return o(t,[{key:"calculateTimeScaleTicks",value:function(t,n){var i=this,r=this.w;if(r.globals.allSeriesCollapsed)return r.globals.labels=[],r.globals.timescaleLabels=[],[];var o=new S(this.ctx),a=(n-t)/864e5;this.determineInterval(a),r.globals.disableZoomIn=!1,r.globals.disableZoomOut=!1,a<.00011574074074074075?r.globals.disableZoomIn=!0:a>5e4&&(r.globals.disableZoomOut=!0);var s=o.getTimeUnitsfromTimestamp(t,n,this.utc),l=r.globals.gridWidth/a,c=l/24,u=c/60,h=u/60,d=Math.floor(24*a),p=Math.floor(1440*a),f=Math.floor(86400*a),g=Math.floor(a),m=Math.floor(a/30),v=Math.floor(a/365),y={minMillisecond:s.minMillisecond,minSecond:s.minSecond,minMinute:s.minMinute,minHour:s.minHour,minDate:s.minDate,minMonth:s.minMonth,minYear:s.minYear},b={firstVal:y,currentMillisecond:y.minMillisecond,currentSecond:y.minSecond,currentMinute:y.minMinute,currentHour:y.minHour,currentMonthDate:y.minDate,currentDate:y.minDate,currentMonth:y.minMonth,currentYear:y.minYear,daysWidthOnXAxis:l,hoursWidthOnXAxis:c,minutesWidthOnXAxis:u,secondsWidthOnXAxis:h,numberOfSeconds:f,numberOfMinutes:p,numberOfHours:d,numberOfDays:g,numberOfMonths:m,numberOfYears:v};switch(this.tickInterval){case"years":this.generateYearScale(b);break;case"months":case"half_year":this.generateMonthScale(b);break;case"months_days":case"months_fortnight":case"days":case"week_days":this.generateDayScale(b);break;case"hours":this.generateHourScale(b);break;case"minutes_fives":case"minutes":this.generateMinuteScale(b);break;case"seconds_tens":case"seconds_fives":case"seconds":this.generateSecondScale(b)}var x=this.timeScaleArray.map((function(t){var n={position:t.position,unit:t.unit,year:t.year,day:t.day?t.day:1,hour:t.hour?t.hour:0,month:t.month+1};return"month"===t.unit?e(e({},n),{},{day:1,value:t.value+1}):"day"===t.unit||"hour"===t.unit?e(e({},n),{},{value:t.value}):"minute"===t.unit?e(e({},n),{},{value:t.value,minute:t.value}):"second"===t.unit?e(e({},n),{},{value:t.value,minute:t.minute,second:t.second}):t}));return x.filter((function(t){var e=1,n=Math.ceil(r.globals.gridWidth/120),o=t.value;void 0!==r.config.xaxis.tickAmount&&(n=r.config.xaxis.tickAmount),x.length>n&&(e=Math.floor(x.length/n));var a=!1,s=!1;switch(i.tickInterval){case"years":"year"===t.unit&&(a=!0);break;case"half_year":e=7,"year"===t.unit&&(a=!0);break;case"months":e=1,"year"===t.unit&&(a=!0);break;case"months_fortnight":e=15,"year"!==t.unit&&"month"!==t.unit||(a=!0),30===o&&(s=!0);break;case"months_days":e=10,"month"===t.unit&&(a=!0),30===o&&(s=!0);break;case"week_days":e=8,"month"===t.unit&&(a=!0);break;case"days":e=1,"month"===t.unit&&(a=!0);break;case"hours":"day"===t.unit&&(a=!0);break;case"minutes_fives":case"seconds_fives":o%5!=0&&(s=!0);break;case"seconds_tens":o%10!=0&&(s=!0)}if("hours"===i.tickInterval||"minutes_fives"===i.tickInterval||"seconds_tens"===i.tickInterval||"seconds_fives"===i.tickInterval){if(!s)return!0}else if((o%e==0||a)&&!s)return!0}))}},{key:"recalcDimensionsBasedOnFormat",value:function(t,e){var n=this.w,i=this.formatDates(t),r=this.removeOverlappingTS(i);n.globals.timescaleLabels=r.slice(),new at(this.ctx).plotCoords()}},{key:"determineInterval",value:function(t){var e=24*t,n=60*e;switch(!0){case t/365>5:this.tickInterval="years";break;case t>800:this.tickInterval="half_year";break;case t>180:this.tickInterval="months";break;case t>90:this.tickInterval="months_fortnight";break;case t>60:this.tickInterval="months_days";break;case t>30:this.tickInterval="week_days";break;case t>2:this.tickInterval="days";break;case e>2.4:this.tickInterval="hours";break;case n>15:this.tickInterval="minutes_fives";break;case n>5:this.tickInterval="minutes";break;case n>1:this.tickInterval="seconds_tens";break;case 60*n>20:this.tickInterval="seconds_fives";break;default:this.tickInterval="seconds"}}},{key:"generateYearScale",value:function(t){var e=t.firstVal,n=t.currentMonth,i=t.currentYear,r=t.daysWidthOnXAxis,o=t.numberOfYears,a=e.minYear,s=0,l=new S(this.ctx),c="year";if(e.minDate>1||e.minMonth>0){var u=l.determineRemainingDaysOfYear(e.minYear,e.minMonth,e.minDate);s=(l.determineDaysOfYear(e.minYear)-u+1)*r,a=e.minYear+1,this.timeScaleArray.push({position:s,value:a,unit:c,year:a,month:m.monthMod(n+1)})}else 1===e.minDate&&0===e.minMonth&&this.timeScaleArray.push({position:s,value:a,unit:c,year:i,month:m.monthMod(n+1)});for(var h=a,d=s,p=0;p<o;p++)h++,d=l.determineDaysOfYear(h-1)*r+d,this.timeScaleArray.push({position:d,value:h,unit:c,year:h,month:1})}},{key:"generateMonthScale",value:function(t){var e=t.firstVal,n=t.currentMonthDate,i=t.currentMonth,r=t.currentYear,o=t.daysWidthOnXAxis,a=t.numberOfMonths,s=i,l=0,c=new S(this.ctx),u="month",h=0;if(e.minDate>1){l=(c.determineDaysOfMonths(i+1,e.minYear)-n+1)*o,s=m.monthMod(i+1);var d=r+h,p=m.monthMod(s),f=s;0===s&&(u="year",f=d,p=1,d+=h+=1),this.timeScaleArray.push({position:l,value:f,unit:u,year:d,month:p})}else this.timeScaleArray.push({position:l,value:s,unit:u,year:r,month:m.monthMod(i)});for(var g=s+1,v=l,y=0,b=1;y<a;y++,b++){0===(g=m.monthMod(g))?(u="year",h+=1):u="month";var x=this._getYear(r,g,h);v=c.determineDaysOfMonths(g,x)*o+v;var _=0===g?x:g;this.timeScaleArray.push({position:v,value:_,unit:u,year:x,month:0===g?1:g}),g++}}},{key:"generateDayScale",value:function(t){var e=t.firstVal,n=t.currentMonth,i=t.currentYear,r=t.hoursWidthOnXAxis,o=t.numberOfDays,a=new S(this.ctx),s="day",l=e.minDate+1,c=l,u=function(t,e,n){return t>a.determineDaysOfMonths(e+1,n)?(c=1,s="month",d=e+=1,e):e},h=(24-e.minHour)*r,d=l,p=u(c,n,i);0===e.minHour&&1===e.minDate?(h=0,d=m.monthMod(e.minMonth),s="month",c=e.minDate):1!==e.minDate&&0===e.minHour&&0===e.minMinute&&(h=0,l=e.minDate,d=l,p=u(c=l,n,i)),this.timeScaleArray.push({position:h,value:d,unit:s,year:this._getYear(i,p,0),month:m.monthMod(p),day:c});for(var f=h,g=0;g<o;g++){s="day",p=u(c+=1,p,this._getYear(i,p,0));var v=this._getYear(i,p,0);f=24*r+f;var y=1===c?m.monthMod(p):c;this.timeScaleArray.push({position:f,value:y,unit:s,year:v,month:m.monthMod(p),day:y})}}},{key:"generateHourScale",value:function(t){var e=t.firstVal,n=t.currentDate,i=t.currentMonth,r=t.currentYear,o=t.minutesWidthOnXAxis,a=t.numberOfHours,s=new S(this.ctx),l="hour",c=function(t,e){return t>s.determineDaysOfMonths(e+1,r)&&(g=1,e+=1),{month:e,date:g}},u=function(t,e){return t>s.determineDaysOfMonths(e+1,r)?e+=1:e},h=60-(e.minMinute+e.minSecond/60),d=h*o,p=e.minHour+1,f=p;60===h&&(d=0,f=p=e.minHour);var g=n;f>=24&&(f=0,g+=1,l="day");var v=c(g,i).month;v=u(g,v),this.timeScaleArray.push({position:d,value:p,unit:l,day:g,hour:f,year:r,month:m.monthMod(v)}),f++;for(var y=d,b=0;b<a;b++){l="hour",f>=24&&(f=0,l="day",v=c(g+=1,v).month,v=u(g,v));var x=this._getYear(r,v,0);y=60*o+y;var _=0===f?g:f;this.timeScaleArray.push({position:y,value:_,unit:l,hour:f,day:g,year:x,month:m.monthMod(v)}),f++}}},{key:"generateMinuteScale",value:function(t){for(var e=t.currentMillisecond,n=t.currentSecond,i=t.currentMinute,r=t.currentHour,o=t.currentDate,a=t.currentMonth,s=t.currentYear,l=t.minutesWidthOnXAxis,c=t.secondsWidthOnXAxis,u=t.numberOfMinutes,h=i+1,d=o,p=a,f=s,g=r,v=(60-n-e/1e3)*c,y=0;y<u;y++)h>=60&&(h=0,24===(g+=1)&&(g=0)),this.timeScaleArray.push({position:v,value:h,unit:"minute",hour:g,minute:h,day:d,year:this._getYear(f,p,0),month:m.monthMod(p)}),v+=l,h++}},{key:"generateSecondScale",value:function(t){for(var e=t.currentMillisecond,n=t.currentSecond,i=t.currentMinute,r=t.currentHour,o=t.currentDate,a=t.currentMonth,s=t.currentYear,l=t.secondsWidthOnXAxis,c=t.numberOfSeconds,u=n+1,h=i,d=o,p=a,f=s,g=r,v=(1e3-e)/1e3*l,y=0;y<c;y++)u>=60&&(u=0,++h>=60&&(h=0,24==++g&&(g=0))),this.timeScaleArray.push({position:v,value:u,unit:"second",hour:g,minute:h,second:u,day:d,year:this._getYear(f,p,0),month:m.monthMod(p)}),v+=l,u++}},{key:"createRawDateString",value:function(t,e){var n=t.year;return 0===t.month&&(t.month=1),n+="-"+("0"+t.month.toString()).slice(-2),"day"===t.unit?n+="day"===t.unit?"-"+("0"+e).slice(-2):"-01":n+="-"+("0"+(t.day?t.day:"1")).slice(-2),"hour"===t.unit?n+="hour"===t.unit?"T"+("0"+e).slice(-2):"T00":n+="T"+("0"+(t.hour?t.hour:"0")).slice(-2),"minute"===t.unit?n+=":"+("0"+e).slice(-2):n+=":"+(t.minute?("0"+t.minute).slice(-2):"00"),"second"===t.unit?n+=":"+("0"+e).slice(-2):n+=":00",this.utc&&(n+=".000Z"),n}},{key:"formatDates",value:function(t){var e=this,n=this.w;return t.map((function(t){var i=t.value.toString(),r=new S(e.ctx),o=e.createRawDateString(t,i),a=r.getDate(r.parseDate(o));if(e.utc||(a=r.getDate(r.parseDateWithTimezone(o))),void 0===n.config.xaxis.labels.format){var s="dd MMM",l=n.config.xaxis.labels.datetimeFormatter;"year"===t.unit&&(s=l.year),"month"===t.unit&&(s=l.month),"day"===t.unit&&(s=l.day),"hour"===t.unit&&(s=l.hour),"minute"===t.unit&&(s=l.minute),"second"===t.unit&&(s=l.second),i=r.formatDate(a,s)}else i=r.formatDate(a,n.config.xaxis.labels.format);return{dateString:o,position:t.position,value:i,unit:t.unit,year:t.year,month:t.month}}))}},{key:"removeOverlappingTS",value:function(t){var e,n=this,i=new b(this.ctx),r=!1;t.length>0&&t[0].value&&t.every((function(e){return e.value.length===t[0].value.length}))&&(r=!0,e=i.getTextRects(t[0].value).width);var o=0,a=t.map((function(a,s){if(s>0&&n.w.config.xaxis.labels.hideOverlappingLabels){var l=r?e:i.getTextRects(t[o].value).width,c=t[o].position;return a.position>c+l+10?(o=s,a):null}return a}));return a.filter((function(t){return null!==t}))}},{key:"_getYear",value:function(t,e,n){return t+Math.floor(e/12)+n}}]),t}(),Ft=function(){function t(e,n){i(this,t),this.ctx=n,this.w=n.w,this.el=e}return o(t,[{key:"setupElements",value:function(){var t=this.w.globals,e=this.w.config,n=e.chart.type;t.axisCharts=["line","area","bar","rangeBar","rangeArea","candlestick","boxPlot","scatter","bubble","radar","heatmap","treemap"].indexOf(n)>-1,t.xyCharts=["line","area","bar","rangeBar","rangeArea","candlestick","boxPlot","scatter","bubble"].indexOf(n)>-1,t.isBarHorizontal=("bar"===e.chart.type||"rangeBar"===e.chart.type||"boxPlot"===e.chart.type)&&e.plotOptions.bar.horizontal,t.chartClass=".apexcharts"+t.chartID,t.dom.baseEl=this.el,t.dom.elWrap=document.createElement("div"),b.setAttrs(t.dom.elWrap,{id:t.chartClass.substring(1),class:"apexcharts-canvas "+t.chartClass.substring(1)}),this.el.appendChild(t.dom.elWrap),t.dom.Paper=new window.SVG.Doc(t.dom.elWrap),t.dom.Paper.attr({class:"apexcharts-svg","xmlns:data":"ApexChartsNS",transform:"translate(".concat(e.chart.offsetX,", ").concat(e.chart.offsetY,")")}),t.dom.Paper.node.style.background="dark"!==e.theme.mode||e.chart.background?e.chart.background:"rgba(0, 0, 0, 0.8)",this.setSVGDimensions(),t.dom.elLegendForeign=document.createElementNS(t.SVGNS,"foreignObject"),b.setAttrs(t.dom.elLegendForeign,{x:0,y:0,width:t.svgWidth,height:t.svgHeight}),t.dom.elLegendWrap=document.createElement("div"),t.dom.elLegendWrap.classList.add("apexcharts-legend"),t.dom.elLegendWrap.setAttribute("xmlns","http://www.w3.org/1999/xhtml"),t.dom.elLegendForeign.appendChild(t.dom.elLegendWrap),t.dom.Paper.node.appendChild(t.dom.elLegendForeign),t.dom.elGraphical=t.dom.Paper.group().attr({class:"apexcharts-inner apexcharts-graphical"}),t.dom.elDefs=t.dom.Paper.defs(),t.dom.Paper.add(t.dom.elGraphical),t.dom.elGraphical.add(t.dom.elDefs)}},{key:"plotChartType",value:function(t,e){var n=this.w,i=n.config,r=n.globals,o={series:[],i:[]},a={series:[],i:[]},s={series:[],i:[]},l={series:[],i:[]},c={series:[],i:[]},u={series:[],i:[]},h={series:[],i:[]},d={series:[],i:[]},p={series:[],seriesRangeEnd:[],i:[]},f=void 0!==i.chart.type?i.chart.type:"line",g=0;r.series.map((function(e,m){void 0!==t[m].type?"column"===t[m].type||"bar"===t[m].type?(r.series.length>1&&i.plotOptions.bar.horizontal&&console.warn("Horizontal bars are not supported in a mixed/combo chart. Please turn off `plotOptions.bar.horizontal`"),c.series.push(e),c.i.push(m),"bar"!==f&&g++,n.globals.columnSeries=c.series):"area"===t[m].type?(a.series.push(e),a.i.push(m),f!==t[m].type&&g++):"line"===t[m].type?(o.series.push(e),o.i.push(m),f!==t[m].type&&g++):"scatter"===t[m].type?(s.series.push(e),s.i.push(m)):"bubble"===t[m].type?(l.series.push(e),l.i.push(m),f!==t[m].type&&g++):"candlestick"===t[m].type?(u.series.push(e),u.i.push(m),f!==t[m].type&&g++):"boxPlot"===t[m].type?(h.series.push(e),h.i.push(m),f!==t[m].type&&g++):"rangeBar"===t[m].type?(d.series.push(e),d.i.push(m),f!==t[m].type&&g++):"rangeArea"===t[m].type?(p.series.push(r.seriesRangeStart[m]),p.seriesRangeEnd.push(r.seriesRangeEnd[m]),p.i.push(m),f!==t[m].type&&g++):console.warn("You have specified an unrecognized chart type. Available types for this property are line/area/column/bar/scatter/bubble/candlestick/boxPlot/rangeBar/rangeArea"):(o.series.push(e),o.i.push(m))})),r.comboCharts||(r.comboCharts=g>0);var m=new Pt(this.ctx,e),v=new wt(this.ctx,e);this.ctx.pie=new At(this.ctx);var y=new Tt(this.ctx);this.ctx.rangeBar=new It(this.ctx,e);var b=new Mt(this.ctx),x=[];if(r.comboCharts){if(a.series.length>0&&x.push(m.draw(a.series,"area",a.i)),c.series.length>0)if(n.config.chart.stacked){var _=new _t(this.ctx,e);x.push(_.draw(c.series,c.i))}else this.ctx.bar=new xt(this.ctx,e),x.push(this.ctx.bar.draw(c.series,c.i));if(p.series.length>0&&x.push(m.draw(p.series,"rangeArea",p.i,p.seriesRangeEnd)),o.series.length>0&&x.push(m.draw(o.series,"line",o.i)),u.series.length>0&&x.push(v.draw(u.series,"candlestick",u.i)),h.series.length>0&&x.push(v.draw(h.series,"boxPlot",h.i)),d.series.length>0&&x.push(this.ctx.rangeBar.draw(d.series,d.i)),s.series.length>0){var w=new Pt(this.ctx,e,!0);x.push(w.draw(s.series,"scatter",s.i))}if(l.series.length>0){var S=new Pt(this.ctx,e,!0);x.push(S.draw(l.series,"bubble",l.i))}}else switch(i.chart.type){case"line":x=m.draw(r.series,"line");break;case"area":x=m.draw(r.series,"area");break;case"bar":i.chart.stacked?x=new _t(this.ctx,e).draw(r.series):(this.ctx.bar=new xt(this.ctx,e),x=this.ctx.bar.draw(r.series));break;case"candlestick":x=new wt(this.ctx,e).draw(r.series,"candlestick");break;case"boxPlot":x=new wt(this.ctx,e).draw(r.series,i.chart.type);break;case"rangeBar":x=this.ctx.rangeBar.draw(r.series);break;case"rangeArea":x=m.draw(r.seriesRangeStart,"rangeArea",void 0,r.seriesRangeEnd);break;case"heatmap":x=new Ct(this.ctx,e).draw(r.series);break;case"treemap":x=new Bt(this.ctx,e).draw(r.series);break;case"pie":case"donut":case"polarArea":x=this.ctx.pie.draw(r.series);break;case"radialBar":x=y.draw(r.series);break;case"radar":x=b.draw(r.series);break;default:x=m.draw(r.series)}return x}},{key:"setSVGDimensions",value:function(){var t=this.w.globals,e=this.w.config;t.svgWidth=e.chart.width,t.svgHeight=e.chart.height;var n=m.getDimensions(this.el),i=e.chart.width.toString().split(/[0-9]+/g).pop();"%"===i?m.isNumber(n[0])&&(0===n[0].width&&(n=m.getDimensions(this.el.parentNode)),t.svgWidth=n[0]*parseInt(e.chart.width,10)/100):"px"!==i&&""!==i||(t.svgWidth=parseInt(e.chart.width,10));var r=e.chart.height.toString().split(/[0-9]+/g).pop();if("auto"!==t.svgHeight&&""!==t.svgHeight)if("%"===r){var o=m.getDimensions(this.el.parentNode);t.svgHeight=o[1]*parseInt(e.chart.height,10)/100}else t.svgHeight=parseInt(e.chart.height,10);else t.axisCharts?t.svgHeight=t.svgWidth/1.61:t.svgHeight=t.svgWidth/1.2;if(t.svgWidth<0&&(t.svgWidth=0),t.svgHeight<0&&(t.svgHeight=0),b.setAttrs(t.dom.Paper.node,{width:t.svgWidth,height:t.svgHeight}),"%"!==r){var a=e.chart.sparkline.enabled?0:t.axisCharts?e.chart.parentHeightOffset:0;t.dom.Paper.node.parentNode.parentNode.style.minHeight=t.svgHeight+a+"px"}t.dom.elWrap.style.width=t.svgWidth+"px",t.dom.elWrap.style.height=t.svgHeight+"px"}},{key:"shiftGraphPosition",value:function(){var t=this.w.globals,e=t.translateY,n={transform:"translate("+t.translateX+", "+e+")"};b.setAttrs(t.dom.elGraphical.node,n)}},{key:"resizeNonAxisCharts",value:function(){var t=this.w,e=t.globals,n=0,i=t.config.chart.sparkline.enabled?1:15;i+=t.config.grid.padding.bottom,"top"!==t.config.legend.position&&"bottom"!==t.config.legend.position||!t.config.legend.show||t.config.legend.floating||(n=new lt(this.ctx).legendHelpers.getLegendBBox().clwh+10);var r=t.globals.dom.baseEl.querySelector(".apexcharts-radialbar, .apexcharts-pie"),o=2.05*t.globals.radialSize;if(r&&!t.config.chart.sparkline.enabled&&0!==t.config.plotOptions.radialBar.startAngle){var a=m.getBoundingClientRect(r);o=a.bottom;var s=a.bottom-a.top;o=Math.max(2.05*t.globals.radialSize,s)}var l=o+e.translateY+n+i;e.dom.elLegendForeign&&e.dom.elLegendForeign.setAttribute("height",l),t.config.chart.height&&String(t.config.chart.height).indexOf("%")>0||(e.dom.elWrap.style.height=l+"px",b.setAttrs(e.dom.Paper.node,{height:l}),e.dom.Paper.node.parentNode.parentNode.style.minHeight=l+"px")}},{key:"coreCalculations",value:function(){new q(this.ctx).init()}},{key:"resetGlobals",value:function(){var t=this,e=function(){return t.w.config.series.map((function(t){return[]}))},n=new N,i=this.w.globals;n.initGlobalVars(i),i.seriesXvalues=e(),i.seriesYvalues=e()}},{key:"isMultipleY",value:function(){if(this.w.config.yaxis.constructor===Array&&this.w.config.yaxis.length>1)return this.w.globals.isMultipleYAxis=!0,!0}},{key:"xySettings",value:function(){var t=null,e=this.w;if(e.globals.axisCharts){if("back"===e.config.xaxis.crosshairs.position&&new Q(this.ctx).drawXCrosshairs(),"back"===e.config.yaxis[0].crosshairs.position&&new Q(this.ctx).drawYCrosshairs(),"datetime"===e.config.xaxis.type&&void 0===e.config.xaxis.labels.formatter){this.ctx.timeScale=new zt(this.ctx);var n=[];isFinite(e.globals.minX)&&isFinite(e.globals.maxX)&&!e.globals.isBarHorizontal?n=this.ctx.timeScale.calculateTimeScaleTicks(e.globals.minX,e.globals.maxX):e.globals.isBarHorizontal&&(n=this.ctx.timeScale.calculateTimeScaleTicks(e.globals.minY,e.globals.maxY)),this.ctx.timeScale.recalcDimensionsBasedOnFormat(n)}t=new x(this.ctx).getCalculatedRatios()}return t}},{key:"updateSourceChart",value:function(t){this.ctx.w.globals.selection=void 0,this.ctx.updateHelpers._updateOptions({chart:{selection:{xaxis:{min:t.w.globals.minX,max:t.w.globals.maxX}}}},!1,!1)}},{key:"setupBrushHandler",value:function(){var t=this,e=this.w;if(e.config.chart.brush.enabled&&"function"!=typeof e.config.chart.events.selection){var n=Array.isArray(e.config.chart.brush.targets)?e.config.chart.brush.targets:[e.config.chart.brush.target];n.forEach((function(e){var n=ApexCharts.getChartByID(e);n.w.globals.brushSource=t.ctx,"function"!=typeof n.w.config.chart.events.zoomed&&(n.w.config.chart.events.zoomed=function(){t.updateSourceChart(n)}),"function"!=typeof n.w.config.chart.events.scrolled&&(n.w.config.chart.events.scrolled=function(){t.updateSourceChart(n)})})),e.config.chart.events.selection=function(t,e){n.forEach((function(t){ApexCharts.getChartByID(t).ctx.updateHelpers._updateOptions({xaxis:{min:e.xaxis.min,max:e.xaxis.max}},!1,!1,!1,!1)}))}}}}]),t}(),Vt=function(){function t(e){i(this,t),this.ctx=e,this.w=e.w}return o(t,[{key:"_updateOptions",value:function(t){var e=this,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];return new Promise((function(s){var l=[e.ctx];o&&(l=e.ctx.getSyncedCharts()),e.ctx.w.globals.isExecCalled&&(l=[e.ctx],e.ctx.w.globals.isExecCalled=!1),l.forEach((function(o,c){var u=o.w;if(u.globals.shouldAnimate=r,i||(u.globals.resized=!0,u.globals.dataChanged=!0,r&&o.series.getPreviousPaths()),t&&"object"===n(t)&&(o.config=new P(t),t=x.extendArrayProps(o.config,t,u),o.w.globals.chartID!==e.ctx.w.globals.chartID&&delete t.series,u.config=m.extend(u.config,t),a&&(u.globals.lastXAxis=t.xaxis?m.clone(t.xaxis):[],u.globals.lastYAxis=t.yaxis?m.clone(t.yaxis):[],u.globals.initialConfig=m.extend({},u.config),u.globals.initialSeries=m.clone(u.config.series),t.series))){for(var h=0;h<u.globals.collapsedSeriesIndices.length;h++){var d=u.config.series[u.globals.collapsedSeriesIndices[h]];u.globals.collapsedSeries[h].data=u.globals.axisCharts?d.data.slice():d}for(var p=0;p<u.globals.ancillaryCollapsedSeriesIndices.length;p++){var f=u.config.series[u.globals.ancillaryCollapsedSeriesIndices[p]];u.globals.ancillaryCollapsedSeries[p].data=u.globals.axisCharts?f.data.slice():f}o.series.emptyCollapsedSeries(u.config.series)}return o.update(t).then((function(){c===l.length-1&&s(o)}))}))}))}},{key:"_updateSeries",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return new Promise((function(r){var o,a=n.w;return a.globals.shouldAnimate=e,a.globals.dataChanged=!0,e&&n.ctx.series.getPreviousPaths(),a.globals.axisCharts?(0===(o=t.map((function(t,e){return n._extendSeries(t,e)}))).length&&(o=[{data:[]}]),a.config.series=o):a.config.series=t.slice(),i&&(a.globals.initialConfig.series=m.clone(a.config.series),a.globals.initialSeries=m.clone(a.config.series)),n.ctx.update().then((function(){r(n.ctx)}))}))}},{key:"_extendSeries",value:function(t,n){var i=this.w,r=i.config.series[n];return e(e({},i.config.series[n]),{},{name:t.name?t.name:null==r?void 0:r.name,color:t.color?t.color:null==r?void 0:r.color,type:t.type?t.type:null==r?void 0:r.type,group:t.group?t.group:null==r?void 0:r.group,data:t.data?t.data:null==r?void 0:r.data,zIndex:void 0!==t.zIndex?t.zIndex:n})}},{key:"toggleDataPointSelection",value:function(t,e){var n=this.w,i=null,r=".apexcharts-series[data\\:realIndex='".concat(t,"']");return n.globals.axisCharts?i=n.globals.dom.Paper.select("".concat(r," path[j='").concat(e,"'], ").concat(r," circle[j='").concat(e,"'], ").concat(r," rect[j='").concat(e,"']")).members[0]:void 0===e&&(i=n.globals.dom.Paper.select("".concat(r," path[j='").concat(t,"']")).members[0],"pie"!==n.config.chart.type&&"polarArea"!==n.config.chart.type&&"donut"!==n.config.chart.type||this.ctx.pie.pieClicked(t)),i?(new b(this.ctx).pathMouseDown(i,null),i.node?i.node:null):(console.warn("toggleDataPointSelection: Element not found"),null)}},{key:"forceXAxisUpdate",value:function(t){var e=this.w;if(["min","max"].forEach((function(n){void 0!==t.xaxis[n]&&(e.config.xaxis[n]=t.xaxis[n],e.globals.lastXAxis[n]=t.xaxis[n])})),t.xaxis.categories&&t.xaxis.categories.length&&(e.config.xaxis.categories=t.xaxis.categories),e.config.xaxis.convertedCatToNumeric){var n=new L(t);t=n.convertCatToNumericXaxis(t,this.ctx)}return t}},{key:"forceYAxisUpdate",value:function(t){return t.chart&&t.chart.stacked&&"100%"===t.chart.stackType&&(Array.isArray(t.yaxis)?t.yaxis.forEach((function(e,n){t.yaxis[n].min=0,t.yaxis[n].max=100})):(t.yaxis.min=0,t.yaxis.max=100)),t}},{key:"revertDefaultAxisMinMax",value:function(t){var e=this,n=this.w,i=n.globals.lastXAxis,r=n.globals.lastYAxis;t&&t.xaxis&&(i=t.xaxis),t&&t.yaxis&&(r=t.yaxis),n.config.xaxis.min=i.min,n.config.xaxis.max=i.max;n.config.yaxis.map((function(t,i){n.globals.zoomed||void 0!==r[i]?function(t){void 0!==r[t]&&(n.config.yaxis[t].min=r[t].min,n.config.yaxis[t].max=r[t].max)}(i):void 0!==e.ctx.opts.yaxis[i]&&(t.min=e.ctx.opts.yaxis[i].min,t.max=e.ctx.opts.yaxis[i].max)}))}}]),t}();Nt="undefined"!=typeof window?window:void 0,Rt=function(t,e){var i=(void 0!==this?this:t).SVG=function(t){if(i.supported)return t=new i.Doc(t),i.parser.draw||i.prepare(),t};if(i.ns="http://www.w3.org/2000/svg",i.xmlns="http://www.w3.org/2000/xmlns/",i.xlink="http://www.w3.org/1999/xlink",i.svgjs="http://svgjs.dev",i.supported=!0,!i.supported)return!1;i.did=1e3,i.eid=function(t){return"Svgjs"+h(t)+i.did++},i.create=function(t){var n=e.createElementNS(this.ns,t);return n.setAttribute("id",this.eid(t)),n},i.extend=function(){var t,e;e=(t=[].slice.call(arguments)).pop();for(var n=t.length-1;n>=0;n--)if(t[n])for(var r in e)t[n].prototype[r]=e[r];i.Set&&i.Set.inherit&&i.Set.inherit()},i.invent=function(t){var e="function"==typeof t.create?t.create:function(){this.constructor.call(this,i.create(t.create))};return t.inherit&&(e.prototype=new t.inherit),t.extend&&i.extend(e,t.extend),t.construct&&i.extend(t.parent||i.Container,t.construct),e},i.adopt=function(e){return e?e.instance?e.instance:((n="svg"==e.nodeName?e.parentNode instanceof t.SVGElement?new i.Nested:new i.Doc:"linearGradient"==e.nodeName?new i.Gradient("linear"):"radialGradient"==e.nodeName?new i.Gradient("radial"):i[h(e.nodeName)]?new(i[h(e.nodeName)]):new i.Element(e)).type=e.nodeName,n.node=e,e.instance=n,n instanceof i.Doc&&n.namespace().defs(),n.setData(JSON.parse(e.getAttribute("svgjs:data"))||{}),n):null;var n},i.prepare=function(){var t=e.getElementsByTagName("body")[0],n=(t?new i.Doc(t):i.adopt(e.documentElement).nested()).size(2,0);i.parser={body:t||e.documentElement,draw:n.style("opacity:0;position:absolute;left:-100%;top:-100%;overflow:hidden").node,poly:n.polyline().node,path:n.path().node,native:i.create("svg")}},i.parser={native:i.create("svg")},e.addEventListener("DOMContentLoaded",(function(){i.parser.draw||i.prepare()}),!1),i.regex={numberAndUnit:/^([+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?)([a-z%]*)$/i,hex:/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i,rgb:/rgb\((\d+),(\d+),(\d+)\)/,reference:/#([a-z0-9\-_]+)/i,transforms:/\)\s*,?\s*/,whitespace:/\s/g,isHex:/^#[a-f0-9]{3,6}$/i,isRgb:/^rgb\(/,isCss:/[^:]+:[^;]+;?/,isBlank:/^(\s+)?$/,isNumber:/^[+-]?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,isPercent:/^-?[\d\.]+%$/,isImage:/\.(jpg|jpeg|png|gif|svg)(\?[^=]+.*)?/i,delimiter:/[\s,]+/,hyphen:/([^e])\-/gi,pathLetters:/[MLHVCSQTAZ]/gi,isPathLetter:/[MLHVCSQTAZ]/i,numbersWithDots:/((\d?\.\d+(?:e[+-]?\d+)?)((?:\.\d+(?:e[+-]?\d+)?)+))+/gi,dots:/\./g},i.utils={map:function(t,e){for(var n=t.length,i=[],r=0;r<n;r++)i.push(e(t[r]));return i},filter:function(t,e){for(var n=t.length,i=[],r=0;r<n;r++)e(t[r])&&i.push(t[r]);return i},filterSVGElements:function(e){return this.filter(e,(function(e){return e instanceof t.SVGElement}))}},i.defaults={attrs:{"fill-opacity":1,"stroke-opacity":1,"stroke-width":0,"stroke-linejoin":"miter","stroke-linecap":"butt",fill:"#000000",stroke:"#000000",opacity:1,x:0,y:0,cx:0,cy:0,width:0,height:0,r:0,rx:0,ry:0,offset:0,"stop-opacity":1,"stop-color":"#000000","font-size":16,"font-family":"Helvetica, Arial, sans-serif","text-anchor":"start"}},i.Color=function(t){var e,r;this.r=0,this.g=0,this.b=0,t&&("string"==typeof t?i.regex.isRgb.test(t)?(e=i.regex.rgb.exec(t.replace(i.regex.whitespace,"")),this.r=parseInt(e[1]),this.g=parseInt(e[2]),this.b=parseInt(e[3])):i.regex.isHex.test(t)&&(e=i.regex.hex.exec(4==(r=t).length?["#",r.substring(1,2),r.substring(1,2),r.substring(2,3),r.substring(2,3),r.substring(3,4),r.substring(3,4)].join(""):r),this.r=parseInt(e[1],16),this.g=parseInt(e[2],16),this.b=parseInt(e[3],16)):"object"===n(t)&&(this.r=t.r,this.g=t.g,this.b=t.b))},i.extend(i.Color,{toString:function(){return this.toHex()},toHex:function(){return"#"+d(this.r)+d(this.g)+d(this.b)},toRgb:function(){return"rgb("+[this.r,this.g,this.b].join()+")"},brightness:function(){return this.r/255*.3+this.g/255*.59+this.b/255*.11},morph:function(t){return this.destination=new i.Color(t),this},at:function(t){return this.destination?(t=t<0?0:t>1?1:t,new i.Color({r:~~(this.r+(this.destination.r-this.r)*t),g:~~(this.g+(this.destination.g-this.g)*t),b:~~(this.b+(this.destination.b-this.b)*t)})):this}}),i.Color.test=function(t){return t+="",i.regex.isHex.test(t)||i.regex.isRgb.test(t)},i.Color.isRgb=function(t){return t&&"number"==typeof t.r&&"number"==typeof t.g&&"number"==typeof t.b},i.Color.isColor=function(t){return i.Color.isRgb(t)||i.Color.test(t)},i.Array=function(t,e){0==(t=(t||[]).valueOf()).length&&e&&(t=e.valueOf()),this.value=this.parse(t)},i.extend(i.Array,{toString:function(){return this.value.join(" ")},valueOf:function(){return this.value},parse:function(t){return t=t.valueOf(),Array.isArray(t)?t:this.split(t)}}),i.PointArray=function(t,e){i.Array.call(this,t,e||[[0,0]])},i.PointArray.prototype=new i.Array,i.PointArray.prototype.constructor=i.PointArray;for(var r={M:function(t,e,n){return e.x=n.x=t[0],e.y=n.y=t[1],["M",e.x,e.y]},L:function(t,e){return e.x=t[0],e.y=t[1],["L",t[0],t[1]]},H:function(t,e){return e.x=t[0],["H",t[0]]},V:function(t,e){return e.y=t[0],["V",t[0]]},C:function(t,e){return e.x=t[4],e.y=t[5],["C",t[0],t[1],t[2],t[3],t[4],t[5]]},Q:function(t,e){return e.x=t[2],e.y=t[3],["Q",t[0],t[1],t[2],t[3]]},S:function(t,e){return e.x=t[2],e.y=t[3],["S",t[0],t[1],t[2],t[3]]},Z:function(t,e,n){return e.x=n.x,e.y=n.y,["Z"]}},o="mlhvqtcsaz".split(""),a=0,s=o.length;a<s;++a)r[o[a]]=function(t){return function(e,n,i){if("H"==t)e[0]=e[0]+n.x;else if("V"==t)e[0]=e[0]+n.y;else if("A"==t)e[5]=e[5]+n.x,e[6]=e[6]+n.y;else for(var o=0,a=e.length;o<a;++o)e[o]=e[o]+(o%2?n.y:n.x);if(r&&"function"==typeof r[t])return r[t](e,n,i)}}(o[a].toUpperCase());i.PathArray=function(t,e){i.Array.call(this,t,e||[["M",0,0]])},i.PathArray.prototype=new i.Array,i.PathArray.prototype.constructor=i.PathArray,i.extend(i.PathArray,{toString:function(){return function(t){for(var e=0,n=t.length,i="";e<n;e++)i+=t[e][0],null!=t[e][1]&&(i+=t[e][1],null!=t[e][2]&&(i+=" ",i+=t[e][2],null!=t[e][3]&&(i+=" ",i+=t[e][3],i+=" ",i+=t[e][4],null!=t[e][5]&&(i+=" ",i+=t[e][5],i+=" ",i+=t[e][6],null!=t[e][7]&&(i+=" ",i+=t[e][7])))));return i+" "}(this.value)},move:function(t,e){var n=this.bbox();return n.x,n.y,this},at:function(t){if(!this.destination)return this;for(var e=this.value,n=this.destination.value,r=[],o=new i.PathArray,a=0,s=e.length;a<s;a++){r[a]=[e[a][0]];for(var l=1,c=e[a].length;l<c;l++)r[a][l]=e[a][l]+(n[a][l]-e[a][l])*t;"A"===r[a][0]&&(r[a][4]=+(0!=r[a][4]),r[a][5]=+(0!=r[a][5]))}return o.value=r,o},parse:function(t){if(t instanceof i.PathArray)return t.valueOf();var e,n={M:2,L:2,H:1,V:1,C:6,S:4,Q:4,T:2,A:7,Z:0};t="string"==typeof t?t.replace(i.regex.numbersWithDots,c).replace(i.regex.pathLetters," $& ").replace(i.regex.hyphen,"$1 -").trim().split(i.regex.delimiter):t.reduce((function(t,e){return[].concat.call(t,e)}),[]);var o=[],a=new i.Point,s=new i.Point,l=0,u=t.length;do{i.regex.isPathLetter.test(t[l])?(e=t[l],++l):"M"==e?e="L":"m"==e&&(e="l"),o.push(r[e].call(null,t.slice(l,l+=n[e.toUpperCase()]).map(parseFloat),a,s))}while(u>l);return o},bbox:function(){return i.parser.draw||i.prepare(),i.parser.path.setAttribute("d",this.toString()),i.parser.path.getBBox()}}),i.Number=i.invent({create:function(t,e){this.value=0,this.unit=e||"","number"==typeof t?this.value=isNaN(t)?0:isFinite(t)?t:t<0?-34e37:34e37:"string"==typeof t?(e=t.match(i.regex.numberAndUnit))&&(this.value=parseFloat(e[1]),"%"==e[5]?this.value/=100:"s"==e[5]&&(this.value*=1e3),this.unit=e[5]):t instanceof i.Number&&(this.value=t.valueOf(),this.unit=t.unit)},extend:{toString:function(){return("%"==this.unit?~~(1e8*this.value)/1e6:"s"==this.unit?this.value/1e3:this.value)+this.unit},toJSON:function(){return this.toString()},valueOf:function(){return this.value},plus:function(t){return t=new i.Number(t),new i.Number(this+t,this.unit||t.unit)},minus:function(t){return t=new i.Number(t),new i.Number(this-t,this.unit||t.unit)},times:function(t){return t=new i.Number(t),new i.Number(this*t,this.unit||t.unit)},divide:function(t){return t=new i.Number(t),new i.Number(this/t,this.unit||t.unit)},to:function(t){var e=new i.Number(this);return"string"==typeof t&&(e.unit=t),e},morph:function(t){return this.destination=new i.Number(t),t.relative&&(this.destination.value+=this.value),this},at:function(t){return this.destination?new i.Number(this.destination).minus(this).times(t).plus(this):this}}}),i.Element=i.invent({create:function(t){this._stroke=i.defaults.attrs.stroke,this._event=null,this.dom={},(this.node=t)&&(this.type=t.nodeName,this.node.instance=this,this._stroke=t.getAttribute("stroke")||this._stroke)},extend:{x:function(t){return this.attr("x",t)},y:function(t){return this.attr("y",t)},cx:function(t){return null==t?this.x()+this.width()/2:this.x(t-this.width()/2)},cy:function(t){return null==t?this.y()+this.height()/2:this.y(t-this.height()/2)},move:function(t,e){return this.x(t).y(e)},center:function(t,e){return this.cx(t).cy(e)},width:function(t){return this.attr("width",t)},height:function(t){return this.attr("height",t)},size:function(t,e){var n=p(this,t,e);return this.width(new i.Number(n.width)).height(new i.Number(n.height))},clone:function(t){this.writeDataToDom();var e=m(this.node.cloneNode(!0));return t?t.add(e):this.after(e),e},remove:function(){return this.parent()&&this.parent().removeElement(this),this},replace:function(t){return this.after(t).remove(),t},addTo:function(t){return t.put(this)},putIn:function(t){return t.add(this)},id:function(t){return this.attr("id",t)},show:function(){return this.style("display","")},hide:function(){return this.style("display","none")},visible:function(){return"none"!=this.style("display")},toString:function(){return this.attr("id")},classes:function(){var t=this.attr("class");return null==t?[]:t.trim().split(i.regex.delimiter)},hasClass:function(t){return-1!=this.classes().indexOf(t)},addClass:function(t){if(!this.hasClass(t)){var e=this.classes();e.push(t),this.attr("class",e.join(" "))}return this},removeClass:function(t){return this.hasClass(t)&&this.attr("class",this.classes().filter((function(e){return e!=t})).join(" ")),this},toggleClass:function(t){return this.hasClass(t)?this.removeClass(t):this.addClass(t)},reference:function(t){return i.get(this.attr(t))},parent:function(e){var n=this;if(!n.node.parentNode)return null;if(n=i.adopt(n.node.parentNode),!e)return n;for(;n&&n.node instanceof t.SVGElement;){if("string"==typeof e?n.matches(e):n instanceof e)return n;if(!n.node.parentNode||"#document"==n.node.parentNode.nodeName)return null;n=i.adopt(n.node.parentNode)}},doc:function(){return this instanceof i.Doc?this:this.parent(i.Doc)},parents:function(t){var e=[],n=this;do{if(!(n=n.parent(t))||!n.node)break;e.push(n)}while(n.parent);return e},matches:function(t){return function(t,e){return(t.matches||t.matchesSelector||t.msMatchesSelector||t.mozMatchesSelector||t.webkitMatchesSelector||t.oMatchesSelector).call(t,e)}(this.node,t)},native:function(){return this.node},svg:function(t){var n=e.createElement("svg");if(!(t&&this instanceof i.Parent))return n.appendChild(t=e.createElement("svg")),this.writeDataToDom(),t.appendChild(this.node.cloneNode(!0)),n.innerHTML.replace(/^<svg>/,"").replace(/<\/svg>$/,"");n.innerHTML="<svg>"+t.replace(/\n/,"").replace(/<([\w:-]+)([^<]+?)\/>/g,"<$1$2></$1>")+"</svg>";for(var r=0,o=n.firstChild.childNodes.length;r<o;r++)this.node.appendChild(n.firstChild.firstChild);return this},writeDataToDom:function(){return(this.each||this.lines)&&(this.each?this:this.lines()).each((function(){this.writeDataToDom()})),this.node.removeAttribute("svgjs:data"),Object.keys(this.dom).length&&this.node.setAttribute("svgjs:data",JSON.stringify(this.dom)),this},setData:function(t){return this.dom=t,this},is:function(t){return function(t,e){return t instanceof e}(this,t)}}}),i.easing={"-":function(t){return t},"<>":function(t){return-Math.cos(t*Math.PI)/2+.5},">":function(t){return Math.sin(t*Math.PI/2)},"<":function(t){return 1-Math.cos(t*Math.PI/2)}},i.morph=function(t){return function(e,n){return new i.MorphObj(e,n).at(t)}},i.Situation=i.invent({create:function(t){this.init=!1,this.reversed=!1,this.reversing=!1,this.duration=new i.Number(t.duration).valueOf(),this.delay=new i.Number(t.delay).valueOf(),this.start=+new Date+this.delay,this.finish=this.start+this.duration,this.ease=t.ease,this.loop=0,this.loops=!1,this.animations={},this.attrs={},this.styles={},this.transforms=[],this.once={}}}),i.FX=i.invent({create:function(t){this._target=t,this.situations=[],this.active=!1,this.situation=null,this.paused=!1,this.lastPos=0,this.pos=0,this.absPos=0,this._speed=1},extend:{animate:function(t,e,r){"object"===n(t)&&(e=t.ease,r=t.delay,t=t.duration);var o=new i.Situation({duration:t||1e3,delay:r||0,ease:i.easing[e||"-"]||e});return this.queue(o),this},target:function(t){return t&&t instanceof i.Element?(this._target=t,this):this._target},timeToAbsPos:function(t){return(t-this.situation.start)/(this.situation.duration/this._speed)},absPosToTime:function(t){return this.situation.duration/this._speed*t+this.situation.start},startAnimFrame:function(){this.stopAnimFrame(),this.animationFrame=t.requestAnimationFrame(function(){this.step()}.bind(this))},stopAnimFrame:function(){t.cancelAnimationFrame(this.animationFrame)},start:function(){return!this.active&&this.situation&&(this.active=!0,this.startCurrent()),this},startCurrent:function(){return this.situation.start=+new Date+this.situation.delay/this._speed,this.situation.finish=this.situation.start+this.situation.duration/this._speed,this.initAnimations().step()},queue:function(t){return("function"==typeof t||t instanceof i.Situation)&&this.situations.push(t),this.situation||(this.situation=this.situations.shift()),this},dequeue:function(){return this.stop(),this.situation=this.situations.shift(),this.situation&&(this.situation instanceof i.Situation?this.start():this.situation.call(this)),this},initAnimations:function(){var t,e=this.situation;if(e.init)return this;for(var n in e.animations){t=this.target()[n](),Array.isArray(t)||(t=[t]),Array.isArray(e.animations[n])||(e.animations[n]=[e.animations[n]]);for(var r=t.length;r--;)e.animations[n][r]instanceof i.Number&&(t[r]=new i.Number(t[r])),e.animations[n][r]=t[r].morph(e.animations[n][r])}for(var n in e.attrs)e.attrs[n]=new i.MorphObj(this.target().attr(n),e.attrs[n]);for(var n in e.styles)e.styles[n]=new i.MorphObj(this.target().style(n),e.styles[n]);return e.initialTransformation=this.target().matrixify(),e.init=!0,this},clearQueue:function(){return this.situations=[],this},clearCurrent:function(){return this.situation=null,this},stop:function(t,e){var n=this.active;return this.active=!1,e&&this.clearQueue(),t&&this.situation&&(!n&&this.startCurrent(),this.atEnd()),this.stopAnimFrame(),this.clearCurrent()},after:function(t){var e=this.last();return this.target().on("finished.fx",(function n(i){i.detail.situation==e&&(t.call(this,e),this.off("finished.fx",n))})),this._callStart()},during:function(t){var e=this.last(),n=function(n){n.detail.situation==e&&t.call(this,n.detail.pos,i.morph(n.detail.pos),n.detail.eased,e)};return this.target().off("during.fx",n).on("during.fx",n),this.after((function(){this.off("during.fx",n)})),this._callStart()},afterAll:function(t){var e=function e(n){t.call(this),this.off("allfinished.fx",e)};return this.target().off("allfinished.fx",e).on("allfinished.fx",e),this._callStart()},last:function(){return this.situations.length?this.situations[this.situations.length-1]:this.situation},add:function(t,e,n){return this.last()[n||"animations"][t]=e,this._callStart()},step:function(t){var e,n,i;t||(this.absPos=this.timeToAbsPos(+new Date)),!1!==this.situation.loops?(e=Math.max(this.absPos,0),n=Math.floor(e),!0===this.situation.loops||n<this.situation.loops?(this.pos=e-n,i=this.situation.loop,this.situation.loop=n):(this.absPos=this.situation.loops,this.pos=1,i=this.situation.loop-1,this.situation.loop=this.situation.loops),this.situation.reversing&&(this.situation.reversed=this.situation.reversed!=Boolean((this.situation.loop-i)%2))):(this.absPos=Math.min(this.absPos,1),this.pos=this.absPos),this.pos<0&&(this.pos=0),this.situation.reversed&&(this.pos=1-this.pos);var r=this.situation.ease(this.pos);for(var o in this.situation.once)o>this.lastPos&&o<=r&&(this.situation.once[o].call(this.target(),this.pos,r),delete this.situation.once[o]);return this.active&&this.target().fire("during",{pos:this.pos,eased:r,fx:this,situation:this.situation}),this.situation?(this.eachAt(),1==this.pos&&!this.situation.reversed||this.situation.reversed&&0==this.pos?(this.stopAnimFrame(),this.target().fire("finished",{fx:this,situation:this.situation}),this.situations.length||(this.target().fire("allfinished"),this.situations.length||(this.target().off(".fx"),this.active=!1)),this.active?this.dequeue():this.clearCurrent()):!this.paused&&this.active&&this.startAnimFrame(),this.lastPos=r,this):this},eachAt:function(){var t,e=this,n=this.target(),r=this.situation;for(var o in r.animations)t=[].concat(r.animations[o]).map((function(t){return"string"!=typeof t&&t.at?t.at(r.ease(e.pos),e.pos):t})),n[o].apply(n,t);for(var o in r.attrs)t=[o].concat(r.attrs[o]).map((function(t){return"string"!=typeof t&&t.at?t.at(r.ease(e.pos),e.pos):t})),n.attr.apply(n,t);for(var o in r.styles)t=[o].concat(r.styles[o]).map((function(t){return"string"!=typeof t&&t.at?t.at(r.ease(e.pos),e.pos):t})),n.style.apply(n,t);if(r.transforms.length){t=r.initialTransformation,o=0;for(var a=r.transforms.length;o<a;o++){var s=r.transforms[o];s instanceof i.Matrix?t=s.relative?t.multiply((new i.Matrix).morph(s).at(r.ease(this.pos))):t.morph(s).at(r.ease(this.pos)):(s.relative||s.undo(t.extract()),t=t.multiply(s.at(r.ease(this.pos))))}n.matrix(t)}return this},once:function(t,e,n){var i=this.last();return n||(t=i.ease(t)),i.once[t]=e,this},_callStart:function(){return setTimeout(function(){this.start()}.bind(this),0),this}},parent:i.Element,construct:{animate:function(t,e,n){return(this.fx||(this.fx=new i.FX(this))).animate(t,e,n)},delay:function(t){return(this.fx||(this.fx=new i.FX(this))).delay(t)},stop:function(t,e){return this.fx&&this.fx.stop(t,e),this},finish:function(){return this.fx&&this.fx.finish(),this}}}),i.MorphObj=i.invent({create:function(t,e){return i.Color.isColor(e)?new i.Color(t).morph(e):i.regex.delimiter.test(t)?i.regex.pathLetters.test(t)?new i.PathArray(t).morph(e):new i.Array(t).morph(e):i.regex.numberAndUnit.test(e)?new i.Number(t).morph(e):(this.value=t,void(this.destination=e))},extend:{at:function(t,e){return e<1?this.value:this.destination},valueOf:function(){return this.value}}}),i.extend(i.FX,{attr:function(t,e,i){if("object"===n(t))for(var r in t)this.attr(r,t[r]);else this.add(t,e,"attrs");return this},plot:function(t,e,n,i){return 4==arguments.length?this.plot([t,e,n,i]):this.add("plot",new(this.target().morphArray)(t))}}),i.Box=i.invent({create:function(t,e,r,o){if(!("object"!==n(t)||t instanceof i.Element))return i.Box.call(this,null!=t.left?t.left:t.x,null!=t.top?t.top:t.y,t.width,t.height);var a;4==arguments.length&&(this.x=t,this.y=e,this.width=r,this.height=o),null==(a=this).x&&(a.x=0,a.y=0,a.width=0,a.height=0),a.w=a.width,a.h=a.height,a.x2=a.x+a.width,a.y2=a.y+a.height,a.cx=a.x+a.width/2,a.cy=a.y+a.height/2}}),i.BBox=i.invent({create:function(t){if(i.Box.apply(this,[].slice.call(arguments)),t instanceof i.Element){var n;try{if(!e.documentElement.contains){for(var r=t.node;r.parentNode;)r=r.parentNode;if(r!=e)throw new Error("Element not in the dom")}n=t.node.getBBox()}catch(e){if(t instanceof i.Shape){i.parser.draw||i.prepare();var o=t.clone(i.parser.draw.instance).show();o&&o.node&&"function"==typeof o.node.getBBox&&(n=o.node.getBBox()),o&&"function"==typeof o.remove&&o.remove()}else n={x:t.node.clientLeft,y:t.node.clientTop,width:t.node.clientWidth,height:t.node.clientHeight}}i.Box.call(this,n)}},inherit:i.Box,parent:i.Element,construct:{bbox:function(){return new i.BBox(this)}}}),i.BBox.prototype.constructor=i.BBox,i.Matrix=i.invent({create:function(t){var e=g([1,0,0,1,0,0]);t=null===t?e:t instanceof i.Element?t.matrixify():"string"==typeof t?g(t.split(i.regex.delimiter).map(parseFloat)):6==arguments.length?g([].slice.call(arguments)):Array.isArray(t)?g(t):t&&"object"===n(t)?t:e;for(var r=y.length-1;r>=0;--r)this[y[r]]=null!=t[y[r]]?t[y[r]]:e[y[r]]},extend:{extract:function(){var t=f(this,0,1);f(this,1,0);var e=180/Math.PI*Math.atan2(t.y,t.x)-90;return{x:this.e,y:this.f,transformedX:(this.e*Math.cos(e*Math.PI/180)+this.f*Math.sin(e*Math.PI/180))/Math.sqrt(this.a*this.a+this.b*this.b),transformedY:(this.f*Math.cos(e*Math.PI/180)+this.e*Math.sin(-e*Math.PI/180))/Math.sqrt(this.c*this.c+this.d*this.d),rotation:e,a:this.a,b:this.b,c:this.c,d:this.d,e:this.e,f:this.f,matrix:new i.Matrix(this)}},clone:function(){return new i.Matrix(this)},morph:function(t){return this.destination=new i.Matrix(t),this},multiply:function(t){return new i.Matrix(this.native().multiply(function(t){return t instanceof i.Matrix||(t=new i.Matrix(t)),t}(t).native()))},inverse:function(){return new i.Matrix(this.native().inverse())},translate:function(t,e){return new i.Matrix(this.native().translate(t||0,e||0))},native:function(){for(var t=i.parser.native.createSVGMatrix(),e=y.length-1;e>=0;e--)t[y[e]]=this[y[e]];return t},toString:function(){return"matrix("+v(this.a)+","+v(this.b)+","+v(this.c)+","+v(this.d)+","+v(this.e)+","+v(this.f)+")"}},parent:i.Element,construct:{ctm:function(){return new i.Matrix(this.node.getCTM())},screenCTM:function(){if(this instanceof i.Nested){var t=this.rect(1,1),e=t.node.getScreenCTM();return t.remove(),new i.Matrix(e)}return new i.Matrix(this.node.getScreenCTM())}}}),i.Point=i.invent({create:function(t,e){var i;i=Array.isArray(t)?{x:t[0],y:t[1]}:"object"===n(t)?{x:t.x,y:t.y}:null!=t?{x:t,y:null!=e?e:t}:{x:0,y:0},this.x=i.x,this.y=i.y},extend:{clone:function(){return new i.Point(this)},morph:function(t,e){return this.destination=new i.Point(t,e),this}}}),i.extend(i.Element,{point:function(t,e){return new i.Point(t,e).transform(this.screenCTM().inverse())}}),i.extend(i.Element,{attr:function(t,e,r){if(null==t){for(t={},r=(e=this.node.attributes).length-1;r>=0;r--)t[e[r].nodeName]=i.regex.isNumber.test(e[r].nodeValue)?parseFloat(e[r].nodeValue):e[r].nodeValue;return t}if("object"===n(t))for(var o in t)this.attr(o,t[o]);else if(null===e)this.node.removeAttribute(t);else{if(null==e)return null==(e=this.node.getAttribute(t))?i.defaults.attrs[t]:i.regex.isNumber.test(e)?parseFloat(e):e;"stroke-width"==t?this.attr("stroke",parseFloat(e)>0?this._stroke:null):"stroke"==t&&(this._stroke=e),"fill"!=t&&"stroke"!=t||(i.regex.isImage.test(e)&&(e=this.doc().defs().image(e,0,0)),e instanceof i.Image&&(e=this.doc().defs().pattern(0,0,(function(){this.add(e)})))),"number"==typeof e?e=new i.Number(e):i.Color.isColor(e)?e=new i.Color(e):Array.isArray(e)&&(e=new i.Array(e)),"leading"==t?this.leading&&this.leading(e):"string"==typeof r?this.node.setAttributeNS(r,t,e.toString()):this.node.setAttribute(t,e.toString()),!this.rebuild||"font-size"!=t&&"x"!=t||this.rebuild(t,e)}return this}}),i.extend(i.Element,{transform:function(t,e){var r;return"object"!==n(t)?(r=new i.Matrix(this).extract(),"string"==typeof t?r[t]:r):(r=new i.Matrix(this),e=!!e||!!t.relative,null!=t.a&&(r=e?r.multiply(new i.Matrix(t)):new i.Matrix(t)),this.attr("transform",r))}}),i.extend(i.Element,{untransform:function(){return this.attr("transform",null)},matrixify:function(){return(this.attr("transform")||"").split(i.regex.transforms).slice(0,-1).map((function(t){var e=t.trim().split("(");return[e[0],e[1].split(i.regex.delimiter).map((function(t){return parseFloat(t)}))]})).reduce((function(t,e){return"matrix"==e[0]?t.multiply(g(e[1])):t[e[0]].apply(t,e[1])}),new i.Matrix)},toParent:function(t){if(this==t)return this;var e=this.screenCTM(),n=t.screenCTM().inverse();return this.addTo(t).untransform().transform(n.multiply(e)),this},toDoc:function(){return this.toParent(this.doc())}}),i.Transformation=i.invent({create:function(t,e){if(arguments.length>1&&"boolean"!=typeof e)return this.constructor.call(this,[].slice.call(arguments));if(Array.isArray(t))for(var i=0,r=this.arguments.length;i<r;++i)this[this.arguments[i]]=t[i];else if(t&&"object"===n(t))for(i=0,r=this.arguments.length;i<r;++i)this[this.arguments[i]]=t[this.arguments[i]];this.inversed=!1,!0===e&&(this.inversed=!0)}}),i.Translate=i.invent({parent:i.Matrix,inherit:i.Transformation,create:function(t,e){this.constructor.apply(this,[].slice.call(arguments))},extend:{arguments:["transformedX","transformedY"],method:"translate"}}),i.extend(i.Element,{style:function(t,e){if(0==arguments.length)return this.node.style.cssText||"";if(arguments.length<2)if("object"===n(t))for(var r in t)this.style(r,t[r]);else{if(!i.regex.isCss.test(t))return this.node.style[u(t)];for(t=t.split(/\s*;\s*/).filter((function(t){return!!t})).map((function(t){return t.split(/\s*:\s*/)}));e=t.pop();)this.style(e[0],e[1])}else this.node.style[u(t)]=null===e||i.regex.isBlank.test(e)?"":e;return this}}),i.Parent=i.invent({create:function(t){this.constructor.call(this,t)},inherit:i.Element,extend:{children:function(){return i.utils.map(i.utils.filterSVGElements(this.node.childNodes),(function(t){return i.adopt(t)}))},add:function(t,e){return null==e?this.node.appendChild(t.node):t.node!=this.node.childNodes[e]&&this.node.insertBefore(t.node,this.node.childNodes[e]),this},put:function(t,e){return this.add(t,e),t},has:function(t){return this.index(t)>=0},index:function(t){return[].slice.call(this.node.childNodes).indexOf(t.node)},get:function(t){return i.adopt(this.node.childNodes[t])},first:function(){return this.get(0)},last:function(){return this.get(this.node.childNodes.length-1)},each:function(t,e){for(var n=this.children(),r=0,o=n.length;r<o;r++)n[r]instanceof i.Element&&t.apply(n[r],[r,n]),e&&n[r]instanceof i.Container&&n[r].each(t,e);return this},removeElement:function(t){return this.node.removeChild(t.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,this},defs:function(){return this.doc().defs()}}}),i.extend(i.Parent,{ungroup:function(t,e){return 0===e||this instanceof i.Defs||this.node==i.parser.draw||(t=t||(this instanceof i.Doc?this:this.parent(i.Parent)),e=e||1/0,this.each((function(){return this instanceof i.Defs?this:this instanceof i.Parent?this.ungroup(t,e-1):this.toParent(t)})),this.node.firstChild||this.remove()),this},flatten:function(t,e){return this.ungroup(t,e)}}),i.Container=i.invent({create:function(t){this.constructor.call(this,t)},inherit:i.Parent}),i.ViewBox=i.invent({parent:i.Container,construct:{}}),["click","dblclick","mousedown","mouseup","mouseover","mouseout","mousemove","touchstart","touchmove","touchleave","touchend","touchcancel"].forEach((function(t){i.Element.prototype[t]=function(e){return i.on(this.node,t,e),this}})),i.listeners=[],i.handlerMap=[],i.listenerId=0,i.on=function(t,e,n,r,o){var a=n.bind(r||t.instance||t),s=(i.handlerMap.indexOf(t)+1||i.handlerMap.push(t))-1,l=e.split(".")[0],c=e.split(".")[1]||"*";i.listeners[s]=i.listeners[s]||{},i.listeners[s][l]=i.listeners[s][l]||{},i.listeners[s][l][c]=i.listeners[s][l][c]||{},n._svgjsListenerId||(n._svgjsListenerId=++i.listenerId),i.listeners[s][l][c][n._svgjsListenerId]=a,t.addEventListener(l,a,o||{passive:!1})},i.off=function(t,e,n){var r=i.handlerMap.indexOf(t),o=e&&e.split(".")[0],a=e&&e.split(".")[1],s="";if(-1!=r)if(n){if("function"==typeof n&&(n=n._svgjsListenerId),!n)return;i.listeners[r][o]&&i.listeners[r][o][a||"*"]&&(t.removeEventListener(o,i.listeners[r][o][a||"*"][n],!1),delete i.listeners[r][o][a||"*"][n])}else if(a&&o){if(i.listeners[r][o]&&i.listeners[r][o][a]){for(var l in i.listeners[r][o][a])i.off(t,[o,a].join("."),l);delete i.listeners[r][o][a]}}else if(a)for(var c in i.listeners[r])for(var s in i.listeners[r][c])a===s&&i.off(t,[c,a].join("."));else if(o){if(i.listeners[r][o]){for(var s in i.listeners[r][o])i.off(t,[o,s].join("."));delete i.listeners[r][o]}}else{for(var c in i.listeners[r])i.off(t,c);delete i.listeners[r],delete i.handlerMap[r]}},i.extend(i.Element,{on:function(t,e,n,r){return i.on(this.node,t,e,n,r),this},off:function(t,e){return i.off(this.node,t,e),this},fire:function(e,n){return e instanceof t.Event?this.node.dispatchEvent(e):this.node.dispatchEvent(e=new i.CustomEvent(e,{detail:n,cancelable:!0})),this._event=e,this},event:function(){return this._event}}),i.Defs=i.invent({create:"defs",inherit:i.Container}),i.G=i.invent({create:"g",inherit:i.Container,extend:{x:function(t){return null==t?this.transform("x"):this.transform({x:t-this.x()},!0)}},construct:{group:function(){return this.put(new i.G)}}}),i.Doc=i.invent({create:function(t){t&&("svg"==(t="string"==typeof t?e.getElementById(t):t).nodeName?this.constructor.call(this,t):(this.constructor.call(this,i.create("svg")),t.appendChild(this.node),this.size("100%","100%")),this.namespace().defs())},inherit:i.Container,extend:{namespace:function(){return this.attr({xmlns:i.ns,version:"1.1"}).attr("xmlns:xlink",i.xlink,i.xmlns).attr("xmlns:svgjs",i.svgjs,i.xmlns)},defs:function(){var t;return this._defs||((t=this.node.getElementsByTagName("defs")[0])?this._defs=i.adopt(t):this._defs=new i.Defs,this.node.appendChild(this._defs.node)),this._defs},parent:function(){return this.node.parentNode&&"#document"!=this.node.parentNode.nodeName?this.node.parentNode:null},remove:function(){return this.parent()&&this.parent().removeChild(this.node),this},clear:function(){for(;this.node.hasChildNodes();)this.node.removeChild(this.node.lastChild);return delete this._defs,i.parser.draw&&!i.parser.draw.parentNode&&this.node.appendChild(i.parser.draw),this},clone:function(t){this.writeDataToDom();var e=this.node,n=m(e.cloneNode(!0));return t?(t.node||t).appendChild(n.node):e.parentNode.insertBefore(n.node,e.nextSibling),n}}}),i.extend(i.Element,{}),i.Gradient=i.invent({create:function(t){this.constructor.call(this,i.create(t+"Gradient")),this.type=t},inherit:i.Container,extend:{at:function(t,e,n){return this.put(new i.Stop).update(t,e,n)},update:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this},fill:function(){return"url(#"+this.id()+")"},toString:function(){return this.fill()},attr:function(t,e,n){return"transform"==t&&(t="gradientTransform"),i.Container.prototype.attr.call(this,t,e,n)}},construct:{gradient:function(t,e){return this.defs().gradient(t,e)}}}),i.extend(i.Gradient,i.FX,{from:function(t,e){return"radial"==(this._target||this).type?this.attr({fx:new i.Number(t),fy:new i.Number(e)}):this.attr({x1:new i.Number(t),y1:new i.Number(e)})},to:function(t,e){return"radial"==(this._target||this).type?this.attr({cx:new i.Number(t),cy:new i.Number(e)}):this.attr({x2:new i.Number(t),y2:new i.Number(e)})}}),i.extend(i.Defs,{gradient:function(t,e){return this.put(new i.Gradient(t)).update(e)}}),i.Stop=i.invent({create:"stop",inherit:i.Element,extend:{update:function(t){return("number"==typeof t||t instanceof i.Number)&&(t={offset:arguments[0],color:arguments[1],opacity:arguments[2]}),null!=t.opacity&&this.attr("stop-opacity",t.opacity),null!=t.color&&this.attr("stop-color",t.color),null!=t.offset&&this.attr("offset",new i.Number(t.offset)),this}}}),i.Pattern=i.invent({create:"pattern",inherit:i.Container,extend:{fill:function(){return"url(#"+this.id()+")"},update:function(t){return this.clear(),"function"==typeof t&&t.call(this,this),this},toString:function(){return this.fill()},attr:function(t,e,n){return"transform"==t&&(t="patternTransform"),i.Container.prototype.attr.call(this,t,e,n)}},construct:{pattern:function(t,e,n){return this.defs().pattern(t,e,n)}}}),i.extend(i.Defs,{pattern:function(t,e,n){return this.put(new i.Pattern).update(n).attr({x:0,y:0,width:t,height:e,patternUnits:"userSpaceOnUse"})}}),i.Shape=i.invent({create:function(t){this.constructor.call(this,t)},inherit:i.Element}),i.Symbol=i.invent({create:"symbol",inherit:i.Container,construct:{symbol:function(){return this.put(new i.Symbol)}}}),i.Use=i.invent({create:"use",inherit:i.Shape,extend:{element:function(t,e){return this.attr("href",(e||"")+"#"+t,i.xlink)}},construct:{use:function(t,e){return this.put(new i.Use).element(t,e)}}}),i.Rect=i.invent({create:"rect",inherit:i.Shape,construct:{rect:function(t,e){return this.put(new i.Rect).size(t,e)}}}),i.Circle=i.invent({create:"circle",inherit:i.Shape,construct:{circle:function(t){return this.put(new i.Circle).rx(new i.Number(t).divide(2)).move(0,0)}}}),i.extend(i.Circle,i.FX,{rx:function(t){return this.attr("r",t)},ry:function(t){return this.rx(t)}}),i.Ellipse=i.invent({create:"ellipse",inherit:i.Shape,construct:{ellipse:function(t,e){return this.put(new i.Ellipse).size(t,e).move(0,0)}}}),i.extend(i.Ellipse,i.Rect,i.FX,{rx:function(t){return this.attr("rx",t)},ry:function(t){return this.attr("ry",t)}}),i.extend(i.Circle,i.Ellipse,{x:function(t){return null==t?this.cx()-this.rx():this.cx(t+this.rx())},y:function(t){return null==t?this.cy()-this.ry():this.cy(t+this.ry())},cx:function(t){return null==t?this.attr("cx"):this.attr("cx",t)},cy:function(t){return null==t?this.attr("cy"):this.attr("cy",t)},width:function(t){return null==t?2*this.rx():this.rx(new i.Number(t).divide(2))},height:function(t){return null==t?2*this.ry():this.ry(new i.Number(t).divide(2))},size:function(t,e){var n=p(this,t,e);return this.rx(new i.Number(n.width).divide(2)).ry(new i.Number(n.height).divide(2))}}),i.Line=i.invent({create:"line",inherit:i.Shape,extend:{array:function(){return new i.PointArray([[this.attr("x1"),this.attr("y1")],[this.attr("x2"),this.attr("y2")]])},plot:function(t,e,n,r){return null==t?this.array():(t=void 0!==e?{x1:t,y1:e,x2:n,y2:r}:new i.PointArray(t).toLine(),this.attr(t))},move:function(t,e){return this.attr(this.array().move(t,e).toLine())},size:function(t,e){var n=p(this,t,e);return this.attr(this.array().size(n.width,n.height).toLine())}},construct:{line:function(t,e,n,r){return i.Line.prototype.plot.apply(this.put(new i.Line),null!=t?[t,e,n,r]:[0,0,0,0])}}}),i.Polyline=i.invent({create:"polyline",inherit:i.Shape,construct:{polyline:function(t){return this.put(new i.Polyline).plot(t||new i.PointArray)}}}),i.Polygon=i.invent({create:"polygon",inherit:i.Shape,construct:{polygon:function(t){return this.put(new i.Polygon).plot(t||new i.PointArray)}}}),i.extend(i.Polyline,i.Polygon,{array:function(){return this._array||(this._array=new i.PointArray(this.attr("points")))},plot:function(t){return null==t?this.array():this.clear().attr("points","string"==typeof t?t:this._array=new i.PointArray(t))},clear:function(){return delete this._array,this},move:function(t,e){return this.attr("points",this.array().move(t,e))},size:function(t,e){var n=p(this,t,e);return this.attr("points",this.array().size(n.width,n.height))}}),i.extend(i.Line,i.Polyline,i.Polygon,{morphArray:i.PointArray,x:function(t){return null==t?this.bbox().x:this.move(t,this.bbox().y)},y:function(t){return null==t?this.bbox().y:this.move(this.bbox().x,t)},width:function(t){var e=this.bbox();return null==t?e.width:this.size(t,e.height)},height:function(t){var e=this.bbox();return null==t?e.height:this.size(e.width,t)}}),i.Path=i.invent({create:"path",inherit:i.Shape,extend:{morphArray:i.PathArray,array:function(){return this._array||(this._array=new i.PathArray(this.attr("d")))},plot:function(t){return null==t?this.array():this.clear().attr("d","string"==typeof t?t:this._array=new i.PathArray(t))},clear:function(){return delete this._array,this}},construct:{path:function(t){return this.put(new i.Path).plot(t||new i.PathArray)}}}),i.Image=i.invent({create:"image",inherit:i.Shape,extend:{load:function(e){if(!e)return this;var n=this,r=new t.Image;return i.on(r,"load",(function(){i.off(r);var t=n.parent(i.Pattern);null!==t&&(0==n.width()&&0==n.height()&&n.size(r.width,r.height),t&&0==t.width()&&0==t.height()&&t.size(n.width(),n.height()),"function"==typeof n._loaded&&n._loaded.call(n,{width:r.width,height:r.height,ratio:r.width/r.height,url:e}))})),i.on(r,"error",(function(t){i.off(r),"function"==typeof n._error&&n._error.call(n,t)})),this.attr("href",r.src=this.src=e,i.xlink)},loaded:function(t){return this._loaded=t,this},error:function(t){return this._error=t,this}},construct:{image:function(t,e,n){return this.put(new i.Image).load(t).size(e||0,n||e||0)}}}),i.Text=i.invent({create:function(){this.constructor.call(this,i.create("text")),this.dom.leading=new i.Number(1.3),this._rebuild=!0,this._build=!1,this.attr("font-family",i.defaults.attrs["font-family"])},inherit:i.Shape,extend:{x:function(t){return null==t?this.attr("x"):this.attr("x",t)},text:function(t){if(void 0===t){t="";for(var e=this.node.childNodes,n=0,r=e.length;n<r;++n)0!=n&&3!=e[n].nodeType&&1==i.adopt(e[n]).dom.newLined&&(t+="\n"),t+=e[n].textContent;return t}if(this.clear().build(!0),"function"==typeof t)t.call(this,this);else{n=0;for(var o=(t=t.split("\n")).length;n<o;n++)this.tspan(t[n]).newLine()}return this.build(!1).rebuild()},size:function(t){return this.attr("font-size",t).rebuild()},leading:function(t){return null==t?this.dom.leading:(this.dom.leading=new i.Number(t),this.rebuild())},lines:function(){var t=(this.textPath&&this.textPath()||this).node,e=i.utils.map(i.utils.filterSVGElements(t.childNodes),(function(t){return i.adopt(t)}));return new i.Set(e)},rebuild:function(t){if("boolean"==typeof t&&(this._rebuild=t),this._rebuild){var e=this,n=0,r=this.dom.leading*new i.Number(this.attr("font-size"));this.lines().each((function(){this.dom.newLined&&(e.textPath()||this.attr("x",e.attr("x")),"\n"==this.text()?n+=r:(this.attr("dy",r+n),n=0))})),this.fire("rebuild")}return this},build:function(t){return this._build=!!t,this},setData:function(t){return this.dom=t,this.dom.leading=new i.Number(t.leading||1.3),this}},construct:{text:function(t){return this.put(new i.Text).text(t)},plain:function(t){return this.put(new i.Text).plain(t)}}}),i.Tspan=i.invent({create:"tspan",inherit:i.Shape,extend:{text:function(t){return null==t?this.node.textContent+(this.dom.newLined?"\n":""):("function"==typeof t?t.call(this,this):this.plain(t),this)},dx:function(t){return this.attr("dx",t)},dy:function(t){return this.attr("dy",t)},newLine:function(){var t=this.parent(i.Text);return this.dom.newLined=!0,this.dy(t.dom.leading*t.attr("font-size")).attr("x",t.x())}}}),i.extend(i.Text,i.Tspan,{plain:function(t){return!1===this._build&&this.clear(),this.node.appendChild(e.createTextNode(t)),this},tspan:function(t){var e=(this.textPath&&this.textPath()||this).node,n=new i.Tspan;return!1===this._build&&this.clear(),e.appendChild(n.node),n.text(t)},clear:function(){for(var t=(this.textPath&&this.textPath()||this).node;t.hasChildNodes();)t.removeChild(t.lastChild);return this},length:function(){return this.node.getComputedTextLength()}}),i.TextPath=i.invent({create:"textPath",inherit:i.Parent,parent:i.Text,construct:{morphArray:i.PathArray,array:function(){var t=this.track();return t?t.array():null},plot:function(t){var e=this.track(),n=null;return e&&(n=e.plot(t)),null==t?n:this},track:function(){var t=this.textPath();if(t)return t.reference("href")},textPath:function(){if(this.node.firstChild&&"textPath"==this.node.firstChild.nodeName)return i.adopt(this.node.firstChild)}}}),i.Nested=i.invent({create:function(){this.constructor.call(this,i.create("svg")),this.style("overflow","visible")},inherit:i.Container,construct:{nested:function(){return this.put(new i.Nested)}}});var l={stroke:["color","width","opacity","linecap","linejoin","miterlimit","dasharray","dashoffset"],fill:["color","opacity","rule"],prefix:function(t,e){return"color"==e?t:t+"-"+e}};function c(t,e,n,r){return n+r.replace(i.regex.dots," .")}function u(t){return t.toLowerCase().replace(/-(.)/g,(function(t,e){return e.toUpperCase()}))}function h(t){return t.charAt(0).toUpperCase()+t.slice(1)}function d(t){var e=t.toString(16);return 1==e.length?"0"+e:e}function p(t,e,n){if(null==e||null==n){var i=t.bbox();null==e?e=i.width/i.height*n:null==n&&(n=i.height/i.width*e)}return{width:e,height:n}}function f(t,e,n){return{x:e*t.a+n*t.c+0,y:e*t.b+n*t.d+0}}function g(t){return{a:t[0],b:t[1],c:t[2],d:t[3],e:t[4],f:t[5]}}function m(e){for(var n=e.childNodes.length-1;n>=0;n--)e.childNodes[n]instanceof t.SVGElement&&m(e.childNodes[n]);return i.adopt(e).id(i.eid(e.nodeName))}function v(t){return Math.abs(t)>1e-37?t:0}["fill","stroke"].forEach((function(t){var e={};e[t]=function(e){if(void 0===e)return this;if("string"==typeof e||i.Color.isRgb(e)||e&&"function"==typeof e.fill)this.attr(t,e);else for(var n=l[t].length-1;n>=0;n--)null!=e[l[t][n]]&&this.attr(l.prefix(t,l[t][n]),e[l[t][n]]);return this},i.extend(i.Element,i.FX,e)})),i.extend(i.Element,i.FX,{translate:function(t,e){return this.transform({x:t,y:e})},matrix:function(t){return this.attr("transform",new i.Matrix(6==arguments.length?[].slice.call(arguments):t))},opacity:function(t){return this.attr("opacity",t)},dx:function(t){return this.x(new i.Number(t).plus(this instanceof i.FX?0:this.x()),!0)},dy:function(t){return this.y(new i.Number(t).plus(this instanceof i.FX?0:this.y()),!0)}}),i.extend(i.Path,{length:function(){return this.node.getTotalLength()},pointAt:function(t){return this.node.getPointAtLength(t)}}),i.Set=i.invent({create:function(t){Array.isArray(t)?this.members=t:this.clear()},extend:{add:function(){for(var t=[].slice.call(arguments),e=0,n=t.length;e<n;e++)this.members.push(t[e]);return this},remove:function(t){var e=this.index(t);return e>-1&&this.members.splice(e,1),this},each:function(t){for(var e=0,n=this.members.length;e<n;e++)t.apply(this.members[e],[e,this.members]);return this},clear:function(){return this.members=[],this},length:function(){return this.members.length},has:function(t){return this.index(t)>=0},index:function(t){return this.members.indexOf(t)},get:function(t){return this.members[t]},first:function(){return this.get(0)},last:function(){return this.get(this.members.length-1)},valueOf:function(){return this.members}},construct:{set:function(t){return new i.Set(t)}}}),i.FX.Set=i.invent({create:function(t){this.set=t}}),i.Set.inherit=function(){var t=[];for(var e in i.Shape.prototype)"function"==typeof i.Shape.prototype[e]&&"function"!=typeof i.Set.prototype[e]&&t.push(e);for(var e in t.forEach((function(t){i.Set.prototype[t]=function(){for(var e=0,n=this.members.length;e<n;e++)this.members[e]&&"function"==typeof this.members[e][t]&&this.members[e][t].apply(this.members[e],arguments);return"animate"==t?this.fx||(this.fx=new i.FX.Set(this)):this}})),t=[],i.FX.prototype)"function"==typeof i.FX.prototype[e]&&"function"!=typeof i.FX.Set.prototype[e]&&t.push(e);t.forEach((function(t){i.FX.Set.prototype[t]=function(){for(var e=0,n=this.set.members.length;e<n;e++)this.set.members[e].fx[t].apply(this.set.members[e].fx,arguments);return this}}))},i.extend(i.Element,{}),i.extend(i.Element,{remember:function(t,e){if("object"===n(arguments[0]))for(var i in t)this.remember(i,t[i]);else{if(1==arguments.length)return this.memory()[t];this.memory()[t]=e}return this},forget:function(){if(0==arguments.length)this._memory={};else for(var t=arguments.length-1;t>=0;t--)delete this.memory()[arguments[t]];return this},memory:function(){return this._memory||(this._memory={})}}),i.get=function(t){var n=e.getElementById(function(t){var e=(t||"").toString().match(i.regex.reference);if(e)return e[1]}(t)||t);return i.adopt(n)},i.select=function(t,n){return new i.Set(i.utils.map((n||e).querySelectorAll(t),(function(t){return i.adopt(t)})))},i.extend(i.Parent,{select:function(t){return i.select(t,this.node)}});var y="abcdef".split("");if("function"!=typeof t.CustomEvent){var b=function(t,n){n=n||{bubbles:!1,cancelable:!1,detail:void 0};var i=e.createEvent("CustomEvent");return i.initCustomEvent(t,n.bubbles,n.cancelable,n.detail),i};b.prototype=t.Event.prototype,i.CustomEvent=b}else i.CustomEvent=t.CustomEvent;return i},"function"==typeof define&&define.amd?define((function(){return Rt(Nt,Nt.document)})):"object"===("undefined"==typeof exports?"undefined":n(exports))&&"undefined"!=typeof module?module.exports=Nt.document?Rt(Nt,Nt.document):function(t){return Rt(t,t.document)}:Nt.SVG=Rt(Nt,Nt.document),
/*! svg.filter.js - v2.0.2 - 2016-02-24
  * https://github.com/wout/svg.filter.js
  * Copyright (c) 2016 Wout Fierens; Licensed MIT */
function(){SVG.Filter=SVG.invent({create:"filter",inherit:SVG.Parent,extend:{source:"SourceGraphic",sourceAlpha:"SourceAlpha",background:"BackgroundImage",backgroundAlpha:"BackgroundAlpha",fill:"FillPaint",stroke:"StrokePaint",autoSetIn:!0,put:function(t,e){return this.add(t,e),!t.attr("in")&&this.autoSetIn&&t.attr("in",this.source),t.attr("result")||t.attr("result",t),t},blend:function(t,e,n){return this.put(new SVG.BlendEffect(t,e,n))},colorMatrix:function(t,e){return this.put(new SVG.ColorMatrixEffect(t,e))},convolveMatrix:function(t){return this.put(new SVG.ConvolveMatrixEffect(t))},componentTransfer:function(t){return this.put(new SVG.ComponentTransferEffect(t))},composite:function(t,e,n){return this.put(new SVG.CompositeEffect(t,e,n))},flood:function(t,e){return this.put(new SVG.FloodEffect(t,e))},offset:function(t,e){return this.put(new SVG.OffsetEffect(t,e))},image:function(t){return this.put(new SVG.ImageEffect(t))},merge:function(){var t=[void 0];for(var e in arguments)t.push(arguments[e]);return this.put(new(SVG.MergeEffect.bind.apply(SVG.MergeEffect,t)))},gaussianBlur:function(t,e){return this.put(new SVG.GaussianBlurEffect(t,e))},morphology:function(t,e){return this.put(new SVG.MorphologyEffect(t,e))},diffuseLighting:function(t,e,n){return this.put(new SVG.DiffuseLightingEffect(t,e,n))},displacementMap:function(t,e,n,i,r){return this.put(new SVG.DisplacementMapEffect(t,e,n,i,r))},specularLighting:function(t,e,n,i){return this.put(new SVG.SpecularLightingEffect(t,e,n,i))},tile:function(){return this.put(new SVG.TileEffect)},turbulence:function(t,e,n,i,r){return this.put(new SVG.TurbulenceEffect(t,e,n,i,r))},toString:function(){return"url(#"+this.attr("id")+")"}}}),SVG.extend(SVG.Defs,{filter:function(t){var e=this.put(new SVG.Filter);return"function"==typeof t&&t.call(e,e),e}}),SVG.extend(SVG.Container,{filter:function(t){return this.defs().filter(t)}}),SVG.extend(SVG.Element,SVG.G,SVG.Nested,{filter:function(t){return this.filterer=t instanceof SVG.Element?t:this.doc().filter(t),this.doc()&&this.filterer.doc()!==this.doc()&&this.doc().defs().add(this.filterer),this.attr("filter",this.filterer),this.filterer},unfilter:function(t){return this.filterer&&!0===t&&this.filterer.remove(),delete this.filterer,this.attr("filter",null)}}),SVG.Effect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Element,extend:{in:function(t){return null==t?this.parent()&&this.parent().select('[result="'+this.attr("in")+'"]').get(0)||this.attr("in"):this.attr("in",t)},result:function(t){return null==t?this.attr("result"):this.attr("result",t)},toString:function(){return this.result()}}}),SVG.ParentEffect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Parent,extend:{in:function(t){return null==t?this.parent()&&this.parent().select('[result="'+this.attr("in")+'"]').get(0)||this.attr("in"):this.attr("in",t)},result:function(t){return null==t?this.attr("result"):this.attr("result",t)},toString:function(){return this.result()}}});var t={blend:function(t,e){return this.parent()&&this.parent().blend(this,t,e)},colorMatrix:function(t,e){return this.parent()&&this.parent().colorMatrix(t,e).in(this)},convolveMatrix:function(t){return this.parent()&&this.parent().convolveMatrix(t).in(this)},componentTransfer:function(t){return this.parent()&&this.parent().componentTransfer(t).in(this)},composite:function(t,e){return this.parent()&&this.parent().composite(this,t,e)},flood:function(t,e){return this.parent()&&this.parent().flood(t,e)},offset:function(t,e){return this.parent()&&this.parent().offset(t,e).in(this)},image:function(t){return this.parent()&&this.parent().image(t)},merge:function(){return this.parent()&&this.parent().merge.apply(this.parent(),[this].concat(arguments))},gaussianBlur:function(t,e){return this.parent()&&this.parent().gaussianBlur(t,e).in(this)},morphology:function(t,e){return this.parent()&&this.parent().morphology(t,e).in(this)},diffuseLighting:function(t,e,n){return this.parent()&&this.parent().diffuseLighting(t,e,n).in(this)},displacementMap:function(t,e,n,i){return this.parent()&&this.parent().displacementMap(this,t,e,n,i)},specularLighting:function(t,e,n,i){return this.parent()&&this.parent().specularLighting(t,e,n,i).in(this)},tile:function(){return this.parent()&&this.parent().tile().in(this)},turbulence:function(t,e,n,i,r){return this.parent()&&this.parent().turbulence(t,e,n,i,r).in(this)}};SVG.extend(SVG.Effect,t),SVG.extend(SVG.ParentEffect,t),SVG.ChildEffect=SVG.invent({create:function(){this.constructor.call(this)},inherit:SVG.Element,extend:{in:function(t){this.attr("in",t)}}});var e={blend:function(t,e,n){this.attr({in:t,in2:e,mode:n||"normal"})},colorMatrix:function(t,e){"matrix"==t&&(e=r(e)),this.attr({type:t,values:void 0===e?null:e})},convolveMatrix:function(t){t=r(t),this.attr({order:Math.sqrt(t.split(" ").length),kernelMatrix:t})},composite:function(t,e,n){this.attr({in:t,in2:e,operator:n})},flood:function(t,e){this.attr("flood-color",t),null!=e&&this.attr("flood-opacity",e)},offset:function(t,e){this.attr({dx:t,dy:e})},image:function(t){this.attr("href",t,SVG.xlink)},displacementMap:function(t,e,n,i,r){this.attr({in:t,in2:e,scale:n,xChannelSelector:i,yChannelSelector:r})},gaussianBlur:function(t,e){null!=t||null!=e?this.attr("stdDeviation",function(t){if(!Array.isArray(t))return t;for(var e=0,n=t.length,i=[];e<n;e++)i.push(t[e]);return i.join(" ")}(Array.prototype.slice.call(arguments))):this.attr("stdDeviation","0 0")},morphology:function(t,e){this.attr({operator:t,radius:e})},tile:function(){},turbulence:function(t,e,n,i,r){this.attr({numOctaves:e,seed:n,stitchTiles:i,baseFrequency:t,type:r})}},n={merge:function(){var t;if(arguments[0]instanceof SVG.Set){var e=this;arguments[0].each((function(t){this instanceof SVG.MergeNode?e.put(this):(this instanceof SVG.Effect||this instanceof SVG.ParentEffect)&&e.put(new SVG.MergeNode(this))}))}else{t=Array.isArray(arguments[0])?arguments[0]:arguments;for(var n=0;n<t.length;n++)t[n]instanceof SVG.MergeNode?this.put(t[n]):this.put(new SVG.MergeNode(t[n]))}},componentTransfer:function(t){if(this.rgb=new SVG.Set,["r","g","b","a"].forEach(function(t){this[t]=new(SVG["Func"+t.toUpperCase()])("identity"),this.rgb.add(this[t]),this.node.appendChild(this[t].node)}.bind(this)),t)for(var e in t.rgb&&(["r","g","b"].forEach(function(e){this[e].attr(t.rgb)}.bind(this)),delete t.rgb),t)this[e].attr(t[e])},diffuseLighting:function(t,e,n){this.attr({surfaceScale:t,diffuseConstant:e,kernelUnitLength:n})},specularLighting:function(t,e,n,i){this.attr({surfaceScale:t,diffuseConstant:e,specularExponent:n,kernelUnitLength:i})}},i={distantLight:function(t,e){this.attr({azimuth:t,elevation:e})},pointLight:function(t,e,n){this.attr({x:t,y:e,z:n})},spotLight:function(t,e,n,i,r,o){this.attr({x:t,y:e,z:n,pointsAtX:i,pointsAtY:r,pointsAtZ:o})},mergeNode:function(t){this.attr("in",t)}};function r(t){return Array.isArray(t)&&(t=new SVG.Array(t)),t.toString().replace(/^\s+/,"").replace(/\s+$/,"").replace(/\s+/g," ")}function o(){var t=function(){};for(var e in"function"==typeof arguments[arguments.length-1]&&(t=arguments[arguments.length-1],Array.prototype.splice.call(arguments,arguments.length-1,1)),arguments)for(var n in arguments[e])t(arguments[e][n],n,arguments[e])}["r","g","b","a"].forEach((function(t){i["Func"+t.toUpperCase()]=function(t){switch(this.attr("type",t),t){case"table":this.attr("tableValues",arguments[1]);break;case"linear":this.attr("slope",arguments[1]),this.attr("intercept",arguments[2]);break;case"gamma":this.attr("amplitude",arguments[1]),this.attr("exponent",arguments[2]),this.attr("offset",arguments[2])}}})),o(e,(function(t,e){var n=e.charAt(0).toUpperCase()+e.slice(1);SVG[n+"Effect"]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+n)),t.apply(this,arguments),this.result(this.attr("id")+"Out")},inherit:SVG.Effect,extend:{}})})),o(n,(function(t,e){var n=e.charAt(0).toUpperCase()+e.slice(1);SVG[n+"Effect"]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+n)),t.apply(this,arguments),this.result(this.attr("id")+"Out")},inherit:SVG.ParentEffect,extend:{}})})),o(i,(function(t,e){var n=e.charAt(0).toUpperCase()+e.slice(1);SVG[n]=SVG.invent({create:function(){this.constructor.call(this,SVG.create("fe"+n)),t.apply(this,arguments)},inherit:SVG.ChildEffect,extend:{}})})),SVG.extend(SVG.MergeEffect,{in:function(t){return t instanceof SVG.MergeNode?this.add(t,0):this.add(new SVG.MergeNode(t),0),this}}),SVG.extend(SVG.CompositeEffect,SVG.BlendEffect,SVG.DisplacementMapEffect,{in2:function(t){return null==t?this.parent()&&this.parent().select('[result="'+this.attr("in2")+'"]').get(0)||this.attr("in2"):this.attr("in2",t)}}),SVG.filter={sepiatone:[.343,.669,.119,0,0,.249,.626,.13,0,0,.172,.334,.111,0,0,0,0,0,1,0]}}.call(void 0),function(){function t(t,r,o,a,s,l,c){for(var u=t.slice(r,o||c),h=a.slice(s,l||c),d=0,p={pos:[0,0],start:[0,0]},f={pos:[0,0],start:[0,0]};u[d]=e.call(p,u[d]),h[d]=e.call(f,h[d]),u[d][0]!=h[d][0]||"M"==u[d][0]||"A"==u[d][0]&&(u[d][4]!=h[d][4]||u[d][5]!=h[d][5])?(Array.prototype.splice.apply(u,[d,1].concat(i.call(p,u[d]))),Array.prototype.splice.apply(h,[d,1].concat(i.call(f,h[d])))):(u[d]=n.call(p,u[d]),h[d]=n.call(f,h[d])),++d!=u.length||d!=h.length;)d==u.length&&u.push(["C",p.pos[0],p.pos[1],p.pos[0],p.pos[1],p.pos[0],p.pos[1]]),d==h.length&&h.push(["C",f.pos[0],f.pos[1],f.pos[0],f.pos[1],f.pos[0],f.pos[1]]);return{start:u,dest:h}}function e(t){switch(t[0]){case"z":case"Z":t[0]="L",t[1]=this.start[0],t[2]=this.start[1];break;case"H":t[0]="L",t[2]=this.pos[1];break;case"V":t[0]="L",t[2]=t[1],t[1]=this.pos[0];break;case"T":t[0]="Q",t[3]=t[1],t[4]=t[2],t[1]=this.reflection[1],t[2]=this.reflection[0];break;case"S":t[0]="C",t[6]=t[4],t[5]=t[3],t[4]=t[2],t[3]=t[1],t[2]=this.reflection[1],t[1]=this.reflection[0]}return t}function n(t){var e=t.length;return this.pos=[t[e-2],t[e-1]],-1!="SCQT".indexOf(t[0])&&(this.reflection=[2*this.pos[0]-t[e-4],2*this.pos[1]-t[e-3]]),t}function i(t){var e=[t];switch(t[0]){case"M":return this.pos=this.start=[t[1],t[2]],e;case"L":t[5]=t[3]=t[1],t[6]=t[4]=t[2],t[1]=this.pos[0],t[2]=this.pos[1];break;case"Q":t[6]=t[4],t[5]=t[3],t[4]=1*t[4]/3+2*t[2]/3,t[3]=1*t[3]/3+2*t[1]/3,t[2]=1*this.pos[1]/3+2*t[2]/3,t[1]=1*this.pos[0]/3+2*t[1]/3;break;case"A":e=function(t,e){var n,i,r,o,a,s,l,c,u,h,d,p,f,g,m,v,y,b,x,_,w,S,C,k,A,M,T=Math.abs(e[1]),I=Math.abs(e[2]),E=e[3]%360,O=e[4],D=e[5],L=e[6],P=e[7],N=new SVG.Point(t),R=new SVG.Point(L,P),B=[];if(0===T||0===I||N.x===R.x&&N.y===R.y)return[["C",N.x,N.y,R.x,R.y,R.x,R.y]];for((i=(n=new SVG.Point((N.x-R.x)/2,(N.y-R.y)/2).transform((new SVG.Matrix).rotate(E))).x*n.x/(T*T)+n.y*n.y/(I*I))>1&&(T*=i=Math.sqrt(i),I*=i),r=(new SVG.Matrix).rotate(E).scale(1/T,1/I).rotate(-E),N=N.transform(r),s=(o=[(R=R.transform(r)).x-N.x,R.y-N.y])[0]*o[0]+o[1]*o[1],a=Math.sqrt(s),o[0]/=a,o[1]/=a,l=s<4?Math.sqrt(1-s/4):0,O===D&&(l*=-1),c=new SVG.Point((R.x+N.x)/2+l*-o[1],(R.y+N.y)/2+l*o[0]),u=new SVG.Point(N.x-c.x,N.y-c.y),h=new SVG.Point(R.x-c.x,R.y-c.y),d=Math.acos(u.x/Math.sqrt(u.x*u.x+u.y*u.y)),u.y<0&&(d*=-1),p=Math.acos(h.x/Math.sqrt(h.x*h.x+h.y*h.y)),h.y<0&&(p*=-1),D&&d>p&&(p+=2*Math.PI),!D&&d<p&&(p-=2*Math.PI),v=[],y=d,f=(p-d)/(g=Math.ceil(2*Math.abs(d-p)/Math.PI)),m=4*Math.tan(f/4)/3,w=0;w<=g;w++)x=Math.cos(y),b=Math.sin(y),_=new SVG.Point(c.x+x,c.y+b),v[w]=[new SVG.Point(_.x+m*b,_.y-m*x),_,new SVG.Point(_.x-m*b,_.y+m*x)],y+=f;for(v[0][0]=v[0][1].clone(),v[v.length-1][2]=v[v.length-1][1].clone(),r=(new SVG.Matrix).rotate(E).scale(T,I).rotate(-E),w=0,S=v.length;w<S;w++)v[w][0]=v[w][0].transform(r),v[w][1]=v[w][1].transform(r),v[w][2]=v[w][2].transform(r);for(w=1,S=v.length;w<S;w++)C=(_=v[w-1][2]).x,k=_.y,A=(_=v[w][0]).x,M=_.y,L=(_=v[w][1]).x,P=_.y,B.push(["C",C,k,A,M,L,P]);return B}(this.pos,t),t=e[0]}return t[0]="C",this.pos=[t[5],t[6]],this.reflection=[2*t[5]-t[3],2*t[6]-t[4]],e}function r(t,e){if(!1===e)return!1;for(var n=e,i=t.length;n<i;++n)if("M"==t[n][0])return n;return!1}SVG.extend(SVG.PathArray,{morph:function(e){for(var n=this.value,i=this.parse(e),o=0,a=0,s=!1,l=!1;!1!==o||!1!==a;){var c;s=r(n,!1!==o&&o+1),l=r(i,!1!==a&&a+1),!1===o&&(o=0==(c=new SVG.PathArray(u.start).bbox()).height||0==c.width?n.push(n[0])-1:n.push(["M",c.x+c.width/2,c.y+c.height/2])-1),!1===a&&(a=0==(c=new SVG.PathArray(u.dest).bbox()).height||0==c.width?i.push(i[0])-1:i.push(["M",c.x+c.width/2,c.y+c.height/2])-1);var u=t(n,o,s,i,a,l);n=n.slice(0,o).concat(u.start,!1===s?[]:n.slice(s)),i=i.slice(0,a).concat(u.dest,!1===l?[]:i.slice(l)),o=!1!==s&&o+u.start.length,a=!1!==l&&a+u.dest.length}return this.value=n,this.destination=new SVG.PathArray,this.destination.value=i,this}})}(),
/*! svg.draggable.js - v2.2.2 - 2019-01-08
  * https://github.com/svgdotjs/svg.draggable.js
  * Copyright (c) 2019 Wout Fierens; Licensed MIT */
function(){function t(t){t.remember("_draggable",this),this.el=t}t.prototype.init=function(t,e){var n=this;this.constraint=t,this.value=e,this.el.on("mousedown.drag",(function(t){n.start(t)})),this.el.on("touchstart.drag",(function(t){n.start(t)}))},t.prototype.transformPoint=function(t,e){var n=(t=t||window.event).changedTouches&&t.changedTouches[0]||t;return this.p.x=n.clientX-(e||0),this.p.y=n.clientY,this.p.matrixTransform(this.m)},t.prototype.getBBox=function(){var t=this.el.bbox();return this.el instanceof SVG.Nested&&(t=this.el.rbox()),(this.el instanceof SVG.G||this.el instanceof SVG.Use||this.el instanceof SVG.Nested)&&(t.x=this.el.x(),t.y=this.el.y()),t},t.prototype.start=function(t){if("click"!=t.type&&"mousedown"!=t.type&&"mousemove"!=t.type||1==(t.which||t.buttons)){var e=this;if(this.el.fire("beforedrag",{event:t,handler:this}),!this.el.event().defaultPrevented){t.preventDefault(),t.stopPropagation(),this.parent=this.parent||this.el.parent(SVG.Nested)||this.el.parent(SVG.Doc),this.p=this.parent.node.createSVGPoint(),this.m=this.el.node.getScreenCTM().inverse();var n,i=this.getBBox();if(this.el instanceof SVG.Text)switch(n=this.el.node.getComputedTextLength(),this.el.attr("text-anchor")){case"middle":n/=2;break;case"start":n=0}this.startPoints={point:this.transformPoint(t,n),box:i,transform:this.el.transform()},SVG.on(window,"mousemove.drag",(function(t){e.drag(t)})),SVG.on(window,"touchmove.drag",(function(t){e.drag(t)})),SVG.on(window,"mouseup.drag",(function(t){e.end(t)})),SVG.on(window,"touchend.drag",(function(t){e.end(t)})),this.el.fire("dragstart",{event:t,p:this.startPoints.point,m:this.m,handler:this})}}},t.prototype.drag=function(t){var e=this.getBBox(),n=this.transformPoint(t),i=this.startPoints.box.x+n.x-this.startPoints.point.x,r=this.startPoints.box.y+n.y-this.startPoints.point.y,o=this.constraint,a=n.x-this.startPoints.point.x,s=n.y-this.startPoints.point.y;if(this.el.fire("dragmove",{event:t,p:n,m:this.m,handler:this}),this.el.event().defaultPrevented)return n;if("function"==typeof o){var l=o.call(this.el,i,r,this.m);"boolean"==typeof l&&(l={x:l,y:l}),!0===l.x?this.el.x(i):!1!==l.x&&this.el.x(l.x),!0===l.y?this.el.y(r):!1!==l.y&&this.el.y(l.y)}else"object"==typeof o&&(null!=o.minX&&i<o.minX?a=(i=o.minX)-this.startPoints.box.x:null!=o.maxX&&i>o.maxX-e.width&&(a=(i=o.maxX-e.width)-this.startPoints.box.x),null!=o.minY&&r<o.minY?s=(r=o.minY)-this.startPoints.box.y:null!=o.maxY&&r>o.maxY-e.height&&(s=(r=o.maxY-e.height)-this.startPoints.box.y),null!=o.snapToGrid&&(i-=i%o.snapToGrid,r-=r%o.snapToGrid,a-=a%o.snapToGrid,s-=s%o.snapToGrid),this.el instanceof SVG.G?this.el.matrix(this.startPoints.transform).transform({x:a,y:s},!0):this.el.move(i,r));return n},t.prototype.end=function(t){var e=this.drag(t);this.el.fire("dragend",{event:t,p:e,m:this.m,handler:this}),SVG.off(window,"mousemove.drag"),SVG.off(window,"touchmove.drag"),SVG.off(window,"mouseup.drag"),SVG.off(window,"touchend.drag")},SVG.extend(SVG.Element,{draggable:function(e,n){"function"!=typeof e&&"object"!=typeof e||(n=e,e=!0);var i=this.remember("_draggable")||new t(this);return(e=void 0===e||e)?i.init(n||{},e):(this.off("mousedown.drag"),this.off("touchstart.drag")),this}})}.call(void 0),function(){function t(t){this.el=t,t.remember("_selectHandler",this),this.pointSelection={isSelected:!1},this.rectSelection={isSelected:!1},this.pointsList={lt:[0,0],rt:["width",0],rb:["width","height"],lb:[0,"height"],t:["width",0],r:["width","height"],b:["width","height"],l:[0,"height"]},this.pointCoord=function(t,e,n){var i="string"!=typeof t?t:e[t];return n?i/2:i},this.pointCoords=function(t,e){var n=this.pointsList[t];return{x:this.pointCoord(n[0],e,"t"===t||"b"===t),y:this.pointCoord(n[1],e,"r"===t||"l"===t)}}}t.prototype.init=function(t,e){var n=this.el.bbox();this.options={};var i=this.el.selectize.defaults.points;for(var r in this.el.selectize.defaults)this.options[r]=this.el.selectize.defaults[r],void 0!==e[r]&&(this.options[r]=e[r]);var o=["points","pointsExclude"];for(var r in o){var a=this.options[o[r]];"string"==typeof a?a=a.length>0?a.split(/\s*,\s*/i):[]:"boolean"==typeof a&&"points"===o[r]&&(a=a?i:[]),this.options[o[r]]=a}this.options.points=[i,this.options.points].reduce((function(t,e){return t.filter((function(t){return e.indexOf(t)>-1}))})),this.options.points=[this.options.points,this.options.pointsExclude].reduce((function(t,e){return t.filter((function(t){return e.indexOf(t)<0}))})),this.parent=this.el.parent(),this.nested=this.nested||this.parent.group(),this.nested.matrix(new SVG.Matrix(this.el).translate(n.x,n.y)),this.options.deepSelect&&-1!==["line","polyline","polygon"].indexOf(this.el.type)?this.selectPoints(t):this.selectRect(t),this.observe(),this.cleanup()},t.prototype.selectPoints=function(t){return this.pointSelection.isSelected=t,this.pointSelection.set||(this.pointSelection.set=this.parent.set(),this.drawPoints()),this},t.prototype.getPointArray=function(){var t=this.el.bbox();return this.el.array().valueOf().map((function(e){return[e[0]-t.x,e[1]-t.y]}))},t.prototype.drawPoints=function(){for(var t=this,e=this.getPointArray(),n=0,i=e.length;n<i;++n){var r=function(e){return function(n){(n=n||window.event).preventDefault?n.preventDefault():n.returnValue=!1,n.stopPropagation();var i=n.pageX||n.touches[0].pageX,r=n.pageY||n.touches[0].pageY;t.el.fire("point",{x:i,y:r,i:e,event:n})}}(n),o=this.drawPoint(e[n][0],e[n][1]).addClass(this.options.classPoints).addClass(this.options.classPoints+"_point").on("touchstart",r).on("mousedown",r);this.pointSelection.set.add(o)}},t.prototype.drawPoint=function(t,e){var n=this.options.pointType;switch(n){case"circle":return this.drawCircle(t,e);case"rect":return this.drawRect(t,e);default:if("function"==typeof n)return n.call(this,t,e);throw new Error("Unknown "+n+" point type!")}},t.prototype.drawCircle=function(t,e){return this.nested.circle(this.options.pointSize).center(t,e)},t.prototype.drawRect=function(t,e){return this.nested.rect(this.options.pointSize,this.options.pointSize).center(t,e)},t.prototype.updatePointSelection=function(){var t=this.getPointArray();this.pointSelection.set.each((function(e){this.cx()===t[e][0]&&this.cy()===t[e][1]||this.center(t[e][0],t[e][1])}))},t.prototype.updateRectSelection=function(){var t=this,e=this.el.bbox();if(this.rectSelection.set.get(0).attr({width:e.width,height:e.height}),this.options.points.length&&this.options.points.map((function(n,i){var r=t.pointCoords(n,e);t.rectSelection.set.get(i+1).center(r.x,r.y)})),this.options.rotationPoint){var n=this.rectSelection.set.length();this.rectSelection.set.get(n-1).center(e.width/2,20)}},t.prototype.selectRect=function(t){var e=this,n=this.el.bbox();function i(t){return function(n){(n=n||window.event).preventDefault?n.preventDefault():n.returnValue=!1,n.stopPropagation();var i=n.pageX||n.touches[0].pageX,r=n.pageY||n.touches[0].pageY;e.el.fire(t,{x:i,y:r,event:n})}}if(this.rectSelection.isSelected=t,this.rectSelection.set=this.rectSelection.set||this.parent.set(),this.rectSelection.set.get(0)||this.rectSelection.set.add(this.nested.rect(n.width,n.height).addClass(this.options.classRect)),this.options.points.length&&this.rectSelection.set.length()<2&&(this.options.points.map((function(t,r){var o=e.pointCoords(t,n),a=e.drawPoint(o.x,o.y).attr("class",e.options.classPoints+"_"+t).on("mousedown",i(t)).on("touchstart",i(t));e.rectSelection.set.add(a)})),this.rectSelection.set.each((function(){this.addClass(e.options.classPoints)}))),this.options.rotationPoint&&(this.options.points&&!this.rectSelection.set.get(9)||!this.options.points&&!this.rectSelection.set.get(1))){var r=function(t){(t=t||window.event).preventDefault?t.preventDefault():t.returnValue=!1,t.stopPropagation();var n=t.pageX||t.touches[0].pageX,i=t.pageY||t.touches[0].pageY;e.el.fire("rot",{x:n,y:i,event:t})},o=this.drawPoint(n.width/2,20).attr("class",this.options.classPoints+"_rot").on("touchstart",r).on("mousedown",r);this.rectSelection.set.add(o)}},t.prototype.handler=function(){var t=this.el.bbox();this.nested.matrix(new SVG.Matrix(this.el).translate(t.x,t.y)),this.rectSelection.isSelected&&this.updateRectSelection(),this.pointSelection.isSelected&&this.updatePointSelection()},t.prototype.observe=function(){var t=this;if(MutationObserver)if(this.rectSelection.isSelected||this.pointSelection.isSelected)this.observerInst=this.observerInst||new MutationObserver((function(){t.handler()})),this.observerInst.observe(this.el.node,{attributes:!0});else try{this.observerInst.disconnect(),delete this.observerInst}catch(t){}else this.el.off("DOMAttrModified.select"),(this.rectSelection.isSelected||this.pointSelection.isSelected)&&this.el.on("DOMAttrModified.select",(function(){t.handler()}))},t.prototype.cleanup=function(){!this.rectSelection.isSelected&&this.rectSelection.set&&(this.rectSelection.set.each((function(){this.remove()})),this.rectSelection.set.clear(),delete this.rectSelection.set),!this.pointSelection.isSelected&&this.pointSelection.set&&(this.pointSelection.set.each((function(){this.remove()})),this.pointSelection.set.clear(),delete this.pointSelection.set),this.pointSelection.isSelected||this.rectSelection.isSelected||(this.nested.remove(),delete this.nested)},SVG.extend(SVG.Element,{selectize:function(e,n){return"object"==typeof e&&(n=e,e=!0),(this.remember("_selectHandler")||new t(this)).init(void 0===e||e,n||{}),this}}),SVG.Element.prototype.selectize.defaults={points:["lt","rt","rb","lb","t","r","b","l"],pointsExclude:[],classRect:"svg_select_boundingRect",classPoints:"svg_select_points",pointSize:7,rotationPoint:!0,deepSelect:!1,pointType:"circle"}}(),function(){(function(){function t(t){t.remember("_resizeHandler",this),this.el=t,this.parameters={},this.lastUpdateCall=null,this.p=t.doc().node.createSVGPoint()}t.prototype.transformPoint=function(t,e,n){return this.p.x=t-(this.offset.x-window.pageXOffset),this.p.y=e-(this.offset.y-window.pageYOffset),this.p.matrixTransform(n||this.m)},t.prototype._extractPosition=function(t){return{x:null!=t.clientX?t.clientX:t.touches[0].clientX,y:null!=t.clientY?t.clientY:t.touches[0].clientY}},t.prototype.init=function(t){var e=this;if(this.stop(),"stop"!==t){for(var n in this.options={},this.el.resize.defaults)this.options[n]=this.el.resize.defaults[n],void 0!==t[n]&&(this.options[n]=t[n]);this.el.on("lt.resize",(function(t){e.resize(t||window.event)})),this.el.on("rt.resize",(function(t){e.resize(t||window.event)})),this.el.on("rb.resize",(function(t){e.resize(t||window.event)})),this.el.on("lb.resize",(function(t){e.resize(t||window.event)})),this.el.on("t.resize",(function(t){e.resize(t||window.event)})),this.el.on("r.resize",(function(t){e.resize(t||window.event)})),this.el.on("b.resize",(function(t){e.resize(t||window.event)})),this.el.on("l.resize",(function(t){e.resize(t||window.event)})),this.el.on("rot.resize",(function(t){e.resize(t||window.event)})),this.el.on("point.resize",(function(t){e.resize(t||window.event)})),this.update()}},t.prototype.stop=function(){return this.el.off("lt.resize"),this.el.off("rt.resize"),this.el.off("rb.resize"),this.el.off("lb.resize"),this.el.off("t.resize"),this.el.off("r.resize"),this.el.off("b.resize"),this.el.off("l.resize"),this.el.off("rot.resize"),this.el.off("point.resize"),this},t.prototype.resize=function(t){var e=this;this.m=this.el.node.getScreenCTM().inverse(),this.offset={x:window.pageXOffset,y:window.pageYOffset};var n=this._extractPosition(t.detail.event);if(this.parameters={type:this.el.type,p:this.transformPoint(n.x,n.y),x:t.detail.x,y:t.detail.y,box:this.el.bbox(),rotation:this.el.transform().rotation},"text"===this.el.type&&(this.parameters.fontSize=this.el.attr()["font-size"]),void 0!==t.detail.i){var i=this.el.array().valueOf();this.parameters.i=t.detail.i,this.parameters.pointCoords=[i[t.detail.i][0],i[t.detail.i][1]]}switch(t.type){case"lt":this.calc=function(t,e){var n=this.snapToGrid(t,e);if(this.parameters.box.width-n[0]>0&&this.parameters.box.height-n[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x+n[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize-n[0]);n=this.checkAspectRatio(n),this.el.move(this.parameters.box.x+n[0],this.parameters.box.y+n[1]).size(this.parameters.box.width-n[0],this.parameters.box.height-n[1])}};break;case"rt":this.calc=function(t,e){var n=this.snapToGrid(t,e,2);if(this.parameters.box.width+n[0]>0&&this.parameters.box.height-n[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x-n[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize+n[0]);n=this.checkAspectRatio(n,!0),this.el.move(this.parameters.box.x,this.parameters.box.y+n[1]).size(this.parameters.box.width+n[0],this.parameters.box.height-n[1])}};break;case"rb":this.calc=function(t,e){var n=this.snapToGrid(t,e,0);if(this.parameters.box.width+n[0]>0&&this.parameters.box.height+n[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x-n[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize+n[0]);n=this.checkAspectRatio(n),this.el.move(this.parameters.box.x,this.parameters.box.y).size(this.parameters.box.width+n[0],this.parameters.box.height+n[1])}};break;case"lb":this.calc=function(t,e){var n=this.snapToGrid(t,e,1);if(this.parameters.box.width-n[0]>0&&this.parameters.box.height+n[1]>0){if("text"===this.parameters.type)return this.el.move(this.parameters.box.x+n[0],this.parameters.box.y),void this.el.attr("font-size",this.parameters.fontSize-n[0]);n=this.checkAspectRatio(n,!0),this.el.move(this.parameters.box.x+n[0],this.parameters.box.y).size(this.parameters.box.width-n[0],this.parameters.box.height+n[1])}};break;case"t":this.calc=function(t,e){var n=this.snapToGrid(t,e,2);if(this.parameters.box.height-n[1]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y+n[1]).height(this.parameters.box.height-n[1])}};break;case"r":this.calc=function(t,e){var n=this.snapToGrid(t,e,0);if(this.parameters.box.width+n[0]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y).width(this.parameters.box.width+n[0])}};break;case"b":this.calc=function(t,e){var n=this.snapToGrid(t,e,0);if(this.parameters.box.height+n[1]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x,this.parameters.box.y).height(this.parameters.box.height+n[1])}};break;case"l":this.calc=function(t,e){var n=this.snapToGrid(t,e,1);if(this.parameters.box.width-n[0]>0){if("text"===this.parameters.type)return;this.el.move(this.parameters.box.x+n[0],this.parameters.box.y).width(this.parameters.box.width-n[0])}};break;case"rot":this.calc=function(t,e){var n=t+this.parameters.p.x,i=e+this.parameters.p.y,r=Math.atan2(this.parameters.p.y-this.parameters.box.y-this.parameters.box.height/2,this.parameters.p.x-this.parameters.box.x-this.parameters.box.width/2),o=Math.atan2(i-this.parameters.box.y-this.parameters.box.height/2,n-this.parameters.box.x-this.parameters.box.width/2),a=this.parameters.rotation+180*(o-r)/Math.PI+this.options.snapToAngle/2;this.el.center(this.parameters.box.cx,this.parameters.box.cy).rotate(a-a%this.options.snapToAngle,this.parameters.box.cx,this.parameters.box.cy)};break;case"point":this.calc=function(t,e){var n=this.snapToGrid(t,e,this.parameters.pointCoords[0],this.parameters.pointCoords[1]),i=this.el.array().valueOf();i[this.parameters.i][0]=this.parameters.pointCoords[0]+n[0],i[this.parameters.i][1]=this.parameters.pointCoords[1]+n[1],this.el.plot(i)}}this.el.fire("resizestart",{dx:this.parameters.x,dy:this.parameters.y,event:t}),SVG.on(window,"touchmove.resize",(function(t){e.update(t||window.event)})),SVG.on(window,"touchend.resize",(function(){e.done()})),SVG.on(window,"mousemove.resize",(function(t){e.update(t||window.event)})),SVG.on(window,"mouseup.resize",(function(){e.done()}))},t.prototype.update=function(t){if(t){var e=this._extractPosition(t),n=this.transformPoint(e.x,e.y),i=n.x-this.parameters.p.x,r=n.y-this.parameters.p.y;this.lastUpdateCall=[i,r],this.calc(i,r),this.el.fire("resizing",{dx:i,dy:r,event:t})}else this.lastUpdateCall&&this.calc(this.lastUpdateCall[0],this.lastUpdateCall[1])},t.prototype.done=function(){this.lastUpdateCall=null,SVG.off(window,"mousemove.resize"),SVG.off(window,"mouseup.resize"),SVG.off(window,"touchmove.resize"),SVG.off(window,"touchend.resize"),this.el.fire("resizedone")},t.prototype.snapToGrid=function(t,e,n,i){var r;return void 0!==i?r=[(n+t)%this.options.snapToGrid,(i+e)%this.options.snapToGrid]:(n=null==n?3:n,r=[(this.parameters.box.x+t+(1&n?0:this.parameters.box.width))%this.options.snapToGrid,(this.parameters.box.y+e+(2&n?0:this.parameters.box.height))%this.options.snapToGrid]),t<0&&(r[0]-=this.options.snapToGrid),e<0&&(r[1]-=this.options.snapToGrid),t-=Math.abs(r[0])<this.options.snapToGrid/2?r[0]:r[0]-(t<0?-this.options.snapToGrid:this.options.snapToGrid),e-=Math.abs(r[1])<this.options.snapToGrid/2?r[1]:r[1]-(e<0?-this.options.snapToGrid:this.options.snapToGrid),this.constraintToBox(t,e,n,i)},t.prototype.constraintToBox=function(t,e,n,i){var r,o,a=this.options.constraint||{};return void 0!==i?(r=n,o=i):(r=this.parameters.box.x+(1&n?0:this.parameters.box.width),o=this.parameters.box.y+(2&n?0:this.parameters.box.height)),void 0!==a.minX&&r+t<a.minX&&(t=a.minX-r),void 0!==a.maxX&&r+t>a.maxX&&(t=a.maxX-r),void 0!==a.minY&&o+e<a.minY&&(e=a.minY-o),void 0!==a.maxY&&o+e>a.maxY&&(e=a.maxY-o),[t,e]},t.prototype.checkAspectRatio=function(t,e){if(!this.options.saveAspectRatio)return t;var n=t.slice(),i=this.parameters.box.width/this.parameters.box.height,r=this.parameters.box.width+t[0],o=this.parameters.box.height-t[1],a=r/o;return a<i?(n[1]=r/i-this.parameters.box.height,e&&(n[1]=-n[1])):a>i&&(n[0]=this.parameters.box.width-o*i,e&&(n[0]=-n[0])),n},SVG.extend(SVG.Element,{resize:function(e){return(this.remember("_resizeHandler")||new t(this)).init(e||{}),this}}),SVG.Element.prototype.resize.defaults={snapToAngle:.1,snapToGrid:1,constraint:{},saveAspectRatio:!1}}).call(this)}(),void 0===window.Apex&&(window.Apex={});var Ht=function(){function t(e){i(this,t),this.ctx=e,this.w=e.w}return o(t,[{key:"initModules",value:function(){this.ctx.publicMethods=["updateOptions","updateSeries","appendData","appendSeries","isSeriesHidden","toggleSeries","showSeries","hideSeries","setLocale","resetSeries","zoomX","toggleDataPointSelection","dataURI","exportToCSV","addXaxisAnnotation","addYaxisAnnotation","addPointAnnotation","clearAnnotations","removeAnnotation","paper","destroy"],this.ctx.eventList=["click","mousedown","mousemove","mouseleave","touchstart","touchmove","touchleave","mouseup","touchend"],this.ctx.animations=new v(this.ctx),this.ctx.axes=new K(this.ctx),this.ctx.core=new Ft(this.ctx.el,this.ctx),this.ctx.config=new P({}),this.ctx.data=new W(this.ctx),this.ctx.grid=new X(this.ctx),this.ctx.graphics=new b(this.ctx),this.ctx.coreUtils=new x(this.ctx),this.ctx.crosshairs=new Q(this.ctx),this.ctx.events=new $(this.ctx),this.ctx.exports=new j(this.ctx),this.ctx.localization=new Z(this.ctx),this.ctx.options=new I,this.ctx.responsive=new J(this.ctx),this.ctx.series=new H(this.ctx),this.ctx.theme=new tt(this.ctx),this.ctx.formatters=new C(this.ctx),this.ctx.titleSubtitle=new et(this.ctx),this.ctx.legend=new lt(this.ctx),this.ctx.toolbar=new ct(this.ctx),this.ctx.tooltip=new vt(this.ctx),this.ctx.dimensions=new at(this.ctx),this.ctx.updateHelpers=new Vt(this.ctx),this.ctx.zoomPanSelection=new ut(this.ctx),this.ctx.w.globals.tooltip=new vt(this.ctx)}}]),t}(),Wt=function(){function t(e){i(this,t),this.ctx=e,this.w=e.w}return o(t,[{key:"clear",value:function(t){var e=t.isUpdating;this.ctx.zoomPanSelection&&this.ctx.zoomPanSelection.destroy(),this.ctx.toolbar&&this.ctx.toolbar.destroy(),this.ctx.animations=null,this.ctx.axes=null,this.ctx.annotations=null,this.ctx.core=null,this.ctx.data=null,this.ctx.grid=null,this.ctx.series=null,this.ctx.responsive=null,this.ctx.theme=null,this.ctx.formatters=null,this.ctx.titleSubtitle=null,this.ctx.legend=null,this.ctx.dimensions=null,this.ctx.options=null,this.ctx.crosshairs=null,this.ctx.zoomPanSelection=null,this.ctx.updateHelpers=null,this.ctx.toolbar=null,this.ctx.localization=null,this.ctx.w.globals.tooltip=null,this.clearDomElements({isUpdating:e})}},{key:"killSVG",value:function(t){t.each((function(t,e){this.removeClass("*"),this.off(),this.stop()}),!0),t.ungroup(),t.clear()}},{key:"clearDomElements",value:function(t){var e=this,n=t.isUpdating,i=this.w.globals.dom.Paper.node;i.parentNode&&i.parentNode.parentNode&&!n&&(i.parentNode.parentNode.style.minHeight="unset");var r=this.w.globals.dom.baseEl;r&&this.ctx.eventList.forEach((function(t){r.removeEventListener(t,e.ctx.events.documentEvent)}));var o=this.w.globals.dom;if(null!==this.ctx.el)for(;this.ctx.el.firstChild;)this.ctx.el.removeChild(this.ctx.el.firstChild);this.killSVG(o.Paper),o.Paper.remove(),o.elWrap=null,o.elGraphical=null,o.elLegendWrap=null,o.elLegendForeign=null,o.baseEl=null,o.elGridRect=null,o.elGridRectMask=null,o.elGridRectMarkerMask=null,o.elForecastMask=null,o.elNonForecastMask=null,o.elDefs=null}}]),t}(),jt=new WeakMap,Yt=function(){function t(e,n){i(this,t),this.opts=n,this.ctx=this,this.w=new R(n).init(),this.el=e,this.w.globals.cuid=m.randomId(),this.w.globals.chartID=this.w.config.chart.id?m.escapeString(this.w.config.chart.id):this.w.globals.cuid,new Ht(this).initModules(),this.create=m.bind(this.create,this),this.windowResizeHandler=this._windowResizeHandler.bind(this),this.parentResizeHandler=this._parentResizeCallback.bind(this)}return o(t,[{key:"render",value:function(){var t=this;return new Promise((function(e,n){if(null!==t.el){void 0===Apex._chartInstances&&(Apex._chartInstances=[]),t.w.config.chart.id&&Apex._chartInstances.push({id:t.w.globals.chartID,group:t.w.config.chart.group,chart:t}),t.setLocale(t.w.config.chart.defaultLocale);var i=t.w.config.chart.events.beforeMount;"function"==typeof i&&i(t,t.w),t.events.fireEvent("beforeMount",[t,t.w]),window.addEventListener("resize",t.windowResizeHandler),function(t,e){var n=!1;if(t.nodeType!==Node.DOCUMENT_FRAGMENT_NODE){var i=t.getBoundingClientRect();"none"!==t.style.display&&0!==i.width||(n=!0)}var r=new ResizeObserver((function(i){n&&e.call(t,i),n=!0}));t.nodeType===Node.DOCUMENT_FRAGMENT_NODE?Array.from(t.children).forEach((function(t){return r.observe(t)})):r.observe(t),jt.set(e,r)}(t.el.parentNode,t.parentResizeHandler);var r=t.el.getRootNode&&t.el.getRootNode(),o=m.is("ShadowRoot",r),a=t.el.ownerDocument,s=o?r.getElementById("apexcharts-css"):a.getElementById("apexcharts-css");if(!s){var l;(s=document.createElement("style")).id="apexcharts-css",s.textContent='@keyframes opaque {\n  0% {\n      opacity: 0\n  }\n\n  to {\n      opacity: 1\n  }\n}\n\n@keyframes resizeanim {\n  0%,to {\n      opacity: 0\n  }\n}\n\n.apexcharts-canvas {\n  position: relative;\n  user-select: none\n}\n\n.apexcharts-canvas ::-webkit-scrollbar {\n  -webkit-appearance: none;\n  width: 6px\n}\n\n.apexcharts-canvas ::-webkit-scrollbar-thumb {\n  border-radius: 4px;\n  background-color: rgba(0,0,0,.5);\n  box-shadow: 0 0 1px rgba(255,255,255,.5);\n  -webkit-box-shadow: 0 0 1px rgba(255,255,255,.5)\n}\n\n.apexcharts-inner {\n  position: relative\n}\n\n.apexcharts-text tspan {\n  font-family: inherit\n}\n\n.legend-mouseover-inactive {\n  transition: .15s ease all;\n  opacity: .2\n}\n\n.apexcharts-legend-text {\n  padding-left: 15px;\n  margin-left: -15px;\n}\n\n.apexcharts-series-collapsed {\n  opacity: 0\n}\n\n.apexcharts-tooltip {\n  border-radius: 5px;\n  box-shadow: 2px 2px 6px -4px #999;\n  cursor: default;\n  font-size: 14px;\n  left: 62px;\n  opacity: 0;\n  pointer-events: none;\n  position: absolute;\n  top: 20px;\n  display: flex;\n  flex-direction: column;\n  overflow: hidden;\n  white-space: nowrap;\n  z-index: 12;\n  transition: .15s ease all\n}\n\n.apexcharts-tooltip.apexcharts-active {\n  opacity: 1;\n  transition: .15s ease all\n}\n\n.apexcharts-tooltip.apexcharts-theme-light {\n  border: 1px solid #e3e3e3;\n  background: rgba(255,255,255,.96)\n}\n\n.apexcharts-tooltip.apexcharts-theme-dark {\n  color: #fff;\n  background: rgba(30,30,30,.8)\n}\n\n.apexcharts-tooltip * {\n  font-family: inherit\n}\n\n.apexcharts-tooltip-title {\n  padding: 6px;\n  font-size: 15px;\n  margin-bottom: 4px\n}\n\n.apexcharts-tooltip.apexcharts-theme-light .apexcharts-tooltip-title {\n  background: #eceff1;\n  border-bottom: 1px solid #ddd\n}\n\n.apexcharts-tooltip.apexcharts-theme-dark .apexcharts-tooltip-title {\n  background: rgba(0,0,0,.7);\n  border-bottom: 1px solid #333\n}\n\n.apexcharts-tooltip-text-goals-value,.apexcharts-tooltip-text-y-value,.apexcharts-tooltip-text-z-value {\n  display: inline-block;\n  margin-left: 5px;\n  font-weight: 600\n}\n\n.apexcharts-tooltip-text-goals-label:empty,.apexcharts-tooltip-text-goals-value:empty,.apexcharts-tooltip-text-y-label:empty,.apexcharts-tooltip-text-y-value:empty,.apexcharts-tooltip-text-z-value:empty,.apexcharts-tooltip-title:empty {\n  display: none\n}\n\n.apexcharts-tooltip-text-goals-label,.apexcharts-tooltip-text-goals-value {\n  padding: 6px 0 5px\n}\n\n.apexcharts-tooltip-goals-group,.apexcharts-tooltip-text-goals-label,.apexcharts-tooltip-text-goals-value {\n  display: flex\n}\n\n.apexcharts-tooltip-text-goals-label:not(:empty),.apexcharts-tooltip-text-goals-value:not(:empty) {\n  margin-top: -6px\n}\n\n.apexcharts-tooltip-marker {\n  width: 12px;\n  height: 12px;\n  position: relative;\n  top: 0;\n  margin-right: 10px;\n  border-radius: 50%\n}\n\n.apexcharts-tooltip-series-group {\n  padding: 0 10px;\n  display: none;\n  text-align: left;\n  justify-content: left;\n  align-items: center\n}\n\n.apexcharts-tooltip-series-group.apexcharts-active .apexcharts-tooltip-marker {\n  opacity: 1\n}\n\n.apexcharts-tooltip-series-group.apexcharts-active,.apexcharts-tooltip-series-group:last-child {\n  padding-bottom: 4px\n}\n\n.apexcharts-tooltip-series-group-hidden {\n  opacity: 0;\n  height: 0;\n  line-height: 0;\n  padding: 0!important\n}\n\n.apexcharts-tooltip-y-group {\n  padding: 6px 0 5px\n}\n\n.apexcharts-custom-tooltip,.apexcharts-tooltip-box {\n  padding: 4px 8px\n}\n\n.apexcharts-tooltip-boxPlot {\n  display: flex;\n  flex-direction: column-reverse\n}\n\n.apexcharts-tooltip-box>div {\n  margin: 4px 0\n}\n\n.apexcharts-tooltip-box span.value {\n  font-weight: 700\n}\n\n.apexcharts-tooltip-rangebar {\n  padding: 5px 8px\n}\n\n.apexcharts-tooltip-rangebar .category {\n  font-weight: 600;\n  color: #777\n}\n\n.apexcharts-tooltip-rangebar .series-name {\n  font-weight: 700;\n  display: block;\n  margin-bottom: 5px\n}\n\n.apexcharts-xaxistooltip,.apexcharts-yaxistooltip {\n  opacity: 0;\n  pointer-events: none;\n  color: #373d3f;\n  font-size: 13px;\n  text-align: center;\n  border-radius: 2px;\n  position: absolute;\n  z-index: 10;\n  background: #eceff1;\n  border: 1px solid #90a4ae\n}\n\n.apexcharts-xaxistooltip {\n  padding: 9px 10px;\n  transition: .15s ease all\n}\n\n.apexcharts-xaxistooltip.apexcharts-theme-dark {\n  background: rgba(0,0,0,.7);\n  border: 1px solid rgba(0,0,0,.5);\n  color: #fff\n}\n\n.apexcharts-xaxistooltip:after,.apexcharts-xaxistooltip:before {\n  left: 50%;\n  border: solid transparent;\n  content: " ";\n  height: 0;\n  width: 0;\n  position: absolute;\n  pointer-events: none\n}\n\n.apexcharts-xaxistooltip:after {\n  border-color: transparent;\n  border-width: 6px;\n  margin-left: -6px\n}\n\n.apexcharts-xaxistooltip:before {\n  border-color: transparent;\n  border-width: 7px;\n  margin-left: -7px\n}\n\n.apexcharts-xaxistooltip-bottom:after,.apexcharts-xaxistooltip-bottom:before {\n  bottom: 100%\n}\n\n.apexcharts-xaxistooltip-top:after,.apexcharts-xaxistooltip-top:before {\n  top: 100%\n}\n\n.apexcharts-xaxistooltip-bottom:after {\n  border-bottom-color: #eceff1\n}\n\n.apexcharts-xaxistooltip-bottom:before {\n  border-bottom-color: #90a4ae\n}\n\n.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:after,.apexcharts-xaxistooltip-bottom.apexcharts-theme-dark:before {\n  border-bottom-color: rgba(0,0,0,.5)\n}\n\n.apexcharts-xaxistooltip-top:after {\n  border-top-color: #eceff1\n}\n\n.apexcharts-xaxistooltip-top:before {\n  border-top-color: #90a4ae\n}\n\n.apexcharts-xaxistooltip-top.apexcharts-theme-dark:after,.apexcharts-xaxistooltip-top.apexcharts-theme-dark:before {\n  border-top-color: rgba(0,0,0,.5)\n}\n\n.apexcharts-xaxistooltip.apexcharts-active {\n  opacity: 1;\n  transition: .15s ease all\n}\n\n.apexcharts-yaxistooltip {\n  padding: 4px 10px\n}\n\n.apexcharts-yaxistooltip.apexcharts-theme-dark {\n  background: rgba(0,0,0,.7);\n  border: 1px solid rgba(0,0,0,.5);\n  color: #fff\n}\n\n.apexcharts-yaxistooltip:after,.apexcharts-yaxistooltip:before {\n  top: 50%;\n  border: solid transparent;\n  content: " ";\n  height: 0;\n  width: 0;\n  position: absolute;\n  pointer-events: none\n}\n\n.apexcharts-yaxistooltip:after {\n  border-color: transparent;\n  border-width: 6px;\n  margin-top: -6px\n}\n\n.apexcharts-yaxistooltip:before {\n  border-color: transparent;\n  border-width: 7px;\n  margin-top: -7px\n}\n\n.apexcharts-yaxistooltip-left:after,.apexcharts-yaxistooltip-left:before {\n  left: 100%\n}\n\n.apexcharts-yaxistooltip-right:after,.apexcharts-yaxistooltip-right:before {\n  right: 100%\n}\n\n.apexcharts-yaxistooltip-left:after {\n  border-left-color: #eceff1\n}\n\n.apexcharts-yaxistooltip-left:before {\n  border-left-color: #90a4ae\n}\n\n.apexcharts-yaxistooltip-left.apexcharts-theme-dark:after,.apexcharts-yaxistooltip-left.apexcharts-theme-dark:before {\n  border-left-color: rgba(0,0,0,.5)\n}\n\n.apexcharts-yaxistooltip-right:after {\n  border-right-color: #eceff1\n}\n\n.apexcharts-yaxistooltip-right:before {\n  border-right-color: #90a4ae\n}\n\n.apexcharts-yaxistooltip-right.apexcharts-theme-dark:after,.apexcharts-yaxistooltip-right.apexcharts-theme-dark:before {\n  border-right-color: rgba(0,0,0,.5)\n}\n\n.apexcharts-yaxistooltip.apexcharts-active {\n  opacity: 1\n}\n\n.apexcharts-yaxistooltip-hidden {\n  display: none\n}\n\n.apexcharts-xcrosshairs,.apexcharts-ycrosshairs {\n  pointer-events: none;\n  opacity: 0;\n  transition: .15s ease all\n}\n\n.apexcharts-xcrosshairs.apexcharts-active,.apexcharts-ycrosshairs.apexcharts-active {\n  opacity: 1;\n  transition: .15s ease all\n}\n\n.apexcharts-ycrosshairs-hidden {\n  opacity: 0\n}\n\n.apexcharts-selection-rect {\n  cursor: move\n}\n\n.svg_select_boundingRect,.svg_select_points_rot {\n  pointer-events: none;\n  opacity: 0;\n  visibility: hidden\n}\n\n.apexcharts-selection-rect+g .svg_select_boundingRect,.apexcharts-selection-rect+g .svg_select_points_rot {\n  opacity: 0;\n  visibility: hidden\n}\n\n.apexcharts-selection-rect+g .svg_select_points_l,.apexcharts-selection-rect+g .svg_select_points_r {\n  cursor: ew-resize;\n  opacity: 1;\n  visibility: visible\n}\n\n.svg_select_points {\n  fill: #efefef;\n  stroke: #333;\n  rx: 2\n}\n\n.apexcharts-svg.apexcharts-zoomable.hovering-zoom {\n  cursor: crosshair\n}\n\n.apexcharts-svg.apexcharts-zoomable.hovering-pan {\n  cursor: move\n}\n\n.apexcharts-menu-icon,.apexcharts-pan-icon,.apexcharts-reset-icon,.apexcharts-selection-icon,.apexcharts-toolbar-custom-icon,.apexcharts-zoom-icon,.apexcharts-zoomin-icon,.apexcharts-zoomout-icon {\n  cursor: pointer;\n  width: 20px;\n  height: 20px;\n  line-height: 24px;\n  color: #6e8192;\n  text-align: center\n}\n\n.apexcharts-menu-icon svg,.apexcharts-reset-icon svg,.apexcharts-zoom-icon svg,.apexcharts-zoomin-icon svg,.apexcharts-zoomout-icon svg {\n  fill: #6e8192\n}\n\n.apexcharts-selection-icon svg {\n  fill: #444;\n  transform: scale(.76)\n}\n\n.apexcharts-theme-dark .apexcharts-menu-icon svg,.apexcharts-theme-dark .apexcharts-pan-icon svg,.apexcharts-theme-dark .apexcharts-reset-icon svg,.apexcharts-theme-dark .apexcharts-selection-icon svg,.apexcharts-theme-dark .apexcharts-toolbar-custom-icon svg,.apexcharts-theme-dark .apexcharts-zoom-icon svg,.apexcharts-theme-dark .apexcharts-zoomin-icon svg,.apexcharts-theme-dark .apexcharts-zoomout-icon svg {\n  fill: #f3f4f5\n}\n\n.apexcharts-canvas .apexcharts-reset-zoom-icon.apexcharts-selected svg,.apexcharts-canvas .apexcharts-selection-icon.apexcharts-selected svg,.apexcharts-canvas .apexcharts-zoom-icon.apexcharts-selected svg {\n  fill: #008ffb\n}\n\n.apexcharts-theme-light .apexcharts-menu-icon:hover svg,.apexcharts-theme-light .apexcharts-reset-icon:hover svg,.apexcharts-theme-light .apexcharts-selection-icon:not(.apexcharts-selected):hover svg,.apexcharts-theme-light .apexcharts-zoom-icon:not(.apexcharts-selected):hover svg,.apexcharts-theme-light .apexcharts-zoomin-icon:hover svg,.apexcharts-theme-light .apexcharts-zoomout-icon:hover svg {\n  fill: #333\n}\n\n.apexcharts-menu-icon,.apexcharts-selection-icon {\n  position: relative\n}\n\n.apexcharts-reset-icon {\n  margin-left: 5px\n}\n\n.apexcharts-menu-icon,.apexcharts-reset-icon,.apexcharts-zoom-icon {\n  transform: scale(.85)\n}\n\n.apexcharts-zoomin-icon,.apexcharts-zoomout-icon {\n  transform: scale(.7)\n}\n\n.apexcharts-zoomout-icon {\n  margin-right: 3px\n}\n\n.apexcharts-pan-icon {\n  transform: scale(.62);\n  position: relative;\n  left: 1px;\n  top: 0\n}\n\n.apexcharts-pan-icon svg {\n  fill: #fff;\n  stroke: #6e8192;\n  stroke-width: 2\n}\n\n.apexcharts-pan-icon.apexcharts-selected svg {\n  stroke: #008ffb\n}\n\n.apexcharts-pan-icon:not(.apexcharts-selected):hover svg {\n  stroke: #333\n}\n\n.apexcharts-toolbar {\n  position: absolute;\n  z-index: 11;\n  max-width: 176px;\n  text-align: right;\n  border-radius: 3px;\n  padding: 0 6px 2px;\n  display: flex;\n  justify-content: space-between;\n  align-items: center\n}\n\n.apexcharts-menu {\n  background: #fff;\n  position: absolute;\n  top: 100%;\n  border: 1px solid #ddd;\n  border-radius: 3px;\n  padding: 3px;\n  right: 10px;\n  opacity: 0;\n  min-width: 110px;\n  transition: .15s ease all;\n  pointer-events: none\n}\n\n.apexcharts-menu.apexcharts-menu-open {\n  opacity: 1;\n  pointer-events: all;\n  transition: .15s ease all\n}\n\n.apexcharts-menu-item {\n  padding: 6px 7px;\n  font-size: 12px;\n  cursor: pointer\n}\n\n.apexcharts-theme-light .apexcharts-menu-item:hover {\n  background: #eee\n}\n\n.apexcharts-theme-dark .apexcharts-menu {\n  background: rgba(0,0,0,.7);\n  color: #fff\n}\n\n@media screen and (min-width:768px) {\n  .apexcharts-canvas:hover .apexcharts-toolbar {\n      opacity: 1\n  }\n}\n\n.apexcharts-canvas .apexcharts-element-hidden,.apexcharts-datalabel.apexcharts-element-hidden,.apexcharts-hide .apexcharts-series-points {\n  opacity: 0\n}\n\n.apexcharts-hidden-element-shown {\n  opacity: 1;\n  transition: 0.25s ease all;\n}\n.apexcharts-datalabel,.apexcharts-datalabel-label,.apexcharts-datalabel-value,.apexcharts-datalabels,.apexcharts-pie-label {\n  cursor: default;\n  pointer-events: none\n}\n\n.apexcharts-pie-label-delay {\n  opacity: 0;\n  animation-name: opaque;\n  animation-duration: .3s;\n  animation-fill-mode: forwards;\n  animation-timing-function: ease\n}\n\n.apexcharts-radialbar-label {\n  cursor: pointer;\n}\n\n.apexcharts-annotation-rect,.apexcharts-area-series .apexcharts-area,.apexcharts-area-series .apexcharts-series-markers .apexcharts-marker.no-pointer-events,.apexcharts-gridline,.apexcharts-line,.apexcharts-line-series .apexcharts-series-markers .apexcharts-marker.no-pointer-events,.apexcharts-point-annotation-label,.apexcharts-radar-series path,.apexcharts-radar-series polygon,.apexcharts-toolbar svg,.apexcharts-tooltip .apexcharts-marker,.apexcharts-xaxis-annotation-label,.apexcharts-yaxis-annotation-label,.apexcharts-zoom-rect {\n  pointer-events: none\n}\n\n.apexcharts-marker {\n  transition: .15s ease all\n}\n\n.resize-triggers {\n  animation: 1ms resizeanim;\n  visibility: hidden;\n  opacity: 0;\n  height: 100%;\n  width: 100%;\n  overflow: hidden\n}\n\n.contract-trigger:before,.resize-triggers,.resize-triggers>div {\n  content: " ";\n  display: block;\n  position: absolute;\n  top: 0;\n  left: 0\n}\n\n.resize-triggers>div {\n  height: 100%;\n  width: 100%;\n  background: #eee;\n  overflow: auto\n}\n\n.contract-trigger:before {\n  overflow: hidden;\n  width: 200%;\n  height: 200%\n}\n\n.apexcharts-bar-goals-markers{\n  pointer-events: none\n}\n\n.apexcharts-bar-shadows{\n  pointer-events: none\n}\n\n.apexcharts-rangebar-goals-markers{\n  pointer-events: none\n}';var c=(null===(l=t.opts.chart)||void 0===l?void 0:l.nonce)||t.w.config.chart.nonce;c&&s.setAttribute("nonce",c),o?r.prepend(s):a.head.appendChild(s)}var u=t.create(t.w.config.series,{});if(!u)return e(t);t.mount(u).then((function(){"function"==typeof t.w.config.chart.events.mounted&&t.w.config.chart.events.mounted(t,t.w),t.events.fireEvent("mounted",[t,t.w]),e(u)})).catch((function(t){n(t)}))}else n(new Error("Element not found"))}))}},{key:"create",value:function(t,e){var n=this.w;new Ht(this).initModules();var i=this.w.globals;if(i.noData=!1,i.animationEnded=!1,this.responsive.checkResponsiveConfig(e),n.config.xaxis.convertedCatToNumeric&&new L(n.config).convertCatToNumericXaxis(n.config,this.ctx),null===this.el)return i.animationEnded=!0,null;if(this.core.setupElements(),"treemap"===n.config.chart.type&&(n.config.grid.show=!1,n.config.yaxis[0].show=!1),0===i.svgWidth)return i.animationEnded=!0,null;var r=x.checkComboSeries(t,n.config.chart.type);i.comboCharts=r.comboCharts,i.comboBarCount=r.comboBarCount;var o=t.every((function(t){return t.data&&0===t.data.length}));(0===t.length||o)&&this.series.handleNoData(),this.events.setupEventHandlers(),this.data.parseData(t),this.theme.init(),new z(this).setGlobalMarkerSize(),this.formatters.setLabelFormatters(),this.titleSubtitle.draw(),i.noData&&i.collapsedSeries.length!==i.series.length&&!n.config.legend.showForSingleSeries||this.legend.init(),this.series.hasAllSeriesEqualX(),i.axisCharts&&(this.core.coreCalculations(),"category"!==n.config.xaxis.type&&this.formatters.setLabelFormatters(),this.ctx.toolbar.minX=n.globals.minX,this.ctx.toolbar.maxX=n.globals.maxX),this.formatters.heatmapLabelFormatters(),new x(this).getLargestMarkerSize(),this.dimensions.plotCoords();var a=this.core.xySettings();this.grid.createGridMask();var s=this.core.plotChartType(t,a),l=new V(this);return l.bringForward(),n.config.dataLabels.background.enabled&&l.dataLabelsBackground(),this.core.shiftGraphPosition(),{elGraph:s,xyRatios:a,dimensions:{plot:{left:n.globals.translateX,top:n.globals.translateY,width:n.globals.gridWidth,height:n.globals.gridHeight}}}}},{key:"mount",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=this,i=n.w;return new Promise((function(r,o){if(null===n.el)return o(new Error("Not enough data to display or target element not found"));(null===e||i.globals.allSeriesCollapsed)&&n.series.handleNoData(),n.grid=new X(n);var a,s,l=n.grid.drawGrid();if(n.annotations=new E(n),n.annotations.drawImageAnnos(),n.annotations.drawTextAnnos(),"back"===i.config.grid.position&&(l&&i.globals.dom.elGraphical.add(l.el),null!=l&&null!==(a=l.elGridBorders)&&void 0!==a&&a.node&&i.globals.dom.elGraphical.add(l.elGridBorders)),Array.isArray(e.elGraph))for(var c=0;c<e.elGraph.length;c++)i.globals.dom.elGraphical.add(e.elGraph[c]);else i.globals.dom.elGraphical.add(e.elGraph);"front"===i.config.grid.position&&(l&&i.globals.dom.elGraphical.add(l.el),null!=l&&null!==(s=l.elGridBorders)&&void 0!==s&&s.node&&i.globals.dom.elGraphical.add(l.elGridBorders)),"front"===i.config.xaxis.crosshairs.position&&n.crosshairs.drawXCrosshairs(),"front"===i.config.yaxis[0].crosshairs.position&&n.crosshairs.drawYCrosshairs(),"treemap"!==i.config.chart.type&&n.axes.drawAxis(i.config.chart.type,l);var u=new Y(t.ctx,l),h=new U(t.ctx,l);if(null!==l&&(u.xAxisLabelCorrections(l.xAxisTickWidth),h.setYAxisTextAlignments(),i.config.yaxis.map((function(t,e){-1===i.globals.ignoreYAxisIndexes.indexOf(e)&&h.yAxisTitleRotate(e,t.opposite)}))),n.annotations.drawAxesAnnotations(),!i.globals.noData){if(i.config.tooltip.enabled&&!i.globals.noData&&n.w.globals.tooltip.drawTooltip(e.xyRatios),i.globals.axisCharts&&(i.globals.isXNumeric||i.config.xaxis.convertedCatToNumeric||i.globals.isRangeBar))(i.config.chart.zoom.enabled||i.config.chart.selection&&i.config.chart.selection.enabled||i.config.chart.pan&&i.config.chart.pan.enabled)&&n.zoomPanSelection.init({xyRatios:e.xyRatios});else{var d=i.config.chart.toolbar.tools;["zoom","zoomin","zoomout","selection","pan","reset"].forEach((function(t){d[t]=!1}))}i.config.chart.toolbar.show&&!i.globals.allSeriesCollapsed&&n.toolbar.createToolbar()}i.globals.memory.methodsToExec.length>0&&i.globals.memory.methodsToExec.forEach((function(t){t.method(t.params,!1,t.context)})),i.globals.axisCharts||i.globals.noData||n.core.resizeNonAxisCharts(),r(n)}))}},{key:"destroy",value:function(){var t,e;window.removeEventListener("resize",this.windowResizeHandler),this.el.parentNode,t=this.parentResizeHandler,(e=jt.get(t))&&(e.disconnect(),jt.delete(t));var n=this.w.config.chart.id;n&&Apex._chartInstances.forEach((function(t,e){t.id===m.escapeString(n)&&Apex._chartInstances.splice(e,1)})),new Wt(this.ctx).clear({isUpdating:!1})}},{key:"updateOptions",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1],i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],r=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],a=this.w;return a.globals.selection=void 0,t.series&&(this.series.resetSeries(!1,!0,!1),t.series.length&&t.series[0].data&&(t.series=t.series.map((function(t,n){return e.updateHelpers._extendSeries(t,n)}))),this.updateHelpers.revertDefaultAxisMinMax()),t.xaxis&&(t=this.updateHelpers.forceXAxisUpdate(t)),t.yaxis&&(t=this.updateHelpers.forceYAxisUpdate(t)),a.globals.collapsedSeriesIndices.length>0&&this.series.clearPreviousPaths(),t.theme&&(t=this.theme.updateThemeOptions(t)),this.updateHelpers._updateOptions(t,n,i,r,o)}},{key:"updateSeries",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(t,e,n)}},{key:"appendSeries",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],i=this.w.config.series.slice();return i.push(t),this.series.resetSeries(!1),this.updateHelpers.revertDefaultAxisMinMax(),this.updateHelpers._updateSeries(i,e,n)}},{key:"appendData",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this;n.w.globals.dataChanged=!0,n.series.getPreviousPaths();for(var i=n.w.config.series.slice(),r=0;r<i.length;r++)if(null!==t[r]&&void 0!==t[r])for(var o=0;o<t[r].data.length;o++)i[r].data.push(t[r].data[o]);return n.w.config.series=i,e&&(n.w.globals.initialSeries=m.clone(n.w.config.series)),this.update()}},{key:"update",value:function(t){var e=this;return new Promise((function(n,i){new Wt(e.ctx).clear({isUpdating:!0});var r=e.create(e.w.config.series,t);if(!r)return n(e);e.mount(r).then((function(){"function"==typeof e.w.config.chart.events.updated&&e.w.config.chart.events.updated(e,e.w),e.events.fireEvent("updated",[e,e.w]),e.w.globals.isDirty=!0,n(e)})).catch((function(t){i(t)}))}))}},{key:"getSyncedCharts",value:function(){var t=this.getGroupedCharts(),e=[this];return t.length&&(e=[],t.forEach((function(t){e.push(t)}))),e}},{key:"getGroupedCharts",value:function(){var t=this;return Apex._chartInstances.filter((function(t){if(t.group)return!0})).map((function(e){return t.w.config.chart.group===e.group?e.chart:t}))}},{key:"toggleSeries",value:function(t){return this.series.toggleSeries(t)}},{key:"highlightSeriesOnLegendHover",value:function(t,e){return this.series.toggleSeriesOnHover(t,e)}},{key:"showSeries",value:function(t){this.series.showSeries(t)}},{key:"hideSeries",value:function(t){this.series.hideSeries(t)}},{key:"isSeriesHidden",value:function(t){this.series.isSeriesHidden(t)}},{key:"resetSeries",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.series.resetSeries(t,e)}},{key:"addEventListener",value:function(t,e){this.events.addEventListener(t,e)}},{key:"removeEventListener",value:function(t,e){this.events.removeEventListener(t,e)}},{key:"addXaxisAnnotation",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=this;n&&(i=n),i.annotations.addXaxisAnnotationExternal(t,e,i)}},{key:"addYaxisAnnotation",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=this;n&&(i=n),i.annotations.addYaxisAnnotationExternal(t,e,i)}},{key:"addPointAnnotation",value:function(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=this;n&&(i=n),i.annotations.addPointAnnotationExternal(t,e,i)}},{key:"clearAnnotations",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:void 0,e=this;t&&(e=t),e.annotations.clearAnnotations(e)}},{key:"removeAnnotation",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=this;e&&(n=e),n.annotations.removeAnnotation(n,t)}},{key:"getChartArea",value:function(){return this.w.globals.dom.baseEl.querySelector(".apexcharts-inner")}},{key:"getSeriesTotalXRange",value:function(t,e){return this.coreUtils.getSeriesTotalsXRange(t,e)}},{key:"getHighestValueInSeries",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new q(this.ctx).getMinYMaxY(t).highestY}},{key:"getLowestValueInSeries",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0;return new q(this.ctx).getMinYMaxY(t).lowestY}},{key:"getSeriesTotal",value:function(){return this.w.globals.seriesTotals}},{key:"toggleDataPointSelection",value:function(t,e){return this.updateHelpers.toggleDataPointSelection(t,e)}},{key:"zoomX",value:function(t,e){this.ctx.toolbar.zoomUpdateOptions(t,e)}},{key:"setLocale",value:function(t){this.localization.setCurrentLocaleValues(t)}},{key:"dataURI",value:function(t){return new j(this.ctx).dataURI(t)}},{key:"exportToCSV",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new j(this.ctx).exportToCSV(t)}},{key:"paper",value:function(){return this.w.globals.dom.Paper}},{key:"_parentResizeCallback",value:function(){this.w.globals.animationEnded&&this.w.config.chart.redrawOnParentResize&&this._windowResize()}},{key:"_windowResize",value:function(){var t=this;clearTimeout(this.w.globals.resizeTimer),this.w.globals.resizeTimer=window.setTimeout((function(){t.w.globals.resized=!0,t.w.globals.dataChanged=!1,t.ctx.update()}),150)}},{key:"_windowResizeHandler",value:function(){var t=this.w.config.chart.redrawOnWindowResize;"function"==typeof t&&(t=t()),t&&this._windowResize()}}],[{key:"getChartByID",value:function(t){var e=m.escapeString(t);if(Apex._chartInstances){var n=Apex._chartInstances.filter((function(t){return t.id===e}))[0];return n&&n.chart}}},{key:"initOnLoad",value:function(){for(var e=document.querySelectorAll("[data-apexcharts]"),n=0;n<e.length;n++)new t(e[n],JSON.parse(e[n].getAttribute("data-options"))).render()}},{key:"exec",value:function(t,e){var n=this.getChartByID(t);if(n){n.w.globals.isExecCalled=!0;var i=null;if(-1!==n.publicMethods.indexOf(e)){for(var r=arguments.length,o=new Array(r>2?r-2:0),a=2;a<r;a++)o[a-2]=arguments[a];i=n[e].apply(n,o)}return i}}},{key:"merge",value:function(t,e){return m.extend(t,e)}}]),t}();return Yt})),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).bootstrap=e()}(this,(function(){"use strict";const t=new Map,e={set(e,n,i){t.has(e)||t.set(e,new Map);const r=t.get(e);r.has(n)||0===r.size?r.set(n,i):console.error(`Bootstrap doesn't allow more than one instance per element. Bound instance: ${Array.from(r.keys())[0]}.`)},get:(e,n)=>t.has(e)&&t.get(e).get(n)||null,remove(e,n){if(!t.has(e))return;const i=t.get(e);i.delete(n),0===i.size&&t.delete(e)}},n="transitionend",i=t=>(t&&window.CSS&&window.CSS.escape&&(t=t.replace(/#([^\s"#']+)/g,((t,e)=>`#${CSS.escape(e)}`))),t),r=t=>{t.dispatchEvent(new Event(n))},o=t=>!(!t||"object"!=typeof t)&&(void 0!==t.jquery&&(t=t[0]),void 0!==t.nodeType),a=t=>o(t)?t.jquery?t[0]:t:"string"==typeof t&&t.length>0?document.querySelector(i(t)):null,s=t=>{if(!o(t)||0===t.getClientRects().length)return!1;const e="visible"===getComputedStyle(t).getPropertyValue("visibility"),n=t.closest("details:not([open])");if(!n)return e;if(n!==t){const e=t.closest("summary");if(e&&e.parentNode!==n)return!1;if(null===e)return!1}return e},l=t=>!t||t.nodeType!==Node.ELEMENT_NODE||!!t.classList.contains("disabled")||(void 0!==t.disabled?t.disabled:t.hasAttribute("disabled")&&"false"!==t.getAttribute("disabled")),c=t=>{if(!document.documentElement.attachShadow)return null;if("function"==typeof t.getRootNode){const e=t.getRootNode();return e instanceof ShadowRoot?e:null}return t instanceof ShadowRoot?t:t.parentNode?c(t.parentNode):null},u=()=>{},h=t=>{t.offsetHeight},d=()=>window.jQuery&&!document.body.hasAttribute("data-bs-no-jquery")?window.jQuery:null,p=[],f=()=>"rtl"===document.documentElement.dir,g=t=>{var e;e=()=>{const e=d();if(e){const n=t.NAME,i=e.fn[n];e.fn[n]=t.jQueryInterface,e.fn[n].Constructor=t,e.fn[n].noConflict=()=>(e.fn[n]=i,t.jQueryInterface)}},"loading"===document.readyState?(p.length||document.addEventListener("DOMContentLoaded",(()=>{for(const t of p)t()})),p.push(e)):e()},m=(t,e=[],n=t)=>"function"==typeof t?t(...e):n,v=(t,e,i=!0)=>{if(!i)return void m(t);const o=(t=>{if(!t)return 0;let{transitionDuration:e,transitionDelay:n}=window.getComputedStyle(t);const i=Number.parseFloat(e),r=Number.parseFloat(n);return i||r?(e=e.split(",")[0],n=n.split(",")[0],1e3*(Number.parseFloat(e)+Number.parseFloat(n))):0})(e)+5;let a=!1;const s=({target:i})=>{i===e&&(a=!0,e.removeEventListener(n,s),m(t))};e.addEventListener(n,s),setTimeout((()=>{a||r(e)}),o)},y=(t,e,n,i)=>{const r=t.length;let o=t.indexOf(e);return-1===o?!n&&i?t[r-1]:t[0]:(o+=n?1:-1,i&&(o=(o+r)%r),t[Math.max(0,Math.min(o,r-1))])},b=/[^.]*(?=\..*)\.|.*/,x=/\..*/,_=/::\d+$/,w={};let S=1;const C={mouseenter:"mouseover",mouseleave:"mouseout"},k=new Set(["click","dblclick","mouseup","mousedown","contextmenu","mousewheel","DOMMouseScroll","mouseover","mouseout","mousemove","selectstart","selectend","keydown","keypress","keyup","orientationchange","touchstart","touchmove","touchend","touchcancel","pointerdown","pointermove","pointerup","pointerleave","pointercancel","gesturestart","gesturechange","gestureend","focus","blur","change","reset","select","submit","focusin","focusout","load","unload","beforeunload","resize","move","DOMContentLoaded","readystatechange","error","abort","scroll"]);function A(t,e){return e&&`${e}::${S++}`||t.uidEvent||S++}function M(t){const e=A(t);return t.uidEvent=e,w[e]=w[e]||{},w[e]}function T(t,e,n=null){return Object.values(t).find((t=>t.callable===e&&t.delegationSelector===n))}function I(t,e,n){const i="string"==typeof e,r=i?n:e||n;let o=L(t);return k.has(o)||(o=t),[i,r,o]}function E(t,e,n,i,r){if("string"!=typeof e||!t)return;let[o,a,s]=I(e,n,i);if(e in C){const t=t=>function(e){if(!e.relatedTarget||e.relatedTarget!==e.delegateTarget&&!e.delegateTarget.contains(e.relatedTarget))return t.call(this,e)};a=t(a)}const l=M(t),c=l[s]||(l[s]={}),u=T(c,a,o?n:null);if(u)return void(u.oneOff=u.oneOff&&r);const h=A(a,e.replace(b,"")),d=o?function(t,e,n){return function i(r){const o=t.querySelectorAll(e);for(let{target:a}=r;a&&a!==this;a=a.parentNode)for(const s of o)if(s===a)return N(r,{delegateTarget:a}),i.oneOff&&P.off(t,r.type,e,n),n.apply(a,[r])}}(t,n,a):function(t,e){return function n(i){return N(i,{delegateTarget:t}),n.oneOff&&P.off(t,i.type,e),e.apply(t,[i])}}(t,a);d.delegationSelector=o?n:null,d.callable=a,d.oneOff=r,d.uidEvent=h,c[h]=d,t.addEventListener(s,d,o)}function O(t,e,n,i,r){const o=T(e[n],i,r);o&&(t.removeEventListener(n,o,Boolean(r)),delete e[n][o.uidEvent])}function D(t,e,n,i){const r=e[n]||{};for(const[o,a]of Object.entries(r))o.includes(i)&&O(t,e,n,a.callable,a.delegationSelector)}function L(t){return t=t.replace(x,""),C[t]||t}const P={on(t,e,n,i){E(t,e,n,i,!1)},one(t,e,n,i){E(t,e,n,i,!0)},off(t,e,n,i){if("string"!=typeof e||!t)return;const[r,o,a]=I(e,n,i),s=a!==e,l=M(t),c=l[a]||{},u=e.startsWith(".");if(void 0===o){if(u)for(const n of Object.keys(l))D(t,l,n,e.slice(1));for(const[n,i]of Object.entries(c)){const r=n.replace(_,"");s&&!e.includes(r)||O(t,l,a,i.callable,i.delegationSelector)}}else{if(!Object.keys(c).length)return;O(t,l,a,o,r?n:null)}},trigger(t,e,n){if("string"!=typeof e||!t)return null;const i=d();let r=null,o=!0,a=!0,s=!1;e!==L(e)&&i&&(r=i.Event(e,n),i(t).trigger(r),o=!r.isPropagationStopped(),a=!r.isImmediatePropagationStopped(),s=r.isDefaultPrevented());const l=N(new Event(e,{bubbles:o,cancelable:!0}),n);return s&&l.preventDefault(),a&&t.dispatchEvent(l),l.defaultPrevented&&r&&r.preventDefault(),l}};function N(t,e={}){for(const[n,i]of Object.entries(e))try{t[n]=i}catch(e){Object.defineProperty(t,n,{configurable:!0,get:()=>i})}return t}function R(t){if("true"===t)return!0;if("false"===t)return!1;if(t===Number(t).toString())return Number(t);if(""===t||"null"===t)return null;if("string"!=typeof t)return t;try{return JSON.parse(decodeURIComponent(t))}catch(e){return t}}function B(t){return t.replace(/[A-Z]/g,(t=>`-${t.toLowerCase()}`))}const z={setDataAttribute(t,e,n){t.setAttribute(`data-bs-${B(e)}`,n)},removeDataAttribute(t,e){t.removeAttribute(`data-bs-${B(e)}`)},getDataAttributes(t){if(!t)return{};const e={},n=Object.keys(t.dataset).filter((t=>t.startsWith("bs")&&!t.startsWith("bsConfig")));for(const i of n){let n=i.replace(/^bs/,"");n=n.charAt(0).toLowerCase()+n.slice(1,n.length),e[n]=R(t.dataset[i])}return e},getDataAttribute:(t,e)=>R(t.getAttribute(`data-bs-${B(e)}`))};class F{static get Default(){return{}}static get DefaultType(){return{}}static get NAME(){throw new Error('You have to implement the static method "NAME", for each component!')}_getConfig(t){return t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t}_mergeConfigObj(t,e){const n=o(e)?z.getDataAttribute(e,"config"):{};return{...this.constructor.Default,..."object"==typeof n?n:{},...o(e)?z.getDataAttributes(e):{},..."object"==typeof t?t:{}}}_typeCheckConfig(t,e=this.constructor.DefaultType){for(const[i,r]of Object.entries(e)){const e=t[i],a=o(e)?"element":null==(n=e)?`${n}`:Object.prototype.toString.call(n).match(/\s([a-z]+)/i)[1].toLowerCase();if(!new RegExp(r).test(a))throw new TypeError(`${this.constructor.NAME.toUpperCase()}: Option "${i}" provided type "${a}" but expected type "${r}".`)}var n}}class V extends F{constructor(t,n){super(),(t=a(t))&&(this._element=t,this._config=this._getConfig(n),e.set(this._element,this.constructor.DATA_KEY,this))}dispose(){e.remove(this._element,this.constructor.DATA_KEY),P.off(this._element,this.constructor.EVENT_KEY);for(const t of Object.getOwnPropertyNames(this))this[t]=null}_queueCallback(t,e,n=!0){v(t,e,n)}_getConfig(t){return t=this._mergeConfigObj(t,this._element),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}static getInstance(t){return e.get(a(t),this.DATA_KEY)}static getOrCreateInstance(t,e={}){return this.getInstance(t)||new this(t,"object"==typeof e?e:null)}static get VERSION(){return"5.3.3"}static get DATA_KEY(){return`bs.${this.NAME}`}static get EVENT_KEY(){return`.${this.DATA_KEY}`}static eventName(t){return`${t}${this.EVENT_KEY}`}}const H=t=>{let e=t.getAttribute("data-bs-target");if(!e||"#"===e){let n=t.getAttribute("href");if(!n||!n.includes("#")&&!n.startsWith("."))return null;n.includes("#")&&!n.startsWith("#")&&(n=`#${n.split("#")[1]}`),e=n&&"#"!==n?n.trim():null}return e?e.split(",").map((t=>i(t))).join(","):null},W={find:(t,e=document.documentElement)=>[].concat(...Element.prototype.querySelectorAll.call(e,t)),findOne:(t,e=document.documentElement)=>Element.prototype.querySelector.call(e,t),children:(t,e)=>[].concat(...t.children).filter((t=>t.matches(e))),parents(t,e){const n=[];let i=t.parentNode.closest(e);for(;i;)n.push(i),i=i.parentNode.closest(e);return n},prev(t,e){let n=t.previousElementSibling;for(;n;){if(n.matches(e))return[n];n=n.previousElementSibling}return[]},next(t,e){let n=t.nextElementSibling;for(;n;){if(n.matches(e))return[n];n=n.nextElementSibling}return[]},focusableChildren(t){const e=["a","button","input","textarea","select","details","[tabindex]",'[contenteditable="true"]'].map((t=>`${t}:not([tabindex^="-"])`)).join(",");return this.find(e,t).filter((t=>!l(t)&&s(t)))},getSelectorFromElement(t){const e=H(t);return e&&W.findOne(e)?e:null},getElementFromSelector(t){const e=H(t);return e?W.findOne(e):null},getMultipleElementsFromSelector(t){const e=H(t);return e?W.find(e):[]}},j=(t,e="hide")=>{const n=`click.dismiss${t.EVENT_KEY}`,i=t.NAME;P.on(document,n,`[data-bs-dismiss="${i}"]`,(function(n){if(["A","AREA"].includes(this.tagName)&&n.preventDefault(),l(this))return;const r=W.getElementFromSelector(this)||this.closest(`.${i}`);t.getOrCreateInstance(r)[e]()}))},Y=".bs.alert",X=`close${Y}`,G=`closed${Y}`;class q extends V{static get NAME(){return"alert"}close(){if(P.trigger(this._element,X).defaultPrevented)return;this._element.classList.remove("show");const t=this._element.classList.contains("fade");this._queueCallback((()=>this._destroyElement()),this._element,t)}_destroyElement(){this._element.remove(),P.trigger(this._element,G),this.dispose()}static jQueryInterface(t){return this.each((function(){const e=q.getOrCreateInstance(this);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}j(q,"close"),g(q);const U='[data-bs-toggle="button"]';class $ extends V{static get NAME(){return"button"}toggle(){this._element.setAttribute("aria-pressed",this._element.classList.toggle("active"))}static jQueryInterface(t){return this.each((function(){const e=$.getOrCreateInstance(this);"toggle"===t&&e[t]()}))}}P.on(document,"click.bs.button.data-api",U,(t=>{t.preventDefault();const e=t.target.closest(U);$.getOrCreateInstance(e).toggle()})),g($);const Z=".bs.swipe",K=`touchstart${Z}`,Q=`touchmove${Z}`,J=`touchend${Z}`,tt=`pointerdown${Z}`,et=`pointerup${Z}`,nt={endCallback:null,leftCallback:null,rightCallback:null},it={endCallback:"(function|null)",leftCallback:"(function|null)",rightCallback:"(function|null)"};class rt extends F{constructor(t,e){super(),this._element=t,t&&rt.isSupported()&&(this._config=this._getConfig(e),this._deltaX=0,this._supportPointerEvents=Boolean(window.PointerEvent),this._initEvents())}static get Default(){return nt}static get DefaultType(){return it}static get NAME(){return"swipe"}dispose(){P.off(this._element,Z)}_start(t){this._supportPointerEvents?this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX):this._deltaX=t.touches[0].clientX}_end(t){this._eventIsPointerPenTouch(t)&&(this._deltaX=t.clientX-this._deltaX),this._handleSwipe(),m(this._config.endCallback)}_move(t){this._deltaX=t.touches&&t.touches.length>1?0:t.touches[0].clientX-this._deltaX}_handleSwipe(){const t=Math.abs(this._deltaX);if(t<=40)return;const e=t/this._deltaX;this._deltaX=0,e&&m(e>0?this._config.rightCallback:this._config.leftCallback)}_initEvents(){this._supportPointerEvents?(P.on(this._element,tt,(t=>this._start(t))),P.on(this._element,et,(t=>this._end(t))),this._element.classList.add("pointer-event")):(P.on(this._element,K,(t=>this._start(t))),P.on(this._element,Q,(t=>this._move(t))),P.on(this._element,J,(t=>this._end(t))))}_eventIsPointerPenTouch(t){return this._supportPointerEvents&&("pen"===t.pointerType||"touch"===t.pointerType)}static isSupported(){return"ontouchstart"in document.documentElement||navigator.maxTouchPoints>0}}const ot=".bs.carousel",at=".data-api",st="next",lt="prev",ct="left",ut="right",ht=`slide${ot}`,dt=`slid${ot}`,pt=`keydown${ot}`,ft=`mouseenter${ot}`,gt=`mouseleave${ot}`,mt=`dragstart${ot}`,vt=`load${ot}${at}`,yt=`click${ot}${at}`,bt="carousel",xt="active",_t=".active",wt=".carousel-item",St={ArrowLeft:ut,ArrowRight:ct},Ct={interval:5e3,keyboard:!0,pause:"hover",ride:!1,touch:!0,wrap:!0},kt={interval:"(number|boolean)",keyboard:"boolean",pause:"(string|boolean)",ride:"(boolean|string)",touch:"boolean",wrap:"boolean"};class At extends V{constructor(t,e){super(t,e),this._interval=null,this._activeElement=null,this._isSliding=!1,this.touchTimeout=null,this._swipeHelper=null,this._indicatorsElement=W.findOne(".carousel-indicators",this._element),this._addEventListeners(),this._config.ride===bt&&this.cycle()}static get Default(){return Ct}static get DefaultType(){return kt}static get NAME(){return"carousel"}next(){this._slide(st)}nextWhenVisible(){!document.hidden&&s(this._element)&&this.next()}prev(){this._slide(lt)}pause(){this._isSliding&&r(this._element),this._clearInterval()}cycle(){this._clearInterval(),this._updateInterval(),this._interval=setInterval((()=>this.nextWhenVisible()),this._config.interval)}_maybeEnableCycle(){this._config.ride&&(this._isSliding?P.one(this._element,dt,(()=>this.cycle())):this.cycle())}to(t){const e=this._getItems();if(t>e.length-1||t<0)return;if(this._isSliding)return void P.one(this._element,dt,(()=>this.to(t)));const n=this._getItemIndex(this._getActive());if(n===t)return;const i=t>n?st:lt;this._slide(i,e[t])}dispose(){this._swipeHelper&&this._swipeHelper.dispose(),super.dispose()}_configAfterMerge(t){return t.defaultInterval=t.interval,t}_addEventListeners(){this._config.keyboard&&P.on(this._element,pt,(t=>this._keydown(t))),"hover"===this._config.pause&&(P.on(this._element,ft,(()=>this.pause())),P.on(this._element,gt,(()=>this._maybeEnableCycle()))),this._config.touch&&rt.isSupported()&&this._addTouchEventListeners()}_addTouchEventListeners(){for(const t of W.find(".carousel-item img",this._element))P.on(t,mt,(t=>t.preventDefault()));const t={leftCallback:()=>this._slide(this._directionToOrder(ct)),rightCallback:()=>this._slide(this._directionToOrder(ut)),endCallback:()=>{"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout((()=>this._maybeEnableCycle()),500+this._config.interval))}};this._swipeHelper=new rt(this._element,t)}_keydown(t){if(/input|textarea/i.test(t.target.tagName))return;const e=St[t.key];e&&(t.preventDefault(),this._slide(this._directionToOrder(e)))}_getItemIndex(t){return this._getItems().indexOf(t)}_setActiveIndicatorElement(t){if(!this._indicatorsElement)return;const e=W.findOne(_t,this._indicatorsElement);e.classList.remove(xt),e.removeAttribute("aria-current");const n=W.findOne(`[data-bs-slide-to="${t}"]`,this._indicatorsElement);n&&(n.classList.add(xt),n.setAttribute("aria-current","true"))}_updateInterval(){const t=this._activeElement||this._getActive();if(!t)return;const e=Number.parseInt(t.getAttribute("data-bs-interval"),10);this._config.interval=e||this._config.defaultInterval}_slide(t,e=null){if(this._isSliding)return;const n=this._getActive(),i=t===st,r=e||y(this._getItems(),n,i,this._config.wrap);if(r===n)return;const o=this._getItemIndex(r),a=e=>P.trigger(this._element,e,{relatedTarget:r,direction:this._orderToDirection(t),from:this._getItemIndex(n),to:o});if(a(ht).defaultPrevented)return;if(!n||!r)return;const s=Boolean(this._interval);this.pause(),this._isSliding=!0,this._setActiveIndicatorElement(o),this._activeElement=r;const l=i?"carousel-item-start":"carousel-item-end",c=i?"carousel-item-next":"carousel-item-prev";r.classList.add(c),h(r),n.classList.add(l),r.classList.add(l),this._queueCallback((()=>{r.classList.remove(l,c),r.classList.add(xt),n.classList.remove(xt,c,l),this._isSliding=!1,a(dt)}),n,this._isAnimated()),s&&this.cycle()}_isAnimated(){return this._element.classList.contains("slide")}_getActive(){return W.findOne(".active.carousel-item",this._element)}_getItems(){return W.find(wt,this._element)}_clearInterval(){this._interval&&(clearInterval(this._interval),this._interval=null)}_directionToOrder(t){return f()?t===ct?lt:st:t===ct?st:lt}_orderToDirection(t){return f()?t===lt?ct:ut:t===lt?ut:ct}static jQueryInterface(t){return this.each((function(){const e=At.getOrCreateInstance(this,t);if("number"!=typeof t){if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t]()}}else e.to(t)}))}}P.on(document,yt,"[data-bs-slide], [data-bs-slide-to]",(function(t){const e=W.getElementFromSelector(this);if(!e||!e.classList.contains(bt))return;t.preventDefault();const n=At.getOrCreateInstance(e),i=this.getAttribute("data-bs-slide-to");return i?(n.to(i),void n._maybeEnableCycle()):"next"===z.getDataAttribute(this,"slide")?(n.next(),void n._maybeEnableCycle()):(n.prev(),void n._maybeEnableCycle())})),P.on(window,vt,(()=>{const t=W.find('[data-bs-ride="carousel"]');for(const e of t)At.getOrCreateInstance(e)})),g(At);const Mt=".bs.collapse",Tt=`show${Mt}`,It=`shown${Mt}`,Et=`hide${Mt}`,Ot=`hidden${Mt}`,Dt=`click${Mt}.data-api`,Lt="show",Pt="collapse",Nt="collapsing",Rt=`:scope .${Pt} .${Pt}`,Bt='[data-bs-toggle="collapse"]',zt={parent:null,toggle:!0},Ft={parent:"(null|element)",toggle:"boolean"};class Vt extends V{constructor(t,e){super(t,e),this._isTransitioning=!1,this._triggerArray=[];const n=W.find(Bt);for(const t of n){const e=W.getSelectorFromElement(t),n=W.find(e).filter((t=>t===this._element));null!==e&&n.length&&this._triggerArray.push(t)}this._initializeChildren(),this._config.parent||this._addAriaAndCollapsedClass(this._triggerArray,this._isShown()),this._config.toggle&&this.toggle()}static get Default(){return zt}static get DefaultType(){return Ft}static get NAME(){return"collapse"}toggle(){this._isShown()?this.hide():this.show()}show(){if(this._isTransitioning||this._isShown())return;let t=[];if(this._config.parent&&(t=this._getFirstLevelChildren(".collapse.show, .collapse.collapsing").filter((t=>t!==this._element)).map((t=>Vt.getOrCreateInstance(t,{toggle:!1})))),t.length&&t[0]._isTransitioning)return;if(P.trigger(this._element,Tt).defaultPrevented)return;for(const e of t)e.hide();const e=this._getDimension();this._element.classList.remove(Pt),this._element.classList.add(Nt),this._element.style[e]=0,this._addAriaAndCollapsedClass(this._triggerArray,!0),this._isTransitioning=!0;const n=`scroll${e[0].toUpperCase()+e.slice(1)}`;this._queueCallback((()=>{this._isTransitioning=!1,this._element.classList.remove(Nt),this._element.classList.add(Pt,Lt),this._element.style[e]="",P.trigger(this._element,It)}),this._element,!0),this._element.style[e]=`${this._element[n]}px`}hide(){if(this._isTransitioning||!this._isShown())return;if(P.trigger(this._element,Et).defaultPrevented)return;const t=this._getDimension();this._element.style[t]=`${this._element.getBoundingClientRect()[t]}px`,h(this._element),this._element.classList.add(Nt),this._element.classList.remove(Pt,Lt);for(const t of this._triggerArray){const e=W.getElementFromSelector(t);e&&!this._isShown(e)&&this._addAriaAndCollapsedClass([t],!1)}this._isTransitioning=!0,this._element.style[t]="",this._queueCallback((()=>{this._isTransitioning=!1,this._element.classList.remove(Nt),this._element.classList.add(Pt),P.trigger(this._element,Ot)}),this._element,!0)}_isShown(t=this._element){return t.classList.contains(Lt)}_configAfterMerge(t){return t.toggle=Boolean(t.toggle),t.parent=a(t.parent),t}_getDimension(){return this._element.classList.contains("collapse-horizontal")?"width":"height"}_initializeChildren(){if(!this._config.parent)return;const t=this._getFirstLevelChildren(Bt);for(const e of t){const t=W.getElementFromSelector(e);t&&this._addAriaAndCollapsedClass([e],this._isShown(t))}}_getFirstLevelChildren(t){const e=W.find(Rt,this._config.parent);return W.find(t,this._config.parent).filter((t=>!e.includes(t)))}_addAriaAndCollapsedClass(t,e){if(t.length)for(const n of t)n.classList.toggle("collapsed",!e),n.setAttribute("aria-expanded",e)}static jQueryInterface(t){const e={};return"string"==typeof t&&/show|hide/.test(t)&&(e.toggle=!1),this.each((function(){const n=Vt.getOrCreateInstance(this,e);if("string"==typeof t){if(void 0===n[t])throw new TypeError(`No method named "${t}"`);n[t]()}}))}}P.on(document,Dt,Bt,(function(t){("A"===t.target.tagName||t.delegateTarget&&"A"===t.delegateTarget.tagName)&&t.preventDefault();for(const t of W.getMultipleElementsFromSelector(this))Vt.getOrCreateInstance(t,{toggle:!1}).toggle()})),g(Vt);var Ht="top",Wt="bottom",jt="right",Yt="left",Xt="auto",Gt=[Ht,Wt,jt,Yt],qt="start",Ut="end",$t="clippingParents",Zt="viewport",Kt="popper",Qt="reference",Jt=Gt.reduce((function(t,e){return t.concat([e+"-"+qt,e+"-"+Ut])}),[]),te=[].concat(Gt,[Xt]).reduce((function(t,e){return t.concat([e,e+"-"+qt,e+"-"+Ut])}),[]),ee="beforeRead",ne="read",ie="afterRead",re="beforeMain",oe="main",ae="afterMain",se="beforeWrite",le="write",ce="afterWrite",ue=[ee,ne,ie,re,oe,ae,se,le,ce];function he(t){return t?(t.nodeName||"").toLowerCase():null}function de(t){if(null==t)return window;if("[object Window]"!==t.toString()){var e=t.ownerDocument;return e&&e.defaultView||window}return t}function pe(t){return t instanceof de(t).Element||t instanceof Element}function fe(t){return t instanceof de(t).HTMLElement||t instanceof HTMLElement}function ge(t){return"undefined"!=typeof ShadowRoot&&(t instanceof de(t).ShadowRoot||t instanceof ShadowRoot)}const me={name:"applyStyles",enabled:!0,phase:"write",fn:function(t){var e=t.state;Object.keys(e.elements).forEach((function(t){var n=e.styles[t]||{},i=e.attributes[t]||{},r=e.elements[t];fe(r)&&he(r)&&(Object.assign(r.style,n),Object.keys(i).forEach((function(t){var e=i[t];!1===e?r.removeAttribute(t):r.setAttribute(t,!0===e?"":e)})))}))},effect:function(t){var e=t.state,n={popper:{position:e.options.strategy,left:"0",top:"0",margin:"0"},arrow:{position:"absolute"},reference:{}};return Object.assign(e.elements.popper.style,n.popper),e.styles=n,e.elements.arrow&&Object.assign(e.elements.arrow.style,n.arrow),function(){Object.keys(e.elements).forEach((function(t){var i=e.elements[t],r=e.attributes[t]||{},o=Object.keys(e.styles.hasOwnProperty(t)?e.styles[t]:n[t]).reduce((function(t,e){return t[e]="",t}),{});fe(i)&&he(i)&&(Object.assign(i.style,o),Object.keys(r).forEach((function(t){i.removeAttribute(t)})))}))}},requires:["computeStyles"]};function ve(t){return t.split("-")[0]}var ye=Math.max,be=Math.min,xe=Math.round;function _e(){var t=navigator.userAgentData;return null!=t&&t.brands&&Array.isArray(t.brands)?t.brands.map((function(t){return t.brand+"/"+t.version})).join(" "):navigator.userAgent}function we(){return!/^((?!chrome|android).)*safari/i.test(_e())}function Se(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=!1);var i=t.getBoundingClientRect(),r=1,o=1;e&&fe(t)&&(r=t.offsetWidth>0&&xe(i.width)/t.offsetWidth||1,o=t.offsetHeight>0&&xe(i.height)/t.offsetHeight||1);var a=(pe(t)?de(t):window).visualViewport,s=!we()&&n,l=(i.left+(s&&a?a.offsetLeft:0))/r,c=(i.top+(s&&a?a.offsetTop:0))/o,u=i.width/r,h=i.height/o;return{width:u,height:h,top:c,right:l+u,bottom:c+h,left:l,x:l,y:c}}function Ce(t){var e=Se(t),n=t.offsetWidth,i=t.offsetHeight;return Math.abs(e.width-n)<=1&&(n=e.width),Math.abs(e.height-i)<=1&&(i=e.height),{x:t.offsetLeft,y:t.offsetTop,width:n,height:i}}function ke(t,e){var n=e.getRootNode&&e.getRootNode();if(t.contains(e))return!0;if(n&&ge(n)){var i=e;do{if(i&&t.isSameNode(i))return!0;i=i.parentNode||i.host}while(i)}return!1}function Ae(t){return de(t).getComputedStyle(t)}function Me(t){return["table","td","th"].indexOf(he(t))>=0}function Te(t){return((pe(t)?t.ownerDocument:t.document)||window.document).documentElement}function Ie(t){return"html"===he(t)?t:t.assignedSlot||t.parentNode||(ge(t)?t.host:null)||Te(t)}function Ee(t){return fe(t)&&"fixed"!==Ae(t).position?t.offsetParent:null}function Oe(t){for(var e=de(t),n=Ee(t);n&&Me(n)&&"static"===Ae(n).position;)n=Ee(n);return n&&("html"===he(n)||"body"===he(n)&&"static"===Ae(n).position)?e:n||function(t){var e=/firefox/i.test(_e());if(/Trident/i.test(_e())&&fe(t)&&"fixed"===Ae(t).position)return null;var n=Ie(t);for(ge(n)&&(n=n.host);fe(n)&&["html","body"].indexOf(he(n))<0;){var i=Ae(n);if("none"!==i.transform||"none"!==i.perspective||"paint"===i.contain||-1!==["transform","perspective"].indexOf(i.willChange)||e&&"filter"===i.willChange||e&&i.filter&&"none"!==i.filter)return n;n=n.parentNode}return null}(t)||e}function De(t){return["top","bottom"].indexOf(t)>=0?"x":"y"}function Le(t,e,n){return ye(t,be(e,n))}function Pe(t){return Object.assign({},{top:0,right:0,bottom:0,left:0},t)}function Ne(t,e){return e.reduce((function(e,n){return e[n]=t,e}),{})}const Re={name:"arrow",enabled:!0,phase:"main",fn:function(t){var e,n=t.state,i=t.name,r=t.options,o=n.elements.arrow,a=n.modifiersData.popperOffsets,s=ve(n.placement),l=De(s),c=[Yt,jt].indexOf(s)>=0?"height":"width";if(o&&a){var u=function(t,e){return Pe("number"!=typeof(t="function"==typeof t?t(Object.assign({},e.rects,{placement:e.placement})):t)?t:Ne(t,Gt))}(r.padding,n),h=Ce(o),d="y"===l?Ht:Yt,p="y"===l?Wt:jt,f=n.rects.reference[c]+n.rects.reference[l]-a[l]-n.rects.popper[c],g=a[l]-n.rects.reference[l],m=Oe(o),v=m?"y"===l?m.clientHeight||0:m.clientWidth||0:0,y=f/2-g/2,b=u[d],x=v-h[c]-u[p],_=v/2-h[c]/2+y,w=Le(b,_,x),S=l;n.modifiersData[i]=((e={})[S]=w,e.centerOffset=w-_,e)}},effect:function(t){var e=t.state,n=t.options.element,i=void 0===n?"[data-popper-arrow]":n;null!=i&&("string"!=typeof i||(i=e.elements.popper.querySelector(i)))&&ke(e.elements.popper,i)&&(e.elements.arrow=i)},requires:["popperOffsets"],requiresIfExists:["preventOverflow"]};function Be(t){return t.split("-")[1]}var ze={top:"auto",right:"auto",bottom:"auto",left:"auto"};function Fe(t){var e,n=t.popper,i=t.popperRect,r=t.placement,o=t.variation,a=t.offsets,s=t.position,l=t.gpuAcceleration,c=t.adaptive,u=t.roundOffsets,h=t.isFixed,d=a.x,p=void 0===d?0:d,f=a.y,g=void 0===f?0:f,m="function"==typeof u?u({x:p,y:g}):{x:p,y:g};p=m.x,g=m.y;var v=a.hasOwnProperty("x"),y=a.hasOwnProperty("y"),b=Yt,x=Ht,_=window;if(c){var w=Oe(n),S="clientHeight",C="clientWidth";w===de(n)&&"static"!==Ae(w=Te(n)).position&&"absolute"===s&&(S="scrollHeight",C="scrollWidth"),(r===Ht||(r===Yt||r===jt)&&o===Ut)&&(x=Wt,g-=(h&&w===_&&_.visualViewport?_.visualViewport.height:w[S])-i.height,g*=l?1:-1),r!==Yt&&(r!==Ht&&r!==Wt||o!==Ut)||(b=jt,p-=(h&&w===_&&_.visualViewport?_.visualViewport.width:w[C])-i.width,p*=l?1:-1)}var k,A=Object.assign({position:s},c&&ze),M=!0===u?function(t,e){var n=t.x,i=t.y,r=e.devicePixelRatio||1;return{x:xe(n*r)/r||0,y:xe(i*r)/r||0}}({x:p,y:g},de(n)):{x:p,y:g};return p=M.x,g=M.y,l?Object.assign({},A,((k={})[x]=y?"0":"",k[b]=v?"0":"",k.transform=(_.devicePixelRatio||1)<=1?"translate("+p+"px, "+g+"px)":"translate3d("+p+"px, "+g+"px, 0)",k)):Object.assign({},A,((e={})[x]=y?g+"px":"",e[b]=v?p+"px":"",e.transform="",e))}const Ve={name:"computeStyles",enabled:!0,phase:"beforeWrite",fn:function(t){var e=t.state,n=t.options,i=n.gpuAcceleration,r=void 0===i||i,o=n.adaptive,a=void 0===o||o,s=n.roundOffsets,l=void 0===s||s,c={placement:ve(e.placement),variation:Be(e.placement),popper:e.elements.popper,popperRect:e.rects.popper,gpuAcceleration:r,isFixed:"fixed"===e.options.strategy};null!=e.modifiersData.popperOffsets&&(e.styles.popper=Object.assign({},e.styles.popper,Fe(Object.assign({},c,{offsets:e.modifiersData.popperOffsets,position:e.options.strategy,adaptive:a,roundOffsets:l})))),null!=e.modifiersData.arrow&&(e.styles.arrow=Object.assign({},e.styles.arrow,Fe(Object.assign({},c,{offsets:e.modifiersData.arrow,position:"absolute",adaptive:!1,roundOffsets:l})))),e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-placement":e.placement})},data:{}};var He={passive:!0};const We={name:"eventListeners",enabled:!0,phase:"write",fn:function(){},effect:function(t){var e=t.state,n=t.instance,i=t.options,r=i.scroll,o=void 0===r||r,a=i.resize,s=void 0===a||a,l=de(e.elements.popper),c=[].concat(e.scrollParents.reference,e.scrollParents.popper);return o&&c.forEach((function(t){t.addEventListener("scroll",n.update,He)})),s&&l.addEventListener("resize",n.update,He),function(){o&&c.forEach((function(t){t.removeEventListener("scroll",n.update,He)})),s&&l.removeEventListener("resize",n.update,He)}},data:{}};var je={left:"right",right:"left",bottom:"top",top:"bottom"};function Ye(t){return t.replace(/left|right|bottom|top/g,(function(t){return je[t]}))}var Xe={start:"end",end:"start"};function Ge(t){return t.replace(/start|end/g,(function(t){return Xe[t]}))}function qe(t){var e=de(t);return{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Ue(t){return Se(Te(t)).left+qe(t).scrollLeft}function $e(t){var e=Ae(t),n=e.overflow,i=e.overflowX,r=e.overflowY;return/auto|scroll|overlay|hidden/.test(n+r+i)}function Ze(t){return["html","body","#document"].indexOf(he(t))>=0?t.ownerDocument.body:fe(t)&&$e(t)?t:Ze(Ie(t))}function Ke(t,e){var n;void 0===e&&(e=[]);var i=Ze(t),r=i===(null==(n=t.ownerDocument)?void 0:n.body),o=de(i),a=r?[o].concat(o.visualViewport||[],$e(i)?i:[]):i,s=e.concat(a);return r?s:s.concat(Ke(Ie(a)))}function Qe(t){return Object.assign({},t,{left:t.x,top:t.y,right:t.x+t.width,bottom:t.y+t.height})}function Je(t,e,n){return e===Zt?Qe(function(t,e){var n=de(t),i=Te(t),r=n.visualViewport,o=i.clientWidth,a=i.clientHeight,s=0,l=0;if(r){o=r.width,a=r.height;var c=we();(c||!c&&"fixed"===e)&&(s=r.offsetLeft,l=r.offsetTop)}return{width:o,height:a,x:s+Ue(t),y:l}}(t,n)):pe(e)?function(t,e){var n=Se(t,!1,"fixed"===e);return n.top=n.top+t.clientTop,n.left=n.left+t.clientLeft,n.bottom=n.top+t.clientHeight,n.right=n.left+t.clientWidth,n.width=t.clientWidth,n.height=t.clientHeight,n.x=n.left,n.y=n.top,n}(e,n):Qe(function(t){var e,n=Te(t),i=qe(t),r=null==(e=t.ownerDocument)?void 0:e.body,o=ye(n.scrollWidth,n.clientWidth,r?r.scrollWidth:0,r?r.clientWidth:0),a=ye(n.scrollHeight,n.clientHeight,r?r.scrollHeight:0,r?r.clientHeight:0),s=-i.scrollLeft+Ue(t),l=-i.scrollTop;return"rtl"===Ae(r||n).direction&&(s+=ye(n.clientWidth,r?r.clientWidth:0)-o),{width:o,height:a,x:s,y:l}}(Te(t)))}function tn(t){var e,n=t.reference,i=t.element,r=t.placement,o=r?ve(r):null,a=r?Be(r):null,s=n.x+n.width/2-i.width/2,l=n.y+n.height/2-i.height/2;switch(o){case Ht:e={x:s,y:n.y-i.height};break;case Wt:e={x:s,y:n.y+n.height};break;case jt:e={x:n.x+n.width,y:l};break;case Yt:e={x:n.x-i.width,y:l};break;default:e={x:n.x,y:n.y}}var c=o?De(o):null;if(null!=c){var u="y"===c?"height":"width";switch(a){case qt:e[c]=e[c]-(n[u]/2-i[u]/2);break;case Ut:e[c]=e[c]+(n[u]/2-i[u]/2)}}return e}function en(t,e){void 0===e&&(e={});var n=e,i=n.placement,r=void 0===i?t.placement:i,o=n.strategy,a=void 0===o?t.strategy:o,s=n.boundary,l=void 0===s?$t:s,c=n.rootBoundary,u=void 0===c?Zt:c,h=n.elementContext,d=void 0===h?Kt:h,p=n.altBoundary,f=void 0!==p&&p,g=n.padding,m=void 0===g?0:g,v=Pe("number"!=typeof m?m:Ne(m,Gt)),y=d===Kt?Qt:Kt,b=t.rects.popper,x=t.elements[f?y:d],_=function(t,e,n,i){var r="clippingParents"===e?function(t){var e=Ke(Ie(t)),n=["absolute","fixed"].indexOf(Ae(t).position)>=0&&fe(t)?Oe(t):t;return pe(n)?e.filter((function(t){return pe(t)&&ke(t,n)&&"body"!==he(t)})):[]}(t):[].concat(e),o=[].concat(r,[n]),a=o[0],s=o.reduce((function(e,n){var r=Je(t,n,i);return e.top=ye(r.top,e.top),e.right=be(r.right,e.right),e.bottom=be(r.bottom,e.bottom),e.left=ye(r.left,e.left),e}),Je(t,a,i));return s.width=s.right-s.left,s.height=s.bottom-s.top,s.x=s.left,s.y=s.top,s}(pe(x)?x:x.contextElement||Te(t.elements.popper),l,u,a),w=Se(t.elements.reference),S=tn({reference:w,element:b,strategy:"absolute",placement:r}),C=Qe(Object.assign({},b,S)),k=d===Kt?C:w,A={top:_.top-k.top+v.top,bottom:k.bottom-_.bottom+v.bottom,left:_.left-k.left+v.left,right:k.right-_.right+v.right},M=t.modifiersData.offset;if(d===Kt&&M){var T=M[r];Object.keys(A).forEach((function(t){var e=[jt,Wt].indexOf(t)>=0?1:-1,n=[Ht,Wt].indexOf(t)>=0?"y":"x";A[t]+=T[n]*e}))}return A}const nn={name:"flip",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,i=t.name;if(!e.modifiersData[i]._skip){for(var r=n.mainAxis,o=void 0===r||r,a=n.altAxis,s=void 0===a||a,l=n.fallbackPlacements,c=n.padding,u=n.boundary,h=n.rootBoundary,d=n.altBoundary,p=n.flipVariations,f=void 0===p||p,g=n.allowedAutoPlacements,m=e.options.placement,v=ve(m),y=l||(v!==m&&f?function(t){if(ve(t)===Xt)return[];var e=Ye(t);return[Ge(t),e,Ge(e)]}(m):[Ye(m)]),b=[m].concat(y).reduce((function(t,n){return t.concat(ve(n)===Xt?function(t,e){void 0===e&&(e={});var n=e,i=n.placement,r=n.boundary,o=n.rootBoundary,a=n.padding,s=n.flipVariations,l=n.allowedAutoPlacements,c=void 0===l?te:l,u=Be(i),h=u?s?Jt:Jt.filter((function(t){return Be(t)===u})):Gt,d=h.filter((function(t){return c.indexOf(t)>=0}));0===d.length&&(d=h);var p=d.reduce((function(e,n){return e[n]=en(t,{placement:n,boundary:r,rootBoundary:o,padding:a})[ve(n)],e}),{});return Object.keys(p).sort((function(t,e){return p[t]-p[e]}))}(e,{placement:n,boundary:u,rootBoundary:h,padding:c,flipVariations:f,allowedAutoPlacements:g}):n)}),[]),x=e.rects.reference,_=e.rects.popper,w=new Map,S=!0,C=b[0],k=0;k<b.length;k++){var A=b[k],M=ve(A),T=Be(A)===qt,I=[Ht,Wt].indexOf(M)>=0,E=I?"width":"height",O=en(e,{placement:A,boundary:u,rootBoundary:h,altBoundary:d,padding:c}),D=I?T?jt:Yt:T?Wt:Ht;x[E]>_[E]&&(D=Ye(D));var L=Ye(D),P=[];if(o&&P.push(O[M]<=0),s&&P.push(O[D]<=0,O[L]<=0),P.every((function(t){return t}))){C=A,S=!1;break}w.set(A,P)}if(S)for(var N=function(t){var e=b.find((function(e){var n=w.get(e);if(n)return n.slice(0,t).every((function(t){return t}))}));if(e)return C=e,"break"},R=f?3:1;R>0&&"break"!==N(R);R--);e.placement!==C&&(e.modifiersData[i]._skip=!0,e.placement=C,e.reset=!0)}},requiresIfExists:["offset"],data:{_skip:!1}};function rn(t,e,n){return void 0===n&&(n={x:0,y:0}),{top:t.top-e.height-n.y,right:t.right-e.width+n.x,bottom:t.bottom-e.height+n.y,left:t.left-e.width-n.x}}function on(t){return[Ht,jt,Wt,Yt].some((function(e){return t[e]>=0}))}const an={name:"hide",enabled:!0,phase:"main",requiresIfExists:["preventOverflow"],fn:function(t){var e=t.state,n=t.name,i=e.rects.reference,r=e.rects.popper,o=e.modifiersData.preventOverflow,a=en(e,{elementContext:"reference"}),s=en(e,{altBoundary:!0}),l=rn(a,i),c=rn(s,r,o),u=on(l),h=on(c);e.modifiersData[n]={referenceClippingOffsets:l,popperEscapeOffsets:c,isReferenceHidden:u,hasPopperEscaped:h},e.attributes.popper=Object.assign({},e.attributes.popper,{"data-popper-reference-hidden":u,"data-popper-escaped":h})}},sn={name:"offset",enabled:!0,phase:"main",requires:["popperOffsets"],fn:function(t){var e=t.state,n=t.options,i=t.name,r=n.offset,o=void 0===r?[0,0]:r,a=te.reduce((function(t,n){return t[n]=function(t,e,n){var i=ve(t),r=[Yt,Ht].indexOf(i)>=0?-1:1,o="function"==typeof n?n(Object.assign({},e,{placement:t})):n,a=o[0],s=o[1];return a=a||0,s=(s||0)*r,[Yt,jt].indexOf(i)>=0?{x:s,y:a}:{x:a,y:s}}(n,e.rects,o),t}),{}),s=a[e.placement],l=s.x,c=s.y;null!=e.modifiersData.popperOffsets&&(e.modifiersData.popperOffsets.x+=l,e.modifiersData.popperOffsets.y+=c),e.modifiersData[i]=a}},ln={name:"popperOffsets",enabled:!0,phase:"read",fn:function(t){var e=t.state,n=t.name;e.modifiersData[n]=tn({reference:e.rects.reference,element:e.rects.popper,strategy:"absolute",placement:e.placement})},data:{}},cn={name:"preventOverflow",enabled:!0,phase:"main",fn:function(t){var e=t.state,n=t.options,i=t.name,r=n.mainAxis,o=void 0===r||r,a=n.altAxis,s=void 0!==a&&a,l=n.boundary,c=n.rootBoundary,u=n.altBoundary,h=n.padding,d=n.tether,p=void 0===d||d,f=n.tetherOffset,g=void 0===f?0:f,m=en(e,{boundary:l,rootBoundary:c,padding:h,altBoundary:u}),v=ve(e.placement),y=Be(e.placement),b=!y,x=De(v),_="x"===x?"y":"x",w=e.modifiersData.popperOffsets,S=e.rects.reference,C=e.rects.popper,k="function"==typeof g?g(Object.assign({},e.rects,{placement:e.placement})):g,A="number"==typeof k?{mainAxis:k,altAxis:k}:Object.assign({mainAxis:0,altAxis:0},k),M=e.modifiersData.offset?e.modifiersData.offset[e.placement]:null,T={x:0,y:0};if(w){if(o){var I,E="y"===x?Ht:Yt,O="y"===x?Wt:jt,D="y"===x?"height":"width",L=w[x],P=L+m[E],N=L-m[O],R=p?-C[D]/2:0,B=y===qt?S[D]:C[D],z=y===qt?-C[D]:-S[D],F=e.elements.arrow,V=p&&F?Ce(F):{width:0,height:0},H=e.modifiersData["arrow#persistent"]?e.modifiersData["arrow#persistent"].padding:{top:0,right:0,bottom:0,left:0},W=H[E],j=H[O],Y=Le(0,S[D],V[D]),X=b?S[D]/2-R-Y-W-A.mainAxis:B-Y-W-A.mainAxis,G=b?-S[D]/2+R+Y+j+A.mainAxis:z+Y+j+A.mainAxis,q=e.elements.arrow&&Oe(e.elements.arrow),U=q?"y"===x?q.clientTop||0:q.clientLeft||0:0,$=null!=(I=null==M?void 0:M[x])?I:0,Z=L+G-$,K=Le(p?be(P,L+X-$-U):P,L,p?ye(N,Z):N);w[x]=K,T[x]=K-L}if(s){var Q,J="x"===x?Ht:Yt,tt="x"===x?Wt:jt,et=w[_],nt="y"===_?"height":"width",it=et+m[J],rt=et-m[tt],ot=-1!==[Ht,Yt].indexOf(v),at=null!=(Q=null==M?void 0:M[_])?Q:0,st=ot?it:et-S[nt]-C[nt]-at+A.altAxis,lt=ot?et+S[nt]+C[nt]-at-A.altAxis:rt,ct=p&&ot?function(t,e,n){var i=Le(t,e,n);return i>n?n:i}(st,et,lt):Le(p?st:it,et,p?lt:rt);w[_]=ct,T[_]=ct-et}e.modifiersData[i]=T}},requiresIfExists:["offset"]};function un(t,e,n){void 0===n&&(n=!1);var i,r,o=fe(e),a=fe(e)&&function(t){var e=t.getBoundingClientRect(),n=xe(e.width)/t.offsetWidth||1,i=xe(e.height)/t.offsetHeight||1;return 1!==n||1!==i}(e),s=Te(e),l=Se(t,a,n),c={scrollLeft:0,scrollTop:0},u={x:0,y:0};return(o||!o&&!n)&&(("body"!==he(e)||$e(s))&&(c=(i=e)!==de(i)&&fe(i)?{scrollLeft:(r=i).scrollLeft,scrollTop:r.scrollTop}:qe(i)),fe(e)?((u=Se(e,!0)).x+=e.clientLeft,u.y+=e.clientTop):s&&(u.x=Ue(s))),{x:l.left+c.scrollLeft-u.x,y:l.top+c.scrollTop-u.y,width:l.width,height:l.height}}function hn(t){var e=new Map,n=new Set,i=[];function r(t){n.add(t.name),[].concat(t.requires||[],t.requiresIfExists||[]).forEach((function(t){if(!n.has(t)){var i=e.get(t);i&&r(i)}})),i.push(t)}return t.forEach((function(t){e.set(t.name,t)})),t.forEach((function(t){n.has(t.name)||r(t)})),i}var dn={placement:"bottom",modifiers:[],strategy:"absolute"};function pn(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return!e.some((function(t){return!(t&&"function"==typeof t.getBoundingClientRect)}))}function fn(t){void 0===t&&(t={});var e=t,n=e.defaultModifiers,i=void 0===n?[]:n,r=e.defaultOptions,o=void 0===r?dn:r;return function(t,e,n){void 0===n&&(n=o);var r,a,s={placement:"bottom",orderedModifiers:[],options:Object.assign({},dn,o),modifiersData:{},elements:{reference:t,popper:e},attributes:{},styles:{}},l=[],c=!1,u={state:s,setOptions:function(n){var r="function"==typeof n?n(s.options):n;h(),s.options=Object.assign({},o,s.options,r),s.scrollParents={reference:pe(t)?Ke(t):t.contextElement?Ke(t.contextElement):[],popper:Ke(e)};var a,c,d=function(t){var e=hn(t);return ue.reduce((function(t,n){return t.concat(e.filter((function(t){return t.phase===n})))}),[])}((a=[].concat(i,s.options.modifiers),c=a.reduce((function(t,e){var n=t[e.name];return t[e.name]=n?Object.assign({},n,e,{options:Object.assign({},n.options,e.options),data:Object.assign({},n.data,e.data)}):e,t}),{}),Object.keys(c).map((function(t){return c[t]}))));return s.orderedModifiers=d.filter((function(t){return t.enabled})),s.orderedModifiers.forEach((function(t){var e=t.name,n=t.options,i=void 0===n?{}:n,r=t.effect;if("function"==typeof r){var o=r({state:s,name:e,instance:u,options:i});l.push(o||function(){})}})),u.update()},forceUpdate:function(){if(!c){var t=s.elements,e=t.reference,n=t.popper;if(pn(e,n)){s.rects={reference:un(e,Oe(n),"fixed"===s.options.strategy),popper:Ce(n)},s.reset=!1,s.placement=s.options.placement,s.orderedModifiers.forEach((function(t){return s.modifiersData[t.name]=Object.assign({},t.data)}));for(var i=0;i<s.orderedModifiers.length;i++)if(!0!==s.reset){var r=s.orderedModifiers[i],o=r.fn,a=r.options,l=void 0===a?{}:a,h=r.name;"function"==typeof o&&(s=o({state:s,options:l,name:h,instance:u})||s)}else s.reset=!1,i=-1}}},update:(r=function(){return new Promise((function(t){u.forceUpdate(),t(s)}))},function(){return a||(a=new Promise((function(t){Promise.resolve().then((function(){a=void 0,t(r())}))}))),a}),destroy:function(){h(),c=!0}};if(!pn(t,e))return u;function h(){l.forEach((function(t){return t()})),l=[]}return u.setOptions(n).then((function(t){!c&&n.onFirstUpdate&&n.onFirstUpdate(t)})),u}}var gn=fn(),mn=fn({defaultModifiers:[We,ln,Ve,me]}),vn=fn({defaultModifiers:[We,ln,Ve,me,sn,nn,cn,Re,an]});const yn=Object.freeze(Object.defineProperty({__proto__:null,afterMain:ae,afterRead:ie,afterWrite:ce,applyStyles:me,arrow:Re,auto:Xt,basePlacements:Gt,beforeMain:re,beforeRead:ee,beforeWrite:se,bottom:Wt,clippingParents:$t,computeStyles:Ve,createPopper:vn,createPopperBase:gn,createPopperLite:mn,detectOverflow:en,end:Ut,eventListeners:We,flip:nn,hide:an,left:Yt,main:oe,modifierPhases:ue,offset:sn,placements:te,popper:Kt,popperGenerator:fn,popperOffsets:ln,preventOverflow:cn,read:ne,reference:Qt,right:jt,start:qt,top:Ht,variationPlacements:Jt,viewport:Zt,write:le},Symbol.toStringTag,{value:"Module"})),bn="dropdown",xn=".bs.dropdown",_n=".data-api",wn="ArrowUp",Sn="ArrowDown",Cn=`hide${xn}`,kn=`hidden${xn}`,An=`show${xn}`,Mn=`shown${xn}`,Tn=`click${xn}${_n}`,In=`keydown${xn}${_n}`,En=`keyup${xn}${_n}`,On="show",Dn='[data-bs-toggle="dropdown"]:not(.disabled):not(:disabled)',Ln=`${Dn}.show`,Pn=".dropdown-menu",Nn=f()?"top-end":"top-start",Rn=f()?"top-start":"top-end",Bn=f()?"bottom-end":"bottom-start",zn=f()?"bottom-start":"bottom-end",Fn=f()?"left-start":"right-start",Vn=f()?"right-start":"left-start",Hn={autoClose:!0,boundary:"clippingParents",display:"dynamic",offset:[0,2],popperConfig:null,reference:"toggle"},Wn={autoClose:"(boolean|string)",boundary:"(string|element)",display:"string",offset:"(array|string|function)",popperConfig:"(null|object|function)",reference:"(string|element|object)"};class jn extends V{constructor(t,e){super(t,e),this._popper=null,this._parent=this._element.parentNode,this._menu=W.next(this._element,Pn)[0]||W.prev(this._element,Pn)[0]||W.findOne(Pn,this._parent),this._inNavbar=this._detectNavbar()}static get Default(){return Hn}static get DefaultType(){return Wn}static get NAME(){return bn}toggle(){return this._isShown()?this.hide():this.show()}show(){if(l(this._element)||this._isShown())return;const t={relatedTarget:this._element};if(!P.trigger(this._element,An,t).defaultPrevented){if(this._createPopper(),"ontouchstart"in document.documentElement&&!this._parent.closest(".navbar-nav"))for(const t of[].concat(...document.body.children))P.on(t,"mouseover",u);this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.add(On),this._element.classList.add(On),P.trigger(this._element,Mn,t)}}hide(){if(l(this._element)||!this._isShown())return;const t={relatedTarget:this._element};this._completeHide(t)}dispose(){this._popper&&this._popper.destroy(),super.dispose()}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_completeHide(t){if(!P.trigger(this._element,Cn,t).defaultPrevented){if("ontouchstart"in document.documentElement)for(const t of[].concat(...document.body.children))P.off(t,"mouseover",u);this._popper&&this._popper.destroy(),this._menu.classList.remove(On),this._element.classList.remove(On),this._element.setAttribute("aria-expanded","false"),z.removeDataAttribute(this._menu,"popper"),P.trigger(this._element,kn,t)}}_getConfig(t){if("object"==typeof(t=super._getConfig(t)).reference&&!o(t.reference)&&"function"!=typeof t.reference.getBoundingClientRect)throw new TypeError(`${bn.toUpperCase()}: Option "reference" provided type "object" without a required "getBoundingClientRect" method.`);return t}_createPopper(){if(void 0===yn)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");let t=this._element;"parent"===this._config.reference?t=this._parent:o(this._config.reference)?t=a(this._config.reference):"object"==typeof this._config.reference&&(t=this._config.reference);const e=this._getPopperConfig();this._popper=vn(t,this._menu,e)}_isShown(){return this._menu.classList.contains(On)}_getPlacement(){const t=this._parent;if(t.classList.contains("dropend"))return Fn;if(t.classList.contains("dropstart"))return Vn;if(t.classList.contains("dropup-center"))return"top";if(t.classList.contains("dropdown-center"))return"bottom";const e="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return t.classList.contains("dropup")?e?Rn:Nn:e?zn:Bn}_detectNavbar(){return null!==this._element.closest(".navbar")}_getOffset(){const{offset:t}=this._config;return"string"==typeof t?t.split(",").map((t=>Number.parseInt(t,10))):"function"==typeof t?e=>t(e,this._element):t}_getPopperConfig(){const t={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return(this._inNavbar||"static"===this._config.display)&&(z.setDataAttribute(this._menu,"popper","static"),t.modifiers=[{name:"applyStyles",enabled:!1}]),{...t,...m(this._config.popperConfig,[t])}}_selectMenuItem({key:t,target:e}){const n=W.find(".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",this._menu).filter((t=>s(t)));n.length&&y(n,e,t===Sn,!n.includes(e)).focus()}static jQueryInterface(t){return this.each((function(){const e=jn.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}static clearMenus(t){if(2===t.button||"keyup"===t.type&&"Tab"!==t.key)return;const e=W.find(Ln);for(const n of e){const e=jn.getInstance(n);if(!e||!1===e._config.autoClose)continue;const i=t.composedPath(),r=i.includes(e._menu);if(i.includes(e._element)||"inside"===e._config.autoClose&&!r||"outside"===e._config.autoClose&&r)continue;if(e._menu.contains(t.target)&&("keyup"===t.type&&"Tab"===t.key||/input|select|option|textarea|form/i.test(t.target.tagName)))continue;const o={relatedTarget:e._element};"click"===t.type&&(o.clickEvent=t),e._completeHide(o)}}static dataApiKeydownHandler(t){const e=/input|textarea/i.test(t.target.tagName),n="Escape"===t.key,i=[wn,Sn].includes(t.key);if(!i&&!n)return;if(e&&!n)return;t.preventDefault();const r=this.matches(Dn)?this:W.prev(this,Dn)[0]||W.next(this,Dn)[0]||W.findOne(Dn,t.delegateTarget.parentNode),o=jn.getOrCreateInstance(r);if(i)return t.stopPropagation(),o.show(),void o._selectMenuItem(t);o._isShown()&&(t.stopPropagation(),o.hide(),r.focus())}}P.on(document,In,Dn,jn.dataApiKeydownHandler),P.on(document,In,Pn,jn.dataApiKeydownHandler),P.on(document,Tn,jn.clearMenus),P.on(document,En,jn.clearMenus),P.on(document,Tn,Dn,(function(t){t.preventDefault(),jn.getOrCreateInstance(this).toggle()})),g(jn);const Yn="backdrop",Xn="show",Gn=`mousedown.bs.${Yn}`,qn={className:"modal-backdrop",clickCallback:null,isAnimated:!1,isVisible:!0,rootElement:"body"},Un={className:"string",clickCallback:"(function|null)",isAnimated:"boolean",isVisible:"boolean",rootElement:"(element|string)"};class $n extends F{constructor(t){super(),this._config=this._getConfig(t),this._isAppended=!1,this._element=null}static get Default(){return qn}static get DefaultType(){return Un}static get NAME(){return Yn}show(t){if(!this._config.isVisible)return void m(t);this._append();const e=this._getElement();this._config.isAnimated&&h(e),e.classList.add(Xn),this._emulateAnimation((()=>{m(t)}))}hide(t){this._config.isVisible?(this._getElement().classList.remove(Xn),this._emulateAnimation((()=>{this.dispose(),m(t)}))):m(t)}dispose(){this._isAppended&&(P.off(this._element,Gn),this._element.remove(),this._isAppended=!1)}_getElement(){if(!this._element){const t=document.createElement("div");t.className=this._config.className,this._config.isAnimated&&t.classList.add("fade"),this._element=t}return this._element}_configAfterMerge(t){return t.rootElement=a(t.rootElement),t}_append(){if(this._isAppended)return;const t=this._getElement();this._config.rootElement.append(t),P.on(t,Gn,(()=>{m(this._config.clickCallback)})),this._isAppended=!0}_emulateAnimation(t){v(t,this._getElement(),this._config.isAnimated)}}const Zn=".bs.focustrap",Kn=`focusin${Zn}`,Qn=`keydown.tab${Zn}`,Jn="backward",ti={autofocus:!0,trapElement:null},ei={autofocus:"boolean",trapElement:"element"};class ni extends F{constructor(t){super(),this._config=this._getConfig(t),this._isActive=!1,this._lastTabNavDirection=null}static get Default(){return ti}static get DefaultType(){return ei}static get NAME(){return"focustrap"}activate(){this._isActive||(this._config.autofocus&&this._config.trapElement.focus(),P.off(document,Zn),P.on(document,Kn,(t=>this._handleFocusin(t))),P.on(document,Qn,(t=>this._handleKeydown(t))),this._isActive=!0)}deactivate(){this._isActive&&(this._isActive=!1,P.off(document,Zn))}_handleFocusin(t){const{trapElement:e}=this._config;if(t.target===document||t.target===e||e.contains(t.target))return;const n=W.focusableChildren(e);0===n.length?e.focus():this._lastTabNavDirection===Jn?n[n.length-1].focus():n[0].focus()}_handleKeydown(t){"Tab"===t.key&&(this._lastTabNavDirection=t.shiftKey?Jn:"forward")}}const ii=".fixed-top, .fixed-bottom, .is-fixed, .sticky-top",ri=".sticky-top",oi="padding-right",ai="margin-right";class si{constructor(){this._element=document.body}getWidth(){const t=document.documentElement.clientWidth;return Math.abs(window.innerWidth-t)}hide(){const t=this.getWidth();this._disableOverFlow(),this._setElementAttributes(this._element,oi,(e=>e+t)),this._setElementAttributes(ii,oi,(e=>e+t)),this._setElementAttributes(ri,ai,(e=>e-t))}reset(){this._resetElementAttributes(this._element,"overflow"),this._resetElementAttributes(this._element,oi),this._resetElementAttributes(ii,oi),this._resetElementAttributes(ri,ai)}isOverflowing(){return this.getWidth()>0}_disableOverFlow(){this._saveInitialAttribute(this._element,"overflow"),this._element.style.overflow="hidden"}_setElementAttributes(t,e,n){const i=this.getWidth();this._applyManipulationCallback(t,(t=>{if(t!==this._element&&window.innerWidth>t.clientWidth+i)return;this._saveInitialAttribute(t,e);const r=window.getComputedStyle(t).getPropertyValue(e);t.style.setProperty(e,`${n(Number.parseFloat(r))}px`)}))}_saveInitialAttribute(t,e){const n=t.style.getPropertyValue(e);n&&z.setDataAttribute(t,e,n)}_resetElementAttributes(t,e){this._applyManipulationCallback(t,(t=>{const n=z.getDataAttribute(t,e);null!==n?(z.removeDataAttribute(t,e),t.style.setProperty(e,n)):t.style.removeProperty(e)}))}_applyManipulationCallback(t,e){if(o(t))e(t);else for(const n of W.find(t,this._element))e(n)}}const li=".bs.modal",ci=`hide${li}`,ui=`hidePrevented${li}`,hi=`hidden${li}`,di=`show${li}`,pi=`shown${li}`,fi=`resize${li}`,gi=`click.dismiss${li}`,mi=`mousedown.dismiss${li}`,vi=`keydown.dismiss${li}`,yi=`click${li}.data-api`,bi="modal-open",xi="show",_i="modal-static",wi={backdrop:!0,focus:!0,keyboard:!0},Si={backdrop:"(boolean|string)",focus:"boolean",keyboard:"boolean"};class Ci extends V{constructor(t,e){super(t,e),this._dialog=W.findOne(".modal-dialog",this._element),this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._isShown=!1,this._isTransitioning=!1,this._scrollBar=new si,this._addEventListeners()}static get Default(){return wi}static get DefaultType(){return Si}static get NAME(){return"modal"}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||this._isTransitioning||P.trigger(this._element,di,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._isTransitioning=!0,this._scrollBar.hide(),document.body.classList.add(bi),this._adjustDialog(),this._backdrop.show((()=>this._showElement(t))))}hide(){this._isShown&&!this._isTransitioning&&(P.trigger(this._element,ci).defaultPrevented||(this._isShown=!1,this._isTransitioning=!0,this._focustrap.deactivate(),this._element.classList.remove(xi),this._queueCallback((()=>this._hideModal()),this._element,this._isAnimated())))}dispose(){P.off(window,li),P.off(this._dialog,li),this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}handleUpdate(){this._adjustDialog()}_initializeBackDrop(){return new $n({isVisible:Boolean(this._config.backdrop),isAnimated:this._isAnimated()})}_initializeFocusTrap(){return new ni({trapElement:this._element})}_showElement(t){document.body.contains(this._element)||document.body.append(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.scrollTop=0;const e=W.findOne(".modal-body",this._dialog);e&&(e.scrollTop=0),h(this._element),this._element.classList.add(xi),this._queueCallback((()=>{this._config.focus&&this._focustrap.activate(),this._isTransitioning=!1,P.trigger(this._element,pi,{relatedTarget:t})}),this._dialog,this._isAnimated())}_addEventListeners(){P.on(this._element,vi,(t=>{"Escape"===t.key&&(this._config.keyboard?this.hide():this._triggerBackdropTransition())})),P.on(window,fi,(()=>{this._isShown&&!this._isTransitioning&&this._adjustDialog()})),P.on(this._element,mi,(t=>{P.one(this._element,gi,(e=>{this._element===t.target&&this._element===e.target&&("static"!==this._config.backdrop?this._config.backdrop&&this.hide():this._triggerBackdropTransition())}))}))}_hideModal(){this._element.style.display="none",this._element.setAttribute("aria-hidden",!0),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._isTransitioning=!1,this._backdrop.hide((()=>{document.body.classList.remove(bi),this._resetAdjustments(),this._scrollBar.reset(),P.trigger(this._element,hi)}))}_isAnimated(){return this._element.classList.contains("fade")}_triggerBackdropTransition(){if(P.trigger(this._element,ui).defaultPrevented)return;const t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._element.style.overflowY;"hidden"===e||this._element.classList.contains(_i)||(t||(this._element.style.overflowY="hidden"),this._element.classList.add(_i),this._queueCallback((()=>{this._element.classList.remove(_i),this._queueCallback((()=>{this._element.style.overflowY=e}),this._dialog)}),this._dialog),this._element.focus())}_adjustDialog(){const t=this._element.scrollHeight>document.documentElement.clientHeight,e=this._scrollBar.getWidth(),n=e>0;if(n&&!t){const t=f()?"paddingLeft":"paddingRight";this._element.style[t]=`${e}px`}if(!n&&t){const t=f()?"paddingRight":"paddingLeft";this._element.style[t]=`${e}px`}}_resetAdjustments(){this._element.style.paddingLeft="",this._element.style.paddingRight=""}static jQueryInterface(t,e){return this.each((function(){const n=Ci.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===n[t])throw new TypeError(`No method named "${t}"`);n[t](e)}}))}}P.on(document,yi,'[data-bs-toggle="modal"]',(function(t){const e=W.getElementFromSelector(this);["A","AREA"].includes(this.tagName)&&t.preventDefault(),P.one(e,di,(t=>{t.defaultPrevented||P.one(e,hi,(()=>{s(this)&&this.focus()}))}));const n=W.findOne(".modal.show");n&&Ci.getInstance(n).hide(),Ci.getOrCreateInstance(e).toggle(this)})),j(Ci),g(Ci);const ki=".bs.offcanvas",Ai=".data-api",Mi=`load${ki}${Ai}`,Ti="show",Ii="showing",Ei="hiding",Oi=".offcanvas.show",Di=`show${ki}`,Li=`shown${ki}`,Pi=`hide${ki}`,Ni=`hidePrevented${ki}`,Ri=`hidden${ki}`,Bi=`resize${ki}`,zi=`click${ki}${Ai}`,Fi=`keydown.dismiss${ki}`,Vi={backdrop:!0,keyboard:!0,scroll:!1},Hi={backdrop:"(boolean|string)",keyboard:"boolean",scroll:"boolean"};class Wi extends V{constructor(t,e){super(t,e),this._isShown=!1,this._backdrop=this._initializeBackDrop(),this._focustrap=this._initializeFocusTrap(),this._addEventListeners()}static get Default(){return Vi}static get DefaultType(){return Hi}static get NAME(){return"offcanvas"}toggle(t){return this._isShown?this.hide():this.show(t)}show(t){this._isShown||P.trigger(this._element,Di,{relatedTarget:t}).defaultPrevented||(this._isShown=!0,this._backdrop.show(),this._config.scroll||(new si).hide(),this._element.setAttribute("aria-modal",!0),this._element.setAttribute("role","dialog"),this._element.classList.add(Ii),this._queueCallback((()=>{this._config.scroll&&!this._config.backdrop||this._focustrap.activate(),this._element.classList.add(Ti),this._element.classList.remove(Ii),P.trigger(this._element,Li,{relatedTarget:t})}),this._element,!0))}hide(){this._isShown&&(P.trigger(this._element,Pi).defaultPrevented||(this._focustrap.deactivate(),this._element.blur(),this._isShown=!1,this._element.classList.add(Ei),this._backdrop.hide(),this._queueCallback((()=>{this._element.classList.remove(Ti,Ei),this._element.removeAttribute("aria-modal"),this._element.removeAttribute("role"),this._config.scroll||(new si).reset(),P.trigger(this._element,Ri)}),this._element,!0)))}dispose(){this._backdrop.dispose(),this._focustrap.deactivate(),super.dispose()}_initializeBackDrop(){const t=Boolean(this._config.backdrop);return new $n({className:"offcanvas-backdrop",isVisible:t,isAnimated:!0,rootElement:this._element.parentNode,clickCallback:t?()=>{"static"!==this._config.backdrop?this.hide():P.trigger(this._element,Ni)}:null})}_initializeFocusTrap(){return new ni({trapElement:this._element})}_addEventListeners(){P.on(this._element,Fi,(t=>{"Escape"===t.key&&(this._config.keyboard?this.hide():P.trigger(this._element,Ni))}))}static jQueryInterface(t){return this.each((function(){const e=Wi.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}P.on(document,zi,'[data-bs-toggle="offcanvas"]',(function(t){const e=W.getElementFromSelector(this);if(["A","AREA"].includes(this.tagName)&&t.preventDefault(),l(this))return;P.one(e,Ri,(()=>{s(this)&&this.focus()}));const n=W.findOne(Oi);n&&n!==e&&Wi.getInstance(n).hide(),Wi.getOrCreateInstance(e).toggle(this)})),P.on(window,Mi,(()=>{for(const t of W.find(Oi))Wi.getOrCreateInstance(t).show()})),P.on(window,Bi,(()=>{for(const t of W.find("[aria-modal][class*=show][class*=offcanvas-]"))"fixed"!==getComputedStyle(t).position&&Wi.getOrCreateInstance(t).hide()})),j(Wi),g(Wi);const ji={"*":["class","dir","id","lang","role",/^aria-[\w-]*$/i],a:["target","href","title","rel"],area:[],b:[],br:[],col:[],code:[],dd:[],div:[],dl:[],dt:[],em:[],hr:[],h1:[],h2:[],h3:[],h4:[],h5:[],h6:[],i:[],img:["src","srcset","alt","title","width","height"],li:[],ol:[],p:[],pre:[],s:[],small:[],span:[],sub:[],sup:[],strong:[],u:[],ul:[]},Yi=new Set(["background","cite","href","itemtype","longdesc","poster","src","xlink:href"]),Xi=/^(?!javascript:)(?:[a-z0-9+.-]+:|[^&:/?#]*(?:[/?#]|$))/i,Gi=(t,e)=>{const n=t.nodeName.toLowerCase();return e.includes(n)?!Yi.has(n)||Boolean(Xi.test(t.nodeValue)):e.filter((t=>t instanceof RegExp)).some((t=>t.test(n)))},qi={allowList:ji,content:{},extraClass:"",html:!1,sanitize:!0,sanitizeFn:null,template:"<div></div>"},Ui={allowList:"object",content:"object",extraClass:"(string|function)",html:"boolean",sanitize:"boolean",sanitizeFn:"(null|function)",template:"string"},$i={entry:"(string|element|function|null)",selector:"(string|element)"};class Zi extends F{constructor(t){super(),this._config=this._getConfig(t)}static get Default(){return qi}static get DefaultType(){return Ui}static get NAME(){return"TemplateFactory"}getContent(){return Object.values(this._config.content).map((t=>this._resolvePossibleFunction(t))).filter(Boolean)}hasContent(){return this.getContent().length>0}changeContent(t){return this._checkContent(t),this._config.content={...this._config.content,...t},this}toHtml(){const t=document.createElement("div");t.innerHTML=this._maybeSanitize(this._config.template);for(const[e,n]of Object.entries(this._config.content))this._setContent(t,n,e);const e=t.children[0],n=this._resolvePossibleFunction(this._config.extraClass);return n&&e.classList.add(...n.split(" ")),e}_typeCheckConfig(t){super._typeCheckConfig(t),this._checkContent(t.content)}_checkContent(t){for(const[e,n]of Object.entries(t))super._typeCheckConfig({selector:e,entry:n},$i)}_setContent(t,e,n){const i=W.findOne(n,t);i&&((e=this._resolvePossibleFunction(e))?o(e)?this._putElementInTemplate(a(e),i):this._config.html?i.innerHTML=this._maybeSanitize(e):i.textContent=e:i.remove())}_maybeSanitize(t){return this._config.sanitize?function(t,e,n){if(!t.length)return t;if(n&&"function"==typeof n)return n(t);const i=(new window.DOMParser).parseFromString(t,"text/html"),r=[].concat(...i.body.querySelectorAll("*"));for(const t of r){const n=t.nodeName.toLowerCase();if(!Object.keys(e).includes(n)){t.remove();continue}const i=[].concat(...t.attributes),r=[].concat(e["*"]||[],e[n]||[]);for(const e of i)Gi(e,r)||t.removeAttribute(e.nodeName)}return i.body.innerHTML}(t,this._config.allowList,this._config.sanitizeFn):t}_resolvePossibleFunction(t){return m(t,[this])}_putElementInTemplate(t,e){if(this._config.html)return e.innerHTML="",void e.append(t);e.textContent=t.textContent}}const Ki=new Set(["sanitize","allowList","sanitizeFn"]),Qi="fade",Ji="show",tr=".modal",er="hide.bs.modal",nr="hover",ir="focus",rr={AUTO:"auto",TOP:"top",RIGHT:f()?"left":"right",BOTTOM:"bottom",LEFT:f()?"right":"left"},or={allowList:ji,animation:!0,boundary:"clippingParents",container:!1,customClass:"",delay:0,fallbackPlacements:["top","right","bottom","left"],html:!1,offset:[0,6],placement:"top",popperConfig:null,sanitize:!0,sanitizeFn:null,selector:!1,template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner"></div></div>',title:"",trigger:"hover focus"},ar={allowList:"object",animation:"boolean",boundary:"(string|element)",container:"(string|element|boolean)",customClass:"(string|function)",delay:"(number|object)",fallbackPlacements:"array",html:"boolean",offset:"(array|string|function)",placement:"(string|function)",popperConfig:"(null|object|function)",sanitize:"boolean",sanitizeFn:"(null|function)",selector:"(string|boolean)",template:"string",title:"(string|element|function)",trigger:"string"};class sr extends V{constructor(t,e){if(void 0===yn)throw new TypeError("Bootstrap's tooltips require Popper (https://popper.js.org)");super(t,e),this._isEnabled=!0,this._timeout=0,this._isHovered=null,this._activeTrigger={},this._popper=null,this._templateFactory=null,this._newContent=null,this.tip=null,this._setListeners(),this._config.selector||this._fixTitle()}static get Default(){return or}static get DefaultType(){return ar}static get NAME(){return"tooltip"}enable(){this._isEnabled=!0}disable(){this._isEnabled=!1}toggleEnabled(){this._isEnabled=!this._isEnabled}toggle(){this._isEnabled&&(this._activeTrigger.click=!this._activeTrigger.click,this._isShown()?this._leave():this._enter())}dispose(){clearTimeout(this._timeout),P.off(this._element.closest(tr),er,this._hideModalHandler),this._element.getAttribute("data-bs-original-title")&&this._element.setAttribute("title",this._element.getAttribute("data-bs-original-title")),this._disposePopper(),super.dispose()}show(){if("none"===this._element.style.display)throw new Error("Please use show on visible elements");if(!this._isWithContent()||!this._isEnabled)return;const t=P.trigger(this._element,this.constructor.eventName("show")),e=(c(this._element)||this._element.ownerDocument.documentElement).contains(this._element);if(t.defaultPrevented||!e)return;this._disposePopper();const n=this._getTipElement();this._element.setAttribute("aria-describedby",n.getAttribute("id"));const{container:i}=this._config;if(this._element.ownerDocument.documentElement.contains(this.tip)||(i.append(n),P.trigger(this._element,this.constructor.eventName("inserted"))),this._popper=this._createPopper(n),n.classList.add(Ji),"ontouchstart"in document.documentElement)for(const t of[].concat(...document.body.children))P.on(t,"mouseover",u);this._queueCallback((()=>{P.trigger(this._element,this.constructor.eventName("shown")),!1===this._isHovered&&this._leave(),this._isHovered=!1}),this.tip,this._isAnimated())}hide(){if(this._isShown()&&!P.trigger(this._element,this.constructor.eventName("hide")).defaultPrevented){if(this._getTipElement().classList.remove(Ji),"ontouchstart"in document.documentElement)for(const t of[].concat(...document.body.children))P.off(t,"mouseover",u);this._activeTrigger.click=!1,this._activeTrigger[ir]=!1,this._activeTrigger[nr]=!1,this._isHovered=null,this._queueCallback((()=>{this._isWithActiveTrigger()||(this._isHovered||this._disposePopper(),this._element.removeAttribute("aria-describedby"),P.trigger(this._element,this.constructor.eventName("hidden")))}),this.tip,this._isAnimated())}}update(){this._popper&&this._popper.update()}_isWithContent(){return Boolean(this._getTitle())}_getTipElement(){return this.tip||(this.tip=this._createTipElement(this._newContent||this._getContentForTemplate())),this.tip}_createTipElement(t){const e=this._getTemplateFactory(t).toHtml();if(!e)return null;e.classList.remove(Qi,Ji),e.classList.add(`bs-${this.constructor.NAME}-auto`);const n=(t=>{do{t+=Math.floor(1e6*Math.random())}while(document.getElementById(t));return t})(this.constructor.NAME).toString();return e.setAttribute("id",n),this._isAnimated()&&e.classList.add(Qi),e}setContent(t){this._newContent=t,this._isShown()&&(this._disposePopper(),this.show())}_getTemplateFactory(t){return this._templateFactory?this._templateFactory.changeContent(t):this._templateFactory=new Zi({...this._config,content:t,extraClass:this._resolvePossibleFunction(this._config.customClass)}),this._templateFactory}_getContentForTemplate(){return{".tooltip-inner":this._getTitle()}}_getTitle(){return this._resolvePossibleFunction(this._config.title)||this._element.getAttribute("data-bs-original-title")}_initializeOnDelegatedTarget(t){return this.constructor.getOrCreateInstance(t.delegateTarget,this._getDelegateConfig())}_isAnimated(){return this._config.animation||this.tip&&this.tip.classList.contains(Qi)}_isShown(){return this.tip&&this.tip.classList.contains(Ji)}_createPopper(t){const e=m(this._config.placement,[this,t,this._element]),n=rr[e.toUpperCase()];return vn(this._element,t,this._getPopperConfig(n))}_getOffset(){const{offset:t}=this._config;return"string"==typeof t?t.split(",").map((t=>Number.parseInt(t,10))):"function"==typeof t?e=>t(e,this._element):t}_resolvePossibleFunction(t){return m(t,[this._element])}_getPopperConfig(t){const e={placement:t,modifiers:[{name:"flip",options:{fallbackPlacements:this._config.fallbackPlacements}},{name:"offset",options:{offset:this._getOffset()}},{name:"preventOverflow",options:{boundary:this._config.boundary}},{name:"arrow",options:{element:`.${this.constructor.NAME}-arrow`}},{name:"preSetPlacement",enabled:!0,phase:"beforeMain",fn:t=>{this._getTipElement().setAttribute("data-popper-placement",t.state.placement)}}]};return{...e,...m(this._config.popperConfig,[e])}}_setListeners(){const t=this._config.trigger.split(" ");for(const e of t)if("click"===e)P.on(this._element,this.constructor.eventName("click"),this._config.selector,(t=>{this._initializeOnDelegatedTarget(t).toggle()}));else if("manual"!==e){const t=e===nr?this.constructor.eventName("mouseenter"):this.constructor.eventName("focusin"),n=e===nr?this.constructor.eventName("mouseleave"):this.constructor.eventName("focusout");P.on(this._element,t,this._config.selector,(t=>{const e=this._initializeOnDelegatedTarget(t);e._activeTrigger["focusin"===t.type?ir:nr]=!0,e._enter()})),P.on(this._element,n,this._config.selector,(t=>{const e=this._initializeOnDelegatedTarget(t);e._activeTrigger["focusout"===t.type?ir:nr]=e._element.contains(t.relatedTarget),e._leave()}))}this._hideModalHandler=()=>{this._element&&this.hide()},P.on(this._element.closest(tr),er,this._hideModalHandler)}_fixTitle(){const t=this._element.getAttribute("title");t&&(this._element.getAttribute("aria-label")||this._element.textContent.trim()||this._element.setAttribute("aria-label",t),this._element.setAttribute("data-bs-original-title",t),this._element.removeAttribute("title"))}_enter(){this._isShown()||this._isHovered?this._isHovered=!0:(this._isHovered=!0,this._setTimeout((()=>{this._isHovered&&this.show()}),this._config.delay.show))}_leave(){this._isWithActiveTrigger()||(this._isHovered=!1,this._setTimeout((()=>{this._isHovered||this.hide()}),this._config.delay.hide))}_setTimeout(t,e){clearTimeout(this._timeout),this._timeout=setTimeout(t,e)}_isWithActiveTrigger(){return Object.values(this._activeTrigger).includes(!0)}_getConfig(t){const e=z.getDataAttributes(this._element);for(const t of Object.keys(e))Ki.has(t)&&delete e[t];return t={...e,..."object"==typeof t&&t?t:{}},t=this._mergeConfigObj(t),t=this._configAfterMerge(t),this._typeCheckConfig(t),t}_configAfterMerge(t){return t.container=!1===t.container?document.body:a(t.container),"number"==typeof t.delay&&(t.delay={show:t.delay,hide:t.delay}),"number"==typeof t.title&&(t.title=t.title.toString()),"number"==typeof t.content&&(t.content=t.content.toString()),t}_getDelegateConfig(){const t={};for(const[e,n]of Object.entries(this._config))this.constructor.Default[e]!==n&&(t[e]=n);return t.selector=!1,t.trigger="manual",t}_disposePopper(){this._popper&&(this._popper.destroy(),this._popper=null),this.tip&&(this.tip.remove(),this.tip=null)}static jQueryInterface(t){return this.each((function(){const e=sr.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}}g(sr);const lr={...sr.Default,content:"",offset:[0,8],placement:"right",template:'<div class="popover" role="tooltip"><div class="popover-arrow"></div><h3 class="popover-header"></h3><div class="popover-body"></div></div>',trigger:"click"},cr={...sr.DefaultType,content:"(null|string|element|function)"};class ur extends sr{static get Default(){return lr}static get DefaultType(){return cr}static get NAME(){return"popover"}_isWithContent(){return this._getTitle()||this._getContent()}_getContentForTemplate(){return{".popover-header":this._getTitle(),".popover-body":this._getContent()}}_getContent(){return this._resolvePossibleFunction(this._config.content)}static jQueryInterface(t){return this.each((function(){const e=ur.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t]()}}))}}g(ur);const hr=".bs.scrollspy",dr=`activate${hr}`,pr=`click${hr}`,fr=`load${hr}.data-api`,gr="active",mr="[href]",vr=".nav-link",yr=`${vr}, .nav-item > ${vr}, .list-group-item`,br={offset:null,rootMargin:"0px 0px -25%",smoothScroll:!1,target:null,threshold:[.1,.5,1]},xr={offset:"(number|null)",rootMargin:"string",smoothScroll:"boolean",target:"element",threshold:"array"};class _r extends V{constructor(t,e){super(t,e),this._targetLinks=new Map,this._observableSections=new Map,this._rootElement="visible"===getComputedStyle(this._element).overflowY?null:this._element,this._activeTarget=null,this._observer=null,this._previousScrollData={visibleEntryTop:0,parentScrollTop:0},this.refresh()}static get Default(){return br}static get DefaultType(){return xr}static get NAME(){return"scrollspy"}refresh(){this._initializeTargetsAndObservables(),this._maybeEnableSmoothScroll(),this._observer?this._observer.disconnect():this._observer=this._getNewObserver();for(const t of this._observableSections.values())this._observer.observe(t)}dispose(){this._observer.disconnect(),super.dispose()}_configAfterMerge(t){return t.target=a(t.target)||document.body,t.rootMargin=t.offset?`${t.offset}px 0px -30%`:t.rootMargin,"string"==typeof t.threshold&&(t.threshold=t.threshold.split(",").map((t=>Number.parseFloat(t)))),t}_maybeEnableSmoothScroll(){this._config.smoothScroll&&(P.off(this._config.target,pr),P.on(this._config.target,pr,mr,(t=>{const e=this._observableSections.get(t.target.hash);if(e){t.preventDefault();const n=this._rootElement||window,i=e.offsetTop-this._element.offsetTop;if(n.scrollTo)return void n.scrollTo({top:i,behavior:"smooth"});n.scrollTop=i}})))}_getNewObserver(){const t={root:this._rootElement,threshold:this._config.threshold,rootMargin:this._config.rootMargin};return new IntersectionObserver((t=>this._observerCallback(t)),t)}_observerCallback(t){const e=t=>this._targetLinks.get(`#${t.target.id}`),n=t=>{this._previousScrollData.visibleEntryTop=t.target.offsetTop,this._process(e(t))},i=(this._rootElement||document.documentElement).scrollTop,r=i>=this._previousScrollData.parentScrollTop;this._previousScrollData.parentScrollTop=i;for(const o of t){if(!o.isIntersecting){this._activeTarget=null,this._clearActiveClass(e(o));continue}const t=o.target.offsetTop>=this._previousScrollData.visibleEntryTop;if(r&&t){if(n(o),!i)return}else r||t||n(o)}}_initializeTargetsAndObservables(){this._targetLinks=new Map,this._observableSections=new Map;const t=W.find(mr,this._config.target);for(const e of t){if(!e.hash||l(e))continue;const t=W.findOne(decodeURI(e.hash),this._element);s(t)&&(this._targetLinks.set(decodeURI(e.hash),e),this._observableSections.set(e.hash,t))}}_process(t){this._activeTarget!==t&&(this._clearActiveClass(this._config.target),this._activeTarget=t,t.classList.add(gr),this._activateParents(t),P.trigger(this._element,dr,{relatedTarget:t}))}_activateParents(t){if(t.classList.contains("dropdown-item"))W.findOne(".dropdown-toggle",t.closest(".dropdown")).classList.add(gr);else for(const e of W.parents(t,".nav, .list-group"))for(const t of W.prev(e,yr))t.classList.add(gr)}_clearActiveClass(t){t.classList.remove(gr);const e=W.find(`${mr}.${gr}`,t);for(const t of e)t.classList.remove(gr)}static jQueryInterface(t){return this.each((function(){const e=_r.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t]()}}))}}P.on(window,fr,(()=>{for(const t of W.find('[data-bs-spy="scroll"]'))_r.getOrCreateInstance(t)})),g(_r);const wr=".bs.tab",Sr=`hide${wr}`,Cr=`hidden${wr}`,kr=`show${wr}`,Ar=`shown${wr}`,Mr=`click${wr}`,Tr=`keydown${wr}`,Ir=`load${wr}`,Er="ArrowLeft",Or="ArrowRight",Dr="ArrowUp",Lr="ArrowDown",Pr="Home",Nr="End",Rr="active",Br="fade",zr="show",Fr=".dropdown-toggle",Vr=`:not(${Fr})`,Hr='[data-bs-toggle="tab"], [data-bs-toggle="pill"], [data-bs-toggle="list"]',Wr=`.nav-link${Vr}, .list-group-item${Vr}, [role="tab"]${Vr}, ${Hr}`,jr=`.${Rr}[data-bs-toggle="tab"], .${Rr}[data-bs-toggle="pill"], .${Rr}[data-bs-toggle="list"]`;class Yr extends V{constructor(t){super(t),this._parent=this._element.closest('.list-group, .nav, [role="tablist"]'),this._parent&&(this._setInitialAttributes(this._parent,this._getChildren()),P.on(this._element,Tr,(t=>this._keydown(t))))}static get NAME(){return"tab"}show(){const t=this._element;if(this._elemIsActive(t))return;const e=this._getActiveElem(),n=e?P.trigger(e,Sr,{relatedTarget:t}):null;P.trigger(t,kr,{relatedTarget:e}).defaultPrevented||n&&n.defaultPrevented||(this._deactivate(e,t),this._activate(t,e))}_activate(t,e){t&&(t.classList.add(Rr),this._activate(W.getElementFromSelector(t)),this._queueCallback((()=>{"tab"===t.getAttribute("role")?(t.removeAttribute("tabindex"),t.setAttribute("aria-selected",!0),this._toggleDropDown(t,!0),P.trigger(t,Ar,{relatedTarget:e})):t.classList.add(zr)}),t,t.classList.contains(Br)))}_deactivate(t,e){t&&(t.classList.remove(Rr),t.blur(),this._deactivate(W.getElementFromSelector(t)),this._queueCallback((()=>{"tab"===t.getAttribute("role")?(t.setAttribute("aria-selected",!1),t.setAttribute("tabindex","-1"),this._toggleDropDown(t,!1),P.trigger(t,Cr,{relatedTarget:e})):t.classList.remove(zr)}),t,t.classList.contains(Br)))}_keydown(t){if(![Er,Or,Dr,Lr,Pr,Nr].includes(t.key))return;t.stopPropagation(),t.preventDefault();const e=this._getChildren().filter((t=>!l(t)));let n;if([Pr,Nr].includes(t.key))n=e[t.key===Pr?0:e.length-1];else{const i=[Or,Lr].includes(t.key);n=y(e,t.target,i,!0)}n&&(n.focus({preventScroll:!0}),Yr.getOrCreateInstance(n).show())}_getChildren(){return W.find(Wr,this._parent)}_getActiveElem(){return this._getChildren().find((t=>this._elemIsActive(t)))||null}_setInitialAttributes(t,e){this._setAttributeIfNotExists(t,"role","tablist");for(const t of e)this._setInitialAttributesOnChild(t)}_setInitialAttributesOnChild(t){t=this._getInnerElement(t);const e=this._elemIsActive(t),n=this._getOuterElement(t);t.setAttribute("aria-selected",e),n!==t&&this._setAttributeIfNotExists(n,"role","presentation"),e||t.setAttribute("tabindex","-1"),this._setAttributeIfNotExists(t,"role","tab"),this._setInitialAttributesOnTargetPanel(t)}_setInitialAttributesOnTargetPanel(t){const e=W.getElementFromSelector(t);e&&(this._setAttributeIfNotExists(e,"role","tabpanel"),t.id&&this._setAttributeIfNotExists(e,"aria-labelledby",`${t.id}`))}_toggleDropDown(t,e){const n=this._getOuterElement(t);if(!n.classList.contains("dropdown"))return;const i=(t,i)=>{const r=W.findOne(t,n);r&&r.classList.toggle(i,e)};i(Fr,Rr),i(".dropdown-menu",zr),n.setAttribute("aria-expanded",e)}_setAttributeIfNotExists(t,e,n){t.hasAttribute(e)||t.setAttribute(e,n)}_elemIsActive(t){return t.classList.contains(Rr)}_getInnerElement(t){return t.matches(Wr)?t:W.findOne(Wr,t)}_getOuterElement(t){return t.closest(".nav-item, .list-group-item")||t}static jQueryInterface(t){return this.each((function(){const e=Yr.getOrCreateInstance(this);if("string"==typeof t){if(void 0===e[t]||t.startsWith("_")||"constructor"===t)throw new TypeError(`No method named "${t}"`);e[t]()}}))}}P.on(document,Mr,Hr,(function(t){["A","AREA"].includes(this.tagName)&&t.preventDefault(),l(this)||Yr.getOrCreateInstance(this).show()})),P.on(window,Ir,(()=>{for(const t of W.find(jr))Yr.getOrCreateInstance(t)})),g(Yr);const Xr=".bs.toast",Gr=`mouseover${Xr}`,qr=`mouseout${Xr}`,Ur=`focusin${Xr}`,$r=`focusout${Xr}`,Zr=`hide${Xr}`,Kr=`hidden${Xr}`,Qr=`show${Xr}`,Jr=`shown${Xr}`,to="hide",eo="show",no="showing",io={animation:"boolean",autohide:"boolean",delay:"number"},ro={animation:!0,autohide:!0,delay:5e3};class oo extends V{constructor(t,e){super(t,e),this._timeout=null,this._hasMouseInteraction=!1,this._hasKeyboardInteraction=!1,this._setListeners()}static get Default(){return ro}static get DefaultType(){return io}static get NAME(){return"toast"}show(){P.trigger(this._element,Qr).defaultPrevented||(this._clearTimeout(),this._config.animation&&this._element.classList.add("fade"),this._element.classList.remove(to),h(this._element),this._element.classList.add(eo,no),this._queueCallback((()=>{this._element.classList.remove(no),P.trigger(this._element,Jr),this._maybeScheduleHide()}),this._element,this._config.animation))}hide(){this.isShown()&&(P.trigger(this._element,Zr).defaultPrevented||(this._element.classList.add(no),this._queueCallback((()=>{this._element.classList.add(to),this._element.classList.remove(no,eo),P.trigger(this._element,Kr)}),this._element,this._config.animation)))}dispose(){this._clearTimeout(),this.isShown()&&this._element.classList.remove(eo),super.dispose()}isShown(){return this._element.classList.contains(eo)}_maybeScheduleHide(){this._config.autohide&&(this._hasMouseInteraction||this._hasKeyboardInteraction||(this._timeout=setTimeout((()=>{this.hide()}),this._config.delay)))}_onInteraction(t,e){switch(t.type){case"mouseover":case"mouseout":this._hasMouseInteraction=e;break;case"focusin":case"focusout":this._hasKeyboardInteraction=e}if(e)return void this._clearTimeout();const n=t.relatedTarget;this._element===n||this._element.contains(n)||this._maybeScheduleHide()}_setListeners(){P.on(this._element,Gr,(t=>this._onInteraction(t,!0))),P.on(this._element,qr,(t=>this._onInteraction(t,!1))),P.on(this._element,Ur,(t=>this._onInteraction(t,!0))),P.on(this._element,$r,(t=>this._onInteraction(t,!1)))}_clearTimeout(){clearTimeout(this._timeout),this._timeout=null}static jQueryInterface(t){return this.each((function(){const e=oo.getOrCreateInstance(this,t);if("string"==typeof t){if(void 0===e[t])throw new TypeError(`No method named "${t}"`);e[t](this)}}))}}return j(oo),g(oo),{Alert:q,Button:$,Carousel:At,Collapse:Vt,Dropdown:jn,Modal:Ci,Offcanvas:Wi,Popover:ur,ScrollSpy:_r,Tab:Yr,Toast:oo,Tooltip:sr}})),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t="undefined"!=typeof globalThis?globalThis:t||self).Chart=e()}(this,(function(){"use strict";var t=Object.freeze({__proto__:null,get Colors(){return Lo},get Decimation(){return Ro},get Filler(){return Jo},get Legend(){return ia},get SubTitle(){return sa},get Title(){return oa},get Tooltip(){return wa}});function e(){}const n=(()=>{let t=0;return()=>t++})();function i(t){return null==t}function r(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return"[object"===e.slice(0,7)&&"Array]"===e.slice(-6)}function o(t){return null!==t&&"[object Object]"===Object.prototype.toString.call(t)}function a(t){return("number"==typeof t||t instanceof Number)&&isFinite(+t)}function s(t,e){return a(t)?t:e}function l(t,e){return void 0===t?e:t}const c=(t,e)=>"string"==typeof t&&t.endsWith("%")?parseFloat(t)/100:+t/e,u=(t,e)=>"string"==typeof t&&t.endsWith("%")?parseFloat(t)/100*e:+t;function h(t,e,n){if(t&&"function"==typeof t.call)return t.apply(n,e)}function d(t,e,n,i){let a,s,l;if(r(t))if(s=t.length,i)for(a=s-1;a>=0;a--)e.call(n,t[a],a);else for(a=0;a<s;a++)e.call(n,t[a],a);else if(o(t))for(l=Object.keys(t),s=l.length,a=0;a<s;a++)e.call(n,t[l[a]],l[a])}function p(t,e){let n,i,r,o;if(!t||!e||t.length!==e.length)return!1;for(n=0,i=t.length;n<i;++n)if(r=t[n],o=e[n],r.datasetIndex!==o.datasetIndex||r.index!==o.index)return!1;return!0}function f(t){if(r(t))return t.map(f);if(o(t)){const e=Object.create(null),n=Object.keys(t),i=n.length;let r=0;for(;r<i;++r)e[n[r]]=f(t[n[r]]);return e}return t}function g(t){return-1===["__proto__","prototype","constructor"].indexOf(t)}function m(t,e,n,i){if(!g(t))return;const r=e[t],a=n[t];o(r)&&o(a)?v(r,a,i):e[t]=f(a)}function v(t,e,n){const i=r(e)?e:[e],a=i.length;if(!o(t))return t;const s=(n=n||{}).merger||m;let l;for(let e=0;e<a;++e){if(l=i[e],!o(l))continue;const r=Object.keys(l);for(let e=0,i=r.length;e<i;++e)s(r[e],t,l,n)}return t}function y(t,e){return v(t,e,{merger:b})}function b(t,e,n){if(!g(t))return;const i=e[t],r=n[t];o(i)&&o(r)?y(i,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=f(r))}const x={"":t=>t,x:t=>t.x,y:t=>t.y};function _(t){const e=t.split("."),n=[];let i="";for(const t of e)i+=t,i.endsWith("\\")?i=i.slice(0,-1)+".":(n.push(i),i="");return n}function w(t,e){const n=x[e]||(x[e]=function(t){const e=_(t);return t=>{for(const n of e){if(""===n)break;t=t&&t[n]}return t}}(e));return n(t)}function S(t){return t.charAt(0).toUpperCase()+t.slice(1)}const C=t=>void 0!==t,k=t=>"function"==typeof t,A=(t,e)=>{if(t.size!==e.size)return!1;for(const n of t)if(!e.has(n))return!1;return!0};function M(t){return"mouseup"===t.type||"click"===t.type||"contextmenu"===t.type}const T=Math.PI,I=2*T,E=I+T,O=Number.POSITIVE_INFINITY,D=T/180,L=T/2,P=T/4,N=2*T/3,R=Math.log10,B=Math.sign;function z(t,e,n){return Math.abs(t-e)<n}function F(t){const e=Math.round(t);t=z(t,e,t/1e3)?e:t;const n=Math.pow(10,Math.floor(R(t))),i=t/n;return(i<=1?1:i<=2?2:i<=5?5:10)*n}function V(t){const e=[],n=Math.sqrt(t);let i;for(i=1;i<n;i++)t%i==0&&(e.push(i),e.push(t/i));return n===(0|n)&&e.push(n),e.sort(((t,e)=>t-e)).pop(),e}function H(t){return!isNaN(parseFloat(t))&&isFinite(t)}function W(t,e){const n=Math.round(t);return n-e<=t&&n+e>=t}function j(t,e,n){let i,r,o;for(i=0,r=t.length;i<r;i++)o=t[i][n],isNaN(o)||(e.min=Math.min(e.min,o),e.max=Math.max(e.max,o))}function Y(t){return t*(T/180)}function X(t){return t*(180/T)}function G(t){if(!a(t))return;let e=1,n=0;for(;Math.round(t*e)/e!==t;)e*=10,n++;return n}function q(t,e){const n=e.x-t.x,i=e.y-t.y,r=Math.sqrt(n*n+i*i);let o=Math.atan2(i,n);return o<-.5*T&&(o+=I),{angle:o,distance:r}}function U(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function $(t,e){return(t-e+E)%I-T}function Z(t){return(t%I+I)%I}function K(t,e,n,i){const r=Z(t),o=Z(e),a=Z(n),s=Z(o-r),l=Z(a-r),c=Z(r-o),u=Z(r-a);return r===o||r===a||i&&o===a||s>l&&c<u}function Q(t,e,n){return Math.max(e,Math.min(n,t))}function J(t){return Q(t,-32768,32767)}function tt(t,e,n,i=1e-6){return t>=Math.min(e,n)-i&&t<=Math.max(e,n)+i}function et(t,e,n){n=n||(n=>t[n]<e);let i,r=t.length-1,o=0;for(;r-o>1;)i=o+r>>1,n(i)?o=i:r=i;return{lo:o,hi:r}}const nt=(t,e,n,i)=>et(t,n,i?i=>{const r=t[i][e];return r<n||r===n&&t[i+1][e]===n}:i=>t[i][e]<n),it=(t,e,n)=>et(t,n,(i=>t[i][e]>=n));function rt(t,e,n){let i=0,r=t.length;for(;i<r&&t[i]<e;)i++;for(;r>i&&t[r-1]>n;)r--;return i>0||r<t.length?t.slice(i,r):t}const ot=["push","pop","shift","splice","unshift"];function at(t,e){t._chartjs?t._chartjs.listeners.push(e):(Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),ot.forEach((e=>{const n="_onData"+S(e),i=t[e];Object.defineProperty(t,e,{configurable:!0,enumerable:!1,value(...e){const r=i.apply(this,e);return t._chartjs.listeners.forEach((t=>{"function"==typeof t[n]&&t[n](...e)})),r}})})))}function st(t,e){const n=t._chartjs;if(!n)return;const i=n.listeners,r=i.indexOf(e);-1!==r&&i.splice(r,1),i.length>0||(ot.forEach((e=>{delete t[e]})),delete t._chartjs)}function lt(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const ct="undefined"==typeof window?function(t){return t()}:window.requestAnimationFrame;function ut(t,e){let n=[],i=!1;return function(...r){n=r,i||(i=!0,ct.call(window,(()=>{i=!1,t.apply(e,n)})))}}function ht(t,e){let n;return function(...i){return e?(clearTimeout(n),n=setTimeout(t,e,i)):t.apply(this,i),e}}const dt=t=>"start"===t?"left":"end"===t?"right":"center",pt=(t,e,n)=>"start"===t?e:"end"===t?n:(e+n)/2,ft=(t,e,n,i)=>t===(i?"left":"right")?n:"center"===t?(e+n)/2:e;function gt(t,e,n){const i=e.length;let r=0,o=i;if(t._sorted){const{iScale:a,_parsed:s}=t,l=a.axis,{min:c,max:u,minDefined:h,maxDefined:d}=a.getUserBounds();h&&(r=Q(Math.min(nt(s,l,c).lo,n?i:nt(e,l,a.getPixelForValue(c)).lo),0,i-1)),o=d?Q(Math.max(nt(s,a.axis,u,!0).hi+1,n?0:nt(e,l,a.getPixelForValue(u),!0).hi+1),r,i)-r:i-r}return{start:r,count:o}}function mt(t){const{xScale:e,yScale:n,_scaleRanges:i}=t,r={xmin:e.min,xmax:e.max,ymin:n.min,ymax:n.max};if(!i)return t._scaleRanges=r,!0;const o=i.xmin!==e.min||i.xmax!==e.max||i.ymin!==n.min||i.ymax!==n.max;return Object.assign(i,r),o}var vt=new class{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(t,e,n,i){const r=e.listeners[i],o=e.duration;r.forEach((i=>i({chart:t,initial:e.initial,numSteps:o,currentStep:Math.min(n-e.start,o)})))}_refresh(){this._request||(this._running=!0,this._request=ct.call(window,(()=>{this._update(),this._request=null,this._running&&this._refresh()})))}_update(t=Date.now()){let e=0;this._charts.forEach(((n,i)=>{if(!n.running||!n.items.length)return;const r=n.items;let o,a=r.length-1,s=!1;for(;a>=0;--a)o=r[a],o._active?(o._total>n.duration&&(n.duration=o._total),o.tick(t),s=!0):(r[a]=r[r.length-1],r.pop());s&&(i.draw(),this._notify(i,n,t,"progress")),r.length||(n.running=!1,this._notify(i,n,t,"complete"),n.initial=!1),e+=r.length})),this._lastDate=t,0===e&&(this._running=!1)}_getAnims(t){const e=this._charts;let n=e.get(t);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},e.set(t,n)),n}listen(t,e,n){this._getAnims(t).listeners[e].push(n)}add(t,e){e&&e.length&&this._getAnims(t).items.push(...e)}has(t){return this._getAnims(t).items.length>0}start(t){const e=this._charts.get(t);e&&(e.running=!0,e.start=Date.now(),e.duration=e.items.reduce(((t,e)=>Math.max(t,e._duration)),0),this._refresh())}running(t){if(!this._running)return!1;const e=this._charts.get(t);return!!(e&&e.running&&e.items.length)}stop(t){const e=this._charts.get(t);if(!e||!e.items.length)return;const n=e.items;let i=n.length-1;for(;i>=0;--i)n[i].cancel();e.items=[],this._notify(t,e,Date.now(),"complete")}remove(t){return this._charts.delete(t)}};
/*!
 * @kurkle/color v0.3.2
 * https://github.com/kurkle/color#readme
 * (c) 2023 Jukka Kurkela
 * Released under the MIT License
 */function yt(t){return t+.5|0}const bt=(t,e,n)=>Math.max(Math.min(t,n),e);function xt(t){return bt(yt(2.55*t),0,255)}function _t(t){return bt(yt(255*t),0,255)}function wt(t){return bt(yt(t/2.55)/100,0,1)}function St(t){return bt(yt(100*t),0,100)}const Ct={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},kt=[..."0123456789ABCDEF"],At=t=>kt[15&t],Mt=t=>kt[(240&t)>>4]+kt[15&t],Tt=t=>(240&t)>>4==(15&t);const It=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function Et(t,e,n){const i=e*Math.min(n,1-n),r=(e,r=(e+t/30)%12)=>n-i*Math.max(Math.min(r-3,9-r,1),-1);return[r(0),r(8),r(4)]}function Ot(t,e,n){const i=(i,r=(i+t/60)%6)=>n-n*e*Math.max(Math.min(r,4-r,1),0);return[i(5),i(3),i(1)]}function Dt(t,e,n){const i=Et(t,1,.5);let r;for(e+n>1&&(r=1/(e+n),e*=r,n*=r),r=0;r<3;r++)i[r]*=1-e-n,i[r]+=e;return i}function Lt(t){const e=t.r/255,n=t.g/255,i=t.b/255,r=Math.max(e,n,i),o=Math.min(e,n,i),a=(r+o)/2;let s,l,c;return r!==o&&(c=r-o,l=a>.5?c/(2-r-o):c/(r+o),s=function(t,e,n,i,r){return t===r?(e-n)/i+(e<n?6:0):e===r?(n-t)/i+2:(t-e)/i+4}(e,n,i,c,r),s=60*s+.5),[0|s,l||0,a]}function Pt(t,e,n,i){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,n,i)).map(_t)}function Nt(t,e,n){return Pt(Et,t,e,n)}function Rt(t){return(t%360+360)%360}const Bt={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},zt={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};let Ft;const Vt=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/,Ht=t=>t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055,Wt=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function jt(t,e,n){if(t){let i=Lt(t);i[e]=Math.max(0,Math.min(i[e]+i[e]*n,0===e?360:1)),i=Nt(i),t.r=i[0],t.g=i[1],t.b=i[2]}}function Yt(t,e){return t?Object.assign(e||{},t):t}function Xt(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=_t(t[3]))):(e=Yt(t,{r:0,g:0,b:0,a:1})).a=_t(e.a),e}function Gt(t){return"r"===t.charAt(0)?function(t){const e=Vt.exec(t);let n,i,r,o=255;if(e){if(e[7]!==n){const t=+e[7];o=e[8]?xt(t):bt(255*t,0,255)}return n=+e[1],i=+e[3],r=+e[5],n=255&(e[2]?xt(n):bt(n,0,255)),i=255&(e[4]?xt(i):bt(i,0,255)),r=255&(e[6]?xt(r):bt(r,0,255)),{r:n,g:i,b:r,a:o}}}(t):function(t){const e=It.exec(t);let n,i=255;if(!e)return;e[5]!==n&&(i=e[6]?xt(+e[5]):_t(+e[5]));const r=Rt(+e[2]),o=+e[3]/100,a=+e[4]/100;return n="hwb"===e[1]?function(t,e,n){return Pt(Dt,t,e,n)}(r,o,a):"hsv"===e[1]?function(t,e,n){return Pt(Ot,t,e,n)}(r,o,a):Nt(r,o,a),{r:n[0],g:n[1],b:n[2],a:i}}(t)}class qt{constructor(t){if(t instanceof qt)return t;const e=typeof t;let n;var i,r,o;"object"===e?n=Xt(t):"string"===e&&(o=(i=t).length,"#"===i[0]&&(4===o||5===o?r={r:255&17*Ct[i[1]],g:255&17*Ct[i[2]],b:255&17*Ct[i[3]],a:5===o?17*Ct[i[4]]:255}:7!==o&&9!==o||(r={r:Ct[i[1]]<<4|Ct[i[2]],g:Ct[i[3]]<<4|Ct[i[4]],b:Ct[i[5]]<<4|Ct[i[6]],a:9===o?Ct[i[7]]<<4|Ct[i[8]]:255})),n=r||function(t){Ft||(Ft=function(){const t={},e=Object.keys(zt),n=Object.keys(Bt);let i,r,o,a,s;for(i=0;i<e.length;i++){for(a=s=e[i],r=0;r<n.length;r++)o=n[r],s=s.replace(o,Bt[o]);o=parseInt(zt[a],16),t[s]=[o>>16&255,o>>8&255,255&o]}return t}(),Ft.transparent=[0,0,0,0]);const e=Ft[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:4===e.length?e[3]:255}}(t)||Gt(t)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var t=Yt(this._rgb);return t&&(t.a=wt(t.a)),t}set rgb(t){this._rgb=Xt(t)}rgbString(){return this._valid?(t=this._rgb)&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${wt(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`):void 0;var t}hexString(){return this._valid?function(t){var e=(t=>Tt(t.r)&&Tt(t.g)&&Tt(t.b)&&Tt(t.a))(t)?At:Mt;return t?"#"+e(t.r)+e(t.g)+e(t.b)+((t,e)=>t<255?e(t):"")(t.a,e):void 0}(this._rgb):void 0}hslString(){return this._valid?function(t){if(!t)return;const e=Lt(t),n=e[0],i=St(e[1]),r=St(e[2]);return t.a<255?`hsla(${n}, ${i}%, ${r}%, ${wt(t.a)})`:`hsl(${n}, ${i}%, ${r}%)`}(this._rgb):void 0}mix(t,e){if(t){const n=this.rgb,i=t.rgb;let r;const o=e===r?.5:e,a=2*o-1,s=n.a-i.a,l=((a*s==-1?a:(a+s)/(1+a*s))+1)/2;r=1-l,n.r=255&l*n.r+r*i.r+.5,n.g=255&l*n.g+r*i.g+.5,n.b=255&l*n.b+r*i.b+.5,n.a=o*n.a+(1-o)*i.a,this.rgb=n}return this}interpolate(t,e){return t&&(this._rgb=function(t,e,n){const i=Wt(wt(t.r)),r=Wt(wt(t.g)),o=Wt(wt(t.b));return{r:_t(Ht(i+n*(Wt(wt(e.r))-i))),g:_t(Ht(r+n*(Wt(wt(e.g))-r))),b:_t(Ht(o+n*(Wt(wt(e.b))-o))),a:t.a+n*(e.a-t.a)}}(this._rgb,t._rgb,e)),this}clone(){return new qt(this.rgb)}alpha(t){return this._rgb.a=_t(t),this}clearer(t){return this._rgb.a*=1-t,this}greyscale(){const t=this._rgb,e=yt(.3*t.r+.59*t.g+.11*t.b);return t.r=t.g=t.b=e,this}opaquer(t){return this._rgb.a*=1+t,this}negate(){const t=this._rgb;return t.r=255-t.r,t.g=255-t.g,t.b=255-t.b,this}lighten(t){return jt(this._rgb,2,t),this}darken(t){return jt(this._rgb,2,-t),this}saturate(t){return jt(this._rgb,1,t),this}desaturate(t){return jt(this._rgb,1,-t),this}rotate(t){return function(t,e){var n=Lt(t);n[0]=Rt(n[0]+e),n=Nt(n),t.r=n[0],t.g=n[1],t.b=n[2]}(this._rgb,t),this}}function Ut(t){if(t&&"object"==typeof t){const e=t.toString();return"[object CanvasPattern]"===e||"[object CanvasGradient]"===e}return!1}function $t(t){return Ut(t)?t:new qt(t)}function Zt(t){return Ut(t)?t:new qt(t).saturate(.5).darken(.1).hexString()}const Kt=["x","y","borderWidth","radius","tension"],Qt=["color","borderColor","backgroundColor"],Jt=new Map;function te(t,e,n){return function(t,e){e=e||{};const n=t+JSON.stringify(e);let i=Jt.get(n);return i||(i=new Intl.NumberFormat(t,e),Jt.set(n,i)),i}(e,n).format(t)}const ee={values:t=>r(t)?t:""+t,numeric(t,e,n){if(0===t)return"0";const i=this.chart.options.locale;let r,o=t;if(n.length>1){const e=Math.max(Math.abs(n[0].value),Math.abs(n[n.length-1].value));(e<1e-4||e>1e15)&&(r="scientific"),o=function(t,e){let n=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(n)>=1&&t!==Math.floor(t)&&(n=t-Math.floor(t)),n}(t,n)}const a=R(Math.abs(o)),s=isNaN(a)?1:Math.max(Math.min(-1*Math.floor(a),20),0),l={notation:r,minimumFractionDigits:s,maximumFractionDigits:s};return Object.assign(l,this.options.ticks.format),te(t,i,l)},logarithmic(t,e,n){if(0===t)return"0";const i=n[e].significand||t/Math.pow(10,Math.floor(R(t)));return[1,2,3,5,10,15].includes(i)||e>.8*n.length?ee.numeric.call(this,t,e,n):""}};var ne={formatters:ee};const ie=Object.create(null),re=Object.create(null);function oe(t,e){if(!e)return t;const n=e.split(".");for(let e=0,i=n.length;e<i;++e){const i=n[e];t=t[i]||(t[i]=Object.create(null))}return t}function ae(t,e,n){return"string"==typeof e?v(oe(t,e),n):v(oe(t,""),e)}var se=new class{constructor(t,e){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=t=>t.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(t,e)=>Zt(e.backgroundColor),this.hoverBorderColor=(t,e)=>Zt(e.borderColor),this.hoverColor=(t,e)=>Zt(e.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(t),this.apply(e)}set(t,e){return ae(this,t,e)}get(t){return oe(this,t)}describe(t,e){return ae(re,t,e)}override(t,e){return ae(ie,t,e)}route(t,e,n,i){const r=oe(this,t),a=oe(this,n),s="_"+e;Object.defineProperties(r,{[s]:{value:r[e],writable:!0},[e]:{enumerable:!0,get(){const t=this[s],e=a[i];return o(t)?Object.assign({},e,t):l(t,e)},set(t){this[s]=t}}})}apply(t){t.forEach((t=>t(this)))}}({_scriptable:t=>!t.startsWith("on"),_indexable:t=>"events"!==t,hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[function(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:t=>"onProgress"!==t&&"onComplete"!==t&&"fn"!==t}),t.set("animations",{colors:{type:"color",properties:Qt},numbers:{type:"number",properties:Kt}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:t=>0|t}}}})},function(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})},function(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(t,e)=>e.lineWidth,tickColor:(t,e)=>e.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:ne.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:t=>!t.startsWith("before")&&!t.startsWith("after")&&"callback"!==t&&"parser"!==t,_indexable:t=>"borderDash"!==t&&"tickBorderDash"!==t&&"dash"!==t}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:t=>"backdropPadding"!==t&&"callback"!==t,_indexable:t=>"backdropPadding"!==t})}]);function le(){return"undefined"!=typeof window&&"undefined"!=typeof document}function ce(t){let e=t.parentNode;return e&&"[object ShadowRoot]"===e.toString()&&(e=e.host),e}function ue(t,e,n){let i;return"string"==typeof t?(i=parseInt(t,10),-1!==t.indexOf("%")&&(i=i/100*e.parentNode[n])):i=t,i}const he=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function de(t,e){return he(t).getPropertyValue(e)}const pe=["top","right","bottom","left"];function fe(t,e,n){const i={};n=n?"-"+n:"";for(let r=0;r<4;r++){const o=pe[r];i[o]=parseFloat(t[e+"-"+o+n])||0}return i.width=i.left+i.right,i.height=i.top+i.bottom,i}function ge(t,e){if("native"in t)return t;const{canvas:n,currentDevicePixelRatio:i}=e,r=he(n),o="border-box"===r.boxSizing,a=fe(r,"padding"),s=fe(r,"border","width"),{x:l,y:c,box:u}=function(t,e){const n=t.touches,i=n&&n.length?n[0]:t,{offsetX:r,offsetY:o}=i;let a,s,l=!1;if(((t,e,n)=>(t>0||e>0)&&(!n||!n.shadowRoot))(r,o,t.target))a=r,s=o;else{const t=e.getBoundingClientRect();a=i.clientX-t.left,s=i.clientY-t.top,l=!0}return{x:a,y:s,box:l}}(t,n),h=a.left+(u&&s.left),d=a.top+(u&&s.top);let{width:p,height:f}=e;return o&&(p-=a.width+s.width,f-=a.height+s.height),{x:Math.round((l-h)/p*n.width/i),y:Math.round((c-d)/f*n.height/i)}}const me=t=>Math.round(10*t)/10;function ve(t,e,n,i){const r=he(t),o=fe(r,"margin"),a=ue(r.maxWidth,t,"clientWidth")||O,s=ue(r.maxHeight,t,"clientHeight")||O,l=function(t,e,n){let i,r;if(void 0===e||void 0===n){const o=ce(t);if(o){const t=o.getBoundingClientRect(),a=he(o),s=fe(a,"border","width"),l=fe(a,"padding");e=t.width-l.width-s.width,n=t.height-l.height-s.height,i=ue(a.maxWidth,o,"clientWidth"),r=ue(a.maxHeight,o,"clientHeight")}else e=t.clientWidth,n=t.clientHeight}return{width:e,height:n,maxWidth:i||O,maxHeight:r||O}}(t,e,n);let{width:c,height:u}=l;if("content-box"===r.boxSizing){const t=fe(r,"border","width"),e=fe(r,"padding");c-=e.width+t.width,u-=e.height+t.height}return c=Math.max(0,c-o.width),u=Math.max(0,i?c/i:u-o.height),c=me(Math.min(c,a,l.maxWidth)),u=me(Math.min(u,s,l.maxHeight)),c&&!u&&(u=me(c/2)),(void 0!==e||void 0!==n)&&i&&l.height&&u>l.height&&(u=l.height,c=me(Math.floor(u*i))),{width:c,height:u}}function ye(t,e,n){const i=e||1,r=Math.floor(t.height*i),o=Math.floor(t.width*i);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const a=t.canvas;return a.style&&(n||!a.style.height&&!a.style.width)&&(a.style.height=`${t.height}px`,a.style.width=`${t.width}px`),(t.currentDevicePixelRatio!==i||a.height!==r||a.width!==o)&&(t.currentDevicePixelRatio=i,a.height=r,a.width=o,t.ctx.setTransform(i,0,0,i,0,0),!0)}const be=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};le()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch(t){}return t}();function xe(t,e){const n=de(t,e),i=n&&n.match(/^(\d+)(\.\d+)?px$/);return i?+i[1]:void 0}function _e(t){return!t||i(t.size)||i(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function we(t,e,n,i,r){let o=e[r];return o||(o=e[r]=t.measureText(r).width,n.push(r)),o>i&&(i=o),i}function Se(t,e,n,i){let o=(i=i||{}).data=i.data||{},a=i.garbageCollect=i.garbageCollect||[];i.font!==e&&(o=i.data={},a=i.garbageCollect=[],i.font=e),t.save(),t.font=e;let s=0;const l=n.length;let c,u,h,d,p;for(c=0;c<l;c++)if(d=n[c],null==d||r(d)){if(r(d))for(u=0,h=d.length;u<h;u++)p=d[u],null==p||r(p)||(s=we(t,o,a,s,p))}else s=we(t,o,a,s,d);t.restore();const f=a.length/2;if(f>n.length){for(c=0;c<f;c++)delete o[a[c]];a.splice(0,f)}return s}function Ce(t,e,n){const i=t.currentDevicePixelRatio,r=0!==n?Math.max(n/2,.5):0;return Math.round((e-r)*i)/i+r}function ke(t,e){(e=e||t.getContext("2d")).save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore()}function Ae(t,e,n,i){Me(t,e,n,i,null)}function Me(t,e,n,i,r){let o,a,s,l,c,u,h,d;const p=e.pointStyle,f=e.rotation,g=e.radius;let m=(f||0)*D;if(p&&"object"==typeof p&&(o=p.toString(),"[object HTMLImageElement]"===o||"[object HTMLCanvasElement]"===o))return t.save(),t.translate(n,i),t.rotate(m),t.drawImage(p,-p.width/2,-p.height/2,p.width,p.height),void t.restore();if(!(isNaN(g)||g<=0)){switch(t.beginPath(),p){default:r?t.ellipse(n,i,r/2,g,0,0,I):t.arc(n,i,g,0,I),t.closePath();break;case"triangle":u=r?r/2:g,t.moveTo(n+Math.sin(m)*u,i-Math.cos(m)*g),m+=N,t.lineTo(n+Math.sin(m)*u,i-Math.cos(m)*g),m+=N,t.lineTo(n+Math.sin(m)*u,i-Math.cos(m)*g),t.closePath();break;case"rectRounded":c=.516*g,l=g-c,a=Math.cos(m+P)*l,h=Math.cos(m+P)*(r?r/2-c:l),s=Math.sin(m+P)*l,d=Math.sin(m+P)*(r?r/2-c:l),t.arc(n-h,i-s,c,m-T,m-L),t.arc(n+d,i-a,c,m-L,m),t.arc(n+h,i+s,c,m,m+L),t.arc(n-d,i+a,c,m+L,m+T),t.closePath();break;case"rect":if(!f){l=Math.SQRT1_2*g,u=r?r/2:l,t.rect(n-u,i-l,2*u,2*l);break}m+=P;case"rectRot":h=Math.cos(m)*(r?r/2:g),a=Math.cos(m)*g,s=Math.sin(m)*g,d=Math.sin(m)*(r?r/2:g),t.moveTo(n-h,i-s),t.lineTo(n+d,i-a),t.lineTo(n+h,i+s),t.lineTo(n-d,i+a),t.closePath();break;case"crossRot":m+=P;case"cross":h=Math.cos(m)*(r?r/2:g),a=Math.cos(m)*g,s=Math.sin(m)*g,d=Math.sin(m)*(r?r/2:g),t.moveTo(n-h,i-s),t.lineTo(n+h,i+s),t.moveTo(n+d,i-a),t.lineTo(n-d,i+a);break;case"star":h=Math.cos(m)*(r?r/2:g),a=Math.cos(m)*g,s=Math.sin(m)*g,d=Math.sin(m)*(r?r/2:g),t.moveTo(n-h,i-s),t.lineTo(n+h,i+s),t.moveTo(n+d,i-a),t.lineTo(n-d,i+a),m+=P,h=Math.cos(m)*(r?r/2:g),a=Math.cos(m)*g,s=Math.sin(m)*g,d=Math.sin(m)*(r?r/2:g),t.moveTo(n-h,i-s),t.lineTo(n+h,i+s),t.moveTo(n+d,i-a),t.lineTo(n-d,i+a);break;case"line":a=r?r/2:Math.cos(m)*g,s=Math.sin(m)*g,t.moveTo(n-a,i-s),t.lineTo(n+a,i+s);break;case"dash":t.moveTo(n,i),t.lineTo(n+Math.cos(m)*(r?r/2:g),i+Math.sin(m)*g);break;case!1:t.closePath()}t.fill(),e.borderWidth>0&&t.stroke()}}function Te(t,e,n){return n=n||.5,!e||t&&t.x>e.left-n&&t.x<e.right+n&&t.y>e.top-n&&t.y<e.bottom+n}function Ie(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Ee(t){t.restore()}function Oe(t,e,n,i,r){if(!e)return t.lineTo(n.x,n.y);if("middle"===r){const i=(e.x+n.x)/2;t.lineTo(i,e.y),t.lineTo(i,n.y)}else"after"===r!=!!i?t.lineTo(e.x,n.y):t.lineTo(n.x,e.y);t.lineTo(n.x,n.y)}function De(t,e,n,i){if(!e)return t.lineTo(n.x,n.y);t.bezierCurveTo(i?e.cp1x:e.cp2x,i?e.cp1y:e.cp2y,i?n.cp2x:n.cp1x,i?n.cp2y:n.cp1y,n.x,n.y)}function Le(t,e,n,i,r){if(r.strikethrough||r.underline){const o=t.measureText(i),a=e-o.actualBoundingBoxLeft,s=e+o.actualBoundingBoxRight,l=n-o.actualBoundingBoxAscent,c=n+o.actualBoundingBoxDescent,u=r.strikethrough?(l+c)/2:c;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(a,u),t.lineTo(s,u),t.stroke()}}function Pe(t,e){const n=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=n}function Ne(t,e,n,o,a,s={}){const l=r(e)?e:[e],c=s.strokeWidth>0&&""!==s.strokeColor;let u,h;for(t.save(),t.font=a.string,function(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),i(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}(t,s),u=0;u<l.length;++u)h=l[u],s.backdrop&&Pe(t,s.backdrop),c&&(s.strokeColor&&(t.strokeStyle=s.strokeColor),i(s.strokeWidth)||(t.lineWidth=s.strokeWidth),t.strokeText(h,n,o,s.maxWidth)),t.fillText(h,n,o,s.maxWidth),Le(t,n,o,h,s),o+=Number(a.lineHeight);t.restore()}function Re(t,e){const{x:n,y:i,w:r,h:o,radius:a}=e;t.arc(n+a.topLeft,i+a.topLeft,a.topLeft,1.5*T,T,!0),t.lineTo(n,i+o-a.bottomLeft),t.arc(n+a.bottomLeft,i+o-a.bottomLeft,a.bottomLeft,T,L,!0),t.lineTo(n+r-a.bottomRight,i+o),t.arc(n+r-a.bottomRight,i+o-a.bottomRight,a.bottomRight,L,0,!0),t.lineTo(n+r,i+a.topRight),t.arc(n+r-a.topRight,i+a.topRight,a.topRight,0,-L,!0),t.lineTo(n+a.topLeft,i)}function Be(t,e=[""],n,i,r=(()=>t[0])){const o=n||t;void 0===i&&(i=Ue("_fallback",t));const a={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:o,_fallback:i,_getTarget:r,override:n=>Be([n,...t],e,o,i)};return new Proxy(a,{deleteProperty:(e,n)=>(delete e[n],delete e._keys,delete t[0][n],!0),get:(n,i)=>We(n,i,(()=>function(t,e,n,i){let r;for(const o of e)if(r=Ue(Ve(o,t),n),void 0!==r)return He(t,r)?Ge(n,i,t,r):r}(i,e,t,n))),getOwnPropertyDescriptor:(t,e)=>Reflect.getOwnPropertyDescriptor(t._scopes[0],e),getPrototypeOf:()=>Reflect.getPrototypeOf(t[0]),has:(t,e)=>$e(t).includes(e),ownKeys:t=>$e(t),set(t,e,n){const i=t._storage||(t._storage=r());return t[e]=i[e]=n,delete t._keys,!0}})}function ze(t,e,n,i){const a={_cacheable:!1,_proxy:t,_context:e,_subProxy:n,_stack:new Set,_descriptors:Fe(t,i),setContext:e=>ze(t,e,n,i),override:r=>ze(t.override(r),e,n,i)};return new Proxy(a,{deleteProperty:(e,n)=>(delete e[n],delete t[n],!0),get:(t,e,n)=>We(t,e,(()=>function(t,e,n){const{_proxy:i,_context:a,_subProxy:s,_descriptors:l}=t;let c=i[e];return k(c)&&l.isScriptable(e)&&(c=function(t,e,n,i){const{_proxy:r,_context:o,_subProxy:a,_stack:s}=n;if(s.has(t))throw new Error("Recursion detected: "+Array.from(s).join("->")+"->"+t);s.add(t);let l=e(o,a||i);return s.delete(t),He(t,l)&&(l=Ge(r._scopes,r,t,l)),l}(e,c,t,n)),r(c)&&c.length&&(c=function(t,e,n,i){const{_proxy:r,_context:a,_subProxy:s,_descriptors:l}=n;if(void 0!==a.index&&i(t))return e[a.index%e.length];if(o(e[0])){const n=e,i=r._scopes.filter((t=>t!==n));e=[];for(const o of n){const n=Ge(i,r,t,o);e.push(ze(n,a,s&&s[t],l))}}return e}(e,c,t,l.isIndexable)),He(e,c)&&(c=ze(c,a,s&&s[e],l)),c}(t,e,n))),getOwnPropertyDescriptor:(e,n)=>e._descriptors.allKeys?Reflect.has(t,n)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,n),getPrototypeOf:()=>Reflect.getPrototypeOf(t),has:(e,n)=>Reflect.has(t,n),ownKeys:()=>Reflect.ownKeys(t),set:(e,n,i)=>(t[n]=i,delete e[n],!0)})}function Fe(t,e={scriptable:!0,indexable:!0}){const{_scriptable:n=e.scriptable,_indexable:i=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:n,indexable:i,isScriptable:k(n)?n:()=>n,isIndexable:k(i)?i:()=>i}}const Ve=(t,e)=>t?t+S(e):e,He=(t,e)=>o(e)&&"adapters"!==t&&(null===Object.getPrototypeOf(e)||e.constructor===Object);function We(t,e,n){if(Object.prototype.hasOwnProperty.call(t,e))return t[e];const i=n();return t[e]=i,i}function je(t,e,n){return k(t)?t(e,n):t}const Ye=(t,e)=>!0===t?e:"string"==typeof t?w(e,t):void 0;function Xe(t,e,n,i,r){for(const o of e){const e=Ye(n,o);if(e){t.add(e);const o=je(e._fallback,n,r);if(void 0!==o&&o!==n&&o!==i)return o}else if(!1===e&&void 0!==i&&n!==i)return null}return!1}function Ge(t,e,n,i){const a=e._rootScopes,s=je(e._fallback,n,i),l=[...t,...a],c=new Set;c.add(i);let u=qe(c,l,n,s||n,i);return null!==u&&(void 0===s||s===n||(u=qe(c,l,s,u,i),null!==u))&&Be(Array.from(c),[""],a,s,(()=>function(t,e,n){const i=t._getTarget();e in i||(i[e]={});const a=i[e];return r(a)&&o(n)?n:a||{}}(e,n,i)))}function qe(t,e,n,i,r){for(;n;)n=Xe(t,e,n,i,r);return n}function Ue(t,e){for(const n of e){if(!n)continue;const e=n[t];if(void 0!==e)return e}}function $e(t){let e=t._keys;return e||(e=t._keys=function(t){const e=new Set;for(const n of t)for(const t of Object.keys(n).filter((t=>!t.startsWith("_"))))e.add(t);return Array.from(e)}(t._scopes)),e}function Ze(t,e,n,i){const{iScale:r}=t,{key:o="r"}=this._parsing,a=new Array(i);let s,l,c,u;for(s=0,l=i;s<l;++s)c=s+n,u=e[c],a[s]={r:r.parse(w(u,o),c)};return a}const Ke=Number.EPSILON||1e-14,Qe=(t,e)=>e<t.length&&!t[e].skip&&t[e],Je=t=>"x"===t?"y":"x";function tn(t,e,n,i){const r=t.skip?e:t,o=e,a=n.skip?e:n,s=U(o,r),l=U(a,o);let c=s/(s+l),u=l/(s+l);c=isNaN(c)?0:c,u=isNaN(u)?0:u;const h=i*c,d=i*u;return{previous:{x:o.x-h*(a.x-r.x),y:o.y-h*(a.y-r.y)},next:{x:o.x+d*(a.x-r.x),y:o.y+d*(a.y-r.y)}}}function en(t,e="x"){const n=Je(e),i=t.length,r=Array(i).fill(0),o=Array(i);let a,s,l,c=Qe(t,0);for(a=0;a<i;++a)if(s=l,l=c,c=Qe(t,a+1),l){if(c){const t=c[e]-l[e];r[a]=0!==t?(c[n]-l[n])/t:0}o[a]=s?c?B(r[a-1])!==B(r[a])?0:(r[a-1]+r[a])/2:r[a-1]:r[a]}!function(t,e,n){const i=t.length;let r,o,a,s,l,c=Qe(t,0);for(let u=0;u<i-1;++u)l=c,c=Qe(t,u+1),l&&c&&(z(e[u],0,Ke)?n[u]=n[u+1]=0:(r=n[u]/e[u],o=n[u+1]/e[u],s=Math.pow(r,2)+Math.pow(o,2),s<=9||(a=3/Math.sqrt(s),n[u]=r*a*e[u],n[u+1]=o*a*e[u])))}(t,r,o),function(t,e,n="x"){const i=Je(n),r=t.length;let o,a,s,l=Qe(t,0);for(let c=0;c<r;++c){if(a=s,s=l,l=Qe(t,c+1),!s)continue;const r=s[n],u=s[i];a&&(o=(r-a[n])/3,s[`cp1${n}`]=r-o,s[`cp1${i}`]=u-o*e[c]),l&&(o=(l[n]-r)/3,s[`cp2${n}`]=r+o,s[`cp2${i}`]=u+o*e[c])}}(t,o,e)}function nn(t,e,n){return Math.max(Math.min(t,n),e)}function rn(t,e,n,i,r){let o,a,s,l;if(e.spanGaps&&(t=t.filter((t=>!t.skip))),"monotone"===e.cubicInterpolationMode)en(t,r);else{let n=i?t[t.length-1]:t[0];for(o=0,a=t.length;o<a;++o)s=t[o],l=tn(n,s,t[Math.min(o+1,a-(i?0:1))%a],e.tension),s.cp1x=l.previous.x,s.cp1y=l.previous.y,s.cp2x=l.next.x,s.cp2y=l.next.y,n=s}e.capBezierPoints&&function(t,e){let n,i,r,o,a,s=Te(t[0],e);for(n=0,i=t.length;n<i;++n)a=o,o=s,s=n<i-1&&Te(t[n+1],e),o&&(r=t[n],a&&(r.cp1x=nn(r.cp1x,e.left,e.right),r.cp1y=nn(r.cp1y,e.top,e.bottom)),s&&(r.cp2x=nn(r.cp2x,e.left,e.right),r.cp2y=nn(r.cp2y,e.top,e.bottom)))}(t,n)}const on=t=>0===t||1===t,an=(t,e,n)=>-Math.pow(2,10*(t-=1))*Math.sin((t-e)*I/n),sn=(t,e,n)=>Math.pow(2,-10*t)*Math.sin((t-e)*I/n)+1,ln={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>1-Math.cos(t*L),easeOutSine:t=>Math.sin(t*L),easeInOutSine:t=>-.5*(Math.cos(T*t)-1),easeInExpo:t=>0===t?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>1===t?1:1-Math.pow(2,-10*t),easeInOutExpo:t=>on(t)?t:t<.5?.5*Math.pow(2,10*(2*t-1)):.5*(2-Math.pow(2,-10*(2*t-1))),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>on(t)?t:an(t,.075,.3),easeOutElastic:t=>on(t)?t:sn(t,.075,.3),easeInOutElastic(t){const e=.1125;return on(t)?t:t<.5?.5*an(2*t,e,.45):.5+.5*sn(2*t-1,e,.45)},easeInBack(t){const e=1.70158;return t*t*((e+1)*t-e)},easeOutBack(t){const e=1.70158;return(t-=1)*t*((e+1)*t+e)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?t*t*((1+(e*=1.525))*t-e)*.5:.5*((t-=2)*t*((1+(e*=1.525))*t+e)+2)},easeInBounce:t=>1-ln.easeOutBounce(1-t),easeOutBounce(t){const e=7.5625,n=2.75;return t<1/n?e*t*t:t<2/n?e*(t-=1.5/n)*t+.75:t<2.5/n?e*(t-=2.25/n)*t+.9375:e*(t-=2.625/n)*t+.984375},easeInOutBounce:t=>t<.5?.5*ln.easeInBounce(2*t):.5*ln.easeOutBounce(2*t-1)+.5};function cn(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:t.y+n*(e.y-t.y)}}function un(t,e,n,i){return{x:t.x+n*(e.x-t.x),y:"middle"===i?n<.5?t.y:e.y:"after"===i?n<1?t.y:e.y:n>0?e.y:t.y}}function hn(t,e,n,i){const r={x:t.cp2x,y:t.cp2y},o={x:e.cp1x,y:e.cp1y},a=cn(t,r,n),s=cn(r,o,n),l=cn(o,e,n),c=cn(a,s,n),u=cn(s,l,n);return cn(c,u,n)}const dn=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,pn=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function fn(t,e){const n=(""+t).match(dn);if(!n||"normal"===n[1])return 1.2*e;switch(t=+n[2],n[3]){case"px":return t;case"%":t/=100}return e*t}const gn=t=>+t||0;function mn(t,e){const n={},i=o(e),r=i?Object.keys(e):e,a=o(t)?i?n=>l(t[n],t[e[n]]):e=>t[e]:()=>t;for(const t of r)n[t]=gn(a(t));return n}function vn(t){return mn(t,{top:"y",right:"x",bottom:"y",left:"x"})}function yn(t){return mn(t,["topLeft","topRight","bottomLeft","bottomRight"])}function bn(t){const e=vn(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function xn(t,e){t=t||{},e=e||se.font;let n=l(t.size,e.size);"string"==typeof n&&(n=parseInt(n,10));let i=l(t.style,e.style);i&&!(""+i).match(pn)&&(console.warn('Invalid font style specified: "'+i+'"'),i=void 0);const r={family:l(t.family,e.family),lineHeight:fn(l(t.lineHeight,e.lineHeight),n),size:n,style:i,weight:l(t.weight,e.weight),string:""};return r.string=_e(r),r}function _n(t,e,n,i){let o,a,s,l=!0;for(o=0,a=t.length;o<a;++o)if(s=t[o],void 0!==s&&(void 0!==e&&"function"==typeof s&&(s=s(e),l=!1),void 0!==n&&r(s)&&(s=s[n%s.length],l=!1),void 0!==s))return i&&!l&&(i.cacheable=!1),s}function wn(t,e,n){const{min:i,max:r}=t,o=u(e,(r-i)/2),a=(t,e)=>n&&0===t?0:t+e;return{min:a(i,-Math.abs(o)),max:a(r,o)}}function Sn(t,e){return Object.assign(Object.create(t),e)}function Cn(t,e,n){return t?function(t,e){return{x:n=>t+t+e-n,setWidth(t){e=t},textAlign:t=>"center"===t?t:"right"===t?"left":"right",xPlus:(t,e)=>t-e,leftForLtr:(t,e)=>t-e}}(e,n):{x:t=>t,setWidth(t){},textAlign:t=>t,xPlus:(t,e)=>t+e,leftForLtr:(t,e)=>t}}function kn(t,e){let n,i;"ltr"!==e&&"rtl"!==e||(n=t.canvas.style,i=[n.getPropertyValue("direction"),n.getPropertyPriority("direction")],n.setProperty("direction",e,"important"),t.prevTextDirection=i)}function An(t,e){void 0!==e&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Mn(t){return"angle"===t?{between:K,compare:$,normalize:Z}:{between:tt,compare:(t,e)=>t-e,normalize:t=>t}}function Tn({start:t,end:e,count:n,loop:i,style:r}){return{start:t%n,end:e%n,loop:i&&(e-t+1)%n==0,style:r}}function In(t,e,n){if(!n)return[t];const{property:i,start:r,end:o}=n,a=e.length,{compare:s,between:l,normalize:c}=Mn(i),{start:u,end:h,loop:d,style:p}=function(t,e,n){const{property:i,start:r,end:o}=n,{between:a,normalize:s}=Mn(i),l=e.length;let c,u,{start:h,end:d,loop:p}=t;if(p){for(h+=l,d+=l,c=0,u=l;c<u&&a(s(e[h%l][i]),r,o);++c)h--,d--;h%=l,d%=l}return d<h&&(d+=l),{start:h,end:d,loop:p,style:t.style}}(t,e,n),f=[];let g,m,v,y=!1,b=null;for(let t=u,n=u;t<=h;++t)m=e[t%a],m.skip||(g=c(m[i]),g!==v&&(y=l(g,r,o),null===b&&(y||l(r,v,g)&&0!==s(r,v))&&(b=0===s(g,r)?t:n),null!==b&&(!y||0===s(o,g)||l(o,v,g))&&(f.push(Tn({start:b,end:t,loop:d,count:a,style:p})),b=null),n=t,v=g));return null!==b&&f.push(Tn({start:b,end:h,loop:d,count:a,style:p})),f}function En(t,e){const n=[],i=t.segments;for(let r=0;r<i.length;r++){const o=In(i[r],t.points,e);o.length&&n.push(...o)}return n}function On(t,e){const n=t.points,i=t.options.spanGaps,r=n.length;if(!r)return[];const o=!!t._loop,{start:a,end:s}=function(t,e,n,i){let r=0,o=e-1;if(n&&!i)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,n&&(o+=r);o>r&&t[o%e].skip;)o--;return o%=e,{start:r,end:o}}(n,r,o,i);return Dn(t,!0===i?[{start:a,end:s,loop:o}]:function(t,e,n,i){const r=t.length,o=[];let a,s=e,l=t[e];for(a=e+1;a<=n;++a){const n=t[a%r];n.skip||n.stop?l.skip||(i=!1,o.push({start:e%r,end:(a-1)%r,loop:i}),e=s=n.stop?a:null):(s=a,l.skip&&(e=a)),l=n}return null!==s&&o.push({start:e%r,end:s%r,loop:i}),o}(n,a,s<a?s+r:s,!!t._fullLoop&&0===a&&s===r-1),n,e)}function Dn(t,e,n,i){return i&&i.setContext&&n?function(t,e,n,i){const r=t._chart.getContext(),o=Ln(t.options),{_datasetIndex:a,options:{spanGaps:s}}=t,l=n.length,c=[];let u=o,h=e[0].start,d=h;function p(t,e,i,r){const o=s?-1:1;if(t!==e){for(t+=l;n[t%l].skip;)t-=o;for(;n[e%l].skip;)e+=o;t%l!=e%l&&(c.push({start:t%l,end:e%l,loop:i,style:r}),u=r,h=e%l)}}for(const t of e){h=s?h:t.start;let e,o=n[h%l];for(d=h+1;d<=t.end;d++){const s=n[d%l];e=Ln(i.setContext(Sn(r,{type:"segment",p0:o,p1:s,p0DataIndex:(d-1)%l,p1DataIndex:d%l,datasetIndex:a}))),Pn(e,u)&&p(h,d-1,t.loop,u),o=s,u=e}h<d-1&&p(h,d-1,t.loop,u)}return c}(t,e,n,i):e}function Ln(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function Pn(t,e){if(!e)return!1;const n=[],i=function(t,e){return Ut(e)?(n.includes(e)||n.push(e),n.indexOf(e)):e};return JSON.stringify(t,i)!==JSON.stringify(e,i)}var Nn=Object.freeze({__proto__:null,HALF_PI:L,INFINITY:O,PI:T,PITAU:E,QUARTER_PI:P,RAD_PER_DEG:D,TAU:I,TWO_THIRDS_PI:N,_addGrace:wn,_alignPixel:Ce,_alignStartEnd:pt,_angleBetween:K,_angleDiff:$,_arrayUnique:lt,_attachContext:ze,_bezierCurveTo:De,_bezierInterpolation:hn,_boundSegment:In,_boundSegments:En,_capitalize:S,_computeSegments:On,_createResolver:Be,_decimalPlaces:G,_deprecated:function(t,e,n,i){void 0!==e&&console.warn(t+': "'+n+'" is deprecated. Please use "'+i+'" instead')},_descriptors:Fe,_elementsEqual:p,_factorize:V,_filterBetween:rt,_getParentNode:ce,_getStartAndCountOfVisiblePoints:gt,_int16Range:J,_isBetween:tt,_isClickEvent:M,_isDomSupported:le,_isPointInArea:Te,_limitValue:Q,_longestText:Se,_lookup:et,_lookupByKey:nt,_measureText:we,_merger:m,_mergerIf:b,_normalizeAngle:Z,_parseObjectDataRadialScale:Ze,_pointInLine:cn,_readValueToProps:mn,_rlookupByKey:it,_scaleRangesChanged:mt,_setMinAndMaxByKey:j,_splitKey:_,_steppedInterpolation:un,_steppedLineTo:Oe,_textX:ft,_toLeftRightCenter:dt,_updateBezierControlPoints:rn,addRoundedRectPath:Re,almostEquals:z,almostWhole:W,callback:h,clearCanvas:ke,clipArea:Ie,clone:f,color:$t,createContext:Sn,debounce:ht,defined:C,distanceBetweenPoints:U,drawPoint:Ae,drawPointLegend:Me,each:d,easingEffects:ln,finiteOrDefault:s,fontString:function(t,e,n){return e+" "+t+"px "+n},formatNumber:te,getAngleFromPoint:q,getHoverColor:Zt,getMaximumSize:ve,getRelativePosition:ge,getRtlAdapter:Cn,getStyle:de,isArray:r,isFinite:a,isFunction:k,isNullOrUndef:i,isNumber:H,isObject:o,isPatternOrGradient:Ut,listenArrayEvents:at,log10:R,merge:v,mergeIf:y,niceNum:F,noop:e,overrideTextDirection:kn,readUsedSize:xe,renderText:Ne,requestAnimFrame:ct,resolve:_n,resolveObjectKey:w,restoreTextDirection:An,retinaScale:ye,setsEqual:A,sign:B,splineCurve:tn,splineCurveMonotone:en,supportsEventListenerOptions:be,throttled:ut,toDegrees:X,toDimension:u,toFont:xn,toFontString:_e,toLineHeight:fn,toPadding:bn,toPercentage:c,toRadians:Y,toTRBL:vn,toTRBLCorners:yn,uid:n,unclipArea:Ee,unlistenArrayEvents:st,valueOrDefault:l});function Rn(t,e,n,i){const{controller:r,data:o,_sorted:a}=t,s=r._cachedMeta.iScale;if(s&&e===s.axis&&"r"!==e&&a&&o.length){const t=s._reversePixels?it:nt;if(!i)return t(o,e,n);if(r._sharedOptions){const i=o[0],r="function"==typeof i.getRange&&i.getRange(e);if(r){const i=t(o,e,n-r),a=t(o,e,n+r);return{lo:i.lo,hi:a.hi}}}}return{lo:0,hi:o.length-1}}function Bn(t,e,n,i,r){const o=t.getSortedVisibleDatasetMetas(),a=n[e];for(let t=0,n=o.length;t<n;++t){const{index:n,data:s}=o[t],{lo:l,hi:c}=Rn(o[t],e,a,r);for(let t=l;t<=c;++t){const e=s[t];e.skip||i(e,n,t)}}}function zn(t,e,n,i,r){const o=[];return r||t.isPointInArea(e)?(Bn(t,n,e,(function(n,a,s){(r||Te(n,t.chartArea,0))&&n.inRange(e.x,e.y,i)&&o.push({element:n,datasetIndex:a,index:s})}),!0),o):o}function Fn(t,e,n,i,r,o){return o||t.isPointInArea(e)?"r"!==n||i?function(t,e,n,i,r,o){let a=[];const s=function(t){const e=-1!==t.indexOf("x"),n=-1!==t.indexOf("y");return function(t,i){const r=e?Math.abs(t.x-i.x):0,o=n?Math.abs(t.y-i.y):0;return Math.sqrt(Math.pow(r,2)+Math.pow(o,2))}}(n);let l=Number.POSITIVE_INFINITY;return Bn(t,n,e,(function(n,c,u){const h=n.inRange(e.x,e.y,r);if(i&&!h)return;const d=n.getCenterPoint(r);if(!o&&!t.isPointInArea(d)&&!h)return;const p=s(e,d);p<l?(a=[{element:n,datasetIndex:c,index:u}],l=p):p===l&&a.push({element:n,datasetIndex:c,index:u})})),a}(t,e,n,i,r,o):function(t,e,n,i){let r=[];return Bn(t,n,e,(function(t,n,o){const{startAngle:a,endAngle:s}=t.getProps(["startAngle","endAngle"],i),{angle:l}=q(t,{x:e.x,y:e.y});K(l,a,s)&&r.push({element:t,datasetIndex:n,index:o})})),r}(t,e,n,r):[]}function Vn(t,e,n,i,r){const o=[],a="x"===n?"inXRange":"inYRange";let s=!1;return Bn(t,n,e,((t,i,l)=>{t[a](e[n],r)&&(o.push({element:t,datasetIndex:i,index:l}),s=s||t.inRange(e.x,e.y,r))})),i&&!s?[]:o}var Hn={evaluateInteractionItems:Bn,modes:{index(t,e,n,i){const r=ge(e,t),o=n.axis||"x",a=n.includeInvisible||!1,s=n.intersect?zn(t,r,o,i,a):Fn(t,r,o,!1,i,a),l=[];return s.length?(t.getSortedVisibleDatasetMetas().forEach((t=>{const e=s[0].index,n=t.data[e];n&&!n.skip&&l.push({element:n,datasetIndex:t.index,index:e})})),l):[]},dataset(t,e,n,i){const r=ge(e,t),o=n.axis||"xy",a=n.includeInvisible||!1;let s=n.intersect?zn(t,r,o,i,a):Fn(t,r,o,!1,i,a);if(s.length>0){const e=s[0].datasetIndex,n=t.getDatasetMeta(e).data;s=[];for(let t=0;t<n.length;++t)s.push({element:n[t],datasetIndex:e,index:t})}return s},point:(t,e,n,i)=>zn(t,ge(e,t),n.axis||"xy",i,n.includeInvisible||!1),nearest(t,e,n,i){const r=ge(e,t),o=n.axis||"xy",a=n.includeInvisible||!1;return Fn(t,r,o,n.intersect,i,a)},x:(t,e,n,i)=>Vn(t,ge(e,t),"x",n.intersect,i),y:(t,e,n,i)=>Vn(t,ge(e,t),"y",n.intersect,i)}};const Wn=["left","top","right","bottom"];function jn(t,e){return t.filter((t=>t.pos===e))}function Yn(t,e){return t.filter((t=>-1===Wn.indexOf(t.pos)&&t.box.axis===e))}function Xn(t,e){return t.sort(((t,n)=>{const i=e?n:t,r=e?t:n;return i.weight===r.weight?i.index-r.index:i.weight-r.weight}))}function Gn(t,e,n,i){return Math.max(t[n],e[n])+Math.max(t[i],e[i])}function qn(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function Un(t,e,n,i){const{pos:r,box:a}=n,s=t.maxPadding;if(!o(r)){n.size&&(t[r]-=n.size);const e=i[n.stack]||{size:0,count:1};e.size=Math.max(e.size,n.horizontal?a.height:a.width),n.size=e.size/e.count,t[r]+=n.size}a.getPadding&&qn(s,a.getPadding());const l=Math.max(0,e.outerWidth-Gn(s,t,"left","right")),c=Math.max(0,e.outerHeight-Gn(s,t,"top","bottom")),u=l!==t.w,h=c!==t.h;return t.w=l,t.h=c,n.horizontal?{same:u,other:h}:{same:h,other:u}}function $n(t,e){const n=e.maxPadding;return function(t){const i={left:0,top:0,right:0,bottom:0};return t.forEach((t=>{i[t]=Math.max(e[t],n[t])})),i}(t?["left","right"]:["top","bottom"])}function Zn(t,e,n,i){const r=[];let o,a,s,l,c,u;for(o=0,a=t.length,c=0;o<a;++o){s=t[o],l=s.box,l.update(s.width||e.w,s.height||e.h,$n(s.horizontal,e));const{same:a,other:h}=Un(e,n,s,i);c|=a&&r.length,u=u||h,l.fullSize||r.push(s)}return c&&Zn(r,e,n,i)||u}function Kn(t,e,n,i,r){t.top=n,t.left=e,t.right=e+i,t.bottom=n+r,t.width=i,t.height=r}function Qn(t,e,n,i){const r=n.padding;let{x:o,y:a}=e;for(const s of t){const t=s.box,l=i[s.stack]||{count:1,placed:0,weight:1},c=s.stackWeight/l.weight||1;if(s.horizontal){const i=e.w*c,o=l.size||t.height;C(l.start)&&(a=l.start),t.fullSize?Kn(t,r.left,a,n.outerWidth-r.right-r.left,o):Kn(t,e.left+l.placed,a,i,o),l.start=a,l.placed+=i,a=t.bottom}else{const i=e.h*c,a=l.size||t.width;C(l.start)&&(o=l.start),t.fullSize?Kn(t,o,r.top,a,n.outerHeight-r.bottom-r.top):Kn(t,o,e.top+l.placed,a,i),l.start=o,l.placed+=i,o=t.right}}e.x=o,e.y=a}var Jn={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(t){e.draw(t)}}]},t.boxes.push(e)},removeBox(t,e){const n=t.boxes?t.boxes.indexOf(e):-1;-1!==n&&t.boxes.splice(n,1)},configure(t,e,n){e.fullSize=n.fullSize,e.position=n.position,e.weight=n.weight},update(t,e,n,i){if(!t)return;const r=bn(t.options.layout.padding),o=Math.max(e-r.width,0),a=Math.max(n-r.height,0),s=function(t){const e=function(t){const e=[];let n,i,r,o,a,s;for(n=0,i=(t||[]).length;n<i;++n)r=t[n],({position:o,options:{stack:a,stackWeight:s=1}}=r),e.push({index:n,box:r,pos:o,horizontal:r.isHorizontal(),weight:r.weight,stack:a&&o+a,stackWeight:s});return e}(t),n=Xn(e.filter((t=>t.box.fullSize)),!0),i=Xn(jn(e,"left"),!0),r=Xn(jn(e,"right")),o=Xn(jn(e,"top"),!0),a=Xn(jn(e,"bottom")),s=Yn(e,"x"),l=Yn(e,"y");return{fullSize:n,leftAndTop:i.concat(o),rightAndBottom:r.concat(l).concat(a).concat(s),chartArea:jn(e,"chartArea"),vertical:i.concat(r).concat(l),horizontal:o.concat(a).concat(s)}}(t.boxes),l=s.vertical,c=s.horizontal;d(t.boxes,(t=>{"function"==typeof t.beforeLayout&&t.beforeLayout()}));const u=l.reduce(((t,e)=>e.box.options&&!1===e.box.options.display?t:t+1),0)||1,h=Object.freeze({outerWidth:e,outerHeight:n,padding:r,availableWidth:o,availableHeight:a,vBoxMaxWidth:o/2/u,hBoxMaxHeight:a/2}),p=Object.assign({},r);qn(p,bn(i));const f=Object.assign({maxPadding:p,w:o,h:a,x:r.left,y:r.top},r),g=function(t,e){const n=function(t){const e={};for(const n of t){const{stack:t,pos:i,stackWeight:r}=n;if(!t||!Wn.includes(i))continue;const o=e[t]||(e[t]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=r}return e}(t),{vBoxMaxWidth:i,hBoxMaxHeight:r}=e;let o,a,s;for(o=0,a=t.length;o<a;++o){s=t[o];const{fullSize:a}=s.box,l=n[s.stack],c=l&&s.stackWeight/l.weight;s.horizontal?(s.width=c?c*i:a&&e.availableWidth,s.height=r):(s.width=i,s.height=c?c*r:a&&e.availableHeight)}return n}(l.concat(c),h);Zn(s.fullSize,f,h,g),Zn(l,f,h,g),Zn(c,f,h,g)&&Zn(l,f,h,g),function(t){const e=t.maxPadding;function n(n){const i=Math.max(e[n]-t[n],0);return t[n]+=i,i}t.y+=n("top"),t.x+=n("left"),n("right"),n("bottom")}(f),Qn(s.leftAndTop,f,h,g),f.x+=f.w,f.y+=f.h,Qn(s.rightAndBottom,f,h,g),t.chartArea={left:f.left,top:f.top,right:f.left+f.w,bottom:f.top+f.h,height:f.h,width:f.w},d(s.chartArea,(e=>{const n=e.box;Object.assign(n,t.chartArea),n.update(f.w,f.h,{left:0,top:0,right:0,bottom:0})}))}};class ti{acquireContext(t,e){}releaseContext(t){return!1}addEventListener(t,e,n){}removeEventListener(t,e,n){}getDevicePixelRatio(){return 1}getMaximumSize(t,e,n,i){return e=Math.max(0,e||t.width),n=n||t.height,{width:e,height:Math.max(0,i?Math.floor(e/i):n)}}isAttached(t){return!0}updateConfig(t){}}class ei extends ti{acquireContext(t){return t&&t.getContext&&t.getContext("2d")||null}updateConfig(t){t.options.animation=!1}}const ni="$chartjs",ii={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},ri=t=>null===t||""===t,oi=!!be&&{passive:!0};function ai(t,e,n){t&&t.canvas&&t.canvas.removeEventListener(e,n,oi)}function si(t,e){for(const n of t)if(n===e||n.contains(e))return!0}function li(t,e,n){const i=t.canvas,r=new MutationObserver((t=>{let e=!1;for(const n of t)e=e||si(n.addedNodes,i),e=e&&!si(n.removedNodes,i);e&&n()}));return r.observe(document,{childList:!0,subtree:!0}),r}function ci(t,e,n){const i=t.canvas,r=new MutationObserver((t=>{let e=!1;for(const n of t)e=e||si(n.removedNodes,i),e=e&&!si(n.addedNodes,i);e&&n()}));return r.observe(document,{childList:!0,subtree:!0}),r}const ui=new Map;let hi=0;function di(){const t=window.devicePixelRatio;t!==hi&&(hi=t,ui.forEach(((e,n)=>{n.currentDevicePixelRatio!==t&&e()})))}function pi(t,e,n){const i=t.canvas,r=i&&ce(i);if(!r)return;const o=ut(((t,e)=>{const i=r.clientWidth;n(t,e),i<r.clientWidth&&n()}),window),a=new ResizeObserver((t=>{const e=t[0],n=e.contentRect.width,i=e.contentRect.height;0===n&&0===i||o(n,i)}));return a.observe(r),function(t,e){ui.size||window.addEventListener("resize",di),ui.set(t,e)}(t,o),a}function fi(t,e,n){n&&n.disconnect(),"resize"===e&&function(t){ui.delete(t),ui.size||window.removeEventListener("resize",di)}(t)}function gi(t,e,n){const i=t.canvas,r=ut((e=>{null!==t.ctx&&n(function(t,e){const n=ii[t.type]||t.type,{x:i,y:r}=ge(t,e);return{type:n,chart:e,native:t,x:void 0!==i?i:null,y:void 0!==r?r:null}}(e,t))}),t);return function(t,e,n){t&&t.addEventListener(e,n,oi)}(i,e,r),r}class mi extends ti{acquireContext(t,e){const n=t&&t.getContext&&t.getContext("2d");return n&&n.canvas===t?(function(t,e){const n=t.style,i=t.getAttribute("height"),r=t.getAttribute("width");if(t[ni]={initial:{height:i,width:r,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",n.boxSizing=n.boxSizing||"border-box",ri(r)){const e=xe(t,"width");void 0!==e&&(t.width=e)}if(ri(i))if(""===t.style.height)t.height=t.width/(e||2);else{const e=xe(t,"height");void 0!==e&&(t.height=e)}}(t,e),n):null}releaseContext(t){const e=t.canvas;if(!e[ni])return!1;const n=e[ni].initial;["height","width"].forEach((t=>{const r=n[t];i(r)?e.removeAttribute(t):e.setAttribute(t,r)}));const r=n.style||{};return Object.keys(r).forEach((t=>{e.style[t]=r[t]})),e.width=e.width,delete e[ni],!0}addEventListener(t,e,n){this.removeEventListener(t,e);const i=t.$proxies||(t.$proxies={}),r={attach:li,detach:ci,resize:pi}[e]||gi;i[e]=r(t,e,n)}removeEventListener(t,e){const n=t.$proxies||(t.$proxies={}),i=n[e];i&&(({attach:fi,detach:fi,resize:fi}[e]||ai)(t,e,i),n[e]=void 0)}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(t,e,n,i){return ve(t,e,n,i)}isAttached(t){const e=ce(t);return!(!e||!e.isConnected)}}function vi(t){return!le()||"undefined"!=typeof OffscreenCanvas&&t instanceof OffscreenCanvas?ei:mi}var yi=Object.freeze({__proto__:null,BasePlatform:ti,BasicPlatform:ei,DomPlatform:mi,_detectPlatform:vi});const bi="transparent",xi={boolean:(t,e,n)=>n>.5?e:t,color(t,e,n){const i=$t(t||bi),r=i.valid&&$t(e||bi);return r&&r.valid?r.mix(i,n).hexString():e},number:(t,e,n)=>t+(e-t)*n};class _i{constructor(t,e,n,i){const r=e[n];i=_n([t.to,i,r,t.from]);const o=_n([t.from,r,i]);this._active=!0,this._fn=t.fn||xi[t.type||typeof o],this._easing=ln[t.easing]||ln.linear,this._start=Math.floor(Date.now()+(t.delay||0)),this._duration=this._total=Math.floor(t.duration),this._loop=!!t.loop,this._target=e,this._prop=n,this._from=o,this._to=i,this._promises=void 0}active(){return this._active}update(t,e,n){if(this._active){this._notify(!1);const i=this._target[this._prop],r=n-this._start,o=this._duration-r;this._start=n,this._duration=Math.floor(Math.max(o,t.duration)),this._total+=r,this._loop=!!t.loop,this._to=_n([t.to,e,i,t.from]),this._from=_n([t.from,i,e])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(t){const e=t-this._start,n=this._duration,i=this._prop,r=this._from,o=this._loop,a=this._to;let s;if(this._active=r!==a&&(o||e<n),!this._active)return this._target[i]=a,void this._notify(!0);e<0?this._target[i]=r:(s=e/n%2,s=o&&s>1?2-s:s,s=this._easing(Math.min(1,Math.max(0,s))),this._target[i]=this._fn(r,a,s))}wait(){const t=this._promises||(this._promises=[]);return new Promise(((e,n)=>{t.push({res:e,rej:n})}))}_notify(t){const e=t?"res":"rej",n=this._promises||[];for(let t=0;t<n.length;t++)n[t][e]()}}class wi{constructor(t,e){this._chart=t,this._properties=new Map,this.configure(e)}configure(t){if(!o(t))return;const e=Object.keys(se.animation),n=this._properties;Object.getOwnPropertyNames(t).forEach((i=>{const a=t[i];if(!o(a))return;const s={};for(const t of e)s[t]=a[t];(r(a.properties)&&a.properties||[i]).forEach((t=>{t!==i&&n.has(t)||n.set(t,s)}))}))}_animateOptions(t,e){const n=e.options,i=function(t,e){if(!e)return;let n=t.options;if(n)return n.$shared&&(t.options=n=Object.assign({},n,{$shared:!1,$animations:{}})),n;t.options=e}(t,n);if(!i)return[];const r=this._createAnimations(i,n);return n.$shared&&function(t,e){const n=[],i=Object.keys(e);for(let e=0;e<i.length;e++){const r=t[i[e]];r&&r.active()&&n.push(r.wait())}return Promise.all(n)}(t.options.$animations,n).then((()=>{t.options=n}),(()=>{})),r}_createAnimations(t,e){const n=this._properties,i=[],r=t.$animations||(t.$animations={}),o=Object.keys(e),a=Date.now();let s;for(s=o.length-1;s>=0;--s){const l=o[s];if("$"===l.charAt(0))continue;if("options"===l){i.push(...this._animateOptions(t,e));continue}const c=e[l];let u=r[l];const h=n.get(l);if(u){if(h&&u.active()){u.update(h,c,a);continue}u.cancel()}h&&h.duration?(r[l]=u=new _i(h,t,l,c),i.push(u)):t[l]=c}return i}update(t,e){if(0===this._properties.size)return void Object.assign(t,e);const n=this._createAnimations(t,e);return n.length?(vt.add(this._chart,n),!0):void 0}}function Si(t,e){const n=t&&t.options||{},i=n.reverse,r=void 0===n.min?e:0,o=void 0===n.max?e:0;return{start:i?o:r,end:i?r:o}}function Ci(t,e){const n=[],i=t._getSortedDatasetMetas(e);let r,o;for(r=0,o=i.length;r<o;++r)n.push(i[r].index);return n}function ki(t,e,n,i={}){const r=t.keys,o="single"===i.mode;let s,l,c,u;if(null!==e){for(s=0,l=r.length;s<l;++s){if(c=+r[s],c===n){if(i.all)continue;break}u=t.values[c],a(u)&&(o||0===e||B(e)===B(u))&&(e+=u)}return e}}function Ai(t,e){const n=t&&t.options.stacked;return n||void 0===n&&void 0!==e.stack}function Mi(t,e,n){const i=t[e]||(t[e]={});return i[n]||(i[n]={})}function Ti(t,e,n,i){for(const r of e.getMatchingVisibleMetas(i).reverse()){const e=t[r.index];if(n&&e>0||!n&&e<0)return r.index}return null}function Ii(t,e){const{chart:n,_cachedMeta:i}=t,r=n._stacks||(n._stacks={}),{iScale:o,vScale:a,index:s}=i,l=o.axis,c=a.axis,u=function(t,e,n){return`${t.id}.${e.id}.${n.stack||n.type}`}(o,a,i),h=e.length;let d;for(let t=0;t<h;++t){const n=e[t],{[l]:o,[c]:h}=n;d=(n._stacks||(n._stacks={}))[c]=Mi(r,u,o),d[s]=h,d._top=Ti(d,a,!0,i.type),d._bottom=Ti(d,a,!1,i.type),(d._visualValues||(d._visualValues={}))[s]=h}}function Ei(t,e){const n=t.scales;return Object.keys(n).filter((t=>n[t].axis===e)).shift()}function Oi(t,e){const n=t.controller.index,i=t.vScale&&t.vScale.axis;if(i){e=e||t._parsed;for(const t of e){const e=t._stacks;if(!e||void 0===e[i]||void 0===e[i][n])return;delete e[i][n],void 0!==e[i]._visualValues&&void 0!==e[i]._visualValues[n]&&delete e[i]._visualValues[n]}}}const Di=t=>"reset"===t||"none"===t,Li=(t,e)=>e?t:Object.assign({},t);class Pi{static defaults={};static datasetElementType=null;static dataElementType=null;constructor(t,e){this.chart=t,this._ctx=t.ctx,this.index=e,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const t=this._cachedMeta;this.configure(),this.linkScales(),t._stacked=Ai(t.vScale,t),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(t){this.index!==t&&Oi(this._cachedMeta),this.index=t}linkScales(){const t=this.chart,e=this._cachedMeta,n=this.getDataset(),i=(t,e,n,i)=>"x"===t?e:"r"===t?i:n,r=e.xAxisID=l(n.xAxisID,Ei(t,"x")),o=e.yAxisID=l(n.yAxisID,Ei(t,"y")),a=e.rAxisID=l(n.rAxisID,Ei(t,"r")),s=e.indexAxis,c=e.iAxisID=i(s,r,o,a),u=e.vAxisID=i(s,o,r,a);e.xScale=this.getScaleForId(r),e.yScale=this.getScaleForId(o),e.rScale=this.getScaleForId(a),e.iScale=this.getScaleForId(c),e.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(t){return this.chart.scales[t]}_getOtherScale(t){const e=this._cachedMeta;return t===e.iScale?e.vScale:e.iScale}reset(){this._update("reset")}_destroy(){const t=this._cachedMeta;this._data&&st(this._data,this),t._stacked&&Oi(t)}_dataCheck(){const t=this.getDataset(),e=t.data||(t.data=[]),n=this._data;if(o(e))this._data=function(t){const e=Object.keys(t),n=new Array(e.length);let i,r,o;for(i=0,r=e.length;i<r;++i)o=e[i],n[i]={x:o,y:t[o]};return n}(e);else if(n!==e){if(n){st(n,this);const t=this._cachedMeta;Oi(t),t._parsed=[]}e&&Object.isExtensible(e)&&at(e,this),this._syncList=[],this._data=e}}addElements(){const t=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(t.dataset=new this.datasetElementType)}buildOrUpdateElements(t){const e=this._cachedMeta,n=this.getDataset();let i=!1;this._dataCheck();const r=e._stacked;e._stacked=Ai(e.vScale,e),e.stack!==n.stack&&(i=!0,Oi(e),e.stack=n.stack),this._resyncElements(t),(i||r!==e._stacked)&&Ii(this,e._parsed)}configure(){const t=this.chart.config,e=t.datasetScopeKeys(this._type),n=t.getOptionScopes(this.getDataset(),e,!0);this.options=t.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(t,e){const{_cachedMeta:n,_data:i}=this,{iScale:a,_stacked:s}=n,l=a.axis;let c,u,h,d=0===t&&e===i.length||n._sorted,p=t>0&&n._parsed[t-1];if(!1===this._parsing)n._parsed=i,n._sorted=!0,h=i;else{h=r(i[t])?this.parseArrayData(n,i,t,e):o(i[t])?this.parseObjectData(n,i,t,e):this.parsePrimitiveData(n,i,t,e);const a=()=>null===u[l]||p&&u[l]<p[l];for(c=0;c<e;++c)n._parsed[c+t]=u=h[c],d&&(a()&&(d=!1),p=u);n._sorted=d}s&&Ii(this,h)}parsePrimitiveData(t,e,n,i){const{iScale:r,vScale:o}=t,a=r.axis,s=o.axis,l=r.getLabels(),c=r===o,u=new Array(i);let h,d,p;for(h=0,d=i;h<d;++h)p=h+n,u[h]={[a]:c||r.parse(l[p],p),[s]:o.parse(e[p],p)};return u}parseArrayData(t,e,n,i){const{xScale:r,yScale:o}=t,a=new Array(i);let s,l,c,u;for(s=0,l=i;s<l;++s)c=s+n,u=e[c],a[s]={x:r.parse(u[0],c),y:o.parse(u[1],c)};return a}parseObjectData(t,e,n,i){const{xScale:r,yScale:o}=t,{xAxisKey:a="x",yAxisKey:s="y"}=this._parsing,l=new Array(i);let c,u,h,d;for(c=0,u=i;c<u;++c)h=c+n,d=e[h],l[c]={x:r.parse(w(d,a),h),y:o.parse(w(d,s),h)};return l}getParsed(t){return this._cachedMeta._parsed[t]}getDataElement(t){return this._cachedMeta.data[t]}applyStack(t,e,n){const i=this.chart,r=this._cachedMeta,o=e[t.axis];return ki({keys:Ci(i,!0),values:e._stacks[t.axis]._visualValues},o,r.index,{mode:n})}updateRangeFromParsed(t,e,n,i){const r=n[e.axis];let o=null===r?NaN:r;const a=i&&n._stacks[e.axis];i&&a&&(i.values=a,o=ki(i,r,this._cachedMeta.index)),t.min=Math.min(t.min,o),t.max=Math.max(t.max,o)}getMinMax(t,e){const n=this._cachedMeta,i=n._parsed,r=n._sorted&&t===n.iScale,o=i.length,s=this._getOtherScale(t),l=((t,e,n)=>t&&!e.hidden&&e._stacked&&{keys:Ci(n,!0),values:null})(e,n,this.chart),c={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=function(t){const{min:e,max:n,minDefined:i,maxDefined:r}=t.getUserBounds();return{min:i?e:Number.NEGATIVE_INFINITY,max:r?n:Number.POSITIVE_INFINITY}}(s);let d,p;function f(){p=i[d];const e=p[s.axis];return!a(p[t.axis])||u>e||h<e}for(d=0;d<o&&(f()||(this.updateRangeFromParsed(c,t,p,l),!r));++d);if(r)for(d=o-1;d>=0;--d)if(!f()){this.updateRangeFromParsed(c,t,p,l);break}return c}getAllParsedValues(t){const e=this._cachedMeta._parsed,n=[];let i,r,o;for(i=0,r=e.length;i<r;++i)o=e[i][t.axis],a(o)&&n.push(o);return n}getMaxOverflow(){return!1}getLabelAndValue(t){const e=this._cachedMeta,n=e.iScale,i=e.vScale,r=this.getParsed(t);return{label:n?""+n.getLabelForValue(r[n.axis]):"",value:i?""+i.getLabelForValue(r[i.axis]):""}}_update(t){const e=this._cachedMeta;this.update(t||"default"),e._clip=function(t){let e,n,i,r;return o(t)?(e=t.top,n=t.right,i=t.bottom,r=t.left):e=n=i=r=t,{top:e,right:n,bottom:i,left:r,disabled:!1===t}}(l(this.options.clip,function(t,e,n){if(!1===n)return!1;const i=Si(t,n),r=Si(e,n);return{top:r.end,right:i.end,bottom:r.start,left:i.start}}(e.xScale,e.yScale,this.getMaxOverflow())))}update(t){}draw(){const t=this._ctx,e=this.chart,n=this._cachedMeta,i=n.data||[],r=e.chartArea,o=[],a=this._drawStart||0,s=this._drawCount||i.length-a,l=this.options.drawActiveElementsOnTop;let c;for(n.dataset&&n.dataset.draw(t,r,a,s),c=a;c<a+s;++c){const e=i[c];e.hidden||(e.active&&l?o.push(e):e.draw(t,r))}for(c=0;c<o.length;++c)o[c].draw(t,r)}getStyle(t,e){const n=e?"active":"default";return void 0===t&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(t||0,n)}getContext(t,e,n){const i=this.getDataset();let r;if(t>=0&&t<this._cachedMeta.data.length){const e=this._cachedMeta.data[t];r=e.$context||(e.$context=function(t,e,n){return Sn(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:n,index:e,mode:"default",type:"data"})}(this.getContext(),t,e)),r.parsed=this.getParsed(t),r.raw=i.data[t],r.index=r.dataIndex=t}else r=this.$context||(this.$context=function(t,e){return Sn(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}(this.chart.getContext(),this.index)),r.dataset=i,r.index=r.datasetIndex=this.index;return r.active=!!e,r.mode=n,r}resolveDatasetElementOptions(t){return this._resolveElementOptions(this.datasetElementType.id,t)}resolveDataElementOptions(t,e){return this._resolveElementOptions(this.dataElementType.id,e,t)}_resolveElementOptions(t,e="default",n){const i="active"===e,r=this._cachedDataOpts,o=t+"-"+e,a=r[o],s=this.enableOptionSharing&&C(n);if(a)return Li(a,s);const l=this.chart.config,c=l.datasetElementScopeKeys(this._type,t),u=i?[`${t}Hover`,"hover",t,""]:[t,""],h=l.getOptionScopes(this.getDataset(),c),d=Object.keys(se.elements[t]),p=l.resolveNamedOptions(h,d,(()=>this.getContext(n,i,e)),u);return p.$shared&&(p.$shared=s,r[o]=Object.freeze(Li(p,s))),p}_resolveAnimations(t,e,n){const i=this.chart,r=this._cachedDataOpts,o=`animation-${e}`,a=r[o];if(a)return a;let s;if(!1!==i.options.animation){const i=this.chart.config,r=i.datasetAnimationScopeKeys(this._type,e),o=i.getOptionScopes(this.getDataset(),r);s=i.createResolver(o,this.getContext(t,n,e))}const l=new wi(i,s&&s.animations);return s&&s._cacheable&&(r[o]=Object.freeze(l)),l}getSharedOptions(t){if(t.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},t))}includeOptions(t,e){return!e||Di(t)||this.chart._animationsDisabled}_getSharedOptions(t,e){const n=this.resolveDataElementOptions(t,e),i=this._sharedOptions,r=this.getSharedOptions(n),o=this.includeOptions(e,r)||r!==i;return this.updateSharedOptions(r,e,n),{sharedOptions:r,includeOptions:o}}updateElement(t,e,n,i){Di(i)?Object.assign(t,n):this._resolveAnimations(e,i).update(t,n)}updateSharedOptions(t,e,n){t&&!Di(e)&&this._resolveAnimations(void 0,e).update(t,n)}_setStyle(t,e,n,i){t.active=i;const r=this.getStyle(e,i);this._resolveAnimations(e,n,i).update(t,{options:!i&&this.getSharedOptions(r)||r})}removeHoverStyle(t,e,n){this._setStyle(t,n,"active",!1)}setHoverStyle(t,e,n){this._setStyle(t,n,"active",!0)}_removeDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!1)}_setDatasetHoverStyle(){const t=this._cachedMeta.dataset;t&&this._setStyle(t,void 0,"active",!0)}_resyncElements(t){const e=this._data,n=this._cachedMeta.data;for(const[t,e,n]of this._syncList)this[t](e,n);this._syncList=[];const i=n.length,r=e.length,o=Math.min(r,i);o&&this.parse(0,o),r>i?this._insertElements(i,r-i,t):r<i&&this._removeElements(r,i-r)}_insertElements(t,e,n=!0){const i=this._cachedMeta,r=i.data,o=t+e;let a;const s=t=>{for(t.length+=e,a=t.length-1;a>=o;a--)t[a]=t[a-e]};for(s(r),a=t;a<o;++a)r[a]=new this.dataElementType;this._parsing&&s(i._parsed),this.parse(t,e),n&&this.updateElements(r,t,e,"reset")}updateElements(t,e,n,i){}_removeElements(t,e){const n=this._cachedMeta;if(this._parsing){const i=n._parsed.splice(t,e);n._stacked&&Oi(n,i)}n.data.splice(t,e)}_sync(t){if(this._parsing)this._syncList.push(t);else{const[e,n,i]=t;this[e](n,i)}this.chart._dataChanges.push([this.index,...t])}_onDataPush(){const t=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-t,t])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(t,e){e&&this._sync(["_removeElements",t,e]);const n=arguments.length-2;n&&this._sync(["_insertElements",t,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}class Ni{static defaults={};static defaultRoutes=void 0;x;y;active=!1;options;$animations;tooltipPosition(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}hasValue(){return H(this.x)&&H(this.y)}getProps(t,e){const n=this.$animations;if(!e||!n)return this;const i={};return t.forEach((t=>{i[t]=n[t]&&n[t].active()?n[t]._to:this[t]})),i}}function Ri(t,e){const n=t.options.ticks,r=function(t){const e=t.options.offset,n=t._tickSize(),i=t._length/n+(e?0:1),r=t._maxLength/n;return Math.floor(Math.min(i,r))}(t),o=Math.min(n.maxTicksLimit||r,r),a=n.major.enabled?function(t){const e=[];let n,i;for(n=0,i=t.length;n<i;n++)t[n].major&&e.push(n);return e}(e):[],s=a.length,l=a[0],c=a[s-1],u=[];if(s>o)return function(t,e,n,i){let r,o=0,a=n[0];for(i=Math.ceil(i),r=0;r<t.length;r++)r===a&&(e.push(t[r]),o++,a=n[o*i])}(e,u,a,s/o),u;const h=function(t,e,n){const i=function(t){const e=t.length;let n,i;if(e<2)return!1;for(i=t[0],n=1;n<e;++n)if(t[n]-t[n-1]!==i)return!1;return i}(t),r=e.length/n;if(!i)return Math.max(r,1);const o=V(i);for(let t=0,e=o.length-1;t<e;t++){const e=o[t];if(e>r)return e}return Math.max(r,1)}(a,e,o);if(s>0){let t,n;const r=s>1?Math.round((c-l)/(s-1)):null;for(Bi(e,u,h,i(r)?0:l-r,l),t=0,n=s-1;t<n;t++)Bi(e,u,h,a[t],a[t+1]);return Bi(e,u,h,c,i(r)?e.length:c+r),u}return Bi(e,u,h),u}function Bi(t,e,n,i,r){const o=l(i,0),a=Math.min(l(r,t.length),t.length);let s,c,u,h=0;for(n=Math.ceil(n),r&&(s=r-i,n=s/Math.floor(s/n)),u=o;u<0;)h++,u=Math.round(o+h*n);for(c=Math.max(o,0);c<a;c++)c===u&&(e.push(t[c]),h++,u=Math.round(o+h*n))}const zi=(t,e,n)=>"top"===e||"left"===e?t[e]+n:t[e]-n,Fi=(t,e)=>Math.min(e||t,t);function Vi(t,e){const n=[],i=t.length/e,r=t.length;let o=0;for(;o<r;o+=i)n.push(t[Math.floor(o)]);return n}function Hi(t,e,n){const i=t.ticks.length,r=Math.min(e,i-1),o=t._startPixel,a=t._endPixel,s=1e-6;let l,c=t.getPixelForTick(r);if(!(n&&(l=1===i?Math.max(c-o,a-c):0===e?(t.getPixelForTick(1)-c)/2:(c-t.getPixelForTick(r-1))/2,c+=r<e?l:-l,c<o-s||c>a+s)))return c}function Wi(t){return t.drawTicks?t.tickLength:0}function ji(t,e){if(!t.display)return 0;const n=xn(t.font,e),i=bn(t.padding);return(r(t.text)?t.text.length:1)*n.lineHeight+i.height}function Yi(t,e,n){let i=dt(t);return(n&&"right"!==e||!n&&"right"===e)&&(i=(t=>"left"===t?"right":"right"===t?"left":t)(i)),i}class Xi extends Ni{constructor(t){super(),this.id=t.id,this.type=t.type,this.options=void 0,this.ctx=t.ctx,this.chart=t.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(t){this.options=t.setContext(this.getContext()),this.axis=t.axis,this._userMin=this.parse(t.min),this._userMax=this.parse(t.max),this._suggestedMin=this.parse(t.suggestedMin),this._suggestedMax=this.parse(t.suggestedMax)}parse(t,e){return t}getUserBounds(){let{_userMin:t,_userMax:e,_suggestedMin:n,_suggestedMax:i}=this;return t=s(t,Number.POSITIVE_INFINITY),e=s(e,Number.NEGATIVE_INFINITY),n=s(n,Number.POSITIVE_INFINITY),i=s(i,Number.NEGATIVE_INFINITY),{min:s(t,n),max:s(e,i),minDefined:a(t),maxDefined:a(e)}}getMinMax(t){let e,{min:n,max:i,minDefined:r,maxDefined:o}=this.getUserBounds();if(r&&o)return{min:n,max:i};const a=this.getMatchingVisibleMetas();for(let s=0,l=a.length;s<l;++s)e=a[s].controller.getMinMax(this,t),r||(n=Math.min(n,e.min)),o||(i=Math.max(i,e.max));return n=o&&n>i?i:n,i=r&&n>i?n:i,{min:s(n,s(i,n)),max:s(i,s(n,i))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const t=this.chart.data;return this.options.labels||(this.isHorizontal()?t.xLabels:t.yLabels)||t.labels||[]}getLabelItems(t=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(t))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){h(this.options.beforeUpdate,[this])}update(t,e,n){const{beginAtZero:i,grace:r,ticks:o}=this.options,a=o.sampleSize;this.beforeUpdate(),this.maxWidth=t,this.maxHeight=e,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=wn(this,r,i),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const s=a<this.ticks.length;this._convertTicksToLabels(s?Vi(this.ticks,a):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||"auto"===o.source)&&(this.ticks=Ri(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),s&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let t,e,n=this.options.reverse;this.isHorizontal()?(t=this.left,e=this.right):(t=this.top,e=this.bottom,n=!n),this._startPixel=t,this._endPixel=e,this._reversePixels=n,this._length=e-t,this._alignToPixels=this.options.alignToPixels}afterUpdate(){h(this.options.afterUpdate,[this])}beforeSetDimensions(){h(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){h(this.options.afterSetDimensions,[this])}_callHooks(t){this.chart.notifyPlugins(t,this.getContext()),h(this.options[t],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){h(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(t){const e=this.options.ticks;let n,i,r;for(n=0,i=t.length;n<i;n++)r=t[n],r.label=h(e.callback,[r.value,n,t],this)}afterTickToLabelConversion(){h(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){h(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const t=this.options,e=t.ticks,n=Fi(this.ticks.length,t.ticks.maxTicksLimit),i=e.minRotation||0,r=e.maxRotation;let o,a,s,l=i;if(!this._isVisible()||!e.display||i>=r||n<=1||!this.isHorizontal())return void(this.labelRotation=i);const c=this._getLabelSizes(),u=c.widest.width,h=c.highest.height,d=Q(this.chart.width-u,0,this.maxWidth);o=t.offset?this.maxWidth/n:d/(n-1),u+6>o&&(o=d/(n-(t.offset?.5:1)),a=this.maxHeight-Wi(t.grid)-e.padding-ji(t.title,this.chart.options.font),s=Math.sqrt(u*u+h*h),l=X(Math.min(Math.asin(Q((c.highest.height+6)/o,-1,1)),Math.asin(Q(a/s,-1,1))-Math.asin(Q(h/s,-1,1)))),l=Math.max(i,Math.min(r,l))),this.labelRotation=l}afterCalculateLabelRotation(){h(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){h(this.options.beforeFit,[this])}fit(){const t={width:0,height:0},{chart:e,options:{ticks:n,title:i,grid:r}}=this,o=this._isVisible(),a=this.isHorizontal();if(o){const o=ji(i,e.options.font);if(a?(t.width=this.maxWidth,t.height=Wi(r)+o):(t.height=this.maxHeight,t.width=Wi(r)+o),n.display&&this.ticks.length){const{first:e,last:i,widest:r,highest:o}=this._getLabelSizes(),s=2*n.padding,l=Y(this.labelRotation),c=Math.cos(l),u=Math.sin(l);if(a){const e=n.mirror?0:u*r.width+c*o.height;t.height=Math.min(this.maxHeight,t.height+e+s)}else{const e=n.mirror?0:c*r.width+u*o.height;t.width=Math.min(this.maxWidth,t.width+e+s)}this._calculatePadding(e,i,u,c)}}this._handleMargins(),a?(this.width=this._length=e.width-this._margins.left-this._margins.right,this.height=t.height):(this.width=t.width,this.height=this._length=e.height-this._margins.top-this._margins.bottom)}_calculatePadding(t,e,n,i){const{ticks:{align:r,padding:o},position:a}=this.options,s=0!==this.labelRotation,l="top"!==a&&"x"===this.axis;if(this.isHorizontal()){const a=this.getPixelForTick(0)-this.left,c=this.right-this.getPixelForTick(this.ticks.length-1);let u=0,h=0;s?l?(u=i*t.width,h=n*e.height):(u=n*t.height,h=i*e.width):"start"===r?h=e.width:"end"===r?u=t.width:"inner"!==r&&(u=t.width/2,h=e.width/2),this.paddingLeft=Math.max((u-a+o)*this.width/(this.width-a),0),this.paddingRight=Math.max((h-c+o)*this.width/(this.width-c),0)}else{let n=e.height/2,i=t.height/2;"start"===r?(n=0,i=t.height):"end"===r&&(n=e.height,i=0),this.paddingTop=n+o,this.paddingBottom=i+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){h(this.options.afterFit,[this])}isHorizontal(){const{axis:t,position:e}=this.options;return"top"===e||"bottom"===e||"x"===t}isFullSize(){return this.options.fullSize}_convertTicksToLabels(t){let e,n;for(this.beforeTickToLabelConversion(),this.generateTickLabels(t),e=0,n=t.length;e<n;e++)i(t[e].label)&&(t.splice(e,1),n--,e--);this.afterTickToLabelConversion()}_getLabelSizes(){let t=this._labelSizes;if(!t){const e=this.options.ticks.sampleSize;let n=this.ticks;e<n.length&&(n=Vi(n,e)),this._labelSizes=t=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return t}_computeLabelSizes(t,e,n){const{ctx:o,_longestTextCache:a}=this,s=[],l=[],c=Math.floor(e/Fi(e,n));let u,h,p,f,g,m,v,y,b,x,_,w=0,S=0;for(u=0;u<e;u+=c){if(f=t[u].label,g=this._resolveTickFontOptions(u),o.font=m=g.string,v=a[m]=a[m]||{data:{},gc:[]},y=g.lineHeight,b=x=0,i(f)||r(f)){if(r(f))for(h=0,p=f.length;h<p;++h)_=f[h],i(_)||r(_)||(b=we(o,v.data,v.gc,b,_),x+=y)}else b=we(o,v.data,v.gc,b,f),x=y;s.push(b),l.push(x),w=Math.max(b,w),S=Math.max(x,S)}!function(t,e){d(t,(t=>{const n=t.gc,i=n.length/2;let r;if(i>e){for(r=0;r<i;++r)delete t.data[n[r]];n.splice(0,i)}}))}(a,e);const C=s.indexOf(w),k=l.indexOf(S),A=t=>({width:s[t]||0,height:l[t]||0});return{first:A(0),last:A(e-1),widest:A(C),highest:A(k),widths:s,heights:l}}getLabelForValue(t){return t}getPixelForValue(t,e){return NaN}getValueForPixel(t){}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getPixelForDecimal(t){this._reversePixels&&(t=1-t);const e=this._startPixel+t*this._length;return J(this._alignToPixels?Ce(this.chart,e,0):e)}getDecimalForPixel(t){const e=(t-this._startPixel)/this._length;return this._reversePixels?1-e:e}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:t,max:e}=this;return t<0&&e<0?e:t>0&&e>0?t:0}getContext(t){const e=this.ticks||[];if(t>=0&&t<e.length){const n=e[t];return n.$context||(n.$context=function(t,e,n){return Sn(t,{tick:n,index:e,type:"tick"})}(this.getContext(),t,n))}return this.$context||(this.$context=Sn(this.chart.getContext(),{scale:this,type:"scale"}))}_tickSize(){const t=this.options.ticks,e=Y(this.labelRotation),n=Math.abs(Math.cos(e)),i=Math.abs(Math.sin(e)),r=this._getLabelSizes(),o=t.autoSkipPadding||0,a=r?r.widest.width+o:0,s=r?r.highest.height+o:0;return this.isHorizontal()?s*n>a*i?a/n:s/i:s*i<a*n?s/n:a/i}_isVisible(){const t=this.options.display;return"auto"!==t?!!t:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(t){const e=this.axis,n=this.chart,i=this.options,{grid:r,position:a,border:s}=i,c=r.offset,u=this.isHorizontal(),h=this.ticks.length+(c?1:0),d=Wi(r),p=[],f=s.setContext(this.getContext()),g=f.display?f.width:0,m=g/2,v=function(t){return Ce(n,t,g)};let y,b,x,_,w,S,C,k,A,M,T,I;if("top"===a)y=v(this.bottom),S=this.bottom-d,k=y-m,M=v(t.top)+m,I=t.bottom;else if("bottom"===a)y=v(this.top),M=t.top,I=v(t.bottom)-m,S=y+m,k=this.top+d;else if("left"===a)y=v(this.right),w=this.right-d,C=y-m,A=v(t.left)+m,T=t.right;else if("right"===a)y=v(this.left),A=t.left,T=v(t.right)-m,w=y+m,C=this.left+d;else if("x"===e){if("center"===a)y=v((t.top+t.bottom)/2+.5);else if(o(a)){const t=Object.keys(a)[0],e=a[t];y=v(this.chart.scales[t].getPixelForValue(e))}M=t.top,I=t.bottom,S=y+m,k=S+d}else if("y"===e){if("center"===a)y=v((t.left+t.right)/2);else if(o(a)){const t=Object.keys(a)[0],e=a[t];y=v(this.chart.scales[t].getPixelForValue(e))}w=y-m,C=w-d,A=t.left,T=t.right}const E=l(i.ticks.maxTicksLimit,h),O=Math.max(1,Math.ceil(h/E));for(b=0;b<h;b+=O){const t=this.getContext(b),e=r.setContext(t),i=s.setContext(t),o=e.lineWidth,a=e.color,l=i.dash||[],h=i.dashOffset,d=e.tickWidth,f=e.tickColor,g=e.tickBorderDash||[],m=e.tickBorderDashOffset;x=Hi(this,b,c),void 0!==x&&(_=Ce(n,x,o),u?w=C=A=T=_:S=k=M=I=_,p.push({tx1:w,ty1:S,tx2:C,ty2:k,x1:A,y1:M,x2:T,y2:I,width:o,color:a,borderDash:l,borderDashOffset:h,tickWidth:d,tickColor:f,tickBorderDash:g,tickBorderDashOffset:m}))}return this._ticksLength=h,this._borderValue=y,p}_computeLabelItems(t){const e=this.axis,n=this.options,{position:i,ticks:a}=n,s=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:u,padding:h,mirror:d}=a,p=Wi(n.grid),f=p+h,g=d?-h:f,m=-Y(this.labelRotation),v=[];let y,b,x,_,w,S,C,k,A,M,T,I,E="middle";if("top"===i)S=this.bottom-g,C=this._getXAxisLabelAlignment();else if("bottom"===i)S=this.top+g,C=this._getXAxisLabelAlignment();else if("left"===i){const t=this._getYAxisLabelAlignment(p);C=t.textAlign,w=t.x}else if("right"===i){const t=this._getYAxisLabelAlignment(p);C=t.textAlign,w=t.x}else if("x"===e){if("center"===i)S=(t.top+t.bottom)/2+f;else if(o(i)){const t=Object.keys(i)[0],e=i[t];S=this.chart.scales[t].getPixelForValue(e)+f}C=this._getXAxisLabelAlignment()}else if("y"===e){if("center"===i)w=(t.left+t.right)/2-f;else if(o(i)){const t=Object.keys(i)[0],e=i[t];w=this.chart.scales[t].getPixelForValue(e)}C=this._getYAxisLabelAlignment(p).textAlign}"y"===e&&("start"===c?E="top":"end"===c&&(E="bottom"));const O=this._getLabelSizes();for(y=0,b=l.length;y<b;++y){x=l[y],_=x.label;const t=a.setContext(this.getContext(y));k=this.getPixelForTick(y)+a.labelOffset,A=this._resolveTickFontOptions(y),M=A.lineHeight,T=r(_)?_.length:1;const e=T/2,n=t.color,o=t.textStrokeColor,c=t.textStrokeWidth;let h,p=C;if(s?(w=k,"inner"===C&&(p=y===b-1?this.options.reverse?"left":"right":0===y?this.options.reverse?"right":"left":"center"),I="top"===i?"near"===u||0!==m?-T*M+M/2:"center"===u?-O.highest.height/2-e*M+M:-O.highest.height+M/2:"near"===u||0!==m?M/2:"center"===u?O.highest.height/2-e*M:O.highest.height-T*M,d&&(I*=-1),0===m||t.showLabelBackdrop||(w+=M/2*Math.sin(m))):(S=k,I=(1-T)*M/2),t.showLabelBackdrop){const e=bn(t.backdropPadding),n=O.heights[y],i=O.widths[y];let r=I-e.top,o=0-e.left;switch(E){case"middle":r-=n/2;break;case"bottom":r-=n}switch(C){case"center":o-=i/2;break;case"right":o-=i;break;case"inner":y===b-1?o-=i:y>0&&(o-=i/2)}h={left:o,top:r,width:i+e.width,height:n+e.height,color:t.backdropColor}}v.push({label:_,font:A,textOffset:I,options:{rotation:m,color:n,strokeColor:o,strokeWidth:c,textAlign:p,textBaseline:E,translation:[w,S],backdrop:h}})}return v}_getXAxisLabelAlignment(){const{position:t,ticks:e}=this.options;if(-Y(this.labelRotation))return"top"===t?"left":"right";let n="center";return"start"===e.align?n="left":"end"===e.align?n="right":"inner"===e.align&&(n="inner"),n}_getYAxisLabelAlignment(t){const{position:e,ticks:{crossAlign:n,mirror:i,padding:r}}=this.options,o=t+r,a=this._getLabelSizes().widest.width;let s,l;return"left"===e?i?(l=this.right+r,"near"===n?s="left":"center"===n?(s="center",l+=a/2):(s="right",l+=a)):(l=this.right-o,"near"===n?s="right":"center"===n?(s="center",l-=a/2):(s="left",l=this.left)):"right"===e?i?(l=this.left+r,"near"===n?s="right":"center"===n?(s="center",l-=a/2):(s="left",l-=a)):(l=this.left+o,"near"===n?s="left":"center"===n?(s="center",l+=a/2):(s="right",l=this.right)):s="right",{textAlign:s,x:l}}_computeLabelArea(){if(this.options.ticks.mirror)return;const t=this.chart,e=this.options.position;return"left"===e||"right"===e?{top:0,left:this.left,bottom:t.height,right:this.right}:"top"===e||"bottom"===e?{top:this.top,left:0,bottom:this.bottom,right:t.width}:void 0}drawBackground(){const{ctx:t,options:{backgroundColor:e},left:n,top:i,width:r,height:o}=this;e&&(t.save(),t.fillStyle=e,t.fillRect(n,i,r,o),t.restore())}getLineWidthForValue(t){const e=this.options.grid;if(!this._isVisible()||!e.display)return 0;const n=this.ticks.findIndex((e=>e.value===t));return n>=0?e.setContext(this.getContext(n)).lineWidth:0}drawGrid(t){const e=this.options.grid,n=this.ctx,i=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(t));let r,o;const a=(t,e,i)=>{i.width&&i.color&&(n.save(),n.lineWidth=i.width,n.strokeStyle=i.color,n.setLineDash(i.borderDash||[]),n.lineDashOffset=i.borderDashOffset,n.beginPath(),n.moveTo(t.x,t.y),n.lineTo(e.x,e.y),n.stroke(),n.restore())};if(e.display)for(r=0,o=i.length;r<o;++r){const t=i[r];e.drawOnChartArea&&a({x:t.x1,y:t.y1},{x:t.x2,y:t.y2},t),e.drawTicks&&a({x:t.tx1,y:t.ty1},{x:t.tx2,y:t.ty2},{color:t.tickColor,width:t.tickWidth,borderDash:t.tickBorderDash,borderDashOffset:t.tickBorderDashOffset})}}drawBorder(){const{chart:t,ctx:e,options:{border:n,grid:i}}=this,r=n.setContext(this.getContext()),o=n.display?r.width:0;if(!o)return;const a=i.setContext(this.getContext(0)).lineWidth,s=this._borderValue;let l,c,u,h;this.isHorizontal()?(l=Ce(t,this.left,o)-o/2,c=Ce(t,this.right,a)+a/2,u=h=s):(u=Ce(t,this.top,o)-o/2,h=Ce(t,this.bottom,a)+a/2,l=c=s),e.save(),e.lineWidth=r.width,e.strokeStyle=r.color,e.beginPath(),e.moveTo(l,u),e.lineTo(c,h),e.stroke(),e.restore()}drawLabels(t){if(!this.options.ticks.display)return;const e=this.ctx,n=this._computeLabelArea();n&&Ie(e,n);const i=this.getLabelItems(t);for(const t of i){const n=t.options,i=t.font;Ne(e,t.label,0,t.textOffset,i,n)}n&&Ee(e)}drawTitle(){const{ctx:t,options:{position:e,title:n,reverse:i}}=this;if(!n.display)return;const a=xn(n.font),s=bn(n.padding),l=n.align;let c=a.lineHeight/2;"bottom"===e||"center"===e||o(e)?(c+=s.bottom,r(n.text)&&(c+=a.lineHeight*(n.text.length-1))):c+=s.top;const{titleX:u,titleY:h,maxWidth:d,rotation:p}=function(t,e,n,i){const{top:r,left:a,bottom:s,right:l,chart:c}=t,{chartArea:u,scales:h}=c;let d,p,f,g=0;const m=s-r,v=l-a;if(t.isHorizontal()){if(p=pt(i,a,l),o(n)){const t=Object.keys(n)[0],i=n[t];f=h[t].getPixelForValue(i)+m-e}else f="center"===n?(u.bottom+u.top)/2+m-e:zi(t,n,e);d=l-a}else{if(o(n)){const t=Object.keys(n)[0],i=n[t];p=h[t].getPixelForValue(i)-v+e}else p="center"===n?(u.left+u.right)/2-v+e:zi(t,n,e);f=pt(i,s,r),g="left"===n?-L:L}return{titleX:p,titleY:f,maxWidth:d,rotation:g}}(this,c,e,l);Ne(t,n.text,0,0,a,{color:n.color,maxWidth:d,rotation:p,textAlign:Yi(l,e,i),textBaseline:"middle",translation:[u,h]})}draw(t){this._isVisible()&&(this.drawBackground(),this.drawGrid(t),this.drawBorder(),this.drawTitle(),this.drawLabels(t))}_layers(){const t=this.options,e=t.ticks&&t.ticks.z||0,n=l(t.grid&&t.grid.z,-1),i=l(t.border&&t.border.z,0);return this._isVisible()&&this.draw===Xi.prototype.draw?[{z:n,draw:t=>{this.drawBackground(),this.drawGrid(t),this.drawTitle()}},{z:i,draw:()=>{this.drawBorder()}},{z:e,draw:t=>{this.drawLabels(t)}}]:[{z:e,draw:t=>{this.draw(t)}}]}getMatchingVisibleMetas(t){const e=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",i=[];let r,o;for(r=0,o=e.length;r<o;++r){const o=e[r];o[n]!==this.id||t&&o.type!==t||i.push(o)}return i}_resolveTickFontOptions(t){return xn(this.options.ticks.setContext(this.getContext(t)).font)}_maxDigits(){const t=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/t}}class Gi{constructor(t,e,n){this.type=t,this.scope=e,this.override=n,this.items=Object.create(null)}isForType(t){return Object.prototype.isPrototypeOf.call(this.type.prototype,t.prototype)}register(t){const e=Object.getPrototypeOf(t);let n;(function(t){return"id"in t&&"defaults"in t})(e)&&(n=this.register(e));const i=this.items,r=t.id,o=this.scope+"."+r;if(!r)throw new Error("class does not have id: "+t);return r in i||(i[r]=t,function(t,e,n){const i=v(Object.create(null),[n?se.get(n):{},se.get(e),t.defaults]);se.set(e,i),t.defaultRoutes&&function(t,e){Object.keys(e).forEach((n=>{const i=n.split("."),r=i.pop(),o=[t].concat(i).join("."),a=e[n].split("."),s=a.pop(),l=a.join(".");se.route(o,r,l,s)}))}(e,t.defaultRoutes),t.descriptors&&se.describe(e,t.descriptors)}(t,o,n),this.override&&se.override(t.id,t.overrides)),o}get(t){return this.items[t]}unregister(t){const e=this.items,n=t.id,i=this.scope;n in e&&delete e[n],i&&n in se[i]&&(delete se[i][n],this.override&&delete ie[n])}}var qi=new class{constructor(){this.controllers=new Gi(Pi,"datasets",!0),this.elements=new Gi(Ni,"elements"),this.plugins=new Gi(Object,"plugins"),this.scales=new Gi(Xi,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...t){this._each("register",t)}remove(...t){this._each("unregister",t)}addControllers(...t){this._each("register",t,this.controllers)}addElements(...t){this._each("register",t,this.elements)}addPlugins(...t){this._each("register",t,this.plugins)}addScales(...t){this._each("register",t,this.scales)}getController(t){return this._get(t,this.controllers,"controller")}getElement(t){return this._get(t,this.elements,"element")}getPlugin(t){return this._get(t,this.plugins,"plugin")}getScale(t){return this._get(t,this.scales,"scale")}removeControllers(...t){this._each("unregister",t,this.controllers)}removeElements(...t){this._each("unregister",t,this.elements)}removePlugins(...t){this._each("unregister",t,this.plugins)}removeScales(...t){this._each("unregister",t,this.scales)}_each(t,e,n){[...e].forEach((e=>{const i=n||this._getRegistryForType(e);n||i.isForType(e)||i===this.plugins&&e.id?this._exec(t,i,e):d(e,(e=>{const i=n||this._getRegistryForType(e);this._exec(t,i,e)}))}))}_exec(t,e,n){const i=S(t);h(n["before"+i],[],n),e[t](n),h(n["after"+i],[],n)}_getRegistryForType(t){for(let e=0;e<this._typedRegistries.length;e++){const n=this._typedRegistries[e];if(n.isForType(t))return n}return this.plugins}_get(t,e,n){const i=e.get(t);if(void 0===i)throw new Error('"'+t+'" is not a registered '+n+".");return i}};class Ui{constructor(){this._init=[]}notify(t,e,n,i){"beforeInit"===e&&(this._init=this._createDescriptors(t,!0),this._notify(this._init,t,"install"));const r=i?this._descriptors(t).filter(i):this._descriptors(t),o=this._notify(r,t,e,n);return"afterDestroy"===e&&(this._notify(r,t,"stop"),this._notify(this._init,t,"uninstall")),o}_notify(t,e,n,i){i=i||{};for(const r of t){const t=r.plugin;if(!1===h(t[n],[e,i,r.options],t)&&i.cancelable)return!1}return!0}invalidate(){i(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(t){if(this._cache)return this._cache;const e=this._cache=this._createDescriptors(t);return this._notifyStateChanges(t),e}_createDescriptors(t,e){const n=t&&t.config,i=l(n.options&&n.options.plugins,{}),r=function(t){const e={},n=[],i=Object.keys(qi.plugins.items);for(let t=0;t<i.length;t++)n.push(qi.getPlugin(i[t]));const r=t.plugins||[];for(let t=0;t<r.length;t++){const i=r[t];-1===n.indexOf(i)&&(n.push(i),e[i.id]=!0)}return{plugins:n,localIds:e}}(n);return!1!==i||e?function(t,{plugins:e,localIds:n},i,r){const o=[],a=t.getContext();for(const s of e){const e=s.id,l=$i(i[e],r);null!==l&&o.push({plugin:s,options:Zi(t.config,{plugin:s,local:n[e]},l,a)})}return o}(t,r,i,e):[]}_notifyStateChanges(t){const e=this._oldCache||[],n=this._cache,i=(t,e)=>t.filter((t=>!e.some((e=>t.plugin.id===e.plugin.id))));this._notify(i(e,n),t,"stop"),this._notify(i(n,e),t,"start")}}function $i(t,e){return e||!1!==t?!0===t?{}:t:null}function Zi(t,{plugin:e,local:n},i,r){const o=t.pluginScopeKeys(e),a=t.getOptionScopes(i,o);return n&&e.defaults&&a.push(e.defaults),t.createResolver(a,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Ki(t,e){const n=se.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||n.indexAxis||"x"}function Qi(t){if("x"===t||"y"===t||"r"===t)return t}function Ji(t,...e){if(Qi(t))return t;for(const i of e){const e=i.axis||("top"===(n=i.position)||"bottom"===n?"x":"left"===n||"right"===n?"y":void 0)||t.length>1&&Qi(t[0].toLowerCase());if(e)return e}var n;throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function tr(t,e,n){if(n[e+"AxisID"]===t)return{axis:e}}function er(t){const e=t.options||(t.options={});e.plugins=l(e.plugins,{}),e.scales=function(t,e){const n=ie[t.type]||{scales:{}},i=e.scales||{},r=Ki(t.type,e),a=Object.create(null);return Object.keys(i).forEach((e=>{const s=i[e];if(!o(s))return console.error(`Invalid scale configuration for scale: ${e}`);if(s._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${e}`);const l=Ji(e,s,function(t,e){if(e.data&&e.data.datasets){const n=e.data.datasets.filter((e=>e.xAxisID===t||e.yAxisID===t));if(n.length)return tr(t,"x",n[0])||tr(t,"y",n[0])}return{}}(e,t),se.scales[s.type]),c=function(t,e){return t===e?"_index_":"_value_"}(l,r),u=n.scales||{};a[e]=y(Object.create(null),[{axis:l},s,u[l],u[c]])})),t.data.datasets.forEach((n=>{const r=n.type||t.type,o=n.indexAxis||Ki(r,e),s=(ie[r]||{}).scales||{};Object.keys(s).forEach((t=>{const e=function(t,e){let n=t;return"_index_"===t?n=e:"_value_"===t&&(n="x"===e?"y":"x"),n}(t,o),r=n[e+"AxisID"]||e;a[r]=a[r]||Object.create(null),y(a[r],[{axis:e},i[r],s[t]])}))})),Object.keys(a).forEach((t=>{const e=a[t];y(e,[se.scales[e.type],se.scale])})),a}(t,e)}function nr(t){return(t=t||{}).datasets=t.datasets||[],t.labels=t.labels||[],t}const ir=new Map,rr=new Set;function or(t,e){let n=ir.get(t);return n||(n=e(),ir.set(t,n),rr.add(n)),n}const ar=(t,e,n)=>{const i=w(e,n);void 0!==i&&t.add(i)};class sr{constructor(t){this._config=function(t){return(t=t||{}).data=nr(t.data),er(t),t}(t),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(t){this._config.type=t}get data(){return this._config.data}set data(t){this._config.data=nr(t)}get options(){return this._config.options}set options(t){this._config.options=t}get plugins(){return this._config.plugins}update(){const t=this._config;this.clearCache(),er(t)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(t){return or(t,(()=>[[`datasets.${t}`,""]]))}datasetAnimationScopeKeys(t,e){return or(`${t}.transition.${e}`,(()=>[[`datasets.${t}.transitions.${e}`,`transitions.${e}`],[`datasets.${t}`,""]]))}datasetElementScopeKeys(t,e){return or(`${t}-${e}`,(()=>[[`datasets.${t}.elements.${e}`,`datasets.${t}`,`elements.${e}`,""]]))}pluginScopeKeys(t){const e=t.id;return or(`${this.type}-plugin-${e}`,(()=>[[`plugins.${e}`,...t.additionalOptionScopes||[]]]))}_cachedScopes(t,e){const n=this._scopeCache;let i=n.get(t);return i&&!e||(i=new Map,n.set(t,i)),i}getOptionScopes(t,e,n){const{options:i,type:r}=this,o=this._cachedScopes(t,n),a=o.get(e);if(a)return a;const s=new Set;e.forEach((e=>{t&&(s.add(t),e.forEach((e=>ar(s,t,e)))),e.forEach((t=>ar(s,i,t))),e.forEach((t=>ar(s,ie[r]||{},t))),e.forEach((t=>ar(s,se,t))),e.forEach((t=>ar(s,re,t)))}));const l=Array.from(s);return 0===l.length&&l.push(Object.create(null)),rr.has(e)&&o.set(e,l),l}chartOptionScopes(){const{options:t,type:e}=this;return[t,ie[e]||{},se.datasets[e]||{},{type:e},se,re]}resolveNamedOptions(t,e,n,i=[""]){const o={$shared:!0},{resolver:a,subPrefixes:s}=lr(this._resolverCache,t,i);let l=a;(function(t,e){const{isScriptable:n,isIndexable:i}=Fe(t);for(const o of e){const e=n(o),a=i(o),s=(a||e)&&t[o];if(e&&(k(s)||cr(s))||a&&r(s))return!0}return!1})(a,e)&&(o.$shared=!1,l=ze(a,n=k(n)?n():n,this.createResolver(t,n,s)));for(const t of e)o[t]=l[t];return o}createResolver(t,e,n=[""],i){const{resolver:r}=lr(this._resolverCache,t,n);return o(e)?ze(r,e,void 0,i):r}}function lr(t,e,n){let i=t.get(e);i||(i=new Map,t.set(e,i));const r=n.join();let o=i.get(r);return o||(o={resolver:Be(e,n),subPrefixes:n.filter((t=>!t.toLowerCase().includes("hover")))},i.set(r,o)),o}const cr=t=>o(t)&&Object.getOwnPropertyNames(t).some((e=>k(t[e]))),ur=["top","bottom","left","right","chartArea"];function hr(t,e){return"top"===t||"bottom"===t||-1===ur.indexOf(t)&&"x"===e}function dr(t,e){return function(n,i){return n[t]===i[t]?n[e]-i[e]:n[t]-i[t]}}function pr(t){const e=t.chart,n=e.options.animation;e.notifyPlugins("afterRender"),h(n&&n.onComplete,[t],e)}function fr(t){const e=t.chart,n=e.options.animation;h(n&&n.onProgress,[t],e)}function gr(t){return le()&&"string"==typeof t?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const mr={},vr=t=>{const e=gr(t);return Object.values(mr).filter((t=>t.canvas===e)).pop()};function yr(t,e,n){const i=Object.keys(t);for(const r of i){const i=+r;if(i>=e){const o=t[r];delete t[r],(n>0||i>e)&&(t[i+n]=o)}}}function br(t,e,n){return t.options.clip?t[n]:e[n]}class xr{static defaults=se;static instances=mr;static overrides=ie;static registry=qi;static version="4.4.2";static getChart=vr;static register(...t){qi.add(...t),_r()}static unregister(...t){qi.remove(...t),_r()}constructor(t,e){const i=this.config=new sr(e),r=gr(t),o=vr(r);if(o)throw new Error("Canvas is already in use. Chart with ID '"+o.id+"' must be destroyed before the canvas with ID '"+o.canvas.id+"' can be reused.");const a=i.createResolver(i.chartOptionScopes(),this.getContext());this.platform=new(i.platform||vi(r)),this.platform.updateConfig(i);const s=this.platform.acquireContext(r,a.aspectRatio),l=s&&s.canvas,c=l&&l.height,u=l&&l.width;this.id=n(),this.ctx=s,this.canvas=l,this.width=u,this.height=c,this._options=a,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new Ui,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=ht((t=>this.update(t)),a.resizeDelay||0),this._dataChanges=[],mr[this.id]=this,s&&l?(vt.listen(this,"complete",pr),vt.listen(this,"progress",fr),this._initialize(),this.attached&&this.update()):console.error("Failed to create chart: can't acquire context from the given item")}get aspectRatio(){const{options:{aspectRatio:t,maintainAspectRatio:e},width:n,height:r,_aspectRatio:o}=this;return i(t)?e&&o?o:r?n/r:null:t}get data(){return this.config.data}set data(t){this.config.data=t}get options(){return this._options}set options(t){this.config.options=t}get registry(){return qi}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():ye(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return ke(this.canvas,this.ctx),this}stop(){return vt.stop(this),this}resize(t,e){vt.running(this)?this._resizeBeforeDraw={width:t,height:e}:this._resize(t,e)}_resize(t,e){const n=this.options,i=this.canvas,r=n.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(i,t,e,r),a=n.devicePixelRatio||this.platform.getDevicePixelRatio(),s=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,ye(this,a,!0)&&(this.notifyPlugins("resize",{size:o}),h(n.onResize,[this,o],this),this.attached&&this._doResize(s)&&this.render())}ensureScalesHaveIDs(){d(this.options.scales||{},((t,e)=>{t.id=e}))}buildOrUpdateScales(){const t=this.options,e=t.scales,n=this.scales,i=Object.keys(n).reduce(((t,e)=>(t[e]=!1,t)),{});let r=[];e&&(r=r.concat(Object.keys(e).map((t=>{const n=e[t],i=Ji(t,n),r="r"===i,o="x"===i;return{options:n,dposition:r?"chartArea":o?"bottom":"left",dtype:r?"radialLinear":o?"category":"linear"}})))),d(r,(e=>{const r=e.options,o=r.id,a=Ji(o,r),s=l(r.type,e.dtype);void 0!==r.position&&hr(r.position,a)===hr(e.dposition)||(r.position=e.dposition),i[o]=!0;let c=null;o in n&&n[o].type===s?c=n[o]:(c=new(qi.getScale(s))({id:o,type:s,ctx:this.ctx,chart:this}),n[c.id]=c),c.init(r,t)})),d(i,((t,e)=>{t||delete n[e]})),d(n,(t=>{Jn.configure(this,t,t.options),Jn.addBox(this,t)}))}_updateMetasets(){const t=this._metasets,e=this.data.datasets.length,n=t.length;if(t.sort(((t,e)=>t.index-e.index)),n>e){for(let t=e;t<n;++t)this._destroyDatasetMeta(t);t.splice(e,n-e)}this._sortedMetasets=t.slice(0).sort(dr("order","index"))}_removeUnreferencedMetasets(){const{_metasets:t,data:{datasets:e}}=this;t.length>e.length&&delete this._stacks,t.forEach(((t,n)=>{0===e.filter((e=>e===t._dataset)).length&&this._destroyDatasetMeta(n)}))}buildOrUpdateControllers(){const t=[],e=this.data.datasets;let n,i;for(this._removeUnreferencedMetasets(),n=0,i=e.length;n<i;n++){const i=e[n];let r=this.getDatasetMeta(n);const o=i.type||this.config.type;if(r.type&&r.type!==o&&(this._destroyDatasetMeta(n),r=this.getDatasetMeta(n)),r.type=o,r.indexAxis=i.indexAxis||Ki(o,this.options),r.order=i.order||0,r.index=n,r.label=""+i.label,r.visible=this.isDatasetVisible(n),r.controller)r.controller.updateIndex(n),r.controller.linkScales();else{const e=qi.getController(o),{datasetElementType:i,dataElementType:a}=se.datasets[o];Object.assign(e,{dataElementType:qi.getElement(a),datasetElementType:i&&qi.getElement(i)}),r.controller=new e(this,n),t.push(r.controller)}}return this._updateMetasets(),t}_resetElements(){d(this.data.datasets,((t,e)=>{this.getDatasetMeta(e).controller.reset()}),this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(t){const e=this.config;e.update();const n=this._options=e.createResolver(e.chartOptionScopes(),this.getContext()),i=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),!1===this.notifyPlugins("beforeUpdate",{mode:t,cancelable:!0}))return;const r=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let t=0,e=this.data.datasets.length;t<e;t++){const{controller:e}=this.getDatasetMeta(t),n=!i&&-1===r.indexOf(e);e.buildOrUpdateElements(n),o=Math.max(+e.getMaxOverflow(),o)}o=this._minPadding=n.layout.autoPadding?o:0,this._updateLayout(o),i||d(r,(t=>{t.reset()})),this._updateDatasets(t),this.notifyPlugins("afterUpdate",{mode:t}),this._layers.sort(dr("z","_idx"));const{_active:a,_lastEvent:s}=this;s?this._eventHandler(s,!0):a.length&&this._updateHoverStyles(a,a,!0),this.render()}_updateScales(){d(this.scales,(t=>{Jn.removeBox(this,t)})),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const t=this.options,e=new Set(Object.keys(this._listeners)),n=new Set(t.events);A(e,n)&&!!this._responsiveListeners===t.responsive||(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:t}=this,e=this._getUniformDataChanges()||[];for(const{method:n,start:i,count:r}of e)yr(t,i,"_removeElements"===n?-r:r)}_getUniformDataChanges(){const t=this._dataChanges;if(!t||!t.length)return;this._dataChanges=[];const e=this.data.datasets.length,n=e=>new Set(t.filter((t=>t[0]===e)).map(((t,e)=>e+","+t.splice(1).join(",")))),i=n(0);for(let t=1;t<e;t++)if(!A(i,n(t)))return;return Array.from(i).map((t=>t.split(","))).map((t=>({method:t[1],start:+t[2],count:+t[3]})))}_updateLayout(t){if(!1===this.notifyPlugins("beforeLayout",{cancelable:!0}))return;Jn.update(this,this.width,this.height,t);const e=this.chartArea,n=e.width<=0||e.height<=0;this._layers=[],d(this.boxes,(t=>{n&&"chartArea"===t.position||(t.configure&&t.configure(),this._layers.push(...t._layers()))}),this),this._layers.forEach(((t,e)=>{t._idx=e})),this.notifyPlugins("afterLayout")}_updateDatasets(t){if(!1!==this.notifyPlugins("beforeDatasetsUpdate",{mode:t,cancelable:!0})){for(let t=0,e=this.data.datasets.length;t<e;++t)this.getDatasetMeta(t).controller.configure();for(let e=0,n=this.data.datasets.length;e<n;++e)this._updateDataset(e,k(t)?t({datasetIndex:e}):t);this.notifyPlugins("afterDatasetsUpdate",{mode:t})}}_updateDataset(t,e){const n=this.getDatasetMeta(t),i={meta:n,index:t,mode:e,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetUpdate",i)&&(n.controller._update(e),i.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",i))}render(){!1!==this.notifyPlugins("beforeRender",{cancelable:!0})&&(vt.has(this)?this.attached&&!vt.running(this)&&vt.start(this):(this.draw(),pr({chart:this})))}draw(){let t;if(this._resizeBeforeDraw){const{width:t,height:e}=this._resizeBeforeDraw;this._resize(t,e),this._resizeBeforeDraw=null}if(this.clear(),this.width<=0||this.height<=0)return;if(!1===this.notifyPlugins("beforeDraw",{cancelable:!0}))return;const e=this._layers;for(t=0;t<e.length&&e[t].z<=0;++t)e[t].draw(this.chartArea);for(this._drawDatasets();t<e.length;++t)e[t].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(t){const e=this._sortedMetasets,n=[];let i,r;for(i=0,r=e.length;i<r;++i){const r=e[i];t&&!r.visible||n.push(r)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(!1===this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0}))return;const t=this.getSortedVisibleDatasetMetas();for(let e=t.length-1;e>=0;--e)this._drawDataset(t[e]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(t){const e=this.ctx,n=t._clip,i=!n.disabled,r=function(t,e){const{xScale:n,yScale:i}=t;return n&&i?{left:br(n,e,"left"),right:br(n,e,"right"),top:br(i,e,"top"),bottom:br(i,e,"bottom")}:e}(t,this.chartArea),o={meta:t,index:t.index,cancelable:!0};!1!==this.notifyPlugins("beforeDatasetDraw",o)&&(i&&Ie(e,{left:!1===n.left?0:r.left-n.left,right:!1===n.right?this.width:r.right+n.right,top:!1===n.top?0:r.top-n.top,bottom:!1===n.bottom?this.height:r.bottom+n.bottom}),t.controller.draw(),i&&Ee(e),o.cancelable=!1,this.notifyPlugins("afterDatasetDraw",o))}isPointInArea(t){return Te(t,this.chartArea,this._minPadding)}getElementsAtEventForMode(t,e,n,i){const r=Hn.modes[e];return"function"==typeof r?r(this,t,n,i):[]}getDatasetMeta(t){const e=this.data.datasets[t],n=this._metasets;let i=n.filter((t=>t&&t._dataset===e)).pop();return i||(i={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:e&&e.order||0,index:t,_dataset:e,_parsed:[],_sorted:!1},n.push(i)),i}getContext(){return this.$context||(this.$context=Sn(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(t){const e=this.data.datasets[t];if(!e)return!1;const n=this.getDatasetMeta(t);return"boolean"==typeof n.hidden?!n.hidden:!e.hidden}setDatasetVisibility(t,e){this.getDatasetMeta(t).hidden=!e}toggleDataVisibility(t){this._hiddenIndices[t]=!this._hiddenIndices[t]}getDataVisibility(t){return!this._hiddenIndices[t]}_updateVisibility(t,e,n){const i=n?"show":"hide",r=this.getDatasetMeta(t),o=r.controller._resolveAnimations(void 0,i);C(e)?(r.data[e].hidden=!n,this.update()):(this.setDatasetVisibility(t,n),o.update(r,{visible:n}),this.update((e=>e.datasetIndex===t?i:void 0)))}hide(t,e){this._updateVisibility(t,e,!1)}show(t,e){this._updateVisibility(t,e,!0)}_destroyDatasetMeta(t){const e=this._metasets[t];e&&e.controller&&e.controller._destroy(),delete this._metasets[t]}_stop(){let t,e;for(this.stop(),vt.remove(this),t=0,e=this.data.datasets.length;t<e;++t)this._destroyDatasetMeta(t)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:t,ctx:e}=this;this._stop(),this.config.clearCache(),t&&(this.unbindEvents(),ke(t,e),this.platform.releaseContext(e),this.canvas=null,this.ctx=null),delete mr[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...t){return this.canvas.toDataURL(...t)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const t=this._listeners,e=this.platform,n=(n,i)=>{e.addEventListener(this,n,i),t[n]=i},i=(t,e,n)=>{t.offsetX=e,t.offsetY=n,this._eventHandler(t)};d(this.options.events,(t=>n(t,i)))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const t=this._responsiveListeners,e=this.platform,n=(n,i)=>{e.addEventListener(this,n,i),t[n]=i},i=(n,i)=>{t[n]&&(e.removeEventListener(this,n,i),delete t[n])},r=(t,e)=>{this.canvas&&this.resize(t,e)};let o;const a=()=>{i("attach",a),this.attached=!0,this.resize(),n("resize",r),n("detach",o)};o=()=>{this.attached=!1,i("resize",r),this._stop(),this._resize(0,0),n("attach",a)},e.isAttached(this.canvas)?a():o()}unbindEvents(){d(this._listeners,((t,e)=>{this.platform.removeEventListener(this,e,t)})),this._listeners={},d(this._responsiveListeners,((t,e)=>{this.platform.removeEventListener(this,e,t)})),this._responsiveListeners=void 0}updateHoverStyle(t,e,n){const i=n?"set":"remove";let r,o,a,s;for("dataset"===e&&(r=this.getDatasetMeta(t[0].datasetIndex),r.controller["_"+i+"DatasetHoverStyle"]()),a=0,s=t.length;a<s;++a){o=t[a];const e=o&&this.getDatasetMeta(o.datasetIndex).controller;e&&e[i+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(t){const e=this._active||[],n=t.map((({datasetIndex:t,index:e})=>{const n=this.getDatasetMeta(t);if(!n)throw new Error("No dataset found at index "+t);return{datasetIndex:t,element:n.data[e],index:e}}));!p(n,e)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,e))}notifyPlugins(t,e,n){return this._plugins.notify(this,t,e,n)}isPluginEnabled(t){return 1===this._plugins._cache.filter((e=>e.plugin.id===t)).length}_updateHoverStyles(t,e,n){const i=this.options.hover,r=(t,e)=>t.filter((t=>!e.some((e=>t.datasetIndex===e.datasetIndex&&t.index===e.index)))),o=r(e,t),a=n?t:r(t,e);o.length&&this.updateHoverStyle(o,i.mode,!1),a.length&&i.mode&&this.updateHoverStyle(a,i.mode,!0)}_eventHandler(t,e){const n={event:t,replay:e,cancelable:!0,inChartArea:this.isPointInArea(t)},i=e=>(e.options.events||this.options.events).includes(t.native.type);if(!1===this.notifyPlugins("beforeEvent",n,i))return;const r=this._handleEvent(t,e,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,i),(r||n.changed)&&this.render(),this}_handleEvent(t,e,n){const{_active:i=[],options:r}=this,o=e,a=this._getActiveElements(t,i,n,o),s=M(t),l=function(t,e,n,i){return n&&"mouseout"!==t.type?i?e:t:null}(t,this._lastEvent,n,s);n&&(this._lastEvent=null,h(r.onHover,[t,a,this],this),s&&h(r.onClick,[t,a,this],this));const c=!p(a,i);return(c||e)&&(this._active=a,this._updateHoverStyles(a,i,e)),this._lastEvent=l,c}_getActiveElements(t,e,n,i){if("mouseout"===t.type)return[];if(!n)return e;const r=this.options.hover;return this.getElementsAtEventForMode(t,r.mode,r,i)}}function _r(){return d(xr.instances,(t=>t._plugins.invalidate()))}function wr(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Sr{static override(t){Object.assign(Sr.prototype,t)}options;constructor(t){this.options=t||{}}init(){}formats(){return wr()}parse(){return wr()}format(){return wr()}add(){return wr()}diff(){return wr()}startOf(){return wr()}endOf(){return wr()}}var Cr={_date:Sr};function kr(t){const e=t.iScale,n=function(t,e){if(!t._cache.$bar){const n=t.getMatchingVisibleMetas(e);let i=[];for(let e=0,r=n.length;e<r;e++)i=i.concat(n[e].controller.getAllParsedValues(t));t._cache.$bar=lt(i.sort(((t,e)=>t-e)))}return t._cache.$bar}(e,t.type);let i,r,o,a,s=e._length;const l=()=>{32767!==o&&-32768!==o&&(C(a)&&(s=Math.min(s,Math.abs(o-a)||s)),a=o)};for(i=0,r=n.length;i<r;++i)o=e.getPixelForValue(n[i]),l();for(a=void 0,i=0,r=e.ticks.length;i<r;++i)o=e.getPixelForTick(i),l();return s}function Ar(t,e,n,i){return r(t)?function(t,e,n,i){const r=n.parse(t[0],i),o=n.parse(t[1],i),a=Math.min(r,o),s=Math.max(r,o);let l=a,c=s;Math.abs(a)>Math.abs(s)&&(l=s,c=a),e[n.axis]=c,e._custom={barStart:l,barEnd:c,start:r,end:o,min:a,max:s}}(t,e,n,i):e[n.axis]=n.parse(t,i),e}function Mr(t,e,n,i){const r=t.iScale,o=t.vScale,a=r.getLabels(),s=r===o,l=[];let c,u,h,d;for(c=n,u=n+i;c<u;++c)d=e[c],h={},h[r.axis]=s||r.parse(a[c],c),l.push(Ar(d,h,o,c));return l}function Tr(t){return t&&void 0!==t.barStart&&void 0!==t.barEnd}function Ir(t,e,n,i){let r=e.borderSkipped;const o={};if(!r)return void(t.borderSkipped=o);if(!0===r)return void(t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0});const{start:a,end:s,reverse:l,top:c,bottom:u}=function(t){let e,n,i,r,o;return t.horizontal?(e=t.base>t.x,n="left",i="right"):(e=t.base<t.y,n="bottom",i="top"),e?(r="end",o="start"):(r="start",o="end"),{start:n,end:i,reverse:e,top:r,bottom:o}}(t);"middle"===r&&n&&(t.enableBorderRadius=!0,(n._top||0)===i?r=c:(n._bottom||0)===i?r=u:(o[Er(u,a,s,l)]=!0,r=c)),o[Er(r,a,s,l)]=!0,t.borderSkipped=o}function Er(t,e,n,i){var r,o,a;return i?(a=n,t=Or(t=(r=t)===(o=e)?a:r===a?o:r,n,e)):t=Or(t,e,n),t}function Or(t,e,n){return"start"===t?e:"end"===t?n:t}function Dr(t,{inflateAmount:e},n){t.inflateAmount="auto"===e?1===n?.33:0:e}class Lr extends Pi{static id="doughnut";static defaults={datasetElementType:!1,dataElementType:"arc",animation:{animateRotate:!0,animateScale:!1},animations:{numbers:{type:"number",properties:["circumference","endAngle","innerRadius","outerRadius","startAngle","x","y","offset","borderWidth","spacing"]}},cutout:"50%",rotation:0,circumference:360,radius:"100%",spacing:0,indexAxis:"r"};static descriptors={_scriptable:t=>"spacing"!==t,_indexable:t=>"spacing"!==t&&!t.startsWith("borderDash")&&!t.startsWith("hoverBorderDash")};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n,color:i}}=t.legend.options;return e.labels.map(((e,r)=>{const o=t.getDatasetMeta(0).controller.getStyle(r);return{text:e,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,fontColor:i,lineWidth:o.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(r),index:r}}))}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}}}};constructor(t,e){super(t,e),this.enableOptionSharing=!0,this.innerRadius=void 0,this.outerRadius=void 0,this.offsetX=void 0,this.offsetY=void 0}linkScales(){}parse(t,e){const n=this.getDataset().data,i=this._cachedMeta;if(!1===this._parsing)i._parsed=n;else{let r,a,s=t=>+n[t];if(o(n[t])){const{key:t="value"}=this._parsing;s=e=>+w(n[e],t)}for(r=t,a=t+e;r<a;++r)i._parsed[r]=s(r)}}_getRotation(){return Y(this.options.rotation-90)}_getCircumference(){return Y(this.options.circumference)}_getRotationExtents(){let t=I,e=-I;for(let n=0;n<this.chart.data.datasets.length;++n)if(this.chart.isDatasetVisible(n)&&this.chart.getDatasetMeta(n).type===this._type){const i=this.chart.getDatasetMeta(n).controller,r=i._getRotation(),o=i._getCircumference();t=Math.min(t,r),e=Math.max(e,r+o)}return{rotation:t,circumference:e-t}}update(t){const e=this.chart,{chartArea:n}=e,i=this._cachedMeta,r=i.data,o=this.getMaxBorderWidth()+this.getMaxOffset(r)+this.options.spacing,a=Math.max((Math.min(n.width,n.height)-o)/2,0),s=Math.min(c(this.options.cutout,a),1),l=this._getRingWeight(this.index),{circumference:h,rotation:d}=this._getRotationExtents(),{ratioX:p,ratioY:f,offsetX:g,offsetY:m}=function(t,e,n){let i=1,r=1,o=0,a=0;if(e<I){const s=t,l=s+e,c=Math.cos(s),u=Math.sin(s),h=Math.cos(l),d=Math.sin(l),p=(t,e,i)=>K(t,s,l,!0)?1:Math.max(e,e*n,i,i*n),f=(t,e,i)=>K(t,s,l,!0)?-1:Math.min(e,e*n,i,i*n),g=p(0,c,h),m=p(L,u,d),v=f(T,c,h),y=f(T+L,u,d);i=(g-v)/2,r=(m-y)/2,o=-(g+v)/2,a=-(m+y)/2}return{ratioX:i,ratioY:r,offsetX:o,offsetY:a}}(d,h,s),v=(n.width-o)/p,y=(n.height-o)/f,b=Math.max(Math.min(v,y)/2,0),x=u(this.options.radius,b),_=(x-Math.max(x*s,0))/this._getVisibleDatasetWeightTotal();this.offsetX=g*x,this.offsetY=m*x,i.total=this.calculateTotal(),this.outerRadius=x-_*this._getRingWeightOffset(this.index),this.innerRadius=Math.max(this.outerRadius-_*l,0),this.updateElements(r,0,r.length,t)}_circumference(t,e){const n=this.options,i=this._cachedMeta,r=this._getCircumference();return e&&n.animation.animateRotate||!this.chart.getDataVisibility(t)||null===i._parsed[t]||i.data[t].hidden?0:this.calculateCircumference(i._parsed[t]*r/I)}updateElements(t,e,n,i){const r="reset"===i,o=this.chart,a=o.chartArea,s=o.options.animation,l=(a.left+a.right)/2,c=(a.top+a.bottom)/2,u=r&&s.animateScale,h=u?0:this.innerRadius,d=u?0:this.outerRadius,{sharedOptions:p,includeOptions:f}=this._getSharedOptions(e,i);let g,m=this._getRotation();for(g=0;g<e;++g)m+=this._circumference(g,r);for(g=e;g<e+n;++g){const e=this._circumference(g,r),n=t[g],o={x:l+this.offsetX,y:c+this.offsetY,startAngle:m,endAngle:m+e,circumference:e,outerRadius:d,innerRadius:h};f&&(o.options=p||this.resolveDataElementOptions(g,n.active?"active":i)),m+=e,this.updateElement(n,g,o,i)}}calculateTotal(){const t=this._cachedMeta,e=t.data;let n,i=0;for(n=0;n<e.length;n++){const r=t._parsed[n];null===r||isNaN(r)||!this.chart.getDataVisibility(n)||e[n].hidden||(i+=Math.abs(r))}return i}calculateCircumference(t){const e=this._cachedMeta.total;return e>0&&!isNaN(t)?I*(Math.abs(t)/e):0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=te(e._parsed[t],n.options.locale);return{label:i[t]||"",value:r}}getMaxBorderWidth(t){let e=0;const n=this.chart;let i,r,o,a,s;if(!t)for(i=0,r=n.data.datasets.length;i<r;++i)if(n.isDatasetVisible(i)){o=n.getDatasetMeta(i),t=o.data,a=o.controller;break}if(!t)return 0;for(i=0,r=t.length;i<r;++i)s=a.resolveDataElementOptions(i),"inner"!==s.borderAlign&&(e=Math.max(e,s.borderWidth||0,s.hoverBorderWidth||0));return e}getMaxOffset(t){let e=0;for(let n=0,i=t.length;n<i;++n){const t=this.resolveDataElementOptions(n);e=Math.max(e,t.offset||0,t.hoverOffset||0)}return e}_getRingWeightOffset(t){let e=0;for(let n=0;n<t;++n)this.chart.isDatasetVisible(n)&&(e+=this._getRingWeight(n));return e}_getRingWeight(t){return Math.max(l(this.chart.data.datasets[t].weight,1),0)}_getVisibleDatasetWeightTotal(){return this._getRingWeightOffset(this.chart.data.datasets.length)||1}}class Pr extends Pi{static id="polarArea";static defaults={dataElementType:"arc",animation:{animateRotate:!0,animateScale:!0},animations:{numbers:{type:"number",properties:["x","y","startAngle","endAngle","innerRadius","outerRadius"]}},indexAxis:"r",startAngle:0};static overrides={aspectRatio:1,plugins:{legend:{labels:{generateLabels(t){const e=t.data;if(e.labels.length&&e.datasets.length){const{labels:{pointStyle:n,color:i}}=t.legend.options;return e.labels.map(((e,r)=>{const o=t.getDatasetMeta(0).controller.getStyle(r);return{text:e,fillStyle:o.backgroundColor,strokeStyle:o.borderColor,fontColor:i,lineWidth:o.borderWidth,pointStyle:n,hidden:!t.getDataVisibility(r),index:r}}))}return[]}},onClick(t,e,n){n.chart.toggleDataVisibility(e.index),n.chart.update()}}},scales:{r:{type:"radialLinear",angleLines:{display:!1},beginAtZero:!0,grid:{circular:!0},pointLabels:{display:!1},startAngle:0}}};constructor(t,e){super(t,e),this.innerRadius=void 0,this.outerRadius=void 0}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart,i=n.data.labels||[],r=te(e._parsed[t].r,n.options.locale);return{label:i[t]||"",value:r}}parseObjectData(t,e,n,i){return Ze.bind(this)(t,e,n,i)}update(t){const e=this._cachedMeta.data;this._updateRadius(),this.updateElements(e,0,e.length,t)}getMinMax(){const t=this._cachedMeta,e={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY};return t.data.forEach(((t,n)=>{const i=this.getParsed(n).r;!isNaN(i)&&this.chart.getDataVisibility(n)&&(i<e.min&&(e.min=i),i>e.max&&(e.max=i))})),e}_updateRadius(){const t=this.chart,e=t.chartArea,n=t.options,i=Math.min(e.right-e.left,e.bottom-e.top),r=Math.max(i/2,0),o=(r-Math.max(n.cutoutPercentage?r/100*n.cutoutPercentage:1,0))/t.getVisibleDatasetCount();this.outerRadius=r-o*this.index,this.innerRadius=this.outerRadius-o}updateElements(t,e,n,i){const r="reset"===i,o=this.chart,a=o.options.animation,s=this._cachedMeta.rScale,l=s.xCenter,c=s.yCenter,u=s.getIndexAngle(0)-.5*T;let h,d=u;const p=360/this.countVisibleElements();for(h=0;h<e;++h)d+=this._computeAngle(h,i,p);for(h=e;h<e+n;h++){const e=t[h];let n=d,f=d+this._computeAngle(h,i,p),g=o.getDataVisibility(h)?s.getDistanceFromCenterForValue(this.getParsed(h).r):0;d=f,r&&(a.animateScale&&(g=0),a.animateRotate&&(n=f=u));const m={x:l,y:c,innerRadius:0,outerRadius:g,startAngle:n,endAngle:f,options:this.resolveDataElementOptions(h,e.active?"active":i)};this.updateElement(e,h,m,i)}}countVisibleElements(){const t=this._cachedMeta;let e=0;return t.data.forEach(((t,n)=>{!isNaN(this.getParsed(n).r)&&this.chart.getDataVisibility(n)&&e++})),e}_computeAngle(t,e,n){return this.chart.getDataVisibility(t)?Y(this.resolveDataElementOptions(t,e).angle||n):0}}var Nr=Object.freeze({__proto__:null,BarController:class extends Pi{static id="bar";static defaults={datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}};static overrides={scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}};parsePrimitiveData(t,e,n,i){return Mr(t,e,n,i)}parseArrayData(t,e,n,i){return Mr(t,e,n,i)}parseObjectData(t,e,n,i){const{iScale:r,vScale:o}=t,{xAxisKey:a="x",yAxisKey:s="y"}=this._parsing,l="x"===r.axis?a:s,c="x"===o.axis?a:s,u=[];let h,d,p,f;for(h=n,d=n+i;h<d;++h)f=e[h],p={},p[r.axis]=r.parse(w(f,l),h),u.push(Ar(w(f,c),p,o,h));return u}updateRangeFromParsed(t,e,n,i){super.updateRangeFromParsed(t,e,n,i);const r=n._custom;r&&e===this._cachedMeta.vScale&&(t.min=Math.min(t.min,r.min),t.max=Math.max(t.max,r.max))}getMaxOverflow(){return 0}getLabelAndValue(t){const e=this._cachedMeta,{iScale:n,vScale:i}=e,r=this.getParsed(t),o=r._custom,a=Tr(o)?"["+o.start+", "+o.end+"]":""+i.getLabelForValue(r[i.axis]);return{label:""+n.getLabelForValue(r[n.axis]),value:a}}initialize(){this.enableOptionSharing=!0,super.initialize(),this._cachedMeta.stack=this.getDataset().stack}update(t){const e=this._cachedMeta;this.updateElements(e.data,0,e.data.length,t)}updateElements(t,e,n,r){const o="reset"===r,{index:a,_cachedMeta:{vScale:s}}=this,l=s.getBasePixel(),c=s.isHorizontal(),u=this._getRuler(),{sharedOptions:h,includeOptions:d}=this._getSharedOptions(e,r);for(let p=e;p<e+n;p++){const e=this.getParsed(p),n=o||i(e[s.axis])?{base:l,head:l}:this._calculateBarValuePixels(p),f=this._calculateBarIndexPixels(p,u),g=(e._stacks||{})[s.axis],m={horizontal:c,base:n.base,enableBorderRadius:!g||Tr(e._custom)||a===g._top||a===g._bottom,x:c?n.head:f.center,y:c?f.center:n.head,height:c?f.size:Math.abs(n.size),width:c?Math.abs(n.size):f.size};d&&(m.options=h||this.resolveDataElementOptions(p,t[p].active?"active":r));const v=m.options||t[p].options;Ir(m,v,g,a),Dr(m,v,u.ratio),this.updateElement(t[p],p,m,r)}}_getStacks(t,e){const{iScale:n}=this._cachedMeta,r=n.getMatchingVisibleMetas(this._type).filter((t=>t.controller.options.grouped)),o=n.options.stacked,a=[],s=t=>{const n=t.controller.getParsed(e),r=n&&n[t.vScale.axis];if(i(r)||isNaN(r))return!0};for(const n of r)if((void 0===e||!s(n))&&((!1===o||-1===a.indexOf(n.stack)||void 0===o&&void 0===n.stack)&&a.push(n.stack),n.index===t))break;return a.length||a.push(void 0),a}_getStackCount(t){return this._getStacks(void 0,t).length}_getStackIndex(t,e,n){const i=this._getStacks(t,n),r=void 0!==e?i.indexOf(e):-1;return-1===r?i.length-1:r}_getRuler(){const t=this.options,e=this._cachedMeta,n=e.iScale,i=[];let r,o;for(r=0,o=e.data.length;r<o;++r)i.push(n.getPixelForValue(this.getParsed(r)[n.axis],r));const a=t.barThickness;return{min:a||kr(e),pixels:i,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:t.grouped,ratio:a?1:t.categoryPercentage*t.barPercentage}}_calculateBarValuePixels(t){const{_cachedMeta:{vScale:e,_stacked:n,index:r},options:{base:o,minBarLength:a}}=this,s=o||0,l=this.getParsed(t),c=l._custom,u=Tr(c);let h,d,p=l[e.axis],f=0,g=n?this.applyStack(e,l,n):p;g!==p&&(f=g-p,g=p),u&&(p=c.barStart,g=c.barEnd-c.barStart,0!==p&&B(p)!==B(c.barEnd)&&(f=0),f+=p);const m=i(o)||u?f:o;let v=e.getPixelForValue(m);if(h=this.chart.getDataVisibility(t)?e.getPixelForValue(f+g):v,d=h-v,Math.abs(d)<a){d=function(t,e,n){return 0!==t?B(t):(e.isHorizontal()?1:-1)*(e.min>=n?1:-1)}(d,e,s)*a,p===s&&(v-=d/2);const t=e.getPixelForDecimal(0),i=e.getPixelForDecimal(1),o=Math.min(t,i),c=Math.max(t,i);v=Math.max(Math.min(v,c),o),h=v+d,n&&!u&&(l._stacks[e.axis]._visualValues[r]=e.getValueForPixel(h)-e.getValueForPixel(v))}if(v===e.getPixelForValue(s)){const t=B(d)*e.getLineWidthForValue(s)/2;v+=t,d-=t}return{size:d,base:v,head:h,center:h+d/2}}_calculateBarIndexPixels(t,e){const n=e.scale,r=this.options,o=r.skipNull,a=l(r.maxBarThickness,1/0);let s,c;if(e.grouped){const n=o?this._getStackCount(t):e.stackCount,l="flex"===r.barThickness?function(t,e,n,i){const r=e.pixels,o=r[t];let a=t>0?r[t-1]:null,s=t<r.length-1?r[t+1]:null;const l=n.categoryPercentage;null===a&&(a=o-(null===s?e.end-e.start:s-o)),null===s&&(s=o+o-a);const c=o-(o-Math.min(a,s))/2*l;return{chunk:Math.abs(s-a)/2*l/i,ratio:n.barPercentage,start:c}}(t,e,r,n):function(t,e,n,r){const o=n.barThickness;let a,s;return i(o)?(a=e.min*n.categoryPercentage,s=n.barPercentage):(a=o*r,s=1),{chunk:a/r,ratio:s,start:e.pixels[t]-a/2}}(t,e,r,n),u=this._getStackIndex(this.index,this._cachedMeta.stack,o?t:void 0);s=l.start+l.chunk*u+l.chunk/2,c=Math.min(a,l.chunk*l.ratio)}else s=n.getPixelForValue(this.getParsed(t)[n.axis],t),c=Math.min(a,e.min*e.ratio);return{base:s-c/2,head:s+c/2,center:s,size:c}}draw(){const t=this._cachedMeta,e=t.vScale,n=t.data,i=n.length;let r=0;for(;r<i;++r)null!==this.getParsed(r)[e.axis]&&n[r].draw(this._ctx)}},BubbleController:class extends Pi{static id="bubble";static defaults={datasetElementType:!1,dataElementType:"point",animations:{numbers:{type:"number",properties:["x","y","borderWidth","radius"]}}};static overrides={scales:{x:{type:"linear"},y:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,super.initialize()}parsePrimitiveData(t,e,n,i){const r=super.parsePrimitiveData(t,e,n,i);for(let t=0;t<r.length;t++)r[t]._custom=this.resolveDataElementOptions(t+n).radius;return r}parseArrayData(t,e,n,i){const r=super.parseArrayData(t,e,n,i);for(let t=0;t<r.length;t++){const i=e[n+t];r[t]._custom=l(i[2],this.resolveDataElementOptions(t+n).radius)}return r}parseObjectData(t,e,n,i){const r=super.parseObjectData(t,e,n,i);for(let t=0;t<r.length;t++){const i=e[n+t];r[t]._custom=l(i&&i.r&&+i.r,this.resolveDataElementOptions(t+n).radius)}return r}getMaxOverflow(){const t=this._cachedMeta.data;let e=0;for(let n=t.length-1;n>=0;--n)e=Math.max(e,t[n].size(this.resolveDataElementOptions(n))/2);return e>0&&e}getLabelAndValue(t){const e=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:r}=e,o=this.getParsed(t),a=i.getLabelForValue(o.x),s=r.getLabelForValue(o.y),l=o._custom;return{label:n[t]||"",value:"("+a+", "+s+(l?", "+l:"")+")"}}update(t){const e=this._cachedMeta.data;this.updateElements(e,0,e.length,t)}updateElements(t,e,n,i){const r="reset"===i,{iScale:o,vScale:a}=this._cachedMeta,{sharedOptions:s,includeOptions:l}=this._getSharedOptions(e,i),c=o.axis,u=a.axis;for(let h=e;h<e+n;h++){const e=t[h],n=!r&&this.getParsed(h),d={},p=d[c]=r?o.getPixelForDecimal(.5):o.getPixelForValue(n[c]),f=d[u]=r?a.getBasePixel():a.getPixelForValue(n[u]);d.skip=isNaN(p)||isNaN(f),l&&(d.options=s||this.resolveDataElementOptions(h,e.active?"active":i),r&&(d.options.radius=0)),this.updateElement(e,h,d,i)}}resolveDataElementOptions(t,e){const n=this.getParsed(t);let i=super.resolveDataElementOptions(t,e);i.$shared&&(i=Object.assign({},i,{$shared:!1}));const r=i.radius;return"active"!==e&&(i.radius=0),i.radius+=l(n&&n._custom,r),i}},DoughnutController:Lr,LineController:class extends Pi{static id="line";static defaults={datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1};static overrides={scales:{_index_:{type:"category"},_value_:{type:"linear"}}};initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(t){const e=this._cachedMeta,{dataset:n,data:i=[],_dataset:r}=e,o=this.chart._animationsDisabled;let{start:a,count:s}=gt(e,i,o);this._drawStart=a,this._drawCount=s,mt(e)&&(a=0,s=i.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!r._decimated,n.points=i;const l=this.resolveDatasetElementOptions(t);this.options.showLine||(l.borderWidth=0),l.segment=this.options.segment,this.updateElement(n,void 0,{animated:!o,options:l},t),this.updateElements(i,a,s,t)}updateElements(t,e,n,r){const o="reset"===r,{iScale:a,vScale:s,_stacked:l,_dataset:c}=this._cachedMeta,{sharedOptions:u,includeOptions:h}=this._getSharedOptions(e,r),d=a.axis,p=s.axis,{spanGaps:f,segment:g}=this.options,m=H(f)?f:Number.POSITIVE_INFINITY,v=this.chart._animationsDisabled||o||"none"===r,y=e+n,b=t.length;let x=e>0&&this.getParsed(e-1);for(let n=0;n<b;++n){const f=t[n],b=v?f:{};if(n<e||n>=y){b.skip=!0;continue}const _=this.getParsed(n),w=i(_[p]),S=b[d]=a.getPixelForValue(_[d],n),C=b[p]=o||w?s.getBasePixel():s.getPixelForValue(l?this.applyStack(s,_,l):_[p],n);b.skip=isNaN(S)||isNaN(C)||w,b.stop=n>0&&Math.abs(_[d]-x[d])>m,g&&(b.parsed=_,b.raw=c.data[n]),h&&(b.options=u||this.resolveDataElementOptions(n,f.active?"active":r)),v||this.updateElement(f,n,b,r),x=_}}getMaxOverflow(){const t=this._cachedMeta,e=t.dataset,n=e.options&&e.options.borderWidth||0,i=t.data||[];if(!i.length)return n;const r=i[0].size(this.resolveDataElementOptions(0)),o=i[i.length-1].size(this.resolveDataElementOptions(i.length-1));return Math.max(n,r,o)/2}draw(){const t=this._cachedMeta;t.dataset.updateControlPoints(this.chart.chartArea,t.iScale.axis),super.draw()}},PieController:class extends Lr{static id="pie";static defaults={cutout:0,rotation:0,circumference:360,radius:"100%"}},PolarAreaController:Pr,RadarController:class extends Pi{static id="radar";static defaults={datasetElementType:"line",dataElementType:"point",indexAxis:"r",showLine:!0,elements:{line:{fill:"start"}}};static overrides={aspectRatio:1,scales:{r:{type:"radialLinear"}}};getLabelAndValue(t){const e=this._cachedMeta.vScale,n=this.getParsed(t);return{label:e.getLabels()[t],value:""+e.getLabelForValue(n[e.axis])}}parseObjectData(t,e,n,i){return Ze.bind(this)(t,e,n,i)}update(t){const e=this._cachedMeta,n=e.dataset,i=e.data||[],r=e.iScale.getLabels();if(n.points=i,"resize"!==t){const e=this.resolveDatasetElementOptions(t);this.options.showLine||(e.borderWidth=0);const o={_loop:!0,_fullLoop:r.length===i.length,options:e};this.updateElement(n,void 0,o,t)}this.updateElements(i,0,i.length,t)}updateElements(t,e,n,i){const r=this._cachedMeta.rScale,o="reset"===i;for(let a=e;a<e+n;a++){const e=t[a],n=this.resolveDataElementOptions(a,e.active?"active":i),s=r.getPointPositionForValue(a,this.getParsed(a).r),l=o?r.xCenter:s.x,c=o?r.yCenter:s.y,u={x:l,y:c,angle:s.angle,skip:isNaN(l)||isNaN(c),options:n};this.updateElement(e,a,u,i)}}},ScatterController:class extends Pi{static id="scatter";static defaults={datasetElementType:!1,dataElementType:"point",showLine:!1,fill:!1};static overrides={interaction:{mode:"point"},scales:{x:{type:"linear"},y:{type:"linear"}}};getLabelAndValue(t){const e=this._cachedMeta,n=this.chart.data.labels||[],{xScale:i,yScale:r}=e,o=this.getParsed(t),a=i.getLabelForValue(o.x),s=r.getLabelForValue(o.y);return{label:n[t]||"",value:"("+a+", "+s+")"}}update(t){const e=this._cachedMeta,{data:n=[]}=e,i=this.chart._animationsDisabled;let{start:r,count:o}=gt(e,n,i);if(this._drawStart=r,this._drawCount=o,mt(e)&&(r=0,o=n.length),this.options.showLine){this.datasetElementType||this.addElements();const{dataset:r,_dataset:o}=e;r._chart=this.chart,r._datasetIndex=this.index,r._decimated=!!o._decimated,r.points=n;const a=this.resolveDatasetElementOptions(t);a.segment=this.options.segment,this.updateElement(r,void 0,{animated:!i,options:a},t)}else this.datasetElementType&&(delete e.dataset,this.datasetElementType=!1);this.updateElements(n,r,o,t)}addElements(){const{showLine:t}=this.options;!this.datasetElementType&&t&&(this.datasetElementType=this.chart.registry.getElement("line")),super.addElements()}updateElements(t,e,n,r){const o="reset"===r,{iScale:a,vScale:s,_stacked:l,_dataset:c}=this._cachedMeta,u=this.resolveDataElementOptions(e,r),h=this.getSharedOptions(u),d=this.includeOptions(r,h),p=a.axis,f=s.axis,{spanGaps:g,segment:m}=this.options,v=H(g)?g:Number.POSITIVE_INFINITY,y=this.chart._animationsDisabled||o||"none"===r;let b=e>0&&this.getParsed(e-1);for(let u=e;u<e+n;++u){const e=t[u],n=this.getParsed(u),g=y?e:{},x=i(n[f]),_=g[p]=a.getPixelForValue(n[p],u),w=g[f]=o||x?s.getBasePixel():s.getPixelForValue(l?this.applyStack(s,n,l):n[f],u);g.skip=isNaN(_)||isNaN(w)||x,g.stop=u>0&&Math.abs(n[p]-b[p])>v,m&&(g.parsed=n,g.raw=c.data[u]),d&&(g.options=h||this.resolveDataElementOptions(u,e.active?"active":r)),y||this.updateElement(e,u,g,r),b=n}this.updateSharedOptions(h,r,u)}getMaxOverflow(){const t=this._cachedMeta,e=t.data||[];if(!this.options.showLine){let t=0;for(let n=e.length-1;n>=0;--n)t=Math.max(t,e[n].size(this.resolveDataElementOptions(n))/2);return t>0&&t}const n=t.dataset,i=n.options&&n.options.borderWidth||0;if(!e.length)return i;const r=e[0].size(this.resolveDataElementOptions(0)),o=e[e.length-1].size(this.resolveDataElementOptions(e.length-1));return Math.max(i,r,o)/2}}});function Rr(t,e,n,i){return{x:n+t*Math.cos(e),y:i+t*Math.sin(e)}}function Br(t,e,n,i,r,o){const{x:a,y:s,startAngle:l,pixelMargin:c,innerRadius:u}=e,h=Math.max(e.outerRadius+i+n-c,0),d=u>0?u+i+n+c:0;let p=0;const f=r-l;if(i){const t=((u>0?u-i:0)+(h>0?h-i:0))/2;p=(f-(0!==t?f*t/(t+i):f))/2}const g=(f-Math.max(.001,f*h-n/T)/h)/2,m=l+g+p,v=r-g-p,{outerStart:y,outerEnd:b,innerStart:x,innerEnd:_}=function(t,e,n,i){const r=mn(t.options.borderRadius,["outerStart","outerEnd","innerStart","innerEnd"]),o=(n-e)/2,a=Math.min(o,i*e/2),s=t=>{const e=(n-Math.min(o,t))*i/2;return Q(t,0,Math.min(o,e))};return{outerStart:s(r.outerStart),outerEnd:s(r.outerEnd),innerStart:Q(r.innerStart,0,a),innerEnd:Q(r.innerEnd,0,a)}}(e,d,h,v-m),w=h-y,S=h-b,C=m+y/w,k=v-b/S,A=d+x,M=d+_,I=m+x/A,E=v-_/M;if(t.beginPath(),o){const e=(C+k)/2;if(t.arc(a,s,h,C,e),t.arc(a,s,h,e,k),b>0){const e=Rr(S,k,a,s);t.arc(e.x,e.y,b,k,v+L)}const n=Rr(M,v,a,s);if(t.lineTo(n.x,n.y),_>0){const e=Rr(M,E,a,s);t.arc(e.x,e.y,_,v+L,E+Math.PI)}const i=(v-_/d+(m+x/d))/2;if(t.arc(a,s,d,v-_/d,i,!0),t.arc(a,s,d,i,m+x/d,!0),x>0){const e=Rr(A,I,a,s);t.arc(e.x,e.y,x,I+Math.PI,m-L)}const r=Rr(w,m,a,s);if(t.lineTo(r.x,r.y),y>0){const e=Rr(w,C,a,s);t.arc(e.x,e.y,y,m-L,C)}}else{t.moveTo(a,s);const e=Math.cos(C)*h+a,n=Math.sin(C)*h+s;t.lineTo(e,n);const i=Math.cos(k)*h+a,r=Math.sin(k)*h+s;t.lineTo(i,r)}t.closePath()}function zr(t,e,n=e){t.lineCap=l(n.borderCapStyle,e.borderCapStyle),t.setLineDash(l(n.borderDash,e.borderDash)),t.lineDashOffset=l(n.borderDashOffset,e.borderDashOffset),t.lineJoin=l(n.borderJoinStyle,e.borderJoinStyle),t.lineWidth=l(n.borderWidth,e.borderWidth),t.strokeStyle=l(n.borderColor,e.borderColor)}function Fr(t,e,n){t.lineTo(n.x,n.y)}function Vr(t,e,n={}){const i=t.length,{start:r=0,end:o=i-1}=n,{start:a,end:s}=e,l=Math.max(r,a),c=Math.min(o,s),u=r<a&&o<a||r>s&&o>s;return{count:i,start:l,loop:e.loop,ilen:c<l&&!u?i+c-l:c-l}}function Hr(t,e,n,i){const{points:r,options:o}=e,{count:a,start:s,loop:l,ilen:c}=Vr(r,n,i),u=function(t){return t.stepped?Oe:t.tension||"monotone"===t.cubicInterpolationMode?De:Fr}(o);let h,d,p,{move:f=!0,reverse:g}=i||{};for(h=0;h<=c;++h)d=r[(s+(g?c-h:h))%a],d.skip||(f?(t.moveTo(d.x,d.y),f=!1):u(t,p,d,g,o.stepped),p=d);return l&&(d=r[(s+(g?c:0))%a],u(t,p,d,g,o.stepped)),!!l}function Wr(t,e,n,i){const r=e.points,{count:o,start:a,ilen:s}=Vr(r,n,i),{move:l=!0,reverse:c}=i||{};let u,h,d,p,f,g,m=0,v=0;const y=t=>(a+(c?s-t:t))%o,b=()=>{p!==f&&(t.lineTo(m,f),t.lineTo(m,p),t.lineTo(m,g))};for(l&&(h=r[y(0)],t.moveTo(h.x,h.y)),u=0;u<=s;++u){if(h=r[y(u)],h.skip)continue;const e=h.x,n=h.y,i=0|e;i===d?(n<p?p=n:n>f&&(f=n),m=(v*m+e)/++v):(b(),t.lineTo(e,n),d=i,v=0,p=f=n),g=n}b()}function jr(t){const e=t.options,n=e.borderDash&&e.borderDash.length;return t._decimated||t._loop||e.tension||"monotone"===e.cubicInterpolationMode||e.stepped||n?Hr:Wr}const Yr="function"==typeof Path2D;class Xr extends Ni{static id="line";static defaults={borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};static descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t&&"fill"!==t};constructor(t){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,t&&Object.assign(this,t)}updateControlPoints(t,e){const n=this.options;if((n.tension||"monotone"===n.cubicInterpolationMode)&&!n.stepped&&!this._pointsUpdated){const i=n.spanGaps?this._loop:this._fullLoop;rn(this._points,n,t,i,e),this._pointsUpdated=!0}}set points(t){this._points=t,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=On(this,this.options.segment))}first(){const t=this.segments,e=this.points;return t.length&&e[t[0].start]}last(){const t=this.segments,e=this.points,n=t.length;return n&&e[t[n-1].end]}interpolate(t,e){const n=this.options,i=t[e],r=this.points,o=En(this,{property:e,start:i,end:i});if(!o.length)return;const a=[],s=function(t){return t.stepped?un:t.tension||"monotone"===t.cubicInterpolationMode?hn:cn}(n);let l,c;for(l=0,c=o.length;l<c;++l){const{start:c,end:u}=o[l],h=r[c],d=r[u];if(h===d){a.push(h);continue}const p=s(h,d,Math.abs((i-h[e])/(d[e]-h[e])),n.stepped);p[e]=t[e],a.push(p)}return 1===a.length?a[0]:a}pathSegment(t,e,n){return jr(this)(t,this,e,n)}path(t,e,n){const i=this.segments,r=jr(this);let o=this._loop;e=e||0,n=n||this.points.length-e;for(const a of i)o&=r(t,this,a,{start:e,end:e+n-1});return!!o}draw(t,e,n,i){const r=this.options||{};(this.points||[]).length&&r.borderWidth&&(t.save(),function(t,e,n,i){Yr&&!e.options.segment?function(t,e,n,i){let r=e._path;r||(r=e._path=new Path2D,e.path(r,n,i)&&r.closePath()),zr(t,e.options),t.stroke(r)}(t,e,n,i):function(t,e,n,i){const{segments:r,options:o}=e,a=jr(e);for(const s of r)zr(t,o,s.style),t.beginPath(),a(t,e,s,{start:n,end:n+i-1})&&t.closePath(),t.stroke()}(t,e,n,i)}(t,this,n,i),t.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}function Gr(t,e,n,i){const r=t.options,{[n]:o}=t.getProps([n],i);return Math.abs(e-o)<r.radius+r.hitRadius}function qr(t,e){const{x:n,y:i,base:r,width:o,height:a}=t.getProps(["x","y","base","width","height"],e);let s,l,c,u,h;return t.horizontal?(h=a/2,s=Math.min(n,r),l=Math.max(n,r),c=i-h,u=i+h):(h=o/2,s=n-h,l=n+h,c=Math.min(i,r),u=Math.max(i,r)),{left:s,top:c,right:l,bottom:u}}function Ur(t,e,n,i){return t?0:Q(e,n,i)}function $r(t){const e=qr(t),n=e.right-e.left,i=e.bottom-e.top,r=function(t,e,n){const i=t.options.borderWidth,r=t.borderSkipped,o=vn(i);return{t:Ur(r.top,o.top,0,n),r:Ur(r.right,o.right,0,e),b:Ur(r.bottom,o.bottom,0,n),l:Ur(r.left,o.left,0,e)}}(t,n/2,i/2),a=function(t,e,n){const{enableBorderRadius:i}=t.getProps(["enableBorderRadius"]),r=t.options.borderRadius,a=yn(r),s=Math.min(e,n),l=t.borderSkipped,c=i||o(r);return{topLeft:Ur(!c||l.top||l.left,a.topLeft,0,s),topRight:Ur(!c||l.top||l.right,a.topRight,0,s),bottomLeft:Ur(!c||l.bottom||l.left,a.bottomLeft,0,s),bottomRight:Ur(!c||l.bottom||l.right,a.bottomRight,0,s)}}(t,n/2,i/2);return{outer:{x:e.left,y:e.top,w:n,h:i,radius:a},inner:{x:e.left+r.l,y:e.top+r.t,w:n-r.l-r.r,h:i-r.t-r.b,radius:{topLeft:Math.max(0,a.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,a.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,a.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,a.bottomRight-Math.max(r.b,r.r))}}}}function Zr(t,e,n,i){const r=null===e,o=null===n,a=t&&!(r&&o)&&qr(t,i);return a&&(r||tt(e,a.left,a.right))&&(o||tt(n,a.top,a.bottom))}function Kr(t,e){t.rect(e.x,e.y,e.w,e.h)}function Qr(t,e,n={}){const i=t.x!==n.x?-e:0,r=t.y!==n.y?-e:0,o=(t.x+t.w!==n.x+n.w?e:0)-i,a=(t.y+t.h!==n.y+n.h?e:0)-r;return{x:t.x+i,y:t.y+r,w:t.w+o,h:t.h+a,radius:t.radius}}var Jr=Object.freeze({__proto__:null,ArcElement:class extends Ni{static id="arc";static defaults={borderAlign:"center",borderColor:"#fff",borderDash:[],borderDashOffset:0,borderJoinStyle:void 0,borderRadius:0,borderWidth:2,offset:0,spacing:0,angle:void 0,circular:!0};static defaultRoutes={backgroundColor:"backgroundColor"};static descriptors={_scriptable:!0,_indexable:t=>"borderDash"!==t};circumference;endAngle;fullCircles;innerRadius;outerRadius;pixelMargin;startAngle;constructor(t){super(),this.options=void 0,this.circumference=void 0,this.startAngle=void 0,this.endAngle=void 0,this.innerRadius=void 0,this.outerRadius=void 0,this.pixelMargin=0,this.fullCircles=0,t&&Object.assign(this,t)}inRange(t,e,n){const i=this.getProps(["x","y"],n),{angle:r,distance:o}=q(i,{x:t,y:e}),{startAngle:a,endAngle:s,innerRadius:c,outerRadius:u,circumference:h}=this.getProps(["startAngle","endAngle","innerRadius","outerRadius","circumference"],n),d=(this.options.spacing+this.options.borderWidth)/2,p=l(h,s-a)>=I||K(r,a,s),f=tt(o,c+d,u+d);return p&&f}getCenterPoint(t){const{x:e,y:n,startAngle:i,endAngle:r,innerRadius:o,outerRadius:a}=this.getProps(["x","y","startAngle","endAngle","innerRadius","outerRadius"],t),{offset:s,spacing:l}=this.options,c=(i+r)/2,u=(o+a+l+s)/2;return{x:e+Math.cos(c)*u,y:n+Math.sin(c)*u}}tooltipPosition(t){return this.getCenterPoint(t)}draw(t){const{options:e,circumference:n}=this,i=(e.offset||0)/4,r=(e.spacing||0)/2,o=e.circular;if(this.pixelMargin="inner"===e.borderAlign?.33:0,this.fullCircles=n>I?Math.floor(n/I):0,0===n||this.innerRadius<0||this.outerRadius<0)return;t.save();const a=(this.startAngle+this.endAngle)/2;t.translate(Math.cos(a)*i,Math.sin(a)*i);const s=i*(1-Math.sin(Math.min(T,n||0)));t.fillStyle=e.backgroundColor,t.strokeStyle=e.borderColor,function(t,e,n,i,r){const{fullCircles:o,startAngle:a,circumference:s}=e;let l=e.endAngle;if(o){Br(t,e,n,i,l,r);for(let e=0;e<o;++e)t.fill();isNaN(s)||(l=a+(s%I||I))}Br(t,e,n,i,l,r),t.fill()}(t,this,s,r,o),function(t,e,n,i,r){const{fullCircles:o,startAngle:a,circumference:s,options:l}=e,{borderWidth:c,borderJoinStyle:u,borderDash:h,borderDashOffset:d}=l,p="inner"===l.borderAlign;if(!c)return;t.setLineDash(h||[]),t.lineDashOffset=d,p?(t.lineWidth=2*c,t.lineJoin=u||"round"):(t.lineWidth=c,t.lineJoin=u||"bevel");let f=e.endAngle;if(o){Br(t,e,n,i,f,r);for(let e=0;e<o;++e)t.stroke();isNaN(s)||(f=a+(s%I||I))}p&&function(t,e,n){const{startAngle:i,pixelMargin:r,x:o,y:a,outerRadius:s,innerRadius:l}=e;let c=r/s;t.beginPath(),t.arc(o,a,s,i-c,n+c),l>r?(c=r/l,t.arc(o,a,l,n+c,i-c,!0)):t.arc(o,a,r,n+L,i-L),t.closePath(),t.clip()}(t,e,f),o||(Br(t,e,n,i,f,r),t.stroke())}(t,this,s,r,o),t.restore()}},BarElement:class extends Ni{static id="bar";static defaults={borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,t&&Object.assign(this,t)}draw(t){const{inflateAmount:e,options:{borderColor:n,backgroundColor:i}}=this,{inner:r,outer:o}=$r(this),a=(s=o.radius).topLeft||s.topRight||s.bottomLeft||s.bottomRight?Re:Kr;var s;t.save(),o.w===r.w&&o.h===r.h||(t.beginPath(),a(t,Qr(o,e,r)),t.clip(),a(t,Qr(r,-e,o)),t.fillStyle=n,t.fill("evenodd")),t.beginPath(),a(t,Qr(r,e)),t.fillStyle=i,t.fill(),t.restore()}inRange(t,e,n){return Zr(this,t,e,n)}inXRange(t,e){return Zr(this,t,null,e)}inYRange(t,e){return Zr(this,null,t,e)}getCenterPoint(t){const{x:e,y:n,base:i,horizontal:r}=this.getProps(["x","y","base","horizontal"],t);return{x:r?(e+i)/2:e,y:r?n:(n+i)/2}}getRange(t){return"x"===t?this.width/2:this.height/2}},LineElement:Xr,PointElement:class extends Ni{static id="point";parsed;skip;stop;static defaults={borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0};static defaultRoutes={backgroundColor:"backgroundColor",borderColor:"borderColor"};constructor(t){super(),this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,t&&Object.assign(this,t)}inRange(t,e,n){const i=this.options,{x:r,y:o}=this.getProps(["x","y"],n);return Math.pow(t-r,2)+Math.pow(e-o,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(t,e){return Gr(this,t,"x",e)}inYRange(t,e){return Gr(this,t,"y",e)}getCenterPoint(t){const{x:e,y:n}=this.getProps(["x","y"],t);return{x:e,y:n}}size(t){let e=(t=t||this.options||{}).radius||0;return e=Math.max(e,e&&t.hoverRadius||0),2*(e+(e&&t.borderWidth||0))}draw(t,e){const n=this.options;this.skip||n.radius<.1||!Te(this,e,this.size(n)/2)||(t.strokeStyle=n.borderColor,t.lineWidth=n.borderWidth,t.fillStyle=n.backgroundColor,Ae(t,n,this.x,this.y))}getRange(){const t=this.options||{};return t.radius+t.hitRadius}}});function to(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}function eo(t,e,{horizontal:n,minRotation:i}){const r=Y(i),o=(n?Math.sin(r):Math.cos(r))||.001,a=.75*e*(""+t).length;return Math.min(e/o,a)}class no extends Xi{constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(t,e){return i(t)||("number"==typeof t||t instanceof Number)&&!isFinite(+t)?null:+t}handleTickRangeOptions(){const{beginAtZero:t}=this.options,{minDefined:e,maxDefined:n}=this.getUserBounds();let{min:i,max:r}=this;const o=t=>i=e?i:t,a=t=>r=n?r:t;if(t){const t=B(i),e=B(r);t<0&&e<0?a(0):t>0&&e>0&&o(0)}if(i===r){let e=0===r?1:Math.abs(.05*r);a(r+e),t||o(i-e)}this.min=i,this.max=r}getTickLimit(){const t=this.options.ticks;let e,{maxTicksLimit:n,stepSize:i}=t;return i?(e=Math.ceil(this.max/i)-Math.floor(this.min/i)+1,e>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${i} would result generating up to ${e} ticks. Limiting to 1000.`),e=1e3)):(e=this.computeTickLimit(),n=n||11),n&&(e=Math.min(n,e)),e}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const t=this.options,e=t.ticks;let n=this.getTickLimit();n=Math.max(2,n);const r=function(t,e){const n=[],{bounds:r,step:o,min:a,max:s,precision:l,count:c,maxTicks:u,maxDigits:h,includeBounds:d}=t,p=o||1,f=u-1,{min:g,max:m}=e,v=!i(a),y=!i(s),b=!i(c),x=(m-g)/(h+1);let _,w,S,C,k=F((m-g)/f/p)*p;if(k<1e-14&&!v&&!y)return[{value:g},{value:m}];C=Math.ceil(m/k)-Math.floor(g/k),C>f&&(k=F(C*k/f/p)*p),i(l)||(_=Math.pow(10,l),k=Math.ceil(k*_)/_),"ticks"===r?(w=Math.floor(g/k)*k,S=Math.ceil(m/k)*k):(w=g,S=m),v&&y&&o&&W((s-a)/o,k/1e3)?(C=Math.round(Math.min((s-a)/k,u)),k=(s-a)/C,w=a,S=s):b?(w=v?a:w,S=y?s:S,C=c-1,k=(S-w)/C):(C=(S-w)/k,C=z(C,Math.round(C),k/1e3)?Math.round(C):Math.ceil(C));const A=Math.max(G(k),G(w));_=Math.pow(10,i(l)?A:l),w=Math.round(w*_)/_,S=Math.round(S*_)/_;let M=0;for(v&&(d&&w!==a?(n.push({value:a}),w<a&&M++,z(Math.round((w+M*k)*_)/_,a,eo(a,x,t))&&M++):w<a&&M++);M<C;++M){const t=Math.round((w+M*k)*_)/_;if(y&&t>s)break;n.push({value:t})}return y&&d&&S!==s?n.length&&z(n[n.length-1].value,s,eo(s,x,t))?n[n.length-1].value=s:n.push({value:s}):y&&S!==s||n.push({value:S}),n}({maxTicks:n,bounds:t.bounds,min:t.min,max:t.max,precision:e.precision,step:e.stepSize,count:e.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:e.minRotation||0,includeBounds:!1!==e.includeBounds},this._range||this);return"ticks"===t.bounds&&j(r,this,"value"),t.reverse?(r.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),r}configure(){const t=this.ticks;let e=this.min,n=this.max;if(super.configure(),this.options.offset&&t.length){const i=(n-e)/Math.max(t.length-1,1)/2;e-=i,n+=i}this._startValue=e,this._endValue=n,this._valueRange=n-e}getLabelForValue(t){return te(t,this.chart.options.locale,this.options.ticks.format)}}class io extends no{static id="linear";static defaults={ticks:{callback:ne.formatters.numeric}};determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=a(t)?t:0,this.max=a(e)?e:1,this.handleTickRangeOptions()}computeTickLimit(){const t=this.isHorizontal(),e=t?this.width:this.height,n=Y(this.options.ticks.minRotation),i=(t?Math.sin(n):Math.cos(n))||.001,r=this._resolveTickFontOptions(0);return Math.ceil(e/Math.min(40,r.lineHeight/i))}getPixelForValue(t){return null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getValueForPixel(t){return this._startValue+this.getDecimalForPixel(t)*this._valueRange}}const ro=t=>Math.floor(R(t)),oo=(t,e)=>Math.pow(10,ro(t)+e);function ao(t){return 1==t/Math.pow(10,ro(t))}function so(t,e,n){const i=Math.pow(10,n),r=Math.floor(t/i);return Math.ceil(e/i)-r}class lo extends Xi{static id="logarithmic";static defaults={ticks:{callback:ne.formatters.logarithmic,major:{enabled:!0}}};constructor(t){super(t),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(t,e){const n=no.prototype.parse.apply(this,[t,e]);if(0!==n)return a(n)&&n>0?n:null;this._zero=!0}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!0);this.min=a(t)?Math.max(0,t):null,this.max=a(e)?Math.max(0,e):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!a(this._userMin)&&(this.min=t===oo(this.min,0)?oo(this.min,-1):oo(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let n=this.min,i=this.max;const r=e=>n=t?n:e,o=t=>i=e?i:t;n===i&&(n<=0?(r(1),o(10)):(r(oo(n,-1)),o(oo(i,1)))),n<=0&&r(oo(i,-1)),i<=0&&o(oo(n,1)),this.min=n,this.max=i}buildTicks(){const t=this.options,e=function(t,{min:e,max:n}){e=s(t.min,e);const i=[],r=ro(e);let o=function(t,e){let n=ro(e-t);for(;so(t,e,n)>10;)n++;for(;so(t,e,n)<10;)n--;return Math.min(n,ro(t))}(e,n),a=o<0?Math.pow(10,Math.abs(o)):1;const l=Math.pow(10,o),c=r>o?Math.pow(10,r):0,u=Math.round((e-c)*a)/a,h=Math.floor((e-c)/l/10)*l*10;let d=Math.floor((u-h)/Math.pow(10,o)),p=s(t.min,Math.round((c+h+d*Math.pow(10,o))*a)/a);for(;p<n;)i.push({value:p,major:ao(p),significand:d}),d>=10?d=d<15?15:20:d++,d>=20&&(o++,d=2,a=o>=0?1:a),p=Math.round((c+h+d*Math.pow(10,o))*a)/a;const f=s(t.max,p);return i.push({value:f,major:ao(f),significand:d}),i}({min:this._userMin,max:this._userMax},this);return"ticks"===t.bounds&&j(e,this,"value"),t.reverse?(e.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),e}getLabelForValue(t){return void 0===t?"0":te(t,this.chart.options.locale,this.options.ticks.format)}configure(){const t=this.min;super.configure(),this._startValue=R(t),this._valueRange=R(this.max)-R(t)}getPixelForValue(t){return void 0!==t&&0!==t||(t=this.min),null===t||isNaN(t)?NaN:this.getPixelForDecimal(t===this.min?0:(R(t)-this._startValue)/this._valueRange)}getValueForPixel(t){const e=this.getDecimalForPixel(t);return Math.pow(10,this._startValue+e*this._valueRange)}}function co(t){const e=t.ticks;if(e.display&&t.display){const t=bn(e.backdropPadding);return l(e.font&&e.font.size,se.font.size)+t.height}return 0}function uo(t,e,n,i,r){return t===i||t===r?{start:e-n/2,end:e+n/2}:t<i||t>r?{start:e-n,end:e}:{start:e,end:e+n}}function ho(t,e,n,i,r){const o=Math.abs(Math.sin(n)),a=Math.abs(Math.cos(n));let s=0,l=0;i.start<e.l?(s=(e.l-i.start)/o,t.l=Math.min(t.l,e.l-s)):i.end>e.r&&(s=(i.end-e.r)/o,t.r=Math.max(t.r,e.r+s)),r.start<e.t?(l=(e.t-r.start)/a,t.t=Math.min(t.t,e.t-l)):r.end>e.b&&(l=(r.end-e.b)/a,t.b=Math.max(t.b,e.b+l))}function po(t,e,n){const i=t.drawingArea,{extra:r,additionalAngle:o,padding:a,size:s}=n,l=t.getPointPosition(e,i+r+a,o),c=Math.round(X(Z(l.angle+L))),u=function(t,e,n){return 90===n||270===n?t-=e/2:(n>270||n<90)&&(t-=e),t}(l.y,s.h,c),h=function(t){return 0===t||180===t?"center":t<180?"left":"right"}(c),d=function(t,e,n){return"right"===n?t-=e:"center"===n&&(t-=e/2),t}(l.x,s.w,h);return{visible:!0,x:l.x,y:u,textAlign:h,left:d,top:u,right:d+s.w,bottom:u+s.h}}function fo(t,e){if(!e)return!0;const{left:n,top:i,right:r,bottom:o}=t;return!(Te({x:n,y:i},e)||Te({x:n,y:o},e)||Te({x:r,y:i},e)||Te({x:r,y:o},e))}function go(t,e,n){const{left:r,top:o,right:a,bottom:s}=n,{backdropColor:l}=e;if(!i(l)){const n=yn(e.borderRadius),i=bn(e.backdropPadding);t.fillStyle=l;const c=r-i.left,u=o-i.top,h=a-r+i.width,d=s-o+i.height;Object.values(n).some((t=>0!==t))?(t.beginPath(),Re(t,{x:c,y:u,w:h,h:d,radius:n}),t.fill()):t.fillRect(c,u,h,d)}}function mo(t,e,n,i){const{ctx:r}=t;if(n)r.arc(t.xCenter,t.yCenter,e,0,I);else{let n=t.getPointPosition(0,e);r.moveTo(n.x,n.y);for(let o=1;o<i;o++)n=t.getPointPosition(o,e),r.lineTo(n.x,n.y)}}class vo extends no{static id="radialLinear";static defaults={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:ne.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback:t=>t,padding:5,centerPointLabels:!1}};static defaultRoutes={"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"};static descriptors={angleLines:{_fallback:"grid"}};constructor(t){super(t),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const t=this._padding=bn(co(this.options)/2),e=this.width=this.maxWidth-t.width,n=this.height=this.maxHeight-t.height;this.xCenter=Math.floor(this.left+e/2+t.left),this.yCenter=Math.floor(this.top+n/2+t.top),this.drawingArea=Math.floor(Math.min(e,n)/2)}determineDataLimits(){const{min:t,max:e}=this.getMinMax(!1);this.min=a(t)&&!isNaN(t)?t:0,this.max=a(e)&&!isNaN(e)?e:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/co(this.options))}generateTickLabels(t){no.prototype.generateTickLabels.call(this,t),this._pointLabels=this.getLabels().map(((t,e)=>{const n=h(this.options.pointLabels.callback,[t,e],this);return n||0===n?n:""})).filter(((t,e)=>this.chart.getDataVisibility(e)))}fit(){const t=this.options;t.display&&t.pointLabels.display?function(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},n=Object.assign({},e),i=[],o=[],a=t._pointLabels.length,s=t.options.pointLabels,l=s.centerPointLabels?T/a:0;for(let d=0;d<a;d++){const a=s.setContext(t.getPointLabelContext(d));o[d]=a.padding;const p=t.getPointPosition(d,t.drawingArea+o[d],l),f=xn(a.font),g=(c=t.ctx,u=f,h=r(h=t._pointLabels[d])?h:[h],{w:Se(c,u.string,h),h:h.length*u.lineHeight});i[d]=g;const m=Z(t.getIndexAngle(d)+l),v=Math.round(X(m));ho(n,e,m,uo(v,p.x,g.w,0,180),uo(v,p.y,g.h,90,270))}var c,u,h;t.setCenterPoint(e.l-n.l,n.r-e.r,e.t-n.t,n.b-e.b),t._pointLabelItems=function(t,e,n){const i=[],r=t._pointLabels.length,o=t.options,{centerPointLabels:a,display:s}=o.pointLabels,l={extra:co(o)/2,additionalAngle:a?T/r:0};let c;for(let o=0;o<r;o++){l.padding=n[o],l.size=e[o];const r=po(t,o,l);i.push(r),"auto"===s&&(r.visible=fo(r,c),r.visible&&(c=r))}return i}(t,i,o)}(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(t,e,n,i){this.xCenter+=Math.floor((t-e)/2),this.yCenter+=Math.floor((n-i)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(t,e,n,i))}getIndexAngle(t){return Z(t*(I/(this._pointLabels.length||1))+Y(this.options.startAngle||0))}getDistanceFromCenterForValue(t){if(i(t))return NaN;const e=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-t)*e:(t-this.min)*e}getValueForDistanceFromCenter(t){if(i(t))return NaN;const e=t/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-e:this.min+e}getPointLabelContext(t){const e=this._pointLabels||[];if(t>=0&&t<e.length){const n=e[t];return function(t,e,n){return Sn(t,{label:n,index:e,type:"pointLabel"})}(this.getContext(),t,n)}}getPointPosition(t,e,n=0){const i=this.getIndexAngle(t)-L+n;return{x:Math.cos(i)*e+this.xCenter,y:Math.sin(i)*e+this.yCenter,angle:i}}getPointPositionForValue(t,e){return this.getPointPosition(t,this.getDistanceFromCenterForValue(e))}getBasePosition(t){return this.getPointPositionForValue(t||0,this.getBaseValue())}getPointLabelPosition(t){const{left:e,top:n,right:i,bottom:r}=this._pointLabelItems[t];return{left:e,top:n,right:i,bottom:r}}drawBackground(){const{backgroundColor:t,grid:{circular:e}}=this.options;if(t){const n=this.ctx;n.save(),n.beginPath(),mo(this,this.getDistanceFromCenterForValue(this._endValue),e,this._pointLabels.length),n.closePath(),n.fillStyle=t,n.fill(),n.restore()}}drawGrid(){const t=this.ctx,e=this.options,{angleLines:n,grid:i,border:r}=e,o=this._pointLabels.length;let a,s,l;if(e.pointLabels.display&&function(t,e){const{ctx:n,options:{pointLabels:i}}=t;for(let r=e-1;r>=0;r--){const e=t._pointLabelItems[r];if(!e.visible)continue;const o=i.setContext(t.getPointLabelContext(r));go(n,o,e);const a=xn(o.font),{x:s,y:l,textAlign:c}=e;Ne(n,t._pointLabels[r],s,l+a.lineHeight/2,a,{color:o.color,textAlign:c,textBaseline:"middle"})}}(this,o),i.display&&this.ticks.forEach(((t,e)=>{if(0!==e||0===e&&this.min<0){s=this.getDistanceFromCenterForValue(t.value);const n=this.getContext(e),a=i.setContext(n),l=r.setContext(n);!function(t,e,n,i,r){const o=t.ctx,a=e.circular,{color:s,lineWidth:l}=e;!a&&!i||!s||!l||n<0||(o.save(),o.strokeStyle=s,o.lineWidth=l,o.setLineDash(r.dash),o.lineDashOffset=r.dashOffset,o.beginPath(),mo(t,n,a,i),o.closePath(),o.stroke(),o.restore())}(this,a,s,o,l)}})),n.display){for(t.save(),a=o-1;a>=0;a--){const i=n.setContext(this.getPointLabelContext(a)),{color:r,lineWidth:o}=i;o&&r&&(t.lineWidth=o,t.strokeStyle=r,t.setLineDash(i.borderDash),t.lineDashOffset=i.borderDashOffset,s=this.getDistanceFromCenterForValue(e.ticks.reverse?this.min:this.max),l=this.getPointPosition(a,s),t.beginPath(),t.moveTo(this.xCenter,this.yCenter),t.lineTo(l.x,l.y),t.stroke())}t.restore()}}drawBorder(){}drawLabels(){const t=this.ctx,e=this.options,n=e.ticks;if(!n.display)return;const i=this.getIndexAngle(0);let r,o;t.save(),t.translate(this.xCenter,this.yCenter),t.rotate(i),t.textAlign="center",t.textBaseline="middle",this.ticks.forEach(((i,a)=>{if(0===a&&this.min>=0&&!e.reverse)return;const s=n.setContext(this.getContext(a)),l=xn(s.font);if(r=this.getDistanceFromCenterForValue(this.ticks[a].value),s.showLabelBackdrop){t.font=l.string,o=t.measureText(i.label).width,t.fillStyle=s.backdropColor;const e=bn(s.backdropPadding);t.fillRect(-o/2-e.left,-r-l.size/2-e.top,o+e.width,l.size+e.height)}Ne(t,i.label,0,-r,l,{color:s.color,strokeColor:s.textStrokeColor,strokeWidth:s.textStrokeWidth})})),t.restore()}drawTitle(){}}const yo={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},bo=Object.keys(yo);function xo(t,e){return t-e}function _o(t,e){if(i(e))return null;const n=t._adapter,{parser:r,round:o,isoWeekday:s}=t._parseOpts;let l=e;return"function"==typeof r&&(l=r(l)),a(l)||(l="string"==typeof r?n.parse(l,r):n.parse(l)),null===l?null:(o&&(l="week"!==o||!H(s)&&!0!==s?n.startOf(l,o):n.startOf(l,"isoWeek",s)),+l)}function wo(t,e,n,i){const r=bo.length;for(let o=bo.indexOf(t);o<r-1;++o){const t=yo[bo[o]],r=t.steps?t.steps:Number.MAX_SAFE_INTEGER;if(t.common&&Math.ceil((n-e)/(r*t.size))<=i)return bo[o]}return bo[r-1]}function So(t,e,n){if(n){if(n.length){const{lo:i,hi:r}=et(n,e);t[n[i]>=e?n[i]:n[r]]=!0}}else t[e]=!0}function Co(t,e,n){const i=[],r={},o=e.length;let a,s;for(a=0;a<o;++a)s=e[a],r[s]=a,i.push({value:s,major:!1});return 0!==o&&n?function(t,e,n,i){const r=t._adapter,o=+r.startOf(e[0].value,i),a=e[e.length-1].value;let s,l;for(s=o;s<=a;s=+r.add(s,1,i))l=n[s],l>=0&&(e[l].major=!0);return e}(t,i,r,n):i}class ko extends Xi{static id="time";static defaults={bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}};constructor(t){super(t),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(t,e={}){const n=t.time||(t.time={}),i=this._adapter=new Cr._date(t.adapters.date);i.init(e),y(n.displayFormats,i.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(t),this._normalized=e.normalized}parse(t,e){return void 0===t?null:_o(this,t)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const t=this.options,e=this._adapter,n=t.time.unit||"day";let{min:i,max:r,minDefined:o,maxDefined:s}=this.getUserBounds();function l(t){o||isNaN(t.min)||(i=Math.min(i,t.min)),s||isNaN(t.max)||(r=Math.max(r,t.max))}o&&s||(l(this._getLabelBounds()),"ticks"===t.bounds&&"labels"===t.ticks.source||l(this.getMinMax(!1))),i=a(i)&&!isNaN(i)?i:+e.startOf(Date.now(),n),r=a(r)&&!isNaN(r)?r:+e.endOf(Date.now(),n)+1,this.min=Math.min(i,r-1),this.max=Math.max(i+1,r)}_getLabelBounds(){const t=this.getLabelTimestamps();let e=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return t.length&&(e=t[0],n=t[t.length-1]),{min:e,max:n}}buildTicks(){const t=this.options,e=t.time,n=t.ticks,i="labels"===n.source?this.getLabelTimestamps():this._generate();"ticks"===t.bounds&&i.length&&(this.min=this._userMin||i[0],this.max=this._userMax||i[i.length-1]);const r=this.min,o=rt(i,r,this.max);return this._unit=e.unit||(n.autoSkip?wo(e.minUnit,this.min,this.max,this._getLabelCapacity(r)):function(t,e,n,i,r){for(let o=bo.length-1;o>=bo.indexOf(n);o--){const n=bo[o];if(yo[n].common&&t._adapter.diff(r,i,n)>=e-1)return n}return bo[n?bo.indexOf(n):0]}(this,o.length,e.minUnit,this.min,this.max)),this._majorUnit=n.major.enabled&&"year"!==this._unit?function(t){for(let e=bo.indexOf(t)+1,n=bo.length;e<n;++e)if(yo[bo[e]].common)return bo[e]}(this._unit):void 0,this.initOffsets(i),t.reverse&&o.reverse(),Co(this,o,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map((t=>+t.value)))}initOffsets(t=[]){let e,n,i=0,r=0;this.options.offset&&t.length&&(e=this.getDecimalForValue(t[0]),i=1===t.length?1-e:(this.getDecimalForValue(t[1])-e)/2,n=this.getDecimalForValue(t[t.length-1]),r=1===t.length?n:(n-this.getDecimalForValue(t[t.length-2]))/2);const o=t.length<3?.5:.25;i=Q(i,0,o),r=Q(r,0,o),this._offsets={start:i,end:r,factor:1/(i+1+r)}}_generate(){const t=this._adapter,e=this.min,n=this.max,i=this.options,r=i.time,o=r.unit||wo(r.minUnit,e,n,this._getLabelCapacity(e)),a=l(i.ticks.stepSize,1),s="week"===o&&r.isoWeekday,c=H(s)||!0===s,u={};let h,d,p=e;if(c&&(p=+t.startOf(p,"isoWeek",s)),p=+t.startOf(p,c?"day":o),t.diff(n,e,o)>1e5*a)throw new Error(e+" and "+n+" are too far apart with stepSize of "+a+" "+o);const f="data"===i.ticks.source&&this.getDataTimestamps();for(h=p,d=0;h<n;h=+t.add(h,a,o),d++)So(u,h,f);return h!==n&&"ticks"!==i.bounds&&1!==d||So(u,h,f),Object.keys(u).sort(xo).map((t=>+t))}getLabelForValue(t){const e=this._adapter,n=this.options.time;return n.tooltipFormat?e.format(t,n.tooltipFormat):e.format(t,n.displayFormats.datetime)}format(t,e){const n=this.options.time.displayFormats,i=this._unit,r=e||n[i];return this._adapter.format(t,r)}_tickFormatFunction(t,e,n,i){const r=this.options,o=r.ticks.callback;if(o)return h(o,[t,e,n],this);const a=r.time.displayFormats,s=this._unit,l=this._majorUnit,c=s&&a[s],u=l&&a[l],d=n[e],p=l&&u&&d&&d.major;return this._adapter.format(t,i||(p?u:c))}generateTickLabels(t){let e,n,i;for(e=0,n=t.length;e<n;++e)i=t[e],i.label=this._tickFormatFunction(i.value,e,t)}getDecimalForValue(t){return null===t?NaN:(t-this.min)/(this.max-this.min)}getPixelForValue(t){const e=this._offsets,n=this.getDecimalForValue(t);return this.getPixelForDecimal((e.start+n)*e.factor)}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return this.min+n*(this.max-this.min)}_getLabelSize(t){const e=this.options.ticks,n=this.ctx.measureText(t).width,i=Y(this.isHorizontal()?e.maxRotation:e.minRotation),r=Math.cos(i),o=Math.sin(i),a=this._resolveTickFontOptions(0).size;return{w:n*r+a*o,h:n*o+a*r}}_getLabelCapacity(t){const e=this.options.time,n=e.displayFormats,i=n[e.unit]||n.millisecond,r=this._tickFormatFunction(t,0,Co(this,[t],this._majorUnit),i),o=this._getLabelSize(r),a=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return a>0?a:1}getDataTimestamps(){let t,e,n=this._cache.data||[];if(n.length)return n;const i=this.getMatchingVisibleMetas();if(this._normalized&&i.length)return this._cache.data=i[0].controller.getAllParsedValues(this);for(t=0,e=i.length;t<e;++t)n=n.concat(i[t].controller.getAllParsedValues(this));return this._cache.data=this.normalize(n)}getLabelTimestamps(){const t=this._cache.labels||[];let e,n;if(t.length)return t;const i=this.getLabels();for(e=0,n=i.length;e<n;++e)t.push(_o(this,i[e]));return this._cache.labels=this._normalized?t:this.normalize(t)}normalize(t){return lt(t.sort(xo))}}function Ao(t,e,n){let i,r,o,a,s=0,l=t.length-1;n?(e>=t[s].pos&&e<=t[l].pos&&({lo:s,hi:l}=nt(t,"pos",e)),({pos:i,time:o}=t[s]),({pos:r,time:a}=t[l])):(e>=t[s].time&&e<=t[l].time&&({lo:s,hi:l}=nt(t,"time",e)),({time:i,pos:o}=t[s]),({time:r,pos:a}=t[l]));const c=r-i;return c?o+(a-o)*(e-i)/c:o}var Mo=Object.freeze({__proto__:null,CategoryScale:class extends Xi{static id="category";static defaults={ticks:{callback:to}};constructor(t){super(t),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(t){const e=this._addedLabels;if(e.length){const t=this.getLabels();for(const{index:n,label:i}of e)t[n]===i&&t.splice(n,1);this._addedLabels=[]}super.init(t)}parse(t,e){if(i(t))return null;const n=this.getLabels();return((t,e)=>null===t?null:Q(Math.round(t),0,e))(e=isFinite(e)&&n[e]===t?e:function(t,e,n,i){const r=t.indexOf(e);return-1===r?((t,e,n,i)=>("string"==typeof e?(n=t.push(e)-1,i.unshift({index:n,label:e})):isNaN(e)&&(n=null),n))(t,e,n,i):r!==t.lastIndexOf(e)?n:r}(n,t,l(e,t),this._addedLabels),n.length-1)}determineDataLimits(){const{minDefined:t,maxDefined:e}=this.getUserBounds();let{min:n,max:i}=this.getMinMax(!0);"ticks"===this.options.bounds&&(t||(n=0),e||(i=this.getLabels().length-1)),this.min=n,this.max=i}buildTicks(){const t=this.min,e=this.max,n=this.options.offset,i=[];let r=this.getLabels();r=0===t&&e===r.length-1?r:r.slice(t,e+1),this._valueRange=Math.max(r.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let n=t;n<=e;n++)i.push({value:n});return i}getLabelForValue(t){return to.call(this,t)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(t){return"number"!=typeof t&&(t=this.parse(t)),null===t?NaN:this.getPixelForDecimal((t-this._startValue)/this._valueRange)}getPixelForTick(t){const e=this.ticks;return t<0||t>e.length-1?null:this.getPixelForValue(e[t].value)}getValueForPixel(t){return Math.round(this._startValue+this.getDecimalForPixel(t)*this._valueRange)}getBasePixel(){return this.bottom}},LinearScale:io,LogarithmicScale:lo,RadialLinearScale:vo,TimeScale:ko,TimeSeriesScale:class extends ko{static id="timeseries";static defaults=ko.defaults;constructor(t){super(t),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const t=this._getTimestampsForTable(),e=this._table=this.buildLookupTable(t);this._minPos=Ao(e,this.min),this._tableRange=Ao(e,this.max)-this._minPos,super.initOffsets(t)}buildLookupTable(t){const{min:e,max:n}=this,i=[],r=[];let o,a,s,l,c;for(o=0,a=t.length;o<a;++o)l=t[o],l>=e&&l<=n&&i.push(l);if(i.length<2)return[{time:e,pos:0},{time:n,pos:1}];for(o=0,a=i.length;o<a;++o)c=i[o+1],s=i[o-1],l=i[o],Math.round((c+s)/2)!==l&&r.push({time:l,pos:o/(a-1)});return r}_generate(){const t=this.min,e=this.max;let n=super.getDataTimestamps();return n.includes(t)&&n.length||n.splice(0,0,t),n.includes(e)&&1!==n.length||n.push(e),n.sort(((t,e)=>t-e))}_getTimestampsForTable(){let t=this._cache.all||[];if(t.length)return t;const e=this.getDataTimestamps(),n=this.getLabelTimestamps();return t=e.length&&n.length?this.normalize(e.concat(n)):e.length?e:n,t=this._cache.all=t,t}getDecimalForValue(t){return(Ao(this._table,t)-this._minPos)/this._tableRange}getValueForPixel(t){const e=this._offsets,n=this.getDecimalForPixel(t)/e.factor-e.end;return Ao(this._table,n*this._tableRange+this._minPos,!0)}}});const To=["rgb(54, 162, 235)","rgb(255, 99, 132)","rgb(255, 159, 64)","rgb(255, 205, 86)","rgb(75, 192, 192)","rgb(153, 102, 255)","rgb(201, 203, 207)"],Io=To.map((t=>t.replace("rgb(","rgba(").replace(")",", 0.5)")));function Eo(t){return To[t%To.length]}function Oo(t){return Io[t%Io.length]}function Do(t){let e;for(e in t)if(t[e].borderColor||t[e].backgroundColor)return!0;return!1}var Lo={id:"colors",defaults:{enabled:!0,forceOverride:!1},beforeLayout(t,e,n){if(!n.enabled)return;const{data:{datasets:i},options:r}=t.config,{elements:o}=r;if(!n.forceOverride&&(Do(i)||(a=r)&&(a.borderColor||a.backgroundColor)||o&&Do(o)))return;var a;const s=function(t){let e=0;return(n,i)=>{const r=t.getDatasetMeta(i).controller;r instanceof Lr?e=function(t,e){return t.backgroundColor=t.data.map((()=>Eo(e++))),e}(n,e):r instanceof Pr?e=function(t,e){return t.backgroundColor=t.data.map((()=>Oo(e++))),e}(n,e):r&&(e=function(t,e){return t.borderColor=Eo(e),t.backgroundColor=Oo(e),++e}(n,e))}}(t);i.forEach(s)}};function Po(t){if(t._decimated){const e=t._data;delete t._decimated,delete t._data,Object.defineProperty(t,"data",{configurable:!0,enumerable:!0,writable:!0,value:e})}}function No(t){t.data.datasets.forEach((t=>{Po(t)}))}var Ro={id:"decimation",defaults:{algorithm:"min-max",enabled:!1},beforeElementsUpdate:(t,e,n)=>{if(!n.enabled)return void No(t);const r=t.width;t.data.datasets.forEach(((e,o)=>{const{_data:a,indexAxis:s}=e,l=t.getDatasetMeta(o),c=a||e.data;if("y"===_n([s,t.options.indexAxis]))return;if(!l.controller.supportsDecimation)return;const u=t.scales[l.xAxisID];if("linear"!==u.type&&"time"!==u.type)return;if(t.options.parsing)return;let h,{start:d,count:p}=function(t,e){const n=e.length;let i,r=0;const{iScale:o}=t,{min:a,max:s,minDefined:l,maxDefined:c}=o.getUserBounds();return l&&(r=Q(nt(e,o.axis,a).lo,0,n-1)),i=c?Q(nt(e,o.axis,s).hi+1,r,n)-r:n-r,{start:r,count:i}}(l,c);if(p<=(n.threshold||4*r))Po(e);else{switch(i(a)&&(e._data=c,delete e.data,Object.defineProperty(e,"data",{configurable:!0,enumerable:!0,get:function(){return this._decimated},set:function(t){this._data=t}})),n.algorithm){case"lttb":h=function(t,e,n,i,r){const o=r.samples||i;if(o>=n)return t.slice(e,e+n);const a=[],s=(n-2)/(o-2);let l=0;const c=e+n-1;let u,h,d,p,f,g=e;for(a[l++]=t[g],u=0;u<o-2;u++){let i,r=0,o=0;const c=Math.floor((u+1)*s)+1+e,m=Math.min(Math.floor((u+2)*s)+1,n)+e,v=m-c;for(i=c;i<m;i++)r+=t[i].x,o+=t[i].y;r/=v,o/=v;const y=Math.floor(u*s)+1+e,b=Math.min(Math.floor((u+1)*s)+1,n)+e,{x:x,y:_}=t[g];for(d=p=-1,i=y;i<b;i++)p=.5*Math.abs((x-r)*(t[i].y-_)-(x-t[i].x)*(o-_)),p>d&&(d=p,h=t[i],f=i);a[l++]=h,g=f}return a[l++]=t[c],a}(c,d,p,r,n);break;case"min-max":h=function(t,e,n,r){let o,a,s,l,c,u,h,d,p,f,g=0,m=0;const v=[],y=e+n-1,b=t[e].x,x=t[y].x-b;for(o=e;o<e+n;++o){a=t[o],s=(a.x-b)/x*r,l=a.y;const e=0|s;if(e===c)l<p?(p=l,u=o):l>f&&(f=l,h=o),g=(m*g+a.x)/++m;else{const n=o-1;if(!i(u)&&!i(h)){const e=Math.min(u,h),i=Math.max(u,h);e!==d&&e!==n&&v.push({...t[e],x:g}),i!==d&&i!==n&&v.push({...t[i],x:g})}o>0&&n!==d&&v.push(t[n]),v.push(a),c=e,m=0,p=f=l,u=h=d=o}}return v}(c,d,p,r);break;default:throw new Error(`Unsupported decimation algorithm '${n.algorithm}'`)}e._decimated=h}}))},destroy(t){No(t)}};function Bo(t,e,n,i){if(i)return;let r=e[t],o=n[t];return"angle"===t&&(r=Z(r),o=Z(o)),{property:t,start:r,end:o}}function zo(t,e,n){for(;e>t;e--){const t=n[e];if(!isNaN(t.x)&&!isNaN(t.y))break}return e}function Fo(t,e,n,i){return t&&e?i(t[n],e[n]):t?t[n]:e?e[n]:0}function Vo(t,e){let n=[],i=!1;return r(t)?(i=!0,n=t):n=function(t,e){const{x:n=null,y:i=null}=t||{},r=e.points,o=[];return e.segments.forEach((({start:t,end:e})=>{e=zo(t,e,r);const a=r[t],s=r[e];null!==i?(o.push({x:a.x,y:i}),o.push({x:s.x,y:i})):null!==n&&(o.push({x:n,y:a.y}),o.push({x:n,y:s.y}))})),o}(t,e),n.length?new Xr({points:n,options:{tension:0},_loop:i,_fullLoop:i}):null}function Ho(t){return t&&!1!==t.fill}function Wo(t,e,n){let i=t[e].fill;const r=[e];let o;if(!n)return i;for(;!1!==i&&-1===r.indexOf(i);){if(!a(i))return i;if(o=t[i],!o)return!1;if(o.visible)return i;r.push(i),i=o.fill}return!1}function jo(t,e,n){const i=function(t){const e=t.options,n=e.fill;let i=l(n&&n.target,n);return void 0===i&&(i=!!e.backgroundColor),!1!==i&&null!==i&&(!0===i?"origin":i)}(t);if(o(i))return!isNaN(i.value)&&i;let r=parseFloat(i);return a(r)&&Math.floor(r)===r?function(t,e,n,i){return"-"!==t&&"+"!==t||(n=e+n),!(n===e||n<0||n>=i)&&n}(i[0],e,r,n):["origin","start","end","stack","shape"].indexOf(i)>=0&&i}function Yo(t,e,n){const i=[];for(let r=0;r<n.length;r++){const o=n[r],{first:a,last:s,point:l}=Xo(o,e,"x");if(!(!l||a&&s))if(a)i.unshift(l);else if(t.push(l),!s)break}t.push(...i)}function Xo(t,e,n){const i=t.interpolate(e,n);if(!i)return{};const r=i[n],o=t.segments,a=t.points;let s=!1,l=!1;for(let t=0;t<o.length;t++){const e=o[t],i=a[e.start][n],c=a[e.end][n];if(tt(r,i,c)){s=r===i,l=r===c;break}}return{first:s,last:l,point:i}}class Go{constructor(t){this.x=t.x,this.y=t.y,this.radius=t.radius}pathSegment(t,e,n){const{x:i,y:r,radius:o}=this;return e=e||{start:0,end:I},t.arc(i,r,o,e.end,e.start,!0),!n.bounds}interpolate(t){const{x:e,y:n,radius:i}=this,r=t.angle;return{x:e+Math.cos(r)*i,y:n+Math.sin(r)*i,angle:r}}}function qo(t){const{chart:e,fill:n,line:i}=t;if(a(n))return function(t,e){const n=t.getDatasetMeta(e);return n&&t.isDatasetVisible(e)?n.dataset:null}(e,n);if("stack"===n)return function(t){const{scale:e,index:n,line:i}=t,r=[],o=i.segments,a=i.points,s=function(t,e){const n=[],i=t.getMatchingVisibleMetas("line");for(let t=0;t<i.length;t++){const r=i[t];if(r.index===e)break;r.hidden||n.unshift(r.dataset)}return n}(e,n);s.push(Vo({x:null,y:e.bottom},i));for(let t=0;t<o.length;t++){const e=o[t];for(let t=e.start;t<=e.end;t++)Yo(r,a[t],s)}return new Xr({points:r,options:{}})}(t);if("shape"===n)return!0;const r=function(t){return(t.scale||{}).getPointPositionForValue?function(t){const{scale:e,fill:n}=t,i=e.options,r=e.getLabels().length,a=i.reverse?e.max:e.min,s=function(t,e,n){let i;return i="start"===t?n:"end"===t?e.options.reverse?e.min:e.max:o(t)?t.value:e.getBaseValue(),i}(n,e,a),l=[];if(i.grid.circular){const t=e.getPointPositionForValue(0,a);return new Go({x:t.x,y:t.y,radius:e.getDistanceFromCenterForValue(s)})}for(let t=0;t<r;++t)l.push(e.getPointPositionForValue(t,s));return l}(t):function(t){const{scale:e={},fill:n}=t,i=function(t,e){let n=null;return"start"===t?n=e.bottom:"end"===t?n=e.top:o(t)?n=e.getPixelForValue(t.value):e.getBasePixel&&(n=e.getBasePixel()),n}(n,e);if(a(i)){const t=e.isHorizontal();return{x:t?i:null,y:t?null:i}}return null}(t)}(t);return r instanceof Go?r:Vo(r,i)}function Uo(t,e,n){const i=qo(e),{line:r,scale:o,axis:a}=e,s=r.options,l=s.fill,c=s.backgroundColor,{above:u=c,below:h=c}=l||{};i&&r.points.length&&(Ie(t,n),function(t,e){const{line:n,target:i,above:r,below:o,area:a,scale:s}=e,l=n._loop?"angle":e.axis;t.save(),"x"===l&&o!==r&&($o(t,i,a.top),Zo(t,{line:n,target:i,color:r,scale:s,property:l}),t.restore(),t.save(),$o(t,i,a.bottom)),Zo(t,{line:n,target:i,color:o,scale:s,property:l}),t.restore()}(t,{line:r,target:i,above:u,below:h,area:n,scale:o,axis:a}),Ee(t))}function $o(t,e,n){const{segments:i,points:r}=e;let o=!0,a=!1;t.beginPath();for(const s of i){const{start:i,end:l}=s,c=r[i],u=r[zo(i,l,r)];o?(t.moveTo(c.x,c.y),o=!1):(t.lineTo(c.x,n),t.lineTo(c.x,c.y)),a=!!e.pathSegment(t,s,{move:a}),a?t.closePath():t.lineTo(u.x,n)}t.lineTo(e.first().x,n),t.closePath(),t.clip()}function Zo(t,e){const{line:n,target:i,property:r,color:o,scale:a}=e,s=function(t,e,n){const i=t.segments,r=t.points,o=e.points,a=[];for(const t of i){let{start:i,end:s}=t;s=zo(i,s,r);const l=Bo(n,r[i],r[s],t.loop);if(!e.segments){a.push({source:t,target:l,start:r[i],end:r[s]});continue}const c=En(e,l);for(const e of c){const i=Bo(n,o[e.start],o[e.end],e.loop),s=In(t,r,i);for(const t of s)a.push({source:t,target:e,start:{[n]:Fo(l,i,"start",Math.max)},end:{[n]:Fo(l,i,"end",Math.min)}})}}return a}(n,i,r);for(const{source:e,target:l,start:c,end:u}of s){const{style:{backgroundColor:s=o}={}}=e,h=!0!==i;t.save(),t.fillStyle=s,Ko(t,a,h&&Bo(r,c,u)),t.beginPath();const d=!!n.pathSegment(t,e);let p;if(h){d?t.closePath():Qo(t,i,u,r);const e=!!i.pathSegment(t,l,{move:d,reverse:!0});p=d&&e,p||Qo(t,i,c,r)}t.closePath(),t.fill(p?"evenodd":"nonzero"),t.restore()}}function Ko(t,e,n){const{top:i,bottom:r}=e.chart.chartArea,{property:o,start:a,end:s}=n||{};"x"===o&&(t.beginPath(),t.rect(a,i,s-a,r-i),t.clip())}function Qo(t,e,n,i){const r=e.interpolate(n,i);r&&t.lineTo(r.x,r.y)}var Jo={id:"filler",afterDatasetsUpdate(t,e,n){const i=(t.data.datasets||[]).length,r=[];let o,a,s,l;for(a=0;a<i;++a)o=t.getDatasetMeta(a),s=o.dataset,l=null,s&&s.options&&s instanceof Xr&&(l={visible:t.isDatasetVisible(a),index:a,fill:jo(s,a,i),chart:t,axis:o.controller.options.indexAxis,scale:o.vScale,line:s}),o.$filler=l,r.push(l);for(a=0;a<i;++a)l=r[a],l&&!1!==l.fill&&(l.fill=Wo(r,a,n.propagate))},beforeDraw(t,e,n){const i="beforeDraw"===n.drawTime,r=t.getSortedVisibleDatasetMetas(),o=t.chartArea;for(let e=r.length-1;e>=0;--e){const n=r[e].$filler;n&&(n.line.updateControlPoints(o,n.axis),i&&n.fill&&Uo(t.ctx,n,o))}},beforeDatasetsDraw(t,e,n){if("beforeDatasetsDraw"!==n.drawTime)return;const i=t.getSortedVisibleDatasetMetas();for(let e=i.length-1;e>=0;--e){const n=i[e].$filler;Ho(n)&&Uo(t.ctx,n,t.chartArea)}},beforeDatasetDraw(t,e,n){const i=e.meta.$filler;Ho(i)&&"beforeDatasetDraw"===n.drawTime&&Uo(t.ctx,i,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const ta=(t,e)=>{let{boxHeight:n=e,boxWidth:i=e}=t;return t.usePointStyle&&(n=Math.min(n,e),i=t.pointStyleWidth||Math.min(i,e)),{boxWidth:i,boxHeight:n,itemHeight:Math.max(e,n)}};class ea extends Ni{constructor(t){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e,n){this.maxWidth=t,this.maxHeight=e,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const t=this.options.labels||{};let e=h(t.generateLabels,[this.chart],this)||[];t.filter&&(e=e.filter((e=>t.filter(e,this.chart.data)))),t.sort&&(e=e.sort(((e,n)=>t.sort(e,n,this.chart.data)))),this.options.reverse&&e.reverse(),this.legendItems=e}fit(){const{options:t,ctx:e}=this;if(!t.display)return void(this.width=this.height=0);const n=t.labels,i=xn(n.font),r=i.size,o=this._computeTitleHeight(),{boxWidth:a,itemHeight:s}=ta(n,r);let l,c;e.font=i.string,this.isHorizontal()?(l=this.maxWidth,c=this._fitRows(o,r,a,s)+10):(c=this.maxHeight,l=this._fitCols(o,i,a,s)+10),this.width=Math.min(l,t.maxWidth||this.maxWidth),this.height=Math.min(c,t.maxHeight||this.maxHeight)}_fitRows(t,e,n,i){const{ctx:r,maxWidth:o,options:{labels:{padding:a}}}=this,s=this.legendHitBoxes=[],l=this.lineWidths=[0],c=i+a;let u=t;r.textAlign="left",r.textBaseline="middle";let h=-1,d=-c;return this.legendItems.forEach(((t,p)=>{const f=n+e/2+r.measureText(t.text).width;(0===p||l[l.length-1]+f+2*a>o)&&(u+=c,l[l.length-(p>0?0:1)]=0,d+=c,h++),s[p]={left:0,top:d,row:h,width:f,height:i},l[l.length-1]+=f+a})),u}_fitCols(t,e,n,i){const{ctx:r,maxHeight:o,options:{labels:{padding:a}}}=this,s=this.legendHitBoxes=[],l=this.columnSizes=[],c=o-t;let u=a,h=0,d=0,p=0,f=0;return this.legendItems.forEach(((t,o)=>{const{itemWidth:g,itemHeight:m}=function(t,e,n,i,r){const o=function(t,e,n,i){let r=t.text;return r&&"string"!=typeof r&&(r=r.reduce(((t,e)=>t.length>e.length?t:e))),e+n.size/2+i.measureText(r).width}(i,t,e,n),a=function(t,e,n){let i=t;return"string"!=typeof e.text&&(i=na(e,n)),i}(r,i,e.lineHeight);return{itemWidth:o,itemHeight:a}}(n,e,r,t,i);o>0&&d+m+2*a>c&&(u+=h+a,l.push({width:h,height:d}),p+=h+a,f++,h=d=0),s[o]={left:p,top:d,col:f,width:g,height:m},h=Math.max(h,g),d+=m+a})),u+=h,l.push({width:h,height:d}),u}adjustHitBoxes(){if(!this.options.display)return;const t=this._computeTitleHeight(),{legendHitBoxes:e,options:{align:n,labels:{padding:i},rtl:r}}=this,o=Cn(r,this.left,this.width);if(this.isHorizontal()){let r=0,a=pt(n,this.left+i,this.right-this.lineWidths[r]);for(const s of e)r!==s.row&&(r=s.row,a=pt(n,this.left+i,this.right-this.lineWidths[r])),s.top+=this.top+t+i,s.left=o.leftForLtr(o.x(a),s.width),a+=s.width+i}else{let r=0,a=pt(n,this.top+t+i,this.bottom-this.columnSizes[r].height);for(const s of e)s.col!==r&&(r=s.col,a=pt(n,this.top+t+i,this.bottom-this.columnSizes[r].height)),s.top=a,s.left+=this.left+i,s.left=o.leftForLtr(o.x(s.left),s.width),a+=s.height+i}}isHorizontal(){return"top"===this.options.position||"bottom"===this.options.position}draw(){if(this.options.display){const t=this.ctx;Ie(t,this),this._draw(),Ee(t)}}_draw(){const{options:t,columnSizes:e,lineWidths:n,ctx:i}=this,{align:r,labels:o}=t,a=se.color,s=Cn(t.rtl,this.left,this.width),c=xn(o.font),{padding:u}=o,h=c.size,d=h/2;let p;this.drawTitle(),i.textAlign=s.textAlign("left"),i.textBaseline="middle",i.lineWidth=.5,i.font=c.string;const{boxWidth:f,boxHeight:g,itemHeight:m}=ta(o,h),v=this.isHorizontal(),y=this._computeTitleHeight();p=v?{x:pt(r,this.left+u,this.right-n[0]),y:this.top+u+y,line:0}:{x:this.left+u,y:pt(r,this.top+y+u,this.bottom-e[0].height),line:0},kn(this.ctx,t.textDirection);const b=m+u;this.legendItems.forEach(((x,_)=>{i.strokeStyle=x.fontColor,i.fillStyle=x.fontColor;const w=i.measureText(x.text).width,S=s.textAlign(x.textAlign||(x.textAlign=o.textAlign)),C=f+d+w;let k=p.x,A=p.y;if(s.setWidth(this.width),v?_>0&&k+C+u>this.right&&(A=p.y+=b,p.line++,k=p.x=pt(r,this.left+u,this.right-n[p.line])):_>0&&A+b>this.bottom&&(k=p.x=k+e[p.line].width+u,p.line++,A=p.y=pt(r,this.top+y+u,this.bottom-e[p.line].height)),function(t,e,n){if(isNaN(f)||f<=0||isNaN(g)||g<0)return;i.save();const r=l(n.lineWidth,1);if(i.fillStyle=l(n.fillStyle,a),i.lineCap=l(n.lineCap,"butt"),i.lineDashOffset=l(n.lineDashOffset,0),i.lineJoin=l(n.lineJoin,"miter"),i.lineWidth=r,i.strokeStyle=l(n.strokeStyle,a),i.setLineDash(l(n.lineDash,[])),o.usePointStyle){const a={radius:g*Math.SQRT2/2,pointStyle:n.pointStyle,rotation:n.rotation,borderWidth:r},l=s.xPlus(t,f/2);Me(i,a,l,e+d,o.pointStyleWidth&&f)}else{const o=e+Math.max((h-g)/2,0),a=s.leftForLtr(t,f),l=yn(n.borderRadius);i.beginPath(),Object.values(l).some((t=>0!==t))?Re(i,{x:a,y:o,w:f,h:g,radius:l}):i.rect(a,o,f,g),i.fill(),0!==r&&i.stroke()}i.restore()}(s.x(k),A,x),k=ft(S,k+f+d,v?k+C:this.right,t.rtl),function(t,e,n){Ne(i,n.text,t,e+m/2,c,{strikethrough:n.hidden,textAlign:s.textAlign(n.textAlign)})}(s.x(k),A,x),v)p.x+=C+u;else if("string"!=typeof x.text){const t=c.lineHeight;p.y+=na(x,t)+u}else p.y+=b})),An(this.ctx,t.textDirection)}drawTitle(){const t=this.options,e=t.title,n=xn(e.font),i=bn(e.padding);if(!e.display)return;const r=Cn(t.rtl,this.left,this.width),o=this.ctx,a=e.position,s=n.size/2,l=i.top+s;let c,u=this.left,h=this.width;if(this.isHorizontal())h=Math.max(...this.lineWidths),c=this.top+l,u=pt(t.align,u,this.right-h);else{const e=this.columnSizes.reduce(((t,e)=>Math.max(t,e.height)),0);c=l+pt(t.align,this.top,this.bottom-e-t.labels.padding-this._computeTitleHeight())}const d=pt(a,u,u+h);o.textAlign=r.textAlign(dt(a)),o.textBaseline="middle",o.strokeStyle=e.color,o.fillStyle=e.color,o.font=n.string,Ne(o,e.text,d,c,n)}_computeTitleHeight(){const t=this.options.title,e=xn(t.font),n=bn(t.padding);return t.display?e.lineHeight+n.height:0}_getLegendItemAt(t,e){let n,i,r;if(tt(t,this.left,this.right)&&tt(e,this.top,this.bottom))for(r=this.legendHitBoxes,n=0;n<r.length;++n)if(i=r[n],tt(t,i.left,i.left+i.width)&&tt(e,i.top,i.top+i.height))return this.legendItems[n];return null}handleEvent(t){const e=this.options;if(!function(t,e){return!("mousemove"!==t&&"mouseout"!==t||!e.onHover&&!e.onLeave)||!(!e.onClick||"click"!==t&&"mouseup"!==t)}(t.type,e))return;const n=this._getLegendItemAt(t.x,t.y);if("mousemove"===t.type||"mouseout"===t.type){const o=this._hoveredItem,a=(r=n,null!==(i=o)&&null!==r&&i.datasetIndex===r.datasetIndex&&i.index===r.index);o&&!a&&h(e.onLeave,[t,o,this],this),this._hoveredItem=n,n&&!a&&h(e.onHover,[t,n,this],this)}else n&&h(e.onClick,[t,n,this],this);var i,r}}function na(t,e){return e*(t.text?t.text.length:0)}var ia={id:"legend",_element:ea,start(t,e,n){const i=t.legend=new ea({ctx:t.ctx,options:n,chart:t});Jn.configure(t,i,n),Jn.addBox(t,i)},stop(t){Jn.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,n){const i=t.legend;Jn.configure(t,i,n),i.options=n},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,n){const i=e.datasetIndex,r=n.chart;r.isDatasetVisible(i)?(r.hide(i),e.hidden=!0):(r.show(i),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:n,pointStyle:i,textAlign:r,color:o,useBorderRadius:a,borderRadius:s}}=t.legend.options;return t._getSortedDatasetMetas().map((t=>{const l=t.controller.getStyle(n?0:void 0),c=bn(l.borderWidth);return{text:e[t.index].label,fillStyle:l.backgroundColor,fontColor:o,hidden:!t.visible,lineCap:l.borderCapStyle,lineDash:l.borderDash,lineDashOffset:l.borderDashOffset,lineJoin:l.borderJoinStyle,lineWidth:(c.width+c.height)/4,strokeStyle:l.borderColor,pointStyle:i||l.pointStyle,rotation:l.rotation,textAlign:r||l.textAlign,borderRadius:a&&(s||l.borderRadius),datasetIndex:t.index}}),this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class ra extends Ni{constructor(t){super(),this.chart=t.chart,this.options=t.options,this.ctx=t.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(t,e){const n=this.options;if(this.left=0,this.top=0,!n.display)return void(this.width=this.height=this.right=this.bottom=0);this.width=this.right=t,this.height=this.bottom=e;const i=r(n.text)?n.text.length:1;this._padding=bn(n.padding);const o=i*xn(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=o:this.width=o}isHorizontal(){const t=this.options.position;return"top"===t||"bottom"===t}_drawArgs(t){const{top:e,left:n,bottom:i,right:r,options:o}=this,a=o.align;let s,l,c,u=0;return this.isHorizontal()?(l=pt(a,n,r),c=e+t,s=r-n):("left"===o.position?(l=n+t,c=pt(a,i,e),u=-.5*T):(l=r-t,c=pt(a,e,i),u=.5*T),s=i-e),{titleX:l,titleY:c,maxWidth:s,rotation:u}}draw(){const t=this.ctx,e=this.options;if(!e.display)return;const n=xn(e.font),i=n.lineHeight/2+this._padding.top,{titleX:r,titleY:o,maxWidth:a,rotation:s}=this._drawArgs(i);Ne(t,e.text,0,0,n,{color:e.color,maxWidth:a,rotation:s,textAlign:dt(e.align),textBaseline:"middle",translation:[r,o]})}}var oa={id:"title",_element:ra,start(t,e,n){!function(t,e){const n=new ra({ctx:t.ctx,options:e,chart:t});Jn.configure(t,n,e),Jn.addBox(t,n),t.titleBlock=n}(t,n)},stop(t){const e=t.titleBlock;Jn.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,n){const i=t.titleBlock;Jn.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const aa=new WeakMap;var sa={id:"subtitle",start(t,e,n){const i=new ra({ctx:t.ctx,options:n,chart:t});Jn.configure(t,i,n),Jn.addBox(t,i),aa.set(t,i)},stop(t){Jn.removeBox(t,aa.get(t)),aa.delete(t)},beforeUpdate(t,e,n){const i=aa.get(t);Jn.configure(t,i,n),i.options=n},defaults:{align:"center",display:!1,font:{weight:"normal"},fullSize:!0,padding:0,position:"top",text:"",weight:1500},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const la={average(t){if(!t.length)return!1;let e,n,i=new Set,r=0,o=0;for(e=0,n=t.length;e<n;++e){const n=t[e].element;if(n&&n.hasValue()){const t=n.tooltipPosition();i.add(t.x),r+=t.y,++o}}return{x:[...i].reduce(((t,e)=>t+e))/i.size,y:r/o}},nearest(t,e){if(!t.length)return!1;let n,i,r,o=e.x,a=e.y,s=Number.POSITIVE_INFINITY;for(n=0,i=t.length;n<i;++n){const i=t[n].element;if(i&&i.hasValue()){const t=U(e,i.getCenterPoint());t<s&&(s=t,r=i)}}if(r){const t=r.tooltipPosition();o=t.x,a=t.y}return{x:o,y:a}}};function ca(t,e){return e&&(r(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function ua(t){return("string"==typeof t||t instanceof String)&&t.indexOf("\n")>-1?t.split("\n"):t}function ha(t,e){const{element:n,datasetIndex:i,index:r}=e,o=t.getDatasetMeta(i).controller,{label:a,value:s}=o.getLabelAndValue(r);return{chart:t,label:a,parsed:o.getParsed(r),raw:t.data.datasets[i].data[r],formattedValue:s,dataset:o.getDataset(),dataIndex:r,datasetIndex:i,element:n}}function da(t,e){const n=t.chart.ctx,{body:i,footer:r,title:o}=t,{boxWidth:a,boxHeight:s}=e,l=xn(e.bodyFont),c=xn(e.titleFont),u=xn(e.footerFont),h=o.length,p=r.length,f=i.length,g=bn(e.padding);let m=g.height,v=0,y=i.reduce(((t,e)=>t+e.before.length+e.lines.length+e.after.length),0);y+=t.beforeBody.length+t.afterBody.length,h&&(m+=h*c.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),y&&(m+=f*(e.displayColors?Math.max(s,l.lineHeight):l.lineHeight)+(y-f)*l.lineHeight+(y-1)*e.bodySpacing),p&&(m+=e.footerMarginTop+p*u.lineHeight+(p-1)*e.footerSpacing);let b=0;const x=function(t){v=Math.max(v,n.measureText(t).width+b)};return n.save(),n.font=c.string,d(t.title,x),n.font=l.string,d(t.beforeBody.concat(t.afterBody),x),b=e.displayColors?a+2+e.boxPadding:0,d(i,(t=>{d(t.before,x),d(t.lines,x),d(t.after,x)})),b=0,n.font=u.string,d(t.footer,x),n.restore(),v+=g.width,{width:v,height:m}}function pa(t,e,n,i){const{x:r,width:o}=n,{width:a,chartArea:{left:s,right:l}}=t;let c="center";return"center"===i?c=r<=(s+l)/2?"left":"right":r<=o/2?c="left":r>=a-o/2&&(c="right"),function(t,e,n,i){const{x:r,width:o}=i,a=n.caretSize+n.caretPadding;return"left"===t&&r+o+a>e.width||"right"===t&&r-o-a<0||void 0}(c,t,e,n)&&(c="center"),c}function fa(t,e,n){const i=n.yAlign||e.yAlign||function(t,e){const{y:n,height:i}=e;return n<i/2?"top":n>t.height-i/2?"bottom":"center"}(t,n);return{xAlign:n.xAlign||e.xAlign||pa(t,e,n,i),yAlign:i}}function ga(t,e,n,i){const{caretSize:r,caretPadding:o,cornerRadius:a}=t,{xAlign:s,yAlign:l}=n,c=r+o,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:p}=yn(a);let f=function(t,e){let{x:n,width:i}=t;return"right"===e?n-=i:"center"===e&&(n-=i/2),n}(e,s);const g=function(t,e,n){let{y:i,height:r}=t;return"top"===e?i+=n:i-="bottom"===e?r+n:r/2,i}(e,l,c);return"center"===l?"left"===s?f+=c:"right"===s&&(f-=c):"left"===s?f-=Math.max(u,d)+r:"right"===s&&(f+=Math.max(h,p)+r),{x:Q(f,0,i.width-e.width),y:Q(g,0,i.height-e.height)}}function ma(t,e,n){const i=bn(n.padding);return"center"===e?t.x+t.width/2:"right"===e?t.x+t.width-i.right:t.x+i.left}function va(t){return ca([],ua(t))}function ya(t,e){const n=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return n?t.override(n):t}const ba={beforeTitle:e,title(t){if(t.length>0){const e=t[0],n=e.chart.data.labels,i=n?n.length:0;if(this&&this.options&&"dataset"===this.options.mode)return e.dataset.label||"";if(e.label)return e.label;if(i>0&&e.dataIndex<i)return n[e.dataIndex]}return""},afterTitle:e,beforeBody:e,beforeLabel:e,label(t){if(this&&this.options&&"dataset"===this.options.mode)return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const n=t.formattedValue;return i(n)||(e+=n),e},labelColor(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:e.borderColor,backgroundColor:e.backgroundColor,borderWidth:e.borderWidth,borderDash:e.borderDash,borderDashOffset:e.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const e=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:e.pointStyle,rotation:e.rotation}},afterLabel:e,afterBody:e,beforeFooter:e,footer:e,afterFooter:e};function xa(t,e,n,i){const r=t[e].call(n,i);return void 0===r?ba[e].call(n,i):r}class _a extends Ni{static positioners=la;constructor(t){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=t.chart,this.options=t.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(t){this.options=t,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const t=this._cachedAnimations;if(t)return t;const e=this.chart,n=this.options.setContext(this.getContext()),i=n.enabled&&e.options.animation&&n.animations,r=new wi(this.chart,i);return i._cacheable&&(this._cachedAnimations=Object.freeze(r)),r}getContext(){return this.$context||(this.$context=(this,Sn(this.chart.getContext(),{tooltip:this,tooltipItems:this._tooltipItems,type:"tooltip"})))}getTitle(t,e){const{callbacks:n}=e,i=xa(n,"beforeTitle",this,t),r=xa(n,"title",this,t),o=xa(n,"afterTitle",this,t);let a=[];return a=ca(a,ua(i)),a=ca(a,ua(r)),a=ca(a,ua(o)),a}getBeforeBody(t,e){return va(xa(e.callbacks,"beforeBody",this,t))}getBody(t,e){const{callbacks:n}=e,i=[];return d(t,(t=>{const e={before:[],lines:[],after:[]},r=ya(n,t);ca(e.before,ua(xa(r,"beforeLabel",this,t))),ca(e.lines,xa(r,"label",this,t)),ca(e.after,ua(xa(r,"afterLabel",this,t))),i.push(e)})),i}getAfterBody(t,e){return va(xa(e.callbacks,"afterBody",this,t))}getFooter(t,e){const{callbacks:n}=e,i=xa(n,"beforeFooter",this,t),r=xa(n,"footer",this,t),o=xa(n,"afterFooter",this,t);let a=[];return a=ca(a,ua(i)),a=ca(a,ua(r)),a=ca(a,ua(o)),a}_createItems(t){const e=this._active,n=this.chart.data,i=[],r=[],o=[];let a,s,l=[];for(a=0,s=e.length;a<s;++a)l.push(ha(this.chart,e[a]));return t.filter&&(l=l.filter(((e,i,r)=>t.filter(e,i,r,n)))),t.itemSort&&(l=l.sort(((e,i)=>t.itemSort(e,i,n)))),d(l,(e=>{const n=ya(t.callbacks,e);i.push(xa(n,"labelColor",this,e)),r.push(xa(n,"labelPointStyle",this,e)),o.push(xa(n,"labelTextColor",this,e))})),this.labelColors=i,this.labelPointStyles=r,this.labelTextColors=o,this.dataPoints=l,l}update(t,e){const n=this.options.setContext(this.getContext()),i=this._active;let r,o=[];if(i.length){const t=la[n.position].call(this,i,this._eventPosition);o=this._createItems(n),this.title=this.getTitle(o,n),this.beforeBody=this.getBeforeBody(o,n),this.body=this.getBody(o,n),this.afterBody=this.getAfterBody(o,n),this.footer=this.getFooter(o,n);const e=this._size=da(this,n),a=Object.assign({},t,e),s=fa(this.chart,n,a),l=ga(n,a,s,this.chart);this.xAlign=s.xAlign,this.yAlign=s.yAlign,r={opacity:1,x:l.x,y:l.y,width:e.width,height:e.height,caretX:t.x,caretY:t.y}}else 0!==this.opacity&&(r={opacity:0});this._tooltipItems=o,this.$context=void 0,r&&this._resolveAnimations().update(this,r),t&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:e})}drawCaret(t,e,n,i){const r=this.getCaretPosition(t,n,i);e.lineTo(r.x1,r.y1),e.lineTo(r.x2,r.y2),e.lineTo(r.x3,r.y3)}getCaretPosition(t,e,n){const{xAlign:i,yAlign:r}=this,{caretSize:o,cornerRadius:a}=n,{topLeft:s,topRight:l,bottomLeft:c,bottomRight:u}=yn(a),{x:h,y:d}=t,{width:p,height:f}=e;let g,m,v,y,b,x;return"center"===r?(b=d+f/2,"left"===i?(g=h,m=g-o,y=b+o,x=b-o):(g=h+p,m=g+o,y=b-o,x=b+o),v=g):(m="left"===i?h+Math.max(s,c)+o:"right"===i?h+p-Math.max(l,u)-o:this.caretX,"top"===r?(y=d,b=y-o,g=m-o,v=m+o):(y=d+f,b=y+o,g=m+o,v=m-o),x=y),{x1:g,x2:m,x3:v,y1:y,y2:b,y3:x}}drawTitle(t,e,n){const i=this.title,r=i.length;let o,a,s;if(r){const l=Cn(n.rtl,this.x,this.width);for(t.x=ma(this,n.titleAlign,n),e.textAlign=l.textAlign(n.titleAlign),e.textBaseline="middle",o=xn(n.titleFont),a=n.titleSpacing,e.fillStyle=n.titleColor,e.font=o.string,s=0;s<r;++s)e.fillText(i[s],l.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+a,s+1===r&&(t.y+=n.titleMarginBottom-a)}}_drawColorBox(t,e,n,i,r){const a=this.labelColors[n],s=this.labelPointStyles[n],{boxHeight:l,boxWidth:c}=r,u=xn(r.bodyFont),h=ma(this,"left",r),d=i.x(h),p=l<u.lineHeight?(u.lineHeight-l)/2:0,f=e.y+p;if(r.usePointStyle){const e={radius:Math.min(c,l)/2,pointStyle:s.pointStyle,rotation:s.rotation,borderWidth:1},n=i.leftForLtr(d,c)+c/2,o=f+l/2;t.strokeStyle=r.multiKeyBackground,t.fillStyle=r.multiKeyBackground,Ae(t,e,n,o),t.strokeStyle=a.borderColor,t.fillStyle=a.backgroundColor,Ae(t,e,n,o)}else{t.lineWidth=o(a.borderWidth)?Math.max(...Object.values(a.borderWidth)):a.borderWidth||1,t.strokeStyle=a.borderColor,t.setLineDash(a.borderDash||[]),t.lineDashOffset=a.borderDashOffset||0;const e=i.leftForLtr(d,c),n=i.leftForLtr(i.xPlus(d,1),c-2),s=yn(a.borderRadius);Object.values(s).some((t=>0!==t))?(t.beginPath(),t.fillStyle=r.multiKeyBackground,Re(t,{x:e,y:f,w:c,h:l,radius:s}),t.fill(),t.stroke(),t.fillStyle=a.backgroundColor,t.beginPath(),Re(t,{x:n,y:f+1,w:c-2,h:l-2,radius:s}),t.fill()):(t.fillStyle=r.multiKeyBackground,t.fillRect(e,f,c,l),t.strokeRect(e,f,c,l),t.fillStyle=a.backgroundColor,t.fillRect(n,f+1,c-2,l-2))}t.fillStyle=this.labelTextColors[n]}drawBody(t,e,n){const{body:i}=this,{bodySpacing:r,bodyAlign:o,displayColors:a,boxHeight:s,boxWidth:l,boxPadding:c}=n,u=xn(n.bodyFont);let h=u.lineHeight,p=0;const f=Cn(n.rtl,this.x,this.width),g=function(n){e.fillText(n,f.x(t.x+p),t.y+h/2),t.y+=h+r},m=f.textAlign(o);let v,y,b,x,_,w,S;for(e.textAlign=o,e.textBaseline="middle",e.font=u.string,t.x=ma(this,m,n),e.fillStyle=n.bodyColor,d(this.beforeBody,g),p=a&&"right"!==m?"center"===o?l/2+c:l+2+c:0,x=0,w=i.length;x<w;++x){for(v=i[x],y=this.labelTextColors[x],e.fillStyle=y,d(v.before,g),b=v.lines,a&&b.length&&(this._drawColorBox(e,t,x,f,n),h=Math.max(u.lineHeight,s)),_=0,S=b.length;_<S;++_)g(b[_]),h=u.lineHeight;d(v.after,g)}p=0,h=u.lineHeight,d(this.afterBody,g),t.y-=r}drawFooter(t,e,n){const i=this.footer,r=i.length;let o,a;if(r){const s=Cn(n.rtl,this.x,this.width);for(t.x=ma(this,n.footerAlign,n),t.y+=n.footerMarginTop,e.textAlign=s.textAlign(n.footerAlign),e.textBaseline="middle",o=xn(n.footerFont),e.fillStyle=n.footerColor,e.font=o.string,a=0;a<r;++a)e.fillText(i[a],s.x(t.x),t.y+o.lineHeight/2),t.y+=o.lineHeight+n.footerSpacing}}drawBackground(t,e,n,i){const{xAlign:r,yAlign:o}=this,{x:a,y:s}=t,{width:l,height:c}=n,{topLeft:u,topRight:h,bottomLeft:d,bottomRight:p}=yn(i.cornerRadius);e.fillStyle=i.backgroundColor,e.strokeStyle=i.borderColor,e.lineWidth=i.borderWidth,e.beginPath(),e.moveTo(a+u,s),"top"===o&&this.drawCaret(t,e,n,i),e.lineTo(a+l-h,s),e.quadraticCurveTo(a+l,s,a+l,s+h),"center"===o&&"right"===r&&this.drawCaret(t,e,n,i),e.lineTo(a+l,s+c-p),e.quadraticCurveTo(a+l,s+c,a+l-p,s+c),"bottom"===o&&this.drawCaret(t,e,n,i),e.lineTo(a+d,s+c),e.quadraticCurveTo(a,s+c,a,s+c-d),"center"===o&&"left"===r&&this.drawCaret(t,e,n,i),e.lineTo(a,s+u),e.quadraticCurveTo(a,s,a+u,s),e.closePath(),e.fill(),i.borderWidth>0&&e.stroke()}_updateAnimationTarget(t){const e=this.chart,n=this.$animations,i=n&&n.x,r=n&&n.y;if(i||r){const n=la[t.position].call(this,this._active,this._eventPosition);if(!n)return;const o=this._size=da(this,t),a=Object.assign({},n,this._size),s=fa(e,t,a),l=ga(t,a,s,e);i._to===l.x&&r._to===l.y||(this.xAlign=s.xAlign,this.yAlign=s.yAlign,this.width=o.width,this.height=o.height,this.caretX=n.x,this.caretY=n.y,this._resolveAnimations().update(this,l))}}_willRender(){return!!this.opacity}draw(t){const e=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(e);const i={width:this.width,height:this.height},r={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const o=bn(e.padding),a=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;e.enabled&&a&&(t.save(),t.globalAlpha=n,this.drawBackground(r,t,i,e),kn(t,e.textDirection),r.y+=o.top,this.drawTitle(r,t,e),this.drawBody(r,t,e),this.drawFooter(r,t,e),An(t,e.textDirection),t.restore())}getActiveElements(){return this._active||[]}setActiveElements(t,e){const n=this._active,i=t.map((({datasetIndex:t,index:e})=>{const n=this.chart.getDatasetMeta(t);if(!n)throw new Error("Cannot find a dataset at index "+t);return{datasetIndex:t,element:n.data[e],index:e}})),r=!p(n,i),o=this._positionChanged(i,e);(r||o)&&(this._active=i,this._eventPosition=e,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(t,e,n=!0){if(e&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const i=this.options,r=this._active||[],o=this._getActiveElements(t,r,e,n),a=this._positionChanged(o,t),s=e||!p(o,r)||a;return s&&(this._active=o,(i.enabled||i.external)&&(this._eventPosition={x:t.x,y:t.y},this.update(!0,e))),s}_getActiveElements(t,e,n,i){const r=this.options;if("mouseout"===t.type)return[];if(!i)return e.filter((t=>this.chart.data.datasets[t.datasetIndex]&&void 0!==this.chart.getDatasetMeta(t.datasetIndex).controller.getParsed(t.index)));const o=this.chart.getElementsAtEventForMode(t,r.mode,r,n);return r.reverse&&o.reverse(),o}_positionChanged(t,e){const{caretX:n,caretY:i,options:r}=this,o=la[r.position].call(this,t,e);return!1!==o&&(n!==o.x||i!==o.y)}}var wa={id:"tooltip",_element:_a,positioners:la,afterInit(t,e,n){n&&(t.tooltip=new _a({chart:t,options:n}))},beforeUpdate(t,e,n){t.tooltip&&t.tooltip.initialize(n)},reset(t,e,n){t.tooltip&&t.tooltip.initialize(n)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const n={tooltip:e};if(!1===t.notifyPlugins("beforeTooltipDraw",{...n,cancelable:!0}))return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",n)}},afterEvent(t,e){if(t.tooltip){const n=e.replay;t.tooltip.handleEvent(e.event,n,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:ba},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>"filter"!==t&&"itemSort"!==t&&"external"!==t,_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};return xr.register(Nr,Mo,Jr,t),xr.helpers={...Nn},xr._adapters=Cr,xr.Animation=_i,xr.Animations=wi,xr.animator=vt,xr.controllers=qi.controllers.items,xr.DatasetController=Pi,xr.Element=Ni,xr.elements=Jr,xr.Interaction=Hn,xr.layouts=Jn,xr.platforms=yi,xr.Scale=Xi,xr.Ticks=ne,Object.assign(xr,Nr,Mo,Jr,t,yi),xr.Chart=xr,"undefined"!=typeof window&&(window.Chart=xr),xr})),function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e((t="undefined"!=typeof globalThis?globalThis:t||self).echarts={})}(this,(function(t){"use strict";
/*! *****************************************************************************
    Copyright (c) Microsoft Corporation.

    Permission to use, copy, modify, and/or distribute this software for any
    purpose with or without fee is hereby granted.

    THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
    REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
    AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
    INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
    LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
    OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
    PERFORMANCE OF THIS SOFTWARE.
    ***************************************************************************** */var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])},e(t,n)};function n(t,n){if("function"!=typeof n&&null!==n)throw new TypeError("Class extends value "+String(n)+" is not a constructor or null");function i(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}var i=function(){this.firefox=!1,this.ie=!1,this.edge=!1,this.newEdge=!1,this.weChat=!1},r=new function(){this.browser=new i,this.node=!1,this.wxa=!1,this.worker=!1,this.svgSupported=!1,this.touchEventsSupported=!1,this.pointerEventsSupported=!1,this.domSupported=!1,this.transformSupported=!1,this.transform3dSupported=!1,this.hasGlobalWindow="undefined"!=typeof window};"object"==typeof wx&&"function"==typeof wx.getSystemInfoSync?(r.wxa=!0,r.touchEventsSupported=!0):"undefined"==typeof document&&"undefined"!=typeof self?r.worker=!0:"undefined"==typeof navigator||0===navigator.userAgent.indexOf("Node.js")?(r.node=!0,r.svgSupported=!0):function(t,e){var n=e.browser,i=t.match(/Firefox\/([\d.]+)/),r=t.match(/MSIE\s([\d.]+)/)||t.match(/Trident\/.+?rv:(([\d.]+))/),o=t.match(/Edge?\/([\d.]+)/),a=/micromessenger/i.test(t);i&&(n.firefox=!0,n.version=i[1]),r&&(n.ie=!0,n.version=r[1]),o&&(n.edge=!0,n.version=o[1],n.newEdge=+o[1].split(".")[0]>18),a&&(n.weChat=!0),e.svgSupported="undefined"!=typeof SVGRect,e.touchEventsSupported="ontouchstart"in window&&!n.ie&&!n.edge,e.pointerEventsSupported="onpointerdown"in window&&(n.edge||n.ie&&+n.version>=11),e.domSupported="undefined"!=typeof document;var s=document.documentElement.style;e.transform3dSupported=(n.ie&&"transition"in s||n.edge||"WebKitCSSMatrix"in window&&"m11"in new WebKitCSSMatrix||"MozPerspective"in s)&&!("OTransition"in s),e.transformSupported=e.transform3dSupported||n.ie&&+n.version>=9}(navigator.userAgent,r);var o,a,s="sans-serif",l="12px "+s,c=function(t){var e={};if("undefined"==typeof JSON)return e;for(var n=0;n<t.length;n++){var i=String.fromCharCode(n+32),r=(t.charCodeAt(n)-20)/100;e[i]=r}return e}("007LLmW'55;N0500LLLLLLLLLL00NNNLzWW\\\\WQb\\0FWLg\\bWb\\WQ\\WrWWQ000CL5LLFLL0LL**F*gLLLL5F0LF\\FFF5.5N"),u={createCanvas:function(){return"undefined"!=typeof document&&document.createElement("canvas")},measureText:function(t,e){if(!o){var n=u.createCanvas();o=n&&n.getContext("2d")}if(o)return a!==e&&(a=o.font=e||l),o.measureText(t);t=t||"";var i=/(\d+)px/.exec(e=e||l),r=i&&+i[1]||12,s=0;if(e.indexOf("mono")>=0)s=r*t.length;else for(var h=0;h<t.length;h++){var d=c[t[h]];s+=null==d?r:d*r}return{width:s}},loadImage:function(t,e,n){var i=new Image;return i.onload=e,i.onerror=n,i.src=t,i}};function h(t){for(var e in u)t[e]&&(u[e]=t[e])}var d=z(["Function","RegExp","Date","Error","CanvasGradient","CanvasPattern","Image","Canvas"],(function(t,e){return t["[object "+e+"]"]=!0,t}),{}),p=z(["Int8","Uint8","Uint8Clamped","Int16","Uint16","Int32","Uint32","Float32","Float64"],(function(t,e){return t["[object "+e+"Array]"]=!0,t}),{}),f=Object.prototype.toString,g=Array.prototype,m=g.forEach,v=g.filter,y=g.slice,b=g.map,x=function(){}.constructor,_=x?x.prototype:null,w="__proto__",S=2311;function C(){return S++}function k(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];"undefined"!=typeof console&&console.error.apply(console,t)}function A(t){if(null==t||"object"!=typeof t)return t;var e=t,n=f.call(t);if("[object Array]"===n){if(!dt(t)){e=[];for(var i=0,r=t.length;i<r;i++)e[i]=A(t[i])}}else if(p[n]){if(!dt(t)){var o=t.constructor;if(o.from)e=o.from(t);else for(e=new o(t.length),i=0,r=t.length;i<r;i++)e[i]=t[i]}}else if(!d[n]&&!dt(t)&&!Q(t))for(var a in e={},t)t.hasOwnProperty(a)&&a!==w&&(e[a]=A(t[a]));return e}function M(t,e,n){if(!$(e)||!$(t))return n?A(e):t;for(var i in e)if(e.hasOwnProperty(i)&&i!==w){var r=t[i],o=e[i];!$(o)||!$(r)||Y(o)||Y(r)||Q(o)||Q(r)||Z(o)||Z(r)||dt(o)||dt(r)?!n&&i in t||(t[i]=A(e[i])):M(r,o,n)}return t}function T(t,e){for(var n=t[0],i=1,r=t.length;i<r;i++)n=M(n,t[i],e);return n}function I(t,e){if(Object.assign)Object.assign(t,e);else for(var n in e)e.hasOwnProperty(n)&&n!==w&&(t[n]=e[n]);return t}function E(t,e,n){for(var i=H(e),r=0;r<i.length;r++){var o=i[r];(n?null!=e[o]:null==t[o])&&(t[o]=e[o])}return t}var O=u.createCanvas;function D(t,e){if(t){if(t.indexOf)return t.indexOf(e);for(var n=0,i=t.length;n<i;n++)if(t[n]===e)return n}return-1}function L(t,e){var n=t.prototype;function i(){}for(var r in i.prototype=e.prototype,t.prototype=new i,n)n.hasOwnProperty(r)&&(t.prototype[r]=n[r]);t.prototype.constructor=t,t.superClass=e}function P(t,e,n){if(t="prototype"in t?t.prototype:t,e="prototype"in e?e.prototype:e,Object.getOwnPropertyNames)for(var i=Object.getOwnPropertyNames(e),r=0;r<i.length;r++){var o=i[r];"constructor"!==o&&(n?null!=e[o]:null==t[o])&&(t[o]=e[o])}else E(t,e,n)}function N(t){return!!t&&"string"!=typeof t&&"number"==typeof t.length}function R(t,e,n){if(t&&e)if(t.forEach&&t.forEach===m)t.forEach(e,n);else if(t.length===+t.length)for(var i=0,r=t.length;i<r;i++)e.call(n,t[i],i,t);else for(var o in t)t.hasOwnProperty(o)&&e.call(n,t[o],o,t)}function B(t,e,n){if(!t)return[];if(!e)return at(t);if(t.map&&t.map===b)return t.map(e,n);for(var i=[],r=0,o=t.length;r<o;r++)i.push(e.call(n,t[r],r,t));return i}function z(t,e,n,i){if(t&&e){for(var r=0,o=t.length;r<o;r++)n=e.call(i,n,t[r],r,t);return n}}function F(t,e,n){if(!t)return[];if(!e)return at(t);if(t.filter&&t.filter===v)return t.filter(e,n);for(var i=[],r=0,o=t.length;r<o;r++)e.call(n,t[r],r,t)&&i.push(t[r]);return i}function V(t,e,n){if(t&&e)for(var i=0,r=t.length;i<r;i++)if(e.call(n,t[i],i,t))return t[i]}function H(t){if(!t)return[];if(Object.keys)return Object.keys(t);var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e}var W=_&&X(_.bind)?_.call.bind(_.bind):function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];return function(){return t.apply(e,n.concat(y.call(arguments)))}};function j(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return function(){return t.apply(this,e.concat(y.call(arguments)))}}function Y(t){return Array.isArray?Array.isArray(t):"[object Array]"===f.call(t)}function X(t){return"function"==typeof t}function G(t){return"string"==typeof t}function q(t){return"[object String]"===f.call(t)}function U(t){return"number"==typeof t}function $(t){var e=typeof t;return"function"===e||!!t&&"object"===e}function Z(t){return!!d[f.call(t)]}function K(t){return!!p[f.call(t)]}function Q(t){return"object"==typeof t&&"number"==typeof t.nodeType&&"object"==typeof t.ownerDocument}function J(t){return null!=t.colorStops}function tt(t){return null!=t.image}function et(t){return"[object RegExp]"===f.call(t)}function nt(t){return t!=t}function it(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0,i=t.length;n<i;n++)if(null!=t[n])return t[n]}function rt(t,e){return null!=t?t:e}function ot(t,e,n){return null!=t?t:null!=e?e:n}function at(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];return y.apply(t,e)}function st(t){if("number"==typeof t)return[t,t,t,t];var e=t.length;return 2===e?[t[0],t[1],t[0],t[1]]:3===e?[t[0],t[1],t[2],t[1]]:t}function lt(t,e){if(!t)throw new Error(e)}function ct(t){return null==t?null:"function"==typeof t.trim?t.trim():t.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}var ut="__ec_primitive__";function ht(t){t[ut]=!0}function dt(t){return t[ut]}var pt=function(){function t(){this.data={}}return t.prototype.delete=function(t){var e=this.has(t);return e&&delete this.data[t],e},t.prototype.has=function(t){return this.data.hasOwnProperty(t)},t.prototype.get=function(t){return this.data[t]},t.prototype.set=function(t,e){return this.data[t]=e,this},t.prototype.keys=function(){return H(this.data)},t.prototype.forEach=function(t){var e=this.data;for(var n in e)e.hasOwnProperty(n)&&t(e[n],n)},t}(),ft="function"==typeof Map,gt=function(){function t(e){var n=Y(e);this.data=ft?new Map:new pt;var i=this;function r(t,e){n?i.set(t,e):i.set(e,t)}e instanceof t?e.each(r):e&&R(e,r)}return t.prototype.hasKey=function(t){return this.data.has(t)},t.prototype.get=function(t){return this.data.get(t)},t.prototype.set=function(t,e){return this.data.set(t,e),e},t.prototype.each=function(t,e){this.data.forEach((function(n,i){t.call(e,n,i)}))},t.prototype.keys=function(){var t=this.data.keys();return ft?Array.from(t):t},t.prototype.removeKey=function(t){this.data.delete(t)},t}();function mt(t){return new gt(t)}function vt(t,e){for(var n=new t.constructor(t.length+e.length),i=0;i<t.length;i++)n[i]=t[i];var r=t.length;for(i=0;i<e.length;i++)n[i+r]=e[i];return n}function yt(t,e){var n;if(Object.create)n=Object.create(t);else{var i=function(){};i.prototype=t,n=new i}return e&&I(n,e),n}function bt(t){var e=t.style;e.webkitUserSelect="none",e.userSelect="none",e.webkitTapHighlightColor="rgba(0,0,0,0)",e["-webkit-touch-callout"]="none"}function xt(t,e){return t.hasOwnProperty(e)}function _t(){}var wt=180/Math.PI,St=Object.freeze({__proto__:null,guid:C,logError:k,clone:A,merge:M,mergeAll:T,extend:I,defaults:E,createCanvas:O,indexOf:D,inherits:L,mixin:P,isArrayLike:N,each:R,map:B,reduce:z,filter:F,find:V,keys:H,bind:W,curry:j,isArray:Y,isFunction:X,isString:G,isStringSafe:q,isNumber:U,isObject:$,isBuiltInObject:Z,isTypedArray:K,isDom:Q,isGradientObject:J,isImagePatternObject:tt,isRegExp:et,eqNaN:nt,retrieve:it,retrieve2:rt,retrieve3:ot,slice:at,normalizeCssArray:st,assert:lt,trim:ct,setAsPrimitive:ht,isPrimitive:dt,HashMap:gt,createHashMap:mt,concatArray:vt,createObject:yt,disableUserSelect:bt,hasOwn:xt,noop:_t,RADIAN_TO_DEGREE:wt});function Ct(t,e){return null==t&&(t=0),null==e&&(e=0),[t,e]}function kt(t,e){return t[0]=e[0],t[1]=e[1],t}function At(t){return[t[0],t[1]]}function Mt(t,e,n){return t[0]=e,t[1]=n,t}function Tt(t,e,n){return t[0]=e[0]+n[0],t[1]=e[1]+n[1],t}function It(t,e,n,i){return t[0]=e[0]+n[0]*i,t[1]=e[1]+n[1]*i,t}function Et(t,e,n){return t[0]=e[0]-n[0],t[1]=e[1]-n[1],t}function Ot(t){return Math.sqrt(Lt(t))}var Dt=Ot;function Lt(t){return t[0]*t[0]+t[1]*t[1]}var Pt=Lt;function Nt(t,e,n){return t[0]=e[0]*n,t[1]=e[1]*n,t}function Rt(t,e){var n=Ot(e);return 0===n?(t[0]=0,t[1]=0):(t[0]=e[0]/n,t[1]=e[1]/n),t}function Bt(t,e){return Math.sqrt((t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1]))}var zt=Bt;function Ft(t,e){return(t[0]-e[0])*(t[0]-e[0])+(t[1]-e[1])*(t[1]-e[1])}var Vt=Ft;function Ht(t,e,n,i){return t[0]=e[0]+i*(n[0]-e[0]),t[1]=e[1]+i*(n[1]-e[1]),t}function Wt(t,e,n){var i=e[0],r=e[1];return t[0]=n[0]*i+n[2]*r+n[4],t[1]=n[1]*i+n[3]*r+n[5],t}function jt(t,e,n){return t[0]=Math.min(e[0],n[0]),t[1]=Math.min(e[1],n[1]),t}function Yt(t,e,n){return t[0]=Math.max(e[0],n[0]),t[1]=Math.max(e[1],n[1]),t}var Xt=Object.freeze({__proto__:null,create:Ct,copy:kt,clone:At,set:Mt,add:Tt,scaleAndAdd:It,sub:Et,len:Ot,length:Dt,lenSquare:Lt,lengthSquare:Pt,mul:function(t,e,n){return t[0]=e[0]*n[0],t[1]=e[1]*n[1],t},div:function(t,e,n){return t[0]=e[0]/n[0],t[1]=e[1]/n[1],t},dot:function(t,e){return t[0]*e[0]+t[1]*e[1]},scale:Nt,normalize:Rt,distance:Bt,dist:zt,distanceSquare:Ft,distSquare:Vt,negate:function(t,e){return t[0]=-e[0],t[1]=-e[1],t},lerp:Ht,applyTransform:Wt,min:jt,max:Yt}),Gt=function(t,e){this.target=t,this.topTarget=e&&e.topTarget},qt=function(){function t(t){this.handler=t,t.on("mousedown",this._dragStart,this),t.on("mousemove",this._drag,this),t.on("mouseup",this._dragEnd,this)}return t.prototype._dragStart=function(t){for(var e=t.target;e&&!e.draggable;)e=e.parent||e.__hostTarget;e&&(this._draggingTarget=e,e.dragging=!0,this._x=t.offsetX,this._y=t.offsetY,this.handler.dispatchToElement(new Gt(e,t),"dragstart",t.event))},t.prototype._drag=function(t){var e=this._draggingTarget;if(e){var n=t.offsetX,i=t.offsetY,r=n-this._x,o=i-this._y;this._x=n,this._y=i,e.drift(r,o,t),this.handler.dispatchToElement(new Gt(e,t),"drag",t.event);var a=this.handler.findHover(n,i,e).target,s=this._dropTarget;this._dropTarget=a,e!==a&&(s&&a!==s&&this.handler.dispatchToElement(new Gt(s,t),"dragleave",t.event),a&&a!==s&&this.handler.dispatchToElement(new Gt(a,t),"dragenter",t.event))}},t.prototype._dragEnd=function(t){var e=this._draggingTarget;e&&(e.dragging=!1),this.handler.dispatchToElement(new Gt(e,t),"dragend",t.event),this._dropTarget&&this.handler.dispatchToElement(new Gt(this._dropTarget,t),"drop",t.event),this._draggingTarget=null,this._dropTarget=null},t}(),Ut=function(){function t(t){t&&(this._$eventProcessor=t)}return t.prototype.on=function(t,e,n,i){this._$handlers||(this._$handlers={});var r=this._$handlers;if("function"==typeof e&&(i=n,n=e,e=null),!n||!t)return this;var o=this._$eventProcessor;null!=e&&o&&o.normalizeQuery&&(e=o.normalizeQuery(e)),r[t]||(r[t]=[]);for(var a=0;a<r[t].length;a++)if(r[t][a].h===n)return this;var s={h:n,query:e,ctx:i||this,callAtLast:n.zrEventfulCallAtLast},l=r[t].length-1,c=r[t][l];return c&&c.callAtLast?r[t].splice(l,0,s):r[t].push(s),this},t.prototype.isSilent=function(t){var e=this._$handlers;return!e||!e[t]||!e[t].length},t.prototype.off=function(t,e){var n=this._$handlers;if(!n)return this;if(!t)return this._$handlers={},this;if(e){if(n[t]){for(var i=[],r=0,o=n[t].length;r<o;r++)n[t][r].h!==e&&i.push(n[t][r]);n[t]=i}n[t]&&0===n[t].length&&delete n[t]}else delete n[t];return this},t.prototype.trigger=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!this._$handlers)return this;var i=this._$handlers[t],r=this._$eventProcessor;if(i)for(var o=e.length,a=i.length,s=0;s<a;s++){var l=i[s];if(!r||!r.filter||null==l.query||r.filter(t,l.query))switch(o){case 0:l.h.call(l.ctx);break;case 1:l.h.call(l.ctx,e[0]);break;case 2:l.h.call(l.ctx,e[0],e[1]);break;default:l.h.apply(l.ctx,e)}}return r&&r.afterTrigger&&r.afterTrigger(t),this},t.prototype.triggerWithContext=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(!this._$handlers)return this;var i=this._$handlers[t],r=this._$eventProcessor;if(i)for(var o=e.length,a=e[o-1],s=i.length,l=0;l<s;l++){var c=i[l];if(!r||!r.filter||null==c.query||r.filter(t,c.query))switch(o){case 0:c.h.call(a);break;case 1:c.h.call(a,e[0]);break;case 2:c.h.call(a,e[0],e[1]);break;default:c.h.apply(a,e.slice(1,o-1))}}return r&&r.afterTrigger&&r.afterTrigger(t),this},t}(),$t=Math.log(2);function Zt(t,e,n,i,r,o){var a=i+"-"+r,s=t.length;if(o.hasOwnProperty(a))return o[a];if(1===e){var l=Math.round(Math.log((1<<s)-1&~r)/$t);return t[n][l]}for(var c=i|1<<n,u=n+1;i&1<<u;)u++;for(var h=0,d=0,p=0;d<s;d++){var f=1<<d;f&r||(h+=(p%2?-1:1)*t[n][d]*Zt(t,e-1,u,c,r|f,o),p++)}return o[a]=h,h}function Kt(t,e){var n=[[t[0],t[1],1,0,0,0,-e[0]*t[0],-e[0]*t[1]],[0,0,0,t[0],t[1],1,-e[1]*t[0],-e[1]*t[1]],[t[2],t[3],1,0,0,0,-e[2]*t[2],-e[2]*t[3]],[0,0,0,t[2],t[3],1,-e[3]*t[2],-e[3]*t[3]],[t[4],t[5],1,0,0,0,-e[4]*t[4],-e[4]*t[5]],[0,0,0,t[4],t[5],1,-e[5]*t[4],-e[5]*t[5]],[t[6],t[7],1,0,0,0,-e[6]*t[6],-e[6]*t[7]],[0,0,0,t[6],t[7],1,-e[7]*t[6],-e[7]*t[7]]],i={},r=Zt(n,8,0,0,0,i);if(0!==r){for(var o=[],a=0;a<8;a++)for(var s=0;s<8;s++)null==o[s]&&(o[s]=0),o[s]+=((a+s)%2?-1:1)*Zt(n,7,0===a?1:0,1<<a,1<<s,i)/r*e[a];return function(t,e,n){var i=e*o[6]+n*o[7]+1;t[0]=(e*o[0]+n*o[1]+o[2])/i,t[1]=(e*o[3]+n*o[4]+o[5])/i}}}var Qt="___zrEVENTSAVED",Jt=[];function te(t,e,n,i,o){if(e.getBoundingClientRect&&r.domSupported&&!ee(e)){var a=e[Qt]||(e[Qt]={}),s=function(t,e){var n=e.markers;if(n)return n;n=e.markers=[];for(var i=["left","right"],r=["top","bottom"],o=0;o<4;o++){var a=document.createElement("div"),s=o%2,l=(o>>1)%2;a.style.cssText=["position: absolute","visibility: hidden","padding: 0","margin: 0","border-width: 0","user-select: none","width:0","height:0",i[s]+":0",r[l]+":0",i[1-s]+":auto",r[1-l]+":auto",""].join("!important;"),t.appendChild(a),n.push(a)}return n}(e,a),l=function(t,e,n){for(var i=n?"invTrans":"trans",r=e[i],o=e.srcCoords,a=[],s=[],l=!0,c=0;c<4;c++){var u=t[c].getBoundingClientRect(),h=2*c,d=u.left,p=u.top;a.push(d,p),l=l&&o&&d===o[h]&&p===o[h+1],s.push(t[c].offsetLeft,t[c].offsetTop)}return l&&r?r:(e.srcCoords=a,e[i]=n?Kt(s,a):Kt(a,s))}(s,a,o);if(l)return l(t,n,i),!0}return!1}function ee(t){return"CANVAS"===t.nodeName.toUpperCase()}var ne=/([&<>"'])/g,ie={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"};function re(t){return null==t?"":(t+"").replace(ne,(function(t,e){return ie[e]}))}var oe=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,ae=[],se=r.browser.firefox&&+r.browser.version.split(".")[0]<39;function le(t,e,n,i){return n=n||{},i?ce(t,e,n):se&&null!=e.layerX&&e.layerX!==e.offsetX?(n.zrX=e.layerX,n.zrY=e.layerY):null!=e.offsetX?(n.zrX=e.offsetX,n.zrY=e.offsetY):ce(t,e,n),n}function ce(t,e,n){if(r.domSupported&&t.getBoundingClientRect){var i=e.clientX,o=e.clientY;if(ee(t)){var a=t.getBoundingClientRect();return n.zrX=i-a.left,void(n.zrY=o-a.top)}if(te(ae,t,i,o))return n.zrX=ae[0],void(n.zrY=ae[1])}n.zrX=n.zrY=0}function ue(t){return t||window.event}function he(t,e,n){if(null!=(e=ue(e)).zrX)return e;var i=e.type;if(i&&i.indexOf("touch")>=0){var r="touchend"!==i?e.targetTouches[0]:e.changedTouches[0];r&&le(t,r,e,n)}else{le(t,e,e,n);var o=function(t){var e=t.wheelDelta;if(e)return e;var n=t.deltaX,i=t.deltaY;return null==n||null==i?e:3*(0!==i?Math.abs(i):Math.abs(n))*(i>0?-1:i<0?1:n>0?-1:1)}(e);e.zrDelta=o?o/120:-(e.detail||0)/3}var a=e.button;return null==e.which&&void 0!==a&&oe.test(e.type)&&(e.which=1&a?1:2&a?3:4&a?2:0),e}function de(t,e,n,i){t.addEventListener(e,n,i)}var pe=function(t){t.preventDefault(),t.stopPropagation(),t.cancelBubble=!0};function fe(t){return 2===t.which||3===t.which}var ge=function(){function t(){this._track=[]}return t.prototype.recognize=function(t,e,n){return this._doTrack(t,e,n),this._recognize(t)},t.prototype.clear=function(){return this._track.length=0,this},t.prototype._doTrack=function(t,e,n){var i=t.touches;if(i){for(var r={points:[],touches:[],target:e,event:t},o=0,a=i.length;o<a;o++){var s=i[o],l=le(n,s,{});r.points.push([l.zrX,l.zrY]),r.touches.push(s)}this._track.push(r)}},t.prototype._recognize=function(t){for(var e in ve)if(ve.hasOwnProperty(e)){var n=ve[e](this._track,t);if(n)return n}},t}();function me(t){var e=t[1][0]-t[0][0],n=t[1][1]-t[0][1];return Math.sqrt(e*e+n*n)}var ve={pinch:function(t,e){var n=t.length;if(n){var i,r=(t[n-1]||{}).points,o=(t[n-2]||{}).points||r;if(o&&o.length>1&&r&&r.length>1){var a=me(r)/me(o);!isFinite(a)&&(a=1),e.pinchScale=a;var s=[((i=r)[0][0]+i[1][0])/2,(i[0][1]+i[1][1])/2];return e.pinchX=s[0],e.pinchY=s[1],{type:"pinch",target:t[0].target,event:e}}}}};function ye(t){return t[0]=1,t[1]=0,t[2]=0,t[3]=1,t[4]=0,t[5]=0,t}function be(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4],t[5]=e[5],t}function xe(t,e,n){var i=e[0]*n[0]+e[2]*n[1],r=e[1]*n[0]+e[3]*n[1],o=e[0]*n[2]+e[2]*n[3],a=e[1]*n[2]+e[3]*n[3],s=e[0]*n[4]+e[2]*n[5]+e[4],l=e[1]*n[4]+e[3]*n[5]+e[5];return t[0]=i,t[1]=r,t[2]=o,t[3]=a,t[4]=s,t[5]=l,t}function _e(t,e,n){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t[4]=e[4]+n[0],t[5]=e[5]+n[1],t}function we(t,e,n,i){void 0===i&&(i=[0,0]);var r=e[0],o=e[2],a=e[4],s=e[1],l=e[3],c=e[5],u=Math.sin(n),h=Math.cos(n);return t[0]=r*h+s*u,t[1]=-r*u+s*h,t[2]=o*h+l*u,t[3]=-o*u+h*l,t[4]=h*(a-i[0])+u*(c-i[1])+i[0],t[5]=h*(c-i[1])-u*(a-i[0])+i[1],t}function Se(t,e,n){var i=n[0],r=n[1];return t[0]=e[0]*i,t[1]=e[1]*r,t[2]=e[2]*i,t[3]=e[3]*r,t[4]=e[4]*i,t[5]=e[5]*r,t}function Ce(t,e){var n=e[0],i=e[2],r=e[4],o=e[1],a=e[3],s=e[5],l=n*a-o*i;return l?(l=1/l,t[0]=a*l,t[1]=-o*l,t[2]=-i*l,t[3]=n*l,t[4]=(i*s-a*r)*l,t[5]=(o*r-n*s)*l,t):null}function ke(t){var e=[1,0,0,1,0,0];return be(e,t),e}var Ae=Object.freeze({__proto__:null,create:function(){return[1,0,0,1,0,0]},identity:ye,copy:be,mul:xe,translate:_e,rotate:we,scale:Se,invert:Ce,clone:ke}),Me=function(){function t(t,e){this.x=t||0,this.y=e||0}return t.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this},t.prototype.clone=function(){return new t(this.x,this.y)},t.prototype.set=function(t,e){return this.x=t,this.y=e,this},t.prototype.equal=function(t){return t.x===this.x&&t.y===this.y},t.prototype.add=function(t){return this.x+=t.x,this.y+=t.y,this},t.prototype.scale=function(t){this.x*=t,this.y*=t},t.prototype.scaleAndAdd=function(t,e){this.x+=t.x*e,this.y+=t.y*e},t.prototype.sub=function(t){return this.x-=t.x,this.y-=t.y,this},t.prototype.dot=function(t){return this.x*t.x+this.y*t.y},t.prototype.len=function(){return Math.sqrt(this.x*this.x+this.y*this.y)},t.prototype.lenSquare=function(){return this.x*this.x+this.y*this.y},t.prototype.normalize=function(){var t=this.len();return this.x/=t,this.y/=t,this},t.prototype.distance=function(t){var e=this.x-t.x,n=this.y-t.y;return Math.sqrt(e*e+n*n)},t.prototype.distanceSquare=function(t){var e=this.x-t.x,n=this.y-t.y;return e*e+n*n},t.prototype.negate=function(){return this.x=-this.x,this.y=-this.y,this},t.prototype.transform=function(t){if(t){var e=this.x,n=this.y;return this.x=t[0]*e+t[2]*n+t[4],this.y=t[1]*e+t[3]*n+t[5],this}},t.prototype.toArray=function(t){return t[0]=this.x,t[1]=this.y,t},t.prototype.fromArray=function(t){this.x=t[0],this.y=t[1]},t.set=function(t,e,n){t.x=e,t.y=n},t.copy=function(t,e){t.x=e.x,t.y=e.y},t.len=function(t){return Math.sqrt(t.x*t.x+t.y*t.y)},t.lenSquare=function(t){return t.x*t.x+t.y*t.y},t.dot=function(t,e){return t.x*e.x+t.y*e.y},t.add=function(t,e,n){t.x=e.x+n.x,t.y=e.y+n.y},t.sub=function(t,e,n){t.x=e.x-n.x,t.y=e.y-n.y},t.scale=function(t,e,n){t.x=e.x*n,t.y=e.y*n},t.scaleAndAdd=function(t,e,n,i){t.x=e.x+n.x*i,t.y=e.y+n.y*i},t.lerp=function(t,e,n,i){var r=1-i;t.x=r*e.x+i*n.x,t.y=r*e.y+i*n.y},t}(),Te=Math.min,Ie=Math.max,Ee=new Me,Oe=new Me,De=new Me,Le=new Me,Pe=new Me,Ne=new Me,Re=function(){function t(t,e,n,i){n<0&&(t+=n,n=-n),i<0&&(e+=i,i=-i),this.x=t,this.y=e,this.width=n,this.height=i}return t.prototype.union=function(t){var e=Te(t.x,this.x),n=Te(t.y,this.y);isFinite(this.x)&&isFinite(this.width)?this.width=Ie(t.x+t.width,this.x+this.width)-e:this.width=t.width,isFinite(this.y)&&isFinite(this.height)?this.height=Ie(t.y+t.height,this.y+this.height)-n:this.height=t.height,this.x=e,this.y=n},t.prototype.applyTransform=function(e){t.applyTransform(this,this,e)},t.prototype.calculateTransform=function(t){var e=this,n=t.width/e.width,i=t.height/e.height,r=[1,0,0,1,0,0];return _e(r,r,[-e.x,-e.y]),Se(r,r,[n,i]),_e(r,r,[t.x,t.y]),r},t.prototype.intersect=function(e,n){if(!e)return!1;e instanceof t||(e=t.create(e));var i=this,r=i.x,o=i.x+i.width,a=i.y,s=i.y+i.height,l=e.x,c=e.x+e.width,u=e.y,h=e.y+e.height,d=!(o<l||c<r||s<u||h<a);if(n){var p=1/0,f=0,g=Math.abs(o-l),m=Math.abs(c-r),v=Math.abs(s-u),y=Math.abs(h-a),b=Math.min(g,m),x=Math.min(v,y);o<l||c<r?b>f&&(f=b,g<m?Me.set(Ne,-g,0):Me.set(Ne,m,0)):b<p&&(p=b,g<m?Me.set(Pe,g,0):Me.set(Pe,-m,0)),s<u||h<a?x>f&&(f=x,v<y?Me.set(Ne,0,-v):Me.set(Ne,0,y)):b<p&&(p=b,v<y?Me.set(Pe,0,v):Me.set(Pe,0,-y))}return n&&Me.copy(n,d?Pe:Ne),d},t.prototype.contain=function(t,e){var n=this;return t>=n.x&&t<=n.x+n.width&&e>=n.y&&e<=n.y+n.height},t.prototype.clone=function(){return new t(this.x,this.y,this.width,this.height)},t.prototype.copy=function(e){t.copy(this,e)},t.prototype.plain=function(){return{x:this.x,y:this.y,width:this.width,height:this.height}},t.prototype.isFinite=function(){return isFinite(this.x)&&isFinite(this.y)&&isFinite(this.width)&&isFinite(this.height)},t.prototype.isZero=function(){return 0===this.width||0===this.height},t.create=function(e){return new t(e.x,e.y,e.width,e.height)},t.copy=function(t,e){t.x=e.x,t.y=e.y,t.width=e.width,t.height=e.height},t.applyTransform=function(e,n,i){if(i){if(i[1]<1e-5&&i[1]>-1e-5&&i[2]<1e-5&&i[2]>-1e-5){var r=i[0],o=i[3],a=i[4],s=i[5];return e.x=n.x*r+a,e.y=n.y*o+s,e.width=n.width*r,e.height=n.height*o,e.width<0&&(e.x+=e.width,e.width=-e.width),void(e.height<0&&(e.y+=e.height,e.height=-e.height))}Ee.x=De.x=n.x,Ee.y=Le.y=n.y,Oe.x=Le.x=n.x+n.width,Oe.y=De.y=n.y+n.height,Ee.transform(i),Le.transform(i),Oe.transform(i),De.transform(i),e.x=Te(Ee.x,Oe.x,De.x,Le.x),e.y=Te(Ee.y,Oe.y,De.y,Le.y);var l=Ie(Ee.x,Oe.x,De.x,Le.x),c=Ie(Ee.y,Oe.y,De.y,Le.y);e.width=l-e.x,e.height=c-e.y}else e!==n&&t.copy(e,n)},t}(),Be="silent";function ze(){pe(this.event)}var Fe=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.handler=null,e}return n(e,t),e.prototype.dispose=function(){},e.prototype.setCursor=function(){},e}(Ut),Ve=function(t,e){this.x=t,this.y=e},He=["click","dblclick","mousewheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],We=new Re(0,0,0,0),je=function(t){function e(e,n,i,r,o){var a=t.call(this)||this;return a._hovered=new Ve(0,0),a.storage=e,a.painter=n,a.painterRoot=r,a._pointerSize=o,i=i||new Fe,a.proxy=null,a.setHandlerProxy(i),a._draggingMgr=new qt(a),a}return n(e,t),e.prototype.setHandlerProxy=function(t){this.proxy&&this.proxy.dispose(),t&&(R(He,(function(e){t.on&&t.on(e,this[e],this)}),this),t.handler=this),this.proxy=t},e.prototype.mousemove=function(t){var e=t.zrX,n=t.zrY,i=Ge(this,e,n),r=this._hovered,o=r.target;o&&!o.__zr&&(o=(r=this.findHover(r.x,r.y)).target);var a=this._hovered=i?new Ve(e,n):this.findHover(e,n),s=a.target,l=this.proxy;l.setCursor&&l.setCursor(s?s.cursor:"default"),o&&s!==o&&this.dispatchToElement(r,"mouseout",t),this.dispatchToElement(a,"mousemove",t),s&&s!==o&&this.dispatchToElement(a,"mouseover",t)},e.prototype.mouseout=function(t){var e=t.zrEventControl;"only_globalout"!==e&&this.dispatchToElement(this._hovered,"mouseout",t),"no_globalout"!==e&&this.trigger("globalout",{type:"globalout",event:t})},e.prototype.resize=function(){this._hovered=new Ve(0,0)},e.prototype.dispatch=function(t,e){var n=this[t];n&&n.call(this,e)},e.prototype.dispose=function(){this.proxy.dispose(),this.storage=null,this.proxy=null,this.painter=null},e.prototype.setCursorStyle=function(t){var e=this.proxy;e.setCursor&&e.setCursor(t)},e.prototype.dispatchToElement=function(t,e,n){var i=(t=t||{}).target;if(!i||!i.silent){for(var r="on"+e,o=function(t,e,n){return{type:t,event:n,target:e.target,topTarget:e.topTarget,cancelBubble:!1,offsetX:n.zrX,offsetY:n.zrY,gestureEvent:n.gestureEvent,pinchX:n.pinchX,pinchY:n.pinchY,pinchScale:n.pinchScale,wheelDelta:n.zrDelta,zrByTouch:n.zrByTouch,which:n.which,stop:ze}}(e,t,n);i&&(i[r]&&(o.cancelBubble=!!i[r].call(i,o)),i.trigger(e,o),i=i.__hostTarget?i.__hostTarget:i.parent,!o.cancelBubble););o.cancelBubble||(this.trigger(e,o),this.painter&&this.painter.eachOtherLayer&&this.painter.eachOtherLayer((function(t){"function"==typeof t[r]&&t[r].call(t,o),t.trigger&&t.trigger(e,o)})))}},e.prototype.findHover=function(t,e,n){var i=this.storage.getDisplayList(),r=new Ve(t,e);if(Xe(i,r,t,e,n),this._pointerSize&&!r.target){for(var o=[],a=this._pointerSize,s=a/2,l=new Re(t-s,e-s,a,a),c=i.length-1;c>=0;c--){var u=i[c];u===n||u.ignore||u.ignoreCoarsePointer||u.parent&&u.parent.ignoreCoarsePointer||(We.copy(u.getBoundingRect()),u.transform&&We.applyTransform(u.transform),We.intersect(l)&&o.push(u))}if(o.length)for(var h=Math.PI/12,d=2*Math.PI,p=0;p<s;p+=4)for(var f=0;f<d;f+=h)if(Xe(o,r,t+p*Math.cos(f),e+p*Math.sin(f),n),r.target)return r}return r},e.prototype.processGesture=function(t,e){this._gestureMgr||(this._gestureMgr=new ge);var n=this._gestureMgr;"start"===e&&n.clear();var i=n.recognize(t,this.findHover(t.zrX,t.zrY,null).target,this.proxy.dom);if("end"===e&&n.clear(),i){var r=i.type;t.gestureEvent=r;var o=new Ve;o.target=i.target,this.dispatchToElement(o,r,i.event)}},e}(Ut);function Ye(t,e,n){if(t[t.rectHover?"rectContain":"contain"](e,n)){for(var i=t,r=void 0,o=!1;i;){if(i.ignoreClip&&(o=!0),!o){var a=i.getClipPath();if(a&&!a.contain(e,n))return!1}i.silent&&(r=!0),i=i.__hostTarget||i.parent}return!r||Be}return!1}function Xe(t,e,n,i,r){for(var o=t.length-1;o>=0;o--){var a=t[o],s=void 0;if(a!==r&&!a.ignore&&(s=Ye(a,n,i))&&(!e.topTarget&&(e.topTarget=a),s!==Be)){e.target=a;break}}}function Ge(t,e,n){var i=t.painter;return e<0||e>i.getWidth()||n<0||n>i.getHeight()}function qe(t,e,n,i){var r=e+1;if(r===n)return 1;if(i(t[r++],t[e])<0){for(;r<n&&i(t[r],t[r-1])<0;)r++;!function(t,e,n){for(n--;e<n;){var i=t[e];t[e++]=t[n],t[n--]=i}}(t,e,r)}else for(;r<n&&i(t[r],t[r-1])>=0;)r++;return r-e}function Ue(t,e,n,i,r){for(i===e&&i++;i<n;i++){for(var o,a=t[i],s=e,l=i;s<l;)r(a,t[o=s+l>>>1])<0?l=o:s=o+1;var c=i-s;switch(c){case 3:t[s+3]=t[s+2];case 2:t[s+2]=t[s+1];case 1:t[s+1]=t[s];break;default:for(;c>0;)t[s+c]=t[s+c-1],c--}t[s]=a}}function $e(t,e,n,i,r,o){var a=0,s=0,l=1;if(o(t,e[n+r])>0){for(s=i-r;l<s&&o(t,e[n+r+l])>0;)a=l,(l=1+(l<<1))<=0&&(l=s);l>s&&(l=s),a+=r,l+=r}else{for(s=r+1;l<s&&o(t,e[n+r-l])<=0;)a=l,(l=1+(l<<1))<=0&&(l=s);l>s&&(l=s);var c=a;a=r-l,l=r-c}for(a++;a<l;){var u=a+(l-a>>>1);o(t,e[n+u])>0?a=u+1:l=u}return l}function Ze(t,e,n,i,r,o){var a=0,s=0,l=1;if(o(t,e[n+r])<0){for(s=r+1;l<s&&o(t,e[n+r-l])<0;)a=l,(l=1+(l<<1))<=0&&(l=s);l>s&&(l=s);var c=a;a=r-l,l=r-c}else{for(s=i-r;l<s&&o(t,e[n+r+l])>=0;)a=l,(l=1+(l<<1))<=0&&(l=s);l>s&&(l=s),a+=r,l+=r}for(a++;a<l;){var u=a+(l-a>>>1);o(t,e[n+u])<0?l=u:a=u+1}return l}function Ke(t,e,n,i){n||(n=0),i||(i=t.length);var r=i-n;if(!(r<2)){var o=0;if(r<32)Ue(t,n,i,n+(o=qe(t,n,i,e)),e);else{var a=function(t,e){var n,i,r=7,o=0,a=[];function s(s){var l=n[s],c=i[s],u=n[s+1],h=i[s+1];i[s]=c+h,s===o-3&&(n[s+1]=n[s+2],i[s+1]=i[s+2]),o--;var d=Ze(t[u],t,l,c,0,e);l+=d,0!=(c-=d)&&0!==(h=$e(t[l+c-1],t,u,h,h-1,e))&&(c<=h?function(n,i,o,s){var l=0;for(l=0;l<i;l++)a[l]=t[n+l];var c=0,u=o,h=n;if(t[h++]=t[u++],0!=--s)if(1!==i){for(var d,p,f,g=r;;){d=0,p=0,f=!1;do{if(e(t[u],a[c])<0){if(t[h++]=t[u++],p++,d=0,0==--s){f=!0;break}}else if(t[h++]=a[c++],d++,p=0,1==--i){f=!0;break}}while((d|p)<g);if(f)break;do{if(0!==(d=Ze(t[u],a,c,i,0,e))){for(l=0;l<d;l++)t[h+l]=a[c+l];if(h+=d,c+=d,(i-=d)<=1){f=!0;break}}if(t[h++]=t[u++],0==--s){f=!0;break}if(0!==(p=$e(a[c],t,u,s,0,e))){for(l=0;l<p;l++)t[h+l]=t[u+l];if(h+=p,u+=p,0==(s-=p)){f=!0;break}}if(t[h++]=a[c++],1==--i){f=!0;break}g--}while(d>=7||p>=7);if(f)break;g<0&&(g=0),g+=2}if((r=g)<1&&(r=1),1===i){for(l=0;l<s;l++)t[h+l]=t[u+l];t[h+s]=a[c]}else{if(0===i)throw new Error;for(l=0;l<i;l++)t[h+l]=a[c+l]}}else{for(l=0;l<s;l++)t[h+l]=t[u+l];t[h+s]=a[c]}else for(l=0;l<i;l++)t[h+l]=a[c+l]}(l,c,u,h):function(n,i,o,s){var l=0;for(l=0;l<s;l++)a[l]=t[o+l];var c=n+i-1,u=s-1,h=o+s-1,d=0,p=0;if(t[h--]=t[c--],0!=--i)if(1!==s){for(var f=r;;){var g=0,m=0,v=!1;do{if(e(a[u],t[c])<0){if(t[h--]=t[c--],g++,m=0,0==--i){v=!0;break}}else if(t[h--]=a[u--],m++,g=0,1==--s){v=!0;break}}while((g|m)<f);if(v)break;do{if(0!=(g=i-Ze(a[u],t,n,i,i-1,e))){for(i-=g,p=1+(h-=g),d=1+(c-=g),l=g-1;l>=0;l--)t[p+l]=t[d+l];if(0===i){v=!0;break}}if(t[h--]=a[u--],1==--s){v=!0;break}if(0!=(m=s-$e(t[c],a,0,s,s-1,e))){for(s-=m,p=1+(h-=m),d=1+(u-=m),l=0;l<m;l++)t[p+l]=a[d+l];if(s<=1){v=!0;break}}if(t[h--]=t[c--],0==--i){v=!0;break}f--}while(g>=7||m>=7);if(v)break;f<0&&(f=0),f+=2}if((r=f)<1&&(r=1),1===s){for(p=1+(h-=i),d=1+(c-=i),l=i-1;l>=0;l--)t[p+l]=t[d+l];t[h]=a[u]}else{if(0===s)throw new Error;for(d=h-(s-1),l=0;l<s;l++)t[d+l]=a[l]}}else{for(p=1+(h-=i),d=1+(c-=i),l=i-1;l>=0;l--)t[p+l]=t[d+l];t[h]=a[u]}else for(d=h-(s-1),l=0;l<s;l++)t[d+l]=a[l]}(l,c,u,h))}return n=[],i=[],{mergeRuns:function(){for(;o>1;){var t=o-2;if(t>=1&&i[t-1]<=i[t]+i[t+1]||t>=2&&i[t-2]<=i[t]+i[t-1])i[t-1]<i[t+1]&&t--;else if(i[t]>i[t+1])break;s(t)}},forceMergeRuns:function(){for(;o>1;){var t=o-2;t>0&&i[t-1]<i[t+1]&&t--,s(t)}},pushRun:function(t,e){n[o]=t,i[o]=e,o+=1}}}(t,e),s=function(t){for(var e=0;t>=32;)e|=1&t,t>>=1;return t+e}(r);do{if((o=qe(t,n,i,e))<s){var l=r;l>s&&(l=s),Ue(t,n,n+l,n+o,e),o=l}a.pushRun(n,o),a.mergeRuns(),r-=o,n+=o}while(0!==r);a.forceMergeRuns()}}}R(["click","mousedown","mouseup","mousewheel","dblclick","contextmenu"],(function(t){je.prototype[t]=function(e){var n,i,r=e.zrX,o=e.zrY,a=Ge(this,r,o);if("mouseup"===t&&a||(i=(n=this.findHover(r,o)).target),"mousedown"===t)this._downEl=i,this._downPoint=[e.zrX,e.zrY],this._upEl=i;else if("mouseup"===t)this._upEl=i;else if("click"===t){if(this._downEl!==this._upEl||!this._downPoint||zt(this._downPoint,[e.zrX,e.zrY])>4)return;this._downPoint=null}this.dispatchToElement(n,t,e)}}));var Qe=!1;function Je(){Qe||(Qe=!0,console.warn("z / z2 / zlevel of displayable is invalid, which may cause unexpected errors"))}function tn(t,e){return t.zlevel===e.zlevel?t.z===e.z?t.z2-e.z2:t.z-e.z:t.zlevel-e.zlevel}var en=function(){function t(){this._roots=[],this._displayList=[],this._displayListLen=0,this.displayableSortFunc=tn}return t.prototype.traverse=function(t,e){for(var n=0;n<this._roots.length;n++)this._roots[n].traverse(t,e)},t.prototype.getDisplayList=function(t,e){e=e||!1;var n=this._displayList;return!t&&n.length||this.updateDisplayList(e),n},t.prototype.updateDisplayList=function(t){this._displayListLen=0;for(var e=this._roots,n=this._displayList,i=0,r=e.length;i<r;i++)this._updateAndAddDisplayable(e[i],null,t);n.length=this._displayListLen,Ke(n,tn)},t.prototype._updateAndAddDisplayable=function(t,e,n){if(!t.ignore||n){t.beforeUpdate(),t.update(),t.afterUpdate();var i=t.getClipPath();if(t.ignoreClip)e=null;else if(i){e=e?e.slice():[];for(var r=i,o=t;r;)r.parent=o,r.updateTransform(),e.push(r),o=r,r=r.getClipPath()}if(t.childrenRef){for(var a=t.childrenRef(),s=0;s<a.length;s++){var l=a[s];t.__dirty&&(l.__dirty|=1),this._updateAndAddDisplayable(l,e,n)}t.__dirty=0}else{var c=t;e&&e.length?c.__clipPaths=e:c.__clipPaths&&c.__clipPaths.length>0&&(c.__clipPaths=[]),isNaN(c.z)&&(Je(),c.z=0),isNaN(c.z2)&&(Je(),c.z2=0),isNaN(c.zlevel)&&(Je(),c.zlevel=0),this._displayList[this._displayListLen++]=c}var u=t.getDecalElement&&t.getDecalElement();u&&this._updateAndAddDisplayable(u,e,n);var h=t.getTextGuideLine();h&&this._updateAndAddDisplayable(h,e,n);var d=t.getTextContent();d&&this._updateAndAddDisplayable(d,e,n)}},t.prototype.addRoot=function(t){t.__zr&&t.__zr.storage===this||this._roots.push(t)},t.prototype.delRoot=function(t){if(t instanceof Array)for(var e=0,n=t.length;e<n;e++)this.delRoot(t[e]);else{var i=D(this._roots,t);i>=0&&this._roots.splice(i,1)}},t.prototype.delAllRoots=function(){this._roots=[],this._displayList=[],this._displayListLen=0},t.prototype.getRoots=function(){return this._roots},t.prototype.dispose=function(){this._displayList=null,this._roots=null},t}(),nn=r.hasGlobalWindow&&(window.requestAnimationFrame&&window.requestAnimationFrame.bind(window)||window.msRequestAnimationFrame&&window.msRequestAnimationFrame.bind(window)||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame)||function(t){return setTimeout(t,16)},rn={linear:function(t){return t},quadraticIn:function(t){return t*t},quadraticOut:function(t){return t*(2-t)},quadraticInOut:function(t){return(t*=2)<1?.5*t*t:-.5*(--t*(t-2)-1)},cubicIn:function(t){return t*t*t},cubicOut:function(t){return--t*t*t+1},cubicInOut:function(t){return(t*=2)<1?.5*t*t*t:.5*((t-=2)*t*t+2)},quarticIn:function(t){return t*t*t*t},quarticOut:function(t){return 1- --t*t*t*t},quarticInOut:function(t){return(t*=2)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2)},quinticIn:function(t){return t*t*t*t*t},quinticOut:function(t){return--t*t*t*t*t+1},quinticInOut:function(t){return(t*=2)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2)},sinusoidalIn:function(t){return 1-Math.cos(t*Math.PI/2)},sinusoidalOut:function(t){return Math.sin(t*Math.PI/2)},sinusoidalInOut:function(t){return.5*(1-Math.cos(Math.PI*t))},exponentialIn:function(t){return 0===t?0:Math.pow(1024,t-1)},exponentialOut:function(t){return 1===t?1:1-Math.pow(2,-10*t)},exponentialInOut:function(t){return 0===t?0:1===t?1:(t*=2)<1?.5*Math.pow(1024,t-1):.5*(2-Math.pow(2,-10*(t-1)))},circularIn:function(t){return 1-Math.sqrt(1-t*t)},circularOut:function(t){return Math.sqrt(1- --t*t)},circularInOut:function(t){return(t*=2)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1)},elasticIn:function(t){var e,n=.1;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=.1):e=.4*Math.asin(1/n)/(2*Math.PI),-n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4))},elasticOut:function(t){var e,n=.1;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=.1):e=.4*Math.asin(1/n)/(2*Math.PI),n*Math.pow(2,-10*t)*Math.sin((t-e)*(2*Math.PI)/.4)+1)},elasticInOut:function(t){var e,n=.1;return 0===t?0:1===t?1:(!n||n<1?(n=1,e=.1):e=.4*Math.asin(1/n)/(2*Math.PI),(t*=2)<1?n*Math.pow(2,10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4)*-.5:n*Math.pow(2,-10*(t-=1))*Math.sin((t-e)*(2*Math.PI)/.4)*.5+1)},backIn:function(t){var e=1.70158;return t*t*((e+1)*t-e)},backOut:function(t){var e=1.70158;return--t*t*((e+1)*t+e)+1},backInOut:function(t){var e=2.5949095;return(t*=2)<1?t*t*((e+1)*t-e)*.5:.5*((t-=2)*t*((e+1)*t+e)+2)},bounceIn:function(t){return 1-rn.bounceOut(1-t)},bounceOut:function(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},bounceInOut:function(t){return t<.5?.5*rn.bounceIn(2*t):.5*rn.bounceOut(2*t-1)+.5}},on=Math.pow,an=Math.sqrt,sn=1e-4,ln=an(3),cn=1/3,un=Ct(),hn=Ct(),dn=Ct();function pn(t){return t>-1e-8&&t<1e-8}function fn(t){return t>1e-8||t<-1e-8}function gn(t,e,n,i,r){var o=1-r;return o*o*(o*t+3*r*e)+r*r*(r*i+3*o*n)}function mn(t,e,n,i,r){var o=1-r;return 3*(((e-t)*o+2*(n-e)*r)*o+(i-n)*r*r)}function vn(t,e,n,i,r,o){var a=i+3*(e-n)-t,s=3*(n-2*e+t),l=3*(e-t),c=t-r,u=s*s-3*a*l,h=s*l-9*a*c,d=l*l-3*s*c,p=0;if(pn(u)&&pn(h))pn(s)?o[0]=0:(C=-l/s)>=0&&C<=1&&(o[p++]=C);else{var f=h*h-4*u*d;if(pn(f)){var g=h/u,m=-g/2;(C=-s/a+g)>=0&&C<=1&&(o[p++]=C),m>=0&&m<=1&&(o[p++]=m)}else if(f>0){var v=an(f),y=u*s+1.5*a*(-h+v),b=u*s+1.5*a*(-h-v);(C=(-s-((y=y<0?-on(-y,cn):on(y,cn))+(b=b<0?-on(-b,cn):on(b,cn))))/(3*a))>=0&&C<=1&&(o[p++]=C)}else{var x=(2*u*s-3*a*h)/(2*an(u*u*u)),_=Math.acos(x)/3,w=an(u),S=Math.cos(_),C=(-s-2*w*S)/(3*a),k=(m=(-s+w*(S+ln*Math.sin(_)))/(3*a),(-s+w*(S-ln*Math.sin(_)))/(3*a));C>=0&&C<=1&&(o[p++]=C),m>=0&&m<=1&&(o[p++]=m),k>=0&&k<=1&&(o[p++]=k)}}return p}function yn(t,e,n,i,r){var o=6*n-12*e+6*t,a=9*e+3*i-3*t-9*n,s=3*e-3*t,l=0;if(pn(a))fn(o)&&(u=-s/o)>=0&&u<=1&&(r[l++]=u);else{var c=o*o-4*a*s;if(pn(c))r[0]=-o/(2*a);else if(c>0){var u,h=an(c),d=(-o-h)/(2*a);(u=(-o+h)/(2*a))>=0&&u<=1&&(r[l++]=u),d>=0&&d<=1&&(r[l++]=d)}}return l}function bn(t,e,n,i,r,o){var a=(e-t)*r+t,s=(n-e)*r+e,l=(i-n)*r+n,c=(s-a)*r+a,u=(l-s)*r+s,h=(u-c)*r+c;o[0]=t,o[1]=a,o[2]=c,o[3]=h,o[4]=h,o[5]=u,o[6]=l,o[7]=i}function xn(t,e,n,i,r,o,a,s,l,c,u){var h,d,p,f,g,m=.005,v=1/0;un[0]=l,un[1]=c;for(var y=0;y<1;y+=.05)hn[0]=gn(t,n,r,a,y),hn[1]=gn(e,i,o,s,y),(f=Vt(un,hn))<v&&(h=y,v=f);v=1/0;for(var b=0;b<32&&!(m<sn);b++)d=h-m,p=h+m,hn[0]=gn(t,n,r,a,d),hn[1]=gn(e,i,o,s,d),f=Vt(hn,un),d>=0&&f<v?(h=d,v=f):(dn[0]=gn(t,n,r,a,p),dn[1]=gn(e,i,o,s,p),g=Vt(dn,un),p<=1&&g<v?(h=p,v=g):m*=.5);return u&&(u[0]=gn(t,n,r,a,h),u[1]=gn(e,i,o,s,h)),an(v)}function _n(t,e,n,i,r,o,a,s,l){for(var c=t,u=e,h=0,d=1/l,p=1;p<=l;p++){var f=p*d,g=gn(t,n,r,a,f),m=gn(e,i,o,s,f),v=g-c,y=m-u;h+=Math.sqrt(v*v+y*y),c=g,u=m}return h}function wn(t,e,n,i){var r=1-i;return r*(r*t+2*i*e)+i*i*n}function Sn(t,e,n,i){return 2*((1-i)*(e-t)+i*(n-e))}function Cn(t,e,n){var i=t+n-2*e;return 0===i?.5:(t-e)/i}function kn(t,e,n,i,r){var o=(e-t)*i+t,a=(n-e)*i+e,s=(a-o)*i+o;r[0]=t,r[1]=o,r[2]=s,r[3]=s,r[4]=a,r[5]=n}function An(t,e,n,i,r,o,a,s,l){var c,u=.005,h=1/0;un[0]=a,un[1]=s;for(var d=0;d<1;d+=.05)hn[0]=wn(t,n,r,d),hn[1]=wn(e,i,o,d),(m=Vt(un,hn))<h&&(c=d,h=m);h=1/0;for(var p=0;p<32&&!(u<sn);p++){var f=c-u,g=c+u;hn[0]=wn(t,n,r,f),hn[1]=wn(e,i,o,f);var m=Vt(hn,un);if(f>=0&&m<h)c=f,h=m;else{dn[0]=wn(t,n,r,g),dn[1]=wn(e,i,o,g);var v=Vt(dn,un);g<=1&&v<h?(c=g,h=v):u*=.5}}return l&&(l[0]=wn(t,n,r,c),l[1]=wn(e,i,o,c)),an(h)}function Mn(t,e,n,i,r,o,a){for(var s=t,l=e,c=0,u=1/a,h=1;h<=a;h++){var d=h*u,p=wn(t,n,r,d),f=wn(e,i,o,d),g=p-s,m=f-l;c+=Math.sqrt(g*g+m*m),s=p,l=f}return c}var Tn=/cubic-bezier\(([0-9,\.e ]+)\)/;function In(t){var e=t&&Tn.exec(t);if(e){var n=e[1].split(","),i=+ct(n[0]),r=+ct(n[1]),o=+ct(n[2]),a=+ct(n[3]);if(isNaN(i+r+o+a))return;var s=[];return function(t){return t<=0?0:t>=1?1:vn(0,i,o,1,t,s)&&gn(0,r,a,1,s[0])}}}var En=function(){function t(t){this._inited=!1,this._startTime=0,this._pausedTime=0,this._paused=!1,this._life=t.life||1e3,this._delay=t.delay||0,this.loop=t.loop||!1,this.onframe=t.onframe||_t,this.ondestroy=t.ondestroy||_t,this.onrestart=t.onrestart||_t,t.easing&&this.setEasing(t.easing)}return t.prototype.step=function(t,e){if(this._inited||(this._startTime=t+this._delay,this._inited=!0),!this._paused){var n=this._life,i=t-this._startTime-this._pausedTime,r=i/n;r<0&&(r=0),r=Math.min(r,1);var o=this.easingFunc,a=o?o(r):r;if(this.onframe(a),1===r){if(!this.loop)return!0;var s=i%n;this._startTime=t-s,this._pausedTime=0,this.onrestart()}return!1}this._pausedTime+=e},t.prototype.pause=function(){this._paused=!0},t.prototype.resume=function(){this._paused=!1},t.prototype.setEasing=function(t){this.easing=t,this.easingFunc=X(t)?t:rn[t]||In(t)},t}(),On=function(t){this.value=t},Dn=function(){function t(){this._len=0}return t.prototype.insert=function(t){var e=new On(t);return this.insertEntry(e),e},t.prototype.insertEntry=function(t){this.head?(this.tail.next=t,t.prev=this.tail,t.next=null,this.tail=t):this.head=this.tail=t,this._len++},t.prototype.remove=function(t){var e=t.prev,n=t.next;e?e.next=n:this.head=n,n?n.prev=e:this.tail=e,t.next=t.prev=null,this._len--},t.prototype.len=function(){return this._len},t.prototype.clear=function(){this.head=this.tail=null,this._len=0},t}(),Ln=function(){function t(t){this._list=new Dn,this._maxSize=10,this._map={},this._maxSize=t}return t.prototype.put=function(t,e){var n=this._list,i=this._map,r=null;if(null==i[t]){var o=n.len(),a=this._lastRemovedEntry;if(o>=this._maxSize&&o>0){var s=n.head;n.remove(s),delete i[s.key],r=s.value,this._lastRemovedEntry=s}a?a.value=e:a=new On(e),a.key=t,n.insertEntry(a),i[t]=a}return r},t.prototype.get=function(t){var e=this._map[t],n=this._list;if(null!=e)return e!==n.tail&&(n.remove(e),n.insertEntry(e)),e.value},t.prototype.clear=function(){this._list.clear(),this._map={}},t.prototype.len=function(){return this._list.len()},t}(),Pn={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function Nn(t){return(t=Math.round(t))<0?0:t>255?255:t}function Rn(t){return t<0?0:t>1?1:t}function Bn(t){var e=t;return e.length&&"%"===e.charAt(e.length-1)?Nn(parseFloat(e)/100*255):Nn(parseInt(e,10))}function zn(t){var e=t;return e.length&&"%"===e.charAt(e.length-1)?Rn(parseFloat(e)/100):Rn(parseFloat(e))}function Fn(t,e,n){return n<0?n+=1:n>1&&(n-=1),6*n<1?t+(e-t)*n*6:2*n<1?e:3*n<2?t+(e-t)*(2/3-n)*6:t}function Vn(t,e,n){return t+(e-t)*n}function Hn(t,e,n,i,r){return t[0]=e,t[1]=n,t[2]=i,t[3]=r,t}function Wn(t,e){return t[0]=e[0],t[1]=e[1],t[2]=e[2],t[3]=e[3],t}var jn=new Ln(20),Yn=null;function Xn(t,e){Yn&&Wn(Yn,e),Yn=jn.put(t,Yn||e.slice())}function Gn(t,e){if(t){e=e||[];var n=jn.get(t);if(n)return Wn(e,n);var i=(t+="").replace(/ /g,"").toLowerCase();if(i in Pn)return Wn(e,Pn[i]),Xn(t,e),e;var r,o=i.length;if("#"===i.charAt(0))return 4===o||5===o?(r=parseInt(i.slice(1,4),16))>=0&&r<=4095?(Hn(e,(3840&r)>>4|(3840&r)>>8,240&r|(240&r)>>4,15&r|(15&r)<<4,5===o?parseInt(i.slice(4),16)/15:1),Xn(t,e),e):void Hn(e,0,0,0,1):7===o||9===o?(r=parseInt(i.slice(1,7),16))>=0&&r<=16777215?(Hn(e,(16711680&r)>>16,(65280&r)>>8,255&r,9===o?parseInt(i.slice(7),16)/255:1),Xn(t,e),e):void Hn(e,0,0,0,1):void 0;var a=i.indexOf("("),s=i.indexOf(")");if(-1!==a&&s+1===o){var l=i.substr(0,a),c=i.substr(a+1,s-(a+1)).split(","),u=1;switch(l){case"rgba":if(4!==c.length)return 3===c.length?Hn(e,+c[0],+c[1],+c[2],1):Hn(e,0,0,0,1);u=zn(c.pop());case"rgb":return c.length>=3?(Hn(e,Bn(c[0]),Bn(c[1]),Bn(c[2]),3===c.length?u:zn(c[3])),Xn(t,e),e):void Hn(e,0,0,0,1);case"hsla":return 4!==c.length?void Hn(e,0,0,0,1):(c[3]=zn(c[3]),qn(c,e),Xn(t,e),e);case"hsl":return 3!==c.length?void Hn(e,0,0,0,1):(qn(c,e),Xn(t,e),e);default:return}}Hn(e,0,0,0,1)}}function qn(t,e){var n=(parseFloat(t[0])%360+360)%360/360,i=zn(t[1]),r=zn(t[2]),o=r<=.5?r*(i+1):r+i-r*i,a=2*r-o;return Hn(e=e||[],Nn(255*Fn(a,o,n+1/3)),Nn(255*Fn(a,o,n)),Nn(255*Fn(a,o,n-1/3)),1),4===t.length&&(e[3]=t[3]),e}function Un(t,e){var n=Gn(t);if(n){for(var i=0;i<3;i++)n[i]=e<0?n[i]*(1-e)|0:(255-n[i])*e+n[i]|0,n[i]>255?n[i]=255:n[i]<0&&(n[i]=0);return ei(n,4===n.length?"rgba":"rgb")}}function $n(t,e,n){if(e&&e.length&&t>=0&&t<=1){n=n||[];var i=t*(e.length-1),r=Math.floor(i),o=Math.ceil(i),a=e[r],s=e[o],l=i-r;return n[0]=Nn(Vn(a[0],s[0],l)),n[1]=Nn(Vn(a[1],s[1],l)),n[2]=Nn(Vn(a[2],s[2],l)),n[3]=Rn(Vn(a[3],s[3],l)),n}}var Zn=$n;function Kn(t,e,n){if(e&&e.length&&t>=0&&t<=1){var i=t*(e.length-1),r=Math.floor(i),o=Math.ceil(i),a=Gn(e[r]),s=Gn(e[o]),l=i-r,c=ei([Nn(Vn(a[0],s[0],l)),Nn(Vn(a[1],s[1],l)),Nn(Vn(a[2],s[2],l)),Rn(Vn(a[3],s[3],l))],"rgba");return n?{color:c,leftIndex:r,rightIndex:o,value:i}:c}}var Qn=Kn;function Jn(t,e,n,i){var r=Gn(t);if(t)return r=function(t){if(t){var e,n,i=t[0]/255,r=t[1]/255,o=t[2]/255,a=Math.min(i,r,o),s=Math.max(i,r,o),l=s-a,c=(s+a)/2;if(0===l)e=0,n=0;else{n=c<.5?l/(s+a):l/(2-s-a);var u=((s-i)/6+l/2)/l,h=((s-r)/6+l/2)/l,d=((s-o)/6+l/2)/l;i===s?e=d-h:r===s?e=1/3+u-d:o===s&&(e=2/3+h-u),e<0&&(e+=1),e>1&&(e-=1)}var p=[360*e,n,c];return null!=t[3]&&p.push(t[3]),p}}(r),null!=e&&(r[0]=function(t){return(t=Math.round(t))<0?0:t>360?360:t}(e)),null!=n&&(r[1]=zn(n)),null!=i&&(r[2]=zn(i)),ei(qn(r),"rgba")}function ti(t,e){var n=Gn(t);if(n&&null!=e)return n[3]=Rn(e),ei(n,"rgba")}function ei(t,e){if(t&&t.length){var n=t[0]+","+t[1]+","+t[2];return"rgba"!==e&&"hsva"!==e&&"hsla"!==e||(n+=","+t[3]),e+"("+n+")"}}function ni(t,e){var n=Gn(t);return n?(.299*n[0]+.587*n[1]+.114*n[2])*n[3]/255+(1-n[3])*e:0}var ii=new Ln(100);function ri(t){if(G(t)){var e=ii.get(t);return e||(e=Un(t,-.1),ii.put(t,e)),e}if(J(t)){var n=I({},t);return n.colorStops=B(t.colorStops,(function(t){return{offset:t.offset,color:Un(t.color,-.1)}})),n}return t}var oi=Object.freeze({__proto__:null,parse:Gn,lift:Un,toHex:function(t){var e=Gn(t);if(e)return((1<<24)+(e[0]<<16)+(e[1]<<8)+ +e[2]).toString(16).slice(1)},fastLerp:$n,fastMapToColor:Zn,lerp:Kn,mapToColor:Qn,modifyHSL:Jn,modifyAlpha:ti,stringify:ei,lum:ni,random:function(){return ei([Math.round(255*Math.random()),Math.round(255*Math.random()),Math.round(255*Math.random())],"rgb")},liftColor:ri}),ai=Math.round;function si(t){var e;if(t&&"transparent"!==t){if("string"==typeof t&&t.indexOf("rgba")>-1){var n=Gn(t);n&&(t="rgb("+n[0]+","+n[1]+","+n[2]+")",e=n[3])}}else t="none";return{color:t,opacity:null==e?1:e}}function li(t){return t<1e-4&&t>-1e-4}function ci(t){return ai(1e3*t)/1e3}function ui(t){return ai(1e4*t)/1e4}var hi={left:"start",right:"end",center:"middle",middle:"middle"};function di(t){return t&&!!t.image}function pi(t){return di(t)||function(t){return t&&!!t.svgElement}(t)}function fi(t){return"linear"===t.type}function gi(t){return"radial"===t.type}function mi(t){return t&&("linear"===t.type||"radial"===t.type)}function vi(t){return"url(#"+t+")"}function yi(t){var e=t.getGlobalScale(),n=Math.max(e[0],e[1]);return Math.max(Math.ceil(Math.log(n)/Math.log(10)),1)}function bi(t){var e=t.x||0,n=t.y||0,i=(t.rotation||0)*wt,r=rt(t.scaleX,1),o=rt(t.scaleY,1),a=t.skewX||0,s=t.skewY||0,l=[];return(e||n)&&l.push("translate("+e+"px,"+n+"px)"),i&&l.push("rotate("+i+")"),1===r&&1===o||l.push("scale("+r+","+o+")"),(a||s)&&l.push("skew("+ai(a*wt)+"deg, "+ai(s*wt)+"deg)"),l.join(" ")}var xi=r.hasGlobalWindow&&X(window.btoa)?function(t){return window.btoa(unescape(encodeURIComponent(t)))}:"undefined"!=typeof Buffer?function(t){return Buffer.from(t).toString("base64")}:function(t){return null},_i=Array.prototype.slice;function wi(t,e,n){return(e-t)*n+t}function Si(t,e,n,i){for(var r=e.length,o=0;o<r;o++)t[o]=wi(e[o],n[o],i);return t}function Ci(t,e,n,i){for(var r=e.length,o=0;o<r;o++)t[o]=e[o]+n[o]*i;return t}function ki(t,e,n,i){for(var r=e.length,o=r&&e[0].length,a=0;a<r;a++){t[a]||(t[a]=[]);for(var s=0;s<o;s++)t[a][s]=e[a][s]+n[a][s]*i}return t}function Ai(t,e){for(var n=t.length,i=e.length,r=n>i?e:t,o=Math.min(n,i),a=r[o-1]||{color:[0,0,0,0],offset:0},s=o;s<Math.max(n,i);s++)r.push({offset:a.offset,color:a.color.slice()})}function Mi(t,e,n){var i=t,r=e;if(i.push&&r.push){var o=i.length,a=r.length;if(o!==a)if(o>a)i.length=a;else for(var s=o;s<a;s++)i.push(1===n?r[s]:_i.call(r[s]));var l=i[0]&&i[0].length;for(s=0;s<i.length;s++)if(1===n)isNaN(i[s])&&(i[s]=r[s]);else for(var c=0;c<l;c++)isNaN(i[s][c])&&(i[s][c]=r[s][c])}}function Ti(t){if(N(t)){var e=t.length;if(N(t[0])){for(var n=[],i=0;i<e;i++)n.push(_i.call(t[i]));return n}return _i.call(t)}return t}function Ii(t){return t[0]=Math.floor(t[0])||0,t[1]=Math.floor(t[1])||0,t[2]=Math.floor(t[2])||0,t[3]=null==t[3]?1:t[3],"rgba("+t.join(",")+")"}function Ei(t){return 4===t||5===t}function Oi(t){return 1===t||2===t}var Di=[0,0,0,0],Li=function(){function t(t){this.keyframes=[],this.discrete=!1,this._invalid=!1,this._needsSort=!1,this._lastFr=0,this._lastFrP=0,this.propName=t}return t.prototype.isFinished=function(){return this._finished},t.prototype.setFinished=function(){this._finished=!0,this._additiveTrack&&this._additiveTrack.setFinished()},t.prototype.needsAnimate=function(){return this.keyframes.length>=1},t.prototype.getAdditiveTrack=function(){return this._additiveTrack},t.prototype.addKeyframe=function(t,e,n){this._needsSort=!0;var i=this.keyframes,r=i.length,o=!1,a=6,s=e;if(N(e)){var l=function(t){return N(t&&t[0])?2:1}(e);a=l,(1===l&&!U(e[0])||2===l&&!U(e[0][0]))&&(o=!0)}else if(U(e)&&!nt(e))a=0;else if(G(e))if(isNaN(+e)){var c=Gn(e);c&&(s=c,a=3)}else a=0;else if(J(e)){var u=I({},s);u.colorStops=B(e.colorStops,(function(t){return{offset:t.offset,color:Gn(t.color)}})),fi(e)?a=4:gi(e)&&(a=5),s=u}0===r?this.valType=a:a===this.valType&&6!==a||(o=!0),this.discrete=this.discrete||o;var h={time:t,value:s,rawValue:e,percent:0};return n&&(h.easing=n,h.easingFunc=X(n)?n:rn[n]||In(n)),i.push(h),h},t.prototype.prepare=function(t,e){var n=this.keyframes;this._needsSort&&n.sort((function(t,e){return t.time-e.time}));for(var i=this.valType,r=n.length,o=n[r-1],a=this.discrete,s=Oi(i),l=Ei(i),c=0;c<r;c++){var u=n[c],h=u.value,d=o.value;u.percent=u.time/t,a||(s&&c!==r-1?Mi(h,d,i):l&&Ai(h.colorStops,d.colorStops))}if(!a&&5!==i&&e&&this.needsAnimate()&&e.needsAnimate()&&i===e.valType&&!e._finished){this._additiveTrack=e;var p=n[0].value;for(c=0;c<r;c++)0===i?n[c].additiveValue=n[c].value-p:3===i?n[c].additiveValue=Ci([],n[c].value,p,-1):Oi(i)&&(n[c].additiveValue=1===i?Ci([],n[c].value,p,-1):ki([],n[c].value,p,-1))}},t.prototype.step=function(t,e){if(!this._finished){this._additiveTrack&&this._additiveTrack._finished&&(this._additiveTrack=null);var n,i,r,o=null!=this._additiveTrack,a=o?"additiveValue":"value",s=this.valType,l=this.keyframes,c=l.length,u=this.propName,h=3===s,d=this._lastFr,p=Math.min;if(1===c)i=r=l[0];else{if(e<0)n=0;else if(e<this._lastFrP){for(n=p(d+1,c-1);n>=0&&!(l[n].percent<=e);n--);n=p(n,c-2)}else{for(n=d;n<c&&!(l[n].percent>e);n++);n=p(n-1,c-2)}r=l[n+1],i=l[n]}if(i&&r){this._lastFr=n,this._lastFrP=e;var f=r.percent-i.percent,g=0===f?1:p((e-i.percent)/f,1);r.easingFunc&&(g=r.easingFunc(g));var m=o?this._additiveValue:h?Di:t[u];if(!Oi(s)&&!h||m||(m=this._additiveValue=[]),this.discrete)t[u]=g<1?i.rawValue:r.rawValue;else if(Oi(s))1===s?Si(m,i[a],r[a],g):function(t,e,n,i){for(var r=e.length,o=r&&e[0].length,a=0;a<r;a++){t[a]||(t[a]=[]);for(var s=0;s<o;s++)t[a][s]=wi(e[a][s],n[a][s],i)}}(m,i[a],r[a],g);else if(Ei(s)){var v=i[a],y=r[a],b=4===s;t[u]={type:b?"linear":"radial",x:wi(v.x,y.x,g),y:wi(v.y,y.y,g),colorStops:B(v.colorStops,(function(t,e){var n=y.colorStops[e];return{offset:wi(t.offset,n.offset,g),color:Ii(Si([],t.color,n.color,g))}})),global:y.global},b?(t[u].x2=wi(v.x2,y.x2,g),t[u].y2=wi(v.y2,y.y2,g)):t[u].r=wi(v.r,y.r,g)}else if(h)Si(m,i[a],r[a],g),o||(t[u]=Ii(m));else{var x=wi(i[a],r[a],g);o?this._additiveValue=x:t[u]=x}o&&this._addToTarget(t)}}},t.prototype._addToTarget=function(t){var e=this.valType,n=this.propName,i=this._additiveValue;0===e?t[n]=t[n]+i:3===e?(Gn(t[n],Di),Ci(Di,Di,i,1),t[n]=Ii(Di)):1===e?Ci(t[n],t[n],i,1):2===e&&ki(t[n],t[n],i,1)},t}(),Pi=function(){function t(t,e,n,i){this._tracks={},this._trackKeys=[],this._maxTime=0,this._started=0,this._clip=null,this._target=t,this._loop=e,e&&i?k("Can' use additive animation on looped animation."):(this._additiveAnimators=i,this._allowDiscrete=n)}return t.prototype.getMaxTime=function(){return this._maxTime},t.prototype.getDelay=function(){return this._delay},t.prototype.getLoop=function(){return this._loop},t.prototype.getTarget=function(){return this._target},t.prototype.changeTarget=function(t){this._target=t},t.prototype.when=function(t,e,n){return this.whenWithKeys(t,e,H(e),n)},t.prototype.whenWithKeys=function(t,e,n,i){for(var r=this._tracks,o=0;o<n.length;o++){var a=n[o],s=r[a];if(!s){s=r[a]=new Li(a);var l=void 0,c=this._getAdditiveTrack(a);if(c){var u=c.keyframes,h=u[u.length-1];l=h&&h.value,3===c.valType&&l&&(l=Ii(l))}else l=this._target[a];if(null==l)continue;t>0&&s.addKeyframe(0,Ti(l),i),this._trackKeys.push(a)}s.addKeyframe(t,Ti(e[a]),i)}return this._maxTime=Math.max(this._maxTime,t),this},t.prototype.pause=function(){this._clip.pause(),this._paused=!0},t.prototype.resume=function(){this._clip.resume(),this._paused=!1},t.prototype.isPaused=function(){return!!this._paused},t.prototype.duration=function(t){return this._maxTime=t,this._force=!0,this},t.prototype._doneCallback=function(){this._setTracksFinished(),this._clip=null;var t=this._doneCbs;if(t)for(var e=t.length,n=0;n<e;n++)t[n].call(this)},t.prototype._abortedCallback=function(){this._setTracksFinished();var t=this.animation,e=this._abortedCbs;if(t&&t.removeClip(this._clip),this._clip=null,e)for(var n=0;n<e.length;n++)e[n].call(this)},t.prototype._setTracksFinished=function(){for(var t=this._tracks,e=this._trackKeys,n=0;n<e.length;n++)t[e[n]].setFinished()},t.prototype._getAdditiveTrack=function(t){var e,n=this._additiveAnimators;if(n)for(var i=0;i<n.length;i++){var r=n[i].getTrack(t);r&&(e=r)}return e},t.prototype.start=function(t){if(!(this._started>0)){this._started=1;for(var e=this,n=[],i=this._maxTime||0,r=0;r<this._trackKeys.length;r++){var o=this._trackKeys[r],a=this._tracks[o],s=this._getAdditiveTrack(o),l=a.keyframes,c=l.length;if(a.prepare(i,s),a.needsAnimate())if(!this._allowDiscrete&&a.discrete){var u=l[c-1];u&&(e._target[a.propName]=u.rawValue),a.setFinished()}else n.push(a)}if(n.length||this._force){var h=new En({life:i,loop:this._loop,delay:this._delay||0,onframe:function(t){e._started=2;var i=e._additiveAnimators;if(i){for(var r=!1,o=0;o<i.length;o++)if(i[o]._clip){r=!0;break}r||(e._additiveAnimators=null)}for(o=0;o<n.length;o++)n[o].step(e._target,t);var a=e._onframeCbs;if(a)for(o=0;o<a.length;o++)a[o](e._target,t)},ondestroy:function(){e._doneCallback()}});this._clip=h,this.animation&&this.animation.addClip(h),t&&h.setEasing(t)}else this._doneCallback();return this}},t.prototype.stop=function(t){if(this._clip){var e=this._clip;t&&e.onframe(1),this._abortedCallback()}},t.prototype.delay=function(t){return this._delay=t,this},t.prototype.during=function(t){return t&&(this._onframeCbs||(this._onframeCbs=[]),this._onframeCbs.push(t)),this},t.prototype.done=function(t){return t&&(this._doneCbs||(this._doneCbs=[]),this._doneCbs.push(t)),this},t.prototype.aborted=function(t){return t&&(this._abortedCbs||(this._abortedCbs=[]),this._abortedCbs.push(t)),this},t.prototype.getClip=function(){return this._clip},t.prototype.getTrack=function(t){return this._tracks[t]},t.prototype.getTracks=function(){var t=this;return B(this._trackKeys,(function(e){return t._tracks[e]}))},t.prototype.stopTracks=function(t,e){if(!t.length||!this._clip)return!0;for(var n=this._tracks,i=this._trackKeys,r=0;r<t.length;r++){var o=n[t[r]];o&&!o.isFinished()&&(e?o.step(this._target,1):1===this._started&&o.step(this._target,0),o.setFinished())}var a=!0;for(r=0;r<i.length;r++)if(!n[i[r]].isFinished()){a=!1;break}return a&&this._abortedCallback(),a},t.prototype.saveTo=function(t,e,n){if(t){e=e||this._trackKeys;for(var i=0;i<e.length;i++){var r=e[i],o=this._tracks[r];if(o&&!o.isFinished()){var a=o.keyframes,s=a[n?0:a.length-1];s&&(t[r]=Ti(s.rawValue))}}}},t.prototype.__changeFinalValue=function(t,e){e=e||H(t);for(var n=0;n<e.length;n++){var i=e[n],r=this._tracks[i];if(r){var o=r.keyframes;if(o.length>1){var a=o.pop();r.addKeyframe(a.time,t[i]),r.prepare(this._maxTime,r.getAdditiveTrack())}}}},t}();function Ni(){return(new Date).getTime()}var Ri,Bi,zi=function(t){function e(e){var n=t.call(this)||this;return n._running=!1,n._time=0,n._pausedTime=0,n._pauseStart=0,n._paused=!1,e=e||{},n.stage=e.stage||{},n}return n(e,t),e.prototype.addClip=function(t){t.animation&&this.removeClip(t),this._head?(this._tail.next=t,t.prev=this._tail,t.next=null,this._tail=t):this._head=this._tail=t,t.animation=this},e.prototype.addAnimator=function(t){t.animation=this;var e=t.getClip();e&&this.addClip(e)},e.prototype.removeClip=function(t){if(t.animation){var e=t.prev,n=t.next;e?e.next=n:this._head=n,n?n.prev=e:this._tail=e,t.next=t.prev=t.animation=null}},e.prototype.removeAnimator=function(t){var e=t.getClip();e&&this.removeClip(e),t.animation=null},e.prototype.update=function(t){for(var e=Ni()-this._pausedTime,n=e-this._time,i=this._head;i;){var r=i.next;i.step(e,n)?(i.ondestroy(),this.removeClip(i),i=r):i=r}this._time=e,t||(this.trigger("frame",n),this.stage.update&&this.stage.update())},e.prototype._startLoop=function(){var t=this;this._running=!0,nn((function e(){t._running&&(nn(e),!t._paused&&t.update())}))},e.prototype.start=function(){this._running||(this._time=Ni(),this._pausedTime=0,this._startLoop())},e.prototype.stop=function(){this._running=!1},e.prototype.pause=function(){this._paused||(this._pauseStart=Ni(),this._paused=!0)},e.prototype.resume=function(){this._paused&&(this._pausedTime+=Ni()-this._pauseStart,this._paused=!1)},e.prototype.clear=function(){for(var t=this._head;t;){var e=t.next;t.prev=t.next=t.animation=null,t=e}this._head=this._tail=null},e.prototype.isFinished=function(){return null==this._head},e.prototype.animate=function(t,e){e=e||{},this.start();var n=new Pi(t,e.loop);return this.addAnimator(n),n},e}(Ut),Fi=r.domSupported,Vi=(Bi={pointerdown:1,pointerup:1,pointermove:1,pointerout:1},{mouse:Ri=["click","dblclick","mousewheel","wheel","mouseout","mouseup","mousedown","mousemove","contextmenu"],touch:["touchstart","touchend","touchmove"],pointer:B(Ri,(function(t){var e=t.replace("mouse","pointer");return Bi.hasOwnProperty(e)?e:t}))}),Hi=["mousemove","mouseup"],Wi=["pointermove","pointerup"],ji=!1;function Yi(t){var e=t.pointerType;return"pen"===e||"touch"===e}function Xi(t){t&&(t.zrByTouch=!0)}function Gi(t,e){for(var n=e,i=!1;n&&9!==n.nodeType&&!(i=n.domBelongToZr||n!==e&&n===t.painterRoot);)n=n.parentNode;return i}var qi=function(t,e){this.stopPropagation=_t,this.stopImmediatePropagation=_t,this.preventDefault=_t,this.type=e.type,this.target=this.currentTarget=t.dom,this.pointerType=e.pointerType,this.clientX=e.clientX,this.clientY=e.clientY},Ui={mousedown:function(t){t=he(this.dom,t),this.__mayPointerCapture=[t.zrX,t.zrY],this.trigger("mousedown",t)},mousemove:function(t){t=he(this.dom,t);var e=this.__mayPointerCapture;!e||t.zrX===e[0]&&t.zrY===e[1]||this.__togglePointerCapture(!0),this.trigger("mousemove",t)},mouseup:function(t){t=he(this.dom,t),this.__togglePointerCapture(!1),this.trigger("mouseup",t)},mouseout:function(t){Gi(this,(t=he(this.dom,t)).toElement||t.relatedTarget)||(this.__pointerCapturing&&(t.zrEventControl="no_globalout"),this.trigger("mouseout",t))},wheel:function(t){ji=!0,t=he(this.dom,t),this.trigger("mousewheel",t)},mousewheel:function(t){ji||(t=he(this.dom,t),this.trigger("mousewheel",t))},touchstart:function(t){Xi(t=he(this.dom,t)),this.__lastTouchMoment=new Date,this.handler.processGesture(t,"start"),Ui.mousemove.call(this,t),Ui.mousedown.call(this,t)},touchmove:function(t){Xi(t=he(this.dom,t)),this.handler.processGesture(t,"change"),Ui.mousemove.call(this,t)},touchend:function(t){Xi(t=he(this.dom,t)),this.handler.processGesture(t,"end"),Ui.mouseup.call(this,t),+new Date-+this.__lastTouchMoment<300&&Ui.click.call(this,t)},pointerdown:function(t){Ui.mousedown.call(this,t)},pointermove:function(t){Yi(t)||Ui.mousemove.call(this,t)},pointerup:function(t){Ui.mouseup.call(this,t)},pointerout:function(t){Yi(t)||Ui.mouseout.call(this,t)}};R(["click","dblclick","contextmenu"],(function(t){Ui[t]=function(e){e=he(this.dom,e),this.trigger(t,e)}}));var $i={pointermove:function(t){Yi(t)||$i.mousemove.call(this,t)},pointerup:function(t){$i.mouseup.call(this,t)},mousemove:function(t){this.trigger("mousemove",t)},mouseup:function(t){var e=this.__pointerCapturing;this.__togglePointerCapture(!1),this.trigger("mouseup",t),e&&(t.zrEventControl="only_globalout",this.trigger("mouseout",t))}};function Zi(t,e,n,i){t.mounted[e]=n,t.listenerOpts[e]=i,de(t.domTarget,e,n,i)}function Ki(t){var e,n,i,r,o=t.mounted;for(var a in o)o.hasOwnProperty(a)&&(e=t.domTarget,n=a,i=o[a],r=t.listenerOpts[a],e.removeEventListener(n,i,r));t.mounted={}}var Qi=function(t,e){this.mounted={},this.listenerOpts={},this.touching=!1,this.domTarget=t,this.domHandlers=e},Ji=function(t){function e(e,n){var i=t.call(this)||this;return i.__pointerCapturing=!1,i.dom=e,i.painterRoot=n,i._localHandlerScope=new Qi(e,Ui),Fi&&(i._globalHandlerScope=new Qi(document,$i)),function(t,e){var n=e.domHandlers;r.pointerEventsSupported?R(Vi.pointer,(function(i){Zi(e,i,(function(e){n[i].call(t,e)}))})):(r.touchEventsSupported&&R(Vi.touch,(function(i){Zi(e,i,(function(r){n[i].call(t,r),function(t){t.touching=!0,null!=t.touchTimer&&(clearTimeout(t.touchTimer),t.touchTimer=null),t.touchTimer=setTimeout((function(){t.touching=!1,t.touchTimer=null}),700)}(e)}))})),R(Vi.mouse,(function(i){Zi(e,i,(function(r){r=ue(r),e.touching||n[i].call(t,r)}))})))}(i,i._localHandlerScope),i}return n(e,t),e.prototype.dispose=function(){Ki(this._localHandlerScope),Fi&&Ki(this._globalHandlerScope)},e.prototype.setCursor=function(t){this.dom.style&&(this.dom.style.cursor=t||"default")},e.prototype.__togglePointerCapture=function(t){if(this.__mayPointerCapture=null,Fi&&+this.__pointerCapturing^+t){this.__pointerCapturing=t;var e=this._globalHandlerScope;t?function(t,e){function n(n){Zi(e,n,(function(i){i=ue(i),Gi(t,i.target)||(i=function(t,e){return he(t.dom,new qi(t,e),!0)}(t,i),e.domHandlers[n].call(t,i))}),{capture:!0})}r.pointerEventsSupported?R(Wi,n):r.touchEventsSupported||R(Hi,n)}(this,e):Ki(e)}},e}(Ut),tr=1;r.hasGlobalWindow&&(tr=Math.max(window.devicePixelRatio||window.screen&&window.screen.deviceXDPI/window.screen.logicalXDPI||1,1));var er=tr,nr="#333",ir="#ccc",rr=ye;function or(t){return t>5e-5||t<-5e-5}var ar=[],sr=[],lr=[1,0,0,1,0,0],cr=Math.abs,ur=function(){function t(){}return t.prototype.getLocalTransform=function(e){return t.getLocalTransform(this,e)},t.prototype.setPosition=function(t){this.x=t[0],this.y=t[1]},t.prototype.setScale=function(t){this.scaleX=t[0],this.scaleY=t[1]},t.prototype.setSkew=function(t){this.skewX=t[0],this.skewY=t[1]},t.prototype.setOrigin=function(t){this.originX=t[0],this.originY=t[1]},t.prototype.needLocalTransform=function(){return or(this.rotation)||or(this.x)||or(this.y)||or(this.scaleX-1)||or(this.scaleY-1)||or(this.skewX)||or(this.skewY)},t.prototype.updateTransform=function(){var t=this.parent&&this.parent.transform,e=this.needLocalTransform(),n=this.transform;e||t?(n=n||[1,0,0,1,0,0],e?this.getLocalTransform(n):rr(n),t&&(e?xe(n,t,n):be(n,t)),this.transform=n,this._resolveGlobalScaleRatio(n)):n&&(rr(n),this.invTransform=null)},t.prototype._resolveGlobalScaleRatio=function(t){var e=this.globalScaleRatio;if(null!=e&&1!==e){this.getGlobalScale(ar);var n=ar[0]<0?-1:1,i=ar[1]<0?-1:1,r=((ar[0]-n)*e+n)/ar[0]||0,o=((ar[1]-i)*e+i)/ar[1]||0;t[0]*=r,t[1]*=r,t[2]*=o,t[3]*=o}this.invTransform=this.invTransform||[1,0,0,1,0,0],Ce(this.invTransform,t)},t.prototype.getComputedTransform=function(){for(var t=this,e=[];t;)e.push(t),t=t.parent;for(;t=e.pop();)t.updateTransform();return this.transform},t.prototype.setLocalTransform=function(t){if(t){var e=t[0]*t[0]+t[1]*t[1],n=t[2]*t[2]+t[3]*t[3],i=Math.atan2(t[1],t[0]),r=Math.PI/2+i-Math.atan2(t[3],t[2]);n=Math.sqrt(n)*Math.cos(r),e=Math.sqrt(e),this.skewX=r,this.skewY=0,this.rotation=-i,this.x=+t[4],this.y=+t[5],this.scaleX=e,this.scaleY=n,this.originX=0,this.originY=0}},t.prototype.decomposeTransform=function(){if(this.transform){var t=this.parent,e=this.transform;t&&t.transform&&(t.invTransform=t.invTransform||[1,0,0,1,0,0],xe(sr,t.invTransform,e),e=sr);var n=this.originX,i=this.originY;(n||i)&&(lr[4]=n,lr[5]=i,xe(sr,e,lr),sr[4]-=n,sr[5]-=i,e=sr),this.setLocalTransform(e)}},t.prototype.getGlobalScale=function(t){var e=this.transform;return t=t||[],e?(t[0]=Math.sqrt(e[0]*e[0]+e[1]*e[1]),t[1]=Math.sqrt(e[2]*e[2]+e[3]*e[3]),e[0]<0&&(t[0]=-t[0]),e[3]<0&&(t[1]=-t[1]),t):(t[0]=1,t[1]=1,t)},t.prototype.transformCoordToLocal=function(t,e){var n=[t,e],i=this.invTransform;return i&&Wt(n,n,i),n},t.prototype.transformCoordToGlobal=function(t,e){var n=[t,e],i=this.transform;return i&&Wt(n,n,i),n},t.prototype.getLineScale=function(){var t=this.transform;return t&&cr(t[0]-1)>1e-10&&cr(t[3]-1)>1e-10?Math.sqrt(cr(t[0]*t[3]-t[2]*t[1])):1},t.prototype.copyTransform=function(t){dr(this,t)},t.getLocalTransform=function(t,e){e=e||[];var n=t.originX||0,i=t.originY||0,r=t.scaleX,o=t.scaleY,a=t.anchorX,s=t.anchorY,l=t.rotation||0,c=t.x,u=t.y,h=t.skewX?Math.tan(t.skewX):0,d=t.skewY?Math.tan(-t.skewY):0;if(n||i||a||s){var p=n+a,f=i+s;e[4]=-p*r-h*f*o,e[5]=-f*o-d*p*r}else e[4]=e[5]=0;return e[0]=r,e[3]=o,e[1]=d*r,e[2]=h*o,l&&we(e,e,l),e[4]+=n+c,e[5]+=i+u,e},t.initDefaultProps=function(){var e=t.prototype;e.scaleX=e.scaleY=e.globalScaleRatio=1,e.x=e.y=e.originX=e.originY=e.skewX=e.skewY=e.rotation=e.anchorX=e.anchorY=0}(),t}(),hr=["x","y","originX","originY","anchorX","anchorY","rotation","scaleX","scaleY","skewX","skewY"];function dr(t,e){for(var n=0;n<hr.length;n++){var i=hr[n];t[i]=e[i]}}var pr={};function fr(t,e){var n=pr[e=e||l];n||(n=pr[e]=new Ln(500));var i=n.get(t);return null==i&&(i=u.measureText(t,e).width,n.put(t,i)),i}function gr(t,e,n,i){var r=fr(t,e),o=br(e),a=vr(0,r,n),s=yr(0,o,i);return new Re(a,s,r,o)}function mr(t,e,n,i){var r=((t||"")+"").split("\n");if(1===r.length)return gr(r[0],e,n,i);for(var o=new Re(0,0,0,0),a=0;a<r.length;a++){var s=gr(r[a],e,n,i);0===a?o.copy(s):o.union(s)}return o}function vr(t,e,n){return"right"===n?t-=e:"center"===n&&(t-=e/2),t}function yr(t,e,n){return"middle"===n?t-=e/2:"bottom"===n&&(t-=e),t}function br(t){return fr("",t)}function xr(t,e){return"string"==typeof t?t.lastIndexOf("%")>=0?parseFloat(t)/100*e:parseFloat(t):t}function _r(t,e,n){var i=e.position||"inside",r=null!=e.distance?e.distance:5,o=n.height,a=n.width,s=o/2,l=n.x,c=n.y,u="left",h="top";if(i instanceof Array)l+=xr(i[0],n.width),c+=xr(i[1],n.height),u=null,h=null;else switch(i){case"left":l-=r,c+=s,u="right",h="middle";break;case"right":l+=r+a,c+=s,h="middle";break;case"top":l+=a/2,c-=r,u="center",h="bottom";break;case"bottom":l+=a/2,c+=o+r,u="center";break;case"inside":l+=a/2,c+=s,u="center",h="middle";break;case"insideLeft":l+=r,c+=s,h="middle";break;case"insideRight":l+=a-r,c+=s,u="right",h="middle";break;case"insideTop":l+=a/2,c+=r,u="center";break;case"insideBottom":l+=a/2,c+=o-r,u="center",h="bottom";break;case"insideTopLeft":l+=r,c+=r;break;case"insideTopRight":l+=a-r,c+=r,u="right";break;case"insideBottomLeft":l+=r,c+=o-r,h="bottom";break;case"insideBottomRight":l+=a-r,c+=o-r,u="right",h="bottom"}return(t=t||{}).x=l,t.y=c,t.align=u,t.verticalAlign=h,t}var wr="__zr_normal__",Sr=hr.concat(["ignore"]),Cr=z(hr,(function(t,e){return t[e]=!0,t}),{ignore:!1}),kr={},Ar=new Re(0,0,0,0),Mr=function(){function t(t){this.id=C(),this.animators=[],this.currentStates=[],this.states={},this._init(t)}return t.prototype._init=function(t){this.attr(t)},t.prototype.drift=function(t,e,n){switch(this.draggable){case"horizontal":e=0;break;case"vertical":t=0}var i=this.transform;i||(i=this.transform=[1,0,0,1,0,0]),i[4]+=t,i[5]+=e,this.decomposeTransform(),this.markRedraw()},t.prototype.beforeUpdate=function(){},t.prototype.afterUpdate=function(){},t.prototype.update=function(){this.updateTransform(),this.__dirty&&this.updateInnerText()},t.prototype.updateInnerText=function(t){var e=this._textContent;if(e&&(!e.ignore||t)){this.textConfig||(this.textConfig={});var n=this.textConfig,i=n.local,r=e.innerTransformable,o=void 0,a=void 0,s=!1;r.parent=i?this:null;var l=!1;if(r.copyTransform(e),null!=n.position){var c=Ar;n.layoutRect?c.copy(n.layoutRect):c.copy(this.getBoundingRect()),i||c.applyTransform(this.transform),this.calculateTextPosition?this.calculateTextPosition(kr,n,c):_r(kr,n,c),r.x=kr.x,r.y=kr.y,o=kr.align,a=kr.verticalAlign;var u=n.origin;if(u&&null!=n.rotation){var h=void 0,d=void 0;"center"===u?(h=.5*c.width,d=.5*c.height):(h=xr(u[0],c.width),d=xr(u[1],c.height)),l=!0,r.originX=-r.x+h+(i?0:c.x),r.originY=-r.y+d+(i?0:c.y)}}null!=n.rotation&&(r.rotation=n.rotation);var p=n.offset;p&&(r.x+=p[0],r.y+=p[1],l||(r.originX=-p[0],r.originY=-p[1]));var f=null==n.inside?"string"==typeof n.position&&n.position.indexOf("inside")>=0:n.inside,g=this._innerTextDefaultStyle||(this._innerTextDefaultStyle={}),m=void 0,v=void 0,y=void 0;f&&this.canBeInsideText()?(m=n.insideFill,v=n.insideStroke,null!=m&&"auto"!==m||(m=this.getInsideTextFill()),null!=v&&"auto"!==v||(v=this.getInsideTextStroke(m),y=!0)):(m=n.outsideFill,v=n.outsideStroke,null!=m&&"auto"!==m||(m=this.getOutsideFill()),null!=v&&"auto"!==v||(v=this.getOutsideStroke(m),y=!0)),(m=m||"#000")===g.fill&&v===g.stroke&&y===g.autoStroke&&o===g.align&&a===g.verticalAlign||(s=!0,g.fill=m,g.stroke=v,g.autoStroke=y,g.align=o,g.verticalAlign=a,e.setDefaultTextStyle(g)),e.__dirty|=1,s&&e.dirtyStyle(!0)}},t.prototype.canBeInsideText=function(){return!0},t.prototype.getInsideTextFill=function(){return"#fff"},t.prototype.getInsideTextStroke=function(t){return"#000"},t.prototype.getOutsideFill=function(){return this.__zr&&this.__zr.isDarkMode()?ir:nr},t.prototype.getOutsideStroke=function(t){var e=this.__zr&&this.__zr.getBackgroundColor(),n="string"==typeof e&&Gn(e);n||(n=[255,255,255,1]);for(var i=n[3],r=this.__zr.isDarkMode(),o=0;o<3;o++)n[o]=n[o]*i+(r?0:255)*(1-i);return n[3]=1,ei(n,"rgba")},t.prototype.traverse=function(t,e){},t.prototype.attrKV=function(t,e){"textConfig"===t?this.setTextConfig(e):"textContent"===t?this.setTextContent(e):"clipPath"===t?this.setClipPath(e):"extra"===t?(this.extra=this.extra||{},I(this.extra,e)):this[t]=e},t.prototype.hide=function(){this.ignore=!0,this.markRedraw()},t.prototype.show=function(){this.ignore=!1,this.markRedraw()},t.prototype.attr=function(t,e){if("string"==typeof t)this.attrKV(t,e);else if($(t))for(var n=H(t),i=0;i<n.length;i++){var r=n[i];this.attrKV(r,t[r])}return this.markRedraw(),this},t.prototype.saveCurrentToNormalState=function(t){this._innerSaveToNormal(t);for(var e=this._normalState,n=0;n<this.animators.length;n++){var i=this.animators[n],r=i.__fromStateTransition;if(!(i.getLoop()||r&&r!==wr)){var o=i.targetName,a=o?e[o]:e;i.saveTo(a)}}},t.prototype._innerSaveToNormal=function(t){var e=this._normalState;e||(e=this._normalState={}),t.textConfig&&!e.textConfig&&(e.textConfig=this.textConfig),this._savePrimaryToNormal(t,e,Sr)},t.prototype._savePrimaryToNormal=function(t,e,n){for(var i=0;i<n.length;i++){var r=n[i];null==t[r]||r in e||(e[r]=this[r])}},t.prototype.hasState=function(){return this.currentStates.length>0},t.prototype.getState=function(t){return this.states[t]},t.prototype.ensureState=function(t){var e=this.states;return e[t]||(e[t]={}),e[t]},t.prototype.clearStates=function(t){this.useState(wr,!1,t)},t.prototype.useState=function(t,e,n,i){var r=t===wr;if(this.hasState()||!r){var o=this.currentStates,a=this.stateTransition;if(!(D(o,t)>=0)||!e&&1!==o.length){var s;if(this.stateProxy&&!r&&(s=this.stateProxy(t)),s||(s=this.states&&this.states[t]),s||r){r||this.saveCurrentToNormalState(s);var l=!!(s&&s.hoverLayer||i);l&&this._toggleHoverLayerFlag(!0),this._applyStateObj(t,s,this._normalState,e,!n&&!this.__inHover&&a&&a.duration>0,a);var c=this._textContent,u=this._textGuide;return c&&c.useState(t,e,n,l),u&&u.useState(t,e,n,l),r?(this.currentStates=[],this._normalState={}):e?this.currentStates.push(t):this.currentStates=[t],this._updateAnimationTargets(),this.markRedraw(),!l&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=-2),s}k("State "+t+" not exists.")}}},t.prototype.useStates=function(t,e,n){if(t.length){var i=[],r=this.currentStates,o=t.length,a=o===r.length;if(a)for(var s=0;s<o;s++)if(t[s]!==r[s]){a=!1;break}if(a)return;for(s=0;s<o;s++){var l=t[s],c=void 0;this.stateProxy&&(c=this.stateProxy(l,t)),c||(c=this.states[l]),c&&i.push(c)}var u=i[o-1],h=!!(u&&u.hoverLayer||n);h&&this._toggleHoverLayerFlag(!0);var d=this._mergeStates(i),p=this.stateTransition;this.saveCurrentToNormalState(d),this._applyStateObj(t.join(","),d,this._normalState,!1,!e&&!this.__inHover&&p&&p.duration>0,p);var f=this._textContent,g=this._textGuide;f&&f.useStates(t,e,h),g&&g.useStates(t,e,h),this._updateAnimationTargets(),this.currentStates=t.slice(),this.markRedraw(),!h&&this.__inHover&&(this._toggleHoverLayerFlag(!1),this.__dirty&=-2)}else this.clearStates()},t.prototype.isSilent=function(){for(var t=this.silent,e=this.parent;!t&&e;){if(e.silent){t=!0;break}e=e.parent}return t},t.prototype._updateAnimationTargets=function(){for(var t=0;t<this.animators.length;t++){var e=this.animators[t];e.targetName&&e.changeTarget(this[e.targetName])}},t.prototype.removeState=function(t){var e=D(this.currentStates,t);if(e>=0){var n=this.currentStates.slice();n.splice(e,1),this.useStates(n)}},t.prototype.replaceState=function(t,e,n){var i=this.currentStates.slice(),r=D(i,t),o=D(i,e)>=0;r>=0?o?i.splice(r,1):i[r]=e:n&&!o&&i.push(e),this.useStates(i)},t.prototype.toggleState=function(t,e){e?this.useState(t,!0):this.removeState(t)},t.prototype._mergeStates=function(t){for(var e,n={},i=0;i<t.length;i++){var r=t[i];I(n,r),r.textConfig&&I(e=e||{},r.textConfig)}return e&&(n.textConfig=e),n},t.prototype._applyStateObj=function(t,e,n,i,r,o){var a=!(e&&i);e&&e.textConfig?(this.textConfig=I({},i?this.textConfig:n.textConfig),I(this.textConfig,e.textConfig)):a&&n.textConfig&&(this.textConfig=n.textConfig);for(var s={},l=!1,c=0;c<Sr.length;c++){var u=Sr[c],h=r&&Cr[u];e&&null!=e[u]?h?(l=!0,s[u]=e[u]):this[u]=e[u]:a&&null!=n[u]&&(h?(l=!0,s[u]=n[u]):this[u]=n[u])}if(!r)for(c=0;c<this.animators.length;c++){var d=this.animators[c],p=d.targetName;d.getLoop()||d.__changeFinalValue(p?(e||n)[p]:e||n)}l&&this._transitionState(t,s,o)},t.prototype._attachComponent=function(t){if((!t.__zr||t.__hostTarget)&&t!==this){var e=this.__zr;e&&t.addSelfToZr(e),t.__zr=e,t.__hostTarget=this}},t.prototype._detachComponent=function(t){t.__zr&&t.removeSelfFromZr(t.__zr),t.__zr=null,t.__hostTarget=null},t.prototype.getClipPath=function(){return this._clipPath},t.prototype.setClipPath=function(t){this._clipPath&&this._clipPath!==t&&this.removeClipPath(),this._attachComponent(t),this._clipPath=t,this.markRedraw()},t.prototype.removeClipPath=function(){var t=this._clipPath;t&&(this._detachComponent(t),this._clipPath=null,this.markRedraw())},t.prototype.getTextContent=function(){return this._textContent},t.prototype.setTextContent=function(t){var e=this._textContent;e!==t&&(e&&e!==t&&this.removeTextContent(),t.innerTransformable=new ur,this._attachComponent(t),this._textContent=t,this.markRedraw())},t.prototype.setTextConfig=function(t){this.textConfig||(this.textConfig={}),I(this.textConfig,t),this.markRedraw()},t.prototype.removeTextConfig=function(){this.textConfig=null,this.markRedraw()},t.prototype.removeTextContent=function(){var t=this._textContent;t&&(t.innerTransformable=null,this._detachComponent(t),this._textContent=null,this._innerTextDefaultStyle=null,this.markRedraw())},t.prototype.getTextGuideLine=function(){return this._textGuide},t.prototype.setTextGuideLine=function(t){this._textGuide&&this._textGuide!==t&&this.removeTextGuideLine(),this._attachComponent(t),this._textGuide=t,this.markRedraw()},t.prototype.removeTextGuideLine=function(){var t=this._textGuide;t&&(this._detachComponent(t),this._textGuide=null,this.markRedraw())},t.prototype.markRedraw=function(){this.__dirty|=1;var t=this.__zr;t&&(this.__inHover?t.refreshHover():t.refresh()),this.__hostTarget&&this.__hostTarget.markRedraw()},t.prototype.dirty=function(){this.markRedraw()},t.prototype._toggleHoverLayerFlag=function(t){this.__inHover=t;var e=this._textContent,n=this._textGuide;e&&(e.__inHover=t),n&&(n.__inHover=t)},t.prototype.addSelfToZr=function(t){if(this.__zr!==t){this.__zr=t;var e=this.animators;if(e)for(var n=0;n<e.length;n++)t.animation.addAnimator(e[n]);this._clipPath&&this._clipPath.addSelfToZr(t),this._textContent&&this._textContent.addSelfToZr(t),this._textGuide&&this._textGuide.addSelfToZr(t)}},t.prototype.removeSelfFromZr=function(t){if(this.__zr){this.__zr=null;var e=this.animators;if(e)for(var n=0;n<e.length;n++)t.animation.removeAnimator(e[n]);this._clipPath&&this._clipPath.removeSelfFromZr(t),this._textContent&&this._textContent.removeSelfFromZr(t),this._textGuide&&this._textGuide.removeSelfFromZr(t)}},t.prototype.animate=function(t,e,n){var i=t?this[t]:this,r=new Pi(i,e,n);return t&&(r.targetName=t),this.addAnimator(r,t),r},t.prototype.addAnimator=function(t,e){var n=this.__zr,i=this;t.during((function(){i.updateDuringAnimation(e)})).done((function(){var e=i.animators,n=D(e,t);n>=0&&e.splice(n,1)})),this.animators.push(t),n&&n.animation.addAnimator(t),n&&n.wakeUp()},t.prototype.updateDuringAnimation=function(t){this.markRedraw()},t.prototype.stopAnimation=function(t,e){for(var n=this.animators,i=n.length,r=[],o=0;o<i;o++){var a=n[o];t&&t!==a.scope?r.push(a):a.stop(e)}return this.animators=r,this},t.prototype.animateTo=function(t,e,n){Tr(this,t,e,n)},t.prototype.animateFrom=function(t,e,n){Tr(this,t,e,n,!0)},t.prototype._transitionState=function(t,e,n,i){for(var r=Tr(this,e,n,i),o=0;o<r.length;o++)r[o].__fromStateTransition=t},t.prototype.getBoundingRect=function(){return null},t.prototype.getPaintRect=function(){return null},t.initDefaultProps=function(){var e=t.prototype;function n(t,n,i,r){function o(t,e){Object.defineProperty(e,0,{get:function(){return t[i]},set:function(e){t[i]=e}}),Object.defineProperty(e,1,{get:function(){return t[r]},set:function(e){t[r]=e}})}Object.defineProperty(e,t,{get:function(){return this[n]||o(this,this[n]=[]),this[n]},set:function(t){this[i]=t[0],this[r]=t[1],this[n]=t,o(this,t)}})}e.type="element",e.name="",e.ignore=e.silent=e.isGroup=e.draggable=e.dragging=e.ignoreClip=e.__inHover=!1,e.__dirty=1,Object.defineProperty&&(n("position","_legacyPos","x","y"),n("scale","_legacyScale","scaleX","scaleY"),n("origin","_legacyOrigin","originX","originY"))}(),t}();function Tr(t,e,n,i,r){var o=[];Or(t,"",t,e,n=n||{},i,o,r);var a=o.length,s=!1,l=n.done,c=n.aborted,u=function(){s=!0,--a<=0&&(s?l&&l():c&&c())},h=function(){--a<=0&&(s?l&&l():c&&c())};a||l&&l(),o.length>0&&n.during&&o[0].during((function(t,e){n.during(e)}));for(var d=0;d<o.length;d++){var p=o[d];u&&p.done(u),h&&p.aborted(h),n.force&&p.duration(n.duration),p.start(n.easing)}return o}function Ir(t,e,n){for(var i=0;i<n;i++)t[i]=e[i]}function Er(t,e,n){if(N(e[n]))if(N(t[n])||(t[n]=[]),K(e[n])){var i=e[n].length;t[n].length!==i&&(t[n]=new e[n].constructor(i),Ir(t[n],e[n],i))}else{var r=e[n],o=t[n],a=r.length;if(N(r[0]))for(var s=r[0].length,l=0;l<a;l++)o[l]?Ir(o[l],r[l],s):o[l]=Array.prototype.slice.call(r[l]);else Ir(o,r,a);o.length=r.length}else t[n]=e[n]}function Or(t,e,n,i,r,o,a,s){for(var l=H(i),c=r.duration,u=r.delay,h=r.additive,d=r.setToFinal,p=!$(o),f=t.animators,g=[],m=0;m<l.length;m++){var v=l[m],y=i[v];if(null!=y&&null!=n[v]&&(p||o[v]))if(!$(y)||N(y)||J(y))g.push(v);else{if(e){s||(n[v]=y,t.updateDuringAnimation(e));continue}Or(t,v,n[v],y,r,o&&o[v],a,s)}else s||(n[v]=y,t.updateDuringAnimation(e),g.push(v))}var b=g.length;if(!h&&b)for(var x=0;x<f.length;x++)if((w=f[x]).targetName===e&&w.stopTracks(g)){var _=D(f,w);f.splice(_,1)}if(r.force||(g=F(g,(function(t){return!((e=i[t])===(r=n[t])||N(e)&&N(r)&&function(t,e){var n=t.length;if(n!==e.length)return!1;for(var i=0;i<n;i++)if(t[i]!==e[i])return!1;return!0}(e,r));var e,r})),b=g.length),b>0||r.force&&!a.length){var w,S=void 0,C=void 0,k=void 0;if(s)for(C={},d&&(S={}),x=0;x<b;x++)C[v=g[x]]=n[v],d?S[v]=i[v]:n[v]=i[v];else if(d)for(k={},x=0;x<b;x++)k[v=g[x]]=Ti(n[v]),Er(n,i,v);(w=new Pi(n,!1,!1,h?F(f,(function(t){return t.targetName===e})):null)).targetName=e,r.scope&&(w.scope=r.scope),d&&S&&w.whenWithKeys(0,S,g),k&&w.whenWithKeys(0,k,g),w.whenWithKeys(null==c?500:c,s?C:i,g).delay(u||0),t.addAnimator(w,e),a.push(w)}}P(Mr,Ut),P(Mr,ur);var Dr=function(t){function e(e){var n=t.call(this)||this;return n.isGroup=!0,n._children=[],n.attr(e),n}return n(e,t),e.prototype.childrenRef=function(){return this._children},e.prototype.children=function(){return this._children.slice()},e.prototype.childAt=function(t){return this._children[t]},e.prototype.childOfName=function(t){for(var e=this._children,n=0;n<e.length;n++)if(e[n].name===t)return e[n]},e.prototype.childCount=function(){return this._children.length},e.prototype.add=function(t){return t&&t!==this&&t.parent!==this&&(this._children.push(t),this._doAdd(t)),this},e.prototype.addBefore=function(t,e){if(t&&t!==this&&t.parent!==this&&e&&e.parent===this){var n=this._children,i=n.indexOf(e);i>=0&&(n.splice(i,0,t),this._doAdd(t))}return this},e.prototype.replace=function(t,e){var n=D(this._children,t);return n>=0&&this.replaceAt(e,n),this},e.prototype.replaceAt=function(t,e){var n=this._children,i=n[e];if(t&&t!==this&&t.parent!==this&&t!==i){n[e]=t,i.parent=null;var r=this.__zr;r&&i.removeSelfFromZr(r),this._doAdd(t)}return this},e.prototype._doAdd=function(t){t.parent&&t.parent.remove(t),t.parent=this;var e=this.__zr;e&&e!==t.__zr&&t.addSelfToZr(e),e&&e.refresh()},e.prototype.remove=function(t){var e=this.__zr,n=this._children,i=D(n,t);return i<0||(n.splice(i,1),t.parent=null,e&&t.removeSelfFromZr(e),e&&e.refresh()),this},e.prototype.removeAll=function(){for(var t=this._children,e=this.__zr,n=0;n<t.length;n++){var i=t[n];e&&i.removeSelfFromZr(e),i.parent=null}return t.length=0,this},e.prototype.eachChild=function(t,e){for(var n=this._children,i=0;i<n.length;i++){var r=n[i];t.call(e,r,i)}return this},e.prototype.traverse=function(t,e){for(var n=0;n<this._children.length;n++){var i=this._children[n],r=t.call(e,i);i.isGroup&&!r&&i.traverse(t,e)}return this},e.prototype.addSelfToZr=function(e){t.prototype.addSelfToZr.call(this,e);for(var n=0;n<this._children.length;n++)this._children[n].addSelfToZr(e)},e.prototype.removeSelfFromZr=function(e){t.prototype.removeSelfFromZr.call(this,e);for(var n=0;n<this._children.length;n++)this._children[n].removeSelfFromZr(e)},e.prototype.getBoundingRect=function(t){for(var e=new Re(0,0,0,0),n=t||this._children,i=[],r=null,o=0;o<n.length;o++){var a=n[o];if(!a.ignore&&!a.invisible){var s=a.getBoundingRect(),l=a.getLocalTransform(i);l?(Re.applyTransform(e,s,l),(r=r||e.clone()).union(e)):(r=r||s.clone()).union(s)}}return r||e},e}(Mr);Dr.prototype.type="group";
/*!
    * ZRender, a high performance 2d drawing library.
    *
    * Copyright (c) 2013, Baidu Inc.
    * All rights reserved.
    *
    * LICENSE
    * https://github.com/ecomfe/zrender/blob/master/LICENSE.txt
    */
var Lr,Pr={},Nr={},Rr=function(){function t(t,e,n){var i=this;this._sleepAfterStill=10,this._stillFrameAccum=0,this._needsRefresh=!0,this._needsRefreshHover=!0,this._darkMode=!1,n=n||{},this.dom=e,this.id=t;var o=new en,a=n.renderer||"canvas";Pr[a]||(a=H(Pr)[0]),n.useDirtyRect=null!=n.useDirtyRect&&n.useDirtyRect;var s=new Pr[a](e,o,n,t),l=n.ssr||s.ssrOnly;this.storage=o,this.painter=s;var c,u=r.node||r.worker||l?null:new Ji(s.getViewportRoot(),s.root),h=n.useCoarsePointer;(null==h||"auto"===h?r.touchEventsSupported:!!h)&&(c=rt(n.pointerSize,44)),this.handler=new je(o,s,u,s.root,c),this.animation=new zi({stage:{update:l?null:function(){return i._flush(!0)}}}),l||this.animation.start()}return t.prototype.add=function(t){!this._disposed&&t&&(this.storage.addRoot(t),t.addSelfToZr(this),this.refresh())},t.prototype.remove=function(t){!this._disposed&&t&&(this.storage.delRoot(t),t.removeSelfFromZr(this),this.refresh())},t.prototype.configLayer=function(t,e){this._disposed||(this.painter.configLayer&&this.painter.configLayer(t,e),this.refresh())},t.prototype.setBackgroundColor=function(t){this._disposed||(this.painter.setBackgroundColor&&this.painter.setBackgroundColor(t),this.refresh(),this._backgroundColor=t,this._darkMode=function(t){if(!t)return!1;if("string"==typeof t)return ni(t,1)<.4;if(t.colorStops){for(var e=t.colorStops,n=0,i=e.length,r=0;r<i;r++)n+=ni(e[r].color,1);return(n/=i)<.4}return!1}(t))},t.prototype.getBackgroundColor=function(){return this._backgroundColor},t.prototype.setDarkMode=function(t){this._darkMode=t},t.prototype.isDarkMode=function(){return this._darkMode},t.prototype.refreshImmediately=function(t){this._disposed||(t||this.animation.update(!0),this._needsRefresh=!1,this.painter.refresh(),this._needsRefresh=!1)},t.prototype.refresh=function(){this._disposed||(this._needsRefresh=!0,this.animation.start())},t.prototype.flush=function(){this._disposed||this._flush(!1)},t.prototype._flush=function(t){var e,n=Ni();this._needsRefresh&&(e=!0,this.refreshImmediately(t)),this._needsRefreshHover&&(e=!0,this.refreshHoverImmediately());var i=Ni();e?(this._stillFrameAccum=0,this.trigger("rendered",{elapsedTime:i-n})):this._sleepAfterStill>0&&(this._stillFrameAccum++,this._stillFrameAccum>this._sleepAfterStill&&this.animation.stop())},t.prototype.setSleepAfterStill=function(t){this._sleepAfterStill=t},t.prototype.wakeUp=function(){this._disposed||(this.animation.start(),this._stillFrameAccum=0)},t.prototype.refreshHover=function(){this._needsRefreshHover=!0},t.prototype.refreshHoverImmediately=function(){this._disposed||(this._needsRefreshHover=!1,this.painter.refreshHover&&"canvas"===this.painter.getType()&&this.painter.refreshHover())},t.prototype.resize=function(t){this._disposed||(t=t||{},this.painter.resize(t.width,t.height),this.handler.resize())},t.prototype.clearAnimation=function(){this._disposed||this.animation.clear()},t.prototype.getWidth=function(){if(!this._disposed)return this.painter.getWidth()},t.prototype.getHeight=function(){if(!this._disposed)return this.painter.getHeight()},t.prototype.setCursorStyle=function(t){this._disposed||this.handler.setCursorStyle(t)},t.prototype.findHover=function(t,e){if(!this._disposed)return this.handler.findHover(t,e)},t.prototype.on=function(t,e,n){return this._disposed||this.handler.on(t,e,n),this},t.prototype.off=function(t,e){this._disposed||this.handler.off(t,e)},t.prototype.trigger=function(t,e){this._disposed||this.handler.trigger(t,e)},t.prototype.clear=function(){if(!this._disposed){for(var t=this.storage.getRoots(),e=0;e<t.length;e++)t[e]instanceof Dr&&t[e].removeSelfFromZr(this);this.storage.delAllRoots(),this.painter.clear()}},t.prototype.dispose=function(){var t;this._disposed||(this.animation.stop(),this.clear(),this.storage.dispose(),this.painter.dispose(),this.handler.dispose(),this.animation=this.storage=this.painter=this.handler=null,this._disposed=!0,t=this.id,delete Nr[t])},t}();function Br(t,e){var n=new Rr(C(),t,e);return Nr[n.id]=n,n}function zr(t,e){Pr[t]=e}function Fr(t){if("function"==typeof Lr)return Lr(t)}function Vr(t){Lr=t}var Hr=Object.freeze({__proto__:null,init:Br,dispose:function(t){t.dispose()},disposeAll:function(){for(var t in Nr)Nr.hasOwnProperty(t)&&Nr[t].dispose();Nr={}},getInstance:function(t){return Nr[t]},registerPainter:zr,getElementSSRData:Fr,registerSSRDataGetter:Vr,version:"5.5.0"});function Wr(t,e,n,i){var r=e[0],o=e[1],a=n[0],s=n[1],l=o-r,c=s-a;if(0===l)return 0===c?a:(a+s)/2;if(i)if(l>0){if(t<=r)return a;if(t>=o)return s}else{if(t>=r)return a;if(t<=o)return s}else{if(t===r)return a;if(t===o)return s}return(t-r)/l*c+a}function jr(t,e){switch(t){case"center":case"middle":t="50%";break;case"left":case"top":t="0%";break;case"right":case"bottom":t="100%"}return G(t)?(n=t,n.replace(/^\s+|\s+$/g,"")).match(/%$/)?parseFloat(t)/100*e:parseFloat(t):null==t?NaN:+t;var n}function Yr(t,e,n){return null==e&&(e=10),e=Math.min(Math.max(0,e),20),t=(+t).toFixed(e),n?t:+t}function Xr(t){return t.sort((function(t,e){return t-e})),t}function Gr(t){if(t=+t,isNaN(t))return 0;if(t>1e-14)for(var e=1,n=0;n<15;n++,e*=10)if(Math.round(t*e)/e===t)return n;return qr(t)}function qr(t){var e=t.toString().toLowerCase(),n=e.indexOf("e"),i=n>0?+e.slice(n+1):0,r=n>0?n:e.length,o=e.indexOf("."),a=o<0?0:r-1-o;return Math.max(0,a-i)}function Ur(t,e){var n=Math.log,i=Math.LN10,r=Math.floor(n(t[1]-t[0])/i),o=Math.round(n(Math.abs(e[1]-e[0]))/i),a=Math.min(Math.max(-r+o,0),20);return isFinite(a)?a:20}function $r(t,e){var n=z(t,(function(t,e){return t+(isNaN(e)?0:e)}),0);if(0===n)return[];for(var i=Math.pow(10,e),r=B(t,(function(t){return(isNaN(t)?0:t)/n*i*100})),o=100*i,a=B(r,(function(t){return Math.floor(t)})),s=z(a,(function(t,e){return t+e}),0),l=B(r,(function(t,e){return t-a[e]}));s<o;){for(var c=Number.NEGATIVE_INFINITY,u=null,h=0,d=l.length;h<d;++h)l[h]>c&&(c=l[h],u=h);++a[u],l[u]=0,++s}return B(a,(function(t){return t/i}))}function Zr(t,e){var n=Math.max(Gr(t),Gr(e)),i=t+e;return n>20?i:Yr(i,n)}var Kr=9007199254740991;function Qr(t){var e=2*Math.PI;return(t%e+e)%e}function Jr(t){return t>-1e-4&&t<1e-4}var to=/^(?:(\d{4})(?:[-\/](\d{1,2})(?:[-\/](\d{1,2})(?:[T ](\d{1,2})(?::(\d{1,2})(?::(\d{1,2})(?:[.,](\d+))?)?)?(Z|[\+\-]\d\d:?\d\d)?)?)?)?)?$/;function eo(t){if(t instanceof Date)return t;if(G(t)){var e=to.exec(t);if(!e)return new Date(NaN);if(e[8]){var n=+e[4]||0;return"Z"!==e[8].toUpperCase()&&(n-=+e[8].slice(0,3)),new Date(Date.UTC(+e[1],+(e[2]||1)-1,+e[3]||1,n,+(e[5]||0),+e[6]||0,e[7]?+e[7].substring(0,3):0))}return new Date(+e[1],+(e[2]||1)-1,+e[3]||1,+e[4]||0,+(e[5]||0),+e[6]||0,e[7]?+e[7].substring(0,3):0)}return null==t?new Date(NaN):new Date(Math.round(t))}function no(t){return Math.pow(10,io(t))}function io(t){if(0===t)return 0;var e=Math.floor(Math.log(t)/Math.LN10);return t/Math.pow(10,e)>=10&&e++,e}function ro(t,e){var n=io(t),i=Math.pow(10,n),r=t/i;return t=(e?r<1.5?1:r<2.5?2:r<4?3:r<7?5:10:r<1?1:r<2?2:r<3?3:r<5?5:10)*i,n>=-20?+t.toFixed(n<0?-n:0):t}function oo(t,e){var n=(t.length-1)*e+1,i=Math.floor(n),r=+t[i-1],o=n-i;return o?r+o*(t[i]-r):r}function ao(t){t.sort((function(t,e){return s(t,e,0)?-1:1}));for(var e=-1/0,n=1,i=0;i<t.length;){for(var r=t[i].interval,o=t[i].close,a=0;a<2;a++)r[a]<=e&&(r[a]=e,o[a]=a?1:1-n),e=r[a],n=o[a];r[0]===r[1]&&o[0]*o[1]!=1?t.splice(i,1):i++}return t;function s(t,e,n){return t.interval[n]<e.interval[n]||t.interval[n]===e.interval[n]&&(t.close[n]-e.close[n]==(n?-1:1)||!n&&s(t,e,1))}}function so(t){var e=parseFloat(t);return e==t&&(0!==e||!G(t)||t.indexOf("x")<=0)?e:NaN}function lo(t){return!isNaN(so(t))}function co(){return Math.round(9*Math.random())}function uo(t,e){return 0===e?t:uo(e,t%e)}function ho(t,e){return null==t?e:null==e?t:t*e/uo(t,e)}function po(t){throw new Error(t)}function fo(t,e,n){return(e-t)*n+t}"undefined"!=typeof console&&console.warn&&console.log;var go="series\0",mo="\0_ec_\0";function vo(t){return t instanceof Array?t:null==t?[]:[t]}function yo(t,e,n){if(t){t[e]=t[e]||{},t.emphasis=t.emphasis||{},t.emphasis[e]=t.emphasis[e]||{};for(var i=0,r=n.length;i<r;i++){var o=n[i];!t.emphasis[e].hasOwnProperty(o)&&t[e].hasOwnProperty(o)&&(t.emphasis[e][o]=t[e][o])}}}var bo=["fontStyle","fontWeight","fontSize","fontFamily","rich","tag","color","textBorderColor","textBorderWidth","width","height","lineHeight","align","verticalAlign","baseline","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY","backgroundColor","borderColor","borderWidth","borderRadius","padding"];function xo(t){return!$(t)||Y(t)||t instanceof Date?t:t.value}function _o(t){return $(t)&&!(t instanceof Array)}function wo(t,e,n){var i="normalMerge"===n,r="replaceMerge"===n,o="replaceAll"===n;t=t||[],e=(e||[]).slice();var a=mt();R(e,(function(t,n){$(t)||(e[n]=null)}));var s,l,c=function(t,e,n){var i=[];if("replaceAll"===n)return i;for(var r=0;r<t.length;r++){var o=t[r];o&&null!=o.id&&e.set(o.id,r),i.push({existing:"replaceMerge"===n||Mo(o)?null:o,newOption:null,keyInfo:null,brandNew:null})}return i}(t,a,n);return(i||r)&&function(t,e,n,i){R(i,(function(r,o){if(r&&null!=r.id){var a=Co(r.id),s=n.get(a);if(null!=s){var l=t[s];lt(!l.newOption,'Duplicated option on id "'+a+'".'),l.newOption=r,l.existing=e[s],i[o]=null}}}))}(c,t,a,e),i&&function(t,e){R(e,(function(n,i){if(n&&null!=n.name)for(var r=0;r<t.length;r++){var o=t[r].existing;if(!t[r].newOption&&o&&(null==o.id||null==n.id)&&!Mo(n)&&!Mo(o)&&So("name",o,n))return t[r].newOption=n,void(e[i]=null)}}))}(c,e),i||r?function(t,e,n){R(e,(function(e){if(e){for(var i,r=0;(i=t[r])&&(i.newOption||Mo(i.existing)||i.existing&&null!=e.id&&!So("id",e,i.existing));)r++;i?(i.newOption=e,i.brandNew=n):t.push({newOption:e,brandNew:n,existing:null,keyInfo:null}),r++}}))}(c,e,r):o&&function(t,e){R(e,(function(e){t.push({newOption:e,brandNew:!0,existing:null,keyInfo:null})}))}(c,e),s=c,l=mt(),R(s,(function(t){var e=t.existing;e&&l.set(e.id,t)})),R(s,(function(t){var e=t.newOption;lt(!e||null==e.id||!l.get(e.id)||l.get(e.id)===t,"id duplicates: "+(e&&e.id)),e&&null!=e.id&&l.set(e.id,t),!t.keyInfo&&(t.keyInfo={})})),R(s,(function(t,e){var n=t.existing,i=t.newOption,r=t.keyInfo;if($(i)){if(r.name=null!=i.name?Co(i.name):n?n.name:go+e,n)r.id=Co(n.id);else if(null!=i.id)r.id=Co(i.id);else{var o=0;do{r.id="\0"+r.name+"\0"+o++}while(l.get(r.id))}l.set(r.id,t)}})),c}function So(t,e,n){var i=ko(e[t],null),r=ko(n[t],null);return null!=i&&null!=r&&i===r}function Co(t){return ko(t,"")}function ko(t,e){return null==t?e:G(t)?t:U(t)||q(t)?t+"":e}function Ao(t){var e=t.name;return!(!e||!e.indexOf(go))}function Mo(t){return t&&null!=t.id&&0===Co(t.id).indexOf(mo)}function To(t,e){return null!=e.dataIndexInside?e.dataIndexInside:null!=e.dataIndex?Y(e.dataIndex)?B(e.dataIndex,(function(e){return t.indexOfRawIndex(e)})):t.indexOfRawIndex(e.dataIndex):null!=e.name?Y(e.name)?B(e.name,(function(e){return t.indexOfName(e)})):t.indexOfName(e.name):void 0}function Io(){var t="__ec_inner_"+Eo++;return function(e){return e[t]||(e[t]={})}}var Eo=co();function Oo(t,e,n){var i=Do(e,n),r=i.mainTypeSpecified,o=i.queryOptionMap,a=i.others,s=n?n.defaultMainType:null;return!r&&s&&o.set(s,{}),o.each((function(e,i){var r=No(t,i,e,{useDefault:s===i,enableAll:!n||null==n.enableAll||n.enableAll,enableNone:!n||null==n.enableNone||n.enableNone});a[i+"Models"]=r.models,a[i+"Model"]=r.models[0]})),a}function Do(t,e){var n;if(G(t)){var i={};i[t+"Index"]=0,n=i}else n=t;var r=mt(),o={},a=!1;return R(n,(function(t,n){if("dataIndex"!==n&&"dataIndexInside"!==n){var i=n.match(/^(\w+)(Index|Id|Name)$/)||[],s=i[1],l=(i[2]||"").toLowerCase();!s||!l||e&&e.includeMainTypes&&D(e.includeMainTypes,s)<0||(a=a||!!s,(r.get(s)||r.set(s,{}))[l]=t)}else o[n]=t})),{mainTypeSpecified:a,queryOptionMap:r,others:o}}var Lo={useDefault:!0,enableAll:!1,enableNone:!1},Po={useDefault:!1,enableAll:!0,enableNone:!0};function No(t,e,n,i){i=i||Lo;var r=n.index,o=n.id,a=n.name,s={models:null,specified:null!=r||null!=o||null!=a};if(!s.specified){var l=void 0;return s.models=i.useDefault&&(l=t.getComponent(e))?[l]:[],s}return"none"===r||!1===r?(lt(i.enableNone,'`"none"` or `false` is not a valid value on index option.'),s.models=[],s):("all"===r&&(lt(i.enableAll,'`"all"` is not a valid value on index option.'),r=o=a=null),s.models=t.queryComponents({mainType:e,index:r,id:o,name:a}),s)}function Ro(t,e,n){t.setAttribute?t.setAttribute(e,n):t[e]=n}function Bo(t,e){var n=mt(),i=[];return R(t,(function(t){var r=e(t);(n.get(r)||(i.push(r),n.set(r,[]))).push(t)})),{keys:i,buckets:n}}function zo(t,e,n,i,r){var o=null==e||"auto"===e;if(null==i)return i;if(U(i))return Yr(f=fo(n||0,i,r),o?Math.max(Gr(n||0),Gr(i)):e);if(G(i))return r<1?n:i;for(var a=[],s=n,l=i,c=Math.max(s?s.length:0,l.length),u=0;u<c;++u){var h=t.getDimensionInfo(u);if(h&&"ordinal"===h.type)a[u]=(r<1&&s?s:l)[u];else{var d=s&&s[u]?s[u]:0,p=l[u],f=fo(d,p,r);a[u]=Yr(f,o?Math.max(Gr(d),Gr(p)):e)}}return a}var Fo="___EC__COMPONENT__CONTAINER___",Vo="___EC__EXTENDED_CLASS___";function Ho(t){var e={main:"",sub:""};if(t){var n=t.split(".");e.main=n[0]||"",e.sub=n[1]||""}return e}function Wo(t,e){t.$constructor=t,t.extend=function(t){var e,i,r=this;return X(i=r)&&/^class\s/.test(Function.prototype.toString.call(i))?e=function(t){function e(){return t.apply(this,arguments)||this}return n(e,t),e}(r):(e=function(){(t.$constructor||r).apply(this,arguments)},L(e,this)),I(e.prototype,t),e[Vo]=!0,e.extend=this.extend,e.superCall=Xo,e.superApply=Go,e.superClass=r,e}}function jo(t,e){t.extend=e.extend}var Yo=Math.round(10*Math.random());function Xo(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];return this.superClass.prototype[e].apply(t,n)}function Go(t,e,n){return this.superClass.prototype[e].apply(t,n)}function qo(t){var e={};t.registerClass=function(t){var n,i=t.type||t.prototype.type;if(i){lt(/^[a-zA-Z0-9_]+([.][a-zA-Z0-9_]+)?$/.test(n=i),'componentType "'+n+'" illegal'),t.prototype.type=i;var r=Ho(i);if(r.sub){if(r.sub!==Fo){var o=function(t){var n=e[t.main];return n&&n[Fo]||((n=e[t.main]={})[Fo]=!0),n}(r);o[r.sub]=t}}else e[r.main]=t}return t},t.getClass=function(t,n,i){var r=e[t];if(r&&r[Fo]&&(r=n?r[n]:null),i&&!r)throw new Error(n?"Component "+t+"."+(n||"")+" is used but not imported.":t+".type should be specified.");return r},t.getClassesByMainType=function(t){var n=Ho(t),i=[],r=e[n.main];return r&&r[Fo]?R(r,(function(t,e){e!==Fo&&i.push(t)})):i.push(r),i},t.hasClass=function(t){var n=Ho(t);return!!e[n.main]},t.getAllClassMainTypes=function(){var t=[];return R(e,(function(e,n){t.push(n)})),t},t.hasSubTypes=function(t){var n=Ho(t),i=e[n.main];return i&&i[Fo]}}function Uo(t,e){for(var n=0;n<t.length;n++)t[n][1]||(t[n][1]=t[n][0]);return e=e||!1,function(n,i,r){for(var o={},a=0;a<t.length;a++){var s=t[a][1];if(!(i&&D(i,s)>=0||r&&D(r,s)<0)){var l=n.getShallow(s,e);null!=l&&(o[t[a][0]]=l)}}return o}}var $o=Uo([["fill","color"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["opacity"],["shadowColor"]]),Zo=function(){function t(){}return t.prototype.getAreaStyle=function(t,e){return $o(this,t,e)},t}(),Ko=new Ln(50);function Qo(t){if("string"==typeof t){var e=Ko.get(t);return e&&e.image}return t}function Jo(t,e,n,i,r){if(t){if("string"==typeof t){if(e&&e.__zrImageSrc===t||!n)return e;var o=Ko.get(t),a={hostEl:n,cb:i,cbPayload:r};return o?!ea(e=o.image)&&o.pending.push(a):((e=u.loadImage(t,ta,ta)).__zrImageSrc=t,Ko.put(t,e.__cachedImgObj={image:e,pending:[a]})),e}return t}return e}function ta(){var t=this.__cachedImgObj;this.onload=this.onerror=this.__cachedImgObj=null;for(var e=0;e<t.pending.length;e++){var n=t.pending[e],i=n.cb;i&&i(this,n.cbPayload),n.hostEl.dirty()}t.pending.length=0}function ea(t){return t&&t.width&&t.height}var na=/\{([a-zA-Z0-9_]+)\|([^}]*)\}/g;function ia(t,e,n,i,r){if(!e)return"";var o=(t+"").split("\n");r=ra(e,n,i,r);for(var a=0,s=o.length;a<s;a++)o[a]=oa(o[a],r);return o.join("\n")}function ra(t,e,n,i){var r=I({},i=i||{});r.font=e,n=rt(n,"..."),r.maxIterations=rt(i.maxIterations,2);var o=r.minChar=rt(i.minChar,0);r.cnCharWidth=fr("",e);var a=r.ascCharWidth=fr("a",e);r.placeholder=rt(i.placeholder,"");for(var s=t=Math.max(0,t-1),l=0;l<o&&s>=a;l++)s-=a;var c=fr(n,e);return c>s&&(n="",c=0),s=t-c,r.ellipsis=n,r.ellipsisWidth=c,r.contentWidth=s,r.containerWidth=t,r}function oa(t,e){var n=e.containerWidth,i=e.font,r=e.contentWidth;if(!n)return"";var o=fr(t,i);if(o<=n)return t;for(var a=0;;a++){if(o<=r||a>=e.maxIterations){t+=e.ellipsis;break}var s=0===a?aa(t,r,e.ascCharWidth,e.cnCharWidth):o>0?Math.floor(t.length*r/o):0;o=fr(t=t.substr(0,s),i)}return""===t&&(t=e.placeholder),t}function aa(t,e,n,i){for(var r=0,o=0,a=t.length;o<a&&r<e;o++){var s=t.charCodeAt(o);r+=0<=s&&s<=127?n:i}return o}var sa=function(){},la=function(t){this.tokens=[],t&&(this.tokens=t)},ca=function(){this.width=0,this.height=0,this.contentWidth=0,this.contentHeight=0,this.outerWidth=0,this.outerHeight=0,this.lines=[]};function ua(t,e,n,i,r){var o,a,s=""===e,l=r&&n.rich[r]||{},c=t.lines,u=l.font||n.font,h=!1;if(i){var d=l.padding,p=d?d[1]+d[3]:0;if(null!=l.width&&"auto"!==l.width){var f=xr(l.width,i.width)+p;c.length>0&&f+i.accumWidth>i.width&&(o=e.split("\n"),h=!0),i.accumWidth=f}else{var g=pa(e,u,i.width,i.breakAll,i.accumWidth);i.accumWidth=g.accumWidth+p,a=g.linesWidths,o=g.lines}}else o=e.split("\n");for(var m=0;m<o.length;m++){var v=o[m],y=new sa;if(y.styleName=r,y.text=v,y.isLineHolder=!v&&!s,"number"==typeof l.width?y.width=l.width:y.width=a?a[m]:fr(v,u),m||h)c.push(new la([y]));else{var b=(c[c.length-1]||(c[0]=new la)).tokens,x=b.length;1===x&&b[0].isLineHolder?b[0]=y:(v||!x||s)&&b.push(y)}}}var ha=z(",&?/;] ".split(""),(function(t,e){return t[e]=!0,t}),{});function da(t){return!function(t){var e=t.charCodeAt(0);return e>=32&&e<=591||e>=880&&e<=4351||e>=4608&&e<=5119||e>=7680&&e<=8303}(t)||!!ha[t]}function pa(t,e,n,i,r){for(var o=[],a=[],s="",l="",c=0,u=0,h=0;h<t.length;h++){var d=t.charAt(h);if("\n"!==d){var p=fr(d,e),f=!i&&!da(d);(o.length?u+p>n:r+u+p>n)?u?(s||l)&&(f?(s||(s=l,l="",u=c=0),o.push(s),a.push(u-c),l+=d,s="",u=c+=p):(l&&(s+=l,l="",c=0),o.push(s),a.push(u),s=d,u=p)):f?(o.push(l),a.push(c),l=d,c=p):(o.push(d),a.push(p)):(u+=p,f?(l+=d,c+=p):(l&&(s+=l,l="",c=0),s+=d))}else l&&(s+=l,u+=c),o.push(s),a.push(u),s="",l="",c=0,u=0}return o.length||s||(s=t,l="",c=0),l&&(s+=l),s&&(o.push(s),a.push(u)),1===o.length&&(u+=r),{accumWidth:u,lines:o,linesWidths:a}}var fa="__zr_style_"+Math.round(10*Math.random()),ga={shadowBlur:0,shadowOffsetX:0,shadowOffsetY:0,shadowColor:"#000",opacity:1,blend:"source-over"},ma={style:{shadowBlur:!0,shadowOffsetX:!0,shadowOffsetY:!0,shadowColor:!0,opacity:!0}};ga[fa]=!0;var va=["z","z2","invisible"],ya=["invisible"],ba=function(t){function e(e){return t.call(this,e)||this}var i;return n(e,t),e.prototype._init=function(e){for(var n=H(e),i=0;i<n.length;i++){var r=n[i];"style"===r?this.useStyle(e[r]):t.prototype.attrKV.call(this,r,e[r])}this.style||this.useStyle({})},e.prototype.beforeBrush=function(){},e.prototype.afterBrush=function(){},e.prototype.innerBeforeBrush=function(){},e.prototype.innerAfterBrush=function(){},e.prototype.shouldBePainted=function(t,e,n,i){var r=this.transform;if(this.ignore||this.invisible||0===this.style.opacity||this.culling&&function(t,e,n){return xa.copy(t.getBoundingRect()),t.transform&&xa.applyTransform(t.transform),_a.width=e,_a.height=n,!xa.intersect(_a)}(this,t,e)||r&&!r[0]&&!r[3])return!1;if(n&&this.__clipPaths)for(var o=0;o<this.__clipPaths.length;++o)if(this.__clipPaths[o].isZeroArea())return!1;if(i&&this.parent)for(var a=this.parent;a;){if(a.ignore)return!1;a=a.parent}return!0},e.prototype.contain=function(t,e){return this.rectContain(t,e)},e.prototype.traverse=function(t,e){t.call(e,this)},e.prototype.rectContain=function(t,e){var n=this.transformCoordToLocal(t,e);return this.getBoundingRect().contain(n[0],n[1])},e.prototype.getPaintRect=function(){var t=this._paintRect;if(!this._paintRect||this.__dirty){var e=this.transform,n=this.getBoundingRect(),i=this.style,r=i.shadowBlur||0,o=i.shadowOffsetX||0,a=i.shadowOffsetY||0;t=this._paintRect||(this._paintRect=new Re(0,0,0,0)),e?Re.applyTransform(t,n,e):t.copy(n),(r||o||a)&&(t.width+=2*r+Math.abs(o),t.height+=2*r+Math.abs(a),t.x=Math.min(t.x,t.x+o-r),t.y=Math.min(t.y,t.y+a-r));var s=this.dirtyRectTolerance;t.isZero()||(t.x=Math.floor(t.x-s),t.y=Math.floor(t.y-s),t.width=Math.ceil(t.width+1+2*s),t.height=Math.ceil(t.height+1+2*s))}return t},e.prototype.setPrevPaintRect=function(t){t?(this._prevPaintRect=this._prevPaintRect||new Re(0,0,0,0),this._prevPaintRect.copy(t)):this._prevPaintRect=null},e.prototype.getPrevPaintRect=function(){return this._prevPaintRect},e.prototype.animateStyle=function(t){return this.animate("style",t)},e.prototype.updateDuringAnimation=function(t){"style"===t?this.dirtyStyle():this.markRedraw()},e.prototype.attrKV=function(e,n){"style"!==e?t.prototype.attrKV.call(this,e,n):this.style?this.setStyle(n):this.useStyle(n)},e.prototype.setStyle=function(t,e){return"string"==typeof t?this.style[t]=e:I(this.style,t),this.dirtyStyle(),this},e.prototype.dirtyStyle=function(t){t||this.markRedraw(),this.__dirty|=2,this._rect&&(this._rect=null)},e.prototype.dirty=function(){this.dirtyStyle()},e.prototype.styleChanged=function(){return!!(2&this.__dirty)},e.prototype.styleUpdated=function(){this.__dirty&=-3},e.prototype.createStyle=function(t){return yt(ga,t)},e.prototype.useStyle=function(t){t[fa]||(t=this.createStyle(t)),this.__inHover?this.__hoverStyle=t:this.style=t,this.dirtyStyle()},e.prototype.isStyleObject=function(t){return t[fa]},e.prototype._innerSaveToNormal=function(e){t.prototype._innerSaveToNormal.call(this,e);var n=this._normalState;e.style&&!n.style&&(n.style=this._mergeStyle(this.createStyle(),this.style)),this._savePrimaryToNormal(e,n,va)},e.prototype._applyStateObj=function(e,n,i,r,o,a){t.prototype._applyStateObj.call(this,e,n,i,r,o,a);var s,l=!(n&&r);if(n&&n.style?o?r?s=n.style:(s=this._mergeStyle(this.createStyle(),i.style),this._mergeStyle(s,n.style)):(s=this._mergeStyle(this.createStyle(),r?this.style:i.style),this._mergeStyle(s,n.style)):l&&(s=i.style),s)if(o){var c=this.style;if(this.style=this.createStyle(l?{}:c),l)for(var u=H(c),h=0;h<u.length;h++)(p=u[h])in s&&(s[p]=s[p],this.style[p]=c[p]);var d=H(s);for(h=0;h<d.length;h++){var p=d[h];this.style[p]=this.style[p]}this._transitionState(e,{style:s},a,this.getAnimationStyleProps())}else this.useStyle(s);var f=this.__inHover?ya:va;for(h=0;h<f.length;h++)p=f[h],n&&null!=n[p]?this[p]=n[p]:l&&null!=i[p]&&(this[p]=i[p])},e.prototype._mergeStates=function(e){for(var n,i=t.prototype._mergeStates.call(this,e),r=0;r<e.length;r++){var o=e[r];o.style&&(n=n||{},this._mergeStyle(n,o.style))}return n&&(i.style=n),i},e.prototype._mergeStyle=function(t,e){return I(t,e),t},e.prototype.getAnimationStyleProps=function(){return ma},e.initDefaultProps=((i=e.prototype).type="displayable",i.invisible=!1,i.z=0,i.z2=0,i.zlevel=0,i.culling=!1,i.cursor="pointer",i.rectHover=!1,i.incremental=!1,i._rect=null,i.dirtyRectTolerance=0,void(i.__dirty=3)),e}(Mr),xa=new Re(0,0,0,0),_a=new Re(0,0,0,0),wa=Math.min,Sa=Math.max,Ca=Math.sin,ka=Math.cos,Aa=2*Math.PI,Ma=Ct(),Ta=Ct(),Ia=Ct();function Ea(t,e,n){if(0!==t.length){for(var i=t[0],r=i[0],o=i[0],a=i[1],s=i[1],l=1;l<t.length;l++)i=t[l],r=wa(r,i[0]),o=Sa(o,i[0]),a=wa(a,i[1]),s=Sa(s,i[1]);e[0]=r,e[1]=a,n[0]=o,n[1]=s}}function Oa(t,e,n,i,r,o){r[0]=wa(t,n),r[1]=wa(e,i),o[0]=Sa(t,n),o[1]=Sa(e,i)}var Da=[],La=[];function Pa(t,e,n,i,r,o,a,s,l,c){var u=yn,h=gn,d=u(t,n,r,a,Da);l[0]=1/0,l[1]=1/0,c[0]=-1/0,c[1]=-1/0;for(var p=0;p<d;p++){var f=h(t,n,r,a,Da[p]);l[0]=wa(f,l[0]),c[0]=Sa(f,c[0])}for(d=u(e,i,o,s,La),p=0;p<d;p++){var g=h(e,i,o,s,La[p]);l[1]=wa(g,l[1]),c[1]=Sa(g,c[1])}l[0]=wa(t,l[0]),c[0]=Sa(t,c[0]),l[0]=wa(a,l[0]),c[0]=Sa(a,c[0]),l[1]=wa(e,l[1]),c[1]=Sa(e,c[1]),l[1]=wa(s,l[1]),c[1]=Sa(s,c[1])}function Na(t,e,n,i,r,o,a,s){var l=Cn,c=wn,u=Sa(wa(l(t,n,r),1),0),h=Sa(wa(l(e,i,o),1),0),d=c(t,n,r,u),p=c(e,i,o,h);a[0]=wa(t,r,d),a[1]=wa(e,o,p),s[0]=Sa(t,r,d),s[1]=Sa(e,o,p)}function Ra(t,e,n,i,r,o,a,s,l){var c=jt,u=Yt,h=Math.abs(r-o);if(h%Aa<1e-4&&h>1e-4)return s[0]=t-n,s[1]=e-i,l[0]=t+n,void(l[1]=e+i);if(Ma[0]=ka(r)*n+t,Ma[1]=Ca(r)*i+e,Ta[0]=ka(o)*n+t,Ta[1]=Ca(o)*i+e,c(s,Ma,Ta),u(l,Ma,Ta),(r%=Aa)<0&&(r+=Aa),(o%=Aa)<0&&(o+=Aa),r>o&&!a?o+=Aa:r<o&&a&&(r+=Aa),a){var d=o;o=r,r=d}for(var p=0;p<o;p+=Math.PI/2)p>r&&(Ia[0]=ka(p)*n+t,Ia[1]=Ca(p)*i+e,c(s,Ia,s),u(l,Ia,l))}var Ba={M:1,L:2,C:3,Q:4,A:5,Z:6,R:7},za=[],Fa=[],Va=[],Ha=[],Wa=[],ja=[],Ya=Math.min,Xa=Math.max,Ga=Math.cos,qa=Math.sin,Ua=Math.abs,$a=Math.PI,Za=2*$a,Ka="undefined"!=typeof Float32Array,Qa=[];function Ja(t){return Math.round(t/$a*1e8)/1e8%2*$a}function ts(t,e){var n=Ja(t[0]);n<0&&(n+=Za);var i=n-t[0],r=t[1];r+=i,!e&&r-n>=Za?r=n+Za:e&&n-r>=Za?r=n-Za:!e&&n>r?r=n+(Za-Ja(n-r)):e&&n<r&&(r=n-(Za-Ja(r-n))),t[0]=n,t[1]=r}var es=function(){function t(t){this.dpr=1,this._xi=0,this._yi=0,this._x0=0,this._y0=0,this._len=0,t&&(this._saveData=!1),this._saveData&&(this.data=[])}return t.prototype.increaseVersion=function(){this._version++},t.prototype.getVersion=function(){return this._version},t.prototype.setScale=function(t,e,n){(n=n||0)>0&&(this._ux=Ua(n/er/t)||0,this._uy=Ua(n/er/e)||0)},t.prototype.setDPR=function(t){this.dpr=t},t.prototype.setContext=function(t){this._ctx=t},t.prototype.getContext=function(){return this._ctx},t.prototype.beginPath=function(){return this._ctx&&this._ctx.beginPath(),this.reset(),this},t.prototype.reset=function(){this._saveData&&(this._len=0),this._pathSegLen&&(this._pathSegLen=null,this._pathLen=0),this._version++},t.prototype.moveTo=function(t,e){return this._drawPendingPt(),this.addData(Ba.M,t,e),this._ctx&&this._ctx.moveTo(t,e),this._x0=t,this._y0=e,this._xi=t,this._yi=e,this},t.prototype.lineTo=function(t,e){var n=Ua(t-this._xi),i=Ua(e-this._yi),r=n>this._ux||i>this._uy;if(this.addData(Ba.L,t,e),this._ctx&&r&&this._ctx.lineTo(t,e),r)this._xi=t,this._yi=e,this._pendingPtDist=0;else{var o=n*n+i*i;o>this._pendingPtDist&&(this._pendingPtX=t,this._pendingPtY=e,this._pendingPtDist=o)}return this},t.prototype.bezierCurveTo=function(t,e,n,i,r,o){return this._drawPendingPt(),this.addData(Ba.C,t,e,n,i,r,o),this._ctx&&this._ctx.bezierCurveTo(t,e,n,i,r,o),this._xi=r,this._yi=o,this},t.prototype.quadraticCurveTo=function(t,e,n,i){return this._drawPendingPt(),this.addData(Ba.Q,t,e,n,i),this._ctx&&this._ctx.quadraticCurveTo(t,e,n,i),this._xi=n,this._yi=i,this},t.prototype.arc=function(t,e,n,i,r,o){this._drawPendingPt(),Qa[0]=i,Qa[1]=r,ts(Qa,o),i=Qa[0];var a=(r=Qa[1])-i;return this.addData(Ba.A,t,e,n,n,i,a,0,o?0:1),this._ctx&&this._ctx.arc(t,e,n,i,r,o),this._xi=Ga(r)*n+t,this._yi=qa(r)*n+e,this},t.prototype.arcTo=function(t,e,n,i,r){return this._drawPendingPt(),this._ctx&&this._ctx.arcTo(t,e,n,i,r),this},t.prototype.rect=function(t,e,n,i){return this._drawPendingPt(),this._ctx&&this._ctx.rect(t,e,n,i),this.addData(Ba.R,t,e,n,i),this},t.prototype.closePath=function(){this._drawPendingPt(),this.addData(Ba.Z);var t=this._ctx,e=this._x0,n=this._y0;return t&&t.closePath(),this._xi=e,this._yi=n,this},t.prototype.fill=function(t){t&&t.fill(),this.toStatic()},t.prototype.stroke=function(t){t&&t.stroke(),this.toStatic()},t.prototype.len=function(){return this._len},t.prototype.setData=function(t){var e=t.length;this.data&&this.data.length===e||!Ka||(this.data=new Float32Array(e));for(var n=0;n<e;n++)this.data[n]=t[n];this._len=e},t.prototype.appendPath=function(t){t instanceof Array||(t=[t]);for(var e=t.length,n=0,i=this._len,r=0;r<e;r++)n+=t[r].len();for(Ka&&this.data instanceof Float32Array&&(this.data=new Float32Array(i+n)),r=0;r<e;r++)for(var o=t[r].data,a=0;a<o.length;a++)this.data[i++]=o[a];this._len=i},t.prototype.addData=function(t,e,n,i,r,o,a,s,l){if(this._saveData){var c=this.data;this._len+arguments.length>c.length&&(this._expandData(),c=this.data);for(var u=0;u<arguments.length;u++)c[this._len++]=arguments[u]}},t.prototype._drawPendingPt=function(){this._pendingPtDist>0&&(this._ctx&&this._ctx.lineTo(this._pendingPtX,this._pendingPtY),this._pendingPtDist=0)},t.prototype._expandData=function(){if(!(this.data instanceof Array)){for(var t=[],e=0;e<this._len;e++)t[e]=this.data[e];this.data=t}},t.prototype.toStatic=function(){if(this._saveData){this._drawPendingPt();var t=this.data;t instanceof Array&&(t.length=this._len,Ka&&this._len>11&&(this.data=new Float32Array(t)))}},t.prototype.getBoundingRect=function(){Va[0]=Va[1]=Wa[0]=Wa[1]=Number.MAX_VALUE,Ha[0]=Ha[1]=ja[0]=ja[1]=-Number.MAX_VALUE;var t,e=this.data,n=0,i=0,r=0,o=0;for(t=0;t<this._len;){var a=e[t++],s=1===t;switch(s&&(r=n=e[t],o=i=e[t+1]),a){case Ba.M:n=r=e[t++],i=o=e[t++],Wa[0]=r,Wa[1]=o,ja[0]=r,ja[1]=o;break;case Ba.L:Oa(n,i,e[t],e[t+1],Wa,ja),n=e[t++],i=e[t++];break;case Ba.C:Pa(n,i,e[t++],e[t++],e[t++],e[t++],e[t],e[t+1],Wa,ja),n=e[t++],i=e[t++];break;case Ba.Q:Na(n,i,e[t++],e[t++],e[t],e[t+1],Wa,ja),n=e[t++],i=e[t++];break;case Ba.A:var l=e[t++],c=e[t++],u=e[t++],h=e[t++],d=e[t++],p=e[t++]+d;t+=1;var f=!e[t++];s&&(r=Ga(d)*u+l,o=qa(d)*h+c),Ra(l,c,u,h,d,p,f,Wa,ja),n=Ga(p)*u+l,i=qa(p)*h+c;break;case Ba.R:Oa(r=n=e[t++],o=i=e[t++],r+e[t++],o+e[t++],Wa,ja);break;case Ba.Z:n=r,i=o}jt(Va,Va,Wa),Yt(Ha,Ha,ja)}return 0===t&&(Va[0]=Va[1]=Ha[0]=Ha[1]=0),new Re(Va[0],Va[1],Ha[0]-Va[0],Ha[1]-Va[1])},t.prototype._calculateLength=function(){var t=this.data,e=this._len,n=this._ux,i=this._uy,r=0,o=0,a=0,s=0;this._pathSegLen||(this._pathSegLen=[]);for(var l=this._pathSegLen,c=0,u=0,h=0;h<e;){var d=t[h++],p=1===h;p&&(a=r=t[h],s=o=t[h+1]);var f=-1;switch(d){case Ba.M:r=a=t[h++],o=s=t[h++];break;case Ba.L:var g=t[h++],m=(b=t[h++])-o;(Ua(I=g-r)>n||Ua(m)>i||h===e-1)&&(f=Math.sqrt(I*I+m*m),r=g,o=b);break;case Ba.C:var v=t[h++],y=t[h++],b=(g=t[h++],t[h++]),x=t[h++],_=t[h++];f=_n(r,o,v,y,g,b,x,_,10),r=x,o=_;break;case Ba.Q:f=Mn(r,o,v=t[h++],y=t[h++],g=t[h++],b=t[h++],10),r=g,o=b;break;case Ba.A:var w=t[h++],S=t[h++],C=t[h++],k=t[h++],A=t[h++],M=t[h++],T=M+A;h+=1,p&&(a=Ga(A)*C+w,s=qa(A)*k+S),f=Xa(C,k)*Ya(Za,Math.abs(M)),r=Ga(T)*C+w,o=qa(T)*k+S;break;case Ba.R:a=r=t[h++],s=o=t[h++],f=2*t[h++]+2*t[h++];break;case Ba.Z:var I=a-r;m=s-o,f=Math.sqrt(I*I+m*m),r=a,o=s}f>=0&&(l[u++]=f,c+=f)}return this._pathLen=c,c},t.prototype.rebuildPath=function(t,e){var n,i,r,o,a,s,l,c,u,h,d=this.data,p=this._ux,f=this._uy,g=this._len,m=e<1,v=0,y=0,b=0;if(!m||(this._pathSegLen||this._calculateLength(),l=this._pathSegLen,c=e*this._pathLen))t:for(var x=0;x<g;){var _=d[x++],w=1===x;switch(w&&(n=r=d[x],i=o=d[x+1]),_!==Ba.L&&b>0&&(t.lineTo(u,h),b=0),_){case Ba.M:n=r=d[x++],i=o=d[x++],t.moveTo(r,o);break;case Ba.L:a=d[x++],s=d[x++];var S=Ua(a-r),C=Ua(s-o);if(S>p||C>f){if(m){if(v+(U=l[y++])>c){var k=(c-v)/U;t.lineTo(r*(1-k)+a*k,o*(1-k)+s*k);break t}v+=U}t.lineTo(a,s),r=a,o=s,b=0}else{var A=S*S+C*C;A>b&&(u=a,h=s,b=A)}break;case Ba.C:var M=d[x++],T=d[x++],I=d[x++],E=d[x++],O=d[x++],D=d[x++];if(m){if(v+(U=l[y++])>c){bn(r,M,I,O,k=(c-v)/U,za),bn(o,T,E,D,k,Fa),t.bezierCurveTo(za[1],Fa[1],za[2],Fa[2],za[3],Fa[3]);break t}v+=U}t.bezierCurveTo(M,T,I,E,O,D),r=O,o=D;break;case Ba.Q:if(M=d[x++],T=d[x++],I=d[x++],E=d[x++],m){if(v+(U=l[y++])>c){kn(r,M,I,k=(c-v)/U,za),kn(o,T,E,k,Fa),t.quadraticCurveTo(za[1],Fa[1],za[2],Fa[2]);break t}v+=U}t.quadraticCurveTo(M,T,I,E),r=I,o=E;break;case Ba.A:var L=d[x++],P=d[x++],N=d[x++],R=d[x++],B=d[x++],z=d[x++],F=d[x++],V=!d[x++],H=N>R?N:R,W=Ua(N-R)>.001,j=B+z,Y=!1;if(m&&(v+(U=l[y++])>c&&(j=B+z*(c-v)/U,Y=!0),v+=U),W&&t.ellipse?t.ellipse(L,P,N,R,F,B,j,V):t.arc(L,P,H,B,j,V),Y)break t;w&&(n=Ga(B)*N+L,i=qa(B)*R+P),r=Ga(j)*N+L,o=qa(j)*R+P;break;case Ba.R:n=r=d[x],i=o=d[x+1],a=d[x++],s=d[x++];var X=d[x++],G=d[x++];if(m){if(v+(U=l[y++])>c){var q=c-v;t.moveTo(a,s),t.lineTo(a+Ya(q,X),s),(q-=X)>0&&t.lineTo(a+X,s+Ya(q,G)),(q-=G)>0&&t.lineTo(a+Xa(X-q,0),s+G),(q-=X)>0&&t.lineTo(a,s+Xa(G-q,0));break t}v+=U}t.rect(a,s,X,G);break;case Ba.Z:if(m){var U;if(v+(U=l[y++])>c){k=(c-v)/U,t.lineTo(r*(1-k)+n*k,o*(1-k)+i*k);break t}v+=U}t.closePath(),r=n,o=i}}},t.prototype.clone=function(){var e=new t,n=this.data;return e.data=n.slice?n.slice():Array.prototype.slice.call(n),e._len=this._len,e},t.CMD=Ba,t.initDefaultProps=function(){var e=t.prototype;e._saveData=!0,e._ux=0,e._uy=0,e._pendingPtDist=0,e._version=0}(),t}();function ns(t,e,n,i,r,o,a){if(0===r)return!1;var s,l=r;if(a>e+l&&a>i+l||a<e-l&&a<i-l||o>t+l&&o>n+l||o<t-l&&o<n-l)return!1;if(t===n)return Math.abs(o-t)<=l/2;var c=(s=(e-i)/(t-n))*o-a+(t*i-n*e)/(t-n);return c*c/(s*s+1)<=l/2*l/2}function is(t,e,n,i,r,o,a,s,l,c,u){if(0===l)return!1;var h=l;return!(u>e+h&&u>i+h&&u>o+h&&u>s+h||u<e-h&&u<i-h&&u<o-h&&u<s-h||c>t+h&&c>n+h&&c>r+h&&c>a+h||c<t-h&&c<n-h&&c<r-h&&c<a-h)&&xn(t,e,n,i,r,o,a,s,c,u,null)<=h/2}function rs(t,e,n,i,r,o,a,s,l){if(0===a)return!1;var c=a;return!(l>e+c&&l>i+c&&l>o+c||l<e-c&&l<i-c&&l<o-c||s>t+c&&s>n+c&&s>r+c||s<t-c&&s<n-c&&s<r-c)&&An(t,e,n,i,r,o,s,l,null)<=c/2}var os=2*Math.PI;function as(t){return(t%=os)<0&&(t+=os),t}var ss=2*Math.PI;function ls(t,e,n,i,r,o,a,s,l){if(0===a)return!1;var c=a;s-=t,l-=e;var u=Math.sqrt(s*s+l*l);if(u-c>n||u+c<n)return!1;if(Math.abs(i-r)%ss<1e-4)return!0;if(o){var h=i;i=as(r),r=as(h)}else i=as(i),r=as(r);i>r&&(r+=ss);var d=Math.atan2(l,s);return d<0&&(d+=ss),d>=i&&d<=r||d+ss>=i&&d+ss<=r}function cs(t,e,n,i,r,o){if(o>e&&o>i||o<e&&o<i)return 0;if(i===e)return 0;var a=(o-e)/(i-e),s=i<e?1:-1;1!==a&&0!==a||(s=i<e?.5:-.5);var l=a*(n-t)+t;return l===r?1/0:l>r?s:0}var us=es.CMD,hs=2*Math.PI,ds=[-1,-1,-1],ps=[-1,-1];function fs(t,e,n,i,r,o,a,s,l,c){if(c>e&&c>i&&c>o&&c>s||c<e&&c<i&&c<o&&c<s)return 0;var u,h=vn(e,i,o,s,c,ds);if(0===h)return 0;for(var d=0,p=-1,f=void 0,g=void 0,m=0;m<h;m++){var v=ds[m],y=0===v||1===v?.5:1;gn(t,n,r,a,v)<l||(p<0&&(p=yn(e,i,o,s,ps),ps[1]<ps[0]&&p>1&&(void 0,u=ps[0],ps[0]=ps[1],ps[1]=u),f=gn(e,i,o,s,ps[0]),p>1&&(g=gn(e,i,o,s,ps[1]))),2===p?v<ps[0]?d+=f<e?y:-y:v<ps[1]?d+=g<f?y:-y:d+=s<g?y:-y:v<ps[0]?d+=f<e?y:-y:d+=s<f?y:-y)}return d}function gs(t,e,n,i,r,o,a,s){if(s>e&&s>i&&s>o||s<e&&s<i&&s<o)return 0;var l=function(t,e,n,i,r){var o=t-2*e+n,a=2*(e-t),s=t-i,l=0;if(pn(o))fn(a)&&(u=-s/a)>=0&&u<=1&&(r[l++]=u);else{var c=a*a-4*o*s;if(pn(c))(u=-a/(2*o))>=0&&u<=1&&(r[l++]=u);else if(c>0){var u,h=an(c),d=(-a-h)/(2*o);(u=(-a+h)/(2*o))>=0&&u<=1&&(r[l++]=u),d>=0&&d<=1&&(r[l++]=d)}}return l}(e,i,o,s,ds);if(0===l)return 0;var c=Cn(e,i,o);if(c>=0&&c<=1){for(var u=0,h=wn(e,i,o,c),d=0;d<l;d++){var p=0===ds[d]||1===ds[d]?.5:1;wn(t,n,r,ds[d])<a||(ds[d]<c?u+=h<e?p:-p:u+=o<h?p:-p)}return u}return p=0===ds[0]||1===ds[0]?.5:1,wn(t,n,r,ds[0])<a?0:o<e?p:-p}function ms(t,e,n,i,r,o,a,s){if((s-=e)>n||s<-n)return 0;var l=Math.sqrt(n*n-s*s);ds[0]=-l,ds[1]=l;var c=Math.abs(i-r);if(c<1e-4)return 0;if(c>=hs-1e-4){i=0,r=hs;var u=o?1:-1;return a>=ds[0]+t&&a<=ds[1]+t?u:0}if(i>r){var h=i;i=r,r=h}i<0&&(i+=hs,r+=hs);for(var d=0,p=0;p<2;p++){var f=ds[p];if(f+t>a){var g=Math.atan2(s,f);u=o?1:-1,g<0&&(g=hs+g),(g>=i&&g<=r||g+hs>=i&&g+hs<=r)&&(g>Math.PI/2&&g<1.5*Math.PI&&(u=-u),d+=u)}}return d}function vs(t,e,n,i,r){for(var o,a,s,l,c=t.data,u=t.len(),h=0,d=0,p=0,f=0,g=0,m=0;m<u;){var v=c[m++],y=1===m;switch(v===us.M&&m>1&&(n||(h+=cs(d,p,f,g,i,r))),y&&(f=d=c[m],g=p=c[m+1]),v){case us.M:d=f=c[m++],p=g=c[m++];break;case us.L:if(n){if(ns(d,p,c[m],c[m+1],e,i,r))return!0}else h+=cs(d,p,c[m],c[m+1],i,r)||0;d=c[m++],p=c[m++];break;case us.C:if(n){if(is(d,p,c[m++],c[m++],c[m++],c[m++],c[m],c[m+1],e,i,r))return!0}else h+=fs(d,p,c[m++],c[m++],c[m++],c[m++],c[m],c[m+1],i,r)||0;d=c[m++],p=c[m++];break;case us.Q:if(n){if(rs(d,p,c[m++],c[m++],c[m],c[m+1],e,i,r))return!0}else h+=gs(d,p,c[m++],c[m++],c[m],c[m+1],i,r)||0;d=c[m++],p=c[m++];break;case us.A:var b=c[m++],x=c[m++],_=c[m++],w=c[m++],S=c[m++],C=c[m++];m+=1;var k=!!(1-c[m++]);o=Math.cos(S)*_+b,a=Math.sin(S)*w+x,y?(f=o,g=a):h+=cs(d,p,o,a,i,r);var A=(i-b)*w/_+b;if(n){if(ls(b,x,w,S,S+C,k,e,A,r))return!0}else h+=ms(b,x,w,S,S+C,k,A,r);d=Math.cos(S+C)*_+b,p=Math.sin(S+C)*w+x;break;case us.R:if(f=d=c[m++],g=p=c[m++],o=f+c[m++],a=g+c[m++],n){if(ns(f,g,o,g,e,i,r)||ns(o,g,o,a,e,i,r)||ns(o,a,f,a,e,i,r)||ns(f,a,f,g,e,i,r))return!0}else h+=cs(o,g,o,a,i,r),h+=cs(f,a,f,g,i,r);break;case us.Z:if(n){if(ns(d,p,f,g,e,i,r))return!0}else h+=cs(d,p,f,g,i,r);d=f,p=g}}return n||(s=p,l=g,Math.abs(s-l)<1e-4)||(h+=cs(d,p,f,g,i,r)||0),0!==h}var ys=E({fill:"#000",stroke:null,strokePercent:1,fillOpacity:1,strokeOpacity:1,lineDashOffset:0,lineWidth:1,lineCap:"butt",miterLimit:10,strokeNoScale:!1,strokeFirst:!1},ga),bs={style:E({fill:!0,stroke:!0,strokePercent:!0,fillOpacity:!0,strokeOpacity:!0,lineDashOffset:!0,lineWidth:!0,miterLimit:!0},ma.style)},xs=hr.concat(["invisible","culling","z","z2","zlevel","parent"]),_s=function(t){function e(e){return t.call(this,e)||this}var i;return n(e,t),e.prototype.update=function(){var n=this;t.prototype.update.call(this);var i=this.style;if(i.decal){var r=this._decalEl=this._decalEl||new e;r.buildPath===e.prototype.buildPath&&(r.buildPath=function(t){n.buildPath(t,n.shape)}),r.silent=!0;var o=r.style;for(var a in i)o[a]!==i[a]&&(o[a]=i[a]);o.fill=i.fill?i.decal:null,o.decal=null,o.shadowColor=null,i.strokeFirst&&(o.stroke=null);for(var s=0;s<xs.length;++s)r[xs[s]]=this[xs[s]];r.__dirty|=1}else this._decalEl&&(this._decalEl=null)},e.prototype.getDecalElement=function(){return this._decalEl},e.prototype._init=function(e){var n=H(e);this.shape=this.getDefaultShape();var i=this.getDefaultStyle();i&&this.useStyle(i);for(var r=0;r<n.length;r++){var o=n[r],a=e[o];"style"===o?this.style?I(this.style,a):this.useStyle(a):"shape"===o?I(this.shape,a):t.prototype.attrKV.call(this,o,a)}this.style||this.useStyle({})},e.prototype.getDefaultStyle=function(){return null},e.prototype.getDefaultShape=function(){return{}},e.prototype.canBeInsideText=function(){return this.hasFill()},e.prototype.getInsideTextFill=function(){var t=this.style.fill;if("none"!==t){if(G(t)){var e=ni(t,0);return e>.5?nr:e>.2?"#eee":ir}if(t)return ir}return nr},e.prototype.getInsideTextStroke=function(t){var e=this.style.fill;if(G(e)){var n=this.__zr;if(!(!n||!n.isDarkMode())==ni(t,0)<.4)return e}},e.prototype.buildPath=function(t,e,n){},e.prototype.pathUpdated=function(){this.__dirty&=-5},e.prototype.getUpdatedPathProxy=function(t){return!this.path&&this.createPathProxy(),this.path.beginPath(),this.buildPath(this.path,this.shape,t),this.path},e.prototype.createPathProxy=function(){this.path=new es(!1)},e.prototype.hasStroke=function(){var t=this.style,e=t.stroke;return!(null==e||"none"===e||!(t.lineWidth>0))},e.prototype.hasFill=function(){var t=this.style.fill;return null!=t&&"none"!==t},e.prototype.getBoundingRect=function(){var t=this._rect,e=this.style,n=!t;if(n){var i=!1;this.path||(i=!0,this.createPathProxy());var r=this.path;(i||4&this.__dirty)&&(r.beginPath(),this.buildPath(r,this.shape,!1),this.pathUpdated()),t=r.getBoundingRect()}if(this._rect=t,this.hasStroke()&&this.path&&this.path.len()>0){var o=this._rectStroke||(this._rectStroke=t.clone());if(this.__dirty||n){o.copy(t);var a=e.strokeNoScale?this.getLineScale():1,s=e.lineWidth;if(!this.hasFill()){var l=this.strokeContainThreshold;s=Math.max(s,null==l?4:l)}a>1e-10&&(o.width+=s/a,o.height+=s/a,o.x-=s/a/2,o.y-=s/a/2)}return o}return t},e.prototype.contain=function(t,e){var n=this.transformCoordToLocal(t,e),i=this.getBoundingRect(),r=this.style;if(t=n[0],e=n[1],i.contain(t,e)){var o=this.path;if(this.hasStroke()){var a=r.lineWidth,s=r.strokeNoScale?this.getLineScale():1;if(s>1e-10&&(this.hasFill()||(a=Math.max(a,this.strokeContainThreshold)),function(t,e,n,i){return vs(t,e,!0,n,i)}(o,a/s,t,e)))return!0}if(this.hasFill())return function(t,e,n){return vs(t,0,!1,e,n)}(o,t,e)}return!1},e.prototype.dirtyShape=function(){this.__dirty|=4,this._rect&&(this._rect=null),this._decalEl&&this._decalEl.dirtyShape(),this.markRedraw()},e.prototype.dirty=function(){this.dirtyStyle(),this.dirtyShape()},e.prototype.animateShape=function(t){return this.animate("shape",t)},e.prototype.updateDuringAnimation=function(t){"style"===t?this.dirtyStyle():"shape"===t?this.dirtyShape():this.markRedraw()},e.prototype.attrKV=function(e,n){"shape"===e?this.setShape(n):t.prototype.attrKV.call(this,e,n)},e.prototype.setShape=function(t,e){var n=this.shape;return n||(n=this.shape={}),"string"==typeof t?n[t]=e:I(n,t),this.dirtyShape(),this},e.prototype.shapeChanged=function(){return!!(4&this.__dirty)},e.prototype.createStyle=function(t){return yt(ys,t)},e.prototype._innerSaveToNormal=function(e){t.prototype._innerSaveToNormal.call(this,e);var n=this._normalState;e.shape&&!n.shape&&(n.shape=I({},this.shape))},e.prototype._applyStateObj=function(e,n,i,r,o,a){t.prototype._applyStateObj.call(this,e,n,i,r,o,a);var s,l=!(n&&r);if(n&&n.shape?o?r?s=n.shape:(s=I({},i.shape),I(s,n.shape)):(s=I({},r?this.shape:i.shape),I(s,n.shape)):l&&(s=i.shape),s)if(o){this.shape=I({},this.shape);for(var c={},u=H(s),h=0;h<u.length;h++){var d=u[h];"object"==typeof s[d]?this.shape[d]=s[d]:c[d]=s[d]}this._transitionState(e,{shape:c},a)}else this.shape=s,this.dirtyShape()},e.prototype._mergeStates=function(e){for(var n,i=t.prototype._mergeStates.call(this,e),r=0;r<e.length;r++){var o=e[r];o.shape&&(n=n||{},this._mergeStyle(n,o.shape))}return n&&(i.shape=n),i},e.prototype.getAnimationStyleProps=function(){return bs},e.prototype.isZeroArea=function(){return!1},e.extend=function(t){var i=function(e){function i(n){var i=e.call(this,n)||this;return t.init&&t.init.call(i,n),i}return n(i,e),i.prototype.getDefaultStyle=function(){return A(t.style)},i.prototype.getDefaultShape=function(){return A(t.shape)},i}(e);for(var r in t)"function"==typeof t[r]&&(i.prototype[r]=t[r]);return i},e.initDefaultProps=((i=e.prototype).type="path",i.strokeContainThreshold=5,i.segmentIgnoreThreshold=0,i.subPixelOptimize=!1,i.autoBatch=!1,void(i.__dirty=7)),e}(ba),ws=E({strokeFirst:!0,font:l,x:0,y:0,textAlign:"left",textBaseline:"top",miterLimit:2},ys),Ss=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.hasStroke=function(){var t=this.style,e=t.stroke;return null!=e&&"none"!==e&&t.lineWidth>0},e.prototype.hasFill=function(){var t=this.style.fill;return null!=t&&"none"!==t},e.prototype.createStyle=function(t){return yt(ws,t)},e.prototype.setBoundingRect=function(t){this._rect=t},e.prototype.getBoundingRect=function(){var t=this.style;if(!this._rect){var e=t.text;null!=e?e+="":e="";var n=mr(e,t.font,t.textAlign,t.textBaseline);if(n.x+=t.x||0,n.y+=t.y||0,this.hasStroke()){var i=t.lineWidth;n.x-=i/2,n.y-=i/2,n.width+=i,n.height+=i}this._rect=n}return this._rect},e.initDefaultProps=void(e.prototype.dirtyRectTolerance=10),e}(ba);Ss.prototype.type="tspan";var Cs=E({x:0,y:0},ga),ks={style:E({x:!0,y:!0,width:!0,height:!0,sx:!0,sy:!0,sWidth:!0,sHeight:!0},ma.style)},As=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.createStyle=function(t){return yt(Cs,t)},e.prototype._getSize=function(t){var e=this.style,n=e[t];if(null!=n)return n;var i,r=(i=e.image)&&"string"!=typeof i&&i.width&&i.height?e.image:this.__image;if(!r)return 0;var o="width"===t?"height":"width",a=e[o];return null==a?r[t]:r[t]/r[o]*a},e.prototype.getWidth=function(){return this._getSize("width")},e.prototype.getHeight=function(){return this._getSize("height")},e.prototype.getAnimationStyleProps=function(){return ks},e.prototype.getBoundingRect=function(){var t=this.style;return this._rect||(this._rect=new Re(t.x||0,t.y||0,this.getWidth(),this.getHeight())),this._rect},e}(ba);As.prototype.type="image";var Ms=Math.round;function Ts(t,e,n){if(e){var i=e.x1,r=e.x2,o=e.y1,a=e.y2;t.x1=i,t.x2=r,t.y1=o,t.y2=a;var s=n&&n.lineWidth;return s?(Ms(2*i)===Ms(2*r)&&(t.x1=t.x2=Es(i,s,!0)),Ms(2*o)===Ms(2*a)&&(t.y1=t.y2=Es(o,s,!0)),t):t}}function Is(t,e,n){if(e){var i=e.x,r=e.y,o=e.width,a=e.height;t.x=i,t.y=r,t.width=o,t.height=a;var s=n&&n.lineWidth;return s?(t.x=Es(i,s,!0),t.y=Es(r,s,!0),t.width=Math.max(Es(i+o,s,!1)-t.x,0===o?0:1),t.height=Math.max(Es(r+a,s,!1)-t.y,0===a?0:1),t):t}}function Es(t,e,n){if(!e)return t;var i=Ms(2*t);return(i+Ms(e))%2==0?i/2:(i+(n?1:-1))/2}var Os=function(){this.x=0,this.y=0,this.width=0,this.height=0},Ds={},Ls=function(t){function e(e){return t.call(this,e)||this}return n(e,t),e.prototype.getDefaultShape=function(){return new Os},e.prototype.buildPath=function(t,e){var n,i,r,o;if(this.subPixelOptimize){var a=Is(Ds,e,this.style);n=a.x,i=a.y,r=a.width,o=a.height,a.r=e.r,e=a}else n=e.x,i=e.y,r=e.width,o=e.height;e.r?function(t,e){var n,i,r,o,a,s=e.x,l=e.y,c=e.width,u=e.height,h=e.r;c<0&&(s+=c,c=-c),u<0&&(l+=u,u=-u),"number"==typeof h?n=i=r=o=h:h instanceof Array?1===h.length?n=i=r=o=h[0]:2===h.length?(n=r=h[0],i=o=h[1]):3===h.length?(n=h[0],i=o=h[1],r=h[2]):(n=h[0],i=h[1],r=h[2],o=h[3]):n=i=r=o=0,n+i>c&&(n*=c/(a=n+i),i*=c/a),r+o>c&&(r*=c/(a=r+o),o*=c/a),i+r>u&&(i*=u/(a=i+r),r*=u/a),n+o>u&&(n*=u/(a=n+o),o*=u/a),t.moveTo(s+n,l),t.lineTo(s+c-i,l),0!==i&&t.arc(s+c-i,l+i,i,-Math.PI/2,0),t.lineTo(s+c,l+u-r),0!==r&&t.arc(s+c-r,l+u-r,r,0,Math.PI/2),t.lineTo(s+o,l+u),0!==o&&t.arc(s+o,l+u-o,o,Math.PI/2,Math.PI),t.lineTo(s,l+n),0!==n&&t.arc(s+n,l+n,n,Math.PI,1.5*Math.PI)}(t,e):t.rect(n,i,r,o)},e.prototype.isZeroArea=function(){return!this.shape.width||!this.shape.height},e}(_s);Ls.prototype.type="rect";var Ps={fill:"#000"},Ns={style:E({fill:!0,stroke:!0,fillOpacity:!0,strokeOpacity:!0,lineWidth:!0,fontSize:!0,lineHeight:!0,width:!0,height:!0,textShadowColor:!0,textShadowBlur:!0,textShadowOffsetX:!0,textShadowOffsetY:!0,backgroundColor:!0,padding:!0,borderColor:!0,borderWidth:!0,borderRadius:!0},ma.style)},Rs=function(t){function e(e){var n=t.call(this)||this;return n.type="text",n._children=[],n._defaultStyle=Ps,n.attr(e),n}return n(e,t),e.prototype.childrenRef=function(){return this._children},e.prototype.update=function(){t.prototype.update.call(this),this.styleChanged()&&this._updateSubTexts();for(var e=0;e<this._children.length;e++){var n=this._children[e];n.zlevel=this.zlevel,n.z=this.z,n.z2=this.z2,n.culling=this.culling,n.cursor=this.cursor,n.invisible=this.invisible}},e.prototype.updateTransform=function(){var e=this.innerTransformable;e?(e.updateTransform(),e.transform&&(this.transform=e.transform)):t.prototype.updateTransform.call(this)},e.prototype.getLocalTransform=function(e){var n=this.innerTransformable;return n?n.getLocalTransform(e):t.prototype.getLocalTransform.call(this,e)},e.prototype.getComputedTransform=function(){return this.__hostTarget&&(this.__hostTarget.getComputedTransform(),this.__hostTarget.updateInnerText(!0)),t.prototype.getComputedTransform.call(this)},e.prototype._updateSubTexts=function(){var t;this._childCursor=0,js(t=this.style),R(t.rich,js),this.style.rich?this._updateRichTexts():this._updatePlainTexts(),this._children.length=this._childCursor,this.styleUpdated()},e.prototype.addSelfToZr=function(e){t.prototype.addSelfToZr.call(this,e);for(var n=0;n<this._children.length;n++)this._children[n].__zr=e},e.prototype.removeSelfFromZr=function(e){t.prototype.removeSelfFromZr.call(this,e);for(var n=0;n<this._children.length;n++)this._children[n].__zr=null},e.prototype.getBoundingRect=function(){if(this.styleChanged()&&this._updateSubTexts(),!this._rect){for(var t=new Re(0,0,0,0),e=this._children,n=[],i=null,r=0;r<e.length;r++){var o=e[r],a=o.getBoundingRect(),s=o.getLocalTransform(n);s?(t.copy(a),t.applyTransform(s),(i=i||t.clone()).union(t)):(i=i||a.clone()).union(a)}this._rect=i||t}return this._rect},e.prototype.setDefaultTextStyle=function(t){this._defaultStyle=t||Ps},e.prototype.setTextContent=function(t){},e.prototype._mergeStyle=function(t,e){if(!e)return t;var n=e.rich,i=t.rich||n&&{};return I(t,e),n&&i?(this._mergeRich(i,n),t.rich=i):i&&(t.rich=i),t},e.prototype._mergeRich=function(t,e){for(var n=H(e),i=0;i<n.length;i++){var r=n[i];t[r]=t[r]||{},I(t[r],e[r])}},e.prototype.getAnimationStyleProps=function(){return Ns},e.prototype._getOrCreateChild=function(t){var e=this._children[this._childCursor];return e&&e instanceof t||(e=new t),this._children[this._childCursor++]=e,e.__zr=this.__zr,e.parent=this,e},e.prototype._updatePlainTexts=function(){var t=this.style,e=t.font||l,n=t.padding,i=function(t,e){null!=t&&(t+="");var n,i=e.overflow,r=e.padding,o=e.font,a="truncate"===i,s=br(o),l=rt(e.lineHeight,s),c=!!e.backgroundColor,u="truncate"===e.lineOverflow,h=e.width,d=(n=null==h||"break"!==i&&"breakAll"!==i?t?t.split("\n"):[]:t?pa(t,e.font,h,"breakAll"===i,0).lines:[]).length*l,p=rt(e.height,d);if(d>p&&u){var f=Math.floor(p/l);n=n.slice(0,f)}if(t&&a&&null!=h)for(var g=ra(h,o,e.ellipsis,{minChar:e.truncateMinChar,placeholder:e.placeholder}),m=0;m<n.length;m++)n[m]=oa(n[m],g);var v=p,y=0;for(m=0;m<n.length;m++)y=Math.max(fr(n[m],o),y);null==h&&(h=y);var b=y;return r&&(v+=r[0]+r[2],b+=r[1]+r[3],h+=r[1]+r[3]),c&&(b=h),{lines:n,height:p,outerWidth:b,outerHeight:v,lineHeight:l,calculatedLineHeight:s,contentWidth:y,contentHeight:d,width:h}}(qs(t),t),r=Us(t),o=!!t.backgroundColor,a=i.outerHeight,s=i.outerWidth,c=i.contentWidth,u=i.lines,h=i.lineHeight,d=this._defaultStyle,p=t.x||0,f=t.y||0,g=t.align||d.align||"left",m=t.verticalAlign||d.verticalAlign||"top",v=p,y=yr(f,i.contentHeight,m);if(r||n){var b=vr(p,s,g),x=yr(f,a,m);r&&this._renderBackground(t,t,b,x,s,a)}y+=h/2,n&&(v=Gs(p,g,n),"top"===m?y+=n[0]:"bottom"===m&&(y-=n[2]));for(var _=0,w=!1,S=(Xs("fill"in t?t.fill:(w=!0,d.fill))),C=(Ys("stroke"in t?t.stroke:o||d.autoStroke&&!w?null:(_=2,d.stroke))),k=t.textShadowBlur>0,A=null!=t.width&&("truncate"===t.overflow||"break"===t.overflow||"breakAll"===t.overflow),M=i.calculatedLineHeight,T=0;T<u.length;T++){var I=this._getOrCreateChild(Ss),E=I.createStyle();I.useStyle(E),E.text=u[T],E.x=v,E.y=y,g&&(E.textAlign=g),E.textBaseline="middle",E.opacity=t.opacity,E.strokeFirst=!0,k&&(E.shadowBlur=t.textShadowBlur||0,E.shadowColor=t.textShadowColor||"transparent",E.shadowOffsetX=t.textShadowOffsetX||0,E.shadowOffsetY=t.textShadowOffsetY||0),E.stroke=C,E.fill=S,C&&(E.lineWidth=t.lineWidth||_,E.lineDash=t.lineDash,E.lineDashOffset=t.lineDashOffset||0),E.font=e,Hs(E,t),y+=h,A&&I.setBoundingRect(new Re(vr(E.x,t.width,E.textAlign),yr(E.y,M,E.textBaseline),c,M))}},e.prototype._updateRichTexts=function(){var t=this.style,e=function(t,e){var n=new ca;if(null!=t&&(t+=""),!t)return n;for(var i,r=e.width,o=e.height,a=e.overflow,s="break"!==a&&"breakAll"!==a||null==r?null:{width:r,accumWidth:0,breakAll:"breakAll"===a},l=na.lastIndex=0;null!=(i=na.exec(t));){var c=i.index;c>l&&ua(n,t.substring(l,c),e,s),ua(n,i[2],e,s,i[1]),l=na.lastIndex}l<t.length&&ua(n,t.substring(l,t.length),e,s);var u=[],h=0,d=0,p=e.padding,f="truncate"===a,g="truncate"===e.lineOverflow;function m(t,e,n){t.width=e,t.lineHeight=n,h+=n,d=Math.max(d,e)}t:for(var v=0;v<n.lines.length;v++){for(var y=n.lines[v],b=0,x=0,_=0;_<y.tokens.length;_++){var w=(D=y.tokens[_]).styleName&&e.rich[D.styleName]||{},S=D.textPadding=w.padding,C=S?S[1]+S[3]:0,k=D.font=w.font||e.font;D.contentHeight=br(k);var A=rt(w.height,D.contentHeight);if(D.innerHeight=A,S&&(A+=S[0]+S[2]),D.height=A,D.lineHeight=ot(w.lineHeight,e.lineHeight,A),D.align=w&&w.align||e.align,D.verticalAlign=w&&w.verticalAlign||"middle",g&&null!=o&&h+D.lineHeight>o){_>0?(y.tokens=y.tokens.slice(0,_),m(y,x,b),n.lines=n.lines.slice(0,v+1)):n.lines=n.lines.slice(0,v);break t}var M=w.width,T=null==M||"auto"===M;if("string"==typeof M&&"%"===M.charAt(M.length-1))D.percentWidth=M,u.push(D),D.contentWidth=fr(D.text,k);else{if(T){var I=w.backgroundColor,E=I&&I.image;E&&ea(E=Qo(E))&&(D.width=Math.max(D.width,E.width*A/E.height))}var O=f&&null!=r?r-x:null;null!=O&&O<D.width?!T||O<C?(D.text="",D.width=D.contentWidth=0):(D.text=ia(D.text,O-C,k,e.ellipsis,{minChar:e.truncateMinChar}),D.width=D.contentWidth=fr(D.text,k)):D.contentWidth=fr(D.text,k)}D.width+=C,x+=D.width,w&&(b=Math.max(b,D.lineHeight))}m(y,x,b)}for(n.outerWidth=n.width=rt(r,d),n.outerHeight=n.height=rt(o,h),n.contentHeight=h,n.contentWidth=d,p&&(n.outerWidth+=p[1]+p[3],n.outerHeight+=p[0]+p[2]),v=0;v<u.length;v++){var D,L=(D=u[v]).percentWidth;D.width=parseInt(L,10)/100*n.width}return n}(qs(t),t),n=e.width,i=e.outerWidth,r=e.outerHeight,o=t.padding,a=t.x||0,s=t.y||0,l=this._defaultStyle,c=t.align||l.align,u=t.verticalAlign||l.verticalAlign,h=vr(a,i,c),d=yr(s,r,u),p=h,f=d;o&&(p+=o[3],f+=o[0]);var g=p+n;Us(t)&&this._renderBackground(t,t,h,d,i,r);for(var m=!!t.backgroundColor,v=0;v<e.lines.length;v++){for(var y=e.lines[v],b=y.tokens,x=b.length,_=y.lineHeight,w=y.width,S=0,C=p,k=g,A=x-1,M=void 0;S<x&&(!(M=b[S]).align||"left"===M.align);)this._placeToken(M,t,_,f,C,"left",m),w-=M.width,C+=M.width,S++;for(;A>=0&&"right"===(M=b[A]).align;)this._placeToken(M,t,_,f,k,"right",m),w-=M.width,k-=M.width,A--;for(C+=(n-(C-p)-(g-k)-w)/2;S<=A;)M=b[S],this._placeToken(M,t,_,f,C+M.width/2,"center",m),C+=M.width,S++;f+=_}},e.prototype._placeToken=function(t,e,n,i,r,o,a){var s=e.rich[t.styleName]||{};s.text=t.text;var c=t.verticalAlign,u=i+n/2;"top"===c?u=i+t.height/2:"bottom"===c&&(u=i+n-t.height/2),!t.isLineHolder&&Us(s)&&this._renderBackground(s,e,"right"===o?r-t.width:"center"===o?r-t.width/2:r,u-t.height/2,t.width,t.height);var h=!!s.backgroundColor,d=t.textPadding;d&&(r=Gs(r,o,d),u-=t.height/2-d[0]-t.innerHeight/2);var p=this._getOrCreateChild(Ss),f=p.createStyle();p.useStyle(f);var g=this._defaultStyle,m=!1,v=0,y=Xs("fill"in s?s.fill:"fill"in e?e.fill:(m=!0,g.fill)),b=Ys("stroke"in s?s.stroke:"stroke"in e?e.stroke:h||a||g.autoStroke&&!m?null:(v=2,g.stroke)),x=s.textShadowBlur>0||e.textShadowBlur>0;f.text=t.text,f.x=r,f.y=u,x&&(f.shadowBlur=s.textShadowBlur||e.textShadowBlur||0,f.shadowColor=s.textShadowColor||e.textShadowColor||"transparent",f.shadowOffsetX=s.textShadowOffsetX||e.textShadowOffsetX||0,f.shadowOffsetY=s.textShadowOffsetY||e.textShadowOffsetY||0),f.textAlign=o,f.textBaseline="middle",f.font=t.font||l,f.opacity=ot(s.opacity,e.opacity,1),Hs(f,s),b&&(f.lineWidth=ot(s.lineWidth,e.lineWidth,v),f.lineDash=rt(s.lineDash,e.lineDash),f.lineDashOffset=e.lineDashOffset||0,f.stroke=b),y&&(f.fill=y);var _=t.contentWidth,w=t.contentHeight;p.setBoundingRect(new Re(vr(f.x,_,f.textAlign),yr(f.y,w,f.textBaseline),_,w))},e.prototype._renderBackground=function(t,e,n,i,r,o){var a,s,l,c=t.backgroundColor,u=t.borderWidth,h=t.borderColor,d=c&&c.image,p=c&&!d,f=t.borderRadius,g=this;if(p||t.lineHeight||u&&h){(a=this._getOrCreateChild(Ls)).useStyle(a.createStyle()),a.style.fill=null;var m=a.shape;m.x=n,m.y=i,m.width=r,m.height=o,m.r=f,a.dirtyShape()}if(p)(l=a.style).fill=c||null,l.fillOpacity=rt(t.fillOpacity,1);else if(d){(s=this._getOrCreateChild(As)).onload=function(){g.dirtyStyle()};var v=s.style;v.image=c.image,v.x=n,v.y=i,v.width=r,v.height=o}u&&h&&((l=a.style).lineWidth=u,l.stroke=h,l.strokeOpacity=rt(t.strokeOpacity,1),l.lineDash=t.borderDash,l.lineDashOffset=t.borderDashOffset||0,a.strokeContainThreshold=0,a.hasFill()&&a.hasStroke()&&(l.strokeFirst=!0,l.lineWidth*=2));var y=(a||s).style;y.shadowBlur=t.shadowBlur||0,y.shadowColor=t.shadowColor||"transparent",y.shadowOffsetX=t.shadowOffsetX||0,y.shadowOffsetY=t.shadowOffsetY||0,y.opacity=ot(t.opacity,e.opacity,1)},e.makeFont=function(t){var e="";return Ws(t)&&(e=[t.fontStyle,t.fontWeight,Vs(t.fontSize),t.fontFamily||"sans-serif"].join(" ")),e&&ct(e)||t.textFont||t.font},e}(ba),Bs={left:!0,right:1,center:1},zs={top:1,bottom:1,middle:1},Fs=["fontStyle","fontWeight","fontSize","fontFamily"];function Vs(t){return"string"!=typeof t||-1===t.indexOf("px")&&-1===t.indexOf("rem")&&-1===t.indexOf("em")?isNaN(+t)?"12px":t+"px":t}function Hs(t,e){for(var n=0;n<Fs.length;n++){var i=Fs[n],r=e[i];null!=r&&(t[i]=r)}}function Ws(t){return null!=t.fontSize||t.fontFamily||t.fontWeight}function js(t){if(t){t.font=Rs.makeFont(t);var e=t.align;"middle"===e&&(e="center"),t.align=null==e||Bs[e]?e:"left";var n=t.verticalAlign;"center"===n&&(n="middle"),t.verticalAlign=null==n||zs[n]?n:"top",t.padding&&(t.padding=st(t.padding))}}function Ys(t,e){return null==t||e<=0||"transparent"===t||"none"===t?null:t.image||t.colorStops?"#000":t}function Xs(t){return null==t||"none"===t?null:t.image||t.colorStops?"#000":t}function Gs(t,e,n){return"right"===e?t-n[1]:"center"===e?t+n[3]/2-n[1]/2:t+n[3]}function qs(t){var e=t.text;return null!=e&&(e+=""),e}function Us(t){return!!(t.backgroundColor||t.lineHeight||t.borderWidth&&t.borderColor)}var $s=Io(),Zs=function(t,e,n,i){if(i){var r=$s(i);r.dataIndex=n,r.dataType=e,r.seriesIndex=t,r.ssrType="chart","group"===i.type&&i.traverse((function(i){var r=$s(i);r.seriesIndex=t,r.dataIndex=n,r.dataType=e,r.ssrType="chart"}))}},Ks=1,Qs={},Js=Io(),tl=Io(),el=["emphasis","blur","select"],nl=["normal","emphasis","blur","select"],il="highlight",rl="downplay",ol="select",al="unselect",sl="toggleSelect";function ll(t){return null!=t&&"none"!==t}function cl(t,e,n){t.onHoverStateChange&&(t.hoverState||0)!==n&&t.onHoverStateChange(e),t.hoverState=n}function ul(t){cl(t,"emphasis",2)}function hl(t){2===t.hoverState&&cl(t,"normal",0)}function dl(t){cl(t,"blur",1)}function pl(t){1===t.hoverState&&cl(t,"normal",0)}function fl(t){t.selected=!0}function gl(t){t.selected=!1}function ml(t,e,n){e(t,n)}function vl(t,e,n){ml(t,e,n),t.isGroup&&t.traverse((function(t){ml(t,e,n)}))}function yl(t,e){switch(e){case"emphasis":t.hoverState=2;break;case"normal":t.hoverState=0;break;case"blur":t.hoverState=1;break;case"select":t.selected=!0}}function bl(t,e){var n=this.states[t];if(this.style){if("emphasis"===t)return function(t,e,n,i){var r=n&&D(n,"select")>=0,o=!1;if(t instanceof _s){var a=Js(t),s=r&&a.selectFill||a.normalFill,l=r&&a.selectStroke||a.normalStroke;if(ll(s)||ll(l)){var c=(i=i||{}).style||{};"inherit"===c.fill?(o=!0,i=I({},i),(c=I({},c)).fill=s):!ll(c.fill)&&ll(s)?(o=!0,i=I({},i),(c=I({},c)).fill=ri(s)):!ll(c.stroke)&&ll(l)&&(o||(i=I({},i),c=I({},c)),c.stroke=ri(l)),i.style=c}}if(i&&null==i.z2){o||(i=I({},i));var u=t.z2EmphasisLift;i.z2=t.z2+(null!=u?u:10)}return i}(this,0,e,n);if("blur"===t)return function(t,e,n){var i=D(t.currentStates,e)>=0,r=t.style.opacity,o=i?null:function(t,e,n,i){for(var r=t.style,o={},a=0;a<e.length;a++){var s=e[a],l=r[s];o[s]=null==l?i&&i[s]:l}for(a=0;a<t.animators.length;a++){var c=t.animators[a];c.__fromStateTransition&&c.__fromStateTransition.indexOf(n)<0&&"style"===c.targetName&&c.saveTo(o,e)}return o}(t,["opacity"],e,{opacity:1}),a=(n=n||{}).style||{};return null==a.opacity&&(n=I({},n),a=I({opacity:i?r:.1*o.opacity},a),n.style=a),n}(this,t,n);if("select"===t)return function(t,e,n){if(n&&null==n.z2){n=I({},n);var i=t.z2SelectLift;n.z2=t.z2+(null!=i?i:9)}return n}(this,0,n)}return n}function xl(t){t.stateProxy=bl;var e=t.getTextContent(),n=t.getTextGuideLine();e&&(e.stateProxy=bl),n&&(n.stateProxy=bl)}function _l(t,e){!Il(t,e)&&!t.__highByOuter&&vl(t,ul)}function wl(t,e){!Il(t,e)&&!t.__highByOuter&&vl(t,hl)}function Sl(t,e){t.__highByOuter|=1<<(e||0),vl(t,ul)}function Cl(t,e){!(t.__highByOuter&=~(1<<(e||0)))&&vl(t,hl)}function kl(t){vl(t,dl)}function Al(t){vl(t,pl)}function Ml(t){vl(t,fl)}function Tl(t){vl(t,gl)}function Il(t,e){return t.__highDownSilentOnTouch&&e.zrByTouch}function El(t){var e=t.getModel(),n=[],i=[];e.eachComponent((function(e,r){var o=tl(r),a="series"===e,s=a?t.getViewOfSeriesModel(r):t.getViewOfComponentModel(r);!a&&i.push(s),o.isBlured&&(s.group.traverse((function(t){pl(t)})),a&&n.push(r)),o.isBlured=!1})),R(i,(function(t){t&&t.toggleBlurSeries&&t.toggleBlurSeries(n,!1,e)}))}function Ol(t,e,n,i){var r=i.getModel();function o(t,e){for(var n=0;n<e.length;n++){var i=t.getItemGraphicEl(e[n]);i&&Al(i)}}if(n=n||"coordinateSystem",null!=t&&e&&"none"!==e){var a=r.getSeriesByIndex(t),s=a.coordinateSystem;s&&s.master&&(s=s.master);var l=[];r.eachSeries((function(t){var r=a===t,c=t.coordinateSystem;if(c&&c.master&&(c=c.master),!("series"===n&&!r||"coordinateSystem"===n&&!(c&&s?c===s:r)||"series"===e&&r)){if(i.getViewOfSeriesModel(t).group.traverse((function(t){t.__highByOuter&&r&&"self"===e||dl(t)})),N(e))o(t.getData(),e);else if($(e))for(var u=H(e),h=0;h<u.length;h++)o(t.getData(u[h]),e[u[h]]);l.push(t),tl(t).isBlured=!0}})),r.eachComponent((function(t,e){if("series"!==t){var n=i.getViewOfComponentModel(e);n&&n.toggleBlurSeries&&n.toggleBlurSeries(l,!0,r)}}))}}function Dl(t,e,n){if(null!=t&&null!=e){var i=n.getModel().getComponent(t,e);if(i){tl(i).isBlured=!0;var r=n.getViewOfComponentModel(i);r&&r.focusBlurEnabled&&r.group.traverse((function(t){dl(t)}))}}}function Ll(t,e,n,i){var r={focusSelf:!1,dispatchers:null};if(null==t||"series"===t||null==e||null==n)return r;var o=i.getModel().getComponent(t,e);if(!o)return r;var a=i.getViewOfComponentModel(o);if(!a||!a.findHighDownDispatchers)return r;for(var s,l=a.findHighDownDispatchers(n),c=0;c<l.length;c++)if("self"===$s(l[c]).focus){s=!0;break}return{focusSelf:s,dispatchers:l}}function Pl(t){R(t.getAllData(),(function(e){var n=e.data,i=e.type;n.eachItemGraphicEl((function(e,n){t.isSelected(n,i)?Ml(e):Tl(e)}))}))}function Nl(t){var e=[];return t.eachSeries((function(t){R(t.getAllData(),(function(n){n.data;var i=n.type,r=t.getSelectedDataIndices();if(r.length>0){var o={dataIndex:r,seriesIndex:t.seriesIndex};null!=i&&(o.dataType=i),e.push(o)}}))})),e}function Rl(t,e,n){Wl(t,!0),vl(t,xl),zl(t,e,n)}function Bl(t,e,n,i){i?function(t){Wl(t,!1)}(t):Rl(t,e,n)}function zl(t,e,n){var i=$s(t);null!=e?(i.focus=e,i.blurScope=n):i.focus&&(i.focus=null)}var Fl=["emphasis","blur","select"],Vl={itemStyle:"getItemStyle",lineStyle:"getLineStyle",areaStyle:"getAreaStyle"};function Hl(t,e,n,i){n=n||"itemStyle";for(var r=0;r<Fl.length;r++){var o=Fl[r],a=e.getModel([o,n]);t.ensureState(o).style=i?i(a):a[Vl[n]]()}}function Wl(t,e){var n=!1===e,i=t;t.highDownSilentOnTouch&&(i.__highDownSilentOnTouch=t.highDownSilentOnTouch),n&&!i.__highDownDispatcher||(i.__highByOuter=i.__highByOuter||0,i.__highDownDispatcher=!n)}function jl(t){return!(!t||!t.__highDownDispatcher)}function Yl(t){var e=t.type;return e===ol||e===al||e===sl}function Xl(t){var e=t.type;return e===il||e===rl}var Gl=es.CMD,ql=[[],[],[]],Ul=Math.sqrt,$l=Math.atan2;function Zl(t,e){if(e){var n,i,r,o,a,s,l=t.data,c=t.len(),u=Gl.M,h=Gl.C,d=Gl.L,p=Gl.R,f=Gl.A,g=Gl.Q;for(r=0,o=0;r<c;){switch(n=l[r++],o=r,i=0,n){case u:case d:i=1;break;case h:i=3;break;case g:i=2;break;case f:var m=e[4],v=e[5],y=Ul(e[0]*e[0]+e[1]*e[1]),b=Ul(e[2]*e[2]+e[3]*e[3]),x=$l(-e[1]/b,e[0]/y);l[r]*=y,l[r++]+=m,l[r]*=b,l[r++]+=v,l[r++]*=y,l[r++]*=b,l[r++]+=x,l[r++]+=x,o=r+=2;break;case p:s[0]=l[r++],s[1]=l[r++],Wt(s,s,e),l[o++]=s[0],l[o++]=s[1],s[0]+=l[r++],s[1]+=l[r++],Wt(s,s,e),l[o++]=s[0],l[o++]=s[1]}for(a=0;a<i;a++){var _=ql[a];_[0]=l[r++],_[1]=l[r++],Wt(_,_,e),l[o++]=_[0],l[o++]=_[1]}}t.increaseVersion()}}var Kl=Math.sqrt,Ql=Math.sin,Jl=Math.cos,tc=Math.PI;function ec(t){return Math.sqrt(t[0]*t[0]+t[1]*t[1])}function nc(t,e){return(t[0]*e[0]+t[1]*e[1])/(ec(t)*ec(e))}function ic(t,e){return(t[0]*e[1]<t[1]*e[0]?-1:1)*Math.acos(nc(t,e))}function rc(t,e,n,i,r,o,a,s,l,c,u){var h=l*(tc/180),d=Jl(h)*(t-n)/2+Ql(h)*(e-i)/2,p=-1*Ql(h)*(t-n)/2+Jl(h)*(e-i)/2,f=d*d/(a*a)+p*p/(s*s);f>1&&(a*=Kl(f),s*=Kl(f));var g=(r===o?-1:1)*Kl((a*a*(s*s)-a*a*(p*p)-s*s*(d*d))/(a*a*(p*p)+s*s*(d*d)))||0,m=g*a*p/s,v=g*-s*d/a,y=(t+n)/2+Jl(h)*m-Ql(h)*v,b=(e+i)/2+Ql(h)*m+Jl(h)*v,x=ic([1,0],[(d-m)/a,(p-v)/s]),_=[(d-m)/a,(p-v)/s],w=[(-1*d-m)/a,(-1*p-v)/s],S=ic(_,w);if(nc(_,w)<=-1&&(S=tc),nc(_,w)>=1&&(S=0),S<0){var C=Math.round(S/tc*1e6)/1e6;S=2*tc+C%2*tc}u.addData(c,y,b,a,s,x,S,h,o)}var oc=/([mlvhzcqtsa])([^mlvhzcqtsa]*)/gi,ac=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g,sc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.applyTransform=function(t){},e}(_s);function lc(t){return null!=t.setData}function cc(t,e){var n=function(t){var e=new es;if(!t)return e;var n,i=0,r=0,o=i,a=r,s=es.CMD,l=t.match(oc);if(!l)return e;for(var c=0;c<l.length;c++){for(var u=l[c],h=u.charAt(0),d=void 0,p=u.match(ac)||[],f=p.length,g=0;g<f;g++)p[g]=parseFloat(p[g]);for(var m=0;m<f;){var v=void 0,y=void 0,b=void 0,x=void 0,_=void 0,w=void 0,S=void 0,C=i,k=r,A=void 0,M=void 0;switch(h){case"l":i+=p[m++],r+=p[m++],d=s.L,e.addData(d,i,r);break;case"L":i=p[m++],r=p[m++],d=s.L,e.addData(d,i,r);break;case"m":i+=p[m++],r+=p[m++],d=s.M,e.addData(d,i,r),o=i,a=r,h="l";break;case"M":i=p[m++],r=p[m++],d=s.M,e.addData(d,i,r),o=i,a=r,h="L";break;case"h":i+=p[m++],d=s.L,e.addData(d,i,r);break;case"H":i=p[m++],d=s.L,e.addData(d,i,r);break;case"v":r+=p[m++],d=s.L,e.addData(d,i,r);break;case"V":r=p[m++],d=s.L,e.addData(d,i,r);break;case"C":d=s.C,e.addData(d,p[m++],p[m++],p[m++],p[m++],p[m++],p[m++]),i=p[m-2],r=p[m-1];break;case"c":d=s.C,e.addData(d,p[m++]+i,p[m++]+r,p[m++]+i,p[m++]+r,p[m++]+i,p[m++]+r),i+=p[m-2],r+=p[m-1];break;case"S":v=i,y=r,A=e.len(),M=e.data,n===s.C&&(v+=i-M[A-4],y+=r-M[A-3]),d=s.C,C=p[m++],k=p[m++],i=p[m++],r=p[m++],e.addData(d,v,y,C,k,i,r);break;case"s":v=i,y=r,A=e.len(),M=e.data,n===s.C&&(v+=i-M[A-4],y+=r-M[A-3]),d=s.C,C=i+p[m++],k=r+p[m++],i+=p[m++],r+=p[m++],e.addData(d,v,y,C,k,i,r);break;case"Q":C=p[m++],k=p[m++],i=p[m++],r=p[m++],d=s.Q,e.addData(d,C,k,i,r);break;case"q":C=p[m++]+i,k=p[m++]+r,i+=p[m++],r+=p[m++],d=s.Q,e.addData(d,C,k,i,r);break;case"T":v=i,y=r,A=e.len(),M=e.data,n===s.Q&&(v+=i-M[A-4],y+=r-M[A-3]),i=p[m++],r=p[m++],d=s.Q,e.addData(d,v,y,i,r);break;case"t":v=i,y=r,A=e.len(),M=e.data,n===s.Q&&(v+=i-M[A-4],y+=r-M[A-3]),i+=p[m++],r+=p[m++],d=s.Q,e.addData(d,v,y,i,r);break;case"A":b=p[m++],x=p[m++],_=p[m++],w=p[m++],S=p[m++],rc(C=i,k=r,i=p[m++],r=p[m++],w,S,b,x,_,d=s.A,e);break;case"a":b=p[m++],x=p[m++],_=p[m++],w=p[m++],S=p[m++],rc(C=i,k=r,i+=p[m++],r+=p[m++],w,S,b,x,_,d=s.A,e)}}"z"!==h&&"Z"!==h||(d=s.Z,e.addData(d),i=o,r=a),n=d}return e.toStatic(),e}(t),i=I({},e);return i.buildPath=function(t){if(lc(t))t.setData(n.data),(e=t.getContext())&&t.rebuildPath(e,1);else{var e=t;n.rebuildPath(e,1)}},i.applyTransform=function(t){Zl(n,t),this.dirtyShape()},i}function uc(t,e){return new sc(cc(t,e))}function hc(t,e){e=e||{};var n=new _s;return t.shape&&n.setShape(t.shape),n.setStyle(t.style),e.bakeTransform?Zl(n.path,t.getComputedTransform()):e.toLocal?n.setLocalTransform(t.getComputedTransform()):n.copyTransform(t),n.buildPath=t.buildPath,n.applyTransform=n.applyTransform,n.z=t.z,n.z2=t.z2,n.zlevel=t.zlevel,n}var dc=function(){this.cx=0,this.cy=0,this.r=0},pc=function(t){function e(e){return t.call(this,e)||this}return n(e,t),e.prototype.getDefaultShape=function(){return new dc},e.prototype.buildPath=function(t,e){t.moveTo(e.cx+e.r,e.cy),t.arc(e.cx,e.cy,e.r,0,2*Math.PI)},e}(_s);pc.prototype.type="circle";var fc=function(){this.cx=0,this.cy=0,this.rx=0,this.ry=0},gc=function(t){function e(e){return t.call(this,e)||this}return n(e,t),e.prototype.getDefaultShape=function(){return new fc},e.prototype.buildPath=function(t,e){var n=.5522848,i=e.cx,r=e.cy,o=e.rx,a=e.ry,s=o*n,l=a*n;t.moveTo(i-o,r),t.bezierCurveTo(i-o,r-l,i-s,r-a,i,r-a),t.bezierCurveTo(i+s,r-a,i+o,r-l,i+o,r),t.bezierCurveTo(i+o,r+l,i+s,r+a,i,r+a),t.bezierCurveTo(i-s,r+a,i-o,r+l,i-o,r),t.closePath()},e}(_s);gc.prototype.type="ellipse";var mc=Math.PI,vc=2*mc,yc=Math.sin,bc=Math.cos,xc=Math.acos,_c=Math.atan2,wc=Math.abs,Sc=Math.sqrt,Cc=Math.max,kc=Math.min,Ac=1e-4;function Mc(t,e,n,i,r,o,a){var s=t-n,l=e-i,c=(a?o:-o)/Sc(s*s+l*l),u=c*l,h=-c*s,d=t+u,p=e+h,f=n+u,g=i+h,m=(d+f)/2,v=(p+g)/2,y=f-d,b=g-p,x=y*y+b*b,_=r-o,w=d*g-f*p,S=(b<0?-1:1)*Sc(Cc(0,_*_*x-w*w)),C=(w*b-y*S)/x,k=(-w*y-b*S)/x,A=(w*b+y*S)/x,M=(-w*y+b*S)/x,T=C-m,I=k-v,E=A-m,O=M-v;return T*T+I*I>E*E+O*O&&(C=A,k=M),{cx:C,cy:k,x0:-u,y0:-h,x1:C*(r/_-1),y1:k*(r/_-1)}}var Tc=function(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0,this.cornerRadius=0},Ic=function(t){function e(e){return t.call(this,e)||this}return n(e,t),e.prototype.getDefaultShape=function(){return new Tc},e.prototype.buildPath=function(t,e){!function(t,e){var n,i=Cc(e.r,0),r=Cc(e.r0||0,0),o=i>0;if(o||r>0){if(o||(i=r,r=0),r>i){var a=i;i=r,r=a}var s=e.startAngle,l=e.endAngle;if(!isNaN(s)&&!isNaN(l)){var c=e.cx,u=e.cy,h=!!e.clockwise,d=wc(l-s),p=d>vc&&d%vc;if(p>Ac&&(d=p),i>Ac)if(d>vc-Ac)t.moveTo(c+i*bc(s),u+i*yc(s)),t.arc(c,u,i,s,l,!h),r>Ac&&(t.moveTo(c+r*bc(l),u+r*yc(l)),t.arc(c,u,r,l,s,h));else{var f=void 0,g=void 0,m=void 0,v=void 0,y=void 0,b=void 0,x=void 0,_=void 0,w=void 0,S=void 0,C=void 0,k=void 0,A=void 0,M=void 0,T=void 0,I=void 0,E=i*bc(s),O=i*yc(s),D=r*bc(l),L=r*yc(l),P=d>Ac;if(P){var N=e.cornerRadius;N&&(n=function(t){var e;if(Y(t)){var n=t.length;if(!n)return t;e=1===n?[t[0],t[0],0,0]:2===n?[t[0],t[0],t[1],t[1]]:3===n?t.concat(t[2]):t}else e=[t,t,t,t];return e}(N),f=n[0],g=n[1],m=n[2],v=n[3]);var R=wc(i-r)/2;if(y=kc(R,m),b=kc(R,v),x=kc(R,f),_=kc(R,g),C=w=Cc(y,b),k=S=Cc(x,_),(w>Ac||S>Ac)&&(A=i*bc(l),M=i*yc(l),T=r*bc(s),I=r*yc(s),d<mc)){var B=function(t,e,n,i,r,o,a,s){var l=n-t,c=i-e,u=a-r,h=s-o,d=h*l-u*c;if(!(d*d<Ac))return[t+(d=(u*(e-o)-h*(t-r))/d)*l,e+d*c]}(E,O,T,I,A,M,D,L);if(B){var z=E-B[0],F=O-B[1],V=A-B[0],H=M-B[1],W=1/yc(xc((z*V+F*H)/(Sc(z*z+F*F)*Sc(V*V+H*H)))/2),j=Sc(B[0]*B[0]+B[1]*B[1]);C=kc(w,(i-j)/(W+1)),k=kc(S,(r-j)/(W-1))}}}if(P)if(C>Ac){var X=kc(m,C),G=kc(v,C),q=Mc(T,I,E,O,i,X,h),U=Mc(A,M,D,L,i,G,h);t.moveTo(c+q.cx+q.x0,u+q.cy+q.y0),C<w&&X===G?t.arc(c+q.cx,u+q.cy,C,_c(q.y0,q.x0),_c(U.y0,U.x0),!h):(X>0&&t.arc(c+q.cx,u+q.cy,X,_c(q.y0,q.x0),_c(q.y1,q.x1),!h),t.arc(c,u,i,_c(q.cy+q.y1,q.cx+q.x1),_c(U.cy+U.y1,U.cx+U.x1),!h),G>0&&t.arc(c+U.cx,u+U.cy,G,_c(U.y1,U.x1),_c(U.y0,U.x0),!h))}else t.moveTo(c+E,u+O),t.arc(c,u,i,s,l,!h);else t.moveTo(c+E,u+O);r>Ac&&P?k>Ac?(X=kc(f,k),q=Mc(D,L,A,M,r,-(G=kc(g,k)),h),U=Mc(E,O,T,I,r,-X,h),t.lineTo(c+q.cx+q.x0,u+q.cy+q.y0),k<S&&X===G?t.arc(c+q.cx,u+q.cy,k,_c(q.y0,q.x0),_c(U.y0,U.x0),!h):(G>0&&t.arc(c+q.cx,u+q.cy,G,_c(q.y0,q.x0),_c(q.y1,q.x1),!h),t.arc(c,u,r,_c(q.cy+q.y1,q.cx+q.x1),_c(U.cy+U.y1,U.cx+U.x1),h),X>0&&t.arc(c+U.cx,u+U.cy,X,_c(U.y1,U.x1),_c(U.y0,U.x0),!h))):(t.lineTo(c+D,u+L),t.arc(c,u,r,l,s,h)):t.lineTo(c+D,u+L)}else t.moveTo(c,u);t.closePath()}}}(t,e)},e.prototype.isZeroArea=function(){return this.shape.startAngle===this.shape.endAngle||this.shape.r===this.shape.r0},e}(_s);Ic.prototype.type="sector";var Ec=function(){this.cx=0,this.cy=0,this.r=0,this.r0=0},Oc=function(t){function e(e){return t.call(this,e)||this}return n(e,t),e.prototype.getDefaultShape=function(){return new Ec},e.prototype.buildPath=function(t,e){var n=e.cx,i=e.cy,r=2*Math.PI;t.moveTo(n+e.r,i),t.arc(n,i,e.r,0,r,!1),t.moveTo(n+e.r0,i),t.arc(n,i,e.r0,0,r,!0)},e}(_s);function Dc(t,e,n){var i=e.smooth,r=e.points;if(r&&r.length>=2){if(i){var o=function(t,e,n,i){var r,o,a,s,l=[],c=[],u=[],h=[];if(i){a=[1/0,1/0],s=[-1/0,-1/0];for(var d=0,p=t.length;d<p;d++)jt(a,a,t[d]),Yt(s,s,t[d]);jt(a,a,i[0]),Yt(s,s,i[1])}for(d=0,p=t.length;d<p;d++){var f=t[d];if(n)r=t[d?d-1:p-1],o=t[(d+1)%p];else{if(0===d||d===p-1){l.push(At(t[d]));continue}r=t[d-1],o=t[d+1]}Et(c,o,r),Nt(c,c,e);var g=Bt(f,r),m=Bt(f,o),v=g+m;0!==v&&(g/=v,m/=v),Nt(u,c,-g),Nt(h,c,m);var y=Tt([],f,u),b=Tt([],f,h);i&&(Yt(y,y,a),jt(y,y,s),Yt(b,b,a),jt(b,b,s)),l.push(y),l.push(b)}return n&&l.push(l.shift()),l}(r,i,n,e.smoothConstraint);t.moveTo(r[0][0],r[0][1]);for(var a=r.length,s=0;s<(n?a:a-1);s++){var l=o[2*s],c=o[2*s+1],u=r[(s+1)%a];t.bezierCurveTo(l[0],l[1],c[0],c[1],u[0],u[1])}}else{t.moveTo(r[0][0],r[0][1]),s=1;for(var h=r.length;s<h;s++)t.lineTo(r[s][0],r[s][1])}n&&t.closePath()}}Oc.prototype.type="ring";var Lc=function(){this.points=null,this.smooth=0,this.smoothConstraint=null},Pc=function(t){function e(e){return t.call(this,e)||this}return n(e,t),e.prototype.getDefaultShape=function(){return new Lc},e.prototype.buildPath=function(t,e){Dc(t,e,!0)},e}(_s);Pc.prototype.type="polygon";var Nc=function(){this.points=null,this.percent=1,this.smooth=0,this.smoothConstraint=null},Rc=function(t){function e(e){return t.call(this,e)||this}return n(e,t),e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new Nc},e.prototype.buildPath=function(t,e){Dc(t,e,!1)},e}(_s);Rc.prototype.type="polyline";var Bc={},zc=function(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1},Fc=function(t){function e(e){return t.call(this,e)||this}return n(e,t),e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new zc},e.prototype.buildPath=function(t,e){var n,i,r,o;if(this.subPixelOptimize){var a=Ts(Bc,e,this.style);n=a.x1,i=a.y1,r=a.x2,o=a.y2}else n=e.x1,i=e.y1,r=e.x2,o=e.y2;var s=e.percent;0!==s&&(t.moveTo(n,i),s<1&&(r=n*(1-s)+r*s,o=i*(1-s)+o*s),t.lineTo(r,o))},e.prototype.pointAt=function(t){var e=this.shape;return[e.x1*(1-t)+e.x2*t,e.y1*(1-t)+e.y2*t]},e}(_s);Fc.prototype.type="line";var Vc=[],Hc=function(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.percent=1};function Wc(t,e,n){var i=t.cpx2,r=t.cpy2;return null!=i||null!=r?[(n?mn:gn)(t.x1,t.cpx1,t.cpx2,t.x2,e),(n?mn:gn)(t.y1,t.cpy1,t.cpy2,t.y2,e)]:[(n?Sn:wn)(t.x1,t.cpx1,t.x2,e),(n?Sn:wn)(t.y1,t.cpy1,t.y2,e)]}var jc=function(t){function e(e){return t.call(this,e)||this}return n(e,t),e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new Hc},e.prototype.buildPath=function(t,e){var n=e.x1,i=e.y1,r=e.x2,o=e.y2,a=e.cpx1,s=e.cpy1,l=e.cpx2,c=e.cpy2,u=e.percent;0!==u&&(t.moveTo(n,i),null==l||null==c?(u<1&&(kn(n,a,r,u,Vc),a=Vc[1],r=Vc[2],kn(i,s,o,u,Vc),s=Vc[1],o=Vc[2]),t.quadraticCurveTo(a,s,r,o)):(u<1&&(bn(n,a,l,r,u,Vc),a=Vc[1],l=Vc[2],r=Vc[3],bn(i,s,c,o,u,Vc),s=Vc[1],c=Vc[2],o=Vc[3]),t.bezierCurveTo(a,s,l,c,r,o)))},e.prototype.pointAt=function(t){return Wc(this.shape,t,!1)},e.prototype.tangentAt=function(t){var e=Wc(this.shape,t,!0);return Rt(e,e)},e}(_s);jc.prototype.type="bezier-curve";var Yc=function(){this.cx=0,this.cy=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0},Xc=function(t){function e(e){return t.call(this,e)||this}return n(e,t),e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new Yc},e.prototype.buildPath=function(t,e){var n=e.cx,i=e.cy,r=Math.max(e.r,0),o=e.startAngle,a=e.endAngle,s=e.clockwise,l=Math.cos(o),c=Math.sin(o);t.moveTo(l*r+n,c*r+i),t.arc(n,i,r,o,a,!s)},e}(_s);Xc.prototype.type="arc";var Gc=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="compound",e}return n(e,t),e.prototype._updatePathDirty=function(){for(var t=this.shape.paths,e=this.shapeChanged(),n=0;n<t.length;n++)e=e||t[n].shapeChanged();e&&this.dirtyShape()},e.prototype.beforeBrush=function(){this._updatePathDirty();for(var t=this.shape.paths||[],e=this.getGlobalScale(),n=0;n<t.length;n++)t[n].path||t[n].createPathProxy(),t[n].path.setScale(e[0],e[1],t[n].segmentIgnoreThreshold)},e.prototype.buildPath=function(t,e){for(var n=e.paths||[],i=0;i<n.length;i++)n[i].buildPath(t,n[i].shape,!0)},e.prototype.afterBrush=function(){for(var t=this.shape.paths||[],e=0;e<t.length;e++)t[e].pathUpdated()},e.prototype.getBoundingRect=function(){return this._updatePathDirty.call(this),_s.prototype.getBoundingRect.call(this)},e}(_s),qc=function(){function t(t){this.colorStops=t||[]}return t.prototype.addColorStop=function(t,e){this.colorStops.push({offset:t,color:e})},t}(),Uc=function(t){function e(e,n,i,r,o,a){var s=t.call(this,o)||this;return s.x=null==e?0:e,s.y=null==n?0:n,s.x2=null==i?1:i,s.y2=null==r?0:r,s.type="linear",s.global=a||!1,s}return n(e,t),e}(qc),$c=function(t){function e(e,n,i,r,o){var a=t.call(this,r)||this;return a.x=null==e?.5:e,a.y=null==n?.5:n,a.r=null==i?.5:i,a.type="radial",a.global=o||!1,a}return n(e,t),e}(qc),Zc=[0,0],Kc=[0,0],Qc=new Me,Jc=new Me,tu=function(){function t(t,e){this._corners=[],this._axes=[],this._origin=[0,0];for(var n=0;n<4;n++)this._corners[n]=new Me;for(n=0;n<2;n++)this._axes[n]=new Me;t&&this.fromBoundingRect(t,e)}return t.prototype.fromBoundingRect=function(t,e){var n=this._corners,i=this._axes,r=t.x,o=t.y,a=r+t.width,s=o+t.height;if(n[0].set(r,o),n[1].set(a,o),n[2].set(a,s),n[3].set(r,s),e)for(var l=0;l<4;l++)n[l].transform(e);for(Me.sub(i[0],n[1],n[0]),Me.sub(i[1],n[3],n[0]),i[0].normalize(),i[1].normalize(),l=0;l<2;l++)this._origin[l]=i[l].dot(n[0])},t.prototype.intersect=function(t,e){var n=!0,i=!e;return Qc.set(1/0,1/0),Jc.set(0,0),!this._intersectCheckOneSide(this,t,Qc,Jc,i,1)&&(n=!1,i)||!this._intersectCheckOneSide(t,this,Qc,Jc,i,-1)&&(n=!1,i)||i||Me.copy(e,n?Qc:Jc),n},t.prototype._intersectCheckOneSide=function(t,e,n,i,r,o){for(var a=!0,s=0;s<2;s++){var l=this._axes[s];if(this._getProjMinMaxOnAxis(s,t._corners,Zc),this._getProjMinMaxOnAxis(s,e._corners,Kc),Zc[1]<Kc[0]||Zc[0]>Kc[1]){if(a=!1,r)return a;var c=Math.abs(Kc[0]-Zc[1]),u=Math.abs(Zc[0]-Kc[1]);Math.min(c,u)>i.len()&&(c<u?Me.scale(i,l,-c*o):Me.scale(i,l,u*o))}else n&&(c=Math.abs(Kc[0]-Zc[1]),u=Math.abs(Zc[0]-Kc[1]),Math.min(c,u)<n.len()&&(c<u?Me.scale(n,l,c*o):Me.scale(n,l,-u*o)))}return a},t.prototype._getProjMinMaxOnAxis=function(t,e,n){for(var i=this._axes[t],r=this._origin,o=e[0].dot(i)+r[t],a=o,s=o,l=1;l<e.length;l++){var c=e[l].dot(i)+r[t];a=Math.min(c,a),s=Math.max(c,s)}n[0]=a,n[1]=s},t}(),eu=[],nu=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.notClear=!0,e.incremental=!0,e._displayables=[],e._temporaryDisplayables=[],e._cursor=0,e}return n(e,t),e.prototype.traverse=function(t,e){t.call(e,this)},e.prototype.useStyle=function(){this.style={}},e.prototype.getCursor=function(){return this._cursor},e.prototype.innerAfterBrush=function(){this._cursor=this._displayables.length},e.prototype.clearDisplaybles=function(){this._displayables=[],this._temporaryDisplayables=[],this._cursor=0,this.markRedraw(),this.notClear=!1},e.prototype.clearTemporalDisplayables=function(){this._temporaryDisplayables=[]},e.prototype.addDisplayable=function(t,e){e?this._temporaryDisplayables.push(t):this._displayables.push(t),this.markRedraw()},e.prototype.addDisplayables=function(t,e){e=e||!1;for(var n=0;n<t.length;n++)this.addDisplayable(t[n],e)},e.prototype.getDisplayables=function(){return this._displayables},e.prototype.getTemporalDisplayables=function(){return this._temporaryDisplayables},e.prototype.eachPendingDisplayable=function(t){for(var e=this._cursor;e<this._displayables.length;e++)t&&t(this._displayables[e]);for(e=0;e<this._temporaryDisplayables.length;e++)t&&t(this._temporaryDisplayables[e])},e.prototype.update=function(){this.updateTransform();for(var t=this._cursor;t<this._displayables.length;t++)(e=this._displayables[t]).parent=this,e.update(),e.parent=null;for(t=0;t<this._temporaryDisplayables.length;t++){var e;(e=this._temporaryDisplayables[t]).parent=this,e.update(),e.parent=null}},e.prototype.getBoundingRect=function(){if(!this._rect){for(var t=new Re(1/0,1/0,-1/0,-1/0),e=0;e<this._displayables.length;e++){var n=this._displayables[e],i=n.getBoundingRect().clone();n.needLocalTransform()&&i.applyTransform(n.getLocalTransform(eu)),t.union(i)}this._rect=t}return this._rect},e.prototype.contain=function(t,e){var n=this.transformCoordToLocal(t,e);if(this.getBoundingRect().contain(n[0],n[1]))for(var i=0;i<this._displayables.length;i++)if(this._displayables[i].contain(t,e))return!0;return!1},e}(ba),iu=Io();function ru(t,e,n,i,r){var o;if(e&&e.ecModel){var a=e.ecModel.getUpdatePayload();o=a&&a.animation}var s="update"===t;if(e&&e.isAnimationEnabled()){var l=void 0,c=void 0,u=void 0;return i?(l=rt(i.duration,200),c=rt(i.easing,"cubicOut"),u=0):(l=e.getShallow(s?"animationDurationUpdate":"animationDuration"),c=e.getShallow(s?"animationEasingUpdate":"animationEasing"),u=e.getShallow(s?"animationDelayUpdate":"animationDelay")),o&&(null!=o.duration&&(l=o.duration),null!=o.easing&&(c=o.easing),null!=o.delay&&(u=o.delay)),X(u)&&(u=u(n,r)),X(l)&&(l=l(n)),{duration:l||0,delay:u,easing:c}}return null}function ou(t,e,n,i,r,o,a){var s,l=!1;X(r)?(a=o,o=r,r=null):$(r)&&(o=r.cb,a=r.during,l=r.isFrom,s=r.removeOpt,r=r.dataIndex);var c="leave"===t;c||e.stopAnimation("leave");var u=ru(t,i,r,c?s||{}:null,i&&i.getAnimationDelayParams?i.getAnimationDelayParams(e,r):null);if(u&&u.duration>0){var h={duration:u.duration,delay:u.delay||0,easing:u.easing,done:o,force:!!o||!!a,setToFinal:!c,scope:t,during:a};l?e.animateFrom(n,h):e.animateTo(n,h)}else e.stopAnimation(),!l&&e.attr(n),a&&a(1),o&&o()}function au(t,e,n,i,r,o){ou("update",t,e,n,i,r,o)}function su(t,e,n,i,r,o){ou("enter",t,e,n,i,r,o)}function lu(t){if(!t.__zr)return!0;for(var e=0;e<t.animators.length;e++)if("leave"===t.animators[e].scope)return!0;return!1}function cu(t,e,n,i,r,o){lu(t)||ou("leave",t,e,n,i,r,o)}function uu(t,e,n,i){t.removeTextContent(),t.removeTextGuideLine(),cu(t,{style:{opacity:0}},e,n,i)}function hu(t,e,n){function i(){t.parent&&t.parent.remove(t)}t.isGroup?t.traverse((function(t){t.isGroup||uu(t,e,n,i)})):uu(t,e,n,i)}function du(t){iu(t).oldStyle=t.style}var pu=Math.max,fu=Math.min,gu={};function mu(t){return _s.extend(t)}function vu(t,e){return function(t,e){var i=cc(t,e);return function(t){function e(e){var n=t.call(this,e)||this;return n.applyTransform=i.applyTransform,n.buildPath=i.buildPath,n}return n(e,t),e}(sc)}(t,e)}function yu(t,e){gu[t]=e}function bu(t){if(gu.hasOwnProperty(t))return gu[t]}function xu(t,e,n,i){var r=uc(t,e);return n&&("center"===i&&(n=wu(n,r.getBoundingRect())),Cu(r,n)),r}function _u(t,e,n){var i=new As({style:{image:t,x:e.x,y:e.y,width:e.width,height:e.height},onload:function(t){if("center"===n){var r={width:t.width,height:t.height};i.setStyle(wu(e,r))}}});return i}function wu(t,e){var n,i=e.width/e.height,r=t.height*i;return n=r<=t.width?t.height:(r=t.width)/i,{x:t.x+t.width/2-r/2,y:t.y+t.height/2-n/2,width:r,height:n}}var Su=function(t,e){for(var n=[],i=t.length,r=0;r<i;r++){var o=t[r];n.push(o.getUpdatedPathProxy(!0))}var a=new _s(e);return a.createPathProxy(),a.buildPath=function(t){if(lc(t)){t.appendPath(n);var e=t.getContext();e&&t.rebuildPath(e,1)}},a};function Cu(t,e){if(t.applyTransform){var n=t.getBoundingRect().calculateTransform(e);t.applyTransform(n)}}function ku(t,e){return Ts(t,t,{lineWidth:e}),t}var Au=Es;function Mu(t,e){for(var n=ye([]);t&&t!==e;)xe(n,t.getLocalTransform(),n),t=t.parent;return n}function Tu(t,e,n){return e&&!N(e)&&(e=ur.getLocalTransform(e)),n&&(e=Ce([],e)),Wt([],t,e)}function Iu(t,e,n){var i=0===e[4]||0===e[5]||0===e[0]?1:Math.abs(2*e[4]/e[0]),r=0===e[4]||0===e[5]||0===e[2]?1:Math.abs(2*e[4]/e[2]),o=["left"===t?-i:"right"===t?i:0,"top"===t?-r:"bottom"===t?r:0];return o=Tu(o,e,n),Math.abs(o[0])>Math.abs(o[1])?o[0]>0?"right":"left":o[1]>0?"bottom":"top"}function Eu(t){return!t.isGroup}function Ou(t,e,n){if(t&&e){var i,r=(i={},t.traverse((function(t){Eu(t)&&t.anid&&(i[t.anid]=t)})),i);e.traverse((function(t){if(Eu(t)&&t.anid){var e=r[t.anid];if(e){var i=o(t);t.attr(o(e)),au(t,i,n,$s(t).dataIndex)}}}))}function o(t){var e={x:t.x,y:t.y,rotation:t.rotation};return function(t){return null!=t.shape}(t)&&(e.shape=I({},t.shape)),e}}function Du(t,e){return B(t,(function(t){var n=t[0];n=pu(n,e.x),n=fu(n,e.x+e.width);var i=t[1];return i=pu(i,e.y),[n,i=fu(i,e.y+e.height)]}))}function Lu(t,e){var n=pu(t.x,e.x),i=fu(t.x+t.width,e.x+e.width),r=pu(t.y,e.y),o=fu(t.y+t.height,e.y+e.height);if(i>=n&&o>=r)return{x:n,y:r,width:i-n,height:o-r}}function Pu(t,e,n){var i=I({rectHover:!0},e),r=i.style={strokeNoScale:!0};if(n=n||{x:-1,y:-1,width:2,height:2},t)return 0===t.indexOf("image://")?(r.image=t.slice(8),E(r,n),new As(i)):xu(t.replace("path://",""),i,n,"center")}function Nu(t,e,n,i,r){for(var o=0,a=r[r.length-1];o<r.length;o++){var s=r[o];if(Ru(t,e,n,i,s[0],s[1],a[0],a[1]))return!0;a=s}}function Ru(t,e,n,i,r,o,a,s){var l,c=n-t,u=i-e,h=a-r,d=s-o,p=Bu(h,d,c,u);if((l=p)<=1e-6&&l>=-1e-6)return!1;var f=t-r,g=e-o,m=Bu(f,g,c,u)/p;if(m<0||m>1)return!1;var v=Bu(f,g,h,d)/p;return!(v<0||v>1)}function Bu(t,e,n,i){return t*i-n*e}function zu(t){var e=t.itemTooltipOption,n=t.componentModel,i=t.itemName,r=G(e)?{formatter:e}:e,o=n.mainType,a=n.componentIndex,s={componentType:o,name:i,$vars:["name"]};s[o+"Index"]=a;var l=t.formatterParamsExtra;l&&R(H(l),(function(t){xt(s,t)||(s[t]=l[t],s.$vars.push(t))}));var c=$s(t.el);c.componentMainType=o,c.componentIndex=a,c.tooltipConfig={name:i,option:E({content:i,formatterParams:s},r)}}function Fu(t,e){var n;t.isGroup&&(n=e(t)),n||t.traverse(e)}function Vu(t,e){if(t)if(Y(t))for(var n=0;n<t.length;n++)Fu(t[n],e);else Fu(t,e)}yu("circle",pc),yu("ellipse",gc),yu("sector",Ic),yu("ring",Oc),yu("polygon",Pc),yu("polyline",Rc),yu("rect",Ls),yu("line",Fc),yu("bezierCurve",jc),yu("arc",Xc);var Hu=Object.freeze({__proto__:null,updateProps:au,initProps:su,removeElement:cu,removeElementWithFadeOut:hu,isElementRemoved:lu,extendShape:mu,extendPath:vu,registerShape:yu,getShapeClass:bu,makePath:xu,makeImage:_u,mergePath:Su,resizePath:Cu,subPixelOptimizeLine:ku,subPixelOptimizeRect:function(t){return Is(t.shape,t.shape,t.style),t},subPixelOptimize:Au,getTransform:Mu,applyTransform:Tu,transformDirection:Iu,groupTransition:Ou,clipPointsByRect:Du,clipRectByRect:Lu,createIcon:Pu,linePolygonIntersect:Nu,lineLineIntersect:Ru,setTooltipConfig:zu,traverseElements:Vu,Group:Dr,Image:As,Text:Rs,Circle:pc,Ellipse:gc,Sector:Ic,Ring:Oc,Polygon:Pc,Polyline:Rc,Rect:Ls,Line:Fc,BezierCurve:jc,Arc:Xc,IncrementalDisplayable:nu,CompoundPath:Gc,LinearGradient:Uc,RadialGradient:$c,BoundingRect:Re,OrientedBoundingRect:tu,Point:Me,Path:_s}),Wu={};function ju(t,e){for(var n=0;n<el.length;n++){var i=el[n],r=e[i],o=t.ensureState(i);o.style=o.style||{},o.style.text=r}var a=t.currentStates.slice();t.clearStates(!0),t.setStyle({text:e.normal}),t.useStates(a,!0)}function Yu(t,e,n){var i,r=t.labelFetcher,o=t.labelDataIndex,a=t.labelDimIndex,s=e.normal;r&&(i=r.getFormattedLabel(o,"normal",null,a,s&&s.get("formatter"),null!=n?{interpolatedValue:n}:null)),null==i&&(i=X(t.defaultText)?t.defaultText(o,t,n):t.defaultText);for(var l={normal:i},c=0;c<el.length;c++){var u=el[c],h=e[u];l[u]=rt(r?r.getFormattedLabel(o,u,null,a,h&&h.get("formatter")):null,i)}return l}function Xu(t,e,n,i){n=n||Wu;for(var r=t instanceof Rs,o=!1,a=0;a<nl.length;a++)if((d=e[nl[a]])&&d.getShallow("show")){o=!0;break}var s=r?t:t.getTextContent();if(o){r||(s||(s=new Rs,t.setTextContent(s)),t.stateProxy&&(s.stateProxy=t.stateProxy));var l=Yu(n,e),c=e.normal,u=!!c.getShallow("show"),h=qu(c,i&&i.normal,n,!1,!r);for(h.text=l.normal,r||t.setTextConfig(Uu(c,n,!1)),a=0;a<el.length;a++){var d,p=el[a];if(d=e[p]){var f=s.ensureState(p),g=!!rt(d.getShallow("show"),u);g!==u&&(f.ignore=!g),f.style=qu(d,i&&i[p],n,!0,!r),f.style.text=l[p],r||(t.ensureState(p).textConfig=Uu(d,n,!0))}}s.silent=!!c.getShallow("silent"),null!=s.style.x&&(h.x=s.style.x),null!=s.style.y&&(h.y=s.style.y),s.ignore=!u,s.useStyle(h),s.dirty(),n.enableTextSetter&&(th(s).setLabelText=function(t){var i=Yu(n,e,t);ju(s,i)})}else s&&(s.ignore=!0);t.dirty()}function Gu(t,e){e=e||"label";for(var n={normal:t.getModel(e)},i=0;i<el.length;i++){var r=el[i];n[r]=t.getModel([r,e])}return n}function qu(t,e,n,i,r){var o={};return function(t,e,n,i,r){n=n||Wu;var o,a=e.ecModel,s=a&&a.option.textStyle,l=function(t){for(var e;t&&t!==t.ecModel;){var n=(t.option||Wu).rich;if(n){e=e||{};for(var i=H(n),r=0;r<i.length;r++)e[i[r]]=1}t=t.parentModel}return e}(e);if(l)for(var c in o={},l)if(l.hasOwnProperty(c)){var u=e.getModel(["rich",c]);Qu(o[c]={},u,s,n,i,r,!1,!0)}o&&(t.rich=o);var h=e.get("overflow");h&&(t.overflow=h);var d=e.get("minMargin");null!=d&&(t.margin=d),Qu(t,e,s,n,i,r,!0,!1)}(o,t,n,i,r),e&&I(o,e),o}function Uu(t,e,n){e=e||{};var i,r={},o=t.getShallow("rotate"),a=rt(t.getShallow("distance"),n?null:5),s=t.getShallow("offset");return"outside"===(i=t.getShallow("position")||(n?null:"inside"))&&(i=e.defaultOutsidePosition||"top"),null!=i&&(r.position=i),null!=s&&(r.offset=s),null!=o&&(o*=Math.PI/180,r.rotation=o),null!=a&&(r.distance=a),r.outsideFill="inherit"===t.get("color")?e.inheritColor||null:"auto",r}var $u=["fontStyle","fontWeight","fontSize","fontFamily","textShadowColor","textShadowBlur","textShadowOffsetX","textShadowOffsetY"],Zu=["align","lineHeight","width","height","tag","verticalAlign","ellipsis"],Ku=["padding","borderWidth","borderRadius","borderDashOffset","backgroundColor","borderColor","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"];function Qu(t,e,n,i,r,o,a,s){n=!r&&n||Wu;var l=i&&i.inheritColor,c=e.getShallow("color"),u=e.getShallow("textBorderColor"),h=rt(e.getShallow("opacity"),n.opacity);"inherit"!==c&&"auto"!==c||(c=l||null),"inherit"!==u&&"auto"!==u||(u=l||null),o||(c=c||n.color,u=u||n.textBorderColor),null!=c&&(t.fill=c),null!=u&&(t.stroke=u);var d=rt(e.getShallow("textBorderWidth"),n.textBorderWidth);null!=d&&(t.lineWidth=d);var p=rt(e.getShallow("textBorderType"),n.textBorderType);null!=p&&(t.lineDash=p);var f=rt(e.getShallow("textBorderDashOffset"),n.textBorderDashOffset);null!=f&&(t.lineDashOffset=f),r||null!=h||s||(h=i&&i.defaultOpacity),null!=h&&(t.opacity=h),r||o||null==t.fill&&i.inheritColor&&(t.fill=i.inheritColor);for(var g=0;g<$u.length;g++){var m=$u[g];null!=(y=rt(e.getShallow(m),n[m]))&&(t[m]=y)}for(g=0;g<Zu.length;g++)m=Zu[g],null!=(y=e.getShallow(m))&&(t[m]=y);if(null==t.verticalAlign){var v=e.getShallow("baseline");null!=v&&(t.verticalAlign=v)}if(!a||!i.disableBox){for(g=0;g<Ku.length;g++){var y;m=Ku[g],null!=(y=e.getShallow(m))&&(t[m]=y)}var b=e.getShallow("borderType");null!=b&&(t.borderDash=b),"auto"!==t.backgroundColor&&"inherit"!==t.backgroundColor||!l||(t.backgroundColor=l),"auto"!==t.borderColor&&"inherit"!==t.borderColor||!l||(t.borderColor=l)}}function Ju(t,e){var n=e&&e.getModel("textStyle");return ct([t.fontStyle||n&&n.getShallow("fontStyle")||"",t.fontWeight||n&&n.getShallow("fontWeight")||"",(t.fontSize||n&&n.getShallow("fontSize")||12)+"px",t.fontFamily||n&&n.getShallow("fontFamily")||"sans-serif"].join(" "))}var th=Io();function eh(t,e,n,i){if(t){var r=th(t);r.prevValue=r.value,r.value=n;var o=e.normal;r.valueAnimation=o.get("valueAnimation"),r.valueAnimation&&(r.precision=o.get("precision"),r.defaultInterpolatedText=i,r.statesModels=e)}}function nh(t,e,n,i,r){var o=th(t);if(o.valueAnimation&&o.prevValue!==o.value){var a=o.defaultInterpolatedText,s=rt(o.interpolatedValue,o.prevValue),l=o.value;t.percent=0,(null==o.prevValue?su:au)(t,{percent:1},i,e,null,(function(i){var c=zo(n,o.precision,s,l,i);o.interpolatedValue=1===i?null:c;var u=Yu({labelDataIndex:e,labelFetcher:r,defaultText:a?a(c):c+""},o.statesModels,c);ju(t,u)}))}}var ih,rh,oh=["textStyle","color"],ah=["fontStyle","fontWeight","fontSize","fontFamily","padding","lineHeight","rich","width","height","overflow"],sh=new Rs,lh=function(){function t(){}return t.prototype.getTextColor=function(t){var e=this.ecModel;return this.getShallow("color")||(!t&&e?e.get(oh):null)},t.prototype.getFont=function(){return Ju({fontStyle:this.getShallow("fontStyle"),fontWeight:this.getShallow("fontWeight"),fontSize:this.getShallow("fontSize"),fontFamily:this.getShallow("fontFamily")},this.ecModel)},t.prototype.getTextRect=function(t){for(var e={text:t,verticalAlign:this.getShallow("verticalAlign")||this.getShallow("baseline")},n=0;n<ah.length;n++)e[ah[n]]=this.getShallow(ah[n]);return sh.useStyle(e),sh.update(),sh.getBoundingRect()},t}(),ch=[["lineWidth","width"],["stroke","color"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","type"],["lineDashOffset","dashOffset"],["lineCap","cap"],["lineJoin","join"],["miterLimit"]],uh=Uo(ch),hh=function(){function t(){}return t.prototype.getLineStyle=function(t){return uh(this,t)},t}(),dh=[["fill","color"],["stroke","borderColor"],["lineWidth","borderWidth"],["opacity"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"],["lineDash","borderType"],["lineDashOffset","borderDashOffset"],["lineCap","borderCap"],["lineJoin","borderJoin"],["miterLimit","borderMiterLimit"]],ph=Uo(dh),fh=function(){function t(){}return t.prototype.getItemStyle=function(t,e){return ph(this,t,e)},t}(),gh=function(){function t(t,e,n){this.parentModel=e,this.ecModel=n,this.option=t}return t.prototype.init=function(t,e,n){for(var i=[],r=3;r<arguments.length;r++)i[r-3]=arguments[r]},t.prototype.mergeOption=function(t,e){M(this.option,t,!0)},t.prototype.get=function(t,e){return null==t?this.option:this._doGet(this.parsePath(t),!e&&this.parentModel)},t.prototype.getShallow=function(t,e){var n=this.option,i=null==n?n:n[t];if(null==i&&!e){var r=this.parentModel;r&&(i=r.getShallow(t))}return i},t.prototype.getModel=function(e,n){var i=null!=e,r=i?this.parsePath(e):null;return new t(i?this._doGet(r):this.option,n=n||this.parentModel&&this.parentModel.getModel(this.resolveParentPath(r)),this.ecModel)},t.prototype.isEmpty=function(){return null==this.option},t.prototype.restoreData=function(){},t.prototype.clone=function(){return new(0,this.constructor)(A(this.option))},t.prototype.parsePath=function(t){return"string"==typeof t?t.split("."):t},t.prototype.resolveParentPath=function(t){return t},t.prototype.isAnimationEnabled=function(){if(!r.node&&this.option){if(null!=this.option.animation)return!!this.option.animation;if(this.parentModel)return this.parentModel.isAnimationEnabled()}},t.prototype._doGet=function(t,e){var n=this.option;if(!t)return n;for(var i=0;i<t.length&&(!t[i]||null!=(n=n&&"object"==typeof n?n[t[i]]:null));i++);return null==n&&e&&(n=e._doGet(this.resolveParentPath(t),e.parentModel)),n},t}();Wo(gh),ih=gh,rh=["__\0is_clz",Yo++].join("_"),ih.prototype[rh]=!0,ih.isInstance=function(t){return!(!t||!t[rh])},P(gh,hh),P(gh,fh),P(gh,Zo),P(gh,lh);var mh=Math.round(10*Math.random());function vh(t){return[t||"",mh++].join("_")}function yh(t,e){return M(M({},t,!0),e,!0)}var bh="ZH",xh="EN",_h=xh,wh={},Sh={},Ch=r.domSupported&&(document.documentElement.lang||navigator.language||navigator.browserLanguage||_h).toUpperCase().indexOf(bh)>-1?bh:_h;function kh(t,e){t=t.toUpperCase(),Sh[t]=new gh(e),wh[t]=e}function Ah(t){return Sh[t]}kh(xh,{time:{month:["January","February","March","April","May","June","July","August","September","October","November","December"],monthAbbr:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayOfWeek:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayOfWeekAbbr:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},legend:{selector:{all:"All",inverse:"Inv"}},toolbox:{brush:{title:{rect:"Box Select",polygon:"Lasso Select",lineX:"Horizontally Select",lineY:"Vertically Select",keep:"Keep Selections",clear:"Clear Selections"}},dataView:{title:"Data View",lang:["Data View","Close","Refresh"]},dataZoom:{title:{zoom:"Zoom",back:"Zoom Reset"}},magicType:{title:{line:"Switch to Line Chart",bar:"Switch to Bar Chart",stack:"Stack",tiled:"Tile"}},restore:{title:"Restore"},saveAsImage:{title:"Save as Image",lang:["Right Click to Save Image"]}},series:{typeNames:{pie:"Pie chart",bar:"Bar chart",line:"Line chart",scatter:"Scatter plot",effectScatter:"Ripple scatter plot",radar:"Radar chart",tree:"Tree",treemap:"Treemap",boxplot:"Boxplot",candlestick:"Candlestick",k:"K line chart",heatmap:"Heat map",map:"Map",parallel:"Parallel coordinate map",lines:"Line graph",graph:"Relationship graph",sankey:"Sankey diagram",funnel:"Funnel chart",gauge:"Gauge",pictorialBar:"Pictorial bar",themeRiver:"Theme River Map",sunburst:"Sunburst",custom:"Custom chart",chart:"Chart"}},aria:{general:{withTitle:'This is a chart about "{title}"',withoutTitle:"This is a chart"},series:{single:{prefix:"",withName:" with type {seriesType} named {seriesName}.",withoutName:" with type {seriesType}."},multiple:{prefix:". It consists of {seriesCount} series count.",withName:" The {seriesId} series is a {seriesType} representing {seriesName}.",withoutName:" The {seriesId} series is a {seriesType}.",separator:{middle:"",end:""}}},data:{allData:"The data is as follows: ",partialData:"The first {displayCnt} items are: ",withName:"the data for {name} is {value}",withoutName:"{value}",separator:{middle:", ",end:". "}}}}),kh(bh,{time:{month:["","","","","","","","","","","",""],monthAbbr:["1","2","3","4","5","6","7","8","9","10","11","12"],dayOfWeek:["","","","","","",""],dayOfWeekAbbr:["","","","","","",""]},legend:{selector:{all:"",inverse:""}},toolbox:{brush:{title:{rect:"",polygon:"",lineX:"",lineY:"",keep:"",clear:""}},dataView:{title:"",lang:["","",""]},dataZoom:{title:{zoom:"",back:""}},magicType:{title:{line:"",bar:"",stack:"",tiled:""}},restore:{title:""},saveAsImage:{title:"",lang:[""]}},series:{typeNames:{pie:"",bar:"",line:"",scatter:"",effectScatter:"",radar:"",tree:"",treemap:"",boxplot:"",candlestick:"K",k:"K",heatmap:"",map:"",parallel:"",lines:"",graph:"",sankey:"",funnel:"",gauge:"",pictorialBar:"",themeRiver:"",sunburst:"",custom:"",chart:""}},aria:{general:{withTitle:"{title}",withoutTitle:""},series:{single:{prefix:"",withName:"{seriesType}{seriesName}",withoutName:"{seriesType}"},multiple:{prefix:"{seriesCount}",withName:"{seriesId}{seriesName}{seriesType}",withoutName:"{seriesId}{seriesType}",separator:{middle:"",end:""}}},data:{allData:"",partialData:"{displayCnt}",withName:"{name}{value}",withoutName:"{value}",separator:{middle:"",end:""}}}});var Mh=36e5,Th=864e5,Ih=31536e6,Eh={year:"{yyyy}",month:"{MMM}",day:"{d}",hour:"{HH}:{mm}",minute:"{HH}:{mm}",second:"{HH}:{mm}:{ss}",millisecond:"{HH}:{mm}:{ss} {SSS}",none:"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss} {SSS}"},Oh="{yyyy}-{MM}-{dd}",Dh={year:"{yyyy}",month:"{yyyy}-{MM}",day:Oh,hour:Oh+" "+Eh.hour,minute:Oh+" "+Eh.minute,second:Oh+" "+Eh.second,millisecond:Eh.none},Lh=["year","month","day","hour","minute","second","millisecond"],Ph=["year","half-year","quarter","month","week","half-week","day","half-day","quarter-day","hour","minute","second","millisecond"];function Nh(t,e){return"0000".substr(0,e-(t+="").length)+t}function Rh(t){switch(t){case"half-year":case"quarter":return"month";case"week":case"half-week":return"day";case"half-day":case"quarter-day":return"hour";default:return t}}function Bh(t){return t===Rh(t)}function zh(t,e,n,i){var r=eo(t),o=r[Hh(n)](),a=r[Wh(n)]()+1,s=Math.floor((a-1)/3)+1,l=r[jh(n)](),c=r["get"+(n?"UTC":"")+"Day"](),u=r[Yh(n)](),h=(u-1)%12+1,d=r[Xh(n)](),p=r[Gh(n)](),f=r[qh(n)](),g=(i instanceof gh?i:Ah(i||Ch)||Sh.EN).getModel("time"),m=g.get("month"),v=g.get("monthAbbr"),y=g.get("dayOfWeek"),b=g.get("dayOfWeekAbbr");return(e||"").replace(/{yyyy}/g,o+"").replace(/{yy}/g,Nh(o%100+"",2)).replace(/{Q}/g,s+"").replace(/{MMMM}/g,m[a-1]).replace(/{MMM}/g,v[a-1]).replace(/{MM}/g,Nh(a,2)).replace(/{M}/g,a+"").replace(/{dd}/g,Nh(l,2)).replace(/{d}/g,l+"").replace(/{eeee}/g,y[c]).replace(/{ee}/g,b[c]).replace(/{e}/g,c+"").replace(/{HH}/g,Nh(u,2)).replace(/{H}/g,u+"").replace(/{hh}/g,Nh(h+"",2)).replace(/{h}/g,h+"").replace(/{mm}/g,Nh(d,2)).replace(/{m}/g,d+"").replace(/{ss}/g,Nh(p,2)).replace(/{s}/g,p+"").replace(/{SSS}/g,Nh(f,3)).replace(/{S}/g,f+"")}function Fh(t,e){var n=eo(t),i=n[Wh(e)]()+1,r=n[jh(e)](),o=n[Yh(e)](),a=n[Xh(e)](),s=n[Gh(e)](),l=0===n[qh(e)](),c=l&&0===s,u=c&&0===a,h=u&&0===o,d=h&&1===r;return d&&1===i?"year":d?"month":h?"day":u?"hour":c?"minute":l?"second":"millisecond"}function Vh(t,e,n){var i=U(t)?eo(t):t;switch(e=e||Fh(t,n)){case"year":return i[Hh(n)]();case"half-year":return i[Wh(n)]()>=6?1:0;case"quarter":return Math.floor((i[Wh(n)]()+1)/4);case"month":return i[Wh(n)]();case"day":return i[jh(n)]();case"half-day":return i[Yh(n)]()/24;case"hour":return i[Yh(n)]();case"minute":return i[Xh(n)]();case"second":return i[Gh(n)]();case"millisecond":return i[qh(n)]()}}function Hh(t){return t?"getUTCFullYear":"getFullYear"}function Wh(t){return t?"getUTCMonth":"getMonth"}function jh(t){return t?"getUTCDate":"getDate"}function Yh(t){return t?"getUTCHours":"getHours"}function Xh(t){return t?"getUTCMinutes":"getMinutes"}function Gh(t){return t?"getUTCSeconds":"getSeconds"}function qh(t){return t?"getUTCMilliseconds":"getMilliseconds"}function Uh(t){return t?"setUTCFullYear":"setFullYear"}function $h(t){return t?"setUTCMonth":"setMonth"}function Zh(t){return t?"setUTCDate":"setDate"}function Kh(t){return t?"setUTCHours":"setHours"}function Qh(t){return t?"setUTCMinutes":"setMinutes"}function Jh(t){return t?"setUTCSeconds":"setSeconds"}function td(t){return t?"setUTCMilliseconds":"setMilliseconds"}function ed(t){if(!lo(t))return G(t)?t:"-";var e=(t+"").split(".");return e[0].replace(/(\d{1,3})(?=(?:\d{3})+(?!\d))/g,"$1,")+(e.length>1?"."+e[1]:"")}function nd(t,e){return t=(t||"").toLowerCase().replace(/-(.)/g,(function(t,e){return e.toUpperCase()})),e&&t&&(t=t.charAt(0).toUpperCase()+t.slice(1)),t}var id=st;function rd(t,e,n){function i(t){return t&&ct(t)?t:"-"}function r(t){return!(null==t||isNaN(t)||!isFinite(t))}var o="time"===e,a=t instanceof Date;if(o||a){var s=o?eo(t):t;if(!isNaN(+s))return zh(s,"{yyyy}-{MM}-{dd} {HH}:{mm}:{ss}",n);if(a)return"-"}if("ordinal"===e)return q(t)?i(t):U(t)&&r(t)?t+"":"-";var l=so(t);return r(l)?ed(l):q(t)?i(t):"boolean"==typeof t?t+"":"-"}var od=["a","b","c","d","e","f","g"],ad=function(t,e){return"{"+t+(null==e?"":e)+"}"};function sd(t,e,n){Y(e)||(e=[e]);var i=e.length;if(!i)return"";for(var r=e[0].$vars||[],o=0;o<r.length;o++){var a=od[o];t=t.replace(ad(a),ad(a,0))}for(var s=0;s<i;s++)for(var l=0;l<r.length;l++){var c=e[s][r[l]];t=t.replace(ad(od[l],s),n?re(c):c)}return t}function ld(t,e){var n=G(t)?{color:t,extraCssText:e}:t||{},i=n.color,r=n.type;e=n.extraCssText;var o=n.renderMode||"html";return i?"html"===o?"subItem"===r?'<span style="display:inline-block;vertical-align:middle;margin-right:8px;margin-left:3px;border-radius:4px;width:4px;height:4px;background-color:'+re(i)+";"+(e||"")+'"></span>':'<span style="display:inline-block;margin-right:4px;border-radius:10px;width:10px;height:10px;background-color:'+re(i)+";"+(e||"")+'"></span>':{renderMode:o,content:"{"+(n.markerId||"markerX")+"|}  ",style:"subItem"===r?{width:4,height:4,borderRadius:2,backgroundColor:i}:{width:10,height:10,borderRadius:5,backgroundColor:i}}:""}function cd(t,e){return e=e||"transparent",G(t)?t:$(t)&&t.colorStops&&(t.colorStops[0]||{}).color||e}function ud(t,e){if("_blank"===e||"blank"===e){var n=window.open();n.opener=null,n.location.href=t}else window.open(t,e)}var hd=R,dd=["left","right","top","bottom","width","height"],pd=[["width","left","right"],["height","top","bottom"]];function fd(t,e,n,i,r){var o=0,a=0;null==i&&(i=1/0),null==r&&(r=1/0);var s=0;e.eachChild((function(l,c){var u,h,d=l.getBoundingRect(),p=e.childAt(c+1),f=p&&p.getBoundingRect();if("horizontal"===t){var g=d.width+(f?-f.x+d.x:0);(u=o+g)>i||l.newline?(o=0,u=g,a+=s+n,s=d.height):s=Math.max(s,d.height)}else{var m=d.height+(f?-f.y+d.y:0);(h=a+m)>r||l.newline?(o+=s+n,a=0,h=m,s=d.width):s=Math.max(s,d.width)}l.newline||(l.x=o,l.y=a,l.markRedraw(),"horizontal"===t?o=u+n:a=h+n)}))}var gd=fd;function md(t,e,n){n=id(n||0);var i=e.width,r=e.height,o=jr(t.left,i),a=jr(t.top,r),s=jr(t.right,i),l=jr(t.bottom,r),c=jr(t.width,i),u=jr(t.height,r),h=n[2]+n[0],d=n[1]+n[3],p=t.aspect;switch(isNaN(c)&&(c=i-s-d-o),isNaN(u)&&(u=r-l-h-a),null!=p&&(isNaN(c)&&isNaN(u)&&(p>i/r?c=.8*i:u=.8*r),isNaN(c)&&(c=p*u),isNaN(u)&&(u=c/p)),isNaN(o)&&(o=i-s-c-d),isNaN(a)&&(a=r-l-u-h),t.left||t.right){case"center":o=i/2-c/2-n[3];break;case"right":o=i-c-d}switch(t.top||t.bottom){case"middle":case"center":a=r/2-u/2-n[0];break;case"bottom":a=r-u-h}o=o||0,a=a||0,isNaN(c)&&(c=i-d-o-(s||0)),isNaN(u)&&(u=r-h-a-(l||0));var f=new Re(o+n[3],a+n[0],c,u);return f.margin=n,f}function vd(t,e,n,i,r,o){var a,s=!r||!r.hv||r.hv[0],l=!r||!r.hv||r.hv[1],c=r&&r.boundingMode||"all";if((o=o||t).x=t.x,o.y=t.y,!s&&!l)return!1;if("raw"===c)a="group"===t.type?new Re(0,0,+e.width||0,+e.height||0):t.getBoundingRect();else if(a=t.getBoundingRect(),t.needLocalTransform()){var u=t.getLocalTransform();(a=a.clone()).applyTransform(u)}var h=md(E({width:a.width,height:a.height},e),n,i),d=s?h.x-a.x:0,p=l?h.y-a.y:0;return"raw"===c?(o.x=d,o.y=p):(o.x+=d,o.y+=p),o===t&&t.markRedraw(),!0}function yd(t){var e=t.layoutMode||t.constructor.layoutMode;return $(e)?e:e?{type:e}:null}function bd(t,e,n){var i=n&&n.ignoreSize;!Y(i)&&(i=[i,i]);var r=a(pd[0],0),o=a(pd[1],1);function a(n,r){var o={},a=0,c={},u=0;if(hd(n,(function(e){c[e]=t[e]})),hd(n,(function(t){s(e,t)&&(o[t]=c[t]=e[t]),l(o,t)&&a++,l(c,t)&&u++})),i[r])return l(e,n[1])?c[n[2]]=null:l(e,n[2])&&(c[n[1]]=null),c;if(2!==u&&a){if(a>=2)return o;for(var h=0;h<n.length;h++){var d=n[h];if(!s(o,d)&&s(t,d)){o[d]=t[d];break}}return o}return c}function s(t,e){return t.hasOwnProperty(e)}function l(t,e){return null!=t[e]&&"auto"!==t[e]}function c(t,e,n){hd(t,(function(t){e[t]=n[t]}))}c(pd[0],t,r),c(pd[1],t,o)}function xd(t){return _d({},t)}function _d(t,e){return e&&t&&hd(dd,(function(n){e.hasOwnProperty(n)&&(t[n]=e[n])})),t}j(fd,"vertical"),j(fd,"horizontal");var wd=Io(),Sd=function(t){function e(e,n,i){var r=t.call(this,e,n,i)||this;return r.uid=vh("ec_cpt_model"),r}return n(e,t),e.prototype.init=function(t,e,n){this.mergeDefaultAndTheme(t,n)},e.prototype.mergeDefaultAndTheme=function(t,e){var n=yd(this),i=n?xd(t):{};M(t,e.getTheme().get(this.mainType)),M(t,this.getDefaultOption()),n&&bd(t,i,n)},e.prototype.mergeOption=function(t,e){M(this.option,t,!0);var n=yd(this);n&&bd(this.option,t,n)},e.prototype.optionUpdated=function(t,e){},e.prototype.getDefaultOption=function(){var t=this.constructor;if(!function(t){return!(!t||!t[Vo])}(t))return t.defaultOption;var e=wd(this);if(!e.defaultOption){for(var n=[],i=t;i;){var r=i.prototype.defaultOption;r&&n.push(r),i=i.superClass}for(var o={},a=n.length-1;a>=0;a--)o=M(o,n[a],!0);e.defaultOption=o}return e.defaultOption},e.prototype.getReferringComponents=function(t,e){var n=t+"Index",i=t+"Id";return No(this.ecModel,t,{index:this.get(n,!0),id:this.get(i,!0)},e)},e.prototype.getBoxLayoutParams=function(){var t=this;return{left:t.get("left"),top:t.get("top"),right:t.get("right"),bottom:t.get("bottom"),width:t.get("width"),height:t.get("height")}},e.prototype.getZLevelKey=function(){return""},e.prototype.setZLevel=function(t){this.option.zlevel=t},e.protoInitialize=function(){var t=e.prototype;t.type="component",t.id="",t.name="",t.mainType="",t.subType="",t.componentIndex=0}(),e}(gh);jo(Sd,gh),qo(Sd),function(t){var e={};t.registerSubTypeDefaulter=function(t,n){var i=Ho(t);e[i.main]=n},t.determineSubType=function(n,i){var r=i.type;if(!r){var o=Ho(n).main;t.hasSubTypes(n)&&e[o]&&(r=e[o](i))}return r}}(Sd),function(t,e){function n(t,e){return t[e]||(t[e]={predecessor:[],successor:[]}),t[e]}t.topologicalTravel=function(t,e,i,r){if(t.length){var o=function(t){var e={},i=[];return R(t,(function(r){var o=n(e,r),a=function(t,e){var n=[];return R(t,(function(t){D(e,t)>=0&&n.push(t)})),n}(o.originalDeps=function(t){var e=[];return R(Sd.getClassesByMainType(t),(function(t){e=e.concat(t.dependencies||t.prototype.dependencies||[])})),e=B(e,(function(t){return Ho(t).main})),"dataset"!==t&&D(e,"dataset")<=0&&e.unshift("dataset"),e}(r),t);o.entryCount=a.length,0===o.entryCount&&i.push(r),R(a,(function(t){D(o.predecessor,t)<0&&o.predecessor.push(t);var i=n(e,t);D(i.successor,t)<0&&i.successor.push(r)}))})),{graph:e,noEntryList:i}}(e),a=o.graph,s=o.noEntryList,l={};for(R(t,(function(t){l[t]=!0}));s.length;){var c=s.pop(),u=a[c],h=!!l[c];h&&(i.call(r,c,u.originalDeps.slice()),delete l[c]),R(u.successor,h?p:d)}R(l,(function(){throw new Error("")}))}function d(t){a[t].entryCount--,0===a[t].entryCount&&s.push(t)}function p(t){l[t]=!0,d(t)}}}(Sd);var Cd="";"undefined"!=typeof navigator&&(Cd=navigator.platform||"");var kd="rgba(0, 0, 0, 0.2)",Ad={darkMode:"auto",colorBy:"series",color:["#5470c6","#91cc75","#fac858","#ee6666","#73c0de","#3ba272","#fc8452","#9a60b4","#ea7ccc"],gradientColor:["#f6efa6","#d88273","#bf444c"],aria:{decal:{decals:[{color:kd,dashArrayX:[1,0],dashArrayY:[2,5],symbolSize:1,rotation:Math.PI/6},{color:kd,symbol:"circle",dashArrayX:[[8,8],[0,8,8,0]],dashArrayY:[6,0],symbolSize:.8},{color:kd,dashArrayX:[1,0],dashArrayY:[4,3],rotation:-Math.PI/4},{color:kd,dashArrayX:[[6,6],[0,6,6,0]],dashArrayY:[6,0]},{color:kd,dashArrayX:[[1,0],[1,6]],dashArrayY:[1,0,6,0],rotation:Math.PI/4},{color:kd,symbol:"triangle",dashArrayX:[[9,9],[0,9,9,0]],dashArrayY:[7,2],symbolSize:.75}]}},textStyle:{fontFamily:Cd.match(/^Win/)?"Microsoft YaHei":"sans-serif",fontSize:12,fontStyle:"normal",fontWeight:"normal"},blendMode:null,stateAnimation:{duration:300,easing:"cubicOut"},animation:"auto",animationDuration:1e3,animationDurationUpdate:500,animationEasing:"cubicInOut",animationEasingUpdate:"cubicInOut",animationThreshold:2e3,progressiveThreshold:3e3,progressive:400,hoverLayerThreshold:3e3,useUTC:!1},Md=mt(["tooltip","label","itemName","itemId","itemGroupId","itemChildGroupId","seriesName"]),Td="original",Id="arrayRows",Ed="objectRows",Od="keyedColumns",Dd="typedArray",Ld="unknown",Pd="column",Nd="row",Rd=Io();function Bd(t,e,n){var i={},r=Fd(e);if(!r||!t)return i;var o,a,s=[],l=[],c=e.ecModel,u=Rd(c).datasetMap,h=r.uid+"_"+n.seriesLayoutBy;R(t=t.slice(),(function(e,n){var r=$(e)?e:t[n]={name:e};"ordinal"===r.type&&null==o&&(o=n,a=f(r)),i[r.name]=[]}));var d=u.get(h)||u.set(h,{categoryWayDim:a,valueWayDim:0});function p(t,e,n){for(var i=0;i<n;i++)t.push(e+i)}function f(t){var e=t.dimsDef;return e?e.length:1}return R(t,(function(t,e){var n=t.name,r=f(t);if(null==o){var a=d.valueWayDim;p(i[n],a,r),p(l,a,r),d.valueWayDim+=r}else o===e?(p(i[n],0,r),p(s,0,r)):(a=d.categoryWayDim,p(i[n],a,r),p(l,a,r),d.categoryWayDim+=r)})),s.length&&(i.itemName=s),l.length&&(i.seriesName=l),i}function zd(t,e,n){var i={};if(!Fd(t))return i;var r,o=e.sourceFormat,a=e.dimensionsDefine;o!==Ed&&o!==Od||R(a,(function(t,e){"name"===($(t)?t.name:t)&&(r=e)}));var s=function(){for(var t={},i={},s=[],l=0,c=Math.min(5,n);l<c;l++){var u=Hd(e.data,o,e.seriesLayoutBy,a,e.startIndex,l);s.push(u);var h=3===u;if(h&&null==t.v&&l!==r&&(t.v=l),(null==t.n||t.n===t.v||!h&&3===s[t.n])&&(t.n=l),d(t)&&3!==s[t.n])return t;h||(2===u&&null==i.v&&l!==r&&(i.v=l),null!=i.n&&i.n!==i.v||(i.n=l))}function d(t){return null!=t.v&&null!=t.n}return d(t)?t:d(i)?i:null}();if(s){i.value=[s.v];var l=null!=r?r:s.n;i.itemName=[l],i.seriesName=[l]}return i}function Fd(t){if(!t.get("data",!0))return No(t.ecModel,"dataset",{index:t.get("datasetIndex",!0),id:t.get("datasetId",!0)},Lo).models[0]}function Vd(t,e){return Hd(t.data,t.sourceFormat,t.seriesLayoutBy,t.dimensionsDefine,t.startIndex,e)}function Hd(t,e,n,i,r,o){var a,s,l;if(K(t))return 3;if(i){var c=i[o];$(c)?(s=c.name,l=c.type):G(c)&&(s=c)}if(null!=l)return"ordinal"===l?1:3;if(e===Id){var u=t;if(n===Nd){for(var h=u[o],d=0;d<(h||[]).length&&d<5;d++)if(null!=(a=y(h[r+d])))return a}else for(d=0;d<u.length&&d<5;d++){var p=u[r+d];if(p&&null!=(a=y(p[o])))return a}}else if(e===Ed){var f=t;if(!s)return 3;for(d=0;d<f.length&&d<5;d++)if((m=f[d])&&null!=(a=y(m[s])))return a}else if(e===Od){if(!s)return 3;if(!(h=t[s])||K(h))return 3;for(d=0;d<h.length&&d<5;d++)if(null!=(a=y(h[d])))return a}else if(e===Td){var g=t;for(d=0;d<g.length&&d<5;d++){var m,v=xo(m=g[d]);if(!Y(v))return 3;if(null!=(a=y(v[o])))return a}}function y(t){var e=G(t);return null!=t&&isFinite(t)&&""!==t?e?2:3:e&&"-"!==t?1:void 0}return 3}var Wd,jd,Yd,Xd=mt(),Gd=Io(),qd=Io(),Ud=function(){function t(){}return t.prototype.getColorFromPalette=function(t,e,n){var i=vo(this.get("color",!0)),r=this.get("colorLayer",!0);return Zd(this,Gd,i,r,t,e,n)},t.prototype.clearColorPalette=function(){!function(t,e){e(t).paletteIdx=0,e(t).paletteNameMap={}}(this,Gd)},t}();function $d(t,e,n,i){var r=vo(t.get(["aria","decal","decals"]));return Zd(t,qd,r,null,e,n,i)}function Zd(t,e,n,i,r,o,a){var s=e(o=o||t),l=s.paletteIdx||0,c=s.paletteNameMap=s.paletteNameMap||{};if(c.hasOwnProperty(r))return c[r];var u=null!=a&&i?function(t,e){for(var n=t.length,i=0;i<n;i++)if(t[i].length>e)return t[i];return t[n-1]}(i,a):n;if((u=u||n)&&u.length){var h=u[l];return r&&(c[r]=h),s.paletteIdx=(l+1)%u.length,h}}var Kd="\0_ec_inner",Qd=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.init=function(t,e,n,i,r,o){i=i||{},this.option=null,this._theme=new gh(i),this._locale=new gh(r),this._optionManager=o},e.prototype.setOption=function(t,e,n){var i=ep(e);this._optionManager.setOption(t,n,i),this._resetOption(null,i)},e.prototype.resetOption=function(t,e){return this._resetOption(t,ep(e))},e.prototype._resetOption=function(t,e){var n=!1,i=this._optionManager;if(!t||"recreate"===t){var r=i.mountOption("recreate"===t);this.option&&"recreate"!==t?(this.restoreData(),this._mergeOption(r,e)):Yd(this,r),n=!0}if("timeline"!==t&&"media"!==t||this.restoreData(),!t||"recreate"===t||"timeline"===t){var o=i.getTimelineOption(this);o&&(n=!0,this._mergeOption(o,e))}if(!t||"recreate"===t||"media"===t){var a=i.getMediaOption(this);a.length&&R(a,(function(t){n=!0,this._mergeOption(t,e)}),this)}return n},e.prototype.mergeOption=function(t){this._mergeOption(t,null)},e.prototype._mergeOption=function(t,e){var n=this.option,i=this._componentsMap,r=this._componentsCount,o=[],a=mt(),s=e&&e.replaceMergeMainTypeMap;Rd(this).datasetMap=mt(),R(t,(function(t,e){null!=t&&(Sd.hasClass(e)?e&&(o.push(e),a.set(e,!0)):n[e]=null==n[e]?A(t):M(n[e],t,!0))})),s&&s.each((function(t,e){Sd.hasClass(e)&&!a.get(e)&&(o.push(e),a.set(e,!0))})),Sd.topologicalTravel(o,Sd.getAllClassMainTypes(),(function(e){var o=function(t,e,n){var i=Xd.get(e);if(!i)return n;var r=i(t);return r?n.concat(r):n}(this,e,vo(t[e])),a=i.get(e),l=wo(a,o,a?s&&s.get(e)?"replaceMerge":"normalMerge":"replaceAll");(function(t,e,n){R(t,(function(t){var i=t.newOption;$(i)&&(t.keyInfo.mainType=e,t.keyInfo.subType=function(t,e,n,i){return e.type?e.type:n?n.subType:i.determineSubType(t,e)}(e,i,t.existing,n))}))})(l,e,Sd),n[e]=null,i.set(e,null),r.set(e,0);var c,u=[],h=[],d=0;R(l,(function(t,n){var i=t.existing,r=t.newOption;if(r){var o="series"===e,a=Sd.getClass(e,t.keyInfo.subType,!o);if(!a)return;if("tooltip"===e){if(c)return;c=!0}if(i&&i.constructor===a)i.name=t.keyInfo.name,i.mergeOption(r,this),i.optionUpdated(r,!1);else{var s=I({componentIndex:n},t.keyInfo);I(i=new a(r,this,this,s),s),t.brandNew&&(i.__requireNewView=!0),i.init(r,this,this),i.optionUpdated(null,!0)}}else i&&(i.mergeOption({},this),i.optionUpdated({},!1));i?(u.push(i.option),h.push(i),d++):(u.push(void 0),h.push(void 0))}),this),n[e]=u,i.set(e,h),r.set(e,d),"series"===e&&Wd(this)}),this),this._seriesIndices||Wd(this)},e.prototype.getOption=function(){var t=A(this.option);return R(t,(function(e,n){if(Sd.hasClass(n)){for(var i=vo(e),r=i.length,o=!1,a=r-1;a>=0;a--)i[a]&&!Mo(i[a])?o=!0:(i[a]=null,!o&&r--);i.length=r,t[n]=i}})),delete t[Kd],t},e.prototype.getTheme=function(){return this._theme},e.prototype.getLocaleModel=function(){return this._locale},e.prototype.setUpdatePayload=function(t){this._payload=t},e.prototype.getUpdatePayload=function(){return this._payload},e.prototype.getComponent=function(t,e){var n=this._componentsMap.get(t);if(n){var i=n[e||0];if(i)return i;if(null==e)for(var r=0;r<n.length;r++)if(n[r])return n[r]}},e.prototype.queryComponents=function(t){var e=t.mainType;if(!e)return[];var n,i=t.index,r=t.id,o=t.name,a=this._componentsMap.get(e);return a&&a.length?(null!=i?(n=[],R(vo(i),(function(t){a[t]&&n.push(a[t])}))):n=null!=r?Jd("id",r,a):null!=o?Jd("name",o,a):F(a,(function(t){return!!t})),tp(n,t)):[]},e.prototype.findComponents=function(t){var e,n,i,r,o,a=t.query,s=t.mainType,l=(n=s+"Index",i=s+"Id",r=s+"Name",!(e=a)||null==e[n]&&null==e[i]&&null==e[r]?null:{mainType:s,index:e[n],id:e[i],name:e[r]}),c=l?this.queryComponents(l):F(this._componentsMap.get(s),(function(t){return!!t}));return o=tp(c,t),t.filter?F(o,t.filter):o},e.prototype.eachComponent=function(t,e,n){var i=this._componentsMap;if(X(t)){var r=e,o=t;i.each((function(t,e){for(var n=0;t&&n<t.length;n++){var i=t[n];i&&o.call(r,e,i,i.componentIndex)}}))}else for(var a=G(t)?i.get(t):$(t)?this.findComponents(t):null,s=0;a&&s<a.length;s++){var l=a[s];l&&e.call(n,l,l.componentIndex)}},e.prototype.getSeriesByName=function(t){var e=ko(t,null);return F(this._componentsMap.get("series"),(function(t){return!!t&&null!=e&&t.name===e}))},e.prototype.getSeriesByIndex=function(t){return this._componentsMap.get("series")[t]},e.prototype.getSeriesByType=function(t){return F(this._componentsMap.get("series"),(function(e){return!!e&&e.subType===t}))},e.prototype.getSeries=function(){return F(this._componentsMap.get("series"),(function(t){return!!t}))},e.prototype.getSeriesCount=function(){return this._componentsCount.get("series")},e.prototype.eachSeries=function(t,e){jd(this),R(this._seriesIndices,(function(n){var i=this._componentsMap.get("series")[n];t.call(e,i,n)}),this)},e.prototype.eachRawSeries=function(t,e){R(this._componentsMap.get("series"),(function(n){n&&t.call(e,n,n.componentIndex)}))},e.prototype.eachSeriesByType=function(t,e,n){jd(this),R(this._seriesIndices,(function(i){var r=this._componentsMap.get("series")[i];r.subType===t&&e.call(n,r,i)}),this)},e.prototype.eachRawSeriesByType=function(t,e,n){return R(this.getSeriesByType(t),e,n)},e.prototype.isSeriesFiltered=function(t){return jd(this),null==this._seriesIndicesMap.get(t.componentIndex)},e.prototype.getCurrentSeriesIndices=function(){return(this._seriesIndices||[]).slice()},e.prototype.filterSeries=function(t,e){jd(this);var n=[];R(this._seriesIndices,(function(i){var r=this._componentsMap.get("series")[i];t.call(e,r,i)&&n.push(i)}),this),this._seriesIndices=n,this._seriesIndicesMap=mt(n)},e.prototype.restoreData=function(t){Wd(this);var e=this._componentsMap,n=[];e.each((function(t,e){Sd.hasClass(e)&&n.push(e)})),Sd.topologicalTravel(n,Sd.getAllClassMainTypes(),(function(n){R(e.get(n),(function(e){!e||"series"===n&&function(t,e){if(e){var n=e.seriesIndex,i=e.seriesId,r=e.seriesName;return null!=n&&t.componentIndex!==n||null!=i&&t.id!==i||null!=r&&t.name!==r}}(e,t)||e.restoreData()}))}))},e.internalField=(Wd=function(t){var e=t._seriesIndices=[];R(t._componentsMap.get("series"),(function(t){t&&e.push(t.componentIndex)})),t._seriesIndicesMap=mt(e)},jd=function(t){},void(Yd=function(t,e){t.option={},t.option[Kd]=1,t._componentsMap=mt({series:[]}),t._componentsCount=mt();var n=e.aria;$(n)&&null==n.enabled&&(n.enabled=!0),function(t,e){var n=t.color&&!t.colorLayer;R(e,(function(e,i){"colorLayer"===i&&n||Sd.hasClass(i)||("object"==typeof e?t[i]=t[i]?M(t[i],e,!1):A(e):null==t[i]&&(t[i]=e))}))}(e,t._theme.option),M(e,Ad,!1),t._mergeOption(e,null)})),e}(gh);function Jd(t,e,n){if(Y(e)){var i=mt();return R(e,(function(t){null!=t&&null!=ko(t,null)&&i.set(t,!0)})),F(n,(function(e){return e&&i.get(e[t])}))}var r=ko(e,null);return F(n,(function(e){return e&&null!=r&&e[t]===r}))}function tp(t,e){return e.hasOwnProperty("subType")?F(t,(function(t){return t&&t.subType===e.subType})):t}function ep(t){var e=mt();return t&&R(vo(t.replaceMerge),(function(t){e.set(t,!0)})),{replaceMergeMainTypeMap:e}}P(Qd,Ud);var np=["getDom","getZr","getWidth","getHeight","getDevicePixelRatio","dispatchAction","isSSR","isDisposed","on","off","getDataURL","getConnectedDataURL","getOption","getId","updateLabelLayout"],ip=function(t){R(np,(function(e){this[e]=W(t[e],t)}),this)},rp={},op=function(){function t(){this._coordinateSystems=[]}return t.prototype.create=function(t,e){var n=[];R(rp,(function(i,r){var o=i.create(t,e);n=n.concat(o||[])})),this._coordinateSystems=n},t.prototype.update=function(t,e){R(this._coordinateSystems,(function(n){n.update&&n.update(t,e)}))},t.prototype.getCoordinateSystems=function(){return this._coordinateSystems.slice()},t.register=function(t,e){rp[t]=e},t.get=function(t){return rp[t]},t}(),ap=/^(min|max)?(.+)$/,sp=function(){function t(t){this._timelineOptions=[],this._mediaList=[],this._currentMediaIndices=[],this._api=t}return t.prototype.setOption=function(t,e,n){t&&(R(vo(t.series),(function(t){t&&t.data&&K(t.data)&&ht(t.data)})),R(vo(t.dataset),(function(t){t&&t.source&&K(t.source)&&ht(t.source)}))),t=A(t);var i=this._optionBackup,r=function(t,e,n){var i,r,o=[],a=t.baseOption,s=t.timeline,l=t.options,c=t.media,u=!!t.media,h=!!(l||s||a&&a.timeline);function d(t){R(e,(function(e){e(t,n)}))}return a?(r=a).timeline||(r.timeline=s):((h||u)&&(t.options=t.media=null),r=t),u&&Y(c)&&R(c,(function(t){t&&t.option&&(t.query?o.push(t):i||(i=t))})),d(r),R(l,(function(t){return d(t)})),R(o,(function(t){return d(t.option)})),{baseOption:r,timelineOptions:l||[],mediaDefault:i,mediaList:o}}(t,e,!i);this._newBaseOption=r.baseOption,i?(r.timelineOptions.length&&(i.timelineOptions=r.timelineOptions),r.mediaList.length&&(i.mediaList=r.mediaList),r.mediaDefault&&(i.mediaDefault=r.mediaDefault)):this._optionBackup=r},t.prototype.mountOption=function(t){var e=this._optionBackup;return this._timelineOptions=e.timelineOptions,this._mediaList=e.mediaList,this._mediaDefault=e.mediaDefault,this._currentMediaIndices=[],A(t?e.baseOption:this._newBaseOption)},t.prototype.getTimelineOption=function(t){var e,n=this._timelineOptions;if(n.length){var i=t.getComponent("timeline");i&&(e=A(n[i.getCurrentIndex()]))}return e},t.prototype.getMediaOption=function(t){var e,n,i=this._api.getWidth(),r=this._api.getHeight(),o=this._mediaList,a=this._mediaDefault,s=[],l=[];if(!o.length&&!a)return l;for(var c=0,u=o.length;c<u;c++)lp(o[c].query,i,r)&&s.push(c);return!s.length&&a&&(s=[-1]),s.length&&(e=s,n=this._currentMediaIndices,e.join(",")!==n.join(","))&&(l=B(s,(function(t){return A(-1===t?a.option:o[t].option)}))),this._currentMediaIndices=s,l},t}();function lp(t,e,n){var i={width:e,height:n,aspectratio:e/n},r=!0;return R(t,(function(t,e){var n=e.match(ap);if(n&&n[1]&&n[2]){var o=n[1],a=n[2].toLowerCase();(function(t,e,n){return"min"===n?t>=e:"max"===n?t<=e:t===e})(i[a],t,o)||(r=!1)}})),r}var cp=R,up=$,hp=["areaStyle","lineStyle","nodeStyle","linkStyle","chordStyle","label","labelLine"];function dp(t){var e=t&&t.itemStyle;if(e)for(var n=0,i=hp.length;n<i;n++){var r=hp[n],o=e.normal,a=e.emphasis;o&&o[r]&&(t[r]=t[r]||{},t[r].normal?M(t[r].normal,o[r]):t[r].normal=o[r],o[r]=null),a&&a[r]&&(t[r]=t[r]||{},t[r].emphasis?M(t[r].emphasis,a[r]):t[r].emphasis=a[r],a[r]=null)}}function pp(t,e,n){if(t&&t[e]&&(t[e].normal||t[e].emphasis)){var i=t[e].normal,r=t[e].emphasis;i&&(n?(t[e].normal=t[e].emphasis=null,E(t[e],i)):t[e]=i),r&&(t.emphasis=t.emphasis||{},t.emphasis[e]=r,r.focus&&(t.emphasis.focus=r.focus),r.blurScope&&(t.emphasis.blurScope=r.blurScope))}}function fp(t){pp(t,"itemStyle"),pp(t,"lineStyle"),pp(t,"areaStyle"),pp(t,"label"),pp(t,"labelLine"),pp(t,"upperLabel"),pp(t,"edgeLabel")}function gp(t,e){var n=up(t)&&t[e],i=up(n)&&n.textStyle;if(i)for(var r=0,o=bo.length;r<o;r++){var a=bo[r];i.hasOwnProperty(a)&&(n[a]=i[a])}}function mp(t){t&&(fp(t),gp(t,"label"),t.emphasis&&gp(t.emphasis,"label"))}function vp(t){return Y(t)?t:t?[t]:[]}function yp(t){return(Y(t)?t[0]:t)||{}}function bp(t){t&&R(xp,(function(e){e[0]in t&&!(e[1]in t)&&(t[e[1]]=t[e[0]])}))}var xp=[["x","left"],["y","top"],["x2","right"],["y2","bottom"]],_p=["grid","geo","parallel","legend","toolbox","title","visualMap","dataZoom","timeline"],wp=[["borderRadius","barBorderRadius"],["borderColor","barBorderColor"],["borderWidth","barBorderWidth"]];function Sp(t){var e=t&&t.itemStyle;if(e)for(var n=0;n<wp.length;n++){var i=wp[n][1],r=wp[n][0];null!=e[i]&&(e[r]=e[i])}}function Cp(t){t&&"edge"===t.alignTo&&null!=t.margin&&null==t.edgeDistance&&(t.edgeDistance=t.margin)}function kp(t){t&&t.downplay&&!t.blur&&(t.blur=t.downplay)}function Ap(t,e){if(t)for(var n=0;n<t.length;n++)e(t[n]),t[n]&&Ap(t[n].children,e)}function Mp(t,e){(function(t,e){cp(vp(t.series),(function(t){up(t)&&function(t){if(up(t)){dp(t),fp(t),gp(t,"label"),gp(t,"upperLabel"),gp(t,"edgeLabel"),t.emphasis&&(gp(t.emphasis,"label"),gp(t.emphasis,"upperLabel"),gp(t.emphasis,"edgeLabel"));var e=t.markPoint;e&&(dp(e),mp(e));var n=t.markLine;n&&(dp(n),mp(n));var i=t.markArea;i&&mp(i);var r=t.data;if("graph"===t.type){r=r||t.nodes;var o=t.links||t.edges;if(o&&!K(o))for(var a=0;a<o.length;a++)mp(o[a]);R(t.categories,(function(t){fp(t)}))}if(r&&!K(r))for(a=0;a<r.length;a++)mp(r[a]);if((e=t.markPoint)&&e.data){var s=e.data;for(a=0;a<s.length;a++)mp(s[a])}if((n=t.markLine)&&n.data){var l=n.data;for(a=0;a<l.length;a++)Y(l[a])?(mp(l[a][0]),mp(l[a][1])):mp(l[a])}"gauge"===t.type?(gp(t,"axisLabel"),gp(t,"title"),gp(t,"detail")):"treemap"===t.type?(pp(t.breadcrumb,"itemStyle"),R(t.levels,(function(t){fp(t)}))):"tree"===t.type&&fp(t.leaves)}}(t)}));var n=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","parallelAxis","radar"];e&&n.push("valueAxis","categoryAxis","logAxis","timeAxis"),cp(n,(function(e){cp(vp(t[e]),(function(t){t&&(gp(t,"axisLabel"),gp(t.axisPointer,"label"))}))})),cp(vp(t.parallel),(function(t){var e=t&&t.parallelAxisDefault;gp(e,"axisLabel"),gp(e&&e.axisPointer,"label")})),cp(vp(t.calendar),(function(t){pp(t,"itemStyle"),gp(t,"dayLabel"),gp(t,"monthLabel"),gp(t,"yearLabel")})),cp(vp(t.radar),(function(t){gp(t,"name"),t.name&&null==t.axisName&&(t.axisName=t.name,delete t.name),null!=t.nameGap&&null==t.axisNameGap&&(t.axisNameGap=t.nameGap,delete t.nameGap)})),cp(vp(t.geo),(function(t){up(t)&&(mp(t),cp(vp(t.regions),(function(t){mp(t)})))})),cp(vp(t.timeline),(function(t){mp(t),pp(t,"label"),pp(t,"itemStyle"),pp(t,"controlStyle",!0);var e=t.data;Y(e)&&R(e,(function(t){$(t)&&(pp(t,"label"),pp(t,"itemStyle"))}))})),cp(vp(t.toolbox),(function(t){pp(t,"iconStyle"),cp(t.feature,(function(t){pp(t,"iconStyle")}))})),gp(yp(t.axisPointer),"label"),gp(yp(t.tooltip).axisPointer,"label")})(t,e),t.series=vo(t.series),R(t.series,(function(t){if($(t)){var e=t.type;if("line"===e)null!=t.clipOverflow&&(t.clip=t.clipOverflow);else if("pie"===e||"gauge"===e){if(null!=t.clockWise&&(t.clockwise=t.clockWise),Cp(t.label),(r=t.data)&&!K(r))for(var n=0;n<r.length;n++)Cp(r[n]);null!=t.hoverOffset&&(t.emphasis=t.emphasis||{},(t.emphasis.scaleSize=null)&&(t.emphasis.scaleSize=t.hoverOffset))}else if("gauge"===e){var i=function(t,e){for(var n="pointer.color".split(","),i=t,r=0;r<n.length&&null!=(i=i&&i[n[r]]);r++);return i}(t);null!=i&&function(t,e,n,i){for(var r,o="itemStyle.color".split(","),a=t,s=0;s<o.length-1;s++)null==a[r=o[s]]&&(a[r]={}),a=a[r];null==a[o[s]]&&(a[o[s]]=n)}(t,0,i)}else if("bar"===e){var r;if(Sp(t),Sp(t.backgroundStyle),Sp(t.emphasis),(r=t.data)&&!K(r))for(n=0;n<r.length;n++)"object"==typeof r[n]&&(Sp(r[n]),Sp(r[n]&&r[n].emphasis))}else if("sunburst"===e){var o=t.highlightPolicy;o&&(t.emphasis=t.emphasis||{},t.emphasis.focus||(t.emphasis.focus=o)),kp(t),Ap(t.data,kp)}else"graph"===e||"sankey"===e?function(t){t&&null!=t.focusNodeAdjacency&&(t.emphasis=t.emphasis||{},null==t.emphasis.focus&&(t.emphasis.focus="adjacency"))}(t):"map"===e&&(t.mapType&&!t.map&&(t.map=t.mapType),t.mapLocation&&E(t,t.mapLocation));null!=t.hoverAnimation&&(t.emphasis=t.emphasis||{},t.emphasis&&null==t.emphasis.scale&&(t.emphasis.scale=t.hoverAnimation)),bp(t)}})),t.dataRange&&(t.visualMap=t.dataRange),R(_p,(function(e){var n=t[e];n&&(Y(n)||(n=[n]),R(n,(function(t){bp(t)})))}))}function Tp(t){R(t,(function(e,n){var i=[],r=[NaN,NaN],o=[e.stackResultDimension,e.stackedOverDimension],a=e.data,s=e.isStackedByIndex,l=e.seriesModel.get("stackStrategy")||"samesign";a.modify(o,(function(o,c,u){var h,d,p=a.get(e.stackedDimension,u);if(isNaN(p))return r;s?d=a.getRawIndex(u):h=a.get(e.stackedByDimension,u);for(var f=NaN,g=n-1;g>=0;g--){var m=t[g];if(s||(d=m.data.rawIndexOf(m.stackedByDimension,h)),d>=0){var v=m.data.getByRawIndex(m.stackResultDimension,d);if("all"===l||"positive"===l&&v>0||"negative"===l&&v<0||"samesign"===l&&p>=0&&v>0||"samesign"===l&&p<=0&&v<0){p=Zr(p,v),f=v;break}}}return i[0]=p,i[1]=f,i}))}))}var Ip,Ep,Op,Dp,Lp,Pp=function(t){this.data=t.data||(t.sourceFormat===Od?{}:[]),this.sourceFormat=t.sourceFormat||Ld,this.seriesLayoutBy=t.seriesLayoutBy||Pd,this.startIndex=t.startIndex||0,this.dimensionsDetectedCount=t.dimensionsDetectedCount,this.metaRawOption=t.metaRawOption;var e=this.dimensionsDefine=t.dimensionsDefine;if(e)for(var n=0;n<e.length;n++){var i=e[n];null==i.type&&1===Vd(this,n)&&(i.type="ordinal")}};function Np(t){return t instanceof Pp}function Rp(t,e,n){n=n||zp(t);var i=e.seriesLayoutBy,r=function(t,e,n,i,r){var o,a;if(!t)return{dimensionsDefine:Fp(r),startIndex:a,dimensionsDetectedCount:o};if(e===Id){var s=t;"auto"===i||null==i?Vp((function(t){null!=t&&"-"!==t&&(G(t)?null==a&&(a=1):a=0)}),n,s,10):a=U(i)?i:i?1:0,r||1!==a||(r=[],Vp((function(t,e){r[e]=null!=t?t+"":""}),n,s,1/0)),o=r?r.length:n===Nd?s.length:s[0]?s[0].length:null}else if(e===Ed)r||(r=function(t){for(var e,n=0;n<t.length&&!(e=t[n++]););if(e)return H(e)}(t));else if(e===Od)r||(r=[],R(t,(function(t,e){r.push(e)})));else if(e===Td){var l=xo(t[0]);o=Y(l)&&l.length||1}return{startIndex:a,dimensionsDefine:Fp(r),dimensionsDetectedCount:o}}(t,n,i,e.sourceHeader,e.dimensions);return new Pp({data:t,sourceFormat:n,seriesLayoutBy:i,dimensionsDefine:r.dimensionsDefine,startIndex:r.startIndex,dimensionsDetectedCount:r.dimensionsDetectedCount,metaRawOption:A(e)})}function Bp(t){return new Pp({data:t,sourceFormat:K(t)?Dd:Td})}function zp(t){var e=Ld;if(K(t))e=Dd;else if(Y(t)){0===t.length&&(e=Id);for(var n=0,i=t.length;n<i;n++){var r=t[n];if(null!=r){if(Y(r)||K(r)){e=Id;break}if($(r)){e=Ed;break}}}}else if($(t))for(var o in t)if(xt(t,o)&&N(t[o])){e=Od;break}return e}function Fp(t){if(t){var e=mt();return B(t,(function(t,n){var i={name:(t=$(t)?t:{name:t}).name,displayName:t.displayName,type:t.type};if(null==i.name)return i;i.name+="",null==i.displayName&&(i.displayName=i.name);var r=e.get(i.name);return r?i.name+="-"+r.count++:e.set(i.name,{count:1}),i}))}}function Vp(t,e,n,i){if(e===Nd)for(var r=0;r<n.length&&r<i;r++)t(n[r]?n[r][0]:null,r);else{var o=n[0]||[];for(r=0;r<o.length&&r<i;r++)t(o[r],r)}}function Hp(t){var e=t.sourceFormat;return e===Ed||e===Od}var Wp=function(){function t(t,e){var n=Np(t)?t:Bp(t);this._source=n;var i=this._data=n.data;n.sourceFormat===Dd&&(this._offset=0,this._dimSize=e,this._data=i),Lp(this,i,n)}return t.prototype.getSource=function(){return this._source},t.prototype.count=function(){return 0},t.prototype.getItem=function(t,e){},t.prototype.appendData=function(t){},t.prototype.clean=function(){},t.protoInitialize=function(){var e=t.prototype;e.pure=!1,e.persistent=!0}(),t.internalField=function(){var t;Lp=function(t,r,o){var a=o.sourceFormat,s=o.seriesLayoutBy,l=o.startIndex,c=o.dimensionsDefine;if(I(t,Dp[Qp(a,s)]),a===Dd)t.getItem=e,t.count=i,t.fillStorage=n;else{var u=Xp(a,s);t.getItem=W(u,null,r,l,c);var h=Up(a,s);t.count=W(h,null,r,l,c)}};var e=function(t,e){t-=this._offset,e=e||[];for(var n=this._data,i=this._dimSize,r=i*t,o=0;o<i;o++)e[o]=n[r+o];return e},n=function(t,e,n,i){for(var r=this._data,o=this._dimSize,a=0;a<o;a++){for(var s=i[a],l=null==s[0]?1/0:s[0],c=null==s[1]?-1/0:s[1],u=e-t,h=n[a],d=0;d<u;d++){var p=r[d*o+a];h[t+d]=p,p<l&&(l=p),p>c&&(c=p)}s[0]=l,s[1]=c}},i=function(){return this._data?this._data.length/this._dimSize:0};function r(t){for(var e=0;e<t.length;e++)this._data.push(t[e])}(t={})[Id+"_"+Pd]={pure:!0,appendData:r},t[Id+"_"+Nd]={pure:!0,appendData:function(){throw new Error('Do not support appendData when set seriesLayoutBy: "row".')}},t[Ed]={pure:!0,appendData:r},t[Od]={pure:!0,appendData:function(t){var e=this._data;R(t,(function(t,n){for(var i=e[n]||(e[n]=[]),r=0;r<(t||[]).length;r++)i.push(t[r])}))}},t[Td]={appendData:r},t[Dd]={persistent:!1,pure:!0,appendData:function(t){this._data=t},clean:function(){this._offset+=this.count(),this._data=null}},Dp=t}(),t}(),jp=function(t,e,n,i){return t[i]},Yp=((Ip={})[Id+"_"+Pd]=function(t,e,n,i){return t[i+e]},Ip[Id+"_"+Nd]=function(t,e,n,i,r){i+=e;for(var o=r||[],a=t,s=0;s<a.length;s++){var l=a[s];o[s]=l?l[i]:null}return o},Ip[Ed]=jp,Ip[Od]=function(t,e,n,i,r){for(var o=r||[],a=0;a<n.length;a++){var s=t[n[a].name];o[a]=s?s[i]:null}return o},Ip[Td]=jp,Ip);function Xp(t,e){return Yp[Qp(t,e)]}var Gp=function(t,e,n){return t.length},qp=((Ep={})[Id+"_"+Pd]=function(t,e,n){return Math.max(0,t.length-e)},Ep[Id+"_"+Nd]=function(t,e,n){var i=t[0];return i?Math.max(0,i.length-e):0},Ep[Ed]=Gp,Ep[Od]=function(t,e,n){var i=t[n[0].name];return i?i.length:0},Ep[Td]=Gp,Ep);function Up(t,e){return qp[Qp(t,e)]}var $p=function(t,e,n){return t[e]},Zp=((Op={})[Id]=$p,Op[Ed]=function(t,e,n){return t[n]},Op[Od]=$p,Op[Td]=function(t,e,n){var i=xo(t);return i instanceof Array?i[e]:i},Op[Dd]=$p,Op);function Kp(t){return Zp[t]}function Qp(t,e){return t===Id?t+"_"+e:t}function Jp(t,e,n){if(t){var i=t.getRawDataItem(e);if(null!=i){var r=t.getStore(),o=r.getSource().sourceFormat;if(null!=n){var a=t.getDimensionIndex(n),s=r.getDimensionProperty(a);return Kp(o)(i,a,s)}var l=i;return o===Td&&(l=xo(i)),l}}}var tf=/\{@(.+?)\}/g,ef=function(){function t(){}return t.prototype.getDataParams=function(t,e){var n=this.getData(e),i=this.getRawValue(t,e),r=n.getRawIndex(t),o=n.getName(t),a=n.getRawDataItem(t),s=n.getItemVisual(t,"style"),l=s&&s[n.getItemVisual(t,"drawType")||"fill"],c=s&&s.stroke,u=this.mainType,h="series"===u,d=n.userOutput&&n.userOutput.get();return{componentType:u,componentSubType:this.subType,componentIndex:this.componentIndex,seriesType:h?this.subType:null,seriesIndex:this.seriesIndex,seriesId:h?this.id:null,seriesName:h?this.name:null,name:o,dataIndex:r,data:a,dataType:e,value:i,color:l,borderColor:c,dimensionNames:d?d.fullDimensions:null,encode:d?d.encode:null,$vars:["seriesName","name","value"]}},t.prototype.getFormattedLabel=function(t,e,n,i,r,o){e=e||"normal";var a=this.getData(n),s=this.getDataParams(t,n);return o&&(s.value=o.interpolatedValue),null!=i&&Y(s.value)&&(s.value=s.value[i]),r||(r=a.getItemModel(t).get("normal"===e?["label","formatter"]:[e,"label","formatter"])),X(r)?(s.status=e,s.dimensionIndex=i,r(s)):G(r)?sd(r,s).replace(tf,(function(e,n){var i=n.length,r=n;"["===r.charAt(0)&&"]"===r.charAt(i-1)&&(r=+r.slice(1,i-1));var s=Jp(a,t,r);if(o&&Y(o.interpolatedValue)){var l=a.getDimensionIndex(r);l>=0&&(s=o.interpolatedValue[l])}return null!=s?s+"":""})):void 0},t.prototype.getRawValue=function(t,e){return Jp(this.getData(e),t)},t.prototype.formatTooltip=function(t,e,n){},t}();function nf(t){var e,n;return $(t)?t.type&&(n=t):e=t,{text:e,frag:n}}function rf(t){return new of(t)}var of=function(){function t(t){t=t||{},this._reset=t.reset,this._plan=t.plan,this._count=t.count,this._onDirty=t.onDirty,this._dirty=!0}return t.prototype.perform=function(t){var e,n=this._upstream,i=t&&t.skip;if(this._dirty&&n){var r=this.context;r.data=r.outputData=n.context.outputData}this.__pipeline&&(this.__pipeline.currentTask=this),this._plan&&!i&&(e=this._plan(this.context));var o,a=u(this._modBy),s=this._modDataCount||0,l=u(t&&t.modBy),c=t&&t.modDataCount||0;function u(t){return!(t>=1)&&(t=1),t}a===l&&s===c||(e="reset"),(this._dirty||"reset"===e)&&(this._dirty=!1,o=this._doReset(i)),this._modBy=l,this._modDataCount=c;var h=t&&t.step;if(this._dueEnd=n?n._outputDueEnd:this._count?this._count(this.context):1/0,this._progress){var d=this._dueIndex,p=Math.min(null!=h?this._dueIndex+h:1/0,this._dueEnd);if(!i&&(o||d<p)){var f=this._progress;if(Y(f))for(var g=0;g<f.length;g++)this._doProgress(f[g],d,p,l,c);else this._doProgress(f,d,p,l,c)}this._dueIndex=p;var m=null!=this._settedOutputEnd?this._settedOutputEnd:p;this._outputDueEnd=m}else this._dueIndex=this._outputDueEnd=null!=this._settedOutputEnd?this._settedOutputEnd:this._dueEnd;return this.unfinished()},t.prototype.dirty=function(){this._dirty=!0,this._onDirty&&this._onDirty(this.context)},t.prototype._doProgress=function(t,e,n,i,r){af.reset(e,n,i,r),this._callingProgress=t,this._callingProgress({start:e,end:n,count:n-e,next:af.next},this.context)},t.prototype._doReset=function(t){var e,n;this._dueIndex=this._outputDueEnd=this._dueEnd=0,this._settedOutputEnd=null,!t&&this._reset&&((e=this._reset(this.context))&&e.progress&&(n=e.forceFirstProgress,e=e.progress),Y(e)&&!e.length&&(e=null)),this._progress=e,this._modBy=this._modDataCount=null;var i=this._downstream;return i&&i.dirty(),n},t.prototype.unfinished=function(){return this._progress&&this._dueIndex<this._dueEnd},t.prototype.pipe=function(t){(this._downstream!==t||this._dirty)&&(this._downstream=t,t._upstream=this,t.dirty())},t.prototype.dispose=function(){this._disposed||(this._upstream&&(this._upstream._downstream=null),this._downstream&&(this._downstream._upstream=null),this._dirty=!1,this._disposed=!0)},t.prototype.getUpstream=function(){return this._upstream},t.prototype.getDownstream=function(){return this._downstream},t.prototype.setOutputEnd=function(t){this._outputDueEnd=this._settedOutputEnd=t},t}(),af=function(){var t,e,n,i,r,o={reset:function(l,c,u,h){e=l,t=c,n=u,i=h,r=Math.ceil(i/n),o.next=n>1&&i>0?s:a}};return o;function a(){return e<t?e++:null}function s(){var o=e%r*n+Math.ceil(e/r),a=e>=t?null:o<i?o:e;return e++,a}}();function sf(t,e){var n=e&&e.type;return"ordinal"===n?t:("time"!==n||U(t)||null==t||"-"===t||(t=+eo(t)),null==t||""===t?NaN:+t)}var lf=mt({number:function(t){return parseFloat(t)},time:function(t){return+eo(t)},trim:function(t){return G(t)?ct(t):t}});function cf(t){return lf.get(t)}var uf={lt:function(t,e){return t<e},lte:function(t,e){return t<=e},gt:function(t,e){return t>e},gte:function(t,e){return t>=e}},hf=function(){function t(t,e){if(!U(e)){po("")}this._opFn=uf[t],this._rvalFloat=so(e)}return t.prototype.evaluate=function(t){return U(t)?this._opFn(t,this._rvalFloat):this._opFn(so(t),this._rvalFloat)},t}(),df=function(){function t(t,e){var n="desc"===t;this._resultLT=n?1:-1,null==e&&(e=n?"min":"max"),this._incomparable="min"===e?-1/0:1/0}return t.prototype.evaluate=function(t,e){var n=U(t)?t:so(t),i=U(e)?e:so(e),r=isNaN(n),o=isNaN(i);if(r&&(n=this._incomparable),o&&(i=this._incomparable),r&&o){var a=G(t),s=G(e);a&&(n=s?t:0),s&&(i=a?e:0)}return n<i?this._resultLT:n>i?-this._resultLT:0},t}(),pf=function(){function t(t,e){this._rval=e,this._isEQ=t,this._rvalTypeof=typeof e,this._rvalFloat=so(e)}return t.prototype.evaluate=function(t){var e=t===this._rval;if(!e){var n=typeof t;n===this._rvalTypeof||"number"!==n&&"number"!==this._rvalTypeof||(e=so(t)===this._rvalFloat)}return this._isEQ?e:!e},t}();function ff(t,e){return"eq"===t||"ne"===t?new pf("eq"===t,e):xt(uf,t)?new hf(t,e):null}var gf=function(){function t(){}return t.prototype.getRawData=function(){throw new Error("not supported")},t.prototype.getRawDataItem=function(t){throw new Error("not supported")},t.prototype.cloneRawData=function(){},t.prototype.getDimensionInfo=function(t){},t.prototype.cloneAllDimensionInfo=function(){},t.prototype.count=function(){},t.prototype.retrieveValue=function(t,e){},t.prototype.retrieveValueFromItem=function(t,e){},t.prototype.convertValue=function(t,e){return sf(t,e)},t}();function mf(t){if(!wf(t.sourceFormat)){po("")}return t.data}function vf(t){var e=t.sourceFormat,n=t.data;if(!wf(e)){po("")}if(e===Id){for(var i=[],r=0,o=n.length;r<o;r++)i.push(n[r].slice());return i}if(e===Ed){for(i=[],r=0,o=n.length;r<o;r++)i.push(I({},n[r]));return i}}function yf(t,e,n){if(null!=n)return U(n)||!isNaN(n)&&!xt(e,n)?t[n]:xt(e,n)?e[n]:void 0}function bf(t){return A(t)}var xf=mt();function _f(t,e,n,i){e.length||po(""),$(t)||po("");var r=t.type,o=xf.get(r);o||po("");var a=B(e,(function(t){return function(t,e){var n=new gf,i=t.data,r=n.sourceFormat=t.sourceFormat,o=t.startIndex;t.seriesLayoutBy!==Pd&&po("");var a=[],s={},l=t.dimensionsDefine;if(l)R(l,(function(t,e){var n=t.name,i={index:e,name:n,displayName:t.displayName};if(a.push(i),null!=n){xt(s,n)&&po(""),s[n]=i}}));else for(var c=0;c<t.dimensionsDetectedCount;c++)a.push({index:c});var u=Xp(r,Pd);e.__isBuiltIn&&(n.getRawDataItem=function(t){return u(i,o,a,t)},n.getRawData=W(mf,null,t)),n.cloneRawData=W(vf,null,t);var h=Up(r,Pd);n.count=W(h,null,i,o,a);var d=Kp(r);n.retrieveValue=function(t,e){var n=u(i,o,a,t);return p(n,e)};var p=n.retrieveValueFromItem=function(t,e){if(null!=t){var n=a[e];return n?d(t,e,n.name):void 0}};return n.getDimensionInfo=W(yf,null,a,s),n.cloneAllDimensionInfo=W(bf,null,a),n}(t,o)}));return B(vo(o.transform({upstream:a[0],upstreamList:a,config:A(t.config)})),(function(t,n){var i;$(t)||po(""),t.data||po(""),wf(zp(t.data))||po("");var r=e[0];if(r&&0===n&&!t.dimensions){var o=r.startIndex;o&&(t.data=r.data.slice(0,o).concat(t.data)),i={seriesLayoutBy:Pd,sourceHeader:o,dimensions:r.metaRawOption.dimensions}}else i={seriesLayoutBy:Pd,sourceHeader:0,dimensions:t.dimensions};return Rp(t.data,i,null)}))}function wf(t){return t===Id||t===Ed}var Sf,Cf="undefined",kf=typeof Uint32Array===Cf?Array:Uint32Array,Af=typeof Uint16Array===Cf?Array:Uint16Array,Mf=typeof Int32Array===Cf?Array:Int32Array,Tf=typeof Float64Array===Cf?Array:Float64Array,If={float:Tf,int:Mf,ordinal:Array,number:Array,time:Tf};function Ef(t){return t>65535?kf:Af}function Of(t,e,n,i,r){var o=If[n||"float"];if(r){var a=t[e],s=a&&a.length;if(s!==i){for(var l=new o(i),c=0;c<s;c++)l[c]=a[c];t[e]=l}}else t[e]=new o(i)}var Df=function(){function t(){this._chunks=[],this._rawExtent=[],this._extent=[],this._count=0,this._rawCount=0,this._calcDimNameToIdx=mt()}return t.prototype.initData=function(t,e,n){this._provider=t,this._chunks=[],this._indices=null,this.getRawIndex=this._getRawIdxIdentity;var i=t.getSource(),r=this.defaultDimValueGetter=Sf[i.sourceFormat];this._dimValueGetter=n||r,this._rawExtent=[],Hp(i),this._dimensions=B(e,(function(t){return{type:t.type,property:t.property}})),this._initDataFromProvider(0,t.count())},t.prototype.getProvider=function(){return this._provider},t.prototype.getSource=function(){return this._provider.getSource()},t.prototype.ensureCalculationDimension=function(t,e){var n=this._calcDimNameToIdx,i=this._dimensions,r=n.get(t);if(null!=r){if(i[r].type===e)return r}else r=i.length;return i[r]={type:e},n.set(t,r),this._chunks[r]=new If[e||"float"](this._rawCount),this._rawExtent[r]=[1/0,-1/0],r},t.prototype.collectOrdinalMeta=function(t,e){var n=this._chunks[t],i=this._dimensions[t],r=this._rawExtent,o=i.ordinalOffset||0,a=n.length;0===o&&(r[t]=[1/0,-1/0]);for(var s=r[t],l=o;l<a;l++){var c=n[l]=e.parseAndCollect(n[l]);isNaN(c)||(s[0]=Math.min(c,s[0]),s[1]=Math.max(c,s[1]))}i.ordinalMeta=e,i.ordinalOffset=a,i.type="ordinal"},t.prototype.getOrdinalMeta=function(t){return this._dimensions[t].ordinalMeta},t.prototype.getDimensionProperty=function(t){var e=this._dimensions[t];return e&&e.property},t.prototype.appendData=function(t){var e=this._provider,n=this.count();e.appendData(t);var i=e.count();return e.persistent||(i+=n),n<i&&this._initDataFromProvider(n,i,!0),[n,i]},t.prototype.appendValues=function(t,e){for(var n=this._chunks,i=this._dimensions,r=i.length,o=this._rawExtent,a=this.count(),s=a+Math.max(t.length,e||0),l=0;l<r;l++)Of(n,l,(p=i[l]).type,s,!0);for(var c=[],u=a;u<s;u++)for(var h=u-a,d=0;d<r;d++){var p=i[d],f=Sf.arrayRows.call(this,t[h]||c,p.property,h,d);n[d][u]=f;var g=o[d];f<g[0]&&(g[0]=f),f>g[1]&&(g[1]=f)}return this._rawCount=this._count=s,{start:a,end:s}},t.prototype._initDataFromProvider=function(t,e,n){for(var i=this._provider,r=this._chunks,o=this._dimensions,a=o.length,s=this._rawExtent,l=B(o,(function(t){return t.property})),c=0;c<a;c++){var u=o[c];s[c]||(s[c]=[1/0,-1/0]),Of(r,c,u.type,e,n)}if(i.fillStorage)i.fillStorage(t,e,r,s);else for(var h=[],d=t;d<e;d++){h=i.getItem(d,h);for(var p=0;p<a;p++){var f=r[p],g=this._dimValueGetter(h,l[p],d,p);f[d]=g;var m=s[p];g<m[0]&&(m[0]=g),g>m[1]&&(m[1]=g)}}!i.persistent&&i.clean&&i.clean(),this._rawCount=this._count=e,this._extent=[]},t.prototype.count=function(){return this._count},t.prototype.get=function(t,e){if(!(e>=0&&e<this._count))return NaN;var n=this._chunks[t];return n?n[this.getRawIndex(e)]:NaN},t.prototype.getValues=function(t,e){var n=[],i=[];if(null==e){e=t,t=[];for(var r=0;r<this._dimensions.length;r++)i.push(r)}else i=t;r=0;for(var o=i.length;r<o;r++)n.push(this.get(i[r],e));return n},t.prototype.getByRawIndex=function(t,e){if(!(e>=0&&e<this._rawCount))return NaN;var n=this._chunks[t];return n?n[e]:NaN},t.prototype.getSum=function(t){var e=0;if(this._chunks[t])for(var n=0,i=this.count();n<i;n++){var r=this.get(t,n);isNaN(r)||(e+=r)}return e},t.prototype.getMedian=function(t){var e=[];this.each([t],(function(t){isNaN(t)||e.push(t)}));var n=e.sort((function(t,e){return t-e})),i=this.count();return 0===i?0:i%2==1?n[(i-1)/2]:(n[i/2]+n[i/2-1])/2},t.prototype.indexOfRawIndex=function(t){if(t>=this._rawCount||t<0)return-1;if(!this._indices)return t;var e=this._indices,n=e[t];if(null!=n&&n<this._count&&n===t)return t;for(var i=0,r=this._count-1;i<=r;){var o=(i+r)/2|0;if(e[o]<t)i=o+1;else{if(!(e[o]>t))return o;r=o-1}}return-1},t.prototype.indicesOfNearest=function(t,e,n){var i=this._chunks[t],r=[];if(!i)return r;null==n&&(n=1/0);for(var o=1/0,a=-1,s=0,l=0,c=this.count();l<c;l++){var u=e-i[this.getRawIndex(l)],h=Math.abs(u);h<=n&&((h<o||h===o&&u>=0&&a<0)&&(o=h,a=u,s=0),u===a&&(r[s++]=l))}return r.length=s,r},t.prototype.getIndices=function(){var t,e=this._indices;if(e){var n=e.constructor,i=this._count;if(n===Array){t=new n(i);for(var r=0;r<i;r++)t[r]=e[r]}else t=new n(e.buffer,0,i)}else for(t=new(n=Ef(this._rawCount))(this.count()),r=0;r<t.length;r++)t[r]=r;return t},t.prototype.filter=function(t,e){if(!this._count)return this;for(var n=this.clone(),i=n.count(),r=new(Ef(n._rawCount))(i),o=[],a=t.length,s=0,l=t[0],c=n._chunks,u=0;u<i;u++){var h=void 0,d=n.getRawIndex(u);if(0===a)h=e(u);else if(1===a)h=e(c[l][d],u);else{for(var p=0;p<a;p++)o[p]=c[t[p]][d];o[p]=u,h=e.apply(null,o)}h&&(r[s++]=d)}return s<i&&(n._indices=r),n._count=s,n._extent=[],n._updateGetRawIdx(),n},t.prototype.selectRange=function(t){var e=this.clone(),n=e._count;if(!n)return this;var i=H(t),r=i.length;if(!r)return this;var o=e.count(),a=new(Ef(e._rawCount))(o),s=0,l=i[0],c=t[l][0],u=t[l][1],h=e._chunks,d=!1;if(!e._indices){var p=0;if(1===r){for(var f=h[i[0]],g=0;g<n;g++)((b=f[g])>=c&&b<=u||isNaN(b))&&(a[s++]=p),p++;d=!0}else if(2===r){f=h[i[0]];var m=h[i[1]],v=t[i[1]][0],y=t[i[1]][1];for(g=0;g<n;g++){var b=f[g],x=m[g];(b>=c&&b<=u||isNaN(b))&&(x>=v&&x<=y||isNaN(x))&&(a[s++]=p),p++}d=!0}}if(!d)if(1===r)for(g=0;g<o;g++){var _=e.getRawIndex(g);((b=h[i[0]][_])>=c&&b<=u||isNaN(b))&&(a[s++]=_)}else for(g=0;g<o;g++){for(var w=!0,S=(_=e.getRawIndex(g),0);S<r;S++){var C=i[S];((b=h[C][_])<t[C][0]||b>t[C][1])&&(w=!1)}w&&(a[s++]=e.getRawIndex(g))}return s<o&&(e._indices=a),e._count=s,e._extent=[],e._updateGetRawIdx(),e},t.prototype.map=function(t,e){var n=this.clone(t);return this._updateDims(n,t,e),n},t.prototype.modify=function(t,e){this._updateDims(this,t,e)},t.prototype._updateDims=function(t,e,n){for(var i=t._chunks,r=[],o=e.length,a=t.count(),s=[],l=t._rawExtent,c=0;c<e.length;c++)l[e[c]]=[1/0,-1/0];for(var u=0;u<a;u++){for(var h=t.getRawIndex(u),d=0;d<o;d++)s[d]=i[e[d]][h];s[o]=u;var p=n&&n.apply(null,s);if(null!=p)for("object"!=typeof p&&(r[0]=p,p=r),c=0;c<p.length;c++){var f=e[c],g=p[c],m=l[f],v=i[f];v&&(v[h]=g),g<m[0]&&(m[0]=g),g>m[1]&&(m[1]=g)}}},t.prototype.lttbDownSample=function(t,e){var n,i,r,o=this.clone([t],!0),a=o._chunks[t],s=this.count(),l=0,c=Math.floor(1/e),u=this.getRawIndex(0),h=new(Ef(this._rawCount))(Math.min(2*(Math.ceil(s/c)+2),s));h[l++]=u;for(var d=1;d<s-1;d+=c){for(var p=Math.min(d+c,s-1),f=Math.min(d+2*c,s),g=(f+p)/2,m=0,v=p;v<f;v++){var y=a[k=this.getRawIndex(v)];isNaN(y)||(m+=y)}m/=f-p;var b=d,x=Math.min(d+c,s),_=d-1,w=a[u];n=-1,r=b;var S=-1,C=0;for(v=b;v<x;v++){var k;y=a[k=this.getRawIndex(v)],isNaN(y)?(C++,S<0&&(S=k)):(i=Math.abs((_-g)*(y-w)-(_-v)*(m-w)))>n&&(n=i,r=k)}C>0&&C<x-b&&(h[l++]=Math.min(S,r),r=Math.max(S,r)),h[l++]=r,u=r}return h[l++]=this.getRawIndex(s-1),o._count=l,o._indices=h,o.getRawIndex=this._getRawIdx,o},t.prototype.downSample=function(t,e,n,i){for(var r=this.clone([t],!0),o=r._chunks,a=[],s=Math.floor(1/e),l=o[t],c=this.count(),u=r._rawExtent[t]=[1/0,-1/0],h=new(Ef(this._rawCount))(Math.ceil(c/s)),d=0,p=0;p<c;p+=s){s>c-p&&(s=c-p,a.length=s);for(var f=0;f<s;f++){var g=this.getRawIndex(p+f);a[f]=l[g]}var m=n(a),v=this.getRawIndex(Math.min(p+i(a,m)||0,c-1));l[v]=m,m<u[0]&&(u[0]=m),m>u[1]&&(u[1]=m),h[d++]=v}return r._count=d,r._indices=h,r._updateGetRawIdx(),r},t.prototype.each=function(t,e){if(this._count)for(var n=t.length,i=this._chunks,r=0,o=this.count();r<o;r++){var a=this.getRawIndex(r);switch(n){case 0:e(r);break;case 1:e(i[t[0]][a],r);break;case 2:e(i[t[0]][a],i[t[1]][a],r);break;default:for(var s=0,l=[];s<n;s++)l[s]=i[t[s]][a];l[s]=r,e.apply(null,l)}}},t.prototype.getDataExtent=function(t){var e=this._chunks[t],n=[1/0,-1/0];if(!e)return n;var i,r=this.count();if(!this._indices)return this._rawExtent[t].slice();if(i=this._extent[t])return i.slice();for(var o=(i=n)[0],a=i[1],s=0;s<r;s++){var l=e[this.getRawIndex(s)];l<o&&(o=l),l>a&&(a=l)}return i=[o,a],this._extent[t]=i,i},t.prototype.getRawDataItem=function(t){var e=this.getRawIndex(t);if(this._provider.persistent)return this._provider.getItem(e);for(var n=[],i=this._chunks,r=0;r<i.length;r++)n.push(i[r][e]);return n},t.prototype.clone=function(e,n){var i,r,o=new t,a=this._chunks,s=e&&z(e,(function(t,e){return t[e]=!0,t}),{});if(s)for(var l=0;l<a.length;l++)o._chunks[l]=s[l]?(r=void 0,(r=(i=a[l]).constructor)===Array?i.slice():new r(i)):a[l];else o._chunks=a;return this._copyCommonProps(o),n||(o._indices=this._cloneIndices()),o._updateGetRawIdx(),o},t.prototype._copyCommonProps=function(t){t._count=this._count,t._rawCount=this._rawCount,t._provider=this._provider,t._dimensions=this._dimensions,t._extent=A(this._extent),t._rawExtent=A(this._rawExtent)},t.prototype._cloneIndices=function(){if(this._indices){var t=this._indices.constructor,e=void 0;if(t===Array){var n=this._indices.length;e=new t(n);for(var i=0;i<n;i++)e[i]=this._indices[i]}else e=new t(this._indices);return e}return null},t.prototype._getRawIdxIdentity=function(t){return t},t.prototype._getRawIdx=function(t){return t<this._count&&t>=0?this._indices[t]:-1},t.prototype._updateGetRawIdx=function(){this.getRawIndex=this._indices?this._getRawIdx:this._getRawIdxIdentity},t.internalField=function(){function t(t,e,n,i){return sf(t[i],this._dimensions[i])}Sf={arrayRows:t,objectRows:function(t,e,n,i){return sf(t[e],this._dimensions[i])},keyedColumns:t,original:function(t,e,n,i){var r=t&&(null==t.value?t:t.value);return sf(r instanceof Array?r[i]:r,this._dimensions[i])},typedArray:function(t,e,n,i){return t[i]}}}(),t}(),Lf=function(){function t(t){this._sourceList=[],this._storeList=[],this._upstreamSignList=[],this._versionSignBase=0,this._dirty=!0,this._sourceHost=t}return t.prototype.dirty=function(){this._setLocalSource([],[]),this._storeList=[],this._dirty=!0},t.prototype._setLocalSource=function(t,e){this._sourceList=t,this._upstreamSignList=e,this._versionSignBase++,this._versionSignBase>9e10&&(this._versionSignBase=0)},t.prototype._getVersionSign=function(){return this._sourceHost.uid+"_"+this._versionSignBase},t.prototype.prepareSource=function(){this._isDirty()&&(this._createSource(),this._dirty=!1)},t.prototype._createSource=function(){this._setLocalSource([],[]);var t,e,n=this._sourceHost,i=this._getUpstreamSourceManagers(),r=!!i.length;if(Nf(n)){var o=n,a=void 0,s=void 0,l=void 0;if(r){var c=i[0];c.prepareSource(),a=(l=c.getSource()).data,s=l.sourceFormat,e=[c._getVersionSign()]}else s=K(a=o.get("data",!0))?Dd:Td,e=[];var u=this._getSourceMetaRawOption()||{},h=l&&l.metaRawOption||{},d=rt(u.seriesLayoutBy,h.seriesLayoutBy)||null,p=rt(u.sourceHeader,h.sourceHeader),f=rt(u.dimensions,h.dimensions);t=d!==h.seriesLayoutBy||!!p!=!!h.sourceHeader||f?[Rp(a,{seriesLayoutBy:d,sourceHeader:p,dimensions:f},s)]:[]}else{var g=n;if(r){var m=this._applyTransform(i);t=m.sourceList,e=m.upstreamSignList}else t=[Rp(g.get("source",!0),this._getSourceMetaRawOption(),null)],e=[]}this._setLocalSource(t,e)},t.prototype._applyTransform=function(t){var e,n=this._sourceHost,i=n.get("transform",!0),r=n.get("fromTransformResult",!0);if(null!=r){1!==t.length&&Rf("")}var o,a=[],s=[];return R(t,(function(t){t.prepareSource();var e=t.getSource(r||0);null==r||e||Rf(""),a.push(e),s.push(t._getVersionSign())})),i?e=function(t,e,n){var i=vo(t),r=i.length;r||po("");for(var o=0,a=r;o<a;o++)e=_f(i[o],e),o!==a-1&&(e.length=Math.max(e.length,1));return e}(i,a,n.componentIndex):null!=r&&(e=[(o=a[0],new Pp({data:o.data,sourceFormat:o.sourceFormat,seriesLayoutBy:o.seriesLayoutBy,dimensionsDefine:A(o.dimensionsDefine),startIndex:o.startIndex,dimensionsDetectedCount:o.dimensionsDetectedCount}))]),{sourceList:e,upstreamSignList:s}},t.prototype._isDirty=function(){if(this._dirty)return!0;for(var t=this._getUpstreamSourceManagers(),e=0;e<t.length;e++){var n=t[e];if(n._isDirty()||this._upstreamSignList[e]!==n._getVersionSign())return!0}},t.prototype.getSource=function(t){t=t||0;var e=this._sourceList[t];if(!e){var n=this._getUpstreamSourceManagers();return n[0]&&n[0].getSource(t)}return e},t.prototype.getSharedDataStore=function(t){var e=t.makeStoreSchema();return this._innerGetDataStore(e.dimensions,t.source,e.hash)},t.prototype._innerGetDataStore=function(t,e,n){var i=this._storeList,r=i[0];r||(r=i[0]={});var o=r[n];if(!o){var a=this._getUpstreamSourceManagers()[0];Nf(this._sourceHost)&&a?o=a._innerGetDataStore(t,e,n):(o=new Df).initData(new Wp(e,t.length),t),r[n]=o}return o},t.prototype._getUpstreamSourceManagers=function(){var t=this._sourceHost;if(Nf(t)){var e=Fd(t);return e?[e.getSourceManager()]:[]}return B(function(t){return t.get("transform",!0)||t.get("fromTransformResult",!0)?No(t.ecModel,"dataset",{index:t.get("fromDatasetIndex",!0),id:t.get("fromDatasetId",!0)},Lo).models:[]}(t),(function(t){return t.getSourceManager()}))},t.prototype._getSourceMetaRawOption=function(){var t,e,n,i=this._sourceHost;if(Nf(i))t=i.get("seriesLayoutBy",!0),e=i.get("sourceHeader",!0),n=i.get("dimensions",!0);else if(!this._getUpstreamSourceManagers().length){var r=i;t=r.get("seriesLayoutBy",!0),e=r.get("sourceHeader",!0),n=r.get("dimensions",!0)}return{seriesLayoutBy:t,sourceHeader:e,dimensions:n}},t}();function Pf(t){t.option.transform&&ht(t.option.transform)}function Nf(t){return"series"===t.mainType}function Rf(t){throw new Error(t)}var Bf="line-height:1";function zf(t,e){var n=t.color||"#6e7079",i=t.fontSize||12,r=t.fontWeight||"400",o=t.color||"#464646",a=t.fontSize||14,s=t.fontWeight||"900";return"html"===e?{nameStyle:"font-size:"+re(i+"")+"px;color:"+re(n)+";font-weight:"+re(r+""),valueStyle:"font-size:"+re(a+"")+"px;color:"+re(o)+";font-weight:"+re(s+"")}:{nameStyle:{fontSize:i,fill:n,fontWeight:r},valueStyle:{fontSize:a,fill:o,fontWeight:s}}}var Ff=[0,10,20,30],Vf=["","\n","\n\n","\n\n\n"];function Hf(t,e){return e.type=t,e}function Wf(t){return"section"===t.type}function jf(t){return Wf(t)?Xf:Gf}function Yf(t){if(Wf(t)){var e=0,n=t.blocks.length,i=n>1||n>0&&!t.noHeader;return R(t.blocks,(function(t){var n=Yf(t);n>=e&&(e=n+ +(i&&(!n||Wf(t)&&!t.noHeader)))})),e}return 0}function Xf(t,e,n,i){var r,o=e.noHeader,a=(r=Yf(e),{html:Ff[r],richText:Vf[r]}),s=[],l=e.blocks||[];lt(!l||Y(l)),l=l||[];var c=t.orderMode;if(e.sortBlocks&&c){l=l.slice();var u={valueAsc:"asc",valueDesc:"desc"};if(xt(u,c)){var h=new df(u[c],null);l.sort((function(t,e){return h.evaluate(t.sortParam,e.sortParam)}))}else"seriesDesc"===c&&l.reverse()}R(l,(function(n,r){var o=e.valueFormatter,l=jf(n)(o?I(I({},t),{valueFormatter:o}):t,n,r>0?a.html:0,i);null!=l&&s.push(l)}));var d="richText"===t.renderMode?s.join(a.richText):Uf(s.join(""),o?n:a.html);if(o)return d;var p=rd(e.header,"ordinal",t.useUTC),f=zf(i,t.renderMode).nameStyle;return"richText"===t.renderMode?$f(t,p,f)+a.richText+d:Uf('<div style="'+f+";"+Bf+';">'+re(p)+"</div>"+d,n)}function Gf(t,e,n,i){var r=t.renderMode,o=e.noName,a=e.noValue,s=!e.markerType,l=e.name,c=t.useUTC,u=e.valueFormatter||t.valueFormatter||function(t){return B(t=Y(t)?t:[t],(function(t,e){return rd(t,Y(p)?p[e]:p,c)}))};if(!o||!a){var h=s?"":t.markupStyleCreator.makeTooltipMarker(e.markerType,e.markerColor||"#333",r),d=o?"":rd(l,"ordinal",c),p=e.valueType,f=a?[]:u(e.value,e.dataIndex),g=!s||!o,m=!s&&o,v=zf(i,r),y=v.nameStyle,b=v.valueStyle;return"richText"===r?(s?"":h)+(o?"":$f(t,d,y))+(a?"":function(t,e,n,i,r){var o=[r],a=i?10:20;return n&&o.push({padding:[0,0,0,a],align:"right"}),t.markupStyleCreator.wrapRichTextStyle(Y(e)?e.join("  "):e,o)}(t,f,g,m,b)):Uf((s?"":h)+(o?"":function(t,e,n){return'<span style="'+n+";"+(e?"margin-left:2px":"")+'">'+re(t)+"</span>"}(d,!s,y))+(a?"":function(t,e,n,i){return'<span style="'+(e?"float:right;margin-left:"+(n?"10px":"20px"):"")+";"+i+'">'+B(t=Y(t)?t:[t],(function(t){return re(t)})).join("&nbsp;&nbsp;")+"</span>"}(f,g,m,b)),n)}}function qf(t,e,n,i,r,o){if(t)return jf(t)({useUTC:r,renderMode:n,orderMode:i,markupStyleCreator:e,valueFormatter:t.valueFormatter},t,0,o)}function Uf(t,e){return'<div style="margin: '+e+"px 0 0;"+Bf+';">'+t+'<div style="clear:both"></div></div>'}function $f(t,e,n){return t.markupStyleCreator.wrapRichTextStyle(e,n)}function Zf(t,e){return cd(t.getData().getItemVisual(e,"style")[t.visualDrawType])}function Kf(t,e){var n=t.get("padding");return null!=n?n:"richText"===e?[8,10]:10}var Qf=function(){function t(){this.richTextStyles={},this._nextStyleNameId=co()}return t.prototype._generateStyleName=function(){return"__EC_aUTo_"+this._nextStyleNameId++},t.prototype.makeTooltipMarker=function(t,e,n){var i="richText"===n?this._generateStyleName():null,r=ld({color:e,type:t,renderMode:n,markerId:i});return G(r)?r:(this.richTextStyles[i]=r.style,r.content)},t.prototype.wrapRichTextStyle=function(t,e){var n={};Y(e)?R(e,(function(t){return I(n,t)})):I(n,e);var i=this._generateStyleName();return this.richTextStyles[i]=n,"{"+i+"|"+t+"}"},t}();function Jf(t){var e,n,i,r,o=t.series,a=t.dataIndex,s=t.multipleSeries,l=o.getData(),c=l.mapDimensionsAll("defaultedTooltip"),u=c.length,h=o.getRawValue(a),d=Y(h),p=Zf(o,a);if(u>1||d&&!u){var f=function(t,e,n,i,r){var o=e.getData(),a=z(t,(function(t,e,n){var i=o.getDimensionInfo(n);return t||i&&!1!==i.tooltip&&null!=i.displayName}),!1),s=[],l=[],c=[];function u(t,e){var n=o.getDimensionInfo(e);n&&!1!==n.otherDims.tooltip&&(a?c.push(Hf("nameValue",{markerType:"subItem",markerColor:r,name:n.displayName,value:t,valueType:n.type})):(s.push(t),l.push(n.type)))}return i.length?R(i,(function(t){u(Jp(o,n,t),t)})):R(t,u),{inlineValues:s,inlineValueTypes:l,blocks:c}}(h,o,a,c,p);e=f.inlineValues,n=f.inlineValueTypes,i=f.blocks,r=f.inlineValues[0]}else if(u){var g=l.getDimensionInfo(c[0]);r=e=Jp(l,a,c[0]),n=g.type}else r=e=d?h[0]:h;var m=Ao(o),v=m&&o.name||"",y=l.getName(a),b=s?v:y;return Hf("section",{header:v,noHeader:s||!m,sortParam:r,blocks:[Hf("nameValue",{markerType:"item",markerColor:p,name:b,noName:!ct(b),value:e,valueType:n,dataIndex:a})].concat(i||[])})}var tg=Io();function eg(t,e){return t.getName(e)||t.getId(e)}var ng="__universalTransitionEnabled",ig=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._selectedDataIndicesMap={},e}return n(e,t),e.prototype.init=function(t,e,n){this.seriesIndex=this.componentIndex,this.dataTask=rf({count:og,reset:ag}),this.dataTask.context={model:this},this.mergeDefaultAndTheme(t,n),(tg(this).sourceManager=new Lf(this)).prepareSource();var i=this.getInitialData(t,n);lg(i,this),this.dataTask.context.data=i,tg(this).dataBeforeProcessed=i,rg(this),this._initSelectedMapFromData(i)},e.prototype.mergeDefaultAndTheme=function(t,e){var n=yd(this),i=n?xd(t):{},r=this.subType;Sd.hasClass(r)&&(r+="Series"),M(t,e.getTheme().get(this.subType)),M(t,this.getDefaultOption()),yo(t,"label",["show"]),this.fillDataTextStyle(t.data),n&&bd(t,i,n)},e.prototype.mergeOption=function(t,e){t=M(this.option,t,!0),this.fillDataTextStyle(t.data);var n=yd(this);n&&bd(this.option,t,n);var i=tg(this).sourceManager;i.dirty(),i.prepareSource();var r=this.getInitialData(t,e);lg(r,this),this.dataTask.dirty(),this.dataTask.context.data=r,tg(this).dataBeforeProcessed=r,rg(this),this._initSelectedMapFromData(r)},e.prototype.fillDataTextStyle=function(t){if(t&&!K(t))for(var e=["show"],n=0;n<t.length;n++)t[n]&&t[n].label&&yo(t[n],"label",e)},e.prototype.getInitialData=function(t,e){},e.prototype.appendData=function(t){this.getRawData().appendData(t.data)},e.prototype.getData=function(t){var e=ug(this);if(e){var n=e.context.data;return null==t?n:n.getLinkedData(t)}return tg(this).data},e.prototype.getAllData=function(){var t=this.getData();return t&&t.getLinkedDataAll?t.getLinkedDataAll():[{data:t}]},e.prototype.setData=function(t){var e=ug(this);if(e){var n=e.context;n.outputData=t,e!==this.dataTask&&(n.data=t)}tg(this).data=t},e.prototype.getEncode=function(){var t=this.get("encode",!0);if(t)return mt(t)},e.prototype.getSourceManager=function(){return tg(this).sourceManager},e.prototype.getSource=function(){return this.getSourceManager().getSource()},e.prototype.getRawData=function(){return tg(this).dataBeforeProcessed},e.prototype.getColorBy=function(){return this.get("colorBy")||"series"},e.prototype.isColorBySeries=function(){return"series"===this.getColorBy()},e.prototype.getBaseAxis=function(){var t=this.coordinateSystem;return t&&t.getBaseAxis&&t.getBaseAxis()},e.prototype.formatTooltip=function(t,e,n){return Jf({series:this,dataIndex:t,multipleSeries:e})},e.prototype.isAnimationEnabled=function(){var t=this.ecModel;if(r.node&&(!t||!t.ssr))return!1;var e=this.getShallow("animation");return e&&this.getData().count()>this.getShallow("animationThreshold")&&(e=!1),!!e},e.prototype.restoreData=function(){this.dataTask.dirty()},e.prototype.getColorFromPalette=function(t,e,n){var i=this.ecModel,r=Ud.prototype.getColorFromPalette.call(this,t,e,n);return r||(r=i.getColorFromPalette(t,e,n)),r},e.prototype.coordDimToDataDim=function(t){return this.getRawData().mapDimensionsAll(t)},e.prototype.getProgressive=function(){return this.get("progressive")},e.prototype.getProgressiveThreshold=function(){return this.get("progressiveThreshold")},e.prototype.select=function(t,e){this._innerSelect(this.getData(e),t)},e.prototype.unselect=function(t,e){var n=this.option.selectedMap;if(n){var i=this.option.selectedMode,r=this.getData(e);if("series"===i||"all"===n)return this.option.selectedMap={},void(this._selectedDataIndicesMap={});for(var o=0;o<t.length;o++){var a=eg(r,t[o]);n[a]=!1,this._selectedDataIndicesMap[a]=-1}}},e.prototype.toggleSelect=function(t,e){for(var n=[],i=0;i<t.length;i++)n[0]=t[i],this.isSelected(t[i],e)?this.unselect(n,e):this.select(n,e)},e.prototype.getSelectedDataIndices=function(){if("all"===this.option.selectedMap)return[].slice.call(this.getData().getIndices());for(var t=this._selectedDataIndicesMap,e=H(t),n=[],i=0;i<e.length;i++){var r=t[e[i]];r>=0&&n.push(r)}return n},e.prototype.isSelected=function(t,e){var n=this.option.selectedMap;if(!n)return!1;var i=this.getData(e);return("all"===n||n[eg(i,t)])&&!i.getItemModel(t).get(["select","disabled"])},e.prototype.isUniversalTransitionEnabled=function(){if(this[ng])return!0;var t=this.option.universalTransition;return!!t&&(!0===t||t&&t.enabled)},e.prototype._innerSelect=function(t,e){var n,i,r=this.option,o=r.selectedMode,a=e.length;if(o&&a)if("series"===o)r.selectedMap="all";else if("multiple"===o){$(r.selectedMap)||(r.selectedMap={});for(var s=r.selectedMap,l=0;l<a;l++){var c=e[l];s[h=eg(t,c)]=!0,this._selectedDataIndicesMap[h]=t.getRawIndex(c)}}else if("single"===o||!0===o){var u=e[a-1],h=eg(t,u);r.selectedMap=((n={})[h]=!0,n),this._selectedDataIndicesMap=((i={})[h]=t.getRawIndex(u),i)}},e.prototype._initSelectedMapFromData=function(t){if(!this.option.selectedMap){var e=[];t.hasItemOption&&t.each((function(n){var i=t.getRawDataItem(n);i&&i.selected&&e.push(n)})),e.length>0&&this._innerSelect(t,e)}},e.registerClass=function(t){return Sd.registerClass(t)},e.protoInitialize=function(){var t=e.prototype;t.type="series.__base__",t.seriesIndex=0,t.ignoreStyleOnData=!1,t.hasSymbolVisual=!1,t.defaultSymbol="circle",t.visualStyleAccessPath="itemStyle",t.visualDrawType="fill"}(),e}(Sd);function rg(t){var e=t.name;Ao(t)||(t.name=function(t){var e=t.getRawData(),n=e.mapDimensionsAll("seriesName"),i=[];return R(n,(function(t){var n=e.getDimensionInfo(t);n.displayName&&i.push(n.displayName)})),i.join(" ")}(t)||e)}function og(t){return t.model.getRawData().count()}function ag(t){var e=t.model;return e.setData(e.getRawData().cloneShallow()),sg}function sg(t,e){e.outputData&&t.end>e.outputData.count()&&e.model.getRawData().cloneShallow(e.outputData)}function lg(t,e){R(vt(t.CHANGABLE_METHODS,t.DOWNSAMPLE_METHODS),(function(n){t.wrapMethod(n,j(cg,e))}))}function cg(t,e){var n=ug(t);return n&&n.setOutputEnd((e||this).count()),e}function ug(t){var e=(t.ecModel||{}).scheduler,n=e&&e.getPipeline(t.uid);if(n){var i=n.currentTask;if(i){var r=i.agentStubMap;r&&(i=r.get(t.uid))}return i}}P(ig,ef),P(ig,Ud),jo(ig,Sd);var hg=function(){function t(){this.group=new Dr,this.uid=vh("viewComponent")}return t.prototype.init=function(t,e){},t.prototype.render=function(t,e,n,i){},t.prototype.dispose=function(t,e){},t.prototype.updateView=function(t,e,n,i){},t.prototype.updateLayout=function(t,e,n,i){},t.prototype.updateVisual=function(t,e,n,i){},t.prototype.toggleBlurSeries=function(t,e,n){},t.prototype.eachRendered=function(t){var e=this.group;e&&e.traverse(t)},t}();function dg(){var t=Io();return function(e){var n=t(e),i=e.pipelineContext,r=!!n.large,o=!!n.progressiveRender,a=n.large=!(!i||!i.large),s=n.progressiveRender=!(!i||!i.progressiveRender);return!(r===a&&o===s)&&"reset"}}Wo(hg),qo(hg);var pg=Io(),fg=dg(),gg=function(){function t(){this.group=new Dr,this.uid=vh("viewChart"),this.renderTask=rf({plan:yg,reset:bg}),this.renderTask.context={view:this}}return t.prototype.init=function(t,e){},t.prototype.render=function(t,e,n,i){},t.prototype.highlight=function(t,e,n,i){var r=t.getData(i&&i.dataType);r&&vg(r,i,"emphasis")},t.prototype.downplay=function(t,e,n,i){var r=t.getData(i&&i.dataType);r&&vg(r,i,"normal")},t.prototype.remove=function(t,e){this.group.removeAll()},t.prototype.dispose=function(t,e){},t.prototype.updateView=function(t,e,n,i){this.render(t,e,n,i)},t.prototype.updateLayout=function(t,e,n,i){this.render(t,e,n,i)},t.prototype.updateVisual=function(t,e,n,i){this.render(t,e,n,i)},t.prototype.eachRendered=function(t){Vu(this.group,t)},t.markUpdateMethod=function(t,e){pg(t).updateMethod=e},t.protoInitialize=void(t.prototype.type="chart"),t}();function mg(t,e,n){t&&jl(t)&&("emphasis"===e?Sl:Cl)(t,n)}function vg(t,e,n){var i=To(t,e),r=e&&null!=e.highlightKey?function(t){var e=Qs[t];return null==e&&Ks<=32&&(e=Qs[t]=Ks++),e}(e.highlightKey):null;null!=i?R(vo(i),(function(e){mg(t.getItemGraphicEl(e),n,r)})):t.eachItemGraphicEl((function(t){mg(t,n,r)}))}function yg(t){return fg(t.model)}function bg(t){var e=t.model,n=t.ecModel,i=t.api,r=t.payload,o=e.pipelineContext.progressiveRender,a=t.view,s=r&&pg(r).updateMethod,l=o?"incrementalPrepareRender":s&&a[s]?s:"render";return"render"!==l&&a[l](e,n,i,r),xg[l]}Wo(gg),qo(gg);var xg={incrementalPrepareRender:{progress:function(t,e){e.view.incrementalRender(t,e.model,e.ecModel,e.api,e.payload)}},render:{forceFirstProgress:!0,progress:function(t,e){e.view.render(e.model,e.ecModel,e.api,e.payload)}}},_g="\0__throttleOriginMethod",wg="\0__throttleRate",Sg="\0__throttleType";function Cg(t,e,n){var i,r,o,a,s,l=0,c=0,u=null;function h(){c=(new Date).getTime(),u=null,t.apply(o,a||[])}e=e||0;var d=function(){for(var t=[],d=0;d<arguments.length;d++)t[d]=arguments[d];i=(new Date).getTime(),o=this,a=t;var p=s||e,f=s||n;s=null,r=i-(f?l:c)-p,clearTimeout(u),f?u=setTimeout(h,p):r>=0?h():u=setTimeout(h,-r),l=i};return d.clear=function(){u&&(clearTimeout(u),u=null)},d.debounceNextCall=function(t){s=t},d}function kg(t,e,n,i){var r=t[e];if(r){var o=r[_g]||r,a=r[Sg];if(r[wg]!==n||a!==i){if(null==n||!i)return t[e]=o;(r=t[e]=Cg(o,n,"debounce"===i))[_g]=o,r[Sg]=i,r[wg]=n}return r}}function Ag(t,e){var n=t[e];n&&n[_g]&&(n.clear&&n.clear(),t[e]=n[_g])}var Mg=Io(),Tg={itemStyle:Uo(dh,!0),lineStyle:Uo(ch,!0)},Ig={lineStyle:"stroke",itemStyle:"fill"};function Eg(t,e){return t.visualStyleMapper||Tg[e]||(console.warn("Unknown style type '"+e+"'."),Tg.itemStyle)}function Og(t,e){return t.visualDrawType||Ig[e]||(console.warn("Unknown style type '"+e+"'."),"fill")}var Dg={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,e){var n=t.getData(),i=t.visualStyleAccessPath||"itemStyle",r=t.getModel(i),o=Eg(t,i)(r),a=r.getShallow("decal");a&&(n.setVisual("decal",a),a.dirty=!0);var s=Og(t,i),l=o[s],c=X(l)?l:null,u="auto"===o.fill||"auto"===o.stroke;if(!o[s]||c||u){var h=t.getColorFromPalette(t.name,null,e.getSeriesCount());o[s]||(o[s]=h,n.setVisual("colorFromPalette",!0)),o.fill="auto"===o.fill||X(o.fill)?h:o.fill,o.stroke="auto"===o.stroke||X(o.stroke)?h:o.stroke}if(n.setVisual("style",o),n.setVisual("drawType",s),!e.isSeriesFiltered(t)&&c)return n.setVisual("colorFromPalette",!1),{dataEach:function(e,n){var i=t.getDataParams(n),r=I({},o);r[s]=c(i),e.setItemVisual(n,"style",r)}}}},Lg=new gh,Pg={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,e){if(!t.ignoreStyleOnData&&!e.isSeriesFiltered(t)){var n=t.getData(),i=t.visualStyleAccessPath||"itemStyle",r=Eg(t,i),o=n.getVisual("drawType");return{dataEach:n.hasItemOption?function(t,e){var n=t.getRawDataItem(e);if(n&&n[i]){Lg.option=n[i];var a=r(Lg);I(t.ensureUniqueItemVisual(e,"style"),a),Lg.option.decal&&(t.setItemVisual(e,"decal",Lg.option.decal),Lg.option.decal.dirty=!0),o in a&&t.setItemVisual(e,"colorFromPalette",!1)}}:null}}}},Ng={performRawSeries:!0,overallReset:function(t){var e=mt();t.eachSeries((function(t){var n=t.getColorBy();if(!t.isColorBySeries()){var i=t.type+"-"+n,r=e.get(i);r||(r={},e.set(i,r)),Mg(t).scope=r}})),t.eachSeries((function(e){if(!e.isColorBySeries()&&!t.isSeriesFiltered(e)){var n=e.getRawData(),i={},r=e.getData(),o=Mg(e).scope,a=e.visualStyleAccessPath||"itemStyle",s=Og(e,a);r.each((function(t){var e=r.getRawIndex(t);i[e]=t})),n.each((function(t){var a=i[t];if(r.getItemVisual(a,"colorFromPalette")){var l=r.ensureUniqueItemVisual(a,"style"),c=n.getName(t)||t+"",u=n.count();l[s]=e.getColorFromPalette(c,o,u)}}))}}))}},Rg=Math.PI,Bg=function(){function t(t,e,n,i){this._stageTaskMap=mt(),this.ecInstance=t,this.api=e,n=this._dataProcessorHandlers=n.slice(),i=this._visualHandlers=i.slice(),this._allHandlers=n.concat(i)}return t.prototype.restoreData=function(t,e){t.restoreData(e),this._stageTaskMap.each((function(t){var e=t.overallTask;e&&e.dirty()}))},t.prototype.getPerformArgs=function(t,e){if(t.__pipeline){var n=this._pipelineMap.get(t.__pipeline.id),i=n.context,r=!e&&n.progressiveEnabled&&(!i||i.progressiveRender)&&t.__idxInPipeline>n.blockIndex?n.step:null,o=i&&i.modDataCount;return{step:r,modBy:null!=o?Math.ceil(o/r):null,modDataCount:o}}},t.prototype.getPipeline=function(t){return this._pipelineMap.get(t)},t.prototype.updateStreamModes=function(t,e){var n=this._pipelineMap.get(t.uid),i=t.getData().count(),r=n.progressiveEnabled&&e.incrementalPrepareRender&&i>=n.threshold,o=t.get("large")&&i>=t.get("largeThreshold"),a="mod"===t.get("progressiveChunkMode")?i:null;t.pipelineContext=n.context={progressiveRender:r,modDataCount:a,large:o}},t.prototype.restorePipelines=function(t){var e=this,n=e._pipelineMap=mt();t.eachSeries((function(t){var i=t.getProgressive(),r=t.uid;n.set(r,{id:r,head:null,tail:null,threshold:t.getProgressiveThreshold(),progressiveEnabled:i&&!(t.preventIncremental&&t.preventIncremental()),blockIndex:-1,step:Math.round(i||700),count:0}),e._pipe(t,t.dataTask)}))},t.prototype.prepareStageTasks=function(){var t=this._stageTaskMap,e=this.api.getModel(),n=this.api;R(this._allHandlers,(function(i){var r=t.get(i.uid)||t.set(i.uid,{});lt(!(i.reset&&i.overallReset),""),i.reset&&this._createSeriesStageTask(i,r,e,n),i.overallReset&&this._createOverallStageTask(i,r,e,n)}),this)},t.prototype.prepareView=function(t,e,n,i){var r=t.renderTask,o=r.context;o.model=e,o.ecModel=n,o.api=i,r.__block=!t.incrementalPrepareRender,this._pipe(e,r)},t.prototype.performDataProcessorTasks=function(t,e){this._performStageTasks(this._dataProcessorHandlers,t,e,{block:!0})},t.prototype.performVisualTasks=function(t,e,n){this._performStageTasks(this._visualHandlers,t,e,n)},t.prototype._performStageTasks=function(t,e,n,i){i=i||{};var r=!1,o=this;function a(t,e){return t.setDirty&&(!t.dirtyMap||t.dirtyMap.get(e.__pipeline.id))}R(t,(function(t,s){if(!i.visualType||i.visualType===t.visualType){var l=o._stageTaskMap.get(t.uid),c=l.seriesTaskMap,u=l.overallTask;if(u){var h,d=u.agentStubMap;d.each((function(t){a(i,t)&&(t.dirty(),h=!0)})),h&&u.dirty(),o.updatePayload(u,n);var p=o.getPerformArgs(u,i.block);d.each((function(t){t.perform(p)})),u.perform(p)&&(r=!0)}else c&&c.each((function(s,l){a(i,s)&&s.dirty();var c=o.getPerformArgs(s,i.block);c.skip=!t.performRawSeries&&e.isSeriesFiltered(s.context.model),o.updatePayload(s,n),s.perform(c)&&(r=!0)}))}})),this.unfinished=r||this.unfinished},t.prototype.performSeriesTasks=function(t){var e;t.eachSeries((function(t){e=t.dataTask.perform()||e})),this.unfinished=e||this.unfinished},t.prototype.plan=function(){this._pipelineMap.each((function(t){var e=t.tail;do{if(e.__block){t.blockIndex=e.__idxInPipeline;break}e=e.getUpstream()}while(e)}))},t.prototype.updatePayload=function(t,e){"remain"!==e&&(t.context.payload=e)},t.prototype._createSeriesStageTask=function(t,e,n,i){var r=this,o=e.seriesTaskMap,a=e.seriesTaskMap=mt(),s=t.seriesType,l=t.getTargetSeries;function c(e){var s=e.uid,l=a.set(s,o&&o.get(s)||rf({plan:Wg,reset:jg,count:Gg}));l.context={model:e,ecModel:n,api:i,useClearVisual:t.isVisual&&!t.isLayout,plan:t.plan,reset:t.reset,scheduler:r},r._pipe(e,l)}t.createOnAllSeries?n.eachRawSeries(c):s?n.eachRawSeriesByType(s,c):l&&l(n,i).each(c)},t.prototype._createOverallStageTask=function(t,e,n,i){var r=this,o=e.overallTask=e.overallTask||rf({reset:zg});o.context={ecModel:n,api:i,overallReset:t.overallReset,scheduler:r};var a=o.agentStubMap,s=o.agentStubMap=mt(),l=t.seriesType,c=t.getTargetSeries,u=!0,h=!1;function d(t){var e=t.uid,n=s.set(e,a&&a.get(e)||(h=!0,rf({reset:Fg,onDirty:Hg})));n.context={model:t,overallProgress:u},n.agent=o,n.__block=u,r._pipe(t,n)}lt(!t.createOnAllSeries,""),l?n.eachRawSeriesByType(l,d):c?c(n,i).each(d):(u=!1,R(n.getSeries(),d)),h&&o.dirty()},t.prototype._pipe=function(t,e){var n=t.uid,i=this._pipelineMap.get(n);!i.head&&(i.head=e),i.tail&&i.tail.pipe(e),i.tail=e,e.__idxInPipeline=i.count++,e.__pipeline=i},t.wrapStageHandler=function(t,e){return X(t)&&(t={overallReset:t,seriesType:qg(t)}),t.uid=vh("stageHandler"),e&&(t.visualType=e),t},t}();function zg(t){t.overallReset(t.ecModel,t.api,t.payload)}function Fg(t){return t.overallProgress&&Vg}function Vg(){this.agent.dirty(),this.getDownstream().dirty()}function Hg(){this.agent&&this.agent.dirty()}function Wg(t){return t.plan?t.plan(t.model,t.ecModel,t.api,t.payload):null}function jg(t){t.useClearVisual&&t.data.clearAllVisual();var e=t.resetDefines=vo(t.reset(t.model,t.ecModel,t.api,t.payload));return e.length>1?B(e,(function(t,e){return Xg(e)})):Yg}var Yg=Xg(0);function Xg(t){return function(e,n){var i=n.data,r=n.resetDefines[t];if(r&&r.dataEach)for(var o=e.start;o<e.end;o++)r.dataEach(i,o);else r&&r.progress&&r.progress(e,i)}}function Gg(t){return t.data.count()}function qg(t){Ug=null;try{t($g,Zg)}catch(t){}return Ug}var Ug,$g={},Zg={};function Kg(t,e){for(var n in e.prototype)t[n]=_t}Kg($g,Qd),Kg(Zg,ip),$g.eachSeriesByType=$g.eachRawSeriesByType=function(t){Ug=t},$g.eachComponent=function(t){"series"===t.mainType&&t.subType&&(Ug=t.subType)};var Qg=["#37A2DA","#32C5E9","#67E0E3","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#E062AE","#E690D1","#e7bcf3","#9d96f5","#8378EA","#96BFFF"],Jg={color:Qg,colorLayer:[["#37A2DA","#ffd85c","#fd7b5f"],["#37A2DA","#67E0E3","#FFDB5C","#ff9f7f","#E062AE","#9d96f5"],["#37A2DA","#32C5E9","#9FE6B8","#FFDB5C","#ff9f7f","#fb7293","#e7bcf3","#8378EA","#96BFFF"],Qg]},tm="#B9B8CE",em="#100C2A",nm=function(){return{axisLine:{lineStyle:{color:tm}},splitLine:{lineStyle:{color:"#484753"}},splitArea:{areaStyle:{color:["rgba(255,255,255,0.02)","rgba(255,255,255,0.05)"]}},minorSplitLine:{lineStyle:{color:"#20203B"}}}},im=["#4992ff","#7cffb2","#fddd60","#ff6e76","#58d9f9","#05c091","#ff8a45","#8d48e3","#dd79ff"],rm={darkMode:!0,color:im,backgroundColor:em,axisPointer:{lineStyle:{color:"#817f91"},crossStyle:{color:"#817f91"},label:{color:"#fff"}},legend:{textStyle:{color:tm}},textStyle:{color:tm},title:{textStyle:{color:"#EEF1FA"},subtextStyle:{color:"#B9B8CE"}},toolbox:{iconStyle:{borderColor:tm}},dataZoom:{borderColor:"#71708A",textStyle:{color:tm},brushStyle:{color:"rgba(135,163,206,0.3)"},handleStyle:{color:"#353450",borderColor:"#C5CBE3"},moveHandleStyle:{color:"#B0B6C3",opacity:.3},fillerColor:"rgba(135,163,206,0.2)",emphasis:{handleStyle:{borderColor:"#91B7F2",color:"#4D587D"},moveHandleStyle:{color:"#636D9A",opacity:.7}},dataBackground:{lineStyle:{color:"#71708A",width:1},areaStyle:{color:"#71708A"}},selectedDataBackground:{lineStyle:{color:"#87A3CE"},areaStyle:{color:"#87A3CE"}}},visualMap:{textStyle:{color:tm}},timeline:{lineStyle:{color:tm},label:{color:tm},controlStyle:{color:tm,borderColor:tm}},calendar:{itemStyle:{color:em},dayLabel:{color:tm},monthLabel:{color:tm},yearLabel:{color:tm}},timeAxis:nm(),logAxis:nm(),valueAxis:nm(),categoryAxis:nm(),line:{symbol:"circle"},graph:{color:im},gauge:{title:{color:tm},axisLine:{lineStyle:{color:[[1,"rgba(207,212,219,0.2)"]]}},axisLabel:{color:tm},detail:{color:"#EEF1FA"}},candlestick:{itemStyle:{color:"#f64e56",color0:"#54ea92",borderColor:"#f64e56",borderColor0:"#54ea92"}}};rm.categoryAxis.splitLine.show=!1;var om=function(){function t(){}return t.prototype.normalizeQuery=function(t){var e={},n={},i={};if(G(t)){var r=Ho(t);e.mainType=r.main||null,e.subType=r.sub||null}else{var o=["Index","Name","Id"],a={name:1,dataIndex:1,dataType:1};R(t,(function(t,r){for(var s=!1,l=0;l<o.length;l++){var c=o[l],u=r.lastIndexOf(c);if(u>0&&u===r.length-c.length){var h=r.slice(0,u);"data"!==h&&(e.mainType=h,e[c.toLowerCase()]=t,s=!0)}}a.hasOwnProperty(r)&&(n[r]=t,s=!0),s||(i[r]=t)}))}return{cptQuery:e,dataQuery:n,otherQuery:i}},t.prototype.filter=function(t,e){var n=this.eventInfo;if(!n)return!0;var i=n.targetEl,r=n.packedEvent,o=n.model,a=n.view;if(!o||!a)return!0;var s=e.cptQuery,l=e.dataQuery;return c(s,o,"mainType")&&c(s,o,"subType")&&c(s,o,"index","componentIndex")&&c(s,o,"name")&&c(s,o,"id")&&c(l,r,"name")&&c(l,r,"dataIndex")&&c(l,r,"dataType")&&(!a.filterForExposedEvent||a.filterForExposedEvent(t,e.otherQuery,i,r));function c(t,e,n,i){return null==t[n]||e[i||n]===t[n]}},t.prototype.afterTrigger=function(){this.eventInfo=null},t}(),am=["symbol","symbolSize","symbolRotate","symbolOffset"],sm=am.concat(["symbolKeepAspect"]),lm={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,e){var n=t.getData();if(t.legendIcon&&n.setVisual("legendIcon",t.legendIcon),t.hasSymbolVisual){for(var i={},r={},o=!1,a=0;a<am.length;a++){var s=am[a],l=t.get(s);X(l)?(o=!0,r[s]=l):i[s]=l}if(i.symbol=i.symbol||t.defaultSymbol,n.setVisual(I({legendIcon:t.legendIcon||i.symbol,symbolKeepAspect:t.get("symbolKeepAspect")},i)),!e.isSeriesFiltered(t)){var c=H(r);return{dataEach:o?function(e,n){for(var i=t.getRawValue(n),o=t.getDataParams(n),a=0;a<c.length;a++){var s=c[a];e.setItemVisual(n,s,r[s](i,o))}}:null}}}}},cm={createOnAllSeries:!0,performRawSeries:!0,reset:function(t,e){if(t.hasSymbolVisual&&!e.isSeriesFiltered(t))return{dataEach:t.getData().hasItemOption?function(t,e){for(var n=t.getItemModel(e),i=0;i<sm.length;i++){var r=sm[i],o=n.getShallow(r,!0);null!=o&&t.setItemVisual(e,r,o)}}:null}}};function um(t,e,n){switch(n){case"color":return t.getItemVisual(e,"style")[t.getVisual("drawType")];case"opacity":return t.getItemVisual(e,"style").opacity;case"symbol":case"symbolSize":case"liftZ":return t.getItemVisual(e,n)}}function hm(t,e){switch(e){case"color":return t.getVisual("style")[t.getVisual("drawType")];case"opacity":return t.getVisual("style").opacity;case"symbol":case"symbolSize":case"liftZ":return t.getVisual(e)}}function dm(t,e,n,i){switch(n){case"color":t.ensureUniqueItemVisual(e,"style")[t.getVisual("drawType")]=i,t.setItemVisual(e,"colorFromPalette",!1);break;case"opacity":t.ensureUniqueItemVisual(e,"style").opacity=i;break;case"symbol":case"symbolSize":case"liftZ":t.setItemVisual(e,n,i)}}function pm(t,e){function n(e,n){var i=[];return e.eachComponent({mainType:"series",subType:t,query:n},(function(t){i.push(t.seriesIndex)})),i}R([[t+"ToggleSelect","toggleSelect"],[t+"Select","select"],[t+"UnSelect","unselect"]],(function(t){e(t[0],(function(e,i,r){e=I({},e),r.dispatchAction(I(e,{type:t[1],seriesIndex:n(i,e)}))}))}))}function fm(t,e,n,i,r){var o=t+e;n.isSilent(o)||i.eachComponent({mainType:"series",subType:"pie"},(function(t){for(var e=t.seriesIndex,i=t.option.selectedMap,a=r.selected,s=0;s<a.length;s++)if(a[s].seriesIndex===e){var l=t.getData(),c=To(l,r.fromActionPayload);n.trigger(o,{type:o,seriesId:t.id,name:Y(c)?l.getName(c[0]):l.getName(c),selected:G(i)?i:I({},i)})}}))}function gm(t,e,n){for(var i;t&&(!e(t)||(i=t,!n));)t=t.__hostTarget||t.parent;return i}var mm=Math.round(9*Math.random()),vm="function"==typeof Object.defineProperty,ym=function(){function t(){this._id="__ec_inner_"+mm++}return t.prototype.get=function(t){return this._guard(t)[this._id]},t.prototype.set=function(t,e){var n=this._guard(t);return vm?Object.defineProperty(n,this._id,{value:e,enumerable:!1,configurable:!0}):n[this._id]=e,this},t.prototype.delete=function(t){return!!this.has(t)&&(delete this._guard(t)[this._id],!0)},t.prototype.has=function(t){return!!this._guard(t)[this._id]},t.prototype._guard=function(t){if(t!==Object(t))throw TypeError("Value of WeakMap is not a non-null object.");return t},t}(),bm=_s.extend({type:"triangle",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var n=e.cx,i=e.cy,r=e.width/2,o=e.height/2;t.moveTo(n,i-o),t.lineTo(n+r,i+o),t.lineTo(n-r,i+o),t.closePath()}}),xm=_s.extend({type:"diamond",shape:{cx:0,cy:0,width:0,height:0},buildPath:function(t,e){var n=e.cx,i=e.cy,r=e.width/2,o=e.height/2;t.moveTo(n,i-o),t.lineTo(n+r,i),t.lineTo(n,i+o),t.lineTo(n-r,i),t.closePath()}}),_m=_s.extend({type:"pin",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,e){var n=e.x,i=e.y,r=e.width/5*3,o=Math.max(r,e.height),a=r/2,s=a*a/(o-a),l=i-o+a+s,c=Math.asin(s/a),u=Math.cos(c)*a,h=Math.sin(c),d=Math.cos(c),p=.6*a,f=.7*a;t.moveTo(n-u,l+s),t.arc(n,l,a,Math.PI-c,2*Math.PI+c),t.bezierCurveTo(n+u-h*p,l+s+d*p,n,i-f,n,i),t.bezierCurveTo(n,i-f,n-u+h*p,l+s+d*p,n-u,l+s),t.closePath()}}),wm=_s.extend({type:"arrow",shape:{x:0,y:0,width:0,height:0},buildPath:function(t,e){var n=e.height,i=e.width,r=e.x,o=e.y,a=i/3*2;t.moveTo(r,o),t.lineTo(r+a,o+n),t.lineTo(r,o+n/4*3),t.lineTo(r-a,o+n),t.lineTo(r,o),t.closePath()}}),Sm={line:function(t,e,n,i,r){r.x1=t,r.y1=e+i/2,r.x2=t+n,r.y2=e+i/2},rect:function(t,e,n,i,r){r.x=t,r.y=e,r.width=n,r.height=i},roundRect:function(t,e,n,i,r){r.x=t,r.y=e,r.width=n,r.height=i,r.r=Math.min(n,i)/4},square:function(t,e,n,i,r){var o=Math.min(n,i);r.x=t,r.y=e,r.width=o,r.height=o},circle:function(t,e,n,i,r){r.cx=t+n/2,r.cy=e+i/2,r.r=Math.min(n,i)/2},diamond:function(t,e,n,i,r){r.cx=t+n/2,r.cy=e+i/2,r.width=n,r.height=i},pin:function(t,e,n,i,r){r.x=t+n/2,r.y=e+i/2,r.width=n,r.height=i},arrow:function(t,e,n,i,r){r.x=t+n/2,r.y=e+i/2,r.width=n,r.height=i},triangle:function(t,e,n,i,r){r.cx=t+n/2,r.cy=e+i/2,r.width=n,r.height=i}},Cm={};R({line:Fc,rect:Ls,roundRect:Ls,square:Ls,circle:pc,diamond:xm,pin:_m,arrow:wm,triangle:bm},(function(t,e){Cm[e]=new t}));var km=_s.extend({type:"symbol",shape:{symbolType:"",x:0,y:0,width:0,height:0},calculateTextPosition:function(t,e,n){var i=_r(t,e,n),r=this.shape;return r&&"pin"===r.symbolType&&"inside"===e.position&&(i.y=n.y+.4*n.height),i},buildPath:function(t,e,n){var i=e.symbolType;if("none"!==i){var r=Cm[i];r||(r=Cm[i="rect"]),Sm[i](e.x,e.y,e.width,e.height,r.shape),r.buildPath(t,r.shape,n)}}});function Am(t,e){if("image"!==this.type){var n=this.style;this.__isEmptyBrush?(n.stroke=t,n.fill=e||"#fff",n.lineWidth=2):"line"===this.shape.symbolType?n.stroke=t:n.fill=t,this.markRedraw()}}function Mm(t,e,n,i,r,o,a){var s,l=0===t.indexOf("empty");return l&&(t=t.substr(5,1).toLowerCase()+t.substr(6)),(s=0===t.indexOf("image://")?_u(t.slice(8),new Re(e,n,i,r),a?"center":"cover"):0===t.indexOf("path://")?xu(t.slice(7),{},new Re(e,n,i,r),a?"center":"cover"):new km({shape:{symbolType:t,x:e,y:n,width:i,height:r}})).__isEmptyBrush=l,s.setColor=Am,o&&s.setColor(o),s}function Tm(t){return Y(t)||(t=[+t,+t]),[t[0]||0,t[1]||0]}function Im(t,e){if(null!=t)return Y(t)||(t=[t,t]),[jr(t[0],e[0])||0,jr(rt(t[1],t[0]),e[1])||0]}function Em(t){return isFinite(t)}function Om(t,e,n){for(var i="radial"===e.type?function(t,e,n){var i=n.width,r=n.height,o=Math.min(i,r),a=null==e.x?.5:e.x,s=null==e.y?.5:e.y,l=null==e.r?.5:e.r;return e.global||(a=a*i+n.x,s=s*r+n.y,l*=o),a=Em(a)?a:.5,s=Em(s)?s:.5,l=l>=0&&Em(l)?l:.5,t.createRadialGradient(a,s,0,a,s,l)}(t,e,n):function(t,e,n){var i=null==e.x?0:e.x,r=null==e.x2?1:e.x2,o=null==e.y?0:e.y,a=null==e.y2?0:e.y2;return e.global||(i=i*n.width+n.x,r=r*n.width+n.x,o=o*n.height+n.y,a=a*n.height+n.y),i=Em(i)?i:0,r=Em(r)?r:1,o=Em(o)?o:0,a=Em(a)?a:0,t.createLinearGradient(i,o,r,a)}(t,e,n),r=e.colorStops,o=0;o<r.length;o++)i.addColorStop(r[o].offset,r[o].color);return i}function Dm(t){return parseInt(t,10)}function Lm(t,e,n){var i=["width","height"][e],r=["clientWidth","clientHeight"][e],o=["paddingLeft","paddingTop"][e],a=["paddingRight","paddingBottom"][e];if(null!=n[i]&&"auto"!==n[i])return parseFloat(n[i]);var s=document.defaultView.getComputedStyle(t);return(t[r]||Dm(s[i])||Dm(t.style[i]))-(Dm(s[o])||0)-(Dm(s[a])||0)|0}function Pm(t){var e,n,i=t.style,r=i.lineDash&&i.lineWidth>0&&(e=i.lineDash,n=i.lineWidth,e&&"solid"!==e&&n>0?"dashed"===e?[4*n,2*n]:"dotted"===e?[n]:U(e)?[e]:Y(e)?e:null:null),o=i.lineDashOffset;if(r){var a=i.strokeNoScale&&t.getLineScale?t.getLineScale():1;a&&1!==a&&(r=B(r,(function(t){return t/a})),o/=a)}return[r,o]}var Nm=new es(!0);function Rm(t){var e=t.stroke;return!(null==e||"none"===e||!(t.lineWidth>0))}function Bm(t){return"string"==typeof t&&"none"!==t}function zm(t){var e=t.fill;return null!=e&&"none"!==e}function Fm(t,e){if(null!=e.fillOpacity&&1!==e.fillOpacity){var n=t.globalAlpha;t.globalAlpha=e.fillOpacity*e.opacity,t.fill(),t.globalAlpha=n}else t.fill()}function Vm(t,e){if(null!=e.strokeOpacity&&1!==e.strokeOpacity){var n=t.globalAlpha;t.globalAlpha=e.strokeOpacity*e.opacity,t.stroke(),t.globalAlpha=n}else t.stroke()}function Hm(t,e,n){var i=Jo(e.image,e.__image,n);if(ea(i)){var r=t.createPattern(i,e.repeat||"repeat");if("function"==typeof DOMMatrix&&r&&r.setTransform){var o=new DOMMatrix;o.translateSelf(e.x||0,e.y||0),o.rotateSelf(0,0,(e.rotation||0)*wt),o.scaleSelf(e.scaleX||1,e.scaleY||1),r.setTransform(o)}return r}}var Wm=["shadowBlur","shadowOffsetX","shadowOffsetY"],jm=[["lineCap","butt"],["lineJoin","miter"],["miterLimit",10]];function Ym(t,e,n,i,r){var o=!1;if(!i&&e===(n=n||{}))return!1;if(i||e.opacity!==n.opacity){qm(t,r),o=!0;var a=Math.max(Math.min(e.opacity,1),0);t.globalAlpha=isNaN(a)?ga.opacity:a}(i||e.blend!==n.blend)&&(o||(qm(t,r),o=!0),t.globalCompositeOperation=e.blend||ga.blend);for(var s=0;s<Wm.length;s++){var l=Wm[s];(i||e[l]!==n[l])&&(o||(qm(t,r),o=!0),t[l]=t.dpr*(e[l]||0))}return(i||e.shadowColor!==n.shadowColor)&&(o||(qm(t,r),o=!0),t.shadowColor=e.shadowColor||ga.shadowColor),o}function Xm(t,e,n,i,r){var o=Um(e,r.inHover),a=i?null:n&&Um(n,r.inHover)||{};if(o===a)return!1;var s=Ym(t,o,a,i,r);if((i||o.fill!==a.fill)&&(s||(qm(t,r),s=!0),Bm(o.fill)&&(t.fillStyle=o.fill)),(i||o.stroke!==a.stroke)&&(s||(qm(t,r),s=!0),Bm(o.stroke)&&(t.strokeStyle=o.stroke)),(i||o.opacity!==a.opacity)&&(s||(qm(t,r),s=!0),t.globalAlpha=null==o.opacity?1:o.opacity),e.hasStroke()){var l=o.lineWidth/(o.strokeNoScale&&e.getLineScale?e.getLineScale():1);t.lineWidth!==l&&(s||(qm(t,r),s=!0),t.lineWidth=l)}for(var c=0;c<jm.length;c++){var u=jm[c],h=u[0];(i||o[h]!==a[h])&&(s||(qm(t,r),s=!0),t[h]=o[h]||u[1])}return s}function Gm(t,e){var n=e.transform,i=t.dpr||1;n?t.setTransform(i*n[0],i*n[1],i*n[2],i*n[3],i*n[4],i*n[5]):t.setTransform(i,0,0,i,0,0)}function qm(t,e){e.batchFill&&t.fill(),e.batchStroke&&t.stroke(),e.batchFill="",e.batchStroke=""}function Um(t,e){return e&&t.__hoverStyle||t.style}function $m(t,e){Zm(t,e,{inHover:!1,viewWidth:0,viewHeight:0},!0)}function Zm(t,e,n,i){var r=e.transform;if(!e.shouldBePainted(n.viewWidth,n.viewHeight,!1,!1))return e.__dirty&=-2,void(e.__isRendered=!1);var o=e.__clipPaths,a=n.prevElClipPaths,s=!1,c=!1;if(a&&!function(t,e){if(t===e||!t&&!e)return!1;if(!t||!e||t.length!==e.length)return!0;for(var n=0;n<t.length;n++)if(t[n]!==e[n])return!0;return!1}(o,a)||(a&&a.length&&(qm(t,n),t.restore(),c=s=!0,n.prevElClipPaths=null,n.allClipped=!1,n.prevEl=null),o&&o.length&&(qm(t,n),t.save(),function(t,e,n){for(var i=!1,r=0;r<t.length;r++){var o=t[r];i=i||o.isZeroArea(),Gm(e,o),e.beginPath(),o.buildPath(e,o.shape),e.clip()}n.allClipped=i}(o,t,n),s=!0),n.prevElClipPaths=o),n.allClipped)e.__isRendered=!1;else{e.beforeBrush&&e.beforeBrush(),e.innerBeforeBrush();var u=n.prevEl;u||(c=s=!0);var h,d,p=e instanceof _s&&e.autoBatch&&function(t){var e=zm(t),n=Rm(t);return!(t.lineDash||!(+e^+n)||e&&"string"!=typeof t.fill||n&&"string"!=typeof t.stroke||t.strokePercent<1||t.strokeOpacity<1||t.fillOpacity<1)}(e.style);s||(h=r,d=u.transform,h&&d?h[0]!==d[0]||h[1]!==d[1]||h[2]!==d[2]||h[3]!==d[3]||h[4]!==d[4]||h[5]!==d[5]:h||d)?(qm(t,n),Gm(t,e)):p||qm(t,n);var f=Um(e,n.inHover);e instanceof _s?(1!==n.lastDrawType&&(c=!0,n.lastDrawType=1),Xm(t,e,u,c,n),p&&(n.batchFill||n.batchStroke)||t.beginPath(),function(t,e,n,i){var r,o=Rm(n),a=zm(n),s=n.strokePercent,l=s<1,c=!e.path;e.silent&&!l||!c||e.createPathProxy();var u=e.path||Nm,h=e.__dirty;if(!i){var d=n.fill,p=n.stroke,f=a&&!!d.colorStops,g=o&&!!p.colorStops,m=a&&!!d.image,v=o&&!!p.image,y=void 0,b=void 0,x=void 0,_=void 0,w=void 0;(f||g)&&(w=e.getBoundingRect()),f&&(y=h?Om(t,d,w):e.__canvasFillGradient,e.__canvasFillGradient=y),g&&(b=h?Om(t,p,w):e.__canvasStrokeGradient,e.__canvasStrokeGradient=b),m&&(x=h||!e.__canvasFillPattern?Hm(t,d,e):e.__canvasFillPattern,e.__canvasFillPattern=x),v&&(_=h||!e.__canvasStrokePattern?Hm(t,p,e):e.__canvasStrokePattern,e.__canvasStrokePattern=x),f?t.fillStyle=y:m&&(x?t.fillStyle=x:a=!1),g?t.strokeStyle=b:v&&(_?t.strokeStyle=_:o=!1)}var S,C,k=e.getGlobalScale();u.setScale(k[0],k[1],e.segmentIgnoreThreshold),t.setLineDash&&n.lineDash&&(S=(r=Pm(e))[0],C=r[1]);var A=!0;(c||4&h)&&(u.setDPR(t.dpr),l?u.setContext(null):(u.setContext(t),A=!1),u.reset(),e.buildPath(u,e.shape,i),u.toStatic(),e.pathUpdated()),A&&u.rebuildPath(t,l?s:1),S&&(t.setLineDash(S),t.lineDashOffset=C),i||(n.strokeFirst?(o&&Vm(t,n),a&&Fm(t,n)):(a&&Fm(t,n),o&&Vm(t,n))),S&&t.setLineDash([])}(t,e,f,p),p&&(n.batchFill=f.fill||"",n.batchStroke=f.stroke||"")):e instanceof Ss?(3!==n.lastDrawType&&(c=!0,n.lastDrawType=3),Xm(t,e,u,c,n),function(t,e,n){var i,r=n.text;if(null!=r&&(r+=""),r){t.font=n.font||l,t.textAlign=n.textAlign,t.textBaseline=n.textBaseline;var o=void 0,a=void 0;t.setLineDash&&n.lineDash&&(o=(i=Pm(e))[0],a=i[1]),o&&(t.setLineDash(o),t.lineDashOffset=a),n.strokeFirst?(Rm(n)&&t.strokeText(r,n.x,n.y),zm(n)&&t.fillText(r,n.x,n.y)):(zm(n)&&t.fillText(r,n.x,n.y),Rm(n)&&t.strokeText(r,n.x,n.y)),o&&t.setLineDash([])}}(t,e,f)):e instanceof As?(2!==n.lastDrawType&&(c=!0,n.lastDrawType=2),function(t,e,n,i,r){Ym(t,Um(e,r.inHover),n&&Um(n,r.inHover),i,r)}(t,e,u,c,n),function(t,e,n){var i=e.__image=Jo(n.image,e.__image,e,e.onload);if(i&&ea(i)){var r=n.x||0,o=n.y||0,a=e.getWidth(),s=e.getHeight(),l=i.width/i.height;if(null==a&&null!=s?a=s*l:null==s&&null!=a?s=a/l:null==a&&null==s&&(a=i.width,s=i.height),n.sWidth&&n.sHeight){var c=n.sx||0,u=n.sy||0;t.drawImage(i,c,u,n.sWidth,n.sHeight,r,o,a,s)}else if(n.sx&&n.sy){var h=a-(c=n.sx),d=s-(u=n.sy);t.drawImage(i,c,u,h,d,r,o,a,s)}else t.drawImage(i,r,o,a,s)}}(t,e,f)):e.getTemporalDisplayables&&(4!==n.lastDrawType&&(c=!0,n.lastDrawType=4),function(t,e,n){var i=e.getDisplayables(),r=e.getTemporalDisplayables();t.save();var o,a,s={prevElClipPaths:null,prevEl:null,allClipped:!1,viewWidth:n.viewWidth,viewHeight:n.viewHeight,inHover:n.inHover};for(o=e.getCursor(),a=i.length;o<a;o++)(u=i[o]).beforeBrush&&u.beforeBrush(),u.innerBeforeBrush(),Zm(t,u,s,o===a-1),u.innerAfterBrush(),u.afterBrush&&u.afterBrush(),s.prevEl=u;for(var l=0,c=r.length;l<c;l++){var u;(u=r[l]).beforeBrush&&u.beforeBrush(),u.innerBeforeBrush(),Zm(t,u,s,l===c-1),u.innerAfterBrush(),u.afterBrush&&u.afterBrush(),s.prevEl=u}e.clearTemporalDisplayables(),e.notClear=!0,t.restore()}(t,e,n)),p&&i&&qm(t,n),e.innerAfterBrush(),e.afterBrush&&e.afterBrush(),n.prevEl=e,e.__dirty=0,e.__isRendered=!0}}var Km=new ym,Qm=new Ln(100),Jm=["symbol","symbolSize","symbolKeepAspect","color","backgroundColor","dashArrayX","dashArrayY","maxTileWidth","maxTileHeight"];function tv(t,e){if("none"===t)return null;var n=e.getDevicePixelRatio(),i=e.getZr(),r="svg"===i.painter.type;t.dirty&&Km.delete(t);var o=Km.get(t);if(o)return o;var a=E(t,{symbol:"rect",symbolSize:1,symbolKeepAspect:!0,color:"rgba(0, 0, 0, 0.2)",backgroundColor:null,dashArrayX:5,dashArrayY:5,rotation:0,maxTileWidth:512,maxTileHeight:512});"none"===a.backgroundColor&&(a.backgroundColor=null);var s={repeat:"repeat"};return function(t){for(var e,o=[n],s=!0,l=0;l<Jm.length;++l){var c=a[Jm[l]];if(null!=c&&!Y(c)&&!G(c)&&!U(c)&&"boolean"!=typeof c){s=!1;break}o.push(c)}if(s){e=o.join(",")+(r?"-svg":"");var h=Qm.get(e);h&&(r?t.svgElement=h:t.image=h)}var d,p=nv(a.dashArrayX),f=function(t){if(!t||"object"==typeof t&&0===t.length)return[0,0];if(U(t)){var e=Math.ceil(t);return[e,e]}var n=B(t,(function(t){return Math.ceil(t)}));return t.length%2?n.concat(n):n}(a.dashArrayY),g=ev(a.symbol),m=B(p,(function(t){return iv(t)})),v=iv(f),y=!r&&u.createCanvas(),b=r&&{tag:"g",attrs:{},key:"dcl",children:[]},x=function(){for(var t=1,e=0,n=m.length;e<n;++e)t=ho(t,m[e]);var i=1;for(e=0,n=g.length;e<n;++e)i=ho(i,g[e].length);t*=i;var r=v*m.length*g.length;return{width:Math.max(1,Math.min(t,a.maxTileWidth)),height:Math.max(1,Math.min(r,a.maxTileHeight))}}();y&&(y.width=x.width*n,y.height=x.height*n,d=y.getContext("2d")),function(){d&&(d.clearRect(0,0,y.width,y.height),a.backgroundColor&&(d.fillStyle=a.backgroundColor,d.fillRect(0,0,y.width,y.height)));for(var t=0,e=0;e<f.length;++e)t+=f[e];if(!(t<=0))for(var o=-v,s=0,l=0,c=0;o<x.height;){if(s%2==0){for(var u=l/2%g.length,h=0,m=0,_=0;h<2*x.width;){var w=0;for(e=0;e<p[c].length;++e)w+=p[c][e];if(w<=0)break;if(m%2==0){var S=.5*(1-a.symbolSize),C=h+p[c][m]*S,k=o+f[s]*S,A=p[c][m]*a.symbolSize,M=f[s]*a.symbolSize,T=_/2%g[u].length;I(C,k,A,M,g[u][T])}h+=p[c][m],++_,++m===p[c].length&&(m=0)}++c===p.length&&(c=0)}o+=f[s],++l,++s===f.length&&(s=0)}function I(t,e,o,s,l){var c=r?1:n,u=Mm(l,t*c,e*c,o*c,s*c,a.color,a.symbolKeepAspect);if(r){var h=i.painter.renderOneToVNode(u);h&&b.children.push(h)}else $m(d,u)}}(),s&&Qm.put(e,y||b),t.image=y,t.svgElement=b,t.svgWidth=x.width,t.svgHeight=x.height}(s),s.rotation=a.rotation,s.scaleX=s.scaleY=r?1:1/n,Km.set(t,s),t.dirty=!1,s}function ev(t){if(!t||0===t.length)return[["rect"]];if(G(t))return[[t]];for(var e=!0,n=0;n<t.length;++n)if(!G(t[n])){e=!1;break}if(e)return ev([t]);var i=[];for(n=0;n<t.length;++n)G(t[n])?i.push([t[n]]):i.push(t[n]);return i}function nv(t){if(!t||0===t.length)return[[0,0]];if(U(t))return[[r=Math.ceil(t),r]];for(var e=!0,n=0;n<t.length;++n)if(!U(t[n])){e=!1;break}if(e)return nv([t]);var i=[];for(n=0;n<t.length;++n)if(U(t[n])){var r=Math.ceil(t[n]);i.push([r,r])}else(r=B(t[n],(function(t){return Math.ceil(t)}))).length%2==1?i.push(r.concat(r)):i.push(r);return i}function iv(t){for(var e=0,n=0;n<t.length;++n)e+=t[n];return t.length%2==1?2*e:e}var rv=new Ut,ov={};function av(t){return ov[t]}var sv=2e3,lv=4500,cv={PROCESSOR:{FILTER:1e3,SERIES_FILTER:800,STATISTIC:5e3},VISUAL:{LAYOUT:1e3,PROGRESSIVE_LAYOUT:1100,GLOBAL:sv,CHART:3e3,POST_CHART_LAYOUT:4600,COMPONENT:4e3,BRUSH:5e3,CHART_ITEM:lv,ARIA:6e3,DECAL:7e3}},uv="__flagInMainProcess",hv="__pendingUpdate",dv="__needsUpdateStatus",pv=/^[a-zA-Z0-9_]+$/,fv="__connectUpdateStatus";function gv(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(!this.isDisposed())return vv(this,t,e);Hv(this.id)}}function mv(t){return function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return vv(this,t,e)}}function vv(t,e,n){return n[0]=n[0]&&n[0].toLowerCase(),Ut.prototype[e].apply(t,n)}var yv,bv,xv,_v,wv,Sv,Cv,kv,Av,Mv,Tv,Iv,Ev,Ov,Dv,Lv,Pv,Nv,Rv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e}(Ut),Bv=Rv.prototype;Bv.on=mv("on"),Bv.off=mv("off");var zv=function(t){function e(e,n,i){var r=t.call(this,new om)||this;r._chartsViews=[],r._chartsMap={},r._componentsViews=[],r._componentsMap={},r._pendingActions=[],i=i||{},G(n)&&(n=qv[n]),r._dom=e;i.ssr&&Vr((function(t){var e=$s(t),n=e.dataIndex;if(null!=n){var i=mt();return i.set("series_index",e.seriesIndex),i.set("data_index",n),e.ssrType&&i.set("ssr_type",e.ssrType),i}}));var o=r._zr=Br(e,{renderer:i.renderer||"canvas",devicePixelRatio:i.devicePixelRatio,width:i.width,height:i.height,ssr:i.ssr,useDirtyRect:rt(i.useDirtyRect,!1),useCoarsePointer:rt(i.useCoarsePointer,"auto"),pointerSize:i.pointerSize});r._ssr=i.ssr,r._throttledZrFlush=Cg(W(o.flush,o),17),(n=A(n))&&Mp(n,!0),r._theme=n,r._locale=function(t){if(G(t)){var e=wh[t.toUpperCase()]||{};return t===bh||t===xh?A(e):M(A(e),A(wh.EN),!1)}return M(A(t),A(wh.EN),!1)}(i.locale||Ch),r._coordSysMgr=new op;var a=r._api=Dv(r);function s(t,e){return t.__prio-e.__prio}return Ke(Gv,s),Ke(Yv,s),r._scheduler=new Bg(r,a,Yv,Gv),r._messageCenter=new Rv,r._initEvents(),r.resize=W(r.resize,r),o.animation.on("frame",r._onframe,r),Mv(o,r),Tv(o,r),ht(r),r}return n(e,t),e.prototype._onframe=function(){if(!this._disposed){Nv(this);var t=this._scheduler;if(this[hv]){var e=this[hv].silent;this[uv]=!0;try{yv(this),_v.update.call(this,null,this[hv].updateParams)}catch(t){throw this[uv]=!1,this[hv]=null,t}this._zr.flush(),this[uv]=!1,this[hv]=null,kv.call(this,e),Av.call(this,e)}else if(t.unfinished){var n=1,i=this._model,r=this._api;t.unfinished=!1;do{var o=+new Date;t.performSeriesTasks(i),t.performDataProcessorTasks(i),Sv(this,i),t.performVisualTasks(i),Ov(this,this._model,r,"remain",{}),n-=+new Date-o}while(n>0&&t.unfinished);t.unfinished||this._zr.flush()}}},e.prototype.getDom=function(){return this._dom},e.prototype.getId=function(){return this.id},e.prototype.getZr=function(){return this._zr},e.prototype.isSSR=function(){return this._ssr},e.prototype.setOption=function(t,e,n){if(!this[uv])if(this._disposed)Hv(this.id);else{var i,r,o;if($(e)&&(n=e.lazyUpdate,i=e.silent,r=e.replaceMerge,o=e.transition,e=e.notMerge),this[uv]=!0,!this._model||e){var a=new sp(this._api),s=this._theme,l=this._model=new Qd;l.scheduler=this._scheduler,l.ssr=this._ssr,l.init(null,null,null,s,this._locale,a)}this._model.setOption(t,{replaceMerge:r},Xv);var c={seriesTransition:o,optionChanged:!0};if(n)this[hv]={silent:i,updateParams:c},this[uv]=!1,this.getZr().wakeUp();else{try{yv(this),_v.update.call(this,null,c)}catch(t){throw this[hv]=null,this[uv]=!1,t}this._ssr||this._zr.flush(),this[hv]=null,this[uv]=!1,kv.call(this,i),Av.call(this,i)}}},e.prototype.setTheme=function(){},e.prototype.getModel=function(){return this._model},e.prototype.getOption=function(){return this._model&&this._model.getOption()},e.prototype.getWidth=function(){return this._zr.getWidth()},e.prototype.getHeight=function(){return this._zr.getHeight()},e.prototype.getDevicePixelRatio=function(){return this._zr.painter.dpr||r.hasGlobalWindow&&window.devicePixelRatio||1},e.prototype.getRenderedCanvas=function(t){return this.renderToCanvas(t)},e.prototype.renderToCanvas=function(t){return t=t||{},this._zr.painter.getRenderedCanvas({backgroundColor:t.backgroundColor||this._model.get("backgroundColor"),pixelRatio:t.pixelRatio||this.getDevicePixelRatio()})},e.prototype.renderToSVGString=function(t){return t=t||{},this._zr.painter.renderToString({useViewBox:t.useViewBox})},e.prototype.getSvgDataURL=function(){if(r.svgSupported){var t=this._zr;return R(t.storage.getDisplayList(),(function(t){t.stopAnimation(null,!0)})),t.painter.toDataURL()}},e.prototype.getDataURL=function(t){if(!this._disposed){var e=(t=t||{}).excludeComponents,n=this._model,i=[],r=this;R(e,(function(t){n.eachComponent({mainType:t},(function(t){var e=r._componentsMap[t.__viewId];e.group.ignore||(i.push(e),e.group.ignore=!0)}))}));var o="svg"===this._zr.painter.getType()?this.getSvgDataURL():this.renderToCanvas(t).toDataURL("image/"+(t&&t.type||"png"));return R(i,(function(t){t.group.ignore=!1})),o}Hv(this.id)},e.prototype.getConnectedDataURL=function(t){if(!this._disposed){var e="svg"===t.type,n=this.group,i=Math.min,r=Math.max,o=1/0;if(Zv[n]){var a=o,s=o,l=-1/0,c=-1/0,h=[],d=t&&t.pixelRatio||this.getDevicePixelRatio();R($v,(function(o,u){if(o.group===n){var d=e?o.getZr().painter.getSvgDom().innerHTML:o.renderToCanvas(A(t)),p=o.getDom().getBoundingClientRect();a=i(p.left,a),s=i(p.top,s),l=r(p.right,l),c=r(p.bottom,c),h.push({dom:d,left:p.left,top:p.top})}}));var p=(l*=d)-(a*=d),f=(c*=d)-(s*=d),g=u.createCanvas(),m=Br(g,{renderer:e?"svg":"canvas"});if(m.resize({width:p,height:f}),e){var v="";return R(h,(function(t){var e=t.left-a,n=t.top-s;v+='<g transform="translate('+e+","+n+')">'+t.dom+"</g>"})),m.painter.getSvgRoot().innerHTML=v,t.connectedBackgroundColor&&m.painter.setBackgroundColor(t.connectedBackgroundColor),m.refreshImmediately(),m.painter.toDataURL()}return t.connectedBackgroundColor&&m.add(new Ls({shape:{x:0,y:0,width:p,height:f},style:{fill:t.connectedBackgroundColor}})),R(h,(function(t){var e=new As({style:{x:t.left*d-a,y:t.top*d-s,image:t.dom}});m.add(e)})),m.refreshImmediately(),g.toDataURL("image/"+(t&&t.type||"png"))}return this.getDataURL(t)}Hv(this.id)},e.prototype.convertToPixel=function(t,e){return wv(this,"convertToPixel",t,e)},e.prototype.convertFromPixel=function(t,e){return wv(this,"convertFromPixel",t,e)},e.prototype.containPixel=function(t,e){var n;if(!this._disposed)return R(Oo(this._model,t),(function(t,i){i.indexOf("Models")>=0&&R(t,(function(t){var r=t.coordinateSystem;if(r&&r.containPoint)n=n||!!r.containPoint(e);else if("seriesModels"===i){var o=this._chartsMap[t.__viewId];o&&o.containPoint&&(n=n||o.containPoint(e,t))}}),this)}),this),!!n;Hv(this.id)},e.prototype.getVisual=function(t,e){var n=Oo(this._model,t,{defaultMainType:"series"}),i=n.seriesModel.getData(),r=n.hasOwnProperty("dataIndexInside")?n.dataIndexInside:n.hasOwnProperty("dataIndex")?i.indexOfRawIndex(n.dataIndex):null;return null!=r?um(i,r,e):hm(i,e)},e.prototype.getViewOfComponentModel=function(t){return this._componentsMap[t.__viewId]},e.prototype.getViewOfSeriesModel=function(t){return this._chartsMap[t.__viewId]},e.prototype._initEvents=function(){var t,e,n,i=this;R(Vv,(function(t){var e=function(e){var n,r=i.getModel(),o=e.target;if("globalout"===t?n={}:o&&gm(o,(function(t){var e=$s(t);if(e&&null!=e.dataIndex){var i=e.dataModel||r.getSeriesByIndex(e.seriesIndex);return n=i&&i.getDataParams(e.dataIndex,e.dataType,o)||{},!0}if(e.eventData)return n=I({},e.eventData),!0}),!0),n){var a=n.componentType,s=n.componentIndex;"markLine"!==a&&"markPoint"!==a&&"markArea"!==a||(a="series",s=n.seriesIndex);var l=a&&null!=s&&r.getComponent(a,s),c=l&&i["series"===l.mainType?"_chartsMap":"_componentsMap"][l.__viewId];n.event=e,n.type=t,i._$eventProcessor.eventInfo={targetEl:o,packedEvent:n,model:l,view:c},i.trigger(t,n)}};e.zrEventfulCallAtLast=!0,i._zr.on(t,e,i)})),R(jv,(function(t,e){i._messageCenter.on(e,(function(t){this.trigger(e,t)}),i)})),R(["selectchanged"],(function(t){i._messageCenter.on(t,(function(e){this.trigger(t,e)}),i)})),t=this._messageCenter,e=this,n=this._api,t.on("selectchanged",(function(t){var i=n.getModel();t.isFromClick?(fm("map","selectchanged",e,i,t),fm("pie","selectchanged",e,i,t)):"select"===t.fromAction?(fm("map","selected",e,i,t),fm("pie","selected",e,i,t)):"unselect"===t.fromAction&&(fm("map","unselected",e,i,t),fm("pie","unselected",e,i,t))}))},e.prototype.isDisposed=function(){return this._disposed},e.prototype.clear=function(){this._disposed?Hv(this.id):this.setOption({series:[]},!0)},e.prototype.dispose=function(){if(this._disposed)Hv(this.id);else{this._disposed=!0,this.getDom()&&Ro(this.getDom(),Jv,"");var t=this,e=t._api,n=t._model;R(t._componentsViews,(function(t){t.dispose(n,e)})),R(t._chartsViews,(function(t){t.dispose(n,e)})),t._zr.dispose(),t._dom=t._model=t._chartsMap=t._componentsMap=t._chartsViews=t._componentsViews=t._scheduler=t._api=t._zr=t._throttledZrFlush=t._theme=t._coordSysMgr=t._messageCenter=null,delete $v[t.id]}},e.prototype.resize=function(t){if(!this[uv])if(this._disposed)Hv(this.id);else{this._zr.resize(t);var e=this._model;if(this._loadingFX&&this._loadingFX.resize(),e){var n=e.resetOption("media"),i=t&&t.silent;this[hv]&&(null==i&&(i=this[hv].silent),n=!0,this[hv]=null),this[uv]=!0;try{n&&yv(this),_v.update.call(this,{type:"resize",animation:I({duration:0},t&&t.animation)})}catch(t){throw this[uv]=!1,t}this[uv]=!1,kv.call(this,i),Av.call(this,i)}}},e.prototype.showLoading=function(t,e){if(this._disposed)Hv(this.id);else if($(t)&&(e=t,t=""),t=t||"default",this.hideLoading(),Uv[t]){var n=Uv[t](this._api,e),i=this._zr;this._loadingFX=n,i.add(n)}},e.prototype.hideLoading=function(){this._disposed?Hv(this.id):(this._loadingFX&&this._zr.remove(this._loadingFX),this._loadingFX=null)},e.prototype.makeActionFromEvent=function(t){var e=I({},t);return e.type=jv[t.type],e},e.prototype.dispatchAction=function(t,e){if(this._disposed)Hv(this.id);else if($(e)||(e={silent:!!e}),Wv[t.type]&&this._model)if(this[uv])this._pendingActions.push(t);else{var n=e.silent;Cv.call(this,t,n);var i=e.flush;i?this._zr.flush():!1!==i&&r.browser.weChat&&this._throttledZrFlush(),kv.call(this,n),Av.call(this,n)}},e.prototype.updateLabelLayout=function(){rv.trigger("series:layoutlabels",this._model,this._api,{updatedSeries:[]})},e.prototype.appendData=function(t){if(this._disposed)Hv(this.id);else{var e=t.seriesIndex;this.getModel().getSeriesByIndex(e).appendData(t),this._scheduler.unfinished=!0,this.getZr().wakeUp()}},e.internalField=function(){function t(t){t.clearColorPalette(),t.eachSeries((function(t){t.clearColorPalette()}))}function e(t){for(var e=[],n=t.currentStates,i=0;i<n.length;i++){var r=n[i];"emphasis"!==r&&"blur"!==r&&"select"!==r&&e.push(r)}t.selected&&t.states.select&&e.push("select"),2===t.hoverState&&t.states.emphasis?e.push("emphasis"):1===t.hoverState&&t.states.blur&&e.push("blur"),t.useStates(e)}function i(t,e){if(!t.preventAutoZ){var n=t.get("z")||0,i=t.get("zlevel")||0;e.eachRendered((function(t){return o(t,n,i,-1/0),!0}))}}function o(t,e,n,i){var r=t.getTextContent(),a=t.getTextGuideLine();if(t.isGroup)for(var s=t.childrenRef(),l=0;l<s.length;l++)i=Math.max(o(s[l],e,n,i),i);else t.z=e,t.zlevel=n,i=Math.max(t.z2,i);if(r&&(r.z=e,r.zlevel=n,isFinite(i)&&(r.z2=i+2)),a){var c=t.textGuideLineConfig;a.z=e,a.zlevel=n,isFinite(i)&&(a.z2=i+(c&&c.showAbove?1:-1))}return i}function a(t,e){e.eachRendered((function(t){if(!lu(t)){var e=t.getTextContent(),n=t.getTextGuideLine();t.stateTransition&&(t.stateTransition=null),e&&e.stateTransition&&(e.stateTransition=null),n&&n.stateTransition&&(n.stateTransition=null),t.hasState()?(t.prevStates=t.currentStates,t.clearStates()):t.prevStates&&(t.prevStates=null)}}))}function s(t,n){var i=t.getModel("stateAnimation"),r=t.isAnimationEnabled(),o=i.get("duration"),a=o>0?{duration:o,delay:i.get("delay"),easing:i.get("easing")}:null;n.eachRendered((function(t){if(t.states&&t.states.emphasis){if(lu(t))return;if(t instanceof _s&&function(t){var e=Js(t);e.normalFill=t.style.fill,e.normalStroke=t.style.stroke;var n=t.states.select||{};e.selectFill=n.style&&n.style.fill||null,e.selectStroke=n.style&&n.style.stroke||null}(t),t.__dirty){var n=t.prevStates;n&&t.useStates(n)}if(r){t.stateTransition=a;var i=t.getTextContent(),o=t.getTextGuideLine();i&&(i.stateTransition=a),o&&(o.stateTransition=a)}t.__dirty&&e(t)}}))}yv=function(t){var e=t._scheduler;e.restorePipelines(t._model),e.prepareStageTasks(),bv(t,!0),bv(t,!1),e.plan()},bv=function(t,e){for(var n=t._model,i=t._scheduler,r=e?t._componentsViews:t._chartsViews,o=e?t._componentsMap:t._chartsMap,a=t._zr,s=t._api,l=0;l<r.length;l++)r[l].__alive=!1;function c(t){var l=t.__requireNewView;t.__requireNewView=!1;var c="_ec_"+t.id+"_"+t.type,u=!l&&o[c];if(!u){var h=Ho(t.type);(u=new(e?hg.getClass(h.main,h.sub):gg.getClass(h.sub))).init(n,s),o[c]=u,r.push(u),a.add(u.group)}t.__viewId=u.__id=c,u.__alive=!0,u.__model=t,u.group.__ecComponentInfo={mainType:t.mainType,index:t.componentIndex},!e&&i.prepareView(u,t,n,s)}for(e?n.eachComponent((function(t,e){"series"!==t&&c(e)})):n.eachSeries(c),l=0;l<r.length;){var u=r[l];u.__alive?l++:(!e&&u.renderTask.dispose(),a.remove(u.group),u.dispose(n,s),r.splice(l,1),o[u.__id]===u&&delete o[u.__id],u.__id=u.group.__ecComponentInfo=null)}},xv=function(t,e,n,i,r){var o=t._model;if(o.setUpdatePayload(n),i){var a={};a[i+"Id"]=n[i+"Id"],a[i+"Index"]=n[i+"Index"],a[i+"Name"]=n[i+"Name"];var s={mainType:i,query:a};r&&(s.subType=r);var l,c=n.excludeSeriesId;null!=c&&(l=mt(),R(vo(c),(function(t){var e=ko(t,null);null!=e&&l.set(e,!0)}))),o&&o.eachComponent(s,(function(e){if(!l||null==l.get(e.id))if(Xl(n))if(e instanceof ig)n.type!==il||n.notBlur||e.get(["emphasis","disabled"])||function(t,e,n){var i=t.seriesIndex,r=t.getData(e.dataType);if(r){var o=To(r,e);o=(Y(o)?o[0]:o)||0;var a=r.getItemGraphicEl(o);if(!a)for(var s=r.count(),l=0;!a&&l<s;)a=r.getItemGraphicEl(l++);if(a){var c=$s(a);Ol(i,c.focus,c.blurScope,n)}else{var u=t.get(["emphasis","focus"]),h=t.get(["emphasis","blurScope"]);null!=u&&Ol(i,u,h,n)}}}(e,n,t._api);else{var i=Ll(e.mainType,e.componentIndex,n.name,t._api),r=i.focusSelf,o=i.dispatchers;n.type===il&&r&&!n.notBlur&&Dl(e.mainType,e.componentIndex,t._api),o&&R(o,(function(t){n.type===il?Sl(t):Cl(t)}))}else Yl(n)&&e instanceof ig&&(function(t,e,n){if(Yl(e)){var i=e.dataType,r=To(t.getData(i),e);Y(r)||(r=[r]),t[e.type===sl?"toggleSelect":e.type===ol?"select":"unselect"](r,i)}}(e,n,t._api),Pl(e),Pv(t))}),t),o&&o.eachComponent(s,(function(e){l&&null!=l.get(e.id)||u(t["series"===i?"_chartsMap":"_componentsMap"][e.__viewId])}),t)}else R([].concat(t._componentsViews).concat(t._chartsViews),u);function u(i){i&&i.__alive&&i[e]&&i[e](i.__model,o,t._api,n)}},_v={prepareAndUpdate:function(t){yv(this),_v.update.call(this,t,{optionChanged:null!=t.newOption})},update:function(e,n){var i=this._model,r=this._api,o=this._zr,a=this._coordSysMgr,s=this._scheduler;if(i){i.setUpdatePayload(e),s.restoreData(i,e),s.performSeriesTasks(i),a.create(i,r),s.performDataProcessorTasks(i,e),Sv(this,i),a.update(i,r),t(i),s.performVisualTasks(i,e),Iv(this,i,r,e,n);var l=i.get("backgroundColor")||"transparent",c=i.get("darkMode");o.setBackgroundColor(l),null!=c&&"auto"!==c&&o.setDarkMode(c),rv.trigger("afterupdate",i,r)}},updateTransform:function(e){var n=this,i=this._model,r=this._api;if(i){i.setUpdatePayload(e);var o=[];i.eachComponent((function(t,a){if("series"!==t){var s=n.getViewOfComponentModel(a);if(s&&s.__alive)if(s.updateTransform){var l=s.updateTransform(a,i,r,e);l&&l.update&&o.push(s)}else o.push(s)}}));var a=mt();i.eachSeries((function(t){var o=n._chartsMap[t.__viewId];if(o.updateTransform){var s=o.updateTransform(t,i,r,e);s&&s.update&&a.set(t.uid,1)}else a.set(t.uid,1)})),t(i),this._scheduler.performVisualTasks(i,e,{setDirty:!0,dirtyMap:a}),Ov(this,i,r,e,{},a),rv.trigger("afterupdate",i,r)}},updateView:function(e){var n=this._model;n&&(n.setUpdatePayload(e),gg.markUpdateMethod(e,"updateView"),t(n),this._scheduler.performVisualTasks(n,e,{setDirty:!0}),Iv(this,n,this._api,e,{}),rv.trigger("afterupdate",n,this._api))},updateVisual:function(e){var n=this,i=this._model;i&&(i.setUpdatePayload(e),i.eachSeries((function(t){t.getData().clearAllVisual()})),gg.markUpdateMethod(e,"updateVisual"),t(i),this._scheduler.performVisualTasks(i,e,{visualType:"visual",setDirty:!0}),i.eachComponent((function(t,r){if("series"!==t){var o=n.getViewOfComponentModel(r);o&&o.__alive&&o.updateVisual(r,i,n._api,e)}})),i.eachSeries((function(t){n._chartsMap[t.__viewId].updateVisual(t,i,n._api,e)})),rv.trigger("afterupdate",i,this._api))},updateLayout:function(t){_v.update.call(this,t)}},wv=function(t,e,n,i){if(t._disposed)Hv(t.id);else for(var r,o=t._model,a=t._coordSysMgr.getCoordinateSystems(),s=Oo(o,n),l=0;l<a.length;l++){var c=a[l];if(c[e]&&null!=(r=c[e](o,s,i)))return r}},Sv=function(t,e){var n=t._chartsMap,i=t._scheduler;e.eachSeries((function(t){i.updateStreamModes(t,n[t.__viewId])}))},Cv=function(t,e){var n=this,i=this.getModel(),r=t.type,o=t.escapeConnect,a=Wv[r],s=a.actionInfo,l=(s.update||"update").split(":"),c=l.pop(),u=null!=l[0]&&Ho(l[0]);this[uv]=!0;var h=[t],d=!1;t.batch&&(d=!0,h=B(t.batch,(function(e){return(e=E(I({},e),t)).batch=null,e})));var p,f=[],g=Yl(t),m=Xl(t);if(m&&El(this._api),R(h,(function(e){if((p=(p=a.action(e,n._model,n._api))||I({},e)).type=s.event||p.type,f.push(p),m){var i=Do(t),r=i.queryOptionMap,o=i.mainTypeSpecified?r.keys()[0]:"series";xv(n,c,e,o),Pv(n)}else g?(xv(n,c,e,"series"),Pv(n)):u&&xv(n,c,e,u.main,u.sub)})),"none"!==c&&!m&&!g&&!u)try{this[hv]?(yv(this),_v.update.call(this,t),this[hv]=null):_v[c].call(this,t)}catch(t){throw this[uv]=!1,t}if(p=d?{type:s.event||r,escapeConnect:o,batch:f}:f[0],this[uv]=!1,!e){var v=this._messageCenter;if(v.trigger(p.type,p),g){var y={type:"selectchanged",escapeConnect:o,selected:Nl(i),isFromClick:t.isFromClick||!1,fromAction:t.type,fromActionPayload:t};v.trigger(y.type,y)}}},kv=function(t){for(var e=this._pendingActions;e.length;){var n=e.shift();Cv.call(this,n,t)}},Av=function(t){!t&&this.trigger("updated")},Mv=function(t,e){t.on("rendered",(function(n){e.trigger("rendered",n),!t.animation.isFinished()||e[hv]||e._scheduler.unfinished||e._pendingActions.length||e.trigger("finished")}))},Tv=function(t,e){t.on("mouseover",(function(t){var n=gm(t.target,jl);n&&(function(t,e,n){var i=$s(t),r=Ll(i.componentMainType,i.componentIndex,i.componentHighDownName,n),o=r.dispatchers,a=r.focusSelf;o?(a&&Dl(i.componentMainType,i.componentIndex,n),R(o,(function(t){return _l(t,e)}))):(Ol(i.seriesIndex,i.focus,i.blurScope,n),"self"===i.focus&&Dl(i.componentMainType,i.componentIndex,n),_l(t,e))}(n,t,e._api),Pv(e))})).on("mouseout",(function(t){var n=gm(t.target,jl);n&&(function(t,e,n){El(n);var i=$s(t),r=Ll(i.componentMainType,i.componentIndex,i.componentHighDownName,n).dispatchers;r?R(r,(function(t){return wl(t,e)})):wl(t,e)}(n,t,e._api),Pv(e))})).on("click",(function(t){var n=gm(t.target,(function(t){return null!=$s(t).dataIndex}),!0);if(n){var i=n.selected?"unselect":"select",r=$s(n);e._api.dispatchAction({type:i,dataType:r.dataType,dataIndexInside:r.dataIndex,seriesIndex:r.seriesIndex,isFromClick:!0})}}))},Iv=function(t,e,n,i,r){!function(t){var e=[],n=[],i=!1;if(t.eachComponent((function(t,r){var o=r.get("zlevel")||0,a=r.get("z")||0,s=r.getZLevelKey();i=i||!!s,("series"===t?n:e).push({zlevel:o,z:a,idx:r.componentIndex,type:t,key:s})})),i){var r,o,a=e.concat(n);Ke(a,(function(t,e){return t.zlevel===e.zlevel?t.z-e.z:t.zlevel-e.zlevel})),R(a,(function(e){var n=t.getComponent(e.type,e.idx),i=e.zlevel,a=e.key;null!=r&&(i=Math.max(r,i)),a?(i===r&&a!==o&&i++,o=a):o&&(i===r&&i++,o=""),r=i,n.setZLevel(i)}))}}(e),Ev(t,e,n,i,r),R(t._chartsViews,(function(t){t.__alive=!1})),Ov(t,e,n,i,r),R(t._chartsViews,(function(t){t.__alive||t.remove(e,n)}))},Ev=function(t,e,n,r,o,l){R(l||t._componentsViews,(function(t){var o=t.__model;a(0,t),t.render(o,e,n,r),i(o,t),s(o,t)}))},Ov=function(t,e,n,o,l,c){var u=t._scheduler;l=I(l||{},{updatedSeries:e.getSeries()}),rv.trigger("series:beforeupdate",e,n,l);var h=!1;e.eachSeries((function(e){var n=t._chartsMap[e.__viewId];n.__alive=!0;var i=n.renderTask;u.updatePayload(i,o),a(0,n),c&&c.get(e.uid)&&i.dirty(),i.perform(u.getPerformArgs(i))&&(h=!0),n.group.silent=!!e.get("silent"),function(t,e){var n=t.get("blendMode")||null;e.eachRendered((function(t){t.isGroup||(t.style.blend=n)}))}(e,n),Pl(e)})),u.unfinished=h||u.unfinished,rv.trigger("series:layoutlabels",e,n,l),rv.trigger("series:transition",e,n,l),e.eachSeries((function(e){var n=t._chartsMap[e.__viewId];i(e,n),s(e,n)})),function(t,e){var n=t._zr.storage,i=0;n.traverse((function(t){t.isGroup||i++})),i>e.get("hoverLayerThreshold")&&!r.node&&!r.worker&&e.eachSeries((function(e){if(!e.preventUsingHoverLayer){var n=t._chartsMap[e.__viewId];n.__alive&&n.eachRendered((function(t){t.states.emphasis&&(t.states.emphasis.hoverLayer=!0)}))}}))}(t,e),rv.trigger("series:afterupdate",e,n,l)},Pv=function(t){t[dv]=!0,t.getZr().wakeUp()},Nv=function(t){t[dv]&&(t.getZr().storage.traverse((function(t){lu(t)||e(t)})),t[dv]=!1)},Dv=function(t){return new(function(e){function i(){return null!==e&&e.apply(this,arguments)||this}return n(i,e),i.prototype.getCoordinateSystems=function(){return t._coordSysMgr.getCoordinateSystems()},i.prototype.getComponentByElement=function(e){for(;e;){var n=e.__ecComponentInfo;if(null!=n)return t._model.getComponent(n.mainType,n.index);e=e.parent}},i.prototype.enterEmphasis=function(e,n){Sl(e,n),Pv(t)},i.prototype.leaveEmphasis=function(e,n){Cl(e,n),Pv(t)},i.prototype.enterBlur=function(e){kl(e),Pv(t)},i.prototype.leaveBlur=function(e){Al(e),Pv(t)},i.prototype.enterSelect=function(e){Ml(e),Pv(t)},i.prototype.leaveSelect=function(e){Tl(e),Pv(t)},i.prototype.getModel=function(){return t.getModel()},i.prototype.getViewOfComponentModel=function(e){return t.getViewOfComponentModel(e)},i.prototype.getViewOfSeriesModel=function(e){return t.getViewOfSeriesModel(e)},i}(ip))(t)},Lv=function(t){function e(t,e){for(var n=0;n<t.length;n++)t[n][fv]=e}R(jv,(function(n,i){t._messageCenter.on(i,(function(n){if(Zv[t.group]&&0!==t[fv]){if(n&&n.escapeConnect)return;var i=t.makeActionFromEvent(n),r=[];R($v,(function(e){e!==t&&e.group===t.group&&r.push(e)})),e(r,0),R(r,(function(t){1!==t[fv]&&t.dispatchAction(i)})),e(r,2)}}))}))}}(),e}(Ut),Fv=zv.prototype;Fv.on=gv("on"),Fv.off=gv("off"),Fv.one=function(t,e,n){var i=this;this.on.call(this,t,(function n(){for(var r=[],o=0;o<arguments.length;o++)r[o]=arguments[o];e&&e.apply&&e.apply(this,r),i.off(t,n)}),n)};var Vv=["click","dblclick","mouseover","mouseout","mousemove","mousedown","mouseup","globalout","contextmenu"];function Hv(t){}var Wv={},jv={},Yv=[],Xv=[],Gv=[],qv={},Uv={},$v={},Zv={},Kv=+new Date-0,Qv=+new Date-0,Jv="_echarts_instance_";function ty(t){Zv[t]=!1}var ey=ty;function ny(t){return $v[function(t,e){return t.getAttribute?t.getAttribute(e):t[e]}(t,Jv)]}function iy(t,e){qv[t]=e}function ry(t){D(Xv,t)<0&&Xv.push(t)}function oy(t,e){fy(Yv,t,e,2e3)}function ay(t){ly("afterinit",t)}function sy(t){ly("afterupdate",t)}function ly(t,e){rv.on(t,e)}function cy(t,e,n){X(e)&&(n=e,e="");var i=$(t)?t.type:[t,t={event:e}][0];t.event=(t.event||i).toLowerCase(),e=t.event,jv[e]||(lt(pv.test(i)&&pv.test(e)),Wv[i]||(Wv[i]={action:n,actionInfo:t}),jv[e]=i)}function uy(t,e){op.register(t,e)}function hy(t,e){fy(Gv,t,e,1e3,"layout")}function dy(t,e){fy(Gv,t,e,3e3,"visual")}var py=[];function fy(t,e,n,i,r){if((X(e)||$(e))&&(n=e,e=i),!(D(py,n)>=0)){py.push(n);var o=Bg.wrapStageHandler(n,r);o.__prio=e,o.__raw=n,t.push(o)}}function gy(t,e){Uv[t]=e}function my(t,e,n){var i=av("registerMap");i&&i(t,e,n)}var vy=function(t){var e=(t=A(t)).type;e||po("");var n=e.split(":");2!==n.length&&po("");var i=!1;"echarts"===n[0]&&(e=n[1],i=!0),t.__isBuiltIn=i,xf.set(e,t)};dy(sv,Dg),dy(lv,Pg),dy(lv,Ng),dy(sv,lm),dy(lv,cm),dy(7e3,(function(t,e){t.eachRawSeries((function(n){if(!t.isSeriesFiltered(n)){var i=n.getData();i.hasItemVisual()&&i.each((function(t){var n=i.getItemVisual(t,"decal");n&&(i.ensureUniqueItemVisual(t,"style").decal=tv(n,e))}));var r=i.getVisual("decal");r&&(i.getVisual("style").decal=tv(r,e))}}))})),ry(Mp),oy(900,(function(t){var e=mt();t.eachSeries((function(t){var n=t.get("stack");if(n){var i=e.get(n)||e.set(n,[]),r=t.getData(),o={stackResultDimension:r.getCalculationInfo("stackResultDimension"),stackedOverDimension:r.getCalculationInfo("stackedOverDimension"),stackedDimension:r.getCalculationInfo("stackedDimension"),stackedByDimension:r.getCalculationInfo("stackedByDimension"),isStackedByIndex:r.getCalculationInfo("isStackedByIndex"),data:r,seriesModel:t};if(!o.stackedDimension||!o.isStackedByIndex&&!o.stackedByDimension)return;i.length&&r.setCalculationInfo("stackedOnSeries",i[i.length-1].seriesModel),i.push(o)}})),e.each(Tp)})),gy("default",(function(t,e){E(e=e||{},{text:"loading",textColor:"#000",fontSize:12,fontWeight:"normal",fontStyle:"normal",fontFamily:"sans-serif",maskColor:"rgba(255, 255, 255, 0.8)",showSpinner:!0,color:"#5470c6",spinnerRadius:10,lineWidth:5,zlevel:0});var n=new Dr,i=new Ls({style:{fill:e.maskColor},zlevel:e.zlevel,z:1e4});n.add(i);var r,o=new Rs({style:{text:e.text,fill:e.textColor,fontSize:e.fontSize,fontWeight:e.fontWeight,fontStyle:e.fontStyle,fontFamily:e.fontFamily},zlevel:e.zlevel,z:10001}),a=new Ls({style:{fill:"none"},textContent:o,textConfig:{position:"right",distance:10},zlevel:e.zlevel,z:10001});return n.add(a),e.showSpinner&&((r=new Xc({shape:{startAngle:-Rg/2,endAngle:-Rg/2+.1,r:e.spinnerRadius},style:{stroke:e.color,lineCap:"round",lineWidth:e.lineWidth},zlevel:e.zlevel,z:10001})).animateShape(!0).when(1e3,{endAngle:3*Rg/2}).start("circularInOut"),r.animateShape(!0).when(1e3,{startAngle:3*Rg/2}).delay(300).start("circularInOut"),n.add(r)),n.resize=function(){var n=o.getBoundingRect().width,s=e.showSpinner?e.spinnerRadius:0,l=(t.getWidth()-2*s-(e.showSpinner&&n?10:0)-n)/2-(e.showSpinner&&n?0:5+n/2)+(e.showSpinner?0:n/2)+(n?0:s),c=t.getHeight()/2;e.showSpinner&&r.setShape({cx:l,cy:c}),a.setShape({x:l-s,y:c-s,width:2*s,height:2*s}),i.setShape({x:0,y:0,width:t.getWidth(),height:t.getHeight()})},n.resize(),n})),cy({type:il,event:il,update:il},_t),cy({type:rl,event:rl,update:rl},_t),cy({type:ol,event:ol,update:ol},_t),cy({type:al,event:al,update:al},_t),cy({type:sl,event:sl,update:sl},_t),iy("light",Jg),iy("dark",rm);var yy=[],by={registerPreprocessor:ry,registerProcessor:oy,registerPostInit:ay,registerPostUpdate:sy,registerUpdateLifecycle:ly,registerAction:cy,registerCoordinateSystem:uy,registerLayout:hy,registerVisual:dy,registerTransform:vy,registerLoading:gy,registerMap:my,registerImpl:function(t,e){ov[t]=e},PRIORITY:cv,ComponentModel:Sd,ComponentView:hg,SeriesModel:ig,ChartView:gg,registerComponentModel:function(t){Sd.registerClass(t)},registerComponentView:function(t){hg.registerClass(t)},registerSeriesModel:function(t){ig.registerClass(t)},registerChartView:function(t){gg.registerClass(t)},registerSubTypeDefaulter:function(t,e){Sd.registerSubTypeDefaulter(t,e)},registerPainter:function(t,e){zr(t,e)}};function xy(t){Y(t)?R(t,(function(t){xy(t)})):D(yy,t)>=0||(yy.push(t),X(t)&&(t={install:t}),t.install(by))}function _y(t){return null==t?0:t.length||1}function wy(t){return t}var Sy=function(){function t(t,e,n,i,r,o){this._old=t,this._new=e,this._oldKeyGetter=n||wy,this._newKeyGetter=i||wy,this.context=r,this._diffModeMultiple="multiple"===o}return t.prototype.add=function(t){return this._add=t,this},t.prototype.update=function(t){return this._update=t,this},t.prototype.updateManyToOne=function(t){return this._updateManyToOne=t,this},t.prototype.updateOneToMany=function(t){return this._updateOneToMany=t,this},t.prototype.updateManyToMany=function(t){return this._updateManyToMany=t,this},t.prototype.remove=function(t){return this._remove=t,this},t.prototype.execute=function(){this[this._diffModeMultiple?"_executeMultiple":"_executeOneToOne"]()},t.prototype._executeOneToOne=function(){var t=this._old,e=this._new,n={},i=new Array(t.length),r=new Array(e.length);this._initIndexMap(t,null,i,"_oldKeyGetter"),this._initIndexMap(e,n,r,"_newKeyGetter");for(var o=0;o<t.length;o++){var a=i[o],s=n[a],l=_y(s);if(l>1){var c=s.shift();1===s.length&&(n[a]=s[0]),this._update&&this._update(c,o)}else 1===l?(n[a]=null,this._update&&this._update(s,o)):this._remove&&this._remove(o)}this._performRestAdd(r,n)},t.prototype._executeMultiple=function(){var t=this._old,e=this._new,n={},i={},r=[],o=[];this._initIndexMap(t,n,r,"_oldKeyGetter"),this._initIndexMap(e,i,o,"_newKeyGetter");for(var a=0;a<r.length;a++){var s=r[a],l=n[s],c=i[s],u=_y(l),h=_y(c);if(u>1&&1===h)this._updateManyToOne&&this._updateManyToOne(c,l),i[s]=null;else if(1===u&&h>1)this._updateOneToMany&&this._updateOneToMany(c,l),i[s]=null;else if(1===u&&1===h)this._update&&this._update(c,l),i[s]=null;else if(u>1&&h>1)this._updateManyToMany&&this._updateManyToMany(c,l),i[s]=null;else if(u>1)for(var d=0;d<u;d++)this._remove&&this._remove(l[d]);else this._remove&&this._remove(l)}this._performRestAdd(o,i)},t.prototype._performRestAdd=function(t,e){for(var n=0;n<t.length;n++){var i=t[n],r=e[i],o=_y(r);if(o>1)for(var a=0;a<o;a++)this._add&&this._add(r[a]);else 1===o&&this._add&&this._add(r);e[i]=null}},t.prototype._initIndexMap=function(t,e,n,i){for(var r=this._diffModeMultiple,o=0;o<t.length;o++){var a="_ec_"+this[i](t[o],o);if(r||(n[o]=a),e){var s=e[a],l=_y(s);0===l?(e[a]=o,r&&n.push(a)):1===l?e[a]=[s,o]:s.push(o)}}},t}(),Cy=function(){function t(t,e){this._encode=t,this._schema=e}return t.prototype.get=function(){return{fullDimensions:this._getFullDimensionNames(),encode:this._encode}},t.prototype._getFullDimensionNames=function(){return this._cachedDimNames||(this._cachedDimNames=this._schema?this._schema.makeOutputDimensionNames():[]),this._cachedDimNames},t}();function ky(t,e){return t.hasOwnProperty(e)||(t[e]=[]),t[e]}function Ay(t){return"category"===t?"ordinal":"time"===t?"time":"float"}var My=function(t){this.otherDims={},null!=t&&I(this,t)},Ty=Io(),Iy={float:"f",int:"i",ordinal:"o",number:"n",time:"t"},Ey=function(){function t(t){this.dimensions=t.dimensions,this._dimOmitted=t.dimensionOmitted,this.source=t.source,this._fullDimCount=t.fullDimensionCount,this._updateDimOmitted(t.dimensionOmitted)}return t.prototype.isDimensionOmitted=function(){return this._dimOmitted},t.prototype._updateDimOmitted=function(t){this._dimOmitted=t,t&&(this._dimNameMap||(this._dimNameMap=Ly(this.source)))},t.prototype.getSourceDimensionIndex=function(t){return rt(this._dimNameMap.get(t),-1)},t.prototype.getSourceDimension=function(t){var e=this.source.dimensionsDefine;if(e)return e[t]},t.prototype.makeStoreSchema=function(){for(var t=this._fullDimCount,e=Hp(this.source),n=!Py(t),i="",r=[],o=0,a=0;o<t;o++){var s=void 0,l=void 0,c=void 0,u=this.dimensions[a];if(u&&u.storeDimIndex===o)s=e?u.name:null,l=u.type,c=u.ordinalMeta,a++;else{var h=this.getSourceDimension(o);h&&(s=e?h.name:null,l=h.type)}r.push({property:s,type:l,ordinalMeta:c}),!e||null==s||u&&u.isCalculationCoord||(i+=n?s.replace(/\`/g,"`1").replace(/\$/g,"`2"):s),i+="$",i+=Iy[l]||"f",c&&(i+=c.uid),i+="$"}var d=this.source;return{dimensions:r,hash:[d.seriesLayoutBy,d.startIndex,i].join("$$")}},t.prototype.makeOutputDimensionNames=function(){for(var t=[],e=0,n=0;e<this._fullDimCount;e++){var i=void 0,r=this.dimensions[n];if(r&&r.storeDimIndex===e)r.isCalculationCoord||(i=r.name),n++;else{var o=this.getSourceDimension(e);o&&(i=o.name)}t.push(i)}return t},t.prototype.appendCalculationDimension=function(t){this.dimensions.push(t),t.isCalculationCoord=!0,this._fullDimCount++,this._updateDimOmitted(!0)},t}();function Oy(t){return t instanceof Ey}function Dy(t){for(var e=mt(),n=0;n<(t||[]).length;n++){var i=t[n],r=$(i)?i.name:i;null!=r&&null==e.get(r)&&e.set(r,n)}return e}function Ly(t){var e=Ty(t);return e.dimNameMap||(e.dimNameMap=Dy(t.dimensionsDefine))}function Py(t){return t>30}var Ny,Ry,By,zy,Fy,Vy,Hy,Wy=$,jy=B,Yy="undefined"==typeof Int32Array?Array:Int32Array,Xy=["hasItemOption","_nameList","_idList","_invertedIndicesMap","_dimSummary","userOutput","_rawData","_dimValueGetter","_nameDimIdx","_idDimIdx","_nameRepeatCount"],Gy=["_approximateExtent"],qy=function(){function t(t,e){var n;this.type="list",this._dimOmitted=!1,this._nameList=[],this._idList=[],this._visual={},this._layout={},this._itemVisuals=[],this._itemLayouts=[],this._graphicEls=[],this._approximateExtent={},this._calculationInfo={},this.hasItemOption=!1,this.TRANSFERABLE_METHODS=["cloneShallow","downSample","lttbDownSample","map"],this.CHANGABLE_METHODS=["filterSelf","selectRange"],this.DOWNSAMPLE_METHODS=["downSample","lttbDownSample"];var i=!1;Oy(t)?(n=t.dimensions,this._dimOmitted=t.isDimensionOmitted(),this._schema=t):(i=!0,n=t),n=n||["x","y"];for(var r={},o=[],a={},s=!1,l={},c=0;c<n.length;c++){var u=n[c],h=G(u)?new My({name:u}):u instanceof My?u:new My(u),d=h.name;h.type=h.type||"float",h.coordDim||(h.coordDim=d,h.coordDimIndex=0);var p=h.otherDims=h.otherDims||{};o.push(d),r[d]=h,null!=l[d]&&(s=!0),h.createInvertedIndices&&(a[d]=[]),0===p.itemName&&(this._nameDimIdx=c),0===p.itemId&&(this._idDimIdx=c),i&&(h.storeDimIndex=c)}if(this.dimensions=o,this._dimInfos=r,this._initGetDimensionInfo(s),this.hostModel=e,this._invertedIndicesMap=a,this._dimOmitted){var f=this._dimIdxToName=mt();R(o,(function(t){f.set(r[t].storeDimIndex,t)}))}}return t.prototype.getDimension=function(t){var e=this._recognizeDimIndex(t);if(null==e)return t;if(e=t,!this._dimOmitted)return this.dimensions[e];var n=this._dimIdxToName.get(e);if(null!=n)return n;var i=this._schema.getSourceDimension(e);return i?i.name:void 0},t.prototype.getDimensionIndex=function(t){var e=this._recognizeDimIndex(t);if(null!=e)return e;if(null==t)return-1;var n=this._getDimInfo(t);return n?n.storeDimIndex:this._dimOmitted?this._schema.getSourceDimensionIndex(t):-1},t.prototype._recognizeDimIndex=function(t){if(U(t)||null!=t&&!isNaN(t)&&!this._getDimInfo(t)&&(!this._dimOmitted||this._schema.getSourceDimensionIndex(t)<0))return+t},t.prototype._getStoreDimIndex=function(t){return this.getDimensionIndex(t)},t.prototype.getDimensionInfo=function(t){return this._getDimInfo(this.getDimension(t))},t.prototype._initGetDimensionInfo=function(t){var e=this._dimInfos;this._getDimInfo=t?function(t){return e.hasOwnProperty(t)?e[t]:void 0}:function(t){return e[t]}},t.prototype.getDimensionsOnCoord=function(){return this._dimSummary.dataDimsOnCoord.slice()},t.prototype.mapDimension=function(t,e){var n=this._dimSummary;if(null==e)return n.encodeFirstDimNotExtra[t];var i=n.encode[t];return i?i[e]:null},t.prototype.mapDimensionsAll=function(t){return(this._dimSummary.encode[t]||[]).slice()},t.prototype.getStore=function(){return this._store},t.prototype.initData=function(t,e,n){var i,r=this;if(t instanceof Df&&(i=t),!i){var o=this.dimensions,a=Np(t)||N(t)?new Wp(t,o.length):t;i=new Df;var s=jy(o,(function(t){return{type:r._dimInfos[t].type,property:t}}));i.initData(a,s,n)}this._store=i,this._nameList=(e||[]).slice(),this._idList=[],this._nameRepeatCount={},this._doInit(0,i.count()),this._dimSummary=function(t,e){var n={},i=n.encode={},r=mt(),o=[],a=[],s={};R(t.dimensions,(function(e){var n,l=t.getDimensionInfo(e),c=l.coordDim;if(c){var u=l.coordDimIndex;ky(i,c)[u]=e,l.isExtraCoord||(r.set(c,1),"ordinal"!==(n=l.type)&&"time"!==n&&(o[0]=e),ky(s,c)[u]=t.getDimensionIndex(l.name)),l.defaultTooltip&&a.push(e)}Md.each((function(t,e){var n=ky(i,e),r=l.otherDims[e];null!=r&&!1!==r&&(n[r]=l.name)}))}));var l=[],c={};r.each((function(t,e){var n=i[e];c[e]=n[0],l=l.concat(n)})),n.dataDimsOnCoord=l,n.dataDimIndicesOnCoord=B(l,(function(e){return t.getDimensionInfo(e).storeDimIndex})),n.encodeFirstDimNotExtra=c;var u=i.label;u&&u.length&&(o=u.slice());var h=i.tooltip;return h&&h.length?a=h.slice():a.length||(a=o.slice()),i.defaultedLabel=o,i.defaultedTooltip=a,n.userOutput=new Cy(s,e),n}(this,this._schema),this.userOutput=this._dimSummary.userOutput},t.prototype.appendData=function(t){var e=this._store.appendData(t);this._doInit(e[0],e[1])},t.prototype.appendValues=function(t,e){var n=this._store.appendValues(t,e.length),i=n.start,r=n.end,o=this._shouldMakeIdFromName();if(this._updateOrdinalMeta(),e)for(var a=i;a<r;a++){var s=a-i;this._nameList[a]=e[s],o&&Hy(this,a)}},t.prototype._updateOrdinalMeta=function(){for(var t=this._store,e=this.dimensions,n=0;n<e.length;n++){var i=this._dimInfos[e[n]];i.ordinalMeta&&t.collectOrdinalMeta(i.storeDimIndex,i.ordinalMeta)}},t.prototype._shouldMakeIdFromName=function(){var t=this._store.getProvider();return null==this._idDimIdx&&t.getSource().sourceFormat!==Dd&&!t.fillStorage},t.prototype._doInit=function(t,e){if(!(t>=e)){var n=this._store.getProvider();this._updateOrdinalMeta();var i=this._nameList,r=this._idList;if(n.getSource().sourceFormat===Td&&!n.pure)for(var o=[],a=t;a<e;a++){var s=n.getItem(a,o);if(!this.hasItemOption&&_o(s)&&(this.hasItemOption=!0),s){var l=s.name;null==i[a]&&null!=l&&(i[a]=ko(l,null));var c=s.id;null==r[a]&&null!=c&&(r[a]=ko(c,null))}}if(this._shouldMakeIdFromName())for(a=t;a<e;a++)Hy(this,a);Ny(this)}},t.prototype.getApproximateExtent=function(t){return this._approximateExtent[t]||this._store.getDataExtent(this._getStoreDimIndex(t))},t.prototype.setApproximateExtent=function(t,e){e=this.getDimension(e),this._approximateExtent[e]=t.slice()},t.prototype.getCalculationInfo=function(t){return this._calculationInfo[t]},t.prototype.setCalculationInfo=function(t,e){Wy(t)?I(this._calculationInfo,t):this._calculationInfo[t]=e},t.prototype.getName=function(t){var e=this.getRawIndex(t),n=this._nameList[e];return null==n&&null!=this._nameDimIdx&&(n=By(this,this._nameDimIdx,e)),null==n&&(n=""),n},t.prototype._getCategory=function(t,e){var n=this._store.get(t,e),i=this._store.getOrdinalMeta(t);return i?i.categories[n]:n},t.prototype.getId=function(t){return Ry(this,this.getRawIndex(t))},t.prototype.count=function(){return this._store.count()},t.prototype.get=function(t,e){var n=this._store,i=this._dimInfos[t];if(i)return n.get(i.storeDimIndex,e)},t.prototype.getByRawIndex=function(t,e){var n=this._store,i=this._dimInfos[t];if(i)return n.getByRawIndex(i.storeDimIndex,e)},t.prototype.getIndices=function(){return this._store.getIndices()},t.prototype.getDataExtent=function(t){return this._store.getDataExtent(this._getStoreDimIndex(t))},t.prototype.getSum=function(t){return this._store.getSum(this._getStoreDimIndex(t))},t.prototype.getMedian=function(t){return this._store.getMedian(this._getStoreDimIndex(t))},t.prototype.getValues=function(t,e){var n=this,i=this._store;return Y(t)?i.getValues(jy(t,(function(t){return n._getStoreDimIndex(t)})),e):i.getValues(t)},t.prototype.hasValue=function(t){for(var e=this._dimSummary.dataDimIndicesOnCoord,n=0,i=e.length;n<i;n++)if(isNaN(this._store.get(e[n],t)))return!1;return!0},t.prototype.indexOfName=function(t){for(var e=0,n=this._store.count();e<n;e++)if(this.getName(e)===t)return e;return-1},t.prototype.getRawIndex=function(t){return this._store.getRawIndex(t)},t.prototype.indexOfRawIndex=function(t){return this._store.indexOfRawIndex(t)},t.prototype.rawIndexOf=function(t,e){var n=(t&&this._invertedIndicesMap[t])[e];return null==n||isNaN(n)?-1:n},t.prototype.indicesOfNearest=function(t,e,n){return this._store.indicesOfNearest(this._getStoreDimIndex(t),e,n)},t.prototype.each=function(t,e,n){X(t)&&(n=e,e=t,t=[]);var i=n||this,r=jy(zy(t),this._getStoreDimIndex,this);this._store.each(r,i?W(e,i):e)},t.prototype.filterSelf=function(t,e,n){X(t)&&(n=e,e=t,t=[]);var i=n||this,r=jy(zy(t),this._getStoreDimIndex,this);return this._store=this._store.filter(r,i?W(e,i):e),this},t.prototype.selectRange=function(t){var e=this,n={};return R(H(t),(function(i){var r=e._getStoreDimIndex(i);n[r]=t[i]})),this._store=this._store.selectRange(n),this},t.prototype.mapArray=function(t,e,n){X(t)&&(n=e,e=t,t=[]),n=n||this;var i=[];return this.each(t,(function(){i.push(e&&e.apply(this,arguments))}),n),i},t.prototype.map=function(t,e,n,i){var r=n||i||this,o=jy(zy(t),this._getStoreDimIndex,this),a=Vy(this);return a._store=this._store.map(o,r?W(e,r):e),a},t.prototype.modify=function(t,e,n,i){var r=n||i||this,o=jy(zy(t),this._getStoreDimIndex,this);this._store.modify(o,r?W(e,r):e)},t.prototype.downSample=function(t,e,n,i){var r=Vy(this);return r._store=this._store.downSample(this._getStoreDimIndex(t),e,n,i),r},t.prototype.lttbDownSample=function(t,e){var n=Vy(this);return n._store=this._store.lttbDownSample(this._getStoreDimIndex(t),e),n},t.prototype.getRawDataItem=function(t){return this._store.getRawDataItem(t)},t.prototype.getItemModel=function(t){var e=this.hostModel,n=this.getRawDataItem(t);return new gh(n,e,e&&e.ecModel)},t.prototype.diff=function(t){var e=this;return new Sy(t?t.getStore().getIndices():[],this.getStore().getIndices(),(function(e){return Ry(t,e)}),(function(t){return Ry(e,t)}))},t.prototype.getVisual=function(t){var e=this._visual;return e&&e[t]},t.prototype.setVisual=function(t,e){this._visual=this._visual||{},Wy(t)?I(this._visual,t):this._visual[t]=e},t.prototype.getItemVisual=function(t,e){var n=this._itemVisuals[t],i=n&&n[e];return null==i?this.getVisual(e):i},t.prototype.hasItemVisual=function(){return this._itemVisuals.length>0},t.prototype.ensureUniqueItemVisual=function(t,e){var n=this._itemVisuals,i=n[t];i||(i=n[t]={});var r=i[e];return null==r&&(Y(r=this.getVisual(e))?r=r.slice():Wy(r)&&(r=I({},r)),i[e]=r),r},t.prototype.setItemVisual=function(t,e,n){var i=this._itemVisuals[t]||{};this._itemVisuals[t]=i,Wy(e)?I(i,e):i[e]=n},t.prototype.clearAllVisual=function(){this._visual={},this._itemVisuals=[]},t.prototype.setLayout=function(t,e){Wy(t)?I(this._layout,t):this._layout[t]=e},t.prototype.getLayout=function(t){return this._layout[t]},t.prototype.getItemLayout=function(t){return this._itemLayouts[t]},t.prototype.setItemLayout=function(t,e,n){this._itemLayouts[t]=n?I(this._itemLayouts[t]||{},e):e},t.prototype.clearItemLayouts=function(){this._itemLayouts.length=0},t.prototype.setItemGraphicEl=function(t,e){var n=this.hostModel&&this.hostModel.seriesIndex;Zs(n,this.dataType,t,e),this._graphicEls[t]=e},t.prototype.getItemGraphicEl=function(t){return this._graphicEls[t]},t.prototype.eachItemGraphicEl=function(t,e){R(this._graphicEls,(function(n,i){n&&t&&t.call(e,n,i)}))},t.prototype.cloneShallow=function(e){return e||(e=new t(this._schema?this._schema:jy(this.dimensions,this._getDimInfo,this),this.hostModel)),Fy(e,this),e._store=this._store,e},t.prototype.wrapMethod=function(t,e){var n=this[t];X(n)&&(this.__wrappedMethods=this.__wrappedMethods||[],this.__wrappedMethods.push(t),this[t]=function(){var t=n.apply(this,arguments);return e.apply(this,[t].concat(at(arguments)))})},t.internalField=(Ny=function(t){var e=t._invertedIndicesMap;R(e,(function(n,i){var r=t._dimInfos[i],o=r.ordinalMeta,a=t._store;if(o){n=e[i]=new Yy(o.categories.length);for(var s=0;s<n.length;s++)n[s]=-1;for(s=0;s<a.count();s++)n[a.get(r.storeDimIndex,s)]=s}}))},By=function(t,e,n){return ko(t._getCategory(e,n),null)},Ry=function(t,e){var n=t._idList[e];return null==n&&null!=t._idDimIdx&&(n=By(t,t._idDimIdx,e)),null==n&&(n="e\0\0"+e),n},zy=function(t){return Y(t)||(t=null!=t?[t]:[]),t},Vy=function(e){var n=new t(e._schema?e._schema:jy(e.dimensions,e._getDimInfo,e),e.hostModel);return Fy(n,e),n},Fy=function(t,e){R(Xy.concat(e.__wrappedMethods||[]),(function(n){e.hasOwnProperty(n)&&(t[n]=e[n])})),t.__wrappedMethods=e.__wrappedMethods,R(Gy,(function(n){t[n]=A(e[n])})),t._calculationInfo=I({},e._calculationInfo)},void(Hy=function(t,e){var n=t._nameList,i=t._idList,r=t._nameDimIdx,o=t._idDimIdx,a=n[e],s=i[e];if(null==a&&null!=r&&(n[e]=a=By(t,r,e)),null==s&&null!=o&&(i[e]=s=By(t,o,e)),null==s&&null!=a){var l=t._nameRepeatCount,c=l[a]=(l[a]||0)+1;s=a,c>1&&(s+="__ec__"+c),i[e]=s}})),t}();function Uy(t,e){Np(t)||(t=Bp(t));var n=(e=e||{}).coordDimensions||[],i=e.dimensionsDefine||t.dimensionsDefine||[],r=mt(),o=[],a=function(t,e,n,i){var r=Math.max(t.dimensionsDetectedCount||1,e.length,n.length,i||0);return R(e,(function(t){var e;$(t)&&(e=t.dimsDef)&&(r=Math.max(r,e.length))})),r}(t,n,i,e.dimensionsCount),s=e.canOmitUnusedDimensions&&Py(a),l=i===t.dimensionsDefine,c=l?Ly(t):Dy(i),u=e.encodeDefine;!u&&e.encodeDefaulter&&(u=e.encodeDefaulter(t,a));for(var h=mt(u),d=new Mf(a),p=0;p<d.length;p++)d[p]=-1;function f(t){var e=d[t];if(e<0){var n=i[t],r=$(n)?n:{name:n},a=new My,s=r.name;null!=s&&null!=c.get(s)&&(a.name=a.displayName=s),null!=r.type&&(a.type=r.type),null!=r.displayName&&(a.displayName=r.displayName);var l=o.length;return d[t]=l,a.storeDimIndex=t,o.push(a),a}return o[e]}if(!s)for(p=0;p<a;p++)f(p);h.each((function(t,e){var n=vo(t).slice();if(1===n.length&&!G(n[0])&&n[0]<0)h.set(e,!1);else{var i=h.set(e,[]);R(n,(function(t,n){var r=G(t)?c.get(t):t;null!=r&&r<a&&(i[n]=r,m(f(r),e,n))}))}}));var g=0;function m(t,e,n){null!=Md.get(e)?t.otherDims[e]=n:(t.coordDim=e,t.coordDimIndex=n,r.set(e,!0))}R(n,(function(t){var e,n,i,r;if(G(t))e=t,r={};else{e=(r=t).name;var o=r.ordinalMeta;r.ordinalMeta=null,(r=I({},r)).ordinalMeta=o,n=r.dimsDef,i=r.otherDims,r.name=r.coordDim=r.coordDimIndex=r.dimsDef=r.otherDims=null}var s=h.get(e);if(!1!==s){if(!(s=vo(s)).length)for(var c=0;c<(n&&n.length||1);c++){for(;g<a&&null!=f(g).coordDim;)g++;g<a&&s.push(g++)}R(s,(function(t,o){var a=f(t);if(l&&null!=r.type&&(a.type=r.type),m(E(a,r),e,o),null==a.name&&n){var s=n[o];!$(s)&&(s={name:s}),a.name=a.displayName=s.name,a.defaultTooltip=s.defaultTooltip}i&&E(a.otherDims,i)}))}}));var v=e.generateCoord,y=e.generateCoordCount,b=null!=y;y=v?y||1:0;var x=v||"value";function _(t){null==t.name&&(t.name=t.coordDim)}if(s)R(o,(function(t){_(t)})),o.sort((function(t,e){return t.storeDimIndex-e.storeDimIndex}));else for(var w=0;w<a;w++){var S=f(w);null==S.coordDim&&(S.coordDim=$y(x,r,b),S.coordDimIndex=0,(!v||y<=0)&&(S.isExtraCoord=!0),y--),_(S),null!=S.type||1!==Vd(t,w)&&(!S.isExtraCoord||null==S.otherDims.itemName&&null==S.otherDims.seriesName)||(S.type="ordinal")}return function(t){for(var e=mt(),n=0;n<t.length;n++){var i=t[n],r=i.name,o=e.get(r)||0;o>0&&(i.name=r+(o-1)),o++,e.set(r,o)}}(o),new Ey({source:t,dimensions:o,fullDimensionCount:a,dimensionOmitted:s})}function $y(t,e,n){if(n||e.hasKey(t)){for(var i=0;e.hasKey(t+i);)i++;t+=i}return e.set(t,!0),t}var Zy=function(t){this.coordSysDims=[],this.axisMap=mt(),this.categoryAxisMap=mt(),this.coordSysName=t},Ky={cartesian2d:function(t,e,n,i){var r=t.getReferringComponents("xAxis",Lo).models[0],o=t.getReferringComponents("yAxis",Lo).models[0];e.coordSysDims=["x","y"],n.set("x",r),n.set("y",o),Qy(r)&&(i.set("x",r),e.firstCategoryDimIndex=0),Qy(o)&&(i.set("y",o),null==e.firstCategoryDimIndex&&(e.firstCategoryDimIndex=1))},singleAxis:function(t,e,n,i){var r=t.getReferringComponents("singleAxis",Lo).models[0];e.coordSysDims=["single"],n.set("single",r),Qy(r)&&(i.set("single",r),e.firstCategoryDimIndex=0)},polar:function(t,e,n,i){var r=t.getReferringComponents("polar",Lo).models[0],o=r.findAxisModel("radiusAxis"),a=r.findAxisModel("angleAxis");e.coordSysDims=["radius","angle"],n.set("radius",o),n.set("angle",a),Qy(o)&&(i.set("radius",o),e.firstCategoryDimIndex=0),Qy(a)&&(i.set("angle",a),null==e.firstCategoryDimIndex&&(e.firstCategoryDimIndex=1))},geo:function(t,e,n,i){e.coordSysDims=["lng","lat"]},parallel:function(t,e,n,i){var r=t.ecModel,o=r.getComponent("parallel",t.get("parallelIndex")),a=e.coordSysDims=o.dimensions.slice();R(o.parallelAxisIndex,(function(t,o){var s=r.getComponent("parallelAxis",t),l=a[o];n.set(l,s),Qy(s)&&(i.set(l,s),null==e.firstCategoryDimIndex&&(e.firstCategoryDimIndex=o))}))}};function Qy(t){return"category"===t.get("type")}function Jy(t,e,n){var i,r,o,a=(n=n||{}).byIndex,s=n.stackedCoordDimension;!function(t){return!Oy(t.schema)}(e)?(r=e.schema,i=r.dimensions,o=e.store):i=e;var l,c,u,h,d=!(!t||!t.get("stack"));if(R(i,(function(t,e){G(t)&&(i[e]=t={name:t}),d&&!t.isExtraCoord&&(a||l||!t.ordinalMeta||(l=t),c||"ordinal"===t.type||"time"===t.type||s&&s!==t.coordDim||(c=t))})),!c||a||l||(a=!0),c){u="__\0ecstackresult_"+t.id,h="__\0ecstackedover_"+t.id,l&&(l.createInvertedIndices=!0);var p=c.coordDim,f=c.type,g=0;R(i,(function(t){t.coordDim===p&&g++}));var m={name:u,coordDim:p,coordDimIndex:g,type:f,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:i.length},v={name:h,coordDim:h,coordDimIndex:g+1,type:f,isExtraCoord:!0,isCalculationCoord:!0,storeDimIndex:i.length+1};r?(o&&(m.storeDimIndex=o.ensureCalculationDimension(h,f),v.storeDimIndex=o.ensureCalculationDimension(u,f)),r.appendCalculationDimension(m),r.appendCalculationDimension(v)):(i.push(m),i.push(v))}return{stackedDimension:c&&c.name,stackedByDimension:l&&l.name,isStackedByIndex:a,stackedOverDimension:h,stackResultDimension:u}}function tb(t,e){return!!e&&e===t.getCalculationInfo("stackedDimension")}function eb(t,e){return tb(t,e)?t.getCalculationInfo("stackResultDimension"):e}function nb(t,e,n){n=n||{};var i,r=e.getSourceManager(),o=!1;t?(o=!0,i=Bp(t)):o=(i=r.getSource()).sourceFormat===Td;var a=function(t){var e=t.get("coordinateSystem"),n=new Zy(e),i=Ky[e];if(i)return i(t,n,n.axisMap,n.categoryAxisMap),n}(e),s=function(t,e){var n,i=t.get("coordinateSystem"),r=op.get(i);return e&&e.coordSysDims&&(n=B(e.coordSysDims,(function(t){var n={name:t},i=e.axisMap.get(t);if(i){var r=i.get("type");n.type=Ay(r)}return n}))),n||(n=r&&(r.getDimensionsInfo?r.getDimensionsInfo():r.dimensions.slice())||["x","y"]),n}(e,a),l=n.useEncodeDefaulter,c=X(l)?l:l?j(Bd,s,e):null,u=Uy(i,{coordDimensions:s,generateCoord:n.generateCoord,encodeDefine:e.getEncode(),encodeDefaulter:c,canOmitUnusedDimensions:!o}),h=function(t,e,n){var i,r;return n&&R(t,(function(t,o){var a=t.coordDim,s=n.categoryAxisMap.get(a);s&&(null==i&&(i=o),t.ordinalMeta=s.getOrdinalMeta(),e&&(t.createInvertedIndices=!0)),null!=t.otherDims.itemName&&(r=!0)})),r||null==i||(t[i].otherDims.itemName=0),i}(u.dimensions,n.createInvertedIndices,a),d=o?null:r.getSharedDataStore(u),p=Jy(e,{schema:u,store:d}),f=new qy(u,e);f.setCalculationInfo(p);var g=null!=h&&function(t){if(t.sourceFormat===Td){var e=function(t){for(var e=0;e<t.length&&null==t[e];)e++;return t[e]}(t.data||[]);return!Y(xo(e))}}(i)?function(t,e,n,i){return i===h?n:this.defaultDimValueGetter(t,e,n,i)}:null;return f.hasItemOption=!1,f.initData(o?i:d,null,g),f}var ib=function(){function t(t){this._setting=t||{},this._extent=[1/0,-1/0]}return t.prototype.getSetting=function(t){return this._setting[t]},t.prototype.unionExtent=function(t){var e=this._extent;t[0]<e[0]&&(e[0]=t[0]),t[1]>e[1]&&(e[1]=t[1])},t.prototype.unionExtentFromData=function(t,e){this.unionExtent(t.getApproximateExtent(e))},t.prototype.getExtent=function(){return this._extent.slice()},t.prototype.setExtent=function(t,e){var n=this._extent;isNaN(t)||(n[0]=t),isNaN(e)||(n[1]=e)},t.prototype.isInExtentRange=function(t){return this._extent[0]<=t&&this._extent[1]>=t},t.prototype.isBlank=function(){return this._isBlank},t.prototype.setBlank=function(t){this._isBlank=t},t}();qo(ib);var rb=0,ob=function(){function t(t){this.categories=t.categories||[],this._needCollect=t.needCollect,this._deduplication=t.deduplication,this.uid=++rb}return t.createByAxisModel=function(e){var n=e.option,i=n.data,r=i&&B(i,ab);return new t({categories:r,needCollect:!r,deduplication:!1!==n.dedplication})},t.prototype.getOrdinal=function(t){return this._getOrCreateMap().get(t)},t.prototype.parseAndCollect=function(t){var e,n=this._needCollect;if(!G(t)&&!n)return t;if(n&&!this._deduplication)return e=this.categories.length,this.categories[e]=t,e;var i=this._getOrCreateMap();return null==(e=i.get(t))&&(n?(e=this.categories.length,this.categories[e]=t,i.set(t,e)):e=NaN),e},t.prototype._getOrCreateMap=function(){return this._map||(this._map=mt(this.categories))},t}();function ab(t){return $(t)&&null!=t.value?t.value:t+""}function sb(t){return"interval"===t.type||"log"===t.type}function lb(t){var e=Math.pow(10,io(t)),n=t/e;return n?2===n?n=3:3===n?n=5:n*=2:n=1,Yr(n*e)}function cb(t){return Gr(t)+2}function ub(t,e,n){t[e]=Math.max(Math.min(t[e],n[1]),n[0])}function hb(t,e){return t>=e[0]&&t<=e[1]}function db(t,e){return e[1]===e[0]?.5:(t-e[0])/(e[1]-e[0])}function pb(t,e){return t*(e[1]-e[0])+e[0]}var fb=function(t){function e(e){var n=t.call(this,e)||this;n.type="ordinal";var i=n.getSetting("ordinalMeta");return i||(i=new ob({})),Y(i)&&(i=new ob({categories:B(i,(function(t){return $(t)?t.value:t}))})),n._ordinalMeta=i,n._extent=n.getSetting("extent")||[0,i.categories.length-1],n}return n(e,t),e.prototype.parse=function(t){return null==t?NaN:G(t)?this._ordinalMeta.getOrdinal(t):Math.round(t)},e.prototype.contain=function(t){return hb(t=this.parse(t),this._extent)&&null!=this._ordinalMeta.categories[t]},e.prototype.normalize=function(t){return db(t=this._getTickNumber(this.parse(t)),this._extent)},e.prototype.scale=function(t){return t=Math.round(pb(t,this._extent)),this.getRawOrdinalNumber(t)},e.prototype.getTicks=function(){for(var t=[],e=this._extent,n=e[0];n<=e[1];)t.push({value:n}),n++;return t},e.prototype.getMinorTicks=function(t){},e.prototype.setSortInfo=function(t){if(null!=t){for(var e=t.ordinalNumbers,n=this._ordinalNumbersByTick=[],i=this._ticksByOrdinalNumber=[],r=0,o=this._ordinalMeta.categories.length,a=Math.min(o,e.length);r<a;++r){var s=e[r];n[r]=s,i[s]=r}for(var l=0;r<o;++r){for(;null!=i[l];)l++;n.push(l),i[l]=r}}else this._ordinalNumbersByTick=this._ticksByOrdinalNumber=null},e.prototype._getTickNumber=function(t){var e=this._ticksByOrdinalNumber;return e&&t>=0&&t<e.length?e[t]:t},e.prototype.getRawOrdinalNumber=function(t){var e=this._ordinalNumbersByTick;return e&&t>=0&&t<e.length?e[t]:t},e.prototype.getLabel=function(t){if(!this.isBlank()){var e=this.getRawOrdinalNumber(t.value),n=this._ordinalMeta.categories[e];return null==n?"":n+""}},e.prototype.count=function(){return this._extent[1]-this._extent[0]+1},e.prototype.unionExtentFromData=function(t,e){this.unionExtent(t.getApproximateExtent(e))},e.prototype.isInExtentRange=function(t){return t=this._getTickNumber(t),this._extent[0]<=t&&this._extent[1]>=t},e.prototype.getOrdinalMeta=function(){return this._ordinalMeta},e.prototype.calcNiceTicks=function(){},e.prototype.calcNiceExtent=function(){},e.type="ordinal",e}(ib);ib.registerClass(fb);var gb=Yr,mb=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="interval",e._interval=0,e._intervalPrecision=2,e}return n(e,t),e.prototype.parse=function(t){return t},e.prototype.contain=function(t){return hb(t,this._extent)},e.prototype.normalize=function(t){return db(t,this._extent)},e.prototype.scale=function(t){return pb(t,this._extent)},e.prototype.setExtent=function(t,e){var n=this._extent;isNaN(t)||(n[0]=parseFloat(t)),isNaN(e)||(n[1]=parseFloat(e))},e.prototype.unionExtent=function(t){var e=this._extent;t[0]<e[0]&&(e[0]=t[0]),t[1]>e[1]&&(e[1]=t[1]),this.setExtent(e[0],e[1])},e.prototype.getInterval=function(){return this._interval},e.prototype.setInterval=function(t){this._interval=t,this._niceExtent=this._extent.slice(),this._intervalPrecision=cb(t)},e.prototype.getTicks=function(t){var e=this._interval,n=this._extent,i=this._niceExtent,r=this._intervalPrecision,o=[];if(!e)return o;n[0]<i[0]&&(t?o.push({value:gb(i[0]-e,r)}):o.push({value:n[0]}));for(var a=i[0];a<=i[1]&&(o.push({value:a}),(a=gb(a+e,r))!==o[o.length-1].value);)if(o.length>1e4)return[];var s=o.length?o[o.length-1].value:i[1];return n[1]>s&&(t?o.push({value:gb(s+e,r)}):o.push({value:n[1]})),o},e.prototype.getMinorTicks=function(t){for(var e=this.getTicks(!0),n=[],i=this.getExtent(),r=1;r<e.length;r++){for(var o=e[r],a=e[r-1],s=0,l=[],c=(o.value-a.value)/t;s<t-1;){var u=gb(a.value+(s+1)*c);u>i[0]&&u<i[1]&&l.push(u),s++}n.push(l)}return n},e.prototype.getLabel=function(t,e){if(null==t)return"";var n=e&&e.precision;return null==n?n=Gr(t.value)||0:"auto"===n&&(n=this._intervalPrecision),ed(gb(t.value,n,!0))},e.prototype.calcNiceTicks=function(t,e,n){t=t||5;var i=this._extent,r=i[1]-i[0];if(isFinite(r)){r<0&&(r=-r,i.reverse());var o=function(t,e,n,i){var r={},o=t[1]-t[0],a=r.interval=ro(o/e,!0);null!=n&&a<n&&(a=r.interval=n),null!=i&&a>i&&(a=r.interval=i);var s=r.intervalPrecision=cb(a);return function(t,e){!isFinite(t[0])&&(t[0]=e[0]),!isFinite(t[1])&&(t[1]=e[1]),ub(t,0,e),ub(t,1,e),t[0]>t[1]&&(t[0]=t[1])}(r.niceTickExtent=[Yr(Math.ceil(t[0]/a)*a,s),Yr(Math.floor(t[1]/a)*a,s)],t),r}(i,t,e,n);this._intervalPrecision=o.intervalPrecision,this._interval=o.interval,this._niceExtent=o.niceTickExtent}},e.prototype.calcNiceExtent=function(t){var e=this._extent;if(e[0]===e[1])if(0!==e[0]){var n=Math.abs(e[0]);t.fixMax||(e[1]+=n/2),e[0]-=n/2}else e[1]=1;var i=e[1]-e[0];isFinite(i)||(e[0]=0,e[1]=1),this.calcNiceTicks(t.splitNumber,t.minInterval,t.maxInterval);var r=this._interval;t.fixMin||(e[0]=gb(Math.floor(e[0]/r)*r)),t.fixMax||(e[1]=gb(Math.ceil(e[1]/r)*r))},e.prototype.setNiceExtent=function(t,e){this._niceExtent=[t,e]},e.type="interval",e}(ib);ib.registerClass(mb);var vb="undefined"!=typeof Float32Array,yb=vb?Float32Array:Array;function bb(t){return Y(t)?vb?new Float32Array(t):t:new yb(t)}var xb="__ec_stack_";function _b(t){return t.get("stack")||xb+t.seriesIndex}function wb(t){return t.dim+t.index}function Sb(t,e){var n=[];return e.eachSeriesByType(t,(function(t){Tb(t)&&n.push(t)})),n}function Cb(t){var e=function(t){var e={};R(t,(function(t){var n=t.coordinateSystem.getBaseAxis();if("time"===n.type||"value"===n.type)for(var i=t.getData(),r=n.dim+"_"+n.index,o=i.getDimensionIndex(i.mapDimension(n.dim)),a=i.getStore(),s=0,l=a.count();s<l;++s){var c=a.get(o,s);e[r]?e[r].push(c):e[r]=[c]}}));var n={};for(var i in e)if(e.hasOwnProperty(i)){var r=e[i];if(r){r.sort((function(t,e){return t-e}));for(var o=null,a=1;a<r.length;++a){var s=r[a]-r[a-1];s>0&&(o=null===o?s:Math.min(o,s))}n[i]=o}}return n}(t),n=[];return R(t,(function(t){var i,r=t.coordinateSystem.getBaseAxis(),o=r.getExtent();if("category"===r.type)i=r.getBandWidth();else if("value"===r.type||"time"===r.type){var a=r.dim+"_"+r.index,s=e[a],l=Math.abs(o[1]-o[0]),c=r.scale.getExtent(),u=Math.abs(c[1]-c[0]);i=s?l/u*s:l}else{var h=t.getData();i=Math.abs(o[1]-o[0])/h.count()}var d=jr(t.get("barWidth"),i),p=jr(t.get("barMaxWidth"),i),f=jr(t.get("barMinWidth")||(Ib(t)?.5:1),i),g=t.get("barGap"),m=t.get("barCategoryGap");n.push({bandWidth:i,barWidth:d,barMaxWidth:p,barMinWidth:f,barGap:g,barCategoryGap:m,axisKey:wb(r),stackId:_b(t)})})),kb(n)}function kb(t){var e={};R(t,(function(t,n){var i=t.axisKey,r=t.bandWidth,o=e[i]||{bandWidth:r,remainedWidth:r,autoWidthCount:0,categoryGap:null,gap:"20%",stacks:{}},a=o.stacks;e[i]=o;var s=t.stackId;a[s]||o.autoWidthCount++,a[s]=a[s]||{width:0,maxWidth:0};var l=t.barWidth;l&&!a[s].width&&(a[s].width=l,l=Math.min(o.remainedWidth,l),o.remainedWidth-=l);var c=t.barMaxWidth;c&&(a[s].maxWidth=c);var u=t.barMinWidth;u&&(a[s].minWidth=u);var h=t.barGap;null!=h&&(o.gap=h);var d=t.barCategoryGap;null!=d&&(o.categoryGap=d)}));var n={};return R(e,(function(t,e){n[e]={};var i=t.stacks,r=t.bandWidth,o=t.categoryGap;if(null==o){var a=H(i).length;o=Math.max(35-4*a,15)+"%"}var s=jr(o,r),l=jr(t.gap,1),c=t.remainedWidth,u=t.autoWidthCount,h=(c-s)/(u+(u-1)*l);h=Math.max(h,0),R(i,(function(t){var e=t.maxWidth,n=t.minWidth;if(t.width)i=t.width,e&&(i=Math.min(i,e)),n&&(i=Math.max(i,n)),t.width=i,c-=i+l*i,u--;else{var i=h;e&&e<i&&(i=Math.min(e,c)),n&&n>i&&(i=n),i!==h&&(t.width=i,c-=i+l*i,u--)}})),h=(c-s)/(u+(u-1)*l),h=Math.max(h,0);var d,p=0;R(i,(function(t,e){t.width||(t.width=h),d=t,p+=t.width*(1+l)})),d&&(p-=d.width*l);var f=-p/2;R(i,(function(t,i){n[e][i]=n[e][i]||{bandWidth:r,offset:f,width:t.width},f+=t.width*(1+l)}))})),n}function Ab(t,e){var n=Sb(t,e),i=Cb(n);R(n,(function(t){var e=t.getData(),n=t.coordinateSystem.getBaseAxis(),r=_b(t),o=i[wb(n)][r],a=o.offset,s=o.width;e.setLayout({bandWidth:o.bandWidth,offset:a,size:s})}))}function Mb(t){return{seriesType:t,plan:dg(),reset:function(t){if(Tb(t)){var e=t.getData(),n=t.coordinateSystem,i=n.getBaseAxis(),r=n.getOtherAxis(i),o=e.getDimensionIndex(e.mapDimension(r.dim)),a=e.getDimensionIndex(e.mapDimension(i.dim)),s=t.get("showBackground",!0),l=e.mapDimension(r.dim),c=e.getCalculationInfo("stackResultDimension"),u=tb(e,l)&&!!e.getCalculationInfo("stackedOnSeries"),h=r.isHorizontal(),d=function(t,e){return e.toGlobalCoord(e.dataToCoord("log"===e.type?1:0))}(0,r),p=Ib(t),f=t.get("barMinHeight")||0,g=c&&e.getDimensionIndex(c),m=e.getLayout("size"),v=e.getLayout("offset");return{progress:function(t,e){for(var i,r=t.count,l=p&&bb(3*r),c=p&&s&&bb(3*r),y=p&&bb(r),b=n.master.getRect(),x=h?b.width:b.height,_=e.getStore(),w=0;null!=(i=t.next());){var S=_.get(u?g:o,i),C=_.get(a,i),k=d,A=void 0;u&&(A=+S-_.get(o,i));var M=void 0,T=void 0,I=void 0,E=void 0;if(h){var O=n.dataToPoint([S,C]);u&&(k=n.dataToPoint([A,C])[0]),M=k,T=O[1]+v,I=O[0]-k,E=m,Math.abs(I)<f&&(I=(I<0?-1:1)*f)}else O=n.dataToPoint([C,S]),u&&(k=n.dataToPoint([C,A])[1]),M=O[0]+v,T=k,I=m,E=O[1]-k,Math.abs(E)<f&&(E=(E<=0?-1:1)*f);p?(l[w]=M,l[w+1]=T,l[w+2]=h?I:E,c&&(c[w]=h?b.x:M,c[w+1]=h?T:b.y,c[w+2]=x),y[i]=i):e.setItemLayout(i,{x:M,y:T,width:I,height:E}),w+=3}p&&e.setLayout({largePoints:l,largeDataIndices:y,largeBackgroundPoints:c,valueAxisHorizontal:h})}}}}}}function Tb(t){return t.coordinateSystem&&"cartesian2d"===t.coordinateSystem.type}function Ib(t){return t.pipelineContext&&t.pipelineContext.large}var Eb=function(t){function e(e){var n=t.call(this,e)||this;return n.type="time",n}return n(e,t),e.prototype.getLabel=function(t){var e=this.getSetting("useUTC");return zh(t.value,Dh[function(t){switch(t){case"year":case"month":return"day";case"millisecond":return"millisecond";default:return"second"}}(Rh(this._minLevelUnit))]||Dh.second,e,this.getSetting("locale"))},e.prototype.getFormattedLabel=function(t,e,n){var i=this.getSetting("useUTC");return function(t,e,n,i,r){var o=null;if(G(n))o=n;else if(X(n))o=n(t.value,e,{level:t.level});else{var a=I({},Eh);if(t.level>0)for(var s=0;s<Lh.length;++s)a[Lh[s]]="{primary|"+a[Lh[s]]+"}";var l=n?!1===n.inherit?n:E(n,a):a,c=Fh(t.value,r);if(l[c])o=l[c];else if(l.inherit){for(s=Ph.indexOf(c)-1;s>=0;--s)if(l[c]){o=l[c];break}o=o||a.none}if(Y(o)){var u=null==t.level?0:t.level>=0?t.level:o.length+t.level;o=o[u=Math.min(u,o.length-1)]}}return zh(new Date(t.value),o,r,i)}(t,e,n,this.getSetting("locale"),i)},e.prototype.getTicks=function(){var t=this._interval,e=this._extent,n=[];if(!t)return n;n.push({value:e[0],level:0});var i=this.getSetting("useUTC"),r=function(t,e,n,i){var r=Ph,o=0;function a(t,e,n,r,o,a,s){for(var l=new Date(e),c=e,u=l[r]();c<n&&c<=i[1];)s.push({value:c}),u+=t,l[o](u),c=l.getTime();s.push({value:c,notAdd:!0})}function s(t,r,o){var s=[],l=!r.length;if(!function(t,e,n,i){var r=eo(e),o=eo(n),a=function(t){return Vh(r,t,i)===Vh(o,t,i)},s=function(){return a("year")},l=function(){return s()&&a("month")},c=function(){return l()&&a("day")},u=function(){return c()&&a("hour")},h=function(){return u()&&a("minute")},d=function(){return h()&&a("second")};switch(t){case"year":return s();case"month":return l();case"day":return c();case"hour":return u();case"minute":return h();case"second":return d();case"millisecond":return d()&&a("millisecond")}}(Rh(t),i[0],i[1],n)){l&&(r=[{value:Bb(new Date(i[0]),t,n)},{value:i[1]}]);for(var c=0;c<r.length-1;c++){var u=r[c].value,h=r[c+1].value;if(u!==h){var d=void 0,p=void 0,f=void 0;switch(t){case"year":d=Math.max(1,Math.round(e/Th/365)),p=Hh(n),f=Uh(n);break;case"half-year":case"quarter":case"month":d=Lb(e),p=Wh(n),f=$h(n);break;case"week":case"half-week":case"day":d=Db(e),p=jh(n),f=Zh(n),!0;break;case"half-day":case"quarter-day":case"hour":d=Pb(e),p=Yh(n),f=Kh(n);break;case"minute":d=Nb(e,!0),p=Xh(n),f=Qh(n);break;case"second":d=Nb(e,!1),p=Gh(n),f=Jh(n);break;case"millisecond":d=Rb(e),p=qh(n),f=td(n)}a(d,u,h,p,f,0,s),"year"===t&&o.length>1&&0===c&&o.unshift({value:o[0].value-d})}}for(c=0;c<s.length;c++)o.push(s[c]);return s}}for(var l=[],c=[],u=0,h=0,d=0;d<r.length&&o++<1e4;++d){var p=Rh(r[d]);if(Bh(r[d])&&(s(r[d],l[l.length-1]||[],c),p!==(r[d+1]?Rh(r[d+1]):null))){if(c.length){h=u,c.sort((function(t,e){return t.value-e.value}));for(var f=[],g=0;g<c.length;++g){var m=c[g].value;0!==g&&c[g-1].value===m||(f.push(c[g]),m>=i[0]&&m<=i[1]&&u++)}var v=(i[1]-i[0])/e;if(u>1.5*v&&h>v/1.5)break;if(l.push(f),u>v||t===r[d])break}c=[]}}var y=F(B(l,(function(t){return F(t,(function(t){return t.value>=i[0]&&t.value<=i[1]&&!t.notAdd}))})),(function(t){return t.length>0})),b=[],x=y.length-1;for(d=0;d<y.length;++d)for(var _=y[d],w=0;w<_.length;++w)b.push({value:_[w].value,level:x-d});b.sort((function(t,e){return t.value-e.value}));var S=[];for(d=0;d<b.length;++d)0!==d&&b[d].value===b[d-1].value||S.push(b[d]);return S}(this._minLevelUnit,this._approxInterval,i,e);return(n=n.concat(r)).push({value:e[1],level:0}),n},e.prototype.calcNiceExtent=function(t){var e=this._extent;if(e[0]===e[1]&&(e[0]-=Th,e[1]+=Th),e[1]===-1/0&&e[0]===1/0){var n=new Date;e[1]=+new Date(n.getFullYear(),n.getMonth(),n.getDate()),e[0]=e[1]-Th}this.calcNiceTicks(t.splitNumber,t.minInterval,t.maxInterval)},e.prototype.calcNiceTicks=function(t,e,n){t=t||10;var i=this._extent,r=i[1]-i[0];this._approxInterval=r/t,null!=e&&this._approxInterval<e&&(this._approxInterval=e),null!=n&&this._approxInterval>n&&(this._approxInterval=n);var o=Ob.length,a=Math.min(function(t,e,n,i){for(;n<i;){var r=n+i>>>1;t[r][1]<e?n=r+1:i=r}return n}(Ob,this._approxInterval,0,o),o-1);this._interval=Ob[a][1],this._minLevelUnit=Ob[Math.max(a-1,0)][0]},e.prototype.parse=function(t){return U(t)?t:+eo(t)},e.prototype.contain=function(t){return hb(this.parse(t),this._extent)},e.prototype.normalize=function(t){return db(this.parse(t),this._extent)},e.prototype.scale=function(t){return pb(t,this._extent)},e.type="time",e}(mb),Ob=[["second",1e3],["minute",6e4],["hour",Mh],["quarter-day",216e5],["half-day",432e5],["day",10368e4],["half-week",3024e5],["week",6048e5],["month",26784e5],["quarter",8208e6],["half-year",Ih/2],["year",Ih]];function Db(t,e){return(t/=Th)>16?16:t>7.5?7:t>3.5?4:t>1.5?2:1}function Lb(t){return(t/=2592e6)>6?6:t>3?3:t>2?2:1}function Pb(t){return(t/=Mh)>12?12:t>6?6:t>3.5?4:t>2?2:1}function Nb(t,e){return(t/=e?6e4:1e3)>30?30:t>20?20:t>15?15:t>10?10:t>5?5:t>2?2:1}function Rb(t){return ro(t,!0)}function Bb(t,e,n){var i=new Date(t);switch(Rh(e)){case"year":case"month":i[$h(n)](0);case"day":i[Zh(n)](1);case"hour":i[Kh(n)](0);case"minute":i[Qh(n)](0);case"second":i[Jh(n)](0),i[td(n)](0)}return i.getTime()}ib.registerClass(Eb);var zb=ib.prototype,Fb=mb.prototype,Vb=Yr,Hb=Math.floor,Wb=Math.ceil,jb=Math.pow,Yb=Math.log,Xb=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="log",e.base=10,e._originalScale=new mb,e._interval=0,e}return n(e,t),e.prototype.getTicks=function(t){var e=this._originalScale,n=this._extent,i=e.getExtent();return B(Fb.getTicks.call(this,t),(function(t){var e=t.value,r=Yr(jb(this.base,e));return r=e===n[0]&&this._fixMin?qb(r,i[0]):r,{value:r=e===n[1]&&this._fixMax?qb(r,i[1]):r}}),this)},e.prototype.setExtent=function(t,e){var n=Yb(this.base);t=Yb(Math.max(0,t))/n,e=Yb(Math.max(0,e))/n,Fb.setExtent.call(this,t,e)},e.prototype.getExtent=function(){var t=this.base,e=zb.getExtent.call(this);e[0]=jb(t,e[0]),e[1]=jb(t,e[1]);var n=this._originalScale.getExtent();return this._fixMin&&(e[0]=qb(e[0],n[0])),this._fixMax&&(e[1]=qb(e[1],n[1])),e},e.prototype.unionExtent=function(t){this._originalScale.unionExtent(t);var e=this.base;t[0]=Yb(t[0])/Yb(e),t[1]=Yb(t[1])/Yb(e),zb.unionExtent.call(this,t)},e.prototype.unionExtentFromData=function(t,e){this.unionExtent(t.getApproximateExtent(e))},e.prototype.calcNiceTicks=function(t){t=t||10;var e=this._extent,n=e[1]-e[0];if(!(n===1/0||n<=0)){var i=no(n);for(t/n*i<=.5&&(i*=10);!isNaN(i)&&Math.abs(i)<1&&Math.abs(i)>0;)i*=10;var r=[Yr(Wb(e[0]/i)*i),Yr(Hb(e[1]/i)*i)];this._interval=i,this._niceExtent=r}},e.prototype.calcNiceExtent=function(t){Fb.calcNiceExtent.call(this,t),this._fixMin=t.fixMin,this._fixMax=t.fixMax},e.prototype.parse=function(t){return t},e.prototype.contain=function(t){return hb(t=Yb(t)/Yb(this.base),this._extent)},e.prototype.normalize=function(t){return db(t=Yb(t)/Yb(this.base),this._extent)},e.prototype.scale=function(t){return t=pb(t,this._extent),jb(this.base,t)},e.type="log",e}(ib),Gb=Xb.prototype;function qb(t,e){return Vb(t,Gr(e))}Gb.getMinorTicks=Fb.getMinorTicks,Gb.getLabel=Fb.getLabel,ib.registerClass(Xb);var Ub=function(){function t(t,e,n){this._prepareParams(t,e,n)}return t.prototype._prepareParams=function(t,e,n){n[1]<n[0]&&(n=[NaN,NaN]),this._dataMin=n[0],this._dataMax=n[1];var i=this._isOrdinal="ordinal"===t.type;this._needCrossZero="interval"===t.type&&e.getNeedCrossZero&&e.getNeedCrossZero();var r=this._modelMinRaw=e.get("min",!0);X(r)?this._modelMinNum=Qb(t,r({min:n[0],max:n[1]})):"dataMin"!==r&&(this._modelMinNum=Qb(t,r));var o=this._modelMaxRaw=e.get("max",!0);if(X(o)?this._modelMaxNum=Qb(t,o({min:n[0],max:n[1]})):"dataMax"!==o&&(this._modelMaxNum=Qb(t,o)),i)this._axisDataLen=e.getCategories().length;else{var a=e.get("boundaryGap"),s=Y(a)?a:[a||0,a||0];"boolean"==typeof s[0]||"boolean"==typeof s[1]?this._boundaryGapInner=[0,0]:this._boundaryGapInner=[xr(s[0],1),xr(s[1],1)]}},t.prototype.calculate=function(){var t=this._isOrdinal,e=this._dataMin,n=this._dataMax,i=this._axisDataLen,r=this._boundaryGapInner,o=t?null:n-e||Math.abs(e),a="dataMin"===this._modelMinRaw?e:this._modelMinNum,s="dataMax"===this._modelMaxRaw?n:this._modelMaxNum,l=null!=a,c=null!=s;null==a&&(a=t?i?0:NaN:e-r[0]*o),null==s&&(s=t?i?i-1:NaN:n+r[1]*o),(null==a||!isFinite(a))&&(a=NaN),(null==s||!isFinite(s))&&(s=NaN);var u=nt(a)||nt(s)||t&&!i;this._needCrossZero&&(a>0&&s>0&&!l&&(a=0),a<0&&s<0&&!c&&(s=0));var h=this._determinedMin,d=this._determinedMax;return null!=h&&(a=h,l=!0),null!=d&&(s=d,c=!0),{min:a,max:s,minFixed:l,maxFixed:c,isBlank:u}},t.prototype.modifyDataMinMax=function(t,e){this[Zb[t]]=e},t.prototype.setDeterminedMinMax=function(t,e){this[$b[t]]=e},t.prototype.freeze=function(){this.frozen=!0},t}(),$b={min:"_determinedMin",max:"_determinedMax"},Zb={min:"_dataMin",max:"_dataMax"};function Kb(t,e,n){var i=t.rawExtentInfo;return i||(i=new Ub(t,e,n),t.rawExtentInfo=i,i)}function Qb(t,e){return null==e?null:nt(e)?NaN:t.parse(e)}function Jb(t,e){var n=t.type,i=Kb(t,e,t.getExtent()).calculate();t.setBlank(i.isBlank);var r=i.min,o=i.max,a=e.ecModel;if(a&&"time"===n){var s=Sb("bar",a),l=!1;if(R(s,(function(t){l=l||t.getBaseAxis()===e.axis})),l){var c=Cb(s),u=function(t,e,n,i){var r=n.axis.getExtent(),o=r[1]-r[0],a=function(t,e,n){if(t&&e){var i=t[wb(e)];return i}}(i,n.axis);if(void 0===a)return{min:t,max:e};var s=1/0;R(a,(function(t){s=Math.min(t.offset,s)}));var l=-1/0;R(a,(function(t){l=Math.max(t.offset+t.width,l)})),s=Math.abs(s),l=Math.abs(l);var c=s+l,u=e-t,h=u/(1-(s+l)/o)-u;return{min:t-=h*(s/c),max:e+=h*(l/c)}}(r,o,e,c);r=u.min,o=u.max}}return{extent:[r,o],fixMin:i.minFixed,fixMax:i.maxFixed}}function tx(t,e){var n=e,i=Jb(t,n),r=i.extent,o=n.get("splitNumber");t instanceof Xb&&(t.base=n.get("logBase"));var a=t.type,s=n.get("interval"),l="interval"===a||"time"===a;t.setExtent(r[0],r[1]),t.calcNiceExtent({splitNumber:o,fixMin:i.fixMin,fixMax:i.fixMax,minInterval:l?n.get("minInterval"):null,maxInterval:l?n.get("maxInterval"):null}),null!=s&&t.setInterval&&t.setInterval(s)}function ex(t,e){if(e=e||t.get("type"))switch(e){case"category":return new fb({ordinalMeta:t.getOrdinalMeta?t.getOrdinalMeta():t.getCategories(),extent:[1/0,-1/0]});case"time":return new Eb({locale:t.ecModel.getLocaleModel(),useUTC:t.ecModel.get("useUTC")});default:return new(ib.getClass(e)||mb)}}function nx(t){var e,n,i=t.getLabelModel().get("formatter"),r="category"===t.type?t.scale.getExtent()[0]:null;return"time"===t.scale.type?(n=i,function(e,i){return t.scale.getFormattedLabel(e,i,n)}):G(i)?function(e){return function(n){var i=t.scale.getLabel(n);return e.replace("{value}",null!=i?i:"")}}(i):X(i)?(e=i,function(n,i){return null!=r&&(i=n.value-r),e(ix(t,n),i,null!=n.level?{level:n.level}:null)}):function(e){return t.scale.getLabel(e)}}function ix(t,e){return"category"===t.type?t.scale.getLabel(e):e.value}function rx(t,e){var n=e*Math.PI/180,i=t.width,r=t.height,o=i*Math.abs(Math.cos(n))+Math.abs(r*Math.sin(n)),a=i*Math.abs(Math.sin(n))+Math.abs(r*Math.cos(n));return new Re(t.x,t.y,o,a)}function ox(t){var e=t.get("interval");return null==e?"auto":e}function ax(t){return"category"===t.type&&0===ox(t.getLabelModel())}function sx(t,e){var n={};return R(t.mapDimensionsAll(e),(function(e){n[eb(t,e)]=!0})),H(n)}var lx=function(){function t(){}return t.prototype.getNeedCrossZero=function(){return!this.option.scale},t.prototype.getCoordSysModel=function(){},t}(),cx={isDimensionStacked:tb,enableDataStack:Jy,getStackedDimension:eb},ux=Object.freeze({__proto__:null,createList:function(t){return nb(null,t)},getLayoutRect:md,dataStack:cx,createScale:function(t,e){var n=e;e instanceof gh||(n=new gh(e));var i=ex(n);return i.setExtent(t[0],t[1]),tx(i,n),i},mixinAxisModelCommonMethods:function(t){P(t,lx)},getECData:$s,createTextStyle:function(t,e){return qu(t,null,null,"normal"!==(e=e||{}).state)},createDimensions:function(t,e){return Uy(t,e).dimensions},createSymbol:Mm,enableHoverEmphasis:Rl});function hx(t,e){return Math.abs(t-e)<1e-8}function dx(t,e,n){var i=0,r=t[0];if(!r)return!1;for(var o=1;o<t.length;o++){var a=t[o];i+=cs(r[0],r[1],a[0],a[1],e,n),r=a}var s=t[0];return hx(r[0],s[0])&&hx(r[1],s[1])||(i+=cs(r[0],r[1],s[0],s[1],e,n)),0!==i}var px=[];function fx(t,e){for(var n=0;n<t.length;n++)Wt(t[n],t[n],e)}function gx(t,e,n,i){for(var r=0;r<t.length;r++){var o=t[r];i&&(o=i.project(o)),o&&isFinite(o[0])&&isFinite(o[1])&&(jt(e,e,o),Yt(n,n,o))}}var mx=function(){function t(t){this.name=t}return t.prototype.setCenter=function(t){this._center=t},t.prototype.getCenter=function(){var t=this._center;return t||(t=this._center=this.calcCenter()),t},t}(),vx=function(t,e){this.type="polygon",this.exterior=t,this.interiors=e},yx=function(t){this.type="linestring",this.points=t},bx=function(t){function e(e,n,i){var r=t.call(this,e)||this;return r.type="geoJSON",r.geometries=n,r._center=i&&[i[0],i[1]],r}return n(e,t),e.prototype.calcCenter=function(){for(var t,e=this.geometries,n=0,i=0;i<e.length;i++){var r=e[i],o=r.exterior,a=o&&o.length;a>n&&(t=r,n=a)}if(t)return function(t){for(var e=0,n=0,i=0,r=t.length,o=t[r-1][0],a=t[r-1][1],s=0;s<r;s++){var l=t[s][0],c=t[s][1],u=o*c-l*a;e+=u,n+=(o+l)*u,i+=(a+c)*u,o=l,a=c}return e?[n/e/3,i/e/3,e]:[t[0][0]||0,t[0][1]||0]}(t.exterior);var s=this.getBoundingRect();return[s.x+s.width/2,s.y+s.height/2]},e.prototype.getBoundingRect=function(t){var e=this._rect;if(e&&!t)return e;var n=[1/0,1/0],i=[-1/0,-1/0];return R(this.geometries,(function(e){"polygon"===e.type?gx(e.exterior,n,i,t):R(e.points,(function(e){gx(e,n,i,t)}))})),isFinite(n[0])&&isFinite(n[1])&&isFinite(i[0])&&isFinite(i[1])||(n[0]=n[1]=i[0]=i[1]=0),e=new Re(n[0],n[1],i[0]-n[0],i[1]-n[1]),t||(this._rect=e),e},e.prototype.contain=function(t){var e=this.getBoundingRect(),n=this.geometries;if(!e.contain(t[0],t[1]))return!1;t:for(var i=0,r=n.length;i<r;i++){var o=n[i];if("polygon"===o.type){var a=o.exterior,s=o.interiors;if(dx(a,t[0],t[1])){for(var l=0;l<(s?s.length:0);l++)if(dx(s[l],t[0],t[1]))continue t;return!0}}}return!1},e.prototype.transformTo=function(t,e,n,i){var r=this.getBoundingRect(),o=r.width/r.height;n?i||(i=n/o):n=o*i;for(var a=new Re(t,e,n,i),s=r.calculateTransform(a),l=this.geometries,c=0;c<l.length;c++){var u=l[c];"polygon"===u.type?(fx(u.exterior,s),R(u.interiors,(function(t){fx(t,s)}))):R(u.points,(function(t){fx(t,s)}))}(r=this._rect).copy(a),this._center=[r.x+r.width/2,r.y+r.height/2]},e.prototype.cloneShallow=function(t){null==t&&(t=this.name);var n=new e(t,this.geometries,this._center);return n._rect=this._rect,n.transformTo=null,n},e}(mx),xx=function(t){function e(e,n){var i=t.call(this,e)||this;return i.type="geoSVG",i._elOnlyForCalculate=n,i}return n(e,t),e.prototype.calcCenter=function(){for(var t=this._elOnlyForCalculate,e=t.getBoundingRect(),n=[e.x+e.width/2,e.y+e.height/2],i=ye(px),r=t;r&&!r.isGeoSVGGraphicRoot;)xe(i,r.getLocalTransform(),i),r=r.parent;return Ce(i,i),Wt(n,n,i),n},e}(mx);function _x(t,e,n){for(var i=0;i<t.length;i++)t[i]=Sx(t[i],e[i],n)}function Sx(t,e,n){for(var i=[],r=e[0],o=e[1],a=0;a<t.length;a+=2){var s=t.charCodeAt(a)-64,l=t.charCodeAt(a+1)-64;s=s>>1^-(1&s),l=l>>1^-(1&l),r=s+=r,o=l+=o,i.push([s/n,l/n])}return i}function Cx(t,e){return B(F((t=function(t){if(!t.UTF8Encoding)return t;var e=t,n=e.UTF8Scale;return null==n&&(n=1024),R(e.features,(function(t){var e=t.geometry,i=e.encodeOffsets,r=e.coordinates;if(i)switch(e.type){case"LineString":e.coordinates=Sx(r,i,n);break;case"Polygon":case"MultiLineString":_x(r,i,n);break;case"MultiPolygon":R(r,(function(t,e){return _x(t,i[e],n)}))}})),e.UTF8Encoding=!1,e}(t)).features,(function(t){return t.geometry&&t.properties&&t.geometry.coordinates.length>0})),(function(t){var n=t.properties,i=t.geometry,r=[];switch(i.type){case"Polygon":var o=i.coordinates;r.push(new vx(o[0],o.slice(1)));break;case"MultiPolygon":R(i.coordinates,(function(t){t[0]&&r.push(new vx(t[0],t.slice(1)))}));break;case"LineString":r.push(new yx([i.coordinates]));break;case"MultiLineString":r.push(new yx(i.coordinates))}var a=new bx(n[e||"name"],r,n.cp);return a.properties=n,a}))}var kx=Object.freeze({__proto__:null,linearMap:Wr,round:Yr,asc:Xr,getPrecision:Gr,getPrecisionSafe:qr,getPixelPrecision:Ur,getPercentWithPrecision:function(t,e,n){return t[e]&&$r(t,n)[e]||0},MAX_SAFE_INTEGER:Kr,remRadian:Qr,isRadianAroundZero:Jr,parseDate:eo,quantity:no,quantityExponent:io,nice:ro,quantile:oo,reformIntervals:ao,isNumeric:lo,numericToNumber:so}),Ax=Object.freeze({__proto__:null,parse:eo,format:zh}),Mx=Object.freeze({__proto__:null,extendShape:mu,extendPath:vu,makePath:xu,makeImage:_u,mergePath:Su,resizePath:Cu,createIcon:Pu,updateProps:au,initProps:su,getTransform:Mu,clipPointsByRect:Du,clipRectByRect:Lu,registerShape:yu,getShapeClass:bu,Group:Dr,Image:As,Text:Rs,Circle:pc,Ellipse:gc,Sector:Ic,Ring:Oc,Polygon:Pc,Polyline:Rc,Rect:Ls,Line:Fc,BezierCurve:jc,Arc:Xc,IncrementalDisplayable:nu,CompoundPath:Gc,LinearGradient:Uc,RadialGradient:$c,BoundingRect:Re}),Tx=Object.freeze({__proto__:null,addCommas:ed,toCamelCase:nd,normalizeCssArray:id,encodeHTML:re,formatTpl:sd,getTooltipMarker:ld,formatTime:function(t,e,n){"week"!==t&&"month"!==t&&"quarter"!==t&&"half-year"!==t&&"year"!==t||(t="MM-dd\nyyyy");var i=eo(e),r=n?"getUTC":"get",o=i[r+"FullYear"](),a=i[r+"Month"]()+1,s=i[r+"Date"](),l=i[r+"Hours"](),c=i[r+"Minutes"](),u=i[r+"Seconds"](),h=i[r+"Milliseconds"]();return t.replace("MM",Nh(a,2)).replace("M",a).replace("yyyy",o).replace("yy",Nh(o%100+"",2)).replace("dd",Nh(s,2)).replace("d",s).replace("hh",Nh(l,2)).replace("h",l).replace("mm",Nh(c,2)).replace("m",c).replace("ss",Nh(u,2)).replace("s",u).replace("SSS",Nh(h,3))},capitalFirst:function(t){return t?t.charAt(0).toUpperCase()+t.substr(1):t},truncateText:ia,getTextRect:function(t,e,n,i,r,o,a,s){return new Rs({style:{text:t,font:e,align:n,verticalAlign:i,padding:r,rich:o,overflow:a?"truncate":null,lineHeight:s}}).getBoundingRect()}}),Ix=Object.freeze({__proto__:null,map:B,each:R,indexOf:D,inherits:L,reduce:z,filter:F,bind:W,curry:j,isArray:Y,isString:G,isObject:$,isFunction:X,extend:I,defaults:E,clone:A,merge:M}),Ex=Io();function Ox(t,e){var n,i,r=Dx(t,"labels"),o=ox(e);return Lx(r,o)||(X(o)?n=Rx(t,o):(i="auto"===o?function(t){var e=Ex(t).autoInterval;return null!=e?e:Ex(t).autoInterval=t.calculateCategoryInterval()}(t):o,n=Nx(t,i)),Px(r,o,{labels:n,labelCategoryInterval:i}))}function Dx(t,e){return Ex(t)[e]||(Ex(t)[e]=[])}function Lx(t,e){for(var n=0;n<t.length;n++)if(t[n].key===e)return t[n].value}function Px(t,e,n){return t.push({key:e,value:n}),n}function Nx(t,e,n){var i=nx(t),r=t.scale,o=r.getExtent(),a=t.getLabelModel(),s=[],l=Math.max((e||0)+1,1),c=o[0],u=r.count();0!==c&&l>1&&u/l>2&&(c=Math.round(Math.ceil(c/l)*l));var h=ax(t),d=a.get("showMinLabel")||h,p=a.get("showMaxLabel")||h;d&&c!==o[0]&&g(o[0]);for(var f=c;f<=o[1];f+=l)g(f);function g(t){var e={value:t};s.push(n?t:{formattedLabel:i(e),rawLabel:r.getLabel(e),tickValue:t})}return p&&f-l!==o[1]&&g(o[1]),s}function Rx(t,e,n){var i=t.scale,r=nx(t),o=[];return R(i.getTicks(),(function(t){var a=i.getLabel(t),s=t.value;e(t.value,a)&&o.push(n?s:{formattedLabel:r(t),rawLabel:a,tickValue:s})})),o}var Bx=[0,1],zx=function(){function t(t,e,n){this.onBand=!1,this.inverse=!1,this.dim=t,this.scale=e,this._extent=n||[0,0]}return t.prototype.contain=function(t){var e=this._extent,n=Math.min(e[0],e[1]),i=Math.max(e[0],e[1]);return t>=n&&t<=i},t.prototype.containData=function(t){return this.scale.contain(t)},t.prototype.getExtent=function(){return this._extent.slice()},t.prototype.getPixelPrecision=function(t){return Ur(t||this.scale.getExtent(),this._extent)},t.prototype.setExtent=function(t,e){var n=this._extent;n[0]=t,n[1]=e},t.prototype.dataToCoord=function(t,e){var n=this._extent,i=this.scale;return t=i.normalize(t),this.onBand&&"ordinal"===i.type&&Fx(n=n.slice(),i.count()),Wr(t,Bx,n,e)},t.prototype.coordToData=function(t,e){var n=this._extent,i=this.scale;this.onBand&&"ordinal"===i.type&&Fx(n=n.slice(),i.count());var r=Wr(t,n,Bx,e);return this.scale.scale(r)},t.prototype.pointToData=function(t,e){},t.prototype.getTicksCoords=function(t){var e=(t=t||{}).tickModel||this.getTickModel(),n=B(function(t,e){return"category"===t.type?function(t,e){var n,i,r=Dx(t,"ticks"),o=ox(e),a=Lx(r,o);if(a)return a;if(e.get("show")&&!t.scale.isBlank()||(n=[]),X(o))n=Rx(t,o,!0);else if("auto"===o){var s=Ox(t,t.getLabelModel());i=s.labelCategoryInterval,n=B(s.labels,(function(t){return t.tickValue}))}else n=Nx(t,i=o,!0);return Px(r,o,{ticks:n,tickCategoryInterval:i})}(t,e):{ticks:B(t.scale.getTicks(),(function(t){return t.value}))}}(this,e).ticks,(function(t){return{coord:this.dataToCoord("ordinal"===this.scale.type?this.scale.getRawOrdinalNumber(t):t),tickValue:t}}),this);return function(t,e,n,i){var r=e.length;if(t.onBand&&!n&&r){var o,a,s=t.getExtent();if(1===r)e[0].coord=s[0],o=e[1]={coord:s[1]};else{var l=e[r-1].tickValue-e[0].tickValue,c=(e[r-1].coord-e[0].coord)/l;R(e,(function(t){t.coord-=c/2})),a=1+t.scale.getExtent()[1]-e[r-1].tickValue,o={coord:e[r-1].coord+c*a},e.push(o)}var u=s[0]>s[1];h(e[0].coord,s[0])&&(i?e[0].coord=s[0]:e.shift()),i&&h(s[0],e[0].coord)&&e.unshift({coord:s[0]}),h(s[1],o.coord)&&(i?o.coord=s[1]:e.pop()),i&&h(o.coord,s[1])&&e.push({coord:s[1]})}function h(t,e){return t=Yr(t),e=Yr(e),u?t>e:t<e}}(this,n,e.get("alignWithLabel"),t.clamp),n},t.prototype.getMinorTicksCoords=function(){if("ordinal"===this.scale.type)return[];var t=this.model.getModel("minorTick").get("splitNumber");return t>0&&t<100||(t=5),B(this.scale.getMinorTicks(t),(function(t){return B(t,(function(t){return{coord:this.dataToCoord(t),tickValue:t}}),this)}),this)},t.prototype.getViewLabels=function(){return function(t){return"category"===t.type?function(t){var e=t.getLabelModel(),n=Ox(t,e);return!e.get("show")||t.scale.isBlank()?{labels:[],labelCategoryInterval:n.labelCategoryInterval}:n}(t):function(t){var e=t.scale.getTicks(),n=nx(t);return{labels:B(e,(function(e,i){return{level:e.level,formattedLabel:n(e,i),rawLabel:t.scale.getLabel(e),tickValue:e.value}}))}}(t)}(this).labels},t.prototype.getLabelModel=function(){return this.model.getModel("axisLabel")},t.prototype.getTickModel=function(){return this.model.getModel("axisTick")},t.prototype.getBandWidth=function(){var t=this._extent,e=this.scale.getExtent(),n=e[1]-e[0]+(this.onBand?1:0);0===n&&(n=1);var i=Math.abs(t[1]-t[0]);return Math.abs(i)/n},t.prototype.calculateCategoryInterval=function(){return function(t){var e=function(t){var e=t.getLabelModel();return{axisRotate:t.getRotate?t.getRotate():t.isHorizontal&&!t.isHorizontal()?90:0,labelRotate:e.get("rotate")||0,font:e.getFont()}}(t),n=nx(t),i=(e.axisRotate-e.labelRotate)/180*Math.PI,r=t.scale,o=r.getExtent(),a=r.count();if(o[1]-o[0]<1)return 0;var s=1;a>40&&(s=Math.max(1,Math.floor(a/40)));for(var l=o[0],c=t.dataToCoord(l+1)-t.dataToCoord(l),u=Math.abs(c*Math.cos(i)),h=Math.abs(c*Math.sin(i)),d=0,p=0;l<=o[1];l+=s){var f,g,m=mr(n({value:l}),e.font,"center","top");f=1.3*m.width,g=1.3*m.height,d=Math.max(d,f,7),p=Math.max(p,g,7)}var v=d/u,y=p/h;isNaN(v)&&(v=1/0),isNaN(y)&&(y=1/0);var b=Math.max(0,Math.floor(Math.min(v,y))),x=Ex(t.model),_=t.getExtent(),w=x.lastAutoInterval,S=x.lastTickCount;return null!=w&&null!=S&&Math.abs(w-b)<=1&&Math.abs(S-a)<=1&&w>b&&x.axisExtent0===_[0]&&x.axisExtent1===_[1]?b=w:(x.lastTickCount=a,x.lastAutoInterval=b,x.axisExtent0=_[0],x.axisExtent1=_[1]),b}(this)},t}();function Fx(t,e){var n=(t[1]-t[0])/e/2;t[0]+=n,t[1]-=n}var Vx=2*Math.PI,Hx=es.CMD,Wx=["top","right","bottom","left"];function jx(t,e,n,i,r){var o=n.width,a=n.height;switch(t){case"top":i.set(n.x+o/2,n.y-e),r.set(0,-1);break;case"bottom":i.set(n.x+o/2,n.y+a+e),r.set(0,1);break;case"left":i.set(n.x-e,n.y+a/2),r.set(-1,0);break;case"right":i.set(n.x+o+e,n.y+a/2),r.set(1,0)}}function Yx(t,e,n,i,r,o,a,s,l){a-=t,s-=e;var c=Math.sqrt(a*a+s*s),u=(a/=c)*n+t,h=(s/=c)*n+e;if(Math.abs(i-r)%Vx<1e-4)return l[0]=u,l[1]=h,c-n;if(o){var d=i;i=as(r),r=as(d)}else i=as(i),r=as(r);i>r&&(r+=Vx);var p=Math.atan2(s,a);if(p<0&&(p+=Vx),p>=i&&p<=r||p+Vx>=i&&p+Vx<=r)return l[0]=u,l[1]=h,c-n;var f=n*Math.cos(i)+t,g=n*Math.sin(i)+e,m=n*Math.cos(r)+t,v=n*Math.sin(r)+e,y=(f-a)*(f-a)+(g-s)*(g-s),b=(m-a)*(m-a)+(v-s)*(v-s);return y<b?(l[0]=f,l[1]=g,Math.sqrt(y)):(l[0]=m,l[1]=v,Math.sqrt(b))}function Xx(t,e,n,i,r,o,a,s){var l=r-t,c=o-e,u=n-t,h=i-e,d=Math.sqrt(u*u+h*h),p=(l*(u/=d)+c*(h/=d))/d;s&&(p=Math.min(Math.max(p,0),1)),p*=d;var f=a[0]=t+p*u,g=a[1]=e+p*h;return Math.sqrt((f-r)*(f-r)+(g-o)*(g-o))}function Gx(t,e,n,i,r,o,a){n<0&&(t+=n,n=-n),i<0&&(e+=i,i=-i);var s=t+n,l=e+i,c=a[0]=Math.min(Math.max(r,t),s),u=a[1]=Math.min(Math.max(o,e),l);return Math.sqrt((c-r)*(c-r)+(u-o)*(u-o))}var qx=[];function Ux(t,e,n){var i=Gx(e.x,e.y,e.width,e.height,t.x,t.y,qx);return n.set(qx[0],qx[1]),i}function $x(t,e,n){for(var i,r,o=0,a=0,s=0,l=0,c=1/0,u=e.data,h=t.x,d=t.y,p=0;p<u.length;){var f=u[p++];1===p&&(s=o=u[p],l=a=u[p+1]);var g=c;switch(f){case Hx.M:o=s=u[p++],a=l=u[p++];break;case Hx.L:g=Xx(o,a,u[p],u[p+1],h,d,qx,!0),o=u[p++],a=u[p++];break;case Hx.C:g=xn(o,a,u[p++],u[p++],u[p++],u[p++],u[p],u[p+1],h,d,qx),o=u[p++],a=u[p++];break;case Hx.Q:g=An(o,a,u[p++],u[p++],u[p],u[p+1],h,d,qx),o=u[p++],a=u[p++];break;case Hx.A:var m=u[p++],v=u[p++],y=u[p++],b=u[p++],x=u[p++],_=u[p++];p+=1;var w=!!(1-u[p++]);i=Math.cos(x)*y+m,r=Math.sin(x)*b+v,p<=1&&(s=i,l=r),g=Yx(m,v,b,x,x+_,w,(h-m)*b/y+m,d,qx),o=Math.cos(x+_)*y+m,a=Math.sin(x+_)*b+v;break;case Hx.R:g=Gx(s=o=u[p++],l=a=u[p++],u[p++],u[p++],h,d,qx);break;case Hx.Z:g=Xx(o,a,s,l,h,d,qx,!0),o=s,a=l}g<c&&(c=g,n.set(qx[0],qx[1]))}return c}var Zx=new Me,Kx=new Me,Qx=new Me,Jx=new Me,t_=new Me;function e_(t,e){if(t){var n=t.getTextGuideLine(),i=t.getTextContent();if(i&&n){var r=t.textGuideLineConfig||{},o=[[0,0],[0,0],[0,0]],a=r.candidates||Wx,s=i.getBoundingRect().clone();s.applyTransform(i.getComputedTransform());var l=1/0,c=r.anchor,u=t.getComputedTransform(),h=u&&Ce([],u),d=e.get("length2")||0;c&&Qx.copy(c);for(var p=0;p<a.length;p++){jx(a[p],0,s,Zx,Jx),Me.scaleAndAdd(Kx,Zx,Jx,d),Kx.transform(h);var f=t.getBoundingRect(),g=c?c.distance(Kx):t instanceof _s?$x(Kx,t.path,Qx):Ux(Kx,f,Qx);g<l&&(l=g,Kx.transform(u),Qx.transform(u),Qx.toArray(o[0]),Kx.toArray(o[1]),Zx.toArray(o[2]))}r_(o,e.get("minTurnAngle")),n.setShape({points:o})}}}var n_=[],i_=new Me;function r_(t,e){if(e<=180&&e>0){e=e/180*Math.PI,Zx.fromArray(t[0]),Kx.fromArray(t[1]),Qx.fromArray(t[2]),Me.sub(Jx,Zx,Kx),Me.sub(t_,Qx,Kx);var n=Jx.len(),i=t_.len();if(!(n<.001||i<.001)){Jx.scale(1/n),t_.scale(1/i);var r=Jx.dot(t_);if(Math.cos(e)<r){var o=Xx(Kx.x,Kx.y,Qx.x,Qx.y,Zx.x,Zx.y,n_,!1);i_.fromArray(n_),i_.scaleAndAdd(t_,o/Math.tan(Math.PI-e));var a=Qx.x!==Kx.x?(i_.x-Kx.x)/(Qx.x-Kx.x):(i_.y-Kx.y)/(Qx.y-Kx.y);if(isNaN(a))return;a<0?Me.copy(i_,Kx):a>1&&Me.copy(i_,Qx),i_.toArray(t[1])}}}}function o_(t,e,n){if(n<=180&&n>0){n=n/180*Math.PI,Zx.fromArray(t[0]),Kx.fromArray(t[1]),Qx.fromArray(t[2]),Me.sub(Jx,Kx,Zx),Me.sub(t_,Qx,Kx);var i=Jx.len(),r=t_.len();if(!(i<.001||r<.001)&&(Jx.scale(1/i),t_.scale(1/r),Jx.dot(e)<Math.cos(n))){var o=Xx(Kx.x,Kx.y,Qx.x,Qx.y,Zx.x,Zx.y,n_,!1);i_.fromArray(n_);var a=Math.PI/2,s=a+Math.acos(t_.dot(e))-n;if(s>=a)Me.copy(i_,Qx);else{i_.scaleAndAdd(t_,o/Math.tan(Math.PI/2-s));var l=Qx.x!==Kx.x?(i_.x-Kx.x)/(Qx.x-Kx.x):(i_.y-Kx.y)/(Qx.y-Kx.y);if(isNaN(l))return;l<0?Me.copy(i_,Kx):l>1&&Me.copy(i_,Qx)}i_.toArray(t[1])}}}function a_(t,e,n,i){var r="normal"===n,o=r?t:t.ensureState(n);o.ignore=e;var a=i.get("smooth");a&&!0===a&&(a=.3),o.shape=o.shape||{},a>0&&(o.shape.smooth=a);var s=i.getModel("lineStyle").getLineStyle();r?t.useStyle(s):o.style=s}function s_(t,e){var n=e.smooth,i=e.points;if(i)if(t.moveTo(i[0][0],i[0][1]),n>0&&i.length>=3){var r=zt(i[0],i[1]),o=zt(i[1],i[2]);if(!r||!o)return t.lineTo(i[1][0],i[1][1]),void t.lineTo(i[2][0],i[2][1]);var a=Math.min(r,o)*n,s=Ht([],i[1],i[0],a/r),l=Ht([],i[1],i[2],a/o),c=Ht([],s,l,.5);t.bezierCurveTo(s[0],s[1],s[0],s[1],c[0],c[1]),t.bezierCurveTo(l[0],l[1],l[0],l[1],i[2][0],i[2][1])}else for(var u=1;u<i.length;u++)t.lineTo(i[u][0],i[u][1])}function l_(t,e,n){var i=t.getTextGuideLine(),r=t.getTextContent();if(r){for(var o=e.normal,a=o.get("show"),s=r.ignore,l=0;l<nl.length;l++){var c=nl[l],u=e[c],h="normal"===c;if(u){var d=u.get("show");if((h?s:rt(r.states[c]&&r.states[c].ignore,s))||!rt(d,a)){var p=h?i:i&&i.states[c];p&&(p.ignore=!0),i&&a_(i,!0,c,u);continue}i||(i=new Rc,t.setTextGuideLine(i),h||!s&&a||a_(i,!0,"normal",e.normal),t.stateProxy&&(i.stateProxy=t.stateProxy)),a_(i,!1,c,u)}}if(i){E(i.style,n),i.style.fill=null;var f=o.get("showAbove");(t.textGuideLineConfig=t.textGuideLineConfig||{}).showAbove=f||!1,i.buildPath=s_}}else i&&t.removeTextGuideLine()}function c_(t,e){e=e||"labelLine";for(var n={normal:t.getModel(e)},i=0;i<el.length;i++){var r=el[i];n[r]=t.getModel([r,e])}return n}function u_(t){for(var e=[],n=0;n<t.length;n++){var i=t[n];if(!i.defaultAttr.ignore){var r=i.label,o=r.getComputedTransform(),a=r.getBoundingRect(),s=!o||o[1]<1e-5&&o[2]<1e-5,l=r.style.margin||0,c=a.clone();c.applyTransform(o),c.x-=l/2,c.y-=l/2,c.width+=l,c.height+=l;var u=s?new tu(a,o):null;e.push({label:r,labelLine:i.labelLine,rect:c,localRect:a,obb:u,priority:i.priority,defaultAttr:i.defaultAttr,layoutOption:i.computedLayoutOption,axisAligned:s,transform:o})}}return e}function h_(t,e,n,i,r,o){var a=t.length;if(!(a<2)){t.sort((function(t,n){return t.rect[e]-n.rect[e]}));for(var s,l=0,c=!1,u=0,h=0;h<a;h++){var d=t[h],p=d.rect;(s=p[e]-l)<0&&(p[e]-=s,d.label[e]-=s,c=!0),u+=Math.max(-s,0),l=p[e]+p[n]}u>0&&o&&x(-u/a,0,a);var f,g,m=t[0],v=t[a-1];return y(),f<0&&_(-f,.8),g<0&&_(g,.8),y(),b(f,g,1),b(g,f,-1),y(),f<0&&w(-f),g<0&&w(g),c}function y(){f=m.rect[e]-i,g=r-v.rect[e]-v.rect[n]}function b(t,e,n){if(t<0){var i=Math.min(e,-t);if(i>0){x(i*n,0,a);var r=i+t;r<0&&_(-r*n,1)}else _(-t*n,1)}}function x(n,i,r){0!==n&&(c=!0);for(var o=i;o<r;o++){var a=t[o];a.rect[e]+=n,a.label[e]+=n}}function _(i,r){for(var o=[],s=0,l=1;l<a;l++){var c=t[l-1].rect,u=Math.max(t[l].rect[e]-c[e]-c[n],0);o.push(u),s+=u}if(s){var h=Math.min(Math.abs(i)/s,r);if(i>0)for(l=0;l<a-1;l++)x(o[l]*h,0,l+1);else for(l=a-1;l>0;l--)x(-o[l-1]*h,l,a)}}function w(t){var e=t<0?-1:1;t=Math.abs(t);for(var n=Math.ceil(t/(a-1)),i=0;i<a-1;i++)if(e>0?x(n,0,i+1):x(-n,a-i-1,a),(t-=n)<=0)return}}function d_(t,e,n,i){return h_(t,"y","height",e,n,i)}function p_(t){var e=[];t.sort((function(t,e){return e.priority-t.priority}));var n=new Re(0,0,0,0);function i(t){if(!t.ignore){var e=t.ensureState("emphasis");null==e.ignore&&(e.ignore=!1)}t.ignore=!0}for(var r=0;r<t.length;r++){var o=t[r],a=o.axisAligned,s=o.localRect,l=o.transform,c=o.label,u=o.labelLine;n.copy(o.rect),n.width-=.1,n.height-=.1,n.x+=.05,n.y+=.05;for(var h=o.obb,d=!1,p=0;p<e.length;p++){var f=e[p];if(n.intersect(f.rect)){if(a&&f.axisAligned){d=!0;break}if(f.obb||(f.obb=new tu(f.localRect,f.transform)),h||(h=new tu(s,l)),h.intersect(f.obb)){d=!0;break}}}d?(i(c),u&&i(u)):(c.attr("ignore",o.defaultAttr.ignore),u&&u.attr("ignore",o.defaultAttr.labelGuideIgnore),e.push(o))}}function f_(t){if(t){for(var e=[],n=0;n<t.length;n++)e.push(t[n].slice());return e}}function g_(t,e){var n=t.label,i=e&&e.getTextGuideLine();return{dataIndex:t.dataIndex,dataType:t.dataType,seriesIndex:t.seriesModel.seriesIndex,text:t.label.style.text,rect:t.hostRect,labelRect:t.rect,align:n.style.align,verticalAlign:n.style.verticalAlign,labelLinePoints:f_(i&&i.shape.points)}}var m_=["align","verticalAlign","width","height","fontSize"],v_=new ur,y_=Io(),b_=Io();function x_(t,e,n){for(var i=0;i<n.length;i++){var r=n[i];null!=e[r]&&(t[r]=e[r])}}var __=["x","y","rotation"],w_=function(){function t(){this._labelList=[],this._chartViewList=[]}return t.prototype.clearLabels=function(){this._labelList=[],this._chartViewList=[]},t.prototype._addLabel=function(t,e,n,i,r){var o=i.style,a=i.__hostTarget.textConfig||{},s=i.getComputedTransform(),l=i.getBoundingRect().plain();Re.applyTransform(l,l,s),s?v_.setLocalTransform(s):(v_.x=v_.y=v_.rotation=v_.originX=v_.originY=0,v_.scaleX=v_.scaleY=1),v_.rotation=as(v_.rotation);var c,u=i.__hostTarget;if(u){c=u.getBoundingRect().plain();var h=u.getComputedTransform();Re.applyTransform(c,c,h)}var d=c&&u.getTextGuideLine();this._labelList.push({label:i,labelLine:d,seriesModel:n,dataIndex:t,dataType:e,layoutOption:r,computedLayoutOption:null,rect:l,hostRect:c,priority:c?c.width*c.height:0,defaultAttr:{ignore:i.ignore,labelGuideIgnore:d&&d.ignore,x:v_.x,y:v_.y,scaleX:v_.scaleX,scaleY:v_.scaleY,rotation:v_.rotation,style:{x:o.x,y:o.y,align:o.align,verticalAlign:o.verticalAlign,width:o.width,height:o.height,fontSize:o.fontSize},cursor:i.cursor,attachedPos:a.position,attachedRot:a.rotation}})},t.prototype.addLabelsOfSeries=function(t){var e=this;this._chartViewList.push(t);var n=t.__model,i=n.get("labelLayout");(X(i)||H(i).length)&&t.group.traverse((function(t){if(t.ignore)return!0;var r=t.getTextContent(),o=$s(t);r&&!r.disableLabelLayout&&e._addLabel(o.dataIndex,o.dataType,n,r,i)}))},t.prototype.updateLayoutConfig=function(t){var e=t.getWidth(),n=t.getHeight();function i(t,e){return function(){e_(t,e)}}for(var r=0;r<this._labelList.length;r++){var o=this._labelList[r],a=o.label,s=a.__hostTarget,l=o.defaultAttr,c=void 0;c=(c=X(o.layoutOption)?o.layoutOption(g_(o,s)):o.layoutOption)||{},o.computedLayoutOption=c;var u=Math.PI/180;s&&s.setTextConfig({local:!1,position:null!=c.x||null!=c.y?null:l.attachedPos,rotation:null!=c.rotate?c.rotate*u:l.attachedRot,offset:[c.dx||0,c.dy||0]});var h=!1;if(null!=c.x?(a.x=jr(c.x,e),a.setStyle("x",0),h=!0):(a.x=l.x,a.setStyle("x",l.style.x)),null!=c.y?(a.y=jr(c.y,n),a.setStyle("y",0),h=!0):(a.y=l.y,a.setStyle("y",l.style.y)),c.labelLinePoints){var d=s.getTextGuideLine();d&&(d.setShape({points:c.labelLinePoints}),h=!1)}y_(a).needsUpdateLabelLine=h,a.rotation=null!=c.rotate?c.rotate*u:l.rotation,a.scaleX=l.scaleX,a.scaleY=l.scaleY;for(var p=0;p<m_.length;p++){var f=m_[p];a.setStyle(f,null!=c[f]?c[f]:l.style[f])}if(c.draggable){if(a.draggable=!0,a.cursor="move",s){var g=o.seriesModel;null!=o.dataIndex&&(g=o.seriesModel.getData(o.dataType).getItemModel(o.dataIndex)),a.on("drag",i(s,g.getModel("labelLine")))}}else a.off("drag"),a.cursor=l.cursor}},t.prototype.layout=function(t){var e=t.getWidth(),n=t.getHeight(),i=u_(this._labelList),r=F(i,(function(t){return"shiftX"===t.layoutOption.moveOverlap})),o=F(i,(function(t){return"shiftY"===t.layoutOption.moveOverlap}));h_(r,"x","width",0,e,undefined),d_(o,0,n),p_(F(i,(function(t){return t.layoutOption.hideOverlap})))},t.prototype.processLabelsOverall=function(){var t=this;R(this._chartViewList,(function(e){var n=e.__model,i=e.ignoreLabelLineUpdate,r=n.isAnimationEnabled();e.group.traverse((function(e){if(e.ignore&&!e.forceLabelAnimation)return!0;var o=!i,a=e.getTextContent();!o&&a&&(o=y_(a).needsUpdateLabelLine),o&&t._updateLabelLine(e,n),r&&t._animateLabels(e,n)}))}))},t.prototype._updateLabelLine=function(t,e){var n=t.getTextContent(),i=$s(t),r=i.dataIndex;if(n&&null!=r){var o=e.getData(i.dataType),a=o.getItemModel(r),s={},l=o.getItemVisual(r,"style");if(l){var c=o.getVisual("drawType");s.stroke=l[c]}var u=a.getModel("labelLine");l_(t,c_(a),s),e_(t,u)}},t.prototype._animateLabels=function(t,e){var n=t.getTextContent(),i=t.getTextGuideLine();if(n&&(t.forceLabelAnimation||!n.ignore&&!n.invisible&&!t.disableLabelAnimation&&!lu(t))){var r=(p=y_(n)).oldLayout,o=$s(t),a=o.dataIndex,s={x:n.x,y:n.y,rotation:n.rotation},l=e.getData(o.dataType);if(r){n.attr(r);var c=t.prevStates;c&&(D(c,"select")>=0&&n.attr(p.oldLayoutSelect),D(c,"emphasis")>=0&&n.attr(p.oldLayoutEmphasis)),au(n,s,e,a)}else if(n.attr(s),!th(n).valueAnimation){var u=rt(n.style.opacity,1);n.style.opacity=0,su(n,{style:{opacity:u}},e,a)}if(p.oldLayout=s,n.states.select){var h=p.oldLayoutSelect={};x_(h,s,__),x_(h,n.states.select,__)}if(n.states.emphasis){var d=p.oldLayoutEmphasis={};x_(d,s,__),x_(d,n.states.emphasis,__)}nh(n,a,l,e,e)}if(i&&!i.ignore&&!i.invisible){r=(p=b_(i)).oldLayout;var p,f={points:i.shape.points};r?(i.attr({shape:r}),au(i,{shape:f},e)):(i.setShape(f),i.style.strokePercent=0,su(i,{style:{strokePercent:1}},e)),p.oldLayout=f}},t}(),S_=Io(),C_=Math.sin,k_=Math.cos,A_=Math.PI,M_=2*Math.PI,T_=180/A_,I_=function(){function t(){}return t.prototype.reset=function(t){this._start=!0,this._d=[],this._str="",this._p=Math.pow(10,t||4)},t.prototype.moveTo=function(t,e){this._add("M",t,e)},t.prototype.lineTo=function(t,e){this._add("L",t,e)},t.prototype.bezierCurveTo=function(t,e,n,i,r,o){this._add("C",t,e,n,i,r,o)},t.prototype.quadraticCurveTo=function(t,e,n,i){this._add("Q",t,e,n,i)},t.prototype.arc=function(t,e,n,i,r,o){this.ellipse(t,e,n,n,0,i,r,o)},t.prototype.ellipse=function(t,e,n,i,r,o,a,s){var l,c=a-o,u=!s,h=Math.abs(c),d=li(h-M_)||(u?c>=M_:-c>=M_),p=c>0?c%M_:c%M_+M_;l=!!d||!li(h)&&p>=A_==!!u;var f=t+n*k_(o),g=e+i*C_(o);this._start&&this._add("M",f,g);var m=Math.round(r*T_);if(d){var v=1/this._p,y=(u?1:-1)*(M_-v);this._add("A",n,i,m,1,+u,t+n*k_(o+y),e+i*C_(o+y)),v>.01&&this._add("A",n,i,m,0,+u,f,g)}else{var b=t+n*k_(a),x=e+i*C_(a);this._add("A",n,i,m,+l,+u,b,x)}},t.prototype.rect=function(t,e,n,i){this._add("M",t,e),this._add("l",n,0),this._add("l",0,i),this._add("l",-n,0),this._add("Z")},t.prototype.closePath=function(){this._d.length>0&&this._add("Z")},t.prototype._add=function(t,e,n,i,r,o,a,s,l){for(var c=[],u=this._p,h=1;h<arguments.length;h++){var d=arguments[h];if(isNaN(d))return void(this._invalid=!0);c.push(Math.round(d*u)/u)}this._d.push(t+c.join(" ")),this._start="Z"===t},t.prototype.generateStr=function(){this._str=this._invalid?"":this._d.join(""),this._d=[]},t.prototype.getStr=function(){return this._str},t}(),E_="none",O_=Math.round,D_=["lineCap","miterLimit","lineJoin"],L_=B(D_,(function(t){return"stroke-"+t.toLowerCase()}));var P_="http://www.w3.org/2000/svg",N_="http://www.w3.org/1999/xlink",R_="ecmeta_";function B_(t){return document.createElementNS(P_,t)}function z_(t,e,n,i,r){return{tag:t,attrs:n||{},children:i,text:r,key:e}}function F_(t,e){var n=(e=e||{}).newline?"\n":"";return function t(e){var i=e.children,r=e.tag,o=e.attrs,a=e.text;return function(t,e){var n=[];if(e)for(var i in e){var r=e[i],o=i;!1!==r&&(!0!==r&&null!=r&&(o+='="'+r+'"'),n.push(o))}return"<"+t+" "+n.join(" ")+">"}(r,o)+("style"!==r?re(a):a||"")+(i?""+n+B(i,(function(e){return t(e)})).join(n)+n:"")+"</"+r+">"}(t)}function V_(t){return{zrId:t,shadowCache:{},patternCache:{},gradientCache:{},clipPathCache:{},defs:{},cssNodes:{},cssAnims:{},cssStyleCache:{},cssAnimIdx:0,shadowIdx:0,gradientIdx:0,patternIdx:0,clipPathIdx:0}}function H_(t,e,n,i){return z_("svg","root",{width:t,height:e,xmlns:P_,"xmlns:xlink":N_,version:"1.1",baseProfile:"full",viewBox:!!i&&"0 0 "+t+" "+e},n)}var W_=0;function j_(){return W_++}var Y_={cubicIn:"0.32,0,0.67,0",cubicOut:"0.33,1,0.68,1",cubicInOut:"0.65,0,0.35,1",quadraticIn:"0.11,0,0.5,0",quadraticOut:"0.5,1,0.89,1",quadraticInOut:"0.45,0,0.55,1",quarticIn:"0.5,0,0.75,0",quarticOut:"0.25,1,0.5,1",quarticInOut:"0.76,0,0.24,1",quinticIn:"0.64,0,0.78,0",quinticOut:"0.22,1,0.36,1",quinticInOut:"0.83,0,0.17,1",sinusoidalIn:"0.12,0,0.39,0",sinusoidalOut:"0.61,1,0.88,1",sinusoidalInOut:"0.37,0,0.63,1",exponentialIn:"0.7,0,0.84,0",exponentialOut:"0.16,1,0.3,1",exponentialInOut:"0.87,0,0.13,1",circularIn:"0.55,0,1,0.45",circularOut:"0,0.55,0.45,1",circularInOut:"0.85,0,0.15,1"},X_="transform-origin";function G_(t,e,n){var i=I({},t.shape);I(i,e),t.buildPath(n,i);var r=new I_;return r.reset(yi(t)),n.rebuildPath(r,1),r.generateStr(),r.getStr()}function q_(t,e){var n=e.originX,i=e.originY;(n||i)&&(t[X_]=n+"px "+i+"px")}var U_={fill:"fill",opacity:"opacity",lineWidth:"stroke-width",lineDashOffset:"stroke-dashoffset"};function $_(t,e){var n=e.zrId+"-ani-"+e.cssAnimIdx++;return e.cssAnims[n]=t,n}function Z_(t){return G(t)?Y_[t]?"cubic-bezier("+Y_[t]+")":In(t)?t:"":""}function K_(t,e,n,i){var r=t.animators,o=r.length,a=[];if(t instanceof Gc){var s=function(t,e,n){var i,r,o=t.shape.paths,a={};if(R(o,(function(t){var e=V_(n.zrId);e.animation=!0,K_(t,{},e,!0);var o=e.cssAnims,s=e.cssNodes,l=H(o),c=l.length;if(c){var u=o[r=l[c-1]];for(var h in u){var d=u[h];a[h]=a[h]||{d:""},a[h].d+=d.d||""}for(var p in s){var f=s[p].animation;f.indexOf(r)>=0&&(i=f)}}})),i){e.d=!1;var s=$_(a,n);return i.replace(r,s)}}(t,e,n);if(s)a.push(s);else if(!o)return}else if(!o)return;for(var l={},c=0;c<o;c++){var u=r[c],h=[u.getMaxTime()/1e3+"s"],d=Z_(u.getClip().easing),p=u.getDelay();d?h.push(d):h.push("linear"),p&&h.push(p/1e3+"s"),u.getLoop()&&h.push("infinite");var f=h.join(" ");l[f]=l[f]||[f,[]],l[f][1].push(u)}function g(r){var o,a=r[1],s=a.length,l={},c={},u={},h="animation-timing-function";function d(t,e,n){for(var i=t.getTracks(),r=t.getMaxTime(),o=0;o<i.length;o++){var a=i[o];if(a.needsAnimate()){var s=a.keyframes,l=a.propName;if(n&&(l=n(l)),l)for(var c=0;c<s.length;c++){var u=s[c],d=Math.round(u.time/r*100)+"%",p=Z_(u.easing),f=u.rawValue;(G(f)||U(f))&&(e[d]=e[d]||{},e[d][l]=u.rawValue,p&&(e[d][h]=p))}}}}for(var p=0;p<s;p++)(S=(w=a[p]).targetName)?"shape"===S&&d(w,c):!i&&d(w,l);for(var f in l){var g={};dr(g,t),I(g,l[f]);var m=bi(g),v=l[f][h];u[f]=m?{transform:m}:{},q_(u[f],g),v&&(u[f][h]=v)}var y=!0;for(var f in c){u[f]=u[f]||{};var b=!o;v=c[f][h],b&&(o=new es);var x=o.len();o.reset(),u[f].d=G_(t,c[f],o);var _=o.len();if(!b&&x!==_){y=!1;break}v&&(u[f][h]=v)}if(!y)for(var f in u)delete u[f].d;if(!i)for(p=0;p<s;p++){var w,S;"style"===(S=(w=a[p]).targetName)&&d(w,u,(function(t){return U_[t]}))}var C,k=H(u),A=!0;for(p=1;p<k.length;p++){var M=k[p-1],T=k[p];if(u[M][X_]!==u[T][X_]){A=!1;break}C=u[M][X_]}if(A&&C){for(var f in u)u[f][X_]&&delete u[f][X_];e[X_]=C}if(F(k,(function(t){return H(u[t]).length>0})).length)return $_(u,n)+" "+r[0]+" both"}for(var m in l)(s=g(l[m]))&&a.push(s);if(a.length){var v=n.zrId+"-cls-"+j_();n.cssNodes["."+v]={animation:a.join(",")},e.class=v}}function Q_(t,e,n,i){var r=JSON.stringify(t),o=n.cssStyleCache[r];o||(o=n.zrId+"-cls-"+j_(),n.cssStyleCache[r]=o,n.cssNodes["."+o+(i?":hover":"")]=t),e.class=e.class?e.class+" "+o:o}var J_=Math.round;function tw(t){return t&&G(t.src)}function ew(t){return t&&X(t.toDataURL)}function nw(t,e,n,i){(function(t,e,n,i){var r=null==e.opacity?1:e.opacity;if(n instanceof As)t("opacity",r);else{if(function(t){var e=t.fill;return null!=e&&e!==E_}(e)){var o=si(e.fill);t("fill",o.color);var a=null!=e.fillOpacity?e.fillOpacity*o.opacity*r:o.opacity*r;(i||a<1)&&t("fill-opacity",a)}else t("fill",E_);if(function(t){var e=t.stroke;return null!=e&&e!==E_}(e)){var s=si(e.stroke);t("stroke",s.color);var l=e.strokeNoScale?n.getLineScale():1,c=l?(e.lineWidth||0)/l:0,u=null!=e.strokeOpacity?e.strokeOpacity*s.opacity*r:s.opacity*r,h=e.strokeFirst;if((i||1!==c)&&t("stroke-width",c),(i||h)&&t("paint-order",h?"stroke":"fill"),(i||u<1)&&t("stroke-opacity",u),e.lineDash){var d=Pm(n),p=d[0],f=d[1];p&&(f=O_(f||0),t("stroke-dasharray",p.join(",")),(f||i)&&t("stroke-dashoffset",f))}else i&&t("stroke-dasharray",E_);for(var g=0;g<D_.length;g++){var m=D_[g];if(i||e[m]!==ys[m]){var v=e[m]||ys[m];v&&t(L_[g],v)}}}else i&&t("stroke",E_)}})((function(r,o){var a="fill"===r||"stroke"===r;a&&mi(o)?pw(e,t,r,i):a&&pi(o)?fw(n,t,r,i):t[r]=a&&"none"===o?"transparent":o}),e,n,!1),function(t,e,n){var i=t.style;if(function(t){return t&&(t.shadowBlur||t.shadowOffsetX||t.shadowOffsetY)}(i)){var r=function(t){var e=t.style,n=t.getGlobalScale();return[e.shadowColor,(e.shadowBlur||0).toFixed(2),(e.shadowOffsetX||0).toFixed(2),(e.shadowOffsetY||0).toFixed(2),n[0],n[1]].join(",")}(t),o=n.shadowCache,a=o[r];if(!a){var s=t.getGlobalScale(),l=s[0],c=s[1];if(!l||!c)return;var u=i.shadowOffsetX||0,h=i.shadowOffsetY||0,d=i.shadowBlur,p=si(i.shadowColor),f=p.opacity,g=p.color,m=d/2/l+" "+d/2/c;a=n.zrId+"-s"+n.shadowIdx++,n.defs[a]=z_("filter",a,{id:a,x:"-100%",y:"-100%",width:"300%",height:"300%"},[z_("feDropShadow","",{dx:u/l,dy:h/c,stdDeviation:m,"flood-color":g,"flood-opacity":f})]),o[r]=a}e.filter=vi(a)}}(n,t,i)}function iw(t,e){var n=Fr(e);n&&(n.each((function(e,n){null!=e&&(t[(R_+n).toLowerCase()]=e+"")})),e.isSilent()&&(t[R_+"silent"]="true"))}function rw(t){return li(t[0]-1)&&li(t[1])&&li(t[2])&&li(t[3]-1)}function ow(t,e,n){if(e&&(!function(t){return li(t[4])&&li(t[5])}(e)||!rw(e))){var i=n?10:1e4;t.transform=rw(e)?"translate("+J_(e[4]*i)/i+" "+J_(e[5]*i)/i+")":function(t){return"matrix("+ci(t[0])+","+ci(t[1])+","+ci(t[2])+","+ci(t[3])+","+ui(t[4])+","+ui(t[5])+")"}(e)}}function aw(t,e,n){for(var i=t.points,r=[],o=0;o<i.length;o++)r.push(J_(i[o][0]*n)/n),r.push(J_(i[o][1]*n)/n);e.points=r.join(" ")}function sw(t){return!t.smooth}var lw,cw,uw={circle:[(lw=["cx","cy","r"],cw=B(lw,(function(t){return"string"==typeof t?[t,t]:t})),function(t,e,n){for(var i=0;i<cw.length;i++){var r=cw[i],o=t[r[0]];null!=o&&(e[r[1]]=J_(o*n)/n)}})],polyline:[aw,sw],polygon:[aw,sw]};function hw(t,e){var n=t.style,i=t.shape,r=uw[t.type],o={},a=e.animation,s="path",l=t.style.strokePercent,c=e.compress&&yi(t)||4;if(!r||e.willUpdate||r[1]&&!r[1](i)||a&&function(t){for(var e=t.animators,n=0;n<e.length;n++)if("shape"===e[n].targetName)return!0;return!1}(t)||l<1){var u=!t.path||t.shapeChanged();t.path||t.createPathProxy();var h=t.path;u&&(h.beginPath(),t.buildPath(h,t.shape),t.pathUpdated());var d=h.getVersion(),p=t,f=p.__svgPathBuilder;p.__svgPathVersion===d&&f&&l===p.__svgPathStrokePercent||(f||(f=p.__svgPathBuilder=new I_),f.reset(c),h.rebuildPath(f,l),f.generateStr(),p.__svgPathVersion=d,p.__svgPathStrokePercent=l),o.d=f.getStr()}else{s=t.type;var g=Math.pow(10,c);r[0](i,o,g)}return ow(o,t.transform),nw(o,n,t,e),iw(o,t),e.animation&&K_(t,o,e),e.emphasis&&function(t,e,n){if(!t.ignore)if(t.isSilent())Q_(c={"pointer-events":"none"},e,n,!0);else{var i=t.states.emphasis&&t.states.emphasis.style?t.states.emphasis.style:{},r=i.fill;if(!r){var o=t.style&&t.style.fill,a=t.states.select&&t.states.select.style&&t.states.select.style.fill,s=t.currentStates.indexOf("select")>=0&&a||o;s&&(r=ri(s))}var l=i.lineWidth;l&&(l/=!i.strokeNoScale&&t.transform?t.transform[0]:1);var c={cursor:"pointer"};r&&(c.fill=r),i.stroke&&(c.stroke=i.stroke),l&&(c["stroke-width"]=l),Q_(c,e,n,!0)}}(t,o,e),z_(s,t.id+"",o)}function dw(t,e){return t instanceof _s?hw(t,e):t instanceof As?function(t,e){var n=t.style,i=n.image;if(i&&!G(i)&&(tw(i)?i=i.src:ew(i)&&(i=i.toDataURL())),i){var r=n.x||0,o=n.y||0,a={href:i,width:n.width,height:n.height};return r&&(a.x=r),o&&(a.y=o),ow(a,t.transform),nw(a,n,t,e),iw(a,t),e.animation&&K_(t,a,e),z_("image",t.id+"",a)}}(t,e):t instanceof Ss?function(t,e){var n=t.style,i=n.text;if(null!=i&&(i+=""),i&&!isNaN(n.x)&&!isNaN(n.y)){var r=n.font||l,o=n.x||0,a=function(t,e,n){return"top"===n?t+=e/2:"bottom"===n&&(t-=e/2),t}(n.y||0,br(r),n.textBaseline),c={"dominant-baseline":"central","text-anchor":hi[n.textAlign]||n.textAlign};if(Ws(n)){var u="",h=n.fontStyle,d=Vs(n.fontSize);if(!parseFloat(d))return;var p=n.fontFamily||s,f=n.fontWeight;u+="font-size:"+d+";font-family:"+p+";",h&&"normal"!==h&&(u+="font-style:"+h+";"),f&&"normal"!==f&&(u+="font-weight:"+f+";"),c.style=u}else c.style="font: "+r;return i.match(/\s/)&&(c["xml:space"]="preserve"),o&&(c.x=o),a&&(c.y=a),ow(c,t.transform),nw(c,n,t,e),iw(c,t),e.animation&&K_(t,c,e),z_("text",t.id+"",c,void 0,i)}}(t,e):void 0}function pw(t,e,n,i){var r,o=t[n],a={gradientUnits:o.global?"userSpaceOnUse":"objectBoundingBox"};if(fi(o))r="linearGradient",a.x1=o.x,a.y1=o.y,a.x2=o.x2,a.y2=o.y2;else{if(!gi(o))return;r="radialGradient",a.cx=rt(o.x,.5),a.cy=rt(o.y,.5),a.r=rt(o.r,.5)}for(var s=o.colorStops,l=[],c=0,u=s.length;c<u;++c){var h=100*ui(s[c].offset)+"%",d=si(s[c].color),p=d.color,f=d.opacity,g={offset:h};g["stop-color"]=p,f<1&&(g["stop-opacity"]=f),l.push(z_("stop",c+"",g))}var m=F_(z_(r,"",a,l)),v=i.gradientCache,y=v[m];y||(y=i.zrId+"-g"+i.gradientIdx++,v[m]=y,a.id=y,i.defs[y]=z_(r,y,a,l)),e[n]=vi(y)}function fw(t,e,n,i){var r,o=t.style[n],a=t.getBoundingRect(),s={},l=o.repeat,c="no-repeat"===l,u="repeat-x"===l,h="repeat-y"===l;if(di(o)){var d=o.imageWidth,p=o.imageHeight,f=void 0,g=o.image;if(G(g)?f=g:tw(g)?f=g.src:ew(g)&&(f=g.toDataURL()),"undefined"==typeof Image){var m="Image width/height must been given explictly in svg-ssr renderer.";lt(d,m),lt(p,m)}else if(null==d||null==p){var v=function(t,e){if(t){var n=t.elm,i=d||e.width,r=p||e.height;"pattern"===t.tag&&(u?(r=1,i/=a.width):h&&(i=1,r/=a.height)),t.attrs.width=i,t.attrs.height=r,n&&(n.setAttribute("width",i),n.setAttribute("height",r))}},y=Jo(f,null,t,(function(t){c||v(w,t),v(r,t)}));y&&y.width&&y.height&&(d=d||y.width,p=p||y.height)}r=z_("image","img",{href:f,width:d,height:p}),s.width=d,s.height=p}else o.svgElement&&(r=A(o.svgElement),s.width=o.svgWidth,s.height=o.svgHeight);if(r){var b,x;c?b=x=1:u?(x=1,b=s.width/a.width):h?(b=1,x=s.height/a.height):s.patternUnits="userSpaceOnUse",null==b||isNaN(b)||(s.width=b),null==x||isNaN(x)||(s.height=x);var _=bi(o);_&&(s.patternTransform=_);var w=z_("pattern","",s,[r]),S=F_(w),C=i.patternCache,k=C[S];k||(k=i.zrId+"-p"+i.patternIdx++,C[S]=k,s.id=k,w=i.defs[k]=z_("pattern",k,s,[r])),e[n]=vi(k)}}function gw(t,e,n){var i=n.clipPathCache,r=n.defs,o=i[t.id];if(!o){var a={id:o=n.zrId+"-c"+n.clipPathIdx++};i[t.id]=o,r[o]=z_("clipPath",o,a,[hw(t,n)])}e["clip-path"]=vi(o)}function mw(t){return document.createTextNode(t)}function vw(t,e,n){t.insertBefore(e,n)}function yw(t,e){t.removeChild(e)}function bw(t,e){t.appendChild(e)}function xw(t){return t.parentNode}function _w(t){return t.nextSibling}function ww(t,e){t.textContent=e}var Sw=z_("","");function Cw(t){return void 0===t}function kw(t){return void 0!==t}function Aw(t,e,n){for(var i={},r=e;r<=n;++r){var o=t[r].key;void 0!==o&&(i[o]=r)}return i}function Mw(t,e){var n=t.key===e.key;return t.tag===e.tag&&n}function Tw(t){var e,n=t.children,i=t.tag;if(kw(i)){var r=t.elm=B_(i);if(Ow(Sw,t),Y(n))for(e=0;e<n.length;++e){var o=n[e];null!=o&&bw(r,Tw(o))}else kw(t.text)&&!$(t.text)&&bw(r,mw(t.text))}else t.elm=mw(t.text);return t.elm}function Iw(t,e,n,i,r){for(;i<=r;++i){var o=n[i];null!=o&&vw(t,Tw(o),e)}}function Ew(t,e,n,i){for(;n<=i;++n){var r=e[n];null!=r&&(kw(r.tag)?yw(xw(r.elm),r.elm):yw(t,r.elm))}}function Ow(t,e){var n,i=e.elm,r=t&&t.attrs||{},o=e.attrs||{};if(r!==o){for(n in o){var a=o[n];r[n]!==a&&(!0===a?i.setAttribute(n,""):!1===a?i.removeAttribute(n):"style"===n?i.style.cssText=a:120!==n.charCodeAt(0)?i.setAttribute(n,a):"xmlns:xlink"===n||"xmlns"===n?i.setAttributeNS("http://www.w3.org/2000/xmlns/",n,a):58===n.charCodeAt(3)?i.setAttributeNS("http://www.w3.org/XML/1998/namespace",n,a):58===n.charCodeAt(5)?i.setAttributeNS(N_,n,a):i.setAttribute(n,a))}for(n in r)n in o||i.removeAttribute(n)}}function Dw(t,e){var n=e.elm=t.elm,i=t.children,r=e.children;t!==e&&(Ow(t,e),Cw(e.text)?kw(i)&&kw(r)?i!==r&&function(t,e,n){for(var i,r,o,a=0,s=0,l=e.length-1,c=e[0],u=e[l],h=n.length-1,d=n[0],p=n[h];a<=l&&s<=h;)null==c?c=e[++a]:null==u?u=e[--l]:null==d?d=n[++s]:null==p?p=n[--h]:Mw(c,d)?(Dw(c,d),c=e[++a],d=n[++s]):Mw(u,p)?(Dw(u,p),u=e[--l],p=n[--h]):Mw(c,p)?(Dw(c,p),vw(t,c.elm,_w(u.elm)),c=e[++a],p=n[--h]):Mw(u,d)?(Dw(u,d),vw(t,u.elm,c.elm),u=e[--l],d=n[++s]):(Cw(i)&&(i=Aw(e,a,l)),Cw(r=i[d.key])||(o=e[r]).tag!==d.tag?vw(t,Tw(d),c.elm):(Dw(o,d),e[r]=void 0,vw(t,o.elm,c.elm)),d=n[++s]);(a<=l||s<=h)&&(a>l?Iw(t,null==n[h+1]?null:n[h+1].elm,n,s,h):Ew(t,e,a,l))}(n,i,r):kw(r)?(kw(t.text)&&ww(n,""),Iw(n,null,r,0,r.length-1)):kw(i)?Ew(n,i,0,i.length-1):kw(t.text)&&ww(n,""):t.text!==e.text&&(kw(i)&&Ew(n,i,0,i.length-1),ww(n,e.text)))}var Lw=0,Pw=function(){function t(t,e,n){if(this.type="svg",this.refreshHover=function(){},this.configLayer=function(){},this.storage=e,this._opts=n=I({},n),this.root=t,this._id="zr"+Lw++,this._oldVNode=H_(n.width,n.height),t&&!n.ssr){var i=this._viewport=document.createElement("div");i.style.cssText="position:relative;overflow:hidden";var r=this._svgDom=this._oldVNode.elm=B_("svg");Ow(null,this._oldVNode),i.appendChild(r),t.appendChild(i)}this.resize(n.width,n.height)}return t.prototype.getType=function(){return this.type},t.prototype.getViewportRoot=function(){return this._viewport},t.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},t.prototype.getSvgDom=function(){return this._svgDom},t.prototype.refresh=function(){if(this.root){var t=this.renderToVNode({willUpdate:!0});t.attrs.style="position:absolute;left:0;top:0;user-select:none",function(t,e){if(Mw(t,e))Dw(t,e);else{var n=t.elm,i=xw(n);Tw(e),null!==i&&(vw(i,e.elm,_w(n)),Ew(i,[t],0,0))}}(this._oldVNode,t),this._oldVNode=t}},t.prototype.renderOneToVNode=function(t){return dw(t,V_(this._id))},t.prototype.renderToVNode=function(t){t=t||{};var e=this.storage.getDisplayList(!0),n=this._width,i=this._height,r=V_(this._id);r.animation=t.animation,r.willUpdate=t.willUpdate,r.compress=t.compress,r.emphasis=t.emphasis;var o=[],a=this._bgVNode=function(t,e,n,i){var r;if(n&&"none"!==n)if(r=z_("rect","bg",{width:t,height:e,x:"0",y:"0"}),mi(n))pw({fill:n},r.attrs,"fill",i);else if(pi(n))fw({style:{fill:n},dirty:_t,getBoundingRect:function(){return{width:t,height:e}}},r.attrs,"fill",i);else{var o=si(n),a=o.color,s=o.opacity;r.attrs.fill=a,s<1&&(r.attrs["fill-opacity"]=s)}return r}(n,i,this._backgroundColor,r);a&&o.push(a);var s=t.compress?null:this._mainVNode=z_("g","main",{},[]);this._paintList(e,r,s?s.children:o),s&&o.push(s);var l=B(H(r.defs),(function(t){return r.defs[t]}));if(l.length&&o.push(z_("defs","defs",{},l)),t.animation){var c=function(t,e,n){var i=(n=n||{}).newline?"\n":"",r=" {"+i,o=i+"}",a=B(H(t),(function(e){return e+r+B(H(t[e]),(function(n){return n+":"+t[e][n]+";"})).join(i)+o})).join(i),s=B(H(e),(function(t){return"@keyframes "+t+r+B(H(e[t]),(function(n){return n+r+B(H(e[t][n]),(function(i){var r=e[t][n][i];return"d"===i&&(r='path("'+r+'")'),i+":"+r+";"})).join(i)+o})).join(i)+o})).join(i);return a||s?["<![CDATA[",a,s,"]]>"].join(i):""}(r.cssNodes,r.cssAnims,{newline:!0});if(c){var u=z_("style","stl",{},[],c);o.push(u)}}return H_(n,i,o,t.useViewBox)},t.prototype.renderToString=function(t){return t=t||{},F_(this.renderToVNode({animation:rt(t.cssAnimation,!0),emphasis:rt(t.cssEmphasis,!0),willUpdate:!1,compress:!0,useViewBox:rt(t.useViewBox,!0)}),{newline:!0})},t.prototype.setBackgroundColor=function(t){this._backgroundColor=t},t.prototype.getSvgRoot=function(){return this._mainVNode&&this._mainVNode.elm},t.prototype._paintList=function(t,e,n){for(var i,r,o=t.length,a=[],s=0,l=0,c=0;c<o;c++){var u=t[c];if(!u.invisible){var h=u.__clipPaths,d=h&&h.length||0,p=r&&r.length||0,f=void 0;for(f=Math.max(d-1,p-1);f>=0&&(!h||!r||h[f]!==r[f]);f--);for(var g=p-1;g>f;g--)i=a[--s-1];for(var m=f+1;m<d;m++){var v={};gw(h[m],v,e);var y=z_("g","clip-g-"+l++,v,[]);(i?i.children:n).push(y),a[s++]=y,i=y}r=h;var b=dw(u,e);b&&(i?i.children:n).push(b)}}},t.prototype.resize=function(t,e){var n=this._opts,i=this.root,r=this._viewport;if(null!=t&&(n.width=t),null!=e&&(n.height=e),i&&r&&(r.style.display="none",t=Lm(i,0,n),e=Lm(i,1,n),r.style.display=""),this._width!==t||this._height!==e){if(this._width=t,this._height=e,r){var o=r.style;o.width=t+"px",o.height=e+"px"}if(pi(this._backgroundColor))this.refresh();else{var a=this._svgDom;a&&(a.setAttribute("width",t),a.setAttribute("height",e));var s=this._bgVNode&&this._bgVNode.elm;s&&(s.setAttribute("width",t),s.setAttribute("height",e))}}},t.prototype.getWidth=function(){return this._width},t.prototype.getHeight=function(){return this._height},t.prototype.dispose=function(){this.root&&(this.root.innerHTML=""),this._svgDom=this._viewport=this.storage=this._oldVNode=this._bgVNode=this._mainVNode=null},t.prototype.clear=function(){this._svgDom&&(this._svgDom.innerHTML=null),this._oldVNode=null},t.prototype.toDataURL=function(t){var e=this.renderToString(),n="data:image/svg+xml;";return t?(e=xi(e))&&n+"base64,"+e:n+"charset=UTF-8,"+encodeURIComponent(e)},t}();function Nw(t,e,n){var i=u.createCanvas(),r=e.getWidth(),o=e.getHeight(),a=i.style;return a&&(a.position="absolute",a.left="0",a.top="0",a.width=r+"px",a.height=o+"px",i.setAttribute("data-zr-dom-id",t)),i.width=r*n,i.height=o*n,i}var Rw=function(t){function e(e,n,i){var r,o=t.call(this)||this;o.motionBlur=!1,o.lastFrameAlpha=.7,o.dpr=1,o.virtual=!1,o.config={},o.incremental=!1,o.zlevel=0,o.maxRepaintRectCount=5,o.__dirty=!0,o.__firstTimePaint=!0,o.__used=!1,o.__drawIndex=0,o.__startIndex=0,o.__endIndex=0,o.__prevStartIndex=null,o.__prevEndIndex=null,i=i||er,"string"==typeof e?r=Nw(e,n,i):$(e)&&(e=(r=e).id),o.id=e,o.dom=r;var a=r.style;return a&&(bt(r),r.onselectstart=function(){return!1},a.padding="0",a.margin="0",a.borderWidth="0"),o.painter=n,o.dpr=i,o}return n(e,t),e.prototype.getElementCount=function(){return this.__endIndex-this.__startIndex},e.prototype.afterBrush=function(){this.__prevStartIndex=this.__startIndex,this.__prevEndIndex=this.__endIndex},e.prototype.initContext=function(){this.ctx=this.dom.getContext("2d"),this.ctx.dpr=this.dpr},e.prototype.setUnpainted=function(){this.__firstTimePaint=!0},e.prototype.createBackBuffer=function(){var t=this.dpr;this.domBack=Nw("back-"+this.id,this.painter,t),this.ctxBack=this.domBack.getContext("2d"),1!==t&&this.ctxBack.scale(t,t)},e.prototype.createRepaintRects=function(t,e,n,i){if(this.__firstTimePaint)return this.__firstTimePaint=!1,null;var r,o=[],a=this.maxRepaintRectCount,s=!1,l=new Re(0,0,0,0);function c(t){if(t.isFinite()&&!t.isZero())if(0===o.length)(e=new Re(0,0,0,0)).copy(t),o.push(e);else{for(var e,n=!1,i=1/0,r=0,c=0;c<o.length;++c){var u=o[c];if(u.intersect(t)){var h=new Re(0,0,0,0);h.copy(u),h.union(t),o[c]=h,n=!0;break}if(s){l.copy(t),l.union(u);var d=t.width*t.height,p=u.width*u.height,f=l.width*l.height-d-p;f<i&&(i=f,r=c)}}s&&(o[r].union(t),n=!0),n||((e=new Re(0,0,0,0)).copy(t),o.push(e)),s||(s=o.length>=a)}}for(var u=this.__startIndex;u<this.__endIndex;++u)if(p=t[u]){var h=p.shouldBePainted(n,i,!0,!0);(f=p.__isRendered&&(1&p.__dirty||!h)?p.getPrevPaintRect():null)&&c(f);var d=h&&(1&p.__dirty||!p.__isRendered)?p.getPaintRect():null;d&&c(d)}for(u=this.__prevStartIndex;u<this.__prevEndIndex;++u){var p,f;h=(p=e[u])&&p.shouldBePainted(n,i,!0,!0),!p||h&&p.__zr||!p.__isRendered||(f=p.getPrevPaintRect())&&c(f)}do{for(r=!1,u=0;u<o.length;)if(o[u].isZero())o.splice(u,1);else{for(var g=u+1;g<o.length;)o[u].intersect(o[g])?(r=!0,o[u].union(o[g]),o.splice(g,1)):g++;u++}}while(r);return this._paintRects=o,o},e.prototype.debugGetPaintRects=function(){return(this._paintRects||[]).slice()},e.prototype.resize=function(t,e){var n=this.dpr,i=this.dom,r=i.style,o=this.domBack;r&&(r.width=t+"px",r.height=e+"px"),i.width=t*n,i.height=e*n,o&&(o.width=t*n,o.height=e*n,1!==n&&this.ctxBack.scale(n,n))},e.prototype.clear=function(t,e,n){var i=this.dom,r=this.ctx,o=i.width,a=i.height;e=e||this.clearColor;var s=this.motionBlur&&!t,l=this.lastFrameAlpha,c=this.dpr,u=this;s&&(this.domBack||this.createBackBuffer(),this.ctxBack.globalCompositeOperation="copy",this.ctxBack.drawImage(i,0,0,o/c,a/c));var h=this.domBack;function d(t,n,i,o){if(r.clearRect(t,n,i,o),e&&"transparent"!==e){var a=void 0;J(e)?(a=(e.global||e.__width===i&&e.__height===o)&&e.__canvasGradient||Om(r,e,{x:0,y:0,width:i,height:o}),e.__canvasGradient=a,e.__width=i,e.__height=o):tt(e)&&(e.scaleX=e.scaleX||c,e.scaleY=e.scaleY||c,a=Hm(r,e,{dirty:function(){u.setUnpainted(),u.painter.refresh()}})),r.save(),r.fillStyle=a||e,r.fillRect(t,n,i,o),r.restore()}s&&(r.save(),r.globalAlpha=l,r.drawImage(h,t,n,i,o),r.restore())}!n||s?d(0,0,o,a):n.length&&R(n,(function(t){d(t.x*c,t.y*c,t.width*c,t.height*c)}))},e}(Ut),Bw=1e5,zw=314159,Fw=.01,Vw=function(){function t(t,e,n,i){this.type="canvas",this._zlevelList=[],this._prevDisplayList=[],this._layers={},this._layerConfig={},this._needsManuallyCompositing=!1,this.type="canvas";var r=!t.nodeName||"CANVAS"===t.nodeName.toUpperCase();this._opts=n=I({},n||{}),this.dpr=n.devicePixelRatio||er,this._singleCanvas=r,this.root=t,t.style&&(bt(t),t.innerHTML=""),this.storage=e;var o=this._zlevelList;this._prevDisplayList=[];var a=this._layers;if(r){var s=t,l=s.width,c=s.height;null!=n.width&&(l=n.width),null!=n.height&&(c=n.height),this.dpr=n.devicePixelRatio||1,s.width=l*this.dpr,s.height=c*this.dpr,this._width=l,this._height=c;var u=new Rw(s,this,this.dpr);u.__builtin__=!0,u.initContext(),a[314159]=u,u.zlevel=zw,o.push(zw),this._domRoot=t}else{this._width=Lm(t,0,n),this._height=Lm(t,1,n);var h=this._domRoot=function(t,e){var n=document.createElement("div");return n.style.cssText=["position:relative","width:"+t+"px","height:"+e+"px","padding:0","margin:0","border-width:0"].join(";")+";",n}(this._width,this._height);t.appendChild(h)}}return t.prototype.getType=function(){return"canvas"},t.prototype.isSingleCanvas=function(){return this._singleCanvas},t.prototype.getViewportRoot=function(){return this._domRoot},t.prototype.getViewportRootOffset=function(){var t=this.getViewportRoot();if(t)return{offsetLeft:t.offsetLeft||0,offsetTop:t.offsetTop||0}},t.prototype.refresh=function(t){var e=this.storage.getDisplayList(!0),n=this._prevDisplayList,i=this._zlevelList;this._redrawId=Math.random(),this._paintList(e,n,t,this._redrawId);for(var r=0;r<i.length;r++){var o=i[r],a=this._layers[o];if(!a.__builtin__&&a.refresh){var s=0===r?this._backgroundColor:null;a.refresh(s)}}return this._opts.useDirtyRect&&(this._prevDisplayList=e.slice()),this},t.prototype.refreshHover=function(){this._paintHoverList(this.storage.getDisplayList(!1))},t.prototype._paintHoverList=function(t){var e=t.length,n=this._hoverlayer;if(n&&n.clear(),e){for(var i,r={inHover:!0,viewWidth:this._width,viewHeight:this._height},o=0;o<e;o++){var a=t[o];a.__inHover&&(n||(n=this._hoverlayer=this.getLayer(Bw)),i||(i=n.ctx).save(),Zm(i,a,r,o===e-1))}i&&i.restore()}},t.prototype.getHoverLayer=function(){return this.getLayer(Bw)},t.prototype.paintOne=function(t,e){$m(t,e)},t.prototype._paintList=function(t,e,n,i){if(this._redrawId===i){n=n||!1,this._updateLayerStatus(t);var r=this._doPaintList(t,e,n),o=r.finished,a=r.needsRefreshHover;if(this._needsManuallyCompositing&&this._compositeManually(),a&&this._paintHoverList(t),o)this.eachLayer((function(t){t.afterBrush&&t.afterBrush()}));else{var s=this;nn((function(){s._paintList(t,e,n,i)}))}}},t.prototype._compositeManually=function(){var t=this.getLayer(zw).ctx,e=this._domRoot.width,n=this._domRoot.height;t.clearRect(0,0,e,n),this.eachBuiltinLayer((function(i){i.virtual&&t.drawImage(i.dom,0,0,e,n)}))},t.prototype._doPaintList=function(t,e,n){for(var i=this,o=[],a=this._opts.useDirtyRect,s=0;s<this._zlevelList.length;s++){var l=this._zlevelList[s],c=this._layers[l];c.__builtin__&&c!==this._hoverlayer&&(c.__dirty||n)&&o.push(c)}for(var u=!0,h=!1,d=function(r){var s,l=o[r],c=l.ctx,d=a&&l.createRepaintRects(t,e,p._width,p._height),f=n?l.__startIndex:l.__drawIndex,g=!n&&l.incremental&&Date.now,m=g&&Date.now(),v=l.zlevel===p._zlevelList[0]?p._backgroundColor:null;if(l.__startIndex===l.__endIndex)l.clear(!1,v,d);else if(f===l.__startIndex){var y=t[f];y.incremental&&y.notClear&&!n||l.clear(!1,v,d)}-1===f&&(console.error("For some unknown reason. drawIndex is -1"),f=l.__startIndex);var b=function(e){var n={inHover:!1,allClipped:!1,prevEl:null,viewWidth:i._width,viewHeight:i._height};for(s=f;s<l.__endIndex;s++){var r=t[s];if(r.__inHover&&(h=!0),i._doPaintEl(r,l,a,e,n,s===l.__endIndex-1),g&&Date.now()-m>15)break}n.prevElClipPaths&&c.restore()};if(d)if(0===d.length)s=l.__endIndex;else for(var x=p.dpr,_=0;_<d.length;++_){var w=d[_];c.save(),c.beginPath(),c.rect(w.x*x,w.y*x,w.width*x,w.height*x),c.clip(),b(w),c.restore()}else c.save(),b(),c.restore();l.__drawIndex=s,l.__drawIndex<l.__endIndex&&(u=!1)},p=this,f=0;f<o.length;f++)d(f);return r.wxa&&R(this._layers,(function(t){t&&t.ctx&&t.ctx.draw&&t.ctx.draw()})),{finished:u,needsRefreshHover:h}},t.prototype._doPaintEl=function(t,e,n,i,r,o){var a=e.ctx;if(n){var s=t.getPaintRect();(!i||s&&s.intersect(i))&&(Zm(a,t,r,o),t.setPrevPaintRect(s))}else Zm(a,t,r,o)},t.prototype.getLayer=function(t,e){this._singleCanvas&&!this._needsManuallyCompositing&&(t=zw);var n=this._layers[t];return n||((n=new Rw("zr_"+t,this,this.dpr)).zlevel=t,n.__builtin__=!0,this._layerConfig[t]?M(n,this._layerConfig[t],!0):this._layerConfig[t-Fw]&&M(n,this._layerConfig[t-Fw],!0),e&&(n.virtual=e),this.insertLayer(t,n),n.initContext()),n},t.prototype.insertLayer=function(t,e){var n=this._layers,i=this._zlevelList,r=i.length,o=this._domRoot,a=null,s=-1;if(!n[t]&&function(t){return!!t&&(!!t.__builtin__||"function"==typeof t.resize&&"function"==typeof t.refresh)}(e)){if(r>0&&t>i[0]){for(s=0;s<r-1&&!(i[s]<t&&i[s+1]>t);s++);a=n[i[s]]}if(i.splice(s+1,0,t),n[t]=e,!e.virtual)if(a){var l=a.dom;l.nextSibling?o.insertBefore(e.dom,l.nextSibling):o.appendChild(e.dom)}else o.firstChild?o.insertBefore(e.dom,o.firstChild):o.appendChild(e.dom);e.painter||(e.painter=this)}},t.prototype.eachLayer=function(t,e){for(var n=this._zlevelList,i=0;i<n.length;i++){var r=n[i];t.call(e,this._layers[r],r)}},t.prototype.eachBuiltinLayer=function(t,e){for(var n=this._zlevelList,i=0;i<n.length;i++){var r=n[i],o=this._layers[r];o.__builtin__&&t.call(e,o,r)}},t.prototype.eachOtherLayer=function(t,e){for(var n=this._zlevelList,i=0;i<n.length;i++){var r=n[i],o=this._layers[r];o.__builtin__||t.call(e,o,r)}},t.prototype.getLayers=function(){return this._layers},t.prototype._updateLayerStatus=function(t){function e(t){o&&(o.__endIndex!==t&&(o.__dirty=!0),o.__endIndex=t)}if(this.eachBuiltinLayer((function(t,e){t.__dirty=t.__used=!1})),this._singleCanvas)for(var n=1;n<t.length;n++)if((s=t[n]).zlevel!==t[n-1].zlevel||s.incremental){this._needsManuallyCompositing=!0;break}var i,r,o=null,a=0;for(r=0;r<t.length;r++){var s,l=(s=t[r]).zlevel,c=void 0;i!==l&&(i=l,a=0),s.incremental?((c=this.getLayer(l+.001,this._needsManuallyCompositing)).incremental=!0,a=1):c=this.getLayer(l+(a>0?Fw:0),this._needsManuallyCompositing),c.__builtin__||k("ZLevel "+l+" has been used by unkown layer "+c.id),c!==o&&(c.__used=!0,c.__startIndex!==r&&(c.__dirty=!0),c.__startIndex=r,c.incremental?c.__drawIndex=-1:c.__drawIndex=r,e(r),o=c),1&s.__dirty&&!s.__inHover&&(c.__dirty=!0,c.incremental&&c.__drawIndex<0&&(c.__drawIndex=r))}e(r),this.eachBuiltinLayer((function(t,e){!t.__used&&t.getElementCount()>0&&(t.__dirty=!0,t.__startIndex=t.__endIndex=t.__drawIndex=0),t.__dirty&&t.__drawIndex<0&&(t.__drawIndex=t.__startIndex)}))},t.prototype.clear=function(){return this.eachBuiltinLayer(this._clearLayer),this},t.prototype._clearLayer=function(t){t.clear()},t.prototype.setBackgroundColor=function(t){this._backgroundColor=t,R(this._layers,(function(t){t.setUnpainted()}))},t.prototype.configLayer=function(t,e){if(e){var n=this._layerConfig;n[t]?M(n[t],e,!0):n[t]=e;for(var i=0;i<this._zlevelList.length;i++){var r=this._zlevelList[i];r!==t&&r!==t+Fw||M(this._layers[r],n[t],!0)}}},t.prototype.delLayer=function(t){var e=this._layers,n=this._zlevelList,i=e[t];i&&(i.dom.parentNode.removeChild(i.dom),delete e[t],n.splice(D(n,t),1))},t.prototype.resize=function(t,e){if(this._domRoot.style){var n=this._domRoot;n.style.display="none";var i=this._opts,r=this.root;if(null!=t&&(i.width=t),null!=e&&(i.height=e),t=Lm(r,0,i),e=Lm(r,1,i),n.style.display="",this._width!==t||e!==this._height){for(var o in n.style.width=t+"px",n.style.height=e+"px",this._layers)this._layers.hasOwnProperty(o)&&this._layers[o].resize(t,e);this.refresh(!0)}this._width=t,this._height=e}else{if(null==t||null==e)return;this._width=t,this._height=e,this.getLayer(zw).resize(t,e)}return this},t.prototype.clearLayer=function(t){var e=this._layers[t];e&&e.clear()},t.prototype.dispose=function(){this.root.innerHTML="",this.root=this.storage=this._domRoot=this._layers=null},t.prototype.getRenderedCanvas=function(t){if(t=t||{},this._singleCanvas&&!this._compositeManually)return this._layers[314159].dom;var e=new Rw("image",this,t.pixelRatio||this.dpr);e.initContext(),e.clear(!1,t.backgroundColor||this._backgroundColor);var n=e.ctx;if(t.pixelRatio<=this.dpr){this.refresh();var i=e.dom.width,r=e.dom.height;this.eachLayer((function(t){t.__builtin__?n.drawImage(t.dom,0,0,i,r):t.renderToCanvas&&(n.save(),t.renderToCanvas(n),n.restore())}))}else for(var o={inHover:!1,viewWidth:this._width,viewHeight:this._height},a=this.storage.getDisplayList(!0),s=0,l=a.length;s<l;s++){var c=a[s];Zm(n,c,o,s===l-1)}return e.dom},t.prototype.getWidth=function(){return this._width},t.prototype.getHeight=function(){return this._height},t}(),Hw=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.hasSymbolVisual=!0,n}return n(e,t),e.prototype.getInitialData=function(t){return nb(null,this,{useEncodeDefaulter:!0})},e.prototype.getLegendIcon=function(t){var e=new Dr,n=Mm("line",0,t.itemHeight/2,t.itemWidth,0,t.lineStyle.stroke,!1);e.add(n),n.setStyle(t.lineStyle);var i=this.getData().getVisual("symbol"),r=this.getData().getVisual("symbolRotate"),o="none"===i?"circle":i,a=.8*t.itemHeight,s=Mm(o,(t.itemWidth-a)/2,(t.itemHeight-a)/2,a,a,t.itemStyle.fill);e.add(s),s.setStyle(t.itemStyle);var l="inherit"===t.iconRotate?r:t.iconRotate||0;return s.rotation=l*Math.PI/180,s.setOrigin([t.itemWidth/2,t.itemHeight/2]),o.indexOf("empty")>-1&&(s.style.stroke=s.style.fill,s.style.fill="#fff",s.style.lineWidth=2),e},e.type="series.line",e.dependencies=["grid","polar"],e.defaultOption={z:3,coordinateSystem:"cartesian2d",legendHoverLink:!0,clip:!0,label:{position:"top"},endLabel:{show:!1,valueAnimation:!0,distance:8},lineStyle:{width:2,type:"solid"},emphasis:{scale:!0},step:!1,smooth:!1,smoothMonotone:null,symbol:"emptyCircle",symbolSize:4,symbolRotate:null,showSymbol:!0,showAllSymbol:"auto",connectNulls:!1,sampling:"none",animationEasing:"linear",progressive:0,hoverLayerThreshold:1/0,universalTransition:{divideShape:"clone"},triggerLineEvent:!1},e}(ig);function Ww(t,e){var n=t.mapDimensionsAll("defaultedLabel"),i=n.length;if(1===i){var r=Jp(t,e,n[0]);return null!=r?r+"":null}if(i){for(var o=[],a=0;a<n.length;a++)o.push(Jp(t,e,n[a]));return o.join(" ")}}function jw(t,e){var n=t.mapDimensionsAll("defaultedLabel");if(!Y(e))return e+"";for(var i=[],r=0;r<n.length;r++){var o=t.getDimensionIndex(n[r]);o>=0&&i.push(e[o])}return i.join(" ")}var Yw=function(t){function e(e,n,i,r){var o=t.call(this)||this;return o.updateData(e,n,i,r),o}return n(e,t),e.prototype._createSymbol=function(t,e,n,i,r){this.removeAll();var o=Mm(t,-1,-1,2,2,null,r);o.attr({z2:100,culling:!0,scaleX:i[0]/2,scaleY:i[1]/2}),o.drift=Xw,this._symbolType=t,this.add(o)},e.prototype.stopSymbolAnimation=function(t){this.childAt(0).stopAnimation(null,t)},e.prototype.getSymbolType=function(){return this._symbolType},e.prototype.getSymbolPath=function(){return this.childAt(0)},e.prototype.highlight=function(){Sl(this.childAt(0))},e.prototype.downplay=function(){Cl(this.childAt(0))},e.prototype.setZ=function(t,e){var n=this.childAt(0);n.zlevel=t,n.z=e},e.prototype.setDraggable=function(t,e){var n=this.childAt(0);n.draggable=t,n.cursor=!e&&t?"move":n.cursor},e.prototype.updateData=function(t,n,i,r){this.silent=!1;var o=t.getItemVisual(n,"symbol")||"circle",a=t.hostModel,s=e.getSymbolSize(t,n),l=o!==this._symbolType,c=r&&r.disableAnimation;if(l){var u=t.getItemVisual(n,"symbolKeepAspect");this._createSymbol(o,t,n,s,u)}else{(d=this.childAt(0)).silent=!1;var h={scaleX:s[0]/2,scaleY:s[1]/2};c?d.attr(h):au(d,h,a,n),du(d)}if(this._updateCommon(t,n,s,i,r),l){var d=this.childAt(0);c||(h={scaleX:this._sizeX,scaleY:this._sizeY,style:{opacity:d.style.opacity}},d.scaleX=d.scaleY=0,d.style.opacity=0,su(d,h,a,n))}c&&this.childAt(0).stopAnimation("leave")},e.prototype._updateCommon=function(t,e,n,i,r){var o,a,s,l,c,u,h,d,p,f=this.childAt(0),g=t.hostModel;if(i&&(o=i.emphasisItemStyle,a=i.blurItemStyle,s=i.selectItemStyle,l=i.focus,c=i.blurScope,h=i.labelStatesModels,d=i.hoverScale,p=i.cursorStyle,u=i.emphasisDisabled),!i||t.hasItemOption){var m=i&&i.itemModel?i.itemModel:t.getItemModel(e),v=m.getModel("emphasis");o=v.getModel("itemStyle").getItemStyle(),s=m.getModel(["select","itemStyle"]).getItemStyle(),a=m.getModel(["blur","itemStyle"]).getItemStyle(),l=v.get("focus"),c=v.get("blurScope"),u=v.get("disabled"),h=Gu(m),d=v.getShallow("scale"),p=m.getShallow("cursor")}var y=t.getItemVisual(e,"symbolRotate");f.attr("rotation",(y||0)*Math.PI/180||0);var b=Im(t.getItemVisual(e,"symbolOffset"),n);b&&(f.x=b[0],f.y=b[1]),p&&f.attr("cursor",p);var x=t.getItemVisual(e,"style"),_=x.fill;if(f instanceof As){var w=f.style;f.useStyle(I({image:w.image,x:w.x,y:w.y,width:w.width,height:w.height},x))}else f.__isEmptyBrush?f.useStyle(I({},x)):f.useStyle(x),f.style.decal=null,f.setColor(_,r&&r.symbolInnerColor),f.style.strokeNoScale=!0;var S=t.getItemVisual(e,"liftZ"),C=this._z2;null!=S?null==C&&(this._z2=f.z2,f.z2+=S):null!=C&&(f.z2=C,this._z2=null);var k=r&&r.useNameLabel;Xu(f,h,{labelFetcher:g,labelDataIndex:e,defaultText:function(e){return k?t.getName(e):Ww(t,e)},inheritColor:_,defaultOpacity:x.opacity}),this._sizeX=n[0]/2,this._sizeY=n[1]/2;var A=f.ensureState("emphasis");A.style=o,f.ensureState("select").style=s,f.ensureState("blur").style=a;var M=null==d||!0===d?Math.max(1.1,3/this._sizeY):isFinite(d)&&d>0?+d:1;A.scaleX=this._sizeX*M,A.scaleY=this._sizeY*M,this.setSymbolScale(1),Bl(this,l,c,u)},e.prototype.setSymbolScale=function(t){this.scaleX=this.scaleY=t},e.prototype.fadeOut=function(t,e,n){var i=this.childAt(0),r=$s(this).dataIndex,o=n&&n.animation;if(this.silent=i.silent=!0,n&&n.fadeLabel){var a=i.getTextContent();a&&cu(a,{style:{opacity:0}},e,{dataIndex:r,removeOpt:o,cb:function(){i.removeTextContent()}})}else i.removeTextContent();cu(i,{style:{opacity:0},scaleX:0,scaleY:0},e,{dataIndex:r,cb:t,removeOpt:o})},e.getSymbolSize=function(t,e){return Tm(t.getItemVisual(e,"symbolSize"))},e}(Dr);function Xw(t,e){this.parent.drift(t,e)}function Gw(t,e,n,i){return e&&!isNaN(e[0])&&!isNaN(e[1])&&!(i.isIgnore&&i.isIgnore(n))&&!(i.clipShape&&!i.clipShape.contain(e[0],e[1]))&&"none"!==t.getItemVisual(n,"symbol")}function qw(t){return null==t||$(t)||(t={isIgnore:t}),t||{}}function Uw(t){var e=t.hostModel,n=e.getModel("emphasis");return{emphasisItemStyle:n.getModel("itemStyle").getItemStyle(),blurItemStyle:e.getModel(["blur","itemStyle"]).getItemStyle(),selectItemStyle:e.getModel(["select","itemStyle"]).getItemStyle(),focus:n.get("focus"),blurScope:n.get("blurScope"),emphasisDisabled:n.get("disabled"),hoverScale:n.get("scale"),labelStatesModels:Gu(e),cursorStyle:e.get("cursor")}}var $w=function(){function t(t){this.group=new Dr,this._SymbolCtor=t||Yw}return t.prototype.updateData=function(t,e){this._progressiveEls=null,e=qw(e);var n=this.group,i=t.hostModel,r=this._data,o=this._SymbolCtor,a=e.disableAnimation,s=Uw(t),l={disableAnimation:a},c=e.getSymbolPoint||function(e){return t.getItemLayout(e)};r||n.removeAll(),t.diff(r).add((function(i){var r=c(i);if(Gw(t,r,i,e)){var a=new o(t,i,s,l);a.setPosition(r),t.setItemGraphicEl(i,a),n.add(a)}})).update((function(u,h){var d=r.getItemGraphicEl(h),p=c(u);if(Gw(t,p,u,e)){var f=t.getItemVisual(u,"symbol")||"circle",g=d&&d.getSymbolType&&d.getSymbolType();if(!d||g&&g!==f)n.remove(d),(d=new o(t,u,s,l)).setPosition(p);else{d.updateData(t,u,s,l);var m={x:p[0],y:p[1]};a?d.attr(m):au(d,m,i)}n.add(d),t.setItemGraphicEl(u,d)}else n.remove(d)})).remove((function(t){var e=r.getItemGraphicEl(t);e&&e.fadeOut((function(){n.remove(e)}),i)})).execute(),this._getSymbolPoint=c,this._data=t},t.prototype.updateLayout=function(){var t=this,e=this._data;e&&e.eachItemGraphicEl((function(e,n){var i=t._getSymbolPoint(n);e.setPosition(i),e.markRedraw()}))},t.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=Uw(t),this._data=null,this.group.removeAll()},t.prototype.incrementalUpdate=function(t,e,n){function i(t){t.isGroup||(t.incremental=!0,t.ensureState("emphasis").hoverLayer=!0)}this._progressiveEls=[],n=qw(n);for(var r=t.start;r<t.end;r++){var o=e.getItemLayout(r);if(Gw(e,o,r,n)){var a=new this._SymbolCtor(e,r,this._seriesScope);a.traverse(i),a.setPosition(o),this.group.add(a),e.setItemGraphicEl(r,a),this._progressiveEls.push(a)}}},t.prototype.eachRendered=function(t){Vu(this._progressiveEls||this.group,t)},t.prototype.remove=function(t){var e=this.group,n=this._data;n&&t?n.eachItemGraphicEl((function(t){t.fadeOut((function(){e.remove(t)}),n.hostModel)})):e.removeAll()},t}();function Zw(t,e,n){var i=t.getBaseAxis(),r=t.getOtherAxis(i),o=function(t,e){var n=0,i=t.scale.getExtent();return"start"===e?n=i[0]:"end"===e?n=i[1]:U(e)&&!isNaN(e)?n=e:i[0]>0?n=i[0]:i[1]<0&&(n=i[1]),n}(r,n),a=i.dim,s=r.dim,l=e.mapDimension(s),c=e.mapDimension(a),u="x"===s||"radius"===s?1:0,h=B(t.dimensions,(function(t){return e.mapDimension(t)})),d=!1,p=e.getCalculationInfo("stackResultDimension");return tb(e,h[0])&&(d=!0,h[0]=p),tb(e,h[1])&&(d=!0,h[1]=p),{dataDimsForPoint:h,valueStart:o,valueAxisDim:s,baseAxisDim:a,stacked:!!d,valueDim:l,baseDim:c,baseDataOffset:u,stackedOverDimension:e.getCalculationInfo("stackedOverDimension")}}function Kw(t,e,n,i){var r=NaN;t.stacked&&(r=n.get(n.getCalculationInfo("stackedOverDimension"),i)),isNaN(r)&&(r=t.valueStart);var o=t.baseDataOffset,a=[];return a[o]=n.get(t.baseDim,i),a[1-o]=r,e.dataToPoint(a)}var Qw=Math.min,Jw=Math.max;function tS(t,e){return isNaN(t)||isNaN(e)}function eS(t,e,n,i,r,o,a,s,l){for(var c,u,h,d,p,f,g=n,m=0;m<i;m++){var v=e[2*g],y=e[2*g+1];if(g>=r||g<0)break;if(tS(v,y)){if(l){g+=o;continue}break}if(g===n)t[o>0?"moveTo":"lineTo"](v,y),h=v,d=y;else{var b=v-c,x=y-u;if(b*b+x*x<.5){g+=o;continue}if(a>0){for(var _=g+o,w=e[2*_],S=e[2*_+1];w===v&&S===y&&m<i;)m++,g+=o,w=e[2*(_+=o)],S=e[2*_+1],b=(v=e[2*g])-c,x=(y=e[2*g+1])-u;var C=m+1;if(l)for(;tS(w,S)&&C<i;)C++,w=e[2*(_+=o)],S=e[2*_+1];var k=.5,A=0,M=0,T=void 0,I=void 0;if(C>=i||tS(w,S))p=v,f=y;else{A=w-c,M=S-u;var E=v-c,O=w-v,D=y-u,L=S-y,P=void 0,N=void 0;if("x"===s){var R=A>0?1:-1;p=v-R*(P=Math.abs(E))*a,f=y,T=v+R*(N=Math.abs(O))*a,I=y}else if("y"===s){var B=M>0?1:-1;p=v,f=y-B*(P=Math.abs(D))*a,T=v,I=y+B*(N=Math.abs(L))*a}else P=Math.sqrt(E*E+D*D),p=v-A*a*(1-(k=(N=Math.sqrt(O*O+L*L))/(N+P))),f=y-M*a*(1-k),I=y+M*a*k,T=Qw(T=v+A*a*k,Jw(w,v)),I=Qw(I,Jw(S,y)),T=Jw(T,Qw(w,v)),f=y-(M=(I=Jw(I,Qw(S,y)))-y)*P/N,p=Qw(p=v-(A=T-v)*P/N,Jw(c,v)),f=Qw(f,Jw(u,y)),T=v+(A=v-(p=Jw(p,Qw(c,v))))*N/P,I=y+(M=y-(f=Jw(f,Qw(u,y))))*N/P}t.bezierCurveTo(h,d,p,f,v,y),h=T,d=I}else t.lineTo(v,y)}c=v,u=y,g+=o}return m}var nS=function(){this.smooth=0,this.smoothConstraint=!0},iS=function(t){function e(e){var n=t.call(this,e)||this;return n.type="ec-polyline",n}return n(e,t),e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new nS},e.prototype.buildPath=function(t,e){var n=e.points,i=0,r=n.length/2;if(e.connectNulls){for(;r>0&&tS(n[2*r-2],n[2*r-1]);r--);for(;i<r&&tS(n[2*i],n[2*i+1]);i++);}for(;i<r;)i+=eS(t,n,i,r,r,1,e.smooth,e.smoothMonotone,e.connectNulls)+1},e.prototype.getPointOn=function(t,e){this.path||(this.createPathProxy(),this.buildPath(this.path,this.shape));for(var n,i,r=this.path.data,o=es.CMD,a="x"===e,s=[],l=0;l<r.length;){var c=void 0,u=void 0,h=void 0,d=void 0,p=void 0,f=void 0,g=void 0;switch(r[l++]){case o.M:n=r[l++],i=r[l++];break;case o.L:if(c=r[l++],u=r[l++],(g=a?(t-n)/(c-n):(t-i)/(u-i))<=1&&g>=0){var m=a?(u-i)*g+i:(c-n)*g+n;return a?[t,m]:[m,t]}n=c,i=u;break;case o.C:c=r[l++],u=r[l++],h=r[l++],d=r[l++],p=r[l++],f=r[l++];var v=a?vn(n,c,h,p,t,s):vn(i,u,d,f,t,s);if(v>0)for(var y=0;y<v;y++){var b=s[y];if(b<=1&&b>=0)return m=a?gn(i,u,d,f,b):gn(n,c,h,p,b),a?[t,m]:[m,t]}n=p,i=f}}},e}(_s),rS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e}(nS),oS=function(t){function e(e){var n=t.call(this,e)||this;return n.type="ec-polygon",n}return n(e,t),e.prototype.getDefaultShape=function(){return new rS},e.prototype.buildPath=function(t,e){var n=e.points,i=e.stackedOnPoints,r=0,o=n.length/2,a=e.smoothMonotone;if(e.connectNulls){for(;o>0&&tS(n[2*o-2],n[2*o-1]);o--);for(;r<o&&tS(n[2*r],n[2*r+1]);r++);}for(;r<o;){var s=eS(t,n,r,o,o,1,e.smooth,a,e.connectNulls);eS(t,i,r+s-1,s,o,-1,e.stackedOnSmooth,a,e.connectNulls),r+=s+1,t.closePath()}},e}(_s);function aS(t,e,n,i,r){var o=t.getArea(),a=o.x,s=o.y,l=o.width,c=o.height,u=n.get(["lineStyle","width"])||2;a-=u/2,s-=u/2,l+=u,c+=u,l=Math.ceil(l),a!==Math.floor(a)&&(a=Math.floor(a),l++);var h=new Ls({shape:{x:a,y:s,width:l,height:c}});if(e){var d=t.getBaseAxis(),p=d.isHorizontal(),f=d.inverse;p?(f&&(h.shape.x+=l),h.shape.width=0):(f||(h.shape.y+=c),h.shape.height=0);var g=X(r)?function(t){r(t,h)}:null;su(h,{shape:{width:l,height:c,x:a,y:s}},n,null,i,g)}return h}function sS(t,e,n){var i=t.getArea(),r=Yr(i.r0,1),o=Yr(i.r,1),a=new Ic({shape:{cx:Yr(t.cx,1),cy:Yr(t.cy,1),r0:r,r:o,startAngle:i.startAngle,endAngle:i.endAngle,clockwise:i.clockwise}});return e&&("angle"===t.getBaseAxis().dim?a.shape.endAngle=i.startAngle:a.shape.r=r,su(a,{shape:{endAngle:i.endAngle,r:o}},n)),a}function lS(t,e,n,i,r){return t?"polar"===t.type?sS(t,e,n):"cartesian2d"===t.type?aS(t,e,n,i,r):null:null}function cS(t,e){return t.type===e}function uS(t,e){if(t.length===e.length){for(var n=0;n<t.length;n++)if(t[n]!==e[n])return;return!0}}function hS(t){for(var e=1/0,n=1/0,i=-1/0,r=-1/0,o=0;o<t.length;){var a=t[o++],s=t[o++];isNaN(a)||(e=Math.min(a,e),i=Math.max(a,i)),isNaN(s)||(n=Math.min(s,n),r=Math.max(s,r))}return[[e,n],[i,r]]}function dS(t,e){var n=hS(t),i=n[0],r=n[1],o=hS(e),a=o[0],s=o[1];return Math.max(Math.abs(i[0]-a[0]),Math.abs(i[1]-a[1]),Math.abs(r[0]-s[0]),Math.abs(r[1]-s[1]))}function pS(t){return U(t)?t:t?.5:0}function fS(t,e,n,i){var r=e.getBaseAxis(),o="x"===r.dim||"radius"===r.dim?0:1,a=[],s=0,l=[],c=[],u=[],h=[];if(i){for(s=0;s<t.length;s+=2)isNaN(t[s])||isNaN(t[s+1])||h.push(t[s],t[s+1]);t=h}for(s=0;s<t.length-2;s+=2)switch(u[0]=t[s+2],u[1]=t[s+3],c[0]=t[s],c[1]=t[s+1],a.push(c[0],c[1]),n){case"end":l[o]=u[o],l[1-o]=c[1-o],a.push(l[0],l[1]);break;case"middle":var d=(c[o]+u[o])/2,p=[];l[o]=p[o]=d,l[1-o]=c[1-o],p[1-o]=u[1-o],a.push(l[0],l[1]),a.push(p[0],p[1]);break;default:l[o]=c[o],l[1-o]=u[1-o],a.push(l[0],l[1])}return a.push(t[s++],t[s++]),a}function gS(t,e,n){var i=t.getVisual("visualMeta");if(i&&i.length&&t.count()&&"cartesian2d"===e.type){for(var r,o,a=i.length-1;a>=0;a--){var s=t.getDimensionInfo(i[a].dimension);if("x"===(r=s&&s.coordDim)||"y"===r){o=i[a];break}}if(o){var l=e.getAxis(r),c=B(o.stops,(function(t){return{coord:l.toGlobalCoord(l.dataToCoord(t.value)),color:t.color}})),u=c.length,h=o.outerColors.slice();u&&c[0].coord>c[u-1].coord&&(c.reverse(),h.reverse());var d=function(t,e){var n,i,r=[],o=t.length;function a(t,e,n){var i=t.coord;return{coord:n,color:Kn((n-i)/(e.coord-i),[t.color,e.color])}}for(var s=0;s<o;s++){var l=t[s],c=l.coord;if(c<0)n=l;else{if(c>e){i?r.push(a(i,l,e)):n&&r.push(a(n,l,0),a(n,l,e));break}n&&(r.push(a(n,l,0)),n=null),r.push(l),i=l}}return r}(c,"x"===r?n.getWidth():n.getHeight()),p=d.length;if(!p&&u)return c[0].coord<0?h[1]?h[1]:c[u-1].color:h[0]?h[0]:c[0].color;var f=d[0].coord-10,g=d[p-1].coord+10,m=g-f;if(m<.001)return"transparent";R(d,(function(t){t.offset=(t.coord-f)/m})),d.push({offset:p?d[p-1].offset:.5,color:h[1]||"transparent"}),d.unshift({offset:p?d[0].offset:.5,color:h[0]||"transparent"});var v=new Uc(0,0,0,0,d,!0);return v[r]=f,v[r+"2"]=g,v}}}function mS(t,e,n){var i=t.get("showAllSymbol"),r="auto"===i;if(!i||r){var o=n.getAxesByScale("ordinal")[0];if(o&&(!r||!function(t,e){var n=t.getExtent(),i=Math.abs(n[1]-n[0])/t.scale.count();isNaN(i)&&(i=0);for(var r=e.count(),o=Math.max(1,Math.round(r/5)),a=0;a<r;a+=o)if(1.5*Yw.getSymbolSize(e,a)[t.isHorizontal()?1:0]>i)return!1;return!0}(o,e))){var a=e.mapDimension(o.dim),s={};return R(o.getViewLabels(),(function(t){var e=o.scale.getRawOrdinalNumber(t.tickValue);s[e]=1})),function(t){return!s.hasOwnProperty(e.get(a,t))}}}}function vS(t,e){return[t[2*e],t[2*e+1]]}function yS(t){if(t.get(["endLabel","show"]))return!0;for(var e=0;e<el.length;e++)if(t.get([el[e],"endLabel","show"]))return!0;return!1}function bS(t,e,n,i){if(cS(e,"cartesian2d")){var r=i.getModel("endLabel"),o=r.get("valueAnimation"),a=i.getData(),s={lastFrameIndex:0},l=yS(i)?function(n,i){t._endLabelOnDuring(n,i,a,s,o,r,e)}:null,c=e.getBaseAxis().isHorizontal(),u=aS(e,n,i,(function(){var e=t._endLabel;e&&n&&null!=s.originalX&&e.attr({x:s.originalX,y:s.originalY})}),l);if(!i.get("clip",!0)){var h=u.shape,d=Math.max(h.width,h.height);c?(h.y-=d,h.height+=2*d):(h.x-=d,h.width+=2*d)}return l&&l(1,u),u}return sS(e,n,i)}var xS=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.init=function(){var t=new Dr,e=new $w;this.group.add(e.group),this._symbolDraw=e,this._lineGroup=t},e.prototype.render=function(t,e,n){var i=this,r=t.coordinateSystem,o=this.group,a=t.getData(),s=t.getModel("lineStyle"),l=t.getModel("areaStyle"),c=a.getLayout("points")||[],u="polar"===r.type,h=this._coordSys,d=this._symbolDraw,p=this._polyline,f=this._polygon,g=this._lineGroup,m=!e.ssr&&t.get("animation"),v=!l.isEmpty(),y=l.get("origin"),b=Zw(r,a,y),x=v&&function(t,e,n){if(!n.valueDim)return[];for(var i=e.count(),r=bb(2*i),o=0;o<i;o++){var a=Kw(n,t,e,o);r[2*o]=a[0],r[2*o+1]=a[1]}return r}(r,a,b),_=t.get("showSymbol"),w=t.get("connectNulls"),S=_&&!u&&mS(t,a,r),C=this._data;C&&C.eachItemGraphicEl((function(t,e){t.__temp&&(o.remove(t),C.setItemGraphicEl(e,null))})),_||d.remove(),o.add(g);var k,A=!u&&t.get("step");r&&r.getArea&&t.get("clip",!0)&&(null!=(k=r.getArea()).width?(k.x-=.1,k.y-=.1,k.width+=.2,k.height+=.2):k.r0&&(k.r0-=.5,k.r+=.5)),this._clipShapeForSymbol=k;var M=gS(a,r,n)||a.getVisual("style")[a.getVisual("drawType")];if(p&&h.type===r.type&&A===this._step){v&&!f?f=this._newPolygon(c,x):f&&!v&&(g.remove(f),f=this._polygon=null),u||this._initOrUpdateEndLabel(t,r,cd(M));var T=g.getClipPath();T?su(T,{shape:bS(this,r,!1,t).shape},t):g.setClipPath(bS(this,r,!0,t)),_&&d.updateData(a,{isIgnore:S,clipShape:k,disableAnimation:!0,getSymbolPoint:function(t){return[c[2*t],c[2*t+1]]}}),uS(this._stackedOnPoints,x)&&uS(this._points,c)||(m?this._doUpdateAnimation(a,x,r,n,A,y,w):(A&&(c=fS(c,r,A,w),x&&(x=fS(x,r,A,w))),p.setShape({points:c}),f&&f.setShape({points:c,stackedOnPoints:x})))}else _&&d.updateData(a,{isIgnore:S,clipShape:k,disableAnimation:!0,getSymbolPoint:function(t){return[c[2*t],c[2*t+1]]}}),m&&this._initSymbolLabelAnimation(a,r,k),A&&(c=fS(c,r,A,w),x&&(x=fS(x,r,A,w))),p=this._newPolyline(c),v?f=this._newPolygon(c,x):f&&(g.remove(f),f=this._polygon=null),u||this._initOrUpdateEndLabel(t,r,cd(M)),g.setClipPath(bS(this,r,!0,t));var I=t.getModel("emphasis"),O=I.get("focus"),D=I.get("blurScope"),L=I.get("disabled");p.useStyle(E(s.getLineStyle(),{fill:"none",stroke:M,lineJoin:"bevel"})),Hl(p,t,"lineStyle"),p.style.lineWidth>0&&"bolder"===t.get(["emphasis","lineStyle","width"])&&(p.getState("emphasis").style.lineWidth=+p.style.lineWidth+1),$s(p).seriesIndex=t.seriesIndex,Bl(p,O,D,L);var P=pS(t.get("smooth")),N=t.get("smoothMonotone");if(p.setShape({smooth:P,smoothMonotone:N,connectNulls:w}),f){var R=a.getCalculationInfo("stackedOnSeries"),B=0;f.useStyle(E(l.getAreaStyle(),{fill:M,opacity:.7,lineJoin:"bevel",decal:a.getVisual("style").decal})),R&&(B=pS(R.get("smooth"))),f.setShape({smooth:P,stackedOnSmooth:B,smoothMonotone:N,connectNulls:w}),Hl(f,t,"areaStyle"),$s(f).seriesIndex=t.seriesIndex,Bl(f,O,D,L)}var z=function(t){i._changePolyState(t)};a.eachItemGraphicEl((function(t){t&&(t.onHoverStateChange=z)})),this._polyline.onHoverStateChange=z,this._data=a,this._coordSys=r,this._stackedOnPoints=x,this._points=c,this._step=A,this._valueOrigin=y,t.get("triggerLineEvent")&&(this.packEventData(t,p),f&&this.packEventData(t,f))},e.prototype.packEventData=function(t,e){$s(e).eventData={componentType:"series",componentSubType:"line",componentIndex:t.componentIndex,seriesIndex:t.seriesIndex,seriesName:t.name,seriesType:"line"}},e.prototype.highlight=function(t,e,n,i){var r=t.getData(),o=To(r,i);if(this._changePolyState("emphasis"),!(o instanceof Array)&&null!=o&&o>=0){var a=r.getLayout("points"),s=r.getItemGraphicEl(o);if(!s){var l=a[2*o],c=a[2*o+1];if(isNaN(l)||isNaN(c))return;if(this._clipShapeForSymbol&&!this._clipShapeForSymbol.contain(l,c))return;var u=t.get("zlevel")||0,h=t.get("z")||0;(s=new Yw(r,o)).x=l,s.y=c,s.setZ(u,h);var d=s.getSymbolPath().getTextContent();d&&(d.zlevel=u,d.z=h,d.z2=this._polyline.z2+1),s.__temp=!0,r.setItemGraphicEl(o,s),s.stopSymbolAnimation(!0),this.group.add(s)}s.highlight()}else gg.prototype.highlight.call(this,t,e,n,i)},e.prototype.downplay=function(t,e,n,i){var r=t.getData(),o=To(r,i);if(this._changePolyState("normal"),null!=o&&o>=0){var a=r.getItemGraphicEl(o);a&&(a.__temp?(r.setItemGraphicEl(o,null),this.group.remove(a)):a.downplay())}else gg.prototype.downplay.call(this,t,e,n,i)},e.prototype._changePolyState=function(t){var e=this._polygon;yl(this._polyline,t),e&&yl(e,t)},e.prototype._newPolyline=function(t){var e=this._polyline;return e&&this._lineGroup.remove(e),e=new iS({shape:{points:t},segmentIgnoreThreshold:2,z2:10}),this._lineGroup.add(e),this._polyline=e,e},e.prototype._newPolygon=function(t,e){var n=this._polygon;return n&&this._lineGroup.remove(n),n=new oS({shape:{points:t,stackedOnPoints:e},segmentIgnoreThreshold:2}),this._lineGroup.add(n),this._polygon=n,n},e.prototype._initSymbolLabelAnimation=function(t,e,n){var i,r,o=e.getBaseAxis(),a=o.inverse;"cartesian2d"===e.type?(i=o.isHorizontal(),r=!1):"polar"===e.type&&(i="angle"===o.dim,r=!0);var s=t.hostModel,l=s.get("animationDuration");X(l)&&(l=l(null));var c=s.get("animationDelay")||0,u=X(c)?c(null):c;t.eachItemGraphicEl((function(t,o){var s=t;if(s){var h=[t.x,t.y],d=void 0,p=void 0,f=void 0;if(n)if(r){var g=n,m=e.pointToCoord(h);i?(d=g.startAngle,p=g.endAngle,f=-m[1]/180*Math.PI):(d=g.r0,p=g.r,f=m[0])}else{var v=n;i?(d=v.x,p=v.x+v.width,f=t.x):(d=v.y+v.height,p=v.y,f=t.y)}var y=p===d?0:(f-d)/(p-d);a&&(y=1-y);var b=X(c)?c(o):l*y+u,x=s.getSymbolPath(),_=x.getTextContent();s.attr({scaleX:0,scaleY:0}),s.animateTo({scaleX:1,scaleY:1},{duration:200,setToFinal:!0,delay:b}),_&&_.animateFrom({style:{opacity:0}},{duration:300,delay:b}),x.disableLabelAnimation=!0}}))},e.prototype._initOrUpdateEndLabel=function(t,e,n){var i=t.getModel("endLabel");if(yS(t)){var r=t.getData(),o=this._polyline,a=r.getLayout("points");if(!a)return o.removeTextContent(),void(this._endLabel=null);var s=this._endLabel;s||((s=this._endLabel=new Rs({z2:200})).ignoreClip=!0,o.setTextContent(this._endLabel),o.disableLabelAnimation=!0);var l=function(t){for(var e,n,i=t.length/2;i>0&&(e=t[2*i-2],n=t[2*i-1],isNaN(e)||isNaN(n));i--);return i-1}(a);l>=0&&(Xu(o,Gu(t,"endLabel"),{inheritColor:n,labelFetcher:t,labelDataIndex:l,defaultText:function(t,e,n){return null!=n?jw(r,n):Ww(r,t)},enableTextSetter:!0},function(t,e){var n=e.getBaseAxis(),i=n.isHorizontal(),r=n.inverse,o=i?r?"right":"left":"center",a=i?"middle":r?"top":"bottom";return{normal:{align:t.get("align")||o,verticalAlign:t.get("verticalAlign")||a}}}(i,e)),o.textConfig.position=null)}else this._endLabel&&(this._polyline.removeTextContent(),this._endLabel=null)},e.prototype._endLabelOnDuring=function(t,e,n,i,r,o,a){var s=this._endLabel,l=this._polyline;if(s){t<1&&null==i.originalX&&(i.originalX=s.x,i.originalY=s.y);var c=n.getLayout("points"),u=n.hostModel,h=u.get("connectNulls"),d=o.get("precision"),p=o.get("distance")||0,f=a.getBaseAxis(),g=f.isHorizontal(),m=f.inverse,v=e.shape,y=m?g?v.x:v.y+v.height:g?v.x+v.width:v.y,b=(g?p:0)*(m?-1:1),x=(g?0:-p)*(m?-1:1),_=g?"x":"y",w=function(t,e,n){for(var i,r,o=t.length/2,a="x"===n?0:1,s=0,l=-1,c=0;c<o;c++)if(r=t[2*c+a],!isNaN(r)&&!isNaN(t[2*c+1-a]))if(0!==c){if(i<=e&&r>=e||i>=e&&r<=e){l=c;break}s=c,i=r}else i=r;return{range:[s,l],t:(e-i)/(r-i)}}(c,y,_),S=w.range,C=S[1]-S[0],k=void 0;if(C>=1){if(C>1&&!h){var A=vS(c,S[0]);s.attr({x:A[0]+b,y:A[1]+x}),r&&(k=u.getRawValue(S[0]))}else{(A=l.getPointOn(y,_))&&s.attr({x:A[0]+b,y:A[1]+x});var M=u.getRawValue(S[0]),T=u.getRawValue(S[1]);r&&(k=zo(n,d,M,T,w.t))}i.lastFrameIndex=S[0]}else{var I=1===t||i.lastFrameIndex>0?S[0]:0;A=vS(c,I),r&&(k=u.getRawValue(I)),s.attr({x:A[0]+b,y:A[1]+x})}if(r){var E=th(s);"function"==typeof E.setLabelText&&E.setLabelText(k)}}},e.prototype._doUpdateAnimation=function(t,e,n,i,r,o,a){var s=this._polyline,l=this._polygon,c=t.hostModel,u=function(t,e,n,i,r,o,a,s){for(var l=function(t,e){var n=[];return e.diff(t).add((function(t){n.push({cmd:"+",idx:t})})).update((function(t,e){n.push({cmd:"=",idx:e,idx1:t})})).remove((function(t){n.push({cmd:"-",idx:t})})).execute(),n}(t,e),c=[],u=[],h=[],d=[],p=[],f=[],g=[],m=Zw(r,e,a),v=t.getLayout("points")||[],y=e.getLayout("points")||[],b=0;b<l.length;b++){var x=l[b],_=!0,w=void 0,S=void 0;switch(x.cmd){case"=":w=2*x.idx,S=2*x.idx1;var C=v[w],k=v[w+1],A=y[S],M=y[S+1];(isNaN(C)||isNaN(k))&&(C=A,k=M),c.push(C,k),u.push(A,M),h.push(n[w],n[w+1]),d.push(i[S],i[S+1]),g.push(e.getRawIndex(x.idx1));break;case"+":var T=x.idx,I=m.dataDimsForPoint,E=r.dataToPoint([e.get(I[0],T),e.get(I[1],T)]);S=2*T,c.push(E[0],E[1]),u.push(y[S],y[S+1]);var O=Kw(m,r,e,T);h.push(O[0],O[1]),d.push(i[S],i[S+1]),g.push(e.getRawIndex(T));break;case"-":_=!1}_&&(p.push(x),f.push(f.length))}f.sort((function(t,e){return g[t]-g[e]}));var D=c.length,L=bb(D),P=bb(D),N=bb(D),R=bb(D),B=[];for(b=0;b<f.length;b++){var z=f[b],F=2*b,V=2*z;L[F]=c[V],L[F+1]=c[V+1],P[F]=u[V],P[F+1]=u[V+1],N[F]=h[V],N[F+1]=h[V+1],R[F]=d[V],R[F+1]=d[V+1],B[b]=p[z]}return{current:L,next:P,stackedOnCurrent:N,stackedOnNext:R,status:B}}(this._data,t,this._stackedOnPoints,e,this._coordSys,0,this._valueOrigin),h=u.current,d=u.stackedOnCurrent,p=u.next,f=u.stackedOnNext;if(r&&(h=fS(u.current,n,r,a),d=fS(u.stackedOnCurrent,n,r,a),p=fS(u.next,n,r,a),f=fS(u.stackedOnNext,n,r,a)),dS(h,p)>3e3||l&&dS(d,f)>3e3)return s.stopAnimation(),s.setShape({points:p}),void(l&&(l.stopAnimation(),l.setShape({points:p,stackedOnPoints:f})));s.shape.__points=u.current,s.shape.points=h;var g={shape:{points:p}};u.current!==h&&(g.shape.__points=u.next),s.stopAnimation(),au(s,g,c),l&&(l.setShape({points:h,stackedOnPoints:d}),l.stopAnimation(),au(l,{shape:{stackedOnPoints:f}},c),s.shape.points!==l.shape.points&&(l.shape.points=s.shape.points));for(var m=[],v=u.status,y=0;y<v.length;y++)if("="===v[y].cmd){var b=t.getItemGraphicEl(v[y].idx1);b&&m.push({el:b,ptIdx:y})}s.animators&&s.animators.length&&s.animators[0].during((function(){l&&l.dirtyShape();for(var t=s.shape.__points,e=0;e<m.length;e++){var n=m[e].el,i=2*m[e].ptIdx;n.x=t[i],n.y=t[i+1],n.markRedraw()}}))},e.prototype.remove=function(t){var e=this.group,n=this._data;this._lineGroup.removeAll(),this._symbolDraw.remove(!0),n&&n.eachItemGraphicEl((function(t,i){t.__temp&&(e.remove(t),n.setItemGraphicEl(i,null))})),this._polyline=this._polygon=this._coordSys=this._points=this._stackedOnPoints=this._endLabel=this._data=null},e.type="line",e}(gg);function _S(t,e){return{seriesType:t,plan:dg(),reset:function(t){var n=t.getData(),i=t.coordinateSystem,r=t.pipelineContext,o=e||r.large;if(i){var a=B(i.dimensions,(function(t){return n.mapDimension(t)})).slice(0,2),s=a.length,l=n.getCalculationInfo("stackResultDimension");tb(n,a[0])&&(a[0]=l),tb(n,a[1])&&(a[1]=l);var c=n.getStore(),u=n.getDimensionIndex(a[0]),h=n.getDimensionIndex(a[1]);return s&&{progress:function(t,e){for(var n=t.end-t.start,r=o&&bb(n*s),a=[],l=[],d=t.start,p=0;d<t.end;d++){var f=void 0;if(1===s){var g=c.get(u,d);f=i.dataToPoint(g,null,l)}else a[0]=c.get(u,d),a[1]=c.get(h,d),f=i.dataToPoint(a,null,l);o?(r[p++]=f[0],r[p++]=f[1]):e.setItemLayout(d,f.slice())}o&&e.setLayout("points",r)}}}}}}var wS={average:function(t){for(var e=0,n=0,i=0;i<t.length;i++)isNaN(t[i])||(e+=t[i],n++);return 0===n?NaN:e/n},sum:function(t){for(var e=0,n=0;n<t.length;n++)e+=t[n]||0;return e},max:function(t){for(var e=-1/0,n=0;n<t.length;n++)t[n]>e&&(e=t[n]);return isFinite(e)?e:NaN},min:function(t){for(var e=1/0,n=0;n<t.length;n++)t[n]<e&&(e=t[n]);return isFinite(e)?e:NaN},minmax:function(t){for(var e=-1/0,n=-1/0,i=0;i<t.length;i++){var r=t[i],o=Math.abs(r);o>e&&(e=o,n=r)}return isFinite(n)?n:NaN},nearest:function(t){return t[0]}},SS=function(t){return Math.round(t.length/2)};function CS(t){return{seriesType:t,reset:function(t,e,n){var i=t.getData(),r=t.get("sampling"),o=t.coordinateSystem,a=i.count();if(a>10&&"cartesian2d"===o.type&&r){var s=o.getBaseAxis(),l=o.getOtherAxis(s),c=s.getExtent(),u=n.getDevicePixelRatio(),h=Math.abs(c[1]-c[0])*(u||1),d=Math.round(a/h);if(isFinite(d)&&d>1){"lttb"===r&&t.setData(i.lttbDownSample(i.mapDimension(l.dim),1/d));var p=void 0;G(r)?p=wS[r]:X(r)&&(p=r),p&&t.setData(i.downSample(i.mapDimension(l.dim),1/d,p,SS))}}}}}var kS=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.prototype.getInitialData=function(t,e){return nb(null,this,{useEncodeDefaulter:!0})},e.prototype.getMarkerPosition=function(t,e,n){var i=this.coordinateSystem;if(i&&i.clampData){var r=i.clampData(t),o=i.dataToPoint(r);if(n)R(i.getAxes(),(function(t,n){if("category"===t.type&&null!=e){var i=t.getTicksCoords(),a=t.getTickModel().get("alignWithLabel"),s=r[n],l="x1"===e[n]||"y1"===e[n];if(l&&!a&&(s+=1),i.length<2)return;if(2===i.length)return void(o[n]=t.toGlobalCoord(t.getExtent()[l?1:0]));for(var c=void 0,u=void 0,h=1,d=0;d<i.length;d++){var p=i[d].coord,f=d===i.length-1?i[d-1].tickValue+h:i[d].tickValue;if(f===s){u=p;break}if(f<s)c=p;else if(null!=c&&f>s){u=(p+c)/2;break}1===d&&(h=f-i[0].tickValue)}null==u&&(c?c&&(u=i[i.length-1].coord):u=i[0].coord),o[n]=t.toGlobalCoord(u)}}));else{var a=this.getData(),s=a.getLayout("offset"),l=a.getLayout("size"),c=i.getBaseAxis().isHorizontal()?0:1;o[c]+=s+l/2}return o}return[NaN,NaN]},e.type="series.__base_bar__",e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,barMinHeight:0,barMinAngle:0,large:!1,largeThreshold:400,progressive:3e3,progressiveChunkMode:"mod"},e}(ig);ig.registerClass(kS);var AS=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.prototype.getInitialData=function(){return nb(null,this,{useEncodeDefaulter:!0,createInvertedIndices:!!this.get("realtimeSort",!0)||null})},e.prototype.getProgressive=function(){return!!this.get("large")&&this.get("progressive")},e.prototype.getProgressiveThreshold=function(){var t=this.get("progressiveThreshold"),e=this.get("largeThreshold");return e>t&&(t=e),t},e.prototype.brushSelector=function(t,e,n){return n.rect(e.getItemLayout(t))},e.type="series.bar",e.dependencies=["grid","polar"],e.defaultOption=yh(kS.defaultOption,{clip:!0,roundCap:!1,showBackground:!1,backgroundStyle:{color:"rgba(180, 180, 180, 0.2)",borderColor:null,borderWidth:0,borderType:"solid",borderRadius:0,shadowBlur:0,shadowColor:null,shadowOffsetX:0,shadowOffsetY:0,opacity:1},select:{itemStyle:{borderColor:"#212121"}},realtimeSort:!1}),e}(kS),MS=function(){this.cx=0,this.cy=0,this.r0=0,this.r=0,this.startAngle=0,this.endAngle=2*Math.PI,this.clockwise=!0},TS=function(t){function e(e){var n=t.call(this,e)||this;return n.type="sausage",n}return n(e,t),e.prototype.getDefaultShape=function(){return new MS},e.prototype.buildPath=function(t,e){var n=e.cx,i=e.cy,r=Math.max(e.r0||0,0),o=Math.max(e.r,0),a=.5*(o-r),s=r+a,l=e.startAngle,c=e.endAngle,u=e.clockwise,h=2*Math.PI,d=u?c-l<h:l-c<h;d||(l=c-(u?h:-h));var p=Math.cos(l),f=Math.sin(l),g=Math.cos(c),m=Math.sin(c);d?(t.moveTo(p*r+n,f*r+i),t.arc(p*s+n,f*s+i,a,-Math.PI+l,l,!u)):t.moveTo(p*o+n,f*o+i),t.arc(n,i,o,l,c,!u),t.arc(g*s+n,m*s+i,a,c-2*Math.PI,c-Math.PI,!u),0!==r&&t.arc(n,i,r,c,l,u)},e}(_s);function IS(t,e,n){return e*Math.sin(t)*(n?-1:1)}function ES(t,e,n){return e*Math.cos(t)*(n?1:-1)}function OS(t,e,n){var i=t.get("borderRadius");if(null==i)return n?{cornerRadius:0}:null;Y(i)||(i=[i,i,i,i]);var r=Math.abs(e.r||0-e.r0||0);return{cornerRadius:B(i,(function(t){return xr(t,r)}))}}var DS=Math.max,LS=Math.min,PS=function(t){function e(){var n=t.call(this)||this;return n.type=e.type,n._isFirstFrame=!0,n}return n(e,t),e.prototype.render=function(t,e,n,i){this._model=t,this._removeOnRenderedListener(n),this._updateDrawMode(t);var r=t.get("coordinateSystem");("cartesian2d"===r||"polar"===r)&&(this._progressiveEls=null,this._isLargeDraw?this._renderLarge(t,e,n):this._renderNormal(t,e,n,i))},e.prototype.incrementalPrepareRender=function(t){this._clear(),this._updateDrawMode(t),this._updateLargeClip(t)},e.prototype.incrementalRender=function(t,e){this._progressiveEls=[],this._incrementalRenderLarge(t,e)},e.prototype.eachRendered=function(t){Vu(this._progressiveEls||this.group,t)},e.prototype._updateDrawMode=function(t){var e=t.pipelineContext.large;null!=this._isLargeDraw&&e===this._isLargeDraw||(this._isLargeDraw=e,this._clear())},e.prototype._renderNormal=function(t,e,n,i){var r,o=this.group,a=t.getData(),s=this._data,l=t.coordinateSystem,c=l.getBaseAxis();"cartesian2d"===l.type?r=c.isHorizontal():"polar"===l.type&&(r="angle"===c.dim);var u=t.isAnimationEnabled()?t:null,h=function(t,e){var n=t.get("realtimeSort",!0),i=e.getBaseAxis();if(n&&"category"===i.type&&"cartesian2d"===e.type)return{baseAxis:i,otherAxis:e.getOtherAxis(i)}}(t,l);h&&this._enableRealtimeSort(h,a,n);var d=t.get("clip",!0)||h,p=function(t,e){var n=t.getArea&&t.getArea();if(cS(t,"cartesian2d")){var i=t.getBaseAxis();if("category"!==i.type||!i.onBand){var r=e.getLayout("bandWidth");i.isHorizontal()?(n.x-=r,n.width+=2*r):(n.y-=r,n.height+=2*r)}}return n}(l,a);o.removeClipPath();var f=t.get("roundCap",!0),g=t.get("showBackground",!0),m=t.getModel("backgroundStyle"),v=m.get("borderRadius")||0,y=[],b=this._backgroundEls,x=i&&i.isInitSort,_=i&&"changeAxisOrder"===i.type;function w(t){var e=WS[l.type](a,t),n=function(t,e,n){return new("polar"===t.type?Ic:Ls)({shape:$S(e,n,t),silent:!0,z2:0})}(l,r,e);return n.useStyle(m.getItemStyle()),"cartesian2d"===l.type?n.setShape("r",v):n.setShape("cornerRadius",v),y[t]=n,n}a.diff(s).add((function(e){var n=a.getItemModel(e),i=WS[l.type](a,e,n);if(g&&w(e),a.hasValue(e)&&HS[l.type](i)){var s=!1;d&&(s=NS[l.type](p,i));var m=RS[l.type](t,a,e,i,r,u,c.model,!1,f);h&&(m.forceLabelAnimation=!0),YS(m,a,e,n,i,t,r,"polar"===l.type),x?m.attr({shape:i}):h?BS(h,u,m,i,e,r,!1,!1):su(m,{shape:i},t,e),a.setItemGraphicEl(e,m),o.add(m),m.ignore=s}})).update((function(e,n){var i=a.getItemModel(e),S=WS[l.type](a,e,i);if(g){var C=void 0;0===b.length?C=w(n):((C=b[n]).useStyle(m.getItemStyle()),"cartesian2d"===l.type?C.setShape("r",v):C.setShape("cornerRadius",v),y[e]=C);var k=WS[l.type](a,e);au(C,{shape:$S(r,k,l)},u,e)}var A=s.getItemGraphicEl(n);if(a.hasValue(e)&&HS[l.type](S)){var M=!1;if(d&&(M=NS[l.type](p,S))&&o.remove(A),A?du(A):A=RS[l.type](t,a,e,S,r,u,c.model,!!A,f),h&&(A.forceLabelAnimation=!0),_){var T=A.getTextContent();if(T){var I=th(T);null!=I.prevValue&&(I.prevValue=I.value)}}else YS(A,a,e,i,S,t,r,"polar"===l.type);x?A.attr({shape:S}):h?BS(h,u,A,S,e,r,!0,_):au(A,{shape:S},t,e,null),a.setItemGraphicEl(e,A),A.ignore=M,o.add(A)}else o.remove(A)})).remove((function(e){var n=s.getItemGraphicEl(e);n&&hu(n,t,e)})).execute();var S=this._backgroundGroup||(this._backgroundGroup=new Dr);S.removeAll();for(var C=0;C<y.length;++C)S.add(y[C]);o.add(S),this._backgroundEls=y,this._data=a},e.prototype._renderLarge=function(t,e,n){this._clear(),qS(t,this.group),this._updateLargeClip(t)},e.prototype._incrementalRenderLarge=function(t,e){this._removeBackground(),qS(e,this.group,this._progressiveEls,!0)},e.prototype._updateLargeClip=function(t){var e=t.get("clip",!0)&&lS(t.coordinateSystem,!1,t),n=this.group;e?n.setClipPath(e):n.removeClipPath()},e.prototype._enableRealtimeSort=function(t,e,n){var i=this;if(e.count()){var r=t.baseAxis;if(this._isFirstFrame)this._dispatchInitSort(e,t,n),this._isFirstFrame=!1;else{var o=function(t){var n=e.getItemGraphicEl(t),i=n&&n.shape;return i&&Math.abs(r.isHorizontal()?i.height:i.width)||0};this._onRendered=function(){i._updateSortWithinSameData(e,o,r,n)},n.getZr().on("rendered",this._onRendered)}}},e.prototype._dataSort=function(t,e,n){var i=[];return t.each(t.mapDimension(e.dim),(function(t,e){var r=n(e);r=null==r?NaN:r,i.push({dataIndex:e,mappedValue:r,ordinalNumber:t})})),i.sort((function(t,e){return e.mappedValue-t.mappedValue})),{ordinalNumbers:B(i,(function(t){return t.ordinalNumber}))}},e.prototype._isOrderChangedWithinSameData=function(t,e,n){for(var i=n.scale,r=t.mapDimension(n.dim),o=Number.MAX_VALUE,a=0,s=i.getOrdinalMeta().categories.length;a<s;++a){var l=t.rawIndexOf(r,i.getRawOrdinalNumber(a)),c=l<0?Number.MIN_VALUE:e(t.indexOfRawIndex(l));if(c>o)return!0;o=c}return!1},e.prototype._isOrderDifferentInView=function(t,e){for(var n=e.scale,i=n.getExtent(),r=Math.max(0,i[0]),o=Math.min(i[1],n.getOrdinalMeta().categories.length-1);r<=o;++r)if(t.ordinalNumbers[r]!==n.getRawOrdinalNumber(r))return!0},e.prototype._updateSortWithinSameData=function(t,e,n,i){if(this._isOrderChangedWithinSameData(t,e,n)){var r=this._dataSort(t,n,e);this._isOrderDifferentInView(r,n)&&(this._removeOnRenderedListener(i),i.dispatchAction({type:"changeAxisOrder",componentType:n.dim+"Axis",axisId:n.index,sortInfo:r}))}},e.prototype._dispatchInitSort=function(t,e,n){var i=e.baseAxis,r=this._dataSort(t,i,(function(n){return t.get(t.mapDimension(e.otherAxis.dim),n)}));n.dispatchAction({type:"changeAxisOrder",componentType:i.dim+"Axis",isInitSort:!0,axisId:i.index,sortInfo:r})},e.prototype.remove=function(t,e){this._clear(this._model),this._removeOnRenderedListener(e)},e.prototype.dispose=function(t,e){this._removeOnRenderedListener(e)},e.prototype._removeOnRenderedListener=function(t){this._onRendered&&(t.getZr().off("rendered",this._onRendered),this._onRendered=null)},e.prototype._clear=function(t){var e=this.group,n=this._data;t&&t.isAnimationEnabled()&&n&&!this._isLargeDraw?(this._removeBackground(),this._backgroundEls=[],n.eachItemGraphicEl((function(e){hu(e,t,$s(e).dataIndex)}))):e.removeAll(),this._data=null,this._isFirstFrame=!0},e.prototype._removeBackground=function(){this.group.remove(this._backgroundGroup),this._backgroundGroup=null},e.type="bar",e}(gg),NS={cartesian2d:function(t,e){var n=e.width<0?-1:1,i=e.height<0?-1:1;n<0&&(e.x+=e.width,e.width=-e.width),i<0&&(e.y+=e.height,e.height=-e.height);var r=t.x+t.width,o=t.y+t.height,a=DS(e.x,t.x),s=LS(e.x+e.width,r),l=DS(e.y,t.y),c=LS(e.y+e.height,o),u=s<a,h=c<l;return e.x=u&&a>r?s:a,e.y=h&&l>o?c:l,e.width=u?0:s-a,e.height=h?0:c-l,n<0&&(e.x+=e.width,e.width=-e.width),i<0&&(e.y+=e.height,e.height=-e.height),u||h},polar:function(t,e){var n=e.r0<=e.r?1:-1;if(n<0){var i=e.r;e.r=e.r0,e.r0=i}var r=LS(e.r,t.r),o=DS(e.r0,t.r0);e.r=r,e.r0=o;var a=r-o<0;return n<0&&(i=e.r,e.r=e.r0,e.r0=i),a}},RS={cartesian2d:function(t,e,n,i,r,o,a,s,l){var c=new Ls({shape:I({},i),z2:1});return c.__dataIndex=n,c.name="item",o&&(c.shape[r?"height":"width"]=0),c},polar:function(t,e,n,i,r,o,a,s,l){var c=!r&&l?TS:Ic,u=new c({shape:i,z2:1});u.name="item";var h,d,p=jS(r);if(u.calculateTextPosition=(h=p,d=({isRoundCap:c===TS}||{}).isRoundCap,function(t,e,n){var i=e.position;if(!i||i instanceof Array)return _r(t,e,n);var r=h(i),o=null!=e.distance?e.distance:5,a=this.shape,s=a.cx,l=a.cy,c=a.r,u=a.r0,p=(c+u)/2,f=a.startAngle,g=a.endAngle,m=(f+g)/2,v=d?Math.abs(c-u)/2:0,y=Math.cos,b=Math.sin,x=s+c*y(f),_=l+c*b(f),w="left",S="top";switch(r){case"startArc":x=s+(u-o)*y(m),_=l+(u-o)*b(m),w="center",S="top";break;case"insideStartArc":x=s+(u+o)*y(m),_=l+(u+o)*b(m),w="center",S="bottom";break;case"startAngle":x=s+p*y(f)+IS(f,o+v,!1),_=l+p*b(f)+ES(f,o+v,!1),w="right",S="middle";break;case"insideStartAngle":x=s+p*y(f)+IS(f,-o+v,!1),_=l+p*b(f)+ES(f,-o+v,!1),w="left",S="middle";break;case"middle":x=s+p*y(m),_=l+p*b(m),w="center",S="middle";break;case"endArc":x=s+(c+o)*y(m),_=l+(c+o)*b(m),w="center",S="bottom";break;case"insideEndArc":x=s+(c-o)*y(m),_=l+(c-o)*b(m),w="center",S="top";break;case"endAngle":x=s+p*y(g)+IS(g,o+v,!0),_=l+p*b(g)+ES(g,o+v,!0),w="left",S="middle";break;case"insideEndAngle":x=s+p*y(g)+IS(g,-o+v,!0),_=l+p*b(g)+ES(g,-o+v,!0),w="right",S="middle";break;default:return _r(t,e,n)}return(t=t||{}).x=x,t.y=_,t.align=w,t.verticalAlign=S,t}),o){var f=r?"r":"endAngle",g={};u.shape[f]=r?i.r0:i.startAngle,g[f]=i[f],(s?au:su)(u,{shape:g},o)}return u}};function BS(t,e,n,i,r,o,a,s){var l,c;o?(c={x:i.x,width:i.width},l={y:i.y,height:i.height}):(c={y:i.y,height:i.height},l={x:i.x,width:i.width}),s||(a?au:su)(n,{shape:l},e,r,null),(a?au:su)(n,{shape:c},e?t.baseAxis.model:null,r)}function zS(t,e){for(var n=0;n<e.length;n++)if(!isFinite(t[e[n]]))return!0;return!1}var FS=["x","y","width","height"],VS=["cx","cy","r","startAngle","endAngle"],HS={cartesian2d:function(t){return!zS(t,FS)},polar:function(t){return!zS(t,VS)}},WS={cartesian2d:function(t,e,n){var i=t.getItemLayout(e),r=n?function(t,e){var n=t.get(["itemStyle","borderColor"]);if(!n||"none"===n)return 0;var i=t.get(["itemStyle","borderWidth"])||0,r=isNaN(e.width)?Number.MAX_VALUE:Math.abs(e.width),o=isNaN(e.height)?Number.MAX_VALUE:Math.abs(e.height);return Math.min(i,r,o)}(n,i):0,o=i.width>0?1:-1,a=i.height>0?1:-1;return{x:i.x+o*r/2,y:i.y+a*r/2,width:i.width-o*r,height:i.height-a*r}},polar:function(t,e,n){var i=t.getItemLayout(e);return{cx:i.cx,cy:i.cy,r0:i.r0,r:i.r,startAngle:i.startAngle,endAngle:i.endAngle,clockwise:i.clockwise}}};function jS(t){return function(t){var e=t?"Arc":"Angle";return function(t){switch(t){case"start":case"insideStart":case"end":case"insideEnd":return t+e;default:return t}}}(t)}function YS(t,e,n,i,r,o,a,s){var l=e.getItemVisual(n,"style");if(s){if(!o.get("roundCap")){var c=t.shape;I(c,OS(i.getModel("itemStyle"),c,!0)),t.setShape(c)}}else{var u=i.get(["itemStyle","borderRadius"])||0;t.setShape("r",u)}t.useStyle(l);var h=i.getShallow("cursor");h&&t.attr("cursor",h);var d=s?a?r.r>=r.r0?"endArc":"startArc":r.endAngle>=r.startAngle?"endAngle":"startAngle":a?r.height>=0?"bottom":"top":r.width>=0?"right":"left",p=Gu(i);Xu(t,p,{labelFetcher:o,labelDataIndex:n,defaultText:Ww(o.getData(),n),inheritColor:l.fill,defaultOpacity:l.opacity,defaultOutsidePosition:d});var f=t.getTextContent();if(s&&f){var g=i.get(["label","position"]);t.textConfig.inside="middle"===g||null,function(t,e,n,i){if(U(i))t.setTextConfig({rotation:i});else if(Y(e))t.setTextConfig({rotation:0});else{var r,o=t.shape,a=o.clockwise?o.startAngle:o.endAngle,s=o.clockwise?o.endAngle:o.startAngle,l=(a+s)/2,c=n(e);switch(c){case"startArc":case"insideStartArc":case"middle":case"insideEndArc":case"endArc":r=l;break;case"startAngle":case"insideStartAngle":r=a;break;case"endAngle":case"insideEndAngle":r=s;break;default:return void t.setTextConfig({rotation:0})}var u=1.5*Math.PI-r;"middle"===c&&u>Math.PI/2&&u<1.5*Math.PI&&(u-=Math.PI),t.setTextConfig({rotation:u})}}(t,"outside"===g?d:g,jS(a),i.get(["label","rotate"]))}eh(f,p,o.getRawValue(n),(function(t){return jw(e,t)}));var m=i.getModel(["emphasis"]);Bl(t,m.get("focus"),m.get("blurScope"),m.get("disabled")),Hl(t,i),function(t){return null!=t.startAngle&&null!=t.endAngle&&t.startAngle===t.endAngle}(r)&&(t.style.fill="none",t.style.stroke="none",R(t.states,(function(t){t.style&&(t.style.fill=t.style.stroke="none")})))}var XS=function(){},GS=function(t){function e(e){var n=t.call(this,e)||this;return n.type="largeBar",n}return n(e,t),e.prototype.getDefaultShape=function(){return new XS},e.prototype.buildPath=function(t,e){for(var n=e.points,i=this.baseDimIdx,r=1-this.baseDimIdx,o=[],a=[],s=this.barWidth,l=0;l<n.length;l+=3)a[i]=s,a[r]=n[l+2],o[i]=n[l+i],o[r]=n[l+r],t.rect(o[0],o[1],a[0],a[1])},e}(_s);function qS(t,e,n,i){var r=t.getData(),o=r.getLayout("valueAxisHorizontal")?1:0,a=r.getLayout("largeDataIndices"),s=r.getLayout("size"),l=t.getModel("backgroundStyle"),c=r.getLayout("largeBackgroundPoints");if(c){var u=new GS({shape:{points:c},incremental:!!i,silent:!0,z2:0});u.baseDimIdx=o,u.largeDataIndices=a,u.barWidth=s,u.useStyle(l.getItemStyle()),e.add(u),n&&n.push(u)}var h=new GS({shape:{points:r.getLayout("largePoints")},incremental:!!i,ignoreCoarsePointer:!0,z2:1});h.baseDimIdx=o,h.largeDataIndices=a,h.barWidth=s,e.add(h),h.useStyle(r.getVisual("style")),$s(h).seriesIndex=t.seriesIndex,t.get("silent")||(h.on("mousedown",US),h.on("mousemove",US)),n&&n.push(h)}var US=Cg((function(t){var e=function(t,e,n){for(var i=t.baseDimIdx,r=1-i,o=t.shape.points,a=t.largeDataIndices,s=[],l=[],c=t.barWidth,u=0,h=o.length/3;u<h;u++){var d=3*u;if(l[i]=c,l[r]=o[d+2],s[i]=o[d+i],s[r]=o[d+r],l[r]<0&&(s[r]+=l[r],l[r]=-l[r]),e>=s[0]&&e<=s[0]+l[0]&&n>=s[1]&&n<=s[1]+l[1])return a[u]}return-1}(this,t.offsetX,t.offsetY);$s(this).dataIndex=e>=0?e:null}),30,!1);function $S(t,e,n){if(cS(n,"cartesian2d")){var i=e,r=n.getArea();return{x:t?i.x:r.x,y:t?r.y:i.y,width:t?i.width:r.width,height:t?r.height:i.height}}var o=e;return{cx:(r=n.getArea()).cx,cy:r.cy,r0:t?r.r0:o.r0,r:t?r.r:o.r,startAngle:t?o.startAngle:0,endAngle:t?o.endAngle:2*Math.PI}}var ZS=2*Math.PI,KS=Math.PI/180;function QS(t,e){return md(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}function JS(t,e){var n=QS(t,e),i=t.get("center"),r=t.get("radius");Y(r)||(r=[0,r]);var o,a,s=jr(n.width,e.getWidth()),l=jr(n.height,e.getHeight()),c=Math.min(s,l),u=jr(r[0],c/2),h=jr(r[1],c/2),d=t.coordinateSystem;if(d){var p=d.dataToPoint(i);o=p[0]||0,a=p[1]||0}else Y(i)||(i=[i,i]),o=jr(i[0],s)+n.x,a=jr(i[1],l)+n.y;return{cx:o,cy:a,r0:u,r:h}}function tC(t,e,n){e.eachSeriesByType(t,(function(t){var e=t.getData(),i=e.mapDimension("value"),r=QS(t,n),o=JS(t,n),a=o.cx,s=o.cy,l=o.r,c=o.r0,u=-t.get("startAngle")*KS,h=t.get("endAngle"),d=t.get("padAngle")*KS;h="auto"===h?u-ZS:-h*KS;var p=t.get("minAngle")*KS+d,f=0;e.each(i,(function(t){!isNaN(t)&&f++}));var g=e.getSum(i),m=Math.PI/(g||f)*2,v=t.get("clockwise"),y=t.get("roseType"),b=t.get("stillShowZeroSum"),x=e.getDataExtent(i);x[0]=0;var _=v?1:-1,w=[u,h],S=_*d/2;ts(w,!v),u=w[0],h=w[1];var C=Math.abs(h-u),k=C,A=0,M=u;if(e.setLayout({viewRect:r,r:l}),e.each(i,(function(t,n){var i;if(isNaN(t))e.setItemLayout(n,{angle:NaN,startAngle:NaN,endAngle:NaN,clockwise:v,cx:a,cy:s,r0:c,r:y?NaN:l});else{(i="area"!==y?0===g&&b?m:t*m:C/f)<p?(i=p,k-=p):A+=t;var r=M+_*i,o=0,u=0;d>i?u=o=M+_*i/2:(o=M+S,u=r-S),e.setItemLayout(n,{angle:i,startAngle:o,endAngle:u,clockwise:v,cx:a,cy:s,r0:c,r:y?Wr(t,x,[c,l]):l}),M=r}})),k<ZS&&f)if(k<=.001){var T=C/f;e.each(i,(function(t,n){if(!isNaN(t)){var i=e.getItemLayout(n);i.angle=T;var r=0,o=0;T<d?o=r=u+_*(n+.5)*T:(r=u+_*n*T+S,o=u+_*(n+1)*T-S),i.startAngle=r,i.endAngle=o}}))}else m=k/A,M=u,e.each(i,(function(t,n){if(!isNaN(t)){var i=e.getItemLayout(n),r=i.angle===p?p:t*m,o=0,a=0;r<d?a=o=M+_*r/2:(o=M+S,a=M+_*r-S),i.startAngle=o,i.endAngle=a,M+=_*r}}))}))}function eC(t){return{seriesType:t,reset:function(t,e){var n=e.findComponents({mainType:"legend"});if(n&&n.length){var i=t.getData();i.filterSelf((function(t){for(var e=i.getName(t),r=0;r<n.length;r++)if(!n[r].isSelected(e))return!1;return!0}))}}}}var nC=Math.PI/180;function iC(t,e,n,i,r,o,a,s,l,c){if(!(t.length<2)){for(var u=t.length,h=0;h<u;h++)if("outer"===t[h].position&&"labelLine"===t[h].labelAlignTo){var d=t[h].label.x-c;t[h].linePoints[1][0]+=d,t[h].label.x=c}d_(t,l,l+a)&&function(t){for(var o={list:[],maxY:0},a={list:[],maxY:0},s=0;s<t.length;s++)if("none"===t[s].labelAlignTo){var l=t[s],c=l.label.y>n?a:o,u=Math.abs(l.label.y-n);if(u>=c.maxY){var h=l.label.x-e-l.len2*r,d=i+l.len,f=Math.abs(h)<d?Math.sqrt(u*u/(1-h*h/d/d)):d;c.rB=f,c.maxY=u}c.list.push(l)}p(o),p(a)}(t)}function p(t){for(var o=t.rB,a=o*o,s=0;s<t.list.length;s++){var l=t.list[s],c=Math.abs(l.label.y-n),u=i+l.len,h=u*u,d=Math.sqrt((1-Math.abs(c*c/a))*h),p=e+(d+l.len2)*r,f=p-l.label.x;rC(l,l.targetTextWidth-f*r,!0),l.label.x=p}}}function rC(t,e,n){if(void 0===n&&(n=!1),null==t.labelStyleWidth){var i=t.label,r=i.style,o=t.rect,a=r.backgroundColor,s=r.padding,l=s?s[1]+s[3]:0,c=r.overflow,u=o.width+(a?0:l);if(e<u||n){var h=o.height;if(c&&c.match("break")){i.setStyle("backgroundColor",null),i.setStyle("width",e-l);var d=i.getBoundingRect();i.setStyle("width",Math.ceil(d.width)),i.setStyle("backgroundColor",a)}else{var p=e-l,f=e<u?p:n?p>t.unconstrainedWidth?null:p:null;i.setStyle("width",f)}var g=i.getBoundingRect();o.width=g.width;var m=(i.style.margin||0)+2.1;o.height=g.height+m,o.y-=(o.height-h)/2}}}function oC(t){return"center"===t.position}var aC=function(t){function e(e,n,i){var r=t.call(this)||this;r.z2=2;var o=new Rs;return r.setTextContent(o),r.updateData(e,n,i,!0),r}return n(e,t),e.prototype.updateData=function(t,e,n,i){var r=this,o=t.hostModel,a=t.getItemModel(e),s=a.getModel("emphasis"),l=t.getItemLayout(e),c=I(OS(a.getModel("itemStyle"),l,!0),l);if(isNaN(c.startAngle))r.setShape(c);else{if(i){r.setShape(c);var u=o.getShallow("animationType");o.ecModel.ssr?(su(r,{scaleX:0,scaleY:0},o,{dataIndex:e,isFrom:!0}),r.originX=c.cx,r.originY=c.cy):"scale"===u?(r.shape.r=l.r0,su(r,{shape:{r:l.r}},o,e)):null!=n?(r.setShape({startAngle:n,endAngle:n}),su(r,{shape:{startAngle:l.startAngle,endAngle:l.endAngle}},o,e)):(r.shape.endAngle=l.startAngle,au(r,{shape:{endAngle:l.endAngle}},o,e))}else du(r),au(r,{shape:c},o,e);r.useStyle(t.getItemVisual(e,"style")),Hl(r,a);var h=(l.startAngle+l.endAngle)/2,d=o.get("selectedOffset"),p=Math.cos(h)*d,f=Math.sin(h)*d,g=a.getShallow("cursor");g&&r.attr("cursor",g),this._updateLabel(o,t,e),r.ensureState("emphasis").shape=I({r:l.r+(s.get("scale")&&s.get("scaleSize")||0)},OS(s.getModel("itemStyle"),l)),I(r.ensureState("select"),{x:p,y:f,shape:OS(a.getModel(["select","itemStyle"]),l)}),I(r.ensureState("blur"),{shape:OS(a.getModel(["blur","itemStyle"]),l)});var m=r.getTextGuideLine(),v=r.getTextContent();m&&I(m.ensureState("select"),{x:p,y:f}),I(v.ensureState("select"),{x:p,y:f}),Bl(this,s.get("focus"),s.get("blurScope"),s.get("disabled"))}},e.prototype._updateLabel=function(t,e,n){var i=this,r=e.getItemModel(n),o=r.getModel("labelLine"),a=e.getItemVisual(n,"style"),s=a&&a.fill,l=a&&a.opacity;Xu(i,Gu(r),{labelFetcher:e.hostModel,labelDataIndex:n,inheritColor:s,defaultOpacity:l,defaultText:t.getFormattedLabel(n,"normal")||e.getName(n)});var c=i.getTextContent();i.setTextConfig({position:null,rotation:null}),c.attr({z2:10});var u=t.get(["label","position"]);if("outside"!==u&&"outer"!==u)i.removeTextGuideLine();else{var h=this.getTextGuideLine();h||(h=new Rc,this.setTextGuideLine(h)),l_(this,c_(r),{stroke:s,opacity:ot(o.get(["lineStyle","opacity"]),l,1)})}},e}(Ic),sC=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.ignoreLabelLineUpdate=!0,e}return n(e,t),e.prototype.render=function(t,e,n,i){var r,o=t.getData(),a=this._data,s=this.group;if(!a&&o.count()>0){for(var l=o.getItemLayout(0),c=1;isNaN(l&&l.startAngle)&&c<o.count();++c)l=o.getItemLayout(c);l&&(r=l.startAngle)}if(this._emptyCircleSector&&s.remove(this._emptyCircleSector),0===o.count()&&t.get("showEmptyCircle")){var u=new Ic({shape:JS(t,n)});u.useStyle(t.getModel("emptyCircleStyle").getItemStyle()),this._emptyCircleSector=u,s.add(u)}o.diff(a).add((function(t){var e=new aC(o,t,r);o.setItemGraphicEl(t,e),s.add(e)})).update((function(t,e){var n=a.getItemGraphicEl(e);n.updateData(o,t,r),n.off("click"),s.add(n),o.setItemGraphicEl(t,n)})).remove((function(e){hu(a.getItemGraphicEl(e),t,e)})).execute(),function(t){var e,n,i=t.getData(),r=[],o=!1,a=(t.get("minShowLabelAngle")||0)*nC,s=i.getLayout("viewRect"),l=i.getLayout("r"),c=s.width,u=s.x,h=s.y,d=s.height;function p(t){t.ignore=!0}i.each((function(t){var s=i.getItemGraphicEl(t),h=s.shape,d=s.getTextContent(),f=s.getTextGuideLine(),g=i.getItemModel(t),m=g.getModel("label"),v=m.get("position")||g.get(["emphasis","label","position"]),y=m.get("distanceToLabelLine"),b=m.get("alignTo"),x=jr(m.get("edgeDistance"),c),_=m.get("bleedMargin"),w=g.getModel("labelLine"),S=w.get("length");S=jr(S,c);var C=w.get("length2");if(C=jr(C,c),Math.abs(h.endAngle-h.startAngle)<a)return R(d.states,p),d.ignore=!0,void(f&&(R(f.states,p),f.ignore=!0));if(function(t){if(!t.ignore)return!0;for(var e in t.states)if(!1===t.states[e].ignore)return!0;return!1}(d)){var k,A,M,T,I=(h.startAngle+h.endAngle)/2,E=Math.cos(I),O=Math.sin(I);e=h.cx,n=h.cy;var D="inside"===v||"inner"===v;if("center"===v)k=h.cx,A=h.cy,T="center";else{var L=(D?(h.r+h.r0)/2*E:h.r*E)+e,P=(D?(h.r+h.r0)/2*O:h.r*O)+n;if(k=L+3*E,A=P+3*O,!D){var N=L+E*(S+l-h.r),B=P+O*(S+l-h.r),z=N+(E<0?-1:1)*C;k="edge"===b?E<0?u+x:u+c-x:z+(E<0?-y:y),A=B,M=[[L,P],[N,B],[z,B]]}T=D?"center":"edge"===b?E>0?"right":"left":E>0?"left":"right"}var F=Math.PI,V=0,H=m.get("rotate");if(U(H))V=H*(F/180);else if("center"===v)V=0;else if("radial"===H||!0===H)V=E<0?-I+F:-I;else if("tangential"===H&&"outside"!==v&&"outer"!==v){var W=Math.atan2(E,O);W<0&&(W=2*F+W),O>0&&(W=F+W),V=W-F}if(o=!!V,d.x=k,d.y=A,d.rotation=V,d.setStyle({verticalAlign:"middle"}),D){d.setStyle({align:T});var j=d.states.select;j&&(j.x+=d.x,j.y+=d.y)}else{var Y=d.getBoundingRect().clone();Y.applyTransform(d.getComputedTransform());var X=(d.style.margin||0)+2.1;Y.y-=X/2,Y.height+=X,r.push({label:d,labelLine:f,position:v,len:S,len2:C,minTurnAngle:w.get("minTurnAngle"),maxSurfaceAngle:w.get("maxSurfaceAngle"),surfaceNormal:new Me(E,O),linePoints:M,textAlign:T,labelDistance:y,labelAlignTo:b,edgeDistance:x,bleedMargin:_,rect:Y,unconstrainedWidth:Y.width,labelStyleWidth:d.style.width})}s.setTextConfig({inside:D})}})),!o&&t.get("avoidLabelOverlap")&&function(t,e,n,i,r,o,a,s){for(var l=[],c=[],u=Number.MAX_VALUE,h=-Number.MAX_VALUE,d=0;d<t.length;d++){var p=t[d].label;oC(t[d])||(p.x<e?(u=Math.min(u,p.x),l.push(t[d])):(h=Math.max(h,p.x),c.push(t[d])))}for(d=0;d<t.length;d++)if(!oC(m=t[d])&&m.linePoints){if(null!=m.labelStyleWidth)continue;p=m.label;var f,g=m.linePoints;f="edge"===m.labelAlignTo?p.x<e?g[2][0]-m.labelDistance-a-m.edgeDistance:a+r-m.edgeDistance-g[2][0]-m.labelDistance:"labelLine"===m.labelAlignTo?p.x<e?u-a-m.bleedMargin:a+r-h-m.bleedMargin:p.x<e?p.x-a-m.bleedMargin:a+r-p.x-m.bleedMargin,m.targetTextWidth=f,rC(m,f)}for(iC(c,e,n,i,1,0,o,0,s,h),iC(l,e,n,i,-1,0,o,0,s,u),d=0;d<t.length;d++){var m;if(!oC(m=t[d])&&m.linePoints){p=m.label,g=m.linePoints;var v="edge"===m.labelAlignTo,y=p.style.padding,b=y?y[1]+y[3]:0,x=p.style.backgroundColor?0:b,_=m.rect.width+x,w=g[1][0]-g[2][0];v?p.x<e?g[2][0]=a+m.edgeDistance+_+m.labelDistance:g[2][0]=a+r-m.edgeDistance-_-m.labelDistance:(p.x<e?g[2][0]=p.x+m.labelDistance:g[2][0]=p.x-m.labelDistance,g[1][0]=g[2][0]+w),g[1][1]=g[2][1]=p.y}}}(r,e,n,l,c,d,u,h);for(var f=0;f<r.length;f++){var g=r[f],m=g.label,v=g.labelLine,y=isNaN(m.x)||isNaN(m.y);if(m){m.setStyle({align:g.textAlign}),y&&(R(m.states,p),m.ignore=!0);var b=m.states.select;b&&(b.x+=m.x,b.y+=m.y)}if(v){var x=g.linePoints;y||!x?(R(v.states,p),v.ignore=!0):(r_(x,g.minTurnAngle),o_(x,g.surfaceNormal,g.maxSurfaceAngle),v.setShape({points:x}),m.__hostTarget.textGuideLineConfig={anchor:new Me(x[0][0],x[0][1])})}}}(t),"expansion"!==t.get("animationTypeUpdate")&&(this._data=o)},e.prototype.dispose=function(){},e.prototype.containPoint=function(t,e){var n=e.getData().getItemLayout(0);if(n){var i=t[0]-n.cx,r=t[1]-n.cy,o=Math.sqrt(i*i+r*r);return o<=n.r&&o>=n.r0}},e.type="pie",e}(gg);function lC(t,e,n){e=Y(e)&&{coordDimensions:e}||I({encodeDefine:t.getEncode()},e);var i=t.getSource(),r=Uy(i,e).dimensions,o=new qy(r,t);return o.initData(i,n),o}var cC=function(){function t(t,e){this._getDataWithEncodedVisual=t,this._getRawData=e}return t.prototype.getAllNames=function(){var t=this._getRawData();return t.mapArray(t.getName)},t.prototype.containName=function(t){return this._getRawData().indexOfName(t)>=0},t.prototype.indexOfName=function(t){return this._getDataWithEncodedVisual().indexOfName(t)},t.prototype.getItemVisual=function(t,e){return this._getDataWithEncodedVisual().getItemVisual(t,e)},t}(),uC=Io(),hC=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.init=function(e){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new cC(W(this.getData,this),W(this.getRawData,this)),this._defaultLabelLine(e)},e.prototype.mergeOption=function(){t.prototype.mergeOption.apply(this,arguments)},e.prototype.getInitialData=function(){return lC(this,{coordDimensions:["value"],encodeDefaulter:j(zd,this)})},e.prototype.getDataParams=function(e){var n=this.getData(),i=uC(n),r=i.seats;if(!r){var o=[];n.each(n.mapDimension("value"),(function(t){o.push(t)})),r=i.seats=$r(o,n.hostModel.get("percentPrecision"))}var a=t.prototype.getDataParams.call(this,e);return a.percent=r[e]||0,a.$vars.push("percent"),a},e.prototype._defaultLabelLine=function(t){yo(t,"labelLine",["show"]);var e=t.labelLine,n=t.emphasis.labelLine;e.show=e.show&&t.label.show,n.show=n.show&&t.emphasis.label.show},e.type="series.pie",e.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,endAngle:"auto",padAngle:0,minAngle:0,minShowLabelAngle:0,selectedOffset:10,percentPrecision:2,stillShowZeroSum:!0,left:0,top:0,right:0,bottom:0,width:null,height:null,label:{rotate:0,show:!0,overflow:"truncate",position:"outer",alignTo:"none",edgeDistance:"25%",bleedMargin:10,distanceToLabelLine:5},labelLine:{show:!0,length:15,length2:15,smooth:!1,minTurnAngle:90,maxSurfaceAngle:90,lineStyle:{width:1,type:"solid"}},itemStyle:{borderWidth:1,borderJoin:"round"},showEmptyCircle:!0,emptyCircleStyle:{color:"lightgray",opacity:1},labelLayout:{hideOverlap:!0},emphasis:{scale:!0,scaleSize:5},avoidLabelOverlap:!0,animationType:"expansion",animationDuration:1e3,animationTypeUpdate:"transition",animationEasingUpdate:"cubicInOut",animationDurationUpdate:500,animationEasing:"cubicInOut"},e}(ig),dC=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.hasSymbolVisual=!0,n}return n(e,t),e.prototype.getInitialData=function(t,e){return nb(null,this,{useEncodeDefaulter:!0})},e.prototype.getProgressive=function(){var t=this.option.progressive;return null==t?this.option.large?5e3:this.get("progressive"):t},e.prototype.getProgressiveThreshold=function(){var t=this.option.progressiveThreshold;return null==t?this.option.large?1e4:this.get("progressiveThreshold"):t},e.prototype.brushSelector=function(t,e,n){return n.point(e.getItemLayout(t))},e.prototype.getZLevelKey=function(){return this.getData().count()>this.getProgressiveThreshold()?this.id:""},e.type="series.scatter",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,symbolSize:10,large:!1,largeThreshold:2e3,itemStyle:{opacity:.8},emphasis:{scale:!0},clip:!0,select:{itemStyle:{borderColor:"#212121"}},universalTransition:{divideShape:"clone"}},e}(ig),pC=function(){},fC=function(t){function e(e){var n=t.call(this,e)||this;return n._off=0,n.hoverDataIdx=-1,n}return n(e,t),e.prototype.getDefaultShape=function(){return new pC},e.prototype.reset=function(){this.notClear=!1,this._off=0},e.prototype.buildPath=function(t,e){var n,i=e.points,r=e.size,o=this.symbolProxy,a=o.shape,s=t.getContext?t.getContext():t,l=s&&r[0]<4,c=this.softClipShape;if(l)this._ctx=s;else{for(this._ctx=null,n=this._off;n<i.length;){var u=i[n++],h=i[n++];isNaN(u)||isNaN(h)||c&&!c.contain(u,h)||(a.x=u-r[0]/2,a.y=h-r[1]/2,a.width=r[0],a.height=r[1],o.buildPath(t,a,!0))}this.incremental&&(this._off=n,this.notClear=!0)}},e.prototype.afterBrush=function(){var t,e=this.shape,n=e.points,i=e.size,r=this._ctx,o=this.softClipShape;if(r){for(t=this._off;t<n.length;){var a=n[t++],s=n[t++];isNaN(a)||isNaN(s)||o&&!o.contain(a,s)||r.fillRect(a-i[0]/2,s-i[1]/2,i[0],i[1])}this.incremental&&(this._off=t,this.notClear=!0)}},e.prototype.findDataIndex=function(t,e){for(var n=this.shape,i=n.points,r=n.size,o=Math.max(r[0],4),a=Math.max(r[1],4),s=i.length/2-1;s>=0;s--){var l=2*s,c=i[l]-o/2,u=i[l+1]-a/2;if(t>=c&&e>=u&&t<=c+o&&e<=u+a)return s}return-1},e.prototype.contain=function(t,e){var n=this.transformCoordToLocal(t,e),i=this.getBoundingRect();return t=n[0],e=n[1],i.contain(t,e)?(this.hoverDataIdx=this.findDataIndex(t,e))>=0:(this.hoverDataIdx=-1,!1)},e.prototype.getBoundingRect=function(){var t=this._rect;if(!t){for(var e=this.shape,n=e.points,i=e.size,r=i[0],o=i[1],a=1/0,s=1/0,l=-1/0,c=-1/0,u=0;u<n.length;){var h=n[u++],d=n[u++];a=Math.min(h,a),l=Math.max(h,l),s=Math.min(d,s),c=Math.max(d,c)}t=this._rect=new Re(a-r/2,s-o/2,l-a+r,c-s+o)}return t},e}(_s),gC=function(){function t(){this.group=new Dr}return t.prototype.updateData=function(t,e){this._clear();var n=this._create();n.setShape({points:t.getLayout("points")}),this._setCommon(n,t,e)},t.prototype.updateLayout=function(t){var e=t.getLayout("points");this.group.eachChild((function(t){if(null!=t.startIndex){var n=2*(t.endIndex-t.startIndex),i=4*t.startIndex*2;e=new Float32Array(e.buffer,i,n)}t.setShape("points",e),t.reset()}))},t.prototype.incrementalPrepareUpdate=function(t){this._clear()},t.prototype.incrementalUpdate=function(t,e,n){var i=this._newAdded[0],r=e.getLayout("points"),o=i&&i.shape.points;if(o&&o.length<2e4){var a=o.length,s=new Float32Array(a+r.length);s.set(o),s.set(r,a),i.endIndex=t.end,i.setShape({points:s})}else{this._newAdded=[];var l=this._create();l.startIndex=t.start,l.endIndex=t.end,l.incremental=!0,l.setShape({points:r}),this._setCommon(l,e,n)}},t.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},t.prototype._create=function(){var t=new fC({cursor:"default"});return t.ignoreCoarsePointer=!0,this.group.add(t),this._newAdded.push(t),t},t.prototype._setCommon=function(t,e,n){var i=e.hostModel;n=n||{};var r=e.getVisual("symbolSize");t.setShape("size",r instanceof Array?r:[r,r]),t.softClipShape=n.clipShape||null,t.symbolProxy=Mm(e.getVisual("symbol"),0,0,0,0),t.setColor=t.symbolProxy.setColor;var o=t.shape.size[0]<4;t.useStyle(i.getModel("itemStyle").getItemStyle(o?["color","shadowBlur","shadowColor"]:["color"]));var a=e.getVisual("style"),s=a&&a.fill;s&&t.setColor(s);var l=$s(t);l.seriesIndex=i.seriesIndex,t.on("mousemove",(function(e){l.dataIndex=null;var n=t.hoverDataIdx;n>=0&&(l.dataIndex=n+(t.startIndex||0))}))},t.prototype.remove=function(){this._clear()},t.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},t}(),mC=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.prototype.render=function(t,e,n){var i=t.getData();this._updateSymbolDraw(i,t).updateData(i,{clipShape:this._getClipShape(t)}),this._finished=!0},e.prototype.incrementalPrepareRender=function(t,e,n){var i=t.getData();this._updateSymbolDraw(i,t).incrementalPrepareUpdate(i),this._finished=!1},e.prototype.incrementalRender=function(t,e,n){this._symbolDraw.incrementalUpdate(t,e.getData(),{clipShape:this._getClipShape(e)}),this._finished=t.end===e.getData().count()},e.prototype.updateTransform=function(t,e,n){var i=t.getData();if(this.group.dirty(),!this._finished||i.count()>1e4)return{update:!0};var r=_S("").reset(t,e,n);r.progress&&r.progress({start:0,end:i.count(),count:i.count()},i),this._symbolDraw.updateLayout(i)},e.prototype.eachRendered=function(t){this._symbolDraw&&this._symbolDraw.eachRendered(t)},e.prototype._getClipShape=function(t){if(t.get("clip",!0)){var e=t.coordinateSystem;return e&&e.getArea&&e.getArea(.1)}},e.prototype._updateSymbolDraw=function(t,e){var n=this._symbolDraw,i=e.pipelineContext.large;return n&&i===this._isLargeDraw||(n&&n.remove(),n=this._symbolDraw=i?new gC:new $w,this._isLargeDraw=i,this.group.removeAll()),this.group.add(n.group),n},e.prototype.remove=function(t,e){this._symbolDraw&&this._symbolDraw.remove(!0),this._symbolDraw=null},e.prototype.dispose=function(){},e.type="scatter",e}(gg),vC=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.type="grid",e.dependencies=["xAxis","yAxis"],e.layoutMode="box",e.defaultOption={show:!1,z:0,left:"10%",top:60,right:"10%",bottom:70,containLabel:!1,backgroundColor:"rgba(0,0,0,0)",borderWidth:1,borderColor:"#ccc"},e}(Sd),yC=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.getCoordSysModel=function(){return this.getReferringComponents("grid",Lo).models[0]},e.type="cartesian2dAxis",e}(Sd);P(yC,lx);var bC={show:!0,z:0,inverse:!1,name:"",nameLocation:"end",nameRotate:null,nameTruncate:{maxWidth:null,ellipsis:"...",placeholder:"."},nameTextStyle:{},nameGap:15,silent:!1,triggerEvent:!1,tooltip:{show:!1},axisPointer:{},axisLine:{show:!0,onZero:!0,onZeroAxisIndex:null,lineStyle:{color:"#6E7079",width:1,type:"solid"},symbol:["none","none"],symbolSize:[10,15]},axisTick:{show:!0,inside:!1,length:5,lineStyle:{width:1}},axisLabel:{show:!0,inside:!1,rotate:0,showMinLabel:null,showMaxLabel:null,margin:8,fontSize:12},splitLine:{show:!0,lineStyle:{color:["#E0E6F1"],width:1,type:"solid"}},splitArea:{show:!1,areaStyle:{color:["rgba(250,250,250,0.2)","rgba(210,219,238,0.2)"]}}},xC=M({boundaryGap:!0,deduplication:null,splitLine:{show:!1},axisTick:{alignWithLabel:!1,interval:"auto"},axisLabel:{interval:"auto"}},bC),_C=M({boundaryGap:[0,0],axisLine:{show:"auto"},axisTick:{show:"auto"},splitNumber:5,minorTick:{show:!1,splitNumber:5,length:3,lineStyle:{}},minorSplitLine:{show:!1,lineStyle:{color:"#F4F7FD",width:1}}},bC),wC={category:xC,value:_C,time:M({splitNumber:6,axisLabel:{showMinLabel:!1,showMaxLabel:!1,rich:{primary:{fontWeight:"bold"}}},splitLine:{show:!1}},_C),log:E({logBase:10},_C)},SC={value:1,category:1,time:1,log:1};function CC(t,e,i,r){R(SC,(function(o,a){var s=M(M({},wC[a],!0),r,!0),l=function(t){function i(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e+"Axis."+a,n}return n(i,t),i.prototype.mergeDefaultAndTheme=function(t,e){var n=yd(this),i=n?xd(t):{};M(t,e.getTheme().get(a+"Axis")),M(t,this.getDefaultOption()),t.type=kC(t),n&&bd(t,i,n)},i.prototype.optionUpdated=function(){"category"===this.option.type&&(this.__ordinalMeta=ob.createByAxisModel(this))},i.prototype.getCategories=function(t){var e=this.option;if("category"===e.type)return t?e.data:this.__ordinalMeta.categories},i.prototype.getOrdinalMeta=function(){return this.__ordinalMeta},i.type=e+"Axis."+a,i.defaultOption=s,i}(i);t.registerComponentModel(l)})),t.registerSubTypeDefaulter(e+"Axis",kC)}function kC(t){return t.type||(t.data?"category":"value")}var AC=function(){function t(t){this.type="cartesian",this._dimList=[],this._axes={},this.name=t||""}return t.prototype.getAxis=function(t){return this._axes[t]},t.prototype.getAxes=function(){return B(this._dimList,(function(t){return this._axes[t]}),this)},t.prototype.getAxesByScale=function(t){return t=t.toLowerCase(),F(this.getAxes(),(function(e){return e.scale.type===t}))},t.prototype.addAxis=function(t){var e=t.dim;this._axes[e]=t,this._dimList.push(e)},t}(),MC=["x","y"];function TC(t){return"interval"===t.type||"time"===t.type}var IC=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="cartesian2d",e.dimensions=MC,e}return n(e,t),e.prototype.calcAffineTransform=function(){this._transform=this._invTransform=null;var t=this.getAxis("x").scale,e=this.getAxis("y").scale;if(TC(t)&&TC(e)){var n=t.getExtent(),i=e.getExtent(),r=this.dataToPoint([n[0],i[0]]),o=this.dataToPoint([n[1],i[1]]),a=n[1]-n[0],s=i[1]-i[0];if(a&&s){var l=(o[0]-r[0])/a,c=(o[1]-r[1])/s,u=r[0]-n[0]*l,h=r[1]-i[0]*c,d=this._transform=[l,0,0,c,u,h];this._invTransform=Ce([],d)}}},e.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAxis("x")},e.prototype.containPoint=function(t){var e=this.getAxis("x"),n=this.getAxis("y");return e.contain(e.toLocalCoord(t[0]))&&n.contain(n.toLocalCoord(t[1]))},e.prototype.containData=function(t){return this.getAxis("x").containData(t[0])&&this.getAxis("y").containData(t[1])},e.prototype.containZone=function(t,e){var n=this.dataToPoint(t),i=this.dataToPoint(e),r=this.getArea(),o=new Re(n[0],n[1],i[0]-n[0],i[1]-n[1]);return r.intersect(o)},e.prototype.dataToPoint=function(t,e,n){n=n||[];var i=t[0],r=t[1];if(this._transform&&null!=i&&isFinite(i)&&null!=r&&isFinite(r))return Wt(n,t,this._transform);var o=this.getAxis("x"),a=this.getAxis("y");return n[0]=o.toGlobalCoord(o.dataToCoord(i,e)),n[1]=a.toGlobalCoord(a.dataToCoord(r,e)),n},e.prototype.clampData=function(t,e){var n=this.getAxis("x").scale,i=this.getAxis("y").scale,r=n.getExtent(),o=i.getExtent(),a=n.parse(t[0]),s=i.parse(t[1]);return(e=e||[])[0]=Math.min(Math.max(Math.min(r[0],r[1]),a),Math.max(r[0],r[1])),e[1]=Math.min(Math.max(Math.min(o[0],o[1]),s),Math.max(o[0],o[1])),e},e.prototype.pointToData=function(t,e){var n=[];if(this._invTransform)return Wt(n,t,this._invTransform);var i=this.getAxis("x"),r=this.getAxis("y");return n[0]=i.coordToData(i.toLocalCoord(t[0]),e),n[1]=r.coordToData(r.toLocalCoord(t[1]),e),n},e.prototype.getOtherAxis=function(t){return this.getAxis("x"===t.dim?"y":"x")},e.prototype.getArea=function(t){t=t||0;var e=this.getAxis("x").getGlobalExtent(),n=this.getAxis("y").getGlobalExtent(),i=Math.min(e[0],e[1])-t,r=Math.min(n[0],n[1])-t,o=Math.max(e[0],e[1])-i+t,a=Math.max(n[0],n[1])-r+t;return new Re(i,r,o,a)},e}(AC),EC=function(t){function e(e,n,i,r,o){var a=t.call(this,e,n,i)||this;return a.index=0,a.type=r||"value",a.position=o||"bottom",a}return n(e,t),e.prototype.isHorizontal=function(){var t=this.position;return"top"===t||"bottom"===t},e.prototype.getGlobalExtent=function(t){var e=this.getExtent();return e[0]=this.toGlobalCoord(e[0]),e[1]=this.toGlobalCoord(e[1]),t&&e[0]>e[1]&&e.reverse(),e},e.prototype.pointToData=function(t,e){return this.coordToData(this.toLocalCoord(t["x"===this.dim?0:1]),e)},e.prototype.setCategorySortInfo=function(t){if("category"!==this.type)return!1;this.model.option.categorySortInfo=t,this.scale.setSortInfo(t)},e}(zx);function OC(t,e,n){n=n||{};var i=t.coordinateSystem,r=e.axis,o={},a=r.getAxesOnZeroOf()[0],s=r.position,l=a?"onZero":s,c=r.dim,u=i.getRect(),h=[u.x,u.x+u.width,u.y,u.y+u.height],d={left:0,right:1,top:0,bottom:1,onZero:2},p=e.get("offset")||0,f="x"===c?[h[2]-p,h[3]+p]:[h[0]-p,h[1]+p];if(a){var g=a.toGlobalCoord(a.dataToCoord(0));f[d.onZero]=Math.max(Math.min(g,f[1]),f[0])}o.position=["y"===c?f[d[l]]:h[0],"x"===c?f[d[l]]:h[3]],o.rotation=Math.PI/2*("x"===c?0:1),o.labelDirection=o.tickDirection=o.nameDirection={top:-1,bottom:1,left:-1,right:1}[s],o.labelOffset=a?f[d[s]]-f[d.onZero]:0,e.get(["axisTick","inside"])&&(o.tickDirection=-o.tickDirection),it(n.labelInside,e.get(["axisLabel","inside"]))&&(o.labelDirection=-o.labelDirection);var m=e.get(["axisLabel","rotate"]);return o.labelRotate="top"===l?-m:m,o.z2=1,o}function DC(t){return"cartesian2d"===t.get("coordinateSystem")}function LC(t){var e={xAxisModel:null,yAxisModel:null};return R(e,(function(n,i){var r=i.replace(/Model$/,""),o=t.getReferringComponents(r,Lo).models[0];e[i]=o})),e}var PC=Math.log;function NC(t,e,n){var i=mb.prototype,r=i.getTicks.call(n),o=i.getTicks.call(n,!0),a=r.length-1,s=i.getInterval.call(n),l=Jb(t,e),c=l.extent,u=l.fixMin,h=l.fixMax;if("log"===t.type){var d=PC(t.base);c=[PC(c[0])/d,PC(c[1])/d]}t.setExtent(c[0],c[1]),t.calcNiceExtent({splitNumber:a,fixMin:u,fixMax:h});var p=i.getExtent.call(t);u&&(c[0]=p[0]),h&&(c[1]=p[1]);var f=i.getInterval.call(t),g=c[0],m=c[1];if(u&&h)f=(m-g)/a;else if(u)for(m=c[0]+f*a;m<c[1]&&isFinite(m)&&isFinite(c[1]);)f=lb(f),m=c[0]+f*a;else if(h)for(g=c[1]-f*a;g>c[0]&&isFinite(g)&&isFinite(c[0]);)f=lb(f),g=c[1]-f*a;else{t.getTicks().length-1>a&&(f=lb(f));var v=f*a;(g=Yr((m=Math.ceil(c[1]/f)*f)-v))<0&&c[0]>=0?(g=0,m=Yr(v)):m>0&&c[1]<=0&&(m=0,g=-Yr(v))}var y=(r[0].value-o[0].value)/s,b=(r[a].value-o[a].value)/s;i.setExtent.call(t,g+f*y,m+f*b),i.setInterval.call(t,f),(y||b)&&i.setNiceExtent.call(t,g+f,m-f)}var RC=function(){function t(t,e,n){this.type="grid",this._coordsMap={},this._coordsList=[],this._axesMap={},this._axesList=[],this.axisPointerEnabled=!0,this.dimensions=MC,this._initCartesian(t,e,n),this.model=t}return t.prototype.getRect=function(){return this._rect},t.prototype.update=function(t,e){var n=this._axesMap;function i(t){var e,n=H(t),i=n.length;if(i){for(var r=[],o=i-1;o>=0;o--){var a=t[+n[o]],s=a.model,l=a.scale;sb(l)&&s.get("alignTicks")&&null==s.get("interval")?r.push(a):(tx(l,s),sb(l)&&(e=a))}r.length&&(e||tx((e=r.pop()).scale,e.model),R(r,(function(t){NC(t.scale,t.model,e.scale)})))}}this._updateScale(t,this.model),i(n.x),i(n.y);var r={};R(n.x,(function(t){zC(n,"y",t,r)})),R(n.y,(function(t){zC(n,"x",t,r)})),this.resize(this.model,e)},t.prototype.resize=function(t,e,n){var i=t.getBoxLayoutParams(),r=!n&&t.get("containLabel"),o=md(i,{width:e.getWidth(),height:e.getHeight()});this._rect=o;var a=this._axesList;function s(){R(a,(function(t){var e=t.isHorizontal(),n=e?[0,o.width]:[0,o.height],i=t.inverse?1:0;t.setExtent(n[i],n[1-i]),function(t,e){var n=t.getExtent(),i=n[0]+n[1];t.toGlobalCoord="x"===t.dim?function(t){return t+e}:function(t){return i-t+e},t.toLocalCoord="x"===t.dim?function(t){return t-e}:function(t){return i-t+e}}(t,e?o.x:o.y)}))}s(),r&&(R(a,(function(t){if(!t.model.get(["axisLabel","inside"])){var e=function(t){var e=t.model,n=t.scale;if(e.get(["axisLabel","show"])&&!n.isBlank()){var i,r,o=n.getExtent();r=n instanceof fb?n.count():(i=n.getTicks()).length;var a,s=t.getLabelModel(),l=nx(t),c=1;r>40&&(c=Math.ceil(r/40));for(var u=0;u<r;u+=c){var h=l(i?i[u]:{value:o[0]+u},u),d=rx(s.getTextRect(h),s.get("rotate")||0);a?a.union(d):a=d}return a}}(t);if(e){var n=t.isHorizontal()?"height":"width",i=t.model.get(["axisLabel","margin"]);o[n]-=e[n]+i,"top"===t.position?o.y+=e.height+i:"left"===t.position&&(o.x+=e.width+i)}}})),s()),R(this._coordsList,(function(t){t.calcAffineTransform()}))},t.prototype.getAxis=function(t,e){var n=this._axesMap[t];if(null!=n)return n[e||0]},t.prototype.getAxes=function(){return this._axesList.slice()},t.prototype.getCartesian=function(t,e){if(null!=t&&null!=e){var n="x"+t+"y"+e;return this._coordsMap[n]}$(t)&&(e=t.yAxisIndex,t=t.xAxisIndex);for(var i=0,r=this._coordsList;i<r.length;i++)if(r[i].getAxis("x").index===t||r[i].getAxis("y").index===e)return r[i]},t.prototype.getCartesians=function(){return this._coordsList.slice()},t.prototype.convertToPixel=function(t,e,n){var i=this._findConvertTarget(e);return i.cartesian?i.cartesian.dataToPoint(n):i.axis?i.axis.toGlobalCoord(i.axis.dataToCoord(n)):null},t.prototype.convertFromPixel=function(t,e,n){var i=this._findConvertTarget(e);return i.cartesian?i.cartesian.pointToData(n):i.axis?i.axis.coordToData(i.axis.toLocalCoord(n)):null},t.prototype._findConvertTarget=function(t){var e,n,i=t.seriesModel,r=t.xAxisModel||i&&i.getReferringComponents("xAxis",Lo).models[0],o=t.yAxisModel||i&&i.getReferringComponents("yAxis",Lo).models[0],a=t.gridModel,s=this._coordsList;return i?D(s,e=i.coordinateSystem)<0&&(e=null):r&&o?e=this.getCartesian(r.componentIndex,o.componentIndex):r?n=this.getAxis("x",r.componentIndex):o?n=this.getAxis("y",o.componentIndex):a&&a.coordinateSystem===this&&(e=this._coordsList[0]),{cartesian:e,axis:n}},t.prototype.containPoint=function(t){var e=this._coordsList[0];if(e)return e.containPoint(t)},t.prototype._initCartesian=function(t,e,n){var i=this,r=this,o={left:!1,right:!1,top:!1,bottom:!1},a={x:{},y:{}},s={x:0,y:0};if(e.eachComponent("xAxis",l("x"),this),e.eachComponent("yAxis",l("y"),this),!s.x||!s.y)return this._axesMap={},void(this._axesList=[]);function l(e){return function(n,i){if(BC(n,t)){var l=n.get("position");"x"===e?"top"!==l&&"bottom"!==l&&(l=o.bottom?"top":"bottom"):"left"!==l&&"right"!==l&&(l=o.left?"right":"left"),o[l]=!0;var c=new EC(e,ex(n),[0,0],n.get("type"),l),u="category"===c.type;c.onBand=u&&n.get("boundaryGap"),c.inverse=n.get("inverse"),n.axis=c,c.model=n,c.grid=r,c.index=i,r._axesList.push(c),a[e][i]=c,s[e]++}}}this._axesMap=a,R(a.x,(function(e,n){R(a.y,(function(r,o){var a="x"+n+"y"+o,s=new IC(a);s.master=i,s.model=t,i._coordsMap[a]=s,i._coordsList.push(s),s.addAxis(e),s.addAxis(r)}))}))},t.prototype._updateScale=function(t,e){function n(t,e){R(sx(t,e.dim),(function(n){e.scale.unionExtentFromData(t,n)}))}R(this._axesList,(function(t){if(t.scale.setExtent(1/0,-1/0),"category"===t.type){var e=t.model.get("categorySortInfo");t.scale.setSortInfo(e)}})),t.eachSeries((function(t){if(DC(t)){var i=LC(t),r=i.xAxisModel,o=i.yAxisModel;if(!BC(r,e)||!BC(o,e))return;var a=this.getCartesian(r.componentIndex,o.componentIndex),s=t.getData(),l=a.getAxis("x"),c=a.getAxis("y");n(s,l),n(s,c)}}),this)},t.prototype.getTooltipAxes=function(t){var e=[],n=[];return R(this.getCartesians(),(function(i){var r=null!=t&&"auto"!==t?i.getAxis(t):i.getBaseAxis(),o=i.getOtherAxis(r);D(e,r)<0&&e.push(r),D(n,o)<0&&n.push(o)})),{baseAxes:e,otherAxes:n}},t.create=function(e,n){var i=[];return e.eachComponent("grid",(function(r,o){var a=new t(r,e,n);a.name="grid_"+o,a.resize(r,n,!0),r.coordinateSystem=a,i.push(a)})),e.eachSeries((function(t){if(DC(t)){var e=LC(t),n=e.xAxisModel,i=e.yAxisModel,r=n.getCoordSysModel().coordinateSystem;t.coordinateSystem=r.getCartesian(n.componentIndex,i.componentIndex)}})),i},t.dimensions=MC,t}();function BC(t,e){return t.getCoordSysModel()===e}function zC(t,e,n,i){n.getAxesOnZeroOf=function(){return r?[r]:[]};var r,o=t[e],a=n.model,s=a.get(["axisLine","onZero"]),l=a.get(["axisLine","onZeroAxisIndex"]);if(s){if(null!=l)FC(o[l])&&(r=o[l]);else for(var c in o)if(o.hasOwnProperty(c)&&FC(o[c])&&!i[u(o[c])]){r=o[c];break}r&&(i[u(r)]=!0)}function u(t){return t.dim+"_"+t.index}}function FC(t){return t&&"category"!==t.type&&"time"!==t.type&&function(t){var e=t.scale.getExtent(),n=e[0],i=e[1];return!(n>0&&i>0||n<0&&i<0)}(t)}var VC=Math.PI,HC=function(){function t(t,e){this.group=new Dr,this.opt=e,this.axisModel=t,E(e,{labelOffset:0,nameDirection:1,tickDirection:1,labelDirection:1,silent:!0,handleAutoShown:function(){return!0}});var n=new Dr({x:e.position[0],y:e.position[1],rotation:e.rotation});n.updateTransform(),this._transformGroup=n}return t.prototype.hasBuilder=function(t){return!!WC[t]},t.prototype.add=function(t){WC[t](this.opt,this.axisModel,this.group,this._transformGroup)},t.prototype.getGroup=function(){return this.group},t.innerTextLayout=function(t,e,n){var i,r,o=Qr(e-t);return Jr(o)?(r=n>0?"top":"bottom",i="center"):Jr(o-VC)?(r=n>0?"bottom":"top",i="center"):(r="middle",i=o>0&&o<VC?n>0?"right":"left":n>0?"left":"right"),{rotation:o,textAlign:i,textVerticalAlign:r}},t.makeAxisEventDataBase=function(t){var e={componentType:t.mainType,componentIndex:t.componentIndex};return e[t.mainType+"Index"]=t.componentIndex,e},t.isLabelSilent=function(t){var e=t.get("tooltip");return t.get("silent")||!(t.get("triggerEvent")||e&&e.show)},t}(),WC={axisLine:function(t,e,n,i){var r=e.get(["axisLine","show"]);if("auto"===r&&t.handleAutoShown&&(r=t.handleAutoShown("axisLine")),r){var o=e.axis.getExtent(),a=i.transform,s=[o[0],0],l=[o[1],0],c=s[0]>l[0];a&&(Wt(s,s,a),Wt(l,l,a));var u=I({lineCap:"round"},e.getModel(["axisLine","lineStyle"]).getLineStyle()),h=new Fc({shape:{x1:s[0],y1:s[1],x2:l[0],y2:l[1]},style:u,strokeContainThreshold:t.strokeContainThreshold||5,silent:!0,z2:1});ku(h.shape,h.style.lineWidth),h.anid="line",n.add(h);var d=e.get(["axisLine","symbol"]);if(null!=d){var p=e.get(["axisLine","symbolSize"]);G(d)&&(d=[d,d]),(G(p)||U(p))&&(p=[p,p]);var f=Im(e.get(["axisLine","symbolOffset"])||0,p),g=p[0],m=p[1];R([{rotate:t.rotation+Math.PI/2,offset:f[0],r:0},{rotate:t.rotation-Math.PI/2,offset:f[1],r:Math.sqrt((s[0]-l[0])*(s[0]-l[0])+(s[1]-l[1])*(s[1]-l[1]))}],(function(e,i){if("none"!==d[i]&&null!=d[i]){var r=Mm(d[i],-g/2,-m/2,g,m,u.stroke,!0),o=e.r+e.offset,a=c?l:s;r.attr({rotation:e.rotate,x:a[0]+o*Math.cos(t.rotation),y:a[1]-o*Math.sin(t.rotation),silent:!0,z2:11}),n.add(r)}}))}}},axisTickLabel:function(t,e,n,i){var r=function(t,e,n,i){var r=n.axis,o=n.getModel("axisTick"),a=o.get("show");if("auto"===a&&i.handleAutoShown&&(a=i.handleAutoShown("axisTick")),a&&!r.scale.isBlank()){for(var s=o.getModel("lineStyle"),l=i.tickDirection*o.get("length"),c=GC(r.getTicksCoords(),e.transform,l,E(s.getLineStyle(),{stroke:n.get(["axisLine","lineStyle","color"])}),"ticks"),u=0;u<c.length;u++)t.add(c[u]);return c}}(n,i,e,t),o=function(t,e,n,i){var r=n.axis;if(it(i.axisLabelShow,n.get(["axisLabel","show"]))&&!r.scale.isBlank()){var o=n.getModel("axisLabel"),a=o.get("margin"),s=r.getViewLabels(),l=(it(i.labelRotate,o.get("rotate"))||0)*VC/180,c=HC.innerTextLayout(i.rotation,l,i.labelDirection),u=n.getCategories&&n.getCategories(!0),h=[],d=HC.isLabelSilent(n),p=n.get("triggerEvent");return R(s,(function(l,f){var g="ordinal"===r.scale.type?r.scale.getRawOrdinalNumber(l.tickValue):l.tickValue,m=l.formattedLabel,v=l.rawLabel,y=o;if(u&&u[g]){var b=u[g];$(b)&&b.textStyle&&(y=new gh(b.textStyle,o,n.ecModel))}var x=y.getTextColor()||n.get(["axisLine","lineStyle","color"]),_=r.dataToCoord(g),w=y.getShallow("align",!0)||c.textAlign,S=rt(y.getShallow("alignMinLabel",!0),w),C=rt(y.getShallow("alignMaxLabel",!0),w),k=y.getShallow("verticalAlign",!0)||y.getShallow("baseline",!0)||c.textVerticalAlign,A=rt(y.getShallow("verticalAlignMinLabel",!0),k),M=rt(y.getShallow("verticalAlignMaxLabel",!0),k),T=new Rs({x:_,y:i.labelOffset+i.labelDirection*a,rotation:c.rotation,silent:d,z2:10+(l.level||0),style:qu(y,{text:m,align:0===f?S:f===s.length-1?C:w,verticalAlign:0===f?A:f===s.length-1?M:k,fill:X(x)?x("category"===r.type?v:"value"===r.type?g+"":g,f):x})});if(T.anid="label_"+g,p){var I=HC.makeAxisEventDataBase(n);I.targetType="axisLabel",I.value=v,I.tickIndex=f,"category"===r.type&&(I.dataIndex=g),$s(T).eventData=I}e.add(T),T.updateTransform(),h.push(T),t.add(T),T.decomposeTransform()})),h}}(n,i,e,t);(function(t,e,n){if(!ax(t.axis)){var i=t.get(["axisLabel","showMinLabel"]),r=t.get(["axisLabel","showMaxLabel"]);n=n||[];var o=(e=e||[])[0],a=e[1],s=e[e.length-1],l=e[e.length-2],c=n[0],u=n[1],h=n[n.length-1],d=n[n.length-2];!1===i?(jC(o),jC(c)):YC(o,a)&&(i?(jC(a),jC(u)):(jC(o),jC(c))),!1===r?(jC(s),jC(h)):YC(l,s)&&(r?(jC(l),jC(d)):(jC(s),jC(h)))}})(e,o,r),function(t,e,n,i){var r=n.axis,o=n.getModel("minorTick");if(o.get("show")&&!r.scale.isBlank()){var a=r.getMinorTicksCoords();if(a.length)for(var s=o.getModel("lineStyle"),l=i*o.get("length"),c=E(s.getLineStyle(),E(n.getModel("axisTick").getLineStyle(),{stroke:n.get(["axisLine","lineStyle","color"])})),u=0;u<a.length;u++)for(var h=GC(a[u],e.transform,l,c,"minorticks_"+u),d=0;d<h.length;d++)t.add(h[d])}}(n,i,e,t.tickDirection),e.get(["axisLabel","hideOverlap"])&&p_(u_(B(o,(function(t){return{label:t,priority:t.z2,defaultAttr:{ignore:t.ignore}}}))))},axisName:function(t,e,n,i){var r=it(t.axisName,e.get("name"));if(r){var o,a,s=e.get("nameLocation"),l=t.nameDirection,c=e.getModel("nameTextStyle"),u=e.get("nameGap")||0,h=e.axis.getExtent(),d=h[0]>h[1]?-1:1,p=["start"===s?h[0]-d*u:"end"===s?h[1]+d*u:(h[0]+h[1])/2,XC(s)?t.labelOffset+l*u:0],f=e.get("nameRotate");null!=f&&(f=f*VC/180),XC(s)?o=HC.innerTextLayout(t.rotation,null!=f?f:t.rotation,l):(o=function(t,e,n,i){var r,o,a=Qr(n-t),s=i[0]>i[1],l="start"===e&&!s||"start"!==e&&s;return Jr(a-VC/2)?(o=l?"bottom":"top",r="center"):Jr(a-1.5*VC)?(o=l?"top":"bottom",r="center"):(o="middle",r=a<1.5*VC&&a>VC/2?l?"left":"right":l?"right":"left"),{rotation:a,textAlign:r,textVerticalAlign:o}}(t.rotation,s,f||0,h),null!=(a=t.axisNameAvailableWidth)&&(a=Math.abs(a/Math.sin(o.rotation)),!isFinite(a)&&(a=null)));var g=c.getFont(),m=e.get("nameTruncate",!0)||{},v=m.ellipsis,y=it(t.nameTruncateMaxWidth,m.maxWidth,a),b=new Rs({x:p[0],y:p[1],rotation:o.rotation,silent:HC.isLabelSilent(e),style:qu(c,{text:r,font:g,overflow:"truncate",width:y,ellipsis:v,fill:c.getTextColor()||e.get(["axisLine","lineStyle","color"]),align:c.get("align")||o.textAlign,verticalAlign:c.get("verticalAlign")||o.textVerticalAlign}),z2:1});if(zu({el:b,componentModel:e,itemName:r}),b.__fullText=r,b.anid="name",e.get("triggerEvent")){var x=HC.makeAxisEventDataBase(e);x.targetType="axisName",x.name=r,$s(b).eventData=x}i.add(b),b.updateTransform(),n.add(b),b.decomposeTransform()}}};function jC(t){t&&(t.ignore=!0)}function YC(t,e){var n=t&&t.getBoundingRect().clone(),i=e&&e.getBoundingRect().clone();if(n&&i){var r=ye([]);return we(r,r,-t.rotation),n.applyTransform(xe([],r,t.getLocalTransform())),i.applyTransform(xe([],r,e.getLocalTransform())),n.intersect(i)}}function XC(t){return"middle"===t||"center"===t}function GC(t,e,n,i,r){for(var o=[],a=[],s=[],l=0;l<t.length;l++){var c=t[l].coord;a[0]=c,a[1]=0,s[0]=c,s[1]=n,e&&(Wt(a,a,e),Wt(s,s,e));var u=new Fc({shape:{x1:a[0],y1:a[1],x2:s[0],y2:s[1]},style:i,z2:2,autoBatch:!0,silent:!0});ku(u.shape,u.style.lineWidth),u.anid=r+"_"+t[l].tickValue,o.push(u)}return o}function qC(t,e){return"all"===t||Y(t)&&D(t,e)>=0||t===e}function UC(t){var e=$C(t);if(e){var n=e.axisPointerModel,i=e.axis.scale,r=n.option,o=n.get("status"),a=n.get("value");null!=a&&(a=i.parse(a));var s=ZC(n);null==o&&(r.status=s?"show":"hide");var l=i.getExtent().slice();l[0]>l[1]&&l.reverse(),(null==a||a>l[1])&&(a=l[1]),a<l[0]&&(a=l[0]),r.value=a,s&&(r.status=e.axis.scale.isBlank()?"hide":"show")}}function $C(t){var e=(t.ecModel.getComponent("axisPointer")||{}).coordSysAxesInfo;return e&&e.axesInfo[KC(t)]}function ZC(t){return!!t.get(["handle","show"])}function KC(t){return t.type+"||"+t.id}var QC={},JC=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.prototype.render=function(e,n,i,r){this.axisPointerClass&&UC(e),t.prototype.render.apply(this,arguments),this._doUpdateAxisPointerClass(e,i,!0)},e.prototype.updateAxisPointer=function(t,e,n,i){this._doUpdateAxisPointerClass(t,n,!1)},e.prototype.remove=function(t,e){var n=this._axisPointer;n&&n.remove(e)},e.prototype.dispose=function(e,n){this._disposeAxisPointer(n),t.prototype.dispose.apply(this,arguments)},e.prototype._doUpdateAxisPointerClass=function(t,n,i){var r=e.getAxisPointerClass(this.axisPointerClass);if(r){var o=function(t){var e=$C(t);return e&&e.axisPointerModel}(t);o?(this._axisPointer||(this._axisPointer=new r)).render(t,o,n,i):this._disposeAxisPointer(n)}},e.prototype._disposeAxisPointer=function(t){this._axisPointer&&this._axisPointer.dispose(t),this._axisPointer=null},e.registerAxisPointerClass=function(t,e){QC[t]=e},e.getAxisPointerClass=function(t){return t&&QC[t]},e.type="axis",e}(hg),tk=Io();function ek(t,e,n,i){var r=n.axis;if(!r.scale.isBlank()){var o=n.getModel("splitArea"),a=o.getModel("areaStyle"),s=a.get("color"),l=i.coordinateSystem.getRect(),c=r.getTicksCoords({tickModel:o,clamp:!0});if(c.length){var u=s.length,h=tk(t).splitAreaColors,d=mt(),p=0;if(h)for(var f=0;f<c.length;f++){var g=h.get(c[f].tickValue);if(null!=g){p=(g+(u-1)*f)%u;break}}var m=r.toGlobalCoord(c[0].coord),v=a.getAreaStyle();for(s=Y(s)?s:[s],f=1;f<c.length;f++){var y=r.toGlobalCoord(c[f].coord),b=void 0,x=void 0,_=void 0,w=void 0;r.isHorizontal()?(b=m,x=l.y,_=y-b,w=l.height,m=b+_):(b=l.x,x=m,_=l.width,m=x+(w=y-x));var S=c[f-1].tickValue;null!=S&&d.set(S,p),e.add(new Ls({anid:null!=S?"area_"+S:null,shape:{x:b,y:x,width:_,height:w},style:E({fill:s[p]},v),autoBatch:!0,silent:!0})),p=(p+1)%u}tk(t).splitAreaColors=d}}}function nk(t){tk(t).splitAreaColors=null}var ik=["axisLine","axisTickLabel","axisName"],rk=["splitArea","splitLine","minorSplitLine"],ok=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.axisPointerClass="CartesianAxisPointer",n}return n(e,t),e.prototype.render=function(e,n,i,r){this.group.removeAll();var o=this._axisGroup;if(this._axisGroup=new Dr,this.group.add(this._axisGroup),e.get("show")){var a=e.getCoordSysModel(),s=OC(a,e),l=new HC(e,I({handleAutoShown:function(t){for(var n=a.coordinateSystem.getCartesians(),i=0;i<n.length;i++)if(sb(n[i].getOtherAxis(e.axis).scale))return!0;return!1}},s));R(ik,l.add,l),this._axisGroup.add(l.getGroup()),R(rk,(function(t){e.get([t,"show"])&&ak[t](this,this._axisGroup,e,a)}),this),r&&"changeAxisOrder"===r.type&&r.isInitSort||Ou(o,this._axisGroup,e),t.prototype.render.call(this,e,n,i,r)}},e.prototype.remove=function(){nk(this)},e.type="cartesianAxis",e}(JC),ak={splitLine:function(t,e,n,i){var r=n.axis;if(!r.scale.isBlank()){var o=n.getModel("splitLine"),a=o.getModel("lineStyle"),s=a.get("color");s=Y(s)?s:[s];for(var l=i.coordinateSystem.getRect(),c=r.isHorizontal(),u=0,h=r.getTicksCoords({tickModel:o}),d=[],p=[],f=a.getLineStyle(),g=0;g<h.length;g++){var m=r.toGlobalCoord(h[g].coord);c?(d[0]=m,d[1]=l.y,p[0]=m,p[1]=l.y+l.height):(d[0]=l.x,d[1]=m,p[0]=l.x+l.width,p[1]=m);var v=u++%s.length,y=h[g].tickValue,b=new Fc({anid:null!=y?"line_"+h[g].tickValue:null,autoBatch:!0,shape:{x1:d[0],y1:d[1],x2:p[0],y2:p[1]},style:E({stroke:s[v]},f),silent:!0});ku(b.shape,f.lineWidth),e.add(b)}}},minorSplitLine:function(t,e,n,i){var r=n.axis,o=n.getModel("minorSplitLine").getModel("lineStyle"),a=i.coordinateSystem.getRect(),s=r.isHorizontal(),l=r.getMinorTicksCoords();if(l.length)for(var c=[],u=[],h=o.getLineStyle(),d=0;d<l.length;d++)for(var p=0;p<l[d].length;p++){var f=r.toGlobalCoord(l[d][p].coord);s?(c[0]=f,c[1]=a.y,u[0]=f,u[1]=a.y+a.height):(c[0]=a.x,c[1]=f,u[0]=a.x+a.width,u[1]=f);var g=new Fc({anid:"minor_line_"+l[d][p].tickValue,autoBatch:!0,shape:{x1:c[0],y1:c[1],x2:u[0],y2:u[1]},style:h,silent:!0});ku(g.shape,h.lineWidth),e.add(g)}},splitArea:function(t,e,n,i){ek(t,e,n,i)}},sk=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.type="xAxis",e}(ok),lk=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type=sk.type,e}return n(e,t),e.type="yAxis",e}(ok),ck=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="grid",e}return n(e,t),e.prototype.render=function(t,e){this.group.removeAll(),t.get("show")&&this.group.add(new Ls({shape:t.coordinateSystem.getRect(),style:E({fill:t.get("backgroundColor")},t.getItemStyle()),silent:!0,z2:-1}))},e.type="grid",e}(hg),uk={offset:0};function hk(t){t.registerComponentView(ck),t.registerComponentModel(vC),t.registerCoordinateSystem("cartesian2d",RC),CC(t,"x",yC,uk),CC(t,"y",yC,uk),t.registerComponentView(sk),t.registerComponentView(lk),t.registerPreprocessor((function(t){t.xAxis&&t.yAxis&&!t.grid&&(t.grid={})}))}function dk(t){t.eachSeriesByType("radar",(function(t){var e=t.getData(),n=[],i=t.coordinateSystem;if(i){var r=i.getIndicatorAxes();R(r,(function(t,o){e.each(e.mapDimension(r[o].dim),(function(t,e){n[e]=n[e]||[];var r=i.dataToPoint(t,o);n[e][o]=pk(r)?r:fk(i)}))})),e.each((function(t){var r=V(n[t],(function(t){return pk(t)}))||fk(i);n[t].push(r.slice()),e.setItemLayout(t,n[t])}))}}))}function pk(t){return!isNaN(t[0])&&!isNaN(t[1])}function fk(t){return[t.cx,t.cy]}function gk(t){var e=t.polar;if(e){Y(e)||(e=[e]);var n=[];R(e,(function(e,i){e.indicator?(e.type&&!e.shape&&(e.shape=e.type),t.radar=t.radar||[],Y(t.radar)||(t.radar=[t.radar]),t.radar.push(e)):n.push(e)})),t.polar=n}R(t.series,(function(t){t&&"radar"===t.type&&t.polarIndex&&(t.radarIndex=t.polarIndex)}))}var mk=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.prototype.render=function(t,e,n){var i=t.coordinateSystem,r=this.group,o=t.getData(),a=this._data;function s(t,e){var n=t.getItemVisual(e,"symbol")||"circle";if("none"!==n){var i=Tm(t.getItemVisual(e,"symbolSize")),r=Mm(n,-1,-1,2,2),o=t.getItemVisual(e,"symbolRotate")||0;return r.attr({style:{strokeNoScale:!0},z2:100,scaleX:i[0]/2,scaleY:i[1]/2,rotation:o*Math.PI/180||0}),r}}function l(e,n,i,r,o,a){i.removeAll();for(var l=0;l<n.length-1;l++){var c=s(r,o);c&&(c.__dimIdx=l,e[l]?(c.setPosition(e[l]),Hu[a?"initProps":"updateProps"](c,{x:n[l][0],y:n[l][1]},t,o)):c.setPosition(n[l]),i.add(c))}}function c(t){return B(t,(function(t){return[i.cx,i.cy]}))}o.diff(a).add((function(e){var n=o.getItemLayout(e);if(n){var i=new Pc,r=new Rc,a={shape:{points:n}};i.shape.points=c(n),r.shape.points=c(n),su(i,a,t,e),su(r,a,t,e);var s=new Dr,u=new Dr;s.add(r),s.add(i),s.add(u),l(r.shape.points,n,u,o,e,!0),o.setItemGraphicEl(e,s)}})).update((function(e,n){var i=a.getItemGraphicEl(n),r=i.childAt(0),s=i.childAt(1),c=i.childAt(2),u={shape:{points:o.getItemLayout(e)}};u.shape.points&&(l(r.shape.points,u.shape.points,c,o,e,!1),du(s),du(r),au(r,u,t),au(s,u,t),o.setItemGraphicEl(e,i))})).remove((function(t){r.remove(a.getItemGraphicEl(t))})).execute(),o.eachItemGraphicEl((function(t,e){var n=o.getItemModel(e),i=t.childAt(0),a=t.childAt(1),s=t.childAt(2),l=o.getItemVisual(e,"style"),c=l.fill;r.add(t),i.useStyle(E(n.getModel("lineStyle").getLineStyle(),{fill:"none",stroke:c})),Hl(i,n,"lineStyle"),Hl(a,n,"areaStyle");var u=n.getModel("areaStyle"),h=u.isEmpty()&&u.parentModel.isEmpty();a.ignore=h,R(["emphasis","select","blur"],(function(t){var e=n.getModel([t,"areaStyle"]),i=e.isEmpty()&&e.parentModel.isEmpty();a.ensureState(t).ignore=i&&h})),a.useStyle(E(u.getAreaStyle(),{fill:c,opacity:.7,decal:l.decal}));var d=n.getModel("emphasis"),p=d.getModel("itemStyle").getItemStyle();s.eachChild((function(t){if(t instanceof As){var i=t.style;t.useStyle(I({image:i.image,x:i.x,y:i.y,width:i.width,height:i.height},l))}else t.useStyle(l),t.setColor(c),t.style.strokeNoScale=!0;t.ensureState("emphasis").style=A(p);var r=o.getStore().get(o.getDimensionIndex(t.__dimIdx),e);(null==r||isNaN(r))&&(r=""),Xu(t,Gu(n),{labelFetcher:o.hostModel,labelDataIndex:e,labelDimIndex:t.__dimIdx,defaultText:r,inheritColor:c,defaultOpacity:l.opacity})})),Bl(t,d.get("focus"),d.get("blurScope"),d.get("disabled"))})),this._data=o},e.prototype.remove=function(){this.group.removeAll(),this._data=null},e.type="radar",e}(gg),vk=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.hasSymbolVisual=!0,n}return n(e,t),e.prototype.init=function(e){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new cC(W(this.getData,this),W(this.getRawData,this))},e.prototype.getInitialData=function(t,e){return lC(this,{generateCoord:"indicator_",generateCoordCount:1/0})},e.prototype.formatTooltip=function(t,e,n){var i=this.getData(),r=this.coordinateSystem.getIndicatorAxes(),o=this.getData().getName(t),a=""===o?this.name:o,s=Zf(this,t);return Hf("section",{header:a,sortBlocks:!0,blocks:B(r,(function(e){var n=i.get(i.mapDimension(e.dim),t);return Hf("nameValue",{markerType:"subItem",markerColor:s,name:e.name,value:n,sortParam:n})}))})},e.prototype.getTooltipPosition=function(t){if(null!=t)for(var e=this.getData(),n=this.coordinateSystem,i=e.getValues(B(n.dimensions,(function(t){return e.mapDimension(t)})),t),r=0,o=i.length;r<o;r++)if(!isNaN(i[r])){var a=n.getIndicatorAxes();return n.coordToPoint(a[r].dataToCoord(i[r]),r)}},e.type="series.radar",e.dependencies=["radar"],e.defaultOption={z:2,colorBy:"data",coordinateSystem:"radar",legendHoverLink:!0,radarIndex:0,lineStyle:{width:2,type:"solid",join:"round"},label:{position:"top"},symbolSize:8},e}(ig),yk=wC.value;function bk(t,e){return E({show:e},t)}var xk=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.prototype.optionUpdated=function(){var t=this.get("boundaryGap"),e=this.get("splitNumber"),n=this.get("scale"),i=this.get("axisLine"),r=this.get("axisTick"),o=this.get("axisLabel"),a=this.get("axisName"),s=this.get(["axisName","show"]),l=this.get(["axisName","formatter"]),c=this.get("axisNameGap"),u=this.get("triggerEvent"),h=B(this.get("indicator")||[],(function(h){null!=h.max&&h.max>0&&!h.min?h.min=0:null!=h.min&&h.min<0&&!h.max&&(h.max=0);var d=a;null!=h.color&&(d=E({color:h.color},a));var p=M(A(h),{boundaryGap:t,splitNumber:e,scale:n,axisLine:i,axisTick:r,axisLabel:o,name:h.text,showName:s,nameLocation:"end",nameGap:c,nameTextStyle:d,triggerEvent:u},!1);if(G(l)){var f=p.name;p.name=l.replace("{value}",null!=f?f:"")}else X(l)&&(p.name=l(p.name,p));var g=new gh(p,null,this.ecModel);return P(g,lx.prototype),g.mainType="radar",g.componentIndex=this.componentIndex,g}),this);this._indicatorModels=h},e.prototype.getIndicatorModels=function(){return this._indicatorModels},e.type="radar",e.defaultOption={z:0,center:["50%","50%"],radius:"75%",startAngle:90,axisName:{show:!0},boundaryGap:[0,0],splitNumber:5,axisNameGap:15,scale:!1,shape:"polygon",axisLine:M({lineStyle:{color:"#bbb"}},yk.axisLine),axisLabel:bk(yk.axisLabel,!1),axisTick:bk(yk.axisTick,!1),splitLine:bk(yk.splitLine,!0),splitArea:bk(yk.splitArea,!0),indicator:[]},e}(Sd),_k=["axisLine","axisTickLabel","axisName"],wk=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.prototype.render=function(t,e,n){this.group.removeAll(),this._buildAxes(t),this._buildSplitLineAndArea(t)},e.prototype._buildAxes=function(t){var e=t.coordinateSystem;R(B(e.getIndicatorAxes(),(function(t){var n=t.model.get("showName")?t.name:"";return new HC(t.model,{axisName:n,position:[e.cx,e.cy],rotation:t.angle,labelDirection:-1,tickDirection:-1,nameDirection:1})})),(function(t){R(_k,t.add,t),this.group.add(t.getGroup())}),this)},e.prototype._buildSplitLineAndArea=function(t){var e=t.coordinateSystem,n=e.getIndicatorAxes();if(n.length){var i=t.get("shape"),r=t.getModel("splitLine"),o=t.getModel("splitArea"),a=r.getModel("lineStyle"),s=o.getModel("areaStyle"),l=r.get("show"),c=o.get("show"),u=a.get("color"),h=s.get("color"),d=Y(u)?u:[u],p=Y(h)?h:[h],f=[],g=[];if("circle"===i)for(var m=n[0].getTicksCoords(),v=e.cx,y=e.cy,b=0;b<m.length;b++)l&&f[M(f,d,b)].push(new pc({shape:{cx:v,cy:y,r:m[b].coord}})),c&&b<m.length-1&&g[M(g,p,b)].push(new Oc({shape:{cx:v,cy:y,r0:m[b].coord,r:m[b+1].coord}}));else{var x,_=B(n,(function(t,n){var i=t.getTicksCoords();return x=null==x?i.length-1:Math.min(i.length-1,x),B(i,(function(t){return e.coordToPoint(t.coord,n)}))})),w=[];for(b=0;b<=x;b++){for(var S=[],C=0;C<n.length;C++)S.push(_[C][b]);S[0]&&S.push(S[0].slice()),l&&f[M(f,d,b)].push(new Rc({shape:{points:S}})),c&&w&&g[M(g,p,b-1)].push(new Pc({shape:{points:S.concat(w)}})),w=S.slice().reverse()}}var k=a.getLineStyle(),A=s.getAreaStyle();R(g,(function(t,e){this.group.add(Su(t,{style:E({stroke:"none",fill:p[e%p.length]},A),silent:!0}))}),this),R(f,(function(t,e){this.group.add(Su(t,{style:E({fill:"none",stroke:d[e%d.length]},k),silent:!0}))}),this)}function M(t,e,n){var i=n%e.length;return t[i]=t[i]||[],i}},e.type="radar",e}(hg),Sk=function(t){function e(e,n,i){var r=t.call(this,e,n,i)||this;return r.type="value",r.angle=0,r.name="",r}return n(e,t),e}(zx),Ck=function(){function t(t,e,n){this.dimensions=[],this._model=t,this._indicatorAxes=B(t.getIndicatorModels(),(function(t,e){var n="indicator_"+e,i=new Sk(n,new mb);return i.name=t.get("name"),i.model=t,t.axis=i,this.dimensions.push(n),i}),this),this.resize(t,n)}return t.prototype.getIndicatorAxes=function(){return this._indicatorAxes},t.prototype.dataToPoint=function(t,e){var n=this._indicatorAxes[e];return this.coordToPoint(n.dataToCoord(t),e)},t.prototype.coordToPoint=function(t,e){var n=this._indicatorAxes[e].angle;return[this.cx+t*Math.cos(n),this.cy-t*Math.sin(n)]},t.prototype.pointToData=function(t){var e=t[0]-this.cx,n=t[1]-this.cy,i=Math.sqrt(e*e+n*n);e/=i,n/=i;for(var r,o=Math.atan2(-n,e),a=1/0,s=-1,l=0;l<this._indicatorAxes.length;l++){var c=this._indicatorAxes[l],u=Math.abs(o-c.angle);u<a&&(r=c,s=l,a=u)}return[s,+(r&&r.coordToData(i))]},t.prototype.resize=function(t,e){var n=t.get("center"),i=e.getWidth(),r=e.getHeight(),o=Math.min(i,r)/2;this.cx=jr(n[0],i),this.cy=jr(n[1],r),this.startAngle=t.get("startAngle")*Math.PI/180;var a=t.get("radius");(G(a)||U(a))&&(a=[0,a]),this.r0=jr(a[0],o),this.r=jr(a[1],o),R(this._indicatorAxes,(function(t,e){t.setExtent(this.r0,this.r);var n=this.startAngle+e*Math.PI*2/this._indicatorAxes.length;n=Math.atan2(Math.sin(n),Math.cos(n)),t.angle=n}),this)},t.prototype.update=function(t,e){var n=this._indicatorAxes,i=this._model;R(n,(function(t){t.scale.setExtent(1/0,-1/0)})),t.eachSeriesByType("radar",(function(e,r){if("radar"===e.get("coordinateSystem")&&t.getComponent("radar",e.get("radarIndex"))===i){var o=e.getData();R(n,(function(t){t.scale.unionExtentFromData(o,o.mapDimension(t.dim))}))}}),this);var r=i.get("splitNumber"),o=new mb;o.setExtent(0,r),o.setInterval(1),R(n,(function(t,e){NC(t.scale,t.model,o)}))},t.prototype.convertToPixel=function(t,e,n){return console.warn("Not implemented."),null},t.prototype.convertFromPixel=function(t,e,n){return console.warn("Not implemented."),null},t.prototype.containPoint=function(t){return console.warn("Not implemented."),!1},t.create=function(e,n){var i=[];return e.eachComponent("radar",(function(r){var o=new t(r,e,n);i.push(o),r.coordinateSystem=o})),e.eachSeriesByType("radar",(function(t){"radar"===t.get("coordinateSystem")&&(t.coordinateSystem=i[t.get("radarIndex")||0])})),i},t.dimensions=[],t}();function kk(t){t.registerCoordinateSystem("radar",Ck),t.registerComponentModel(xk),t.registerComponentView(wk),t.registerVisual({seriesType:"radar",reset:function(t){var e=t.getData();e.each((function(t){e.setItemVisual(t,"legendIcon","roundRect")})),e.setVisual("legendIcon","roundRect")}})}var Ak="\0_ec_interaction_mutex";function Mk(t,e){return!!Tk(t)[e]}function Tk(t){return t[Ak]||(t[Ak]={})}cy({type:"takeGlobalCursor",event:"globalCursorTaken",update:"update"},_t);var Ik=function(t){function e(e){var n=t.call(this)||this;n._zr=e;var i=W(n._mousedownHandler,n),r=W(n._mousemoveHandler,n),o=W(n._mouseupHandler,n),a=W(n._mousewheelHandler,n),s=W(n._pinchHandler,n);return n.enable=function(t,n){this.disable(),this._opt=E(A(n)||{},{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),null==t&&(t=!0),!0!==t&&"move"!==t&&"pan"!==t||(e.on("mousedown",i),e.on("mousemove",r),e.on("mouseup",o)),!0!==t&&"scale"!==t&&"zoom"!==t||(e.on("mousewheel",a),e.on("pinch",s))},n.disable=function(){e.off("mousedown",i),e.off("mousemove",r),e.off("mouseup",o),e.off("mousewheel",a),e.off("pinch",s)},n}return n(e,t),e.prototype.isDragging=function(){return this._dragging},e.prototype.isPinching=function(){return this._pinching},e.prototype.setPointerChecker=function(t){this.pointerChecker=t},e.prototype.dispose=function(){this.disable()},e.prototype._mousedownHandler=function(t){if(!fe(t)){for(var e=t.target;e;){if(e.draggable)return;e=e.__hostTarget||e.parent}var n=t.offsetX,i=t.offsetY;this.pointerChecker&&this.pointerChecker(t,n,i)&&(this._x=n,this._y=i,this._dragging=!0)}},e.prototype._mousemoveHandler=function(t){if(this._dragging&&Dk("moveOnMouseMove",t,this._opt)&&"pinch"!==t.gestureEvent&&!Mk(this._zr,"globalPan")){var e=t.offsetX,n=t.offsetY,i=this._x,r=this._y,o=e-i,a=n-r;this._x=e,this._y=n,this._opt.preventDefaultMouseMove&&pe(t.event),Ok(this,"pan","moveOnMouseMove",t,{dx:o,dy:a,oldX:i,oldY:r,newX:e,newY:n,isAvailableBehavior:null})}},e.prototype._mouseupHandler=function(t){fe(t)||(this._dragging=!1)},e.prototype._mousewheelHandler=function(t){var e=Dk("zoomOnMouseWheel",t,this._opt),n=Dk("moveOnMouseWheel",t,this._opt),i=t.wheelDelta,r=Math.abs(i),o=t.offsetX,a=t.offsetY;if(0!==i&&(e||n)){if(e){var s=r>3?1.4:r>1?1.2:1.1;Ek(this,"zoom","zoomOnMouseWheel",t,{scale:i>0?s:1/s,originX:o,originY:a,isAvailableBehavior:null})}if(n){var l=Math.abs(i);Ek(this,"scrollMove","moveOnMouseWheel",t,{scrollDelta:(i>0?1:-1)*(l>3?.4:l>1?.15:.05),originX:o,originY:a,isAvailableBehavior:null})}}},e.prototype._pinchHandler=function(t){Mk(this._zr,"globalPan")||Ek(this,"zoom",null,t,{scale:t.pinchScale>1?1.1:1/1.1,originX:t.pinchX,originY:t.pinchY,isAvailableBehavior:null})},e}(Ut);function Ek(t,e,n,i,r){t.pointerChecker&&t.pointerChecker(i,r.originX,r.originY)&&(pe(i.event),Ok(t,e,n,i,r))}function Ok(t,e,n,i,r){r.isAvailableBehavior=W(Dk,null,n,i),t.trigger(e,r)}function Dk(t,e,n){var i=n[t];return!t||i&&(!G(i)||e.event[i+"Key"])}function Lk(t,e,n){var i=t.target;i.x+=e,i.y+=n,i.dirty()}function Pk(t,e,n,i){var r=t.target,o=t.zoomLimit,a=t.zoom=t.zoom||1;if(a*=e,o){var s=o.min||0,l=o.max||1/0;a=Math.max(Math.min(l,a),s)}var c=a/t.zoom;t.zoom=a,r.x-=(n-r.x)*(c-1),r.y-=(i-r.y)*(c-1),r.scaleX*=c,r.scaleY*=c,r.dirty()}var Nk,Rk={axisPointer:1,tooltip:1,brush:1};function Bk(t,e,n){var i=e.getComponentByElement(t.topTarget),r=i&&i.coordinateSystem;return i&&i!==n&&!Rk.hasOwnProperty(i.mainType)&&r&&r.model!==n}function zk(t){G(t)&&(t=(new DOMParser).parseFromString(t,"text/xml"));var e=t;for(9===e.nodeType&&(e=e.firstChild);"svg"!==e.nodeName.toLowerCase()||1!==e.nodeType;)e=e.nextSibling;return e}var Fk={fill:"fill",stroke:"stroke","stroke-width":"lineWidth",opacity:"opacity","fill-opacity":"fillOpacity","stroke-opacity":"strokeOpacity","stroke-dasharray":"lineDash","stroke-dashoffset":"lineDashOffset","stroke-linecap":"lineCap","stroke-linejoin":"lineJoin","stroke-miterlimit":"miterLimit","font-family":"fontFamily","font-size":"fontSize","font-style":"fontStyle","font-weight":"fontWeight","text-anchor":"textAlign",visibility:"visibility",display:"display"},Vk=H(Fk),Hk={"alignment-baseline":"textBaseline","stop-color":"stopColor"},Wk=H(Hk),jk=function(){function t(){this._defs={},this._root=null}return t.prototype.parse=function(t,e){e=e||{};var n=zk(t);this._defsUsePending=[];var i=new Dr;this._root=i;var r=[],o=n.getAttribute("viewBox")||"",a=parseFloat(n.getAttribute("width")||e.width),s=parseFloat(n.getAttribute("height")||e.height);isNaN(a)&&(a=null),isNaN(s)&&(s=null),$k(n,i,null,!0,!1);for(var l,c,u=n.firstChild;u;)this._parseNode(u,i,r,null,!1,!1),u=u.nextSibling;if(function(t,e){for(var n=0;n<e.length;n++){var i=e[n];i[0].style[i[1]]=t[i[2]]}}(this._defs,this._defsUsePending),this._defsUsePending=[],o){var h=Jk(o);h.length>=4&&(l={x:parseFloat(h[0]||0),y:parseFloat(h[1]||0),width:parseFloat(h[2]),height:parseFloat(h[3])})}if(l&&null!=a&&null!=s&&(c=rA(l,{x:0,y:0,width:a,height:s}),!e.ignoreViewBox)){var d=i;(i=new Dr).add(d),d.scaleX=d.scaleY=c.scale,d.x=c.x,d.y=c.y}return e.ignoreRootClip||null==a||null==s||i.setClipPath(new Ls({shape:{x:0,y:0,width:a,height:s}})),{root:i,width:a,height:s,viewBoxRect:l,viewBoxTransform:c,named:r}},t.prototype._parseNode=function(t,e,n,i,r,o){var a,s=t.nodeName.toLowerCase(),l=i;if("defs"===s&&(r=!0),"text"===s&&(o=!0),"defs"===s||"switch"===s)a=e;else{if(!r){var c=Nk[s];if(c&&xt(Nk,s)){a=c.call(this,t,e);var u=t.getAttribute("name");if(u){var h={name:u,namedFrom:null,svgNodeTagLower:s,el:a};n.push(h),"g"===s&&(l=h)}else i&&n.push({name:i.name,namedFrom:i,svgNodeTagLower:s,el:a});e.add(a)}}var d=Yk[s];if(d&&xt(Yk,s)){var p=d.call(this,t),f=t.getAttribute("id");f&&(this._defs[f]=p)}}if(a&&a.isGroup)for(var g=t.firstChild;g;)1===g.nodeType?this._parseNode(g,a,n,l,r,o):3===g.nodeType&&o&&this._parseText(g,a),g=g.nextSibling},t.prototype._parseText=function(t,e){var n=new Ss({style:{text:t.textContent},silent:!0,x:this._textX||0,y:this._textY||0});qk(e,n),$k(t,n,this._defsUsePending,!1,!1),function(t,e){var n=e.__selfStyle;if(n){var i=n.textBaseline,r=i;i&&"auto"!==i?"baseline"===i?r="alphabetic":"before-edge"===i||"text-before-edge"===i?r="top":"after-edge"===i||"text-after-edge"===i?r="bottom":"central"!==i&&"mathematical"!==i||(r="middle"):r="alphabetic",t.style.textBaseline=r}var o=e.__inheritedStyle;if(o){var a=o.textAlign,s=a;a&&("middle"===a&&(s="center"),t.style.textAlign=s)}}(n,e);var i=n.style,r=i.fontSize;r&&r<9&&(i.fontSize=9,n.scaleX*=r/9,n.scaleY*=r/9);var o=(i.fontSize||i.fontFamily)&&[i.fontStyle,i.fontWeight,(i.fontSize||12)+"px",i.fontFamily||"sans-serif"].join(" ");i.font=o;var a=n.getBoundingRect();return this._textX+=a.width,e.add(n),n},t.internalField=void(Nk={g:function(t,e){var n=new Dr;return qk(e,n),$k(t,n,this._defsUsePending,!1,!1),n},rect:function(t,e){var n=new Ls;return qk(e,n),$k(t,n,this._defsUsePending,!1,!1),n.setShape({x:parseFloat(t.getAttribute("x")||"0"),y:parseFloat(t.getAttribute("y")||"0"),width:parseFloat(t.getAttribute("width")||"0"),height:parseFloat(t.getAttribute("height")||"0")}),n.silent=!0,n},circle:function(t,e){var n=new pc;return qk(e,n),$k(t,n,this._defsUsePending,!1,!1),n.setShape({cx:parseFloat(t.getAttribute("cx")||"0"),cy:parseFloat(t.getAttribute("cy")||"0"),r:parseFloat(t.getAttribute("r")||"0")}),n.silent=!0,n},line:function(t,e){var n=new Fc;return qk(e,n),$k(t,n,this._defsUsePending,!1,!1),n.setShape({x1:parseFloat(t.getAttribute("x1")||"0"),y1:parseFloat(t.getAttribute("y1")||"0"),x2:parseFloat(t.getAttribute("x2")||"0"),y2:parseFloat(t.getAttribute("y2")||"0")}),n.silent=!0,n},ellipse:function(t,e){var n=new gc;return qk(e,n),$k(t,n,this._defsUsePending,!1,!1),n.setShape({cx:parseFloat(t.getAttribute("cx")||"0"),cy:parseFloat(t.getAttribute("cy")||"0"),rx:parseFloat(t.getAttribute("rx")||"0"),ry:parseFloat(t.getAttribute("ry")||"0")}),n.silent=!0,n},polygon:function(t,e){var n,i=t.getAttribute("points");i&&(n=Uk(i));var r=new Pc({shape:{points:n||[]},silent:!0});return qk(e,r),$k(t,r,this._defsUsePending,!1,!1),r},polyline:function(t,e){var n,i=t.getAttribute("points");i&&(n=Uk(i));var r=new Rc({shape:{points:n||[]},silent:!0});return qk(e,r),$k(t,r,this._defsUsePending,!1,!1),r},image:function(t,e){var n=new As;return qk(e,n),$k(t,n,this._defsUsePending,!1,!1),n.setStyle({image:t.getAttribute("xlink:href")||t.getAttribute("href"),x:+t.getAttribute("x"),y:+t.getAttribute("y"),width:+t.getAttribute("width"),height:+t.getAttribute("height")}),n.silent=!0,n},text:function(t,e){var n=t.getAttribute("x")||"0",i=t.getAttribute("y")||"0",r=t.getAttribute("dx")||"0",o=t.getAttribute("dy")||"0";this._textX=parseFloat(n)+parseFloat(r),this._textY=parseFloat(i)+parseFloat(o);var a=new Dr;return qk(e,a),$k(t,a,this._defsUsePending,!1,!0),a},tspan:function(t,e){var n=t.getAttribute("x"),i=t.getAttribute("y");null!=n&&(this._textX=parseFloat(n)),null!=i&&(this._textY=parseFloat(i));var r=t.getAttribute("dx")||"0",o=t.getAttribute("dy")||"0",a=new Dr;return qk(e,a),$k(t,a,this._defsUsePending,!1,!0),this._textX+=parseFloat(r),this._textY+=parseFloat(o),a},path:function(t,e){var n=uc(t.getAttribute("d")||"");return qk(e,n),$k(t,n,this._defsUsePending,!1,!1),n.silent=!0,n}}),t}(),Yk={lineargradient:function(t){var e=parseInt(t.getAttribute("x1")||"0",10),n=parseInt(t.getAttribute("y1")||"0",10),i=parseInt(t.getAttribute("x2")||"10",10),r=parseInt(t.getAttribute("y2")||"0",10),o=new Uc(e,n,i,r);return Xk(t,o),Gk(t,o),o},radialgradient:function(t){var e=parseInt(t.getAttribute("cx")||"0",10),n=parseInt(t.getAttribute("cy")||"0",10),i=parseInt(t.getAttribute("r")||"0",10),r=new $c(e,n,i);return Xk(t,r),Gk(t,r),r}};function Xk(t,e){"userSpaceOnUse"===t.getAttribute("gradientUnits")&&(e.global=!0)}function Gk(t,e){for(var n=t.firstChild;n;){if(1===n.nodeType&&"stop"===n.nodeName.toLocaleLowerCase()){var i,r=n.getAttribute("offset");i=r&&r.indexOf("%")>0?parseInt(r,10)/100:r?parseFloat(r):0;var o={};iA(n,o,o);var a=o.stopColor||n.getAttribute("stop-color")||"#000000";e.colorStops.push({offset:i,color:a})}n=n.nextSibling}}function qk(t,e){t&&t.__inheritedStyle&&(e.__inheritedStyle||(e.__inheritedStyle={}),E(e.__inheritedStyle,t.__inheritedStyle))}function Uk(t){for(var e=Jk(t),n=[],i=0;i<e.length;i+=2){var r=parseFloat(e[i]),o=parseFloat(e[i+1]);n.push([r,o])}return n}function $k(t,e,n,i,r){var o=e,a=o.__inheritedStyle=o.__inheritedStyle||{},s={};1===t.nodeType&&(function(t,e){var n=t.getAttribute("transform");if(n){n=n.replace(/,/g," ");var i=[],r=null;n.replace(tA,(function(t,e,n){return i.push(e,n),""}));for(var o=i.length-1;o>0;o-=2){var a=i[o],s=i[o-1],l=Jk(a);switch(r=r||[1,0,0,1,0,0],s){case"translate":_e(r,r,[parseFloat(l[0]),parseFloat(l[1]||"0")]);break;case"scale":Se(r,r,[parseFloat(l[0]),parseFloat(l[1]||l[0])]);break;case"rotate":we(r,r,-parseFloat(l[0])*eA,[parseFloat(l[1]||"0"),parseFloat(l[2]||"0")]);break;case"skewX":xe(r,[1,0,Math.tan(parseFloat(l[0])*eA),1,0,0],r);break;case"skewY":xe(r,[1,Math.tan(parseFloat(l[0])*eA),0,1,0,0],r);break;case"matrix":r[0]=parseFloat(l[0]),r[1]=parseFloat(l[1]),r[2]=parseFloat(l[2]),r[3]=parseFloat(l[3]),r[4]=parseFloat(l[4]),r[5]=parseFloat(l[5])}}e.setLocalTransform(r)}}(t,e),iA(t,a,s),i||function(t,e,n){for(var i=0;i<Vk.length;i++){var r=Vk[i];null!=(o=t.getAttribute(r))&&(e[Fk[r]]=o)}for(i=0;i<Wk.length;i++){var o;r=Wk[i],null!=(o=t.getAttribute(r))&&(n[Hk[r]]=o)}}(t,a,s)),o.style=o.style||{},null!=a.fill&&(o.style.fill=Kk(o,"fill",a.fill,n)),null!=a.stroke&&(o.style.stroke=Kk(o,"stroke",a.stroke,n)),R(["lineWidth","opacity","fillOpacity","strokeOpacity","miterLimit","fontSize"],(function(t){null!=a[t]&&(o.style[t]=parseFloat(a[t]))})),R(["lineDashOffset","lineCap","lineJoin","fontWeight","fontFamily","fontStyle","textAlign"],(function(t){null!=a[t]&&(o.style[t]=a[t])})),r&&(o.__selfStyle=s),a.lineDash&&(o.style.lineDash=B(Jk(a.lineDash),(function(t){return parseFloat(t)}))),"hidden"!==a.visibility&&"collapse"!==a.visibility||(o.invisible=!0),"none"===a.display&&(o.ignore=!0)}var Zk=/^url\(\s*#(.*?)\)/;function Kk(t,e,n,i){var r=n&&n.match(Zk);if(!r)return"none"===n&&(n=null),n;var o=ct(r[1]);i.push([t,e,o])}var Qk=/-?([0-9]*\.)?[0-9]+([eE]-?[0-9]+)?/g;function Jk(t){return t.match(Qk)||[]}var tA=/(translate|scale|rotate|skewX|skewY|matrix)\(([\-\s0-9\.eE,]*)\)/g,eA=Math.PI/180,nA=/([^\s:;]+)\s*:\s*([^:;]+)/g;function iA(t,e,n){var i,r=t.getAttribute("style");if(r)for(nA.lastIndex=0;null!=(i=nA.exec(r));){var o=i[1],a=xt(Fk,o)?Fk[o]:null;a&&(e[a]=i[2]);var s=xt(Hk,o)?Hk[o]:null;s&&(n[s]=i[2])}}function rA(t,e){var n=e.width/t.width,i=e.height/t.height,r=Math.min(n,i);return{scale:r,x:-(t.x+t.width/2)*r+(e.x+e.width/2),y:-(t.y+t.height/2)*r+(e.y+e.height/2)}}for(var oA=mt(["rect","circle","line","ellipse","polygon","polyline","path","text","tspan","g"]),aA=function(){function t(t,e){this.type="geoSVG",this._usedGraphicMap=mt(),this._freedGraphics=[],this._mapName=t,this._parsedXML=zk(e)}return t.prototype.load=function(){var t=this._firstGraphic;if(!t){t=this._firstGraphic=this._buildGraphic(this._parsedXML),this._freedGraphics.push(t),this._boundingRect=this._firstGraphic.boundingRect.clone();var e=function(t){var e=[],n=mt();return R(t,(function(t){if(null==t.namedFrom){var i=new xx(t.name,t.el);e.push(i),n.set(t.name,i)}})),{regions:e,regionsMap:n}}(t.named),n=e.regions,i=e.regionsMap;this._regions=n,this._regionsMap=i}return{boundingRect:this._boundingRect,regions:this._regions,regionsMap:this._regionsMap}},t.prototype._buildGraphic=function(t){var e,n,i,r;try{lt(null!=(n=(e=t&&(i=t,r={ignoreViewBox:!0,ignoreRootClip:!0},(new jk).parse(i,r))||{}).root))}catch(t){throw new Error("Invalid svg format\n"+t.message)}var o=new Dr;o.add(n),o.isGeoSVGGraphicRoot=!0;var a=e.width,s=e.height,l=e.viewBoxRect,c=this._boundingRect;if(!c){var u=void 0,h=void 0,d=void 0,p=void 0;if(null!=a?(u=0,d=a):l&&(u=l.x,d=l.width),null!=s?(h=0,p=s):l&&(h=l.y,p=l.height),null==u||null==h){var f=n.getBoundingRect();null==u&&(u=f.x,d=f.width),null==h&&(h=f.y,p=f.height)}c=this._boundingRect=new Re(u,h,d,p)}if(l){var g=rA(l,c);n.scaleX=n.scaleY=g.scale,n.x=g.x,n.y=g.y}o.setClipPath(new Ls({shape:c.plain()}));var m=[];return R(e.named,(function(t){var e;null!=oA.get(t.svgNodeTagLower)&&(m.push(t),(e=t.el).silent=!1,e.isGroup&&e.traverse((function(t){t.silent=!1})))})),{root:o,boundingRect:c,named:m}},t.prototype.useGraphic=function(t){var e=this._usedGraphicMap,n=e.get(t);return n||(n=this._freedGraphics.pop()||this._buildGraphic(this._parsedXML),e.set(t,n),n)},t.prototype.freeGraphic=function(t){var e=this._usedGraphicMap,n=e.get(t);n&&(e.removeKey(t),this._freedGraphics.push(n))},t}(),sA=[126,25],lA="",cA=[[[0,3.5],[7,11.2],[15,11.9],[30,7],[42,.7],[52,.7],[56,7.7],[59,.7],[64,.7],[64,0],[5,0],[0,3.5]],[[13,16.1],[19,14.7],[16,21.7],[11,23.1],[13,16.1]],[[12,32.2],[14,38.5],[15,38.5],[13,32.2],[12,32.2]],[[16,47.6],[12,53.2],[13,53.2],[18,47.6],[16,47.6]],[[6,64.4],[8,70],[9,70],[8,64.4],[6,64.4]],[[23,82.6],[29,79.8],[30,79.8],[25,82.6],[23,82.6]],[[37,70.7],[43,62.3],[44,62.3],[39,70.7],[37,70.7]],[[48,51.1],[51,45.5],[53,45.5],[50,51.1],[48,51.1]],[[51,35],[51,28.7],[53,28.7],[53,35],[51,35]],[[52,22.4],[55,17.5],[56,17.5],[53,22.4],[52,22.4]],[[58,12.6],[62,7],[63,7],[60,12.6],[58,12.6]],[[0,3.5],[0,93.1],[64,93.1],[64,0],[63,0],[63,92.4],[1,92.4],[1,3.5],[0,3.5]]],uA=0;uA<cA.length;uA++)for(var hA=0;hA<cA[uA].length;hA++)cA[uA][hA][0]/=10.5,cA[uA][hA][1]/=-14,cA[uA][hA][0]+=sA[0],cA[uA][hA][1]+=sA[1];var dA={"":[32,80],"":[0,-10],"":[10,5],"":[-10,10],"":[5,5]},pA=[[[123.45165252685547,25.73527164402261],[123.49731445312499,25.73527164402261],[123.49731445312499,25.750734064600884],[123.45165252685547,25.750734064600884],[123.45165252685547,25.73527164402261]]],fA=function(){function t(t,e,n){var i;this.type="geoJSON",this._parsedMap=mt(),this._mapName=t,this._specialAreas=n,this._geoJSON=G(i=e)?"undefined"!=typeof JSON&&JSON.parse?JSON.parse(i):new Function("return ("+i+");")():i}return t.prototype.load=function(t,e){e=e||"name";var n=this._parsedMap.get(e);if(!n){var i=this._parseToRegions(e);n=this._parsedMap.set(e,{regions:i,boundingRect:gA(i)})}var r=mt(),o=[];return R(n.regions,(function(e){var n=e.name;t&&xt(t,n)&&(e=e.cloneShallow(n=t[n])),o.push(e),r.set(n,e)})),{regions:o,boundingRect:n.boundingRect||new Re(0,0,0,0),regionsMap:r}},t.prototype._parseToRegions=function(t){var e,n=this._mapName,i=this._geoJSON;try{e=i?Cx(i,t):[]}catch(t){throw new Error("Invalid geoJson format\n"+t.message)}return function(t,e){if("china"===t){for(var n=0;n<e.length;n++)if(e[n].name===lA)return;e.push(new bx(lA,B(cA,(function(t){return{type:"polygon",exterior:t}})),sA))}}(n,e),R(e,(function(t){var e=t.name;!function(t,e){if("china"===t){var n=dA[e.name];if(n){var i=e.getCenter();i[0]+=n[0]/10.5,i[1]+=-n[1]/14,e.setCenter(i)}}}(n,t),function(t,e){"china"===t&&""===e.name&&e.geometries.push({type:"polygon",exterior:pA[0]})}(n,t);var i=this._specialAreas&&this._specialAreas[e];i&&t.transformTo(i.left,i.top,i.width,i.height)}),this),e},t.prototype.getMapForUser=function(){return{geoJson:this._geoJSON,geoJSON:this._geoJSON,specialAreas:this._specialAreas}},t}();function gA(t){for(var e,n=0;n<t.length;n++){var i=t[n].getBoundingRect();(e=e||i.clone()).union(i)}return e}var mA=mt(),vA=function(t){return mA.get(t)},yA=function(t,e,n){var i=mA.get(t);if(i)return i.load(e,n)},bA=["rect","circle","line","ellipse","polygon","polyline","path"],xA=mt(bA),_A=mt(bA.concat(["g"])),wA=mt(bA.concat(["g"])),SA=Io();function CA(t){var e=t.getItemStyle(),n=t.get("areaColor");return null!=n&&(e.fill=n),e}function kA(t){var e=t.style;e&&(e.stroke=e.stroke||e.fill,e.fill=null)}var AA=function(){function t(t){var e=new Dr;this.uid=vh("ec_map_draw"),this._controller=new Ik(t.getZr()),this._controllerHost={target:e},this.group=e,e.add(this._regionsGroup=new Dr),e.add(this._svgGroup=new Dr)}return t.prototype.draw=function(t,e,n,i,r){var o="geo"===t.mainType,a=t.getData&&t.getData();o&&e.eachComponent({mainType:"series",subType:"map"},(function(e){a||e.getHostGeoModel()!==t||(a=e.getData())}));var s=t.coordinateSystem,l=this._regionsGroup,c=this.group,u=s.getTransformInfo(),h=u.raw,d=u.roam;!l.childAt(0)||r?(c.x=d.x,c.y=d.y,c.scaleX=d.scaleX,c.scaleY=d.scaleY,c.dirty()):au(c,d,t);var p=a&&a.getVisual("visualMeta")&&a.getVisual("visualMeta").length>0,f={api:n,geo:s,mapOrGeoModel:t,data:a,isVisualEncodedByVisualMap:p,isGeo:o,transformInfoRaw:h};"geoJSON"===s.resourceType?this._buildGeoJSON(f):"geoSVG"===s.resourceType&&this._buildSVG(f),this._updateController(t,e,n),this._updateMapSelectHandler(t,l,n,i)},t.prototype._buildGeoJSON=function(t){var e=this._regionsGroupByName=mt(),n=mt(),i=this._regionsGroup,r=t.transformInfoRaw,o=t.mapOrGeoModel,a=t.data,s=t.geo.projection,l=s&&s.stream;function c(t,e){return e&&(t=e(t)),t&&[t[0]*r.scaleX+r.x,t[1]*r.scaleY+r.y]}function u(t){for(var e=[],n=!l&&s&&s.project,i=0;i<t.length;++i){var r=c(t[i],n);r&&e.push(r)}return e}function h(t){return{shape:{points:u(t)}}}i.removeAll(),R(t.geo.regions,(function(r){var u=r.name,d=e.get(u),p=n.get(u)||{},f=p.dataIdx,g=p.regionModel;d||(d=e.set(u,new Dr),i.add(d),f=a?a.indexOfName(u):null,g=t.isGeo?o.getRegionModel(u):a?a.getItemModel(f):null,n.set(u,{dataIdx:f,regionModel:g}));var m=[],v=[];R(r.geometries,(function(t){if("polygon"===t.type){var e=[t.exterior].concat(t.interiors||[]);l&&(e=DA(e,l)),R(e,(function(t){m.push(new Pc(h(t)))}))}else{var n=t.points;l&&(n=DA(n,l,!0)),R(n,(function(t){v.push(new Rc(h(t)))}))}}));var y=c(r.getCenter(),s&&s.project);function b(e,n){if(e.length){var i=new Gc({culling:!0,segmentIgnoreThreshold:1,shape:{paths:e}});d.add(i),MA(t,i,f,g),TA(t,i,u,g,o,f,y),n&&(kA(i),R(i.states,kA))}}b(m),b(v,!0)})),e.each((function(e,i){var r=n.get(i),a=r.dataIdx,s=r.regionModel;IA(t,e,i,s,o,a),EA(t,e,i,s,o),OA(t,e,i,s,o)}),this)},t.prototype._buildSVG=function(t){var e=t.geo.map,n=t.transformInfoRaw;this._svgGroup.x=n.x,this._svgGroup.y=n.y,this._svgGroup.scaleX=n.scaleX,this._svgGroup.scaleY=n.scaleY,this._svgResourceChanged(e)&&(this._freeSVG(),this._useSVG(e));var i=this._svgDispatcherMap=mt(),r=!1;R(this._svgGraphicRecord.named,(function(e){var n=e.name,o=t.mapOrGeoModel,a=t.data,s=e.svgNodeTagLower,l=e.el,c=a?a.indexOfName(n):null,u=o.getRegionModel(n);null!=xA.get(s)&&l instanceof ba&&MA(t,l,c,u),l instanceof ba&&(l.culling=!0),l.z2EmphasisLift=0,e.namedFrom||(null!=wA.get(s)&&TA(t,l,n,u,o,c,null),IA(t,l,n,u,o,c),EA(t,l,n,u,o),null!=_A.get(s)&&("self"===OA(t,l,n,u,o)&&(r=!0),(i.get(n)||i.set(n,[])).push(l)))}),this),this._enableBlurEntireSVG(r,t)},t.prototype._enableBlurEntireSVG=function(t,e){if(t&&e.isGeo){var n=e.mapOrGeoModel.getModel(["blur","itemStyle"]).getItemStyle().opacity;this._svgGraphicRecord.root.traverse((function(t){if(!t.isGroup){xl(t);var e=t.ensureState("blur").style||{};null==e.opacity&&null!=n&&(e.opacity=n),t.ensureState("emphasis")}}))}},t.prototype.remove=function(){this._regionsGroup.removeAll(),this._regionsGroupByName=null,this._svgGroup.removeAll(),this._freeSVG(),this._controller.dispose(),this._controllerHost=null},t.prototype.findHighDownDispatchers=function(t,e){if(null==t)return[];var n=e.coordinateSystem;if("geoJSON"===n.resourceType){var i=this._regionsGroupByName;if(i){var r=i.get(t);return r?[r]:[]}}else if("geoSVG"===n.resourceType)return this._svgDispatcherMap&&this._svgDispatcherMap.get(t)||[]},t.prototype._svgResourceChanged=function(t){return this._svgMapName!==t},t.prototype._useSVG=function(t){var e=vA(t);if(e&&"geoSVG"===e.type){var n=e.useGraphic(this.uid);this._svgGroup.add(n.root),this._svgGraphicRecord=n,this._svgMapName=t}},t.prototype._freeSVG=function(){var t=this._svgMapName;if(null!=t){var e=vA(t);e&&"geoSVG"===e.type&&e.freeGraphic(this.uid),this._svgGraphicRecord=null,this._svgDispatcherMap=null,this._svgGroup.removeAll(),this._svgMapName=null}},t.prototype._updateController=function(t,e,n){var i=t.coordinateSystem,r=this._controller,o=this._controllerHost;o.zoomLimit=t.get("scaleLimit"),o.zoom=i.getZoom(),r.enable(t.get("roam")||!1);var a=t.mainType;function s(){var e={type:"geoRoam",componentType:a};return e[a+"Id"]=t.id,e}r.off("pan").on("pan",(function(t){this._mouseDownFlag=!1,Lk(o,t.dx,t.dy),n.dispatchAction(I(s(),{dx:t.dx,dy:t.dy,animation:{duration:0}}))}),this),r.off("zoom").on("zoom",(function(t){this._mouseDownFlag=!1,Pk(o,t.scale,t.originX,t.originY),n.dispatchAction(I(s(),{zoom:t.scale,originX:t.originX,originY:t.originY,animation:{duration:0}}))}),this),r.setPointerChecker((function(e,r,o){return i.containPoint([r,o])&&!Bk(e,n,t)}))},t.prototype.resetForLabelLayout=function(){this.group.traverse((function(t){var e=t.getTextContent();e&&(e.ignore=SA(e).ignore)}))},t.prototype._updateMapSelectHandler=function(t,e,n,i){var r=this;e.off("mousedown"),e.off("click"),t.get("selectedMode")&&(e.on("mousedown",(function(){r._mouseDownFlag=!0})),e.on("click",(function(t){r._mouseDownFlag&&(r._mouseDownFlag=!1)})))},t}();function MA(t,e,n,i){var r=i.getModel("itemStyle"),o=i.getModel(["emphasis","itemStyle"]),a=i.getModel(["blur","itemStyle"]),s=i.getModel(["select","itemStyle"]),l=CA(r),c=CA(o),u=CA(s),h=CA(a),d=t.data;if(d){var p=d.getItemVisual(n,"style"),f=d.getItemVisual(n,"decal");t.isVisualEncodedByVisualMap&&p.fill&&(l.fill=p.fill),f&&(l.decal=tv(f,t.api))}e.setStyle(l),e.style.strokeNoScale=!0,e.ensureState("emphasis").style=c,e.ensureState("select").style=u,e.ensureState("blur").style=h,xl(e)}function TA(t,e,n,i,r,o,a){var s=t.data,l=t.isGeo,c=s&&isNaN(s.get(s.mapDimension("value"),o)),u=s&&s.getItemLayout(o);if(l||c||u&&u.showLabel){var h=l?n:o,d=void 0;(!s||o>=0)&&(d=r);var p=a?{normal:{align:"center",verticalAlign:"middle"}}:null;Xu(e,Gu(i),{labelFetcher:d,labelDataIndex:h,defaultText:n},p);var f=e.getTextContent();if(f&&(SA(f).ignore=f.ignore,e.textConfig&&a)){var g=e.getBoundingRect().clone();e.textConfig.layoutRect=g,e.textConfig.position=[(a[0]-g.x)/g.width*100+"%",(a[1]-g.y)/g.height*100+"%"]}e.disableLabelAnimation=!0}else e.removeTextContent(),e.removeTextConfig(),e.disableLabelAnimation=null}function IA(t,e,n,i,r,o){t.data?t.data.setItemGraphicEl(o,e):$s(e).eventData={componentType:"geo",componentIndex:r.componentIndex,geoIndex:r.componentIndex,name:n,region:i&&i.option||{}}}function EA(t,e,n,i,r){t.data||zu({el:e,componentModel:r,itemName:n,itemTooltipOption:i.get("tooltip")})}function OA(t,e,n,i,r){e.highDownSilentOnTouch=!!r.get("selectedMode");var o=i.getModel("emphasis"),a=o.get("focus");return Bl(e,a,o.get("blurScope"),o.get("disabled")),t.isGeo&&function(t,e,n){var i=$s(t);i.componentMainType=e.mainType,i.componentIndex=e.componentIndex,i.componentHighDownName=n}(e,r,n),a}function DA(t,e,n){var i,r=[];function o(){i=[]}function a(){i.length&&(r.push(i),i=[])}var s=e({polygonStart:o,polygonEnd:a,lineStart:o,lineEnd:a,point:function(t,e){isFinite(t)&&isFinite(e)&&i.push([t,e])},sphere:function(){}});return!n&&s.polygonStart(),R(t,(function(t){s.lineStart();for(var e=0;e<t.length;e++)s.point(t[e][0],t[e][1]);s.lineEnd()})),!n&&s.polygonEnd(),r}var LA=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.prototype.render=function(t,e,n,i){if(!i||"mapToggleSelect"!==i.type||i.from!==this.uid){var r=this.group;if(r.removeAll(),!t.getHostGeoModel()){if(this._mapDraw&&i&&"geoRoam"===i.type&&this._mapDraw.resetForLabelLayout(),i&&"geoRoam"===i.type&&"series"===i.componentType&&i.seriesId===t.id)(o=this._mapDraw)&&r.add(o.group);else if(t.needsDrawMap){var o=this._mapDraw||new AA(n);r.add(o.group),o.draw(t,e,n,this,i),this._mapDraw=o}else this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null;t.get("showLegendSymbol")&&e.getComponent("legend")&&this._renderSymbols(t,e,n)}}},e.prototype.remove=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null,this.group.removeAll()},e.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove(),this._mapDraw=null},e.prototype._renderSymbols=function(t,e,n){var i=t.originalData,r=this.group;i.each(i.mapDimension("value"),(function(e,n){if(!isNaN(e)){var o=i.getItemLayout(n);if(o&&o.point){var a=o.point,s=o.offset,l=new pc({style:{fill:t.getData().getVisual("style").fill},shape:{cx:a[0]+9*s,cy:a[1],r:3},silent:!0,z2:8+(s?0:11)});if(!s){var c=t.mainSeries.getData(),u=i.getName(n),h=c.indexOfName(u),d=i.getItemModel(n),p=d.getModel("label"),f=c.getItemGraphicEl(h);Xu(l,Gu(d),{labelFetcher:{getFormattedLabel:function(e,n){return t.getFormattedLabel(h,n)}},defaultText:u}),l.disableLabelAnimation=!0,p.get("position")||l.setTextConfig({position:"bottom"}),f.onHoverStateChange=function(t){yl(l,t)}}r.add(l)}}}))},e.type="map",e}(gg),PA=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.needsDrawMap=!1,n.seriesGroup=[],n.getTooltipPosition=function(t){if(null!=t){var e=this.getData().getName(t),n=this.coordinateSystem,i=n.getRegion(e);return i&&n.dataToPoint(i.getCenter())}},n}return n(e,t),e.prototype.getInitialData=function(t){for(var e=lC(this,{coordDimensions:["value"],encodeDefaulter:j(zd,this)}),n=mt(),i=[],r=0,o=e.count();r<o;r++){var a=e.getName(r);n.set(a,!0)}return R(yA(this.getMapType(),this.option.nameMap,this.option.nameProperty).regions,(function(t){var e=t.name;n.get(e)||i.push(e)})),e.appendValues([],i),e},e.prototype.getHostGeoModel=function(){var t=this.option.geoIndex;return null!=t?this.ecModel.getComponent("geo",t):null},e.prototype.getMapType=function(){return(this.getHostGeoModel()||this).option.map},e.prototype.getRawValue=function(t){var e=this.getData();return e.get(e.mapDimension("value"),t)},e.prototype.getRegionModel=function(t){var e=this.getData();return e.getItemModel(e.indexOfName(t))},e.prototype.formatTooltip=function(t,e,n){for(var i=this.getData(),r=this.getRawValue(t),o=i.getName(t),a=this.seriesGroup,s=[],l=0;l<a.length;l++){var c=a[l].originalData.indexOfName(o),u=i.mapDimension("value");isNaN(a[l].originalData.get(u,c))||s.push(a[l].name)}return Hf("section",{header:s.join(", "),noHeader:!s.length,blocks:[Hf("nameValue",{name:o,value:r})]})},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.getLegendIcon=function(t){var e=t.icon||"roundRect",n=Mm(e,0,0,t.itemWidth,t.itemHeight,t.itemStyle.fill);return n.setStyle(t.itemStyle),n.style.stroke="none",e.indexOf("empty")>-1&&(n.style.stroke=n.style.fill,n.style.fill="#fff",n.style.lineWidth=2),n},e.type="series.map",e.dependencies=["geo"],e.layoutMode="box",e.defaultOption={z:2,coordinateSystem:"geo",map:"",left:"center",top:"center",aspectScale:null,showLegendSymbol:!0,boundingCoords:null,center:null,zoom:1,scaleLimit:null,selectedMode:!0,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444",areaColor:"#eee"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{areaColor:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},nameProperty:"name"},e}(ig);function NA(t){var e={};t.eachSeriesByType("map",(function(t){var n=t.getHostGeoModel(),i=n?"o"+n.id:"i"+t.getMapType();(e[i]=e[i]||[]).push(t)})),R(e,(function(t,e){for(var n,i,r,o=(n=B(t,(function(t){return t.getData()})),i=t[0].get("mapValueCalculation"),r={},R(n,(function(t){t.each(t.mapDimension("value"),(function(e,n){var i="ec-"+t.getName(n);r[i]=r[i]||[],isNaN(e)||r[i].push(e)}))})),n[0].map(n[0].mapDimension("value"),(function(t,e){for(var o="ec-"+n[0].getName(e),a=0,s=1/0,l=-1/0,c=r[o].length,u=0;u<c;u++)s=Math.min(s,r[o][u]),l=Math.max(l,r[o][u]),a+=r[o][u];return 0===c?NaN:"min"===i?s:"max"===i?l:"average"===i?a/c:a}))),a=0;a<t.length;a++)t[a].originalData=t[a].getData();for(a=0;a<t.length;a++)t[a].seriesGroup=t,t[a].needsDrawMap=0===a&&!t[a].getHostGeoModel(),t[a].setData(o.cloneShallow()),t[a].mainSeries=t[0]}))}function RA(t){var e={};t.eachSeriesByType("map",(function(n){var i=n.getMapType();if(!n.getHostGeoModel()&&!e[i]){var r={};R(n.seriesGroup,(function(e){var n=e.coordinateSystem,i=e.originalData;e.get("showLegendSymbol")&&t.getComponent("legend")&&i.each(i.mapDimension("value"),(function(t,e){var o=i.getName(e),a=n.getRegion(o);if(a&&!isNaN(t)){var s=r[o]||0,l=n.dataToPoint(a.getCenter());r[o]=s+1,i.setItemLayout(e,{point:l,offset:s})}}))}));var o=n.getData();o.each((function(t){var e=o.getName(t),n=o.getItemLayout(t)||{};n.showLabel=!r[e],o.setItemLayout(t,n)})),e[i]=!0}}))}var BA=Wt,zA=function(t){function e(e){var n=t.call(this)||this;return n.type="view",n.dimensions=["x","y"],n._roamTransformable=new ur,n._rawTransformable=new ur,n.name=e,n}return n(e,t),e.prototype.setBoundingRect=function(t,e,n,i){return this._rect=new Re(t,e,n,i),this._rect},e.prototype.getBoundingRect=function(){return this._rect},e.prototype.setViewRect=function(t,e,n,i){this._transformTo(t,e,n,i),this._viewRect=new Re(t,e,n,i)},e.prototype._transformTo=function(t,e,n,i){var r=this.getBoundingRect(),o=this._rawTransformable;o.transform=r.calculateTransform(new Re(t,e,n,i));var a=o.parent;o.parent=null,o.decomposeTransform(),o.parent=a,this._updateTransform()},e.prototype.setCenter=function(t,e){t&&(this._center=[jr(t[0],e.getWidth()),jr(t[1],e.getHeight())],this._updateCenterAndZoom())},e.prototype.setZoom=function(t){t=t||1;var e=this.zoomLimit;e&&(null!=e.max&&(t=Math.min(e.max,t)),null!=e.min&&(t=Math.max(e.min,t))),this._zoom=t,this._updateCenterAndZoom()},e.prototype.getDefaultCenter=function(){var t=this.getBoundingRect();return[t.x+t.width/2,t.y+t.height/2]},e.prototype.getCenter=function(){return this._center||this.getDefaultCenter()},e.prototype.getZoom=function(){return this._zoom||1},e.prototype.getRoamTransform=function(){return this._roamTransformable.getLocalTransform()},e.prototype._updateCenterAndZoom=function(){var t=this._rawTransformable.getLocalTransform(),e=this._roamTransformable,n=this.getDefaultCenter(),i=this.getCenter(),r=this.getZoom();i=Wt([],i,t),n=Wt([],n,t),e.originX=i[0],e.originY=i[1],e.x=n[0]-i[0],e.y=n[1]-i[1],e.scaleX=e.scaleY=r,this._updateTransform()},e.prototype._updateTransform=function(){var t=this._roamTransformable,e=this._rawTransformable;e.parent=t,t.updateTransform(),e.updateTransform(),be(this.transform||(this.transform=[]),e.transform||[1,0,0,1,0,0]),this._rawTransform=e.getLocalTransform(),this.invTransform=this.invTransform||[],Ce(this.invTransform,this.transform),this.decomposeTransform()},e.prototype.getTransformInfo=function(){var t=this._rawTransformable,e=this._roamTransformable,n=new ur;return n.transform=e.transform,n.decomposeTransform(),{roam:{x:n.x,y:n.y,scaleX:n.scaleX,scaleY:n.scaleY},raw:{x:t.x,y:t.y,scaleX:t.scaleX,scaleY:t.scaleY}}},e.prototype.getViewRect=function(){return this._viewRect},e.prototype.getViewRectAfterRoam=function(){var t=this.getBoundingRect().clone();return t.applyTransform(this.transform),t},e.prototype.dataToPoint=function(t,e,n){var i=e?this._rawTransform:this.transform;return n=n||[],i?BA(n,t,i):kt(n,t)},e.prototype.pointToData=function(t){var e=this.invTransform;return e?BA([],t,e):[t[0],t[1]]},e.prototype.convertToPixel=function(t,e,n){var i=FA(e);return i===this?i.dataToPoint(n):null},e.prototype.convertFromPixel=function(t,e,n){var i=FA(e);return i===this?i.pointToData(n):null},e.prototype.containPoint=function(t){return this.getViewRectAfterRoam().contain(t[0],t[1])},e.dimensions=["x","y"],e}(ur);function FA(t){var e=t.seriesModel;return e?e.coordinateSystem:null}var VA={geoJSON:{aspectScale:.75,invertLongitute:!0},geoSVG:{aspectScale:1,invertLongitute:!1}},HA=["lng","lat"],WA=function(t){function e(e,n,i){var r=t.call(this,e)||this;r.dimensions=HA,r.type="geo",r._nameCoordMap=mt(),r.map=n;var o,a=i.projection,s=yA(n,i.nameMap,i.nameProperty),l=vA(n),c=(r.resourceType=l?l.type:null,r.regions=s.regions),u=VA[l.type];if(r._regionsMap=s.regionsMap,r.regions=s.regions,r.projection=a,a)for(var h=0;h<c.length;h++){var d=c[h].getBoundingRect(a);(o=o||d.clone()).union(d)}else o=s.boundingRect;return r.setBoundingRect(o.x,o.y,o.width,o.height),r.aspectScale=a?1:rt(i.aspectScale,u.aspectScale),r._invertLongitute=!a&&u.invertLongitute,r}return n(e,t),e.prototype._transformTo=function(t,e,n,i){var r=this.getBoundingRect(),o=this._invertLongitute;r=r.clone(),o&&(r.y=-r.y-r.height);var a=this._rawTransformable;a.transform=r.calculateTransform(new Re(t,e,n,i));var s=a.parent;a.parent=null,a.decomposeTransform(),a.parent=s,o&&(a.scaleY=-a.scaleY),this._updateTransform()},e.prototype.getRegion=function(t){return this._regionsMap.get(t)},e.prototype.getRegionByCoord=function(t){for(var e=this.regions,n=0;n<e.length;n++){var i=e[n];if("geoJSON"===i.type&&i.contain(t))return e[n]}},e.prototype.addGeoCoord=function(t,e){this._nameCoordMap.set(t,e)},e.prototype.getGeoCoord=function(t){var e=this._regionsMap.get(t);return this._nameCoordMap.get(t)||e&&e.getCenter()},e.prototype.dataToPoint=function(t,e,n){if(G(t)&&(t=this.getGeoCoord(t)),t){var i=this.projection;return i&&(t=i.project(t)),t&&this.projectedToPoint(t,e,n)}},e.prototype.pointToData=function(t){var e=this.projection;return e&&(t=e.unproject(t)),t&&this.pointToProjected(t)},e.prototype.pointToProjected=function(e){return t.prototype.pointToData.call(this,e)},e.prototype.projectedToPoint=function(e,n,i){return t.prototype.dataToPoint.call(this,e,n,i)},e.prototype.convertToPixel=function(t,e,n){var i=jA(e);return i===this?i.dataToPoint(n):null},e.prototype.convertFromPixel=function(t,e,n){var i=jA(e);return i===this?i.pointToData(n):null},e}(zA);function jA(t){var e=t.geoModel,n=t.seriesModel;return e?e.coordinateSystem:n?n.coordinateSystem||(n.getReferringComponents("geo",Lo).models[0]||{}).coordinateSystem:null}function YA(t,e){var n=t.get("boundingCoords");if(null!=n){var i=n[0],r=n[1];if(isFinite(i[0])&&isFinite(i[1])&&isFinite(r[0])&&isFinite(r[1])){var o=this.projection;if(o){var a=i[0],s=i[1],l=r[0],c=r[1];i=[1/0,1/0],r=[-1/0,-1/0];var u=function(t,e,n,a){for(var s=n-t,l=a-e,c=0;c<=100;c++){var u=c/100,h=o.project([t+s*u,e+l*u]);jt(i,i,h),Yt(r,r,h)}};u(a,s,l,s),u(l,s,l,c),u(l,c,a,c),u(a,c,l,s)}this.setBoundingRect(i[0],i[1],r[0]-i[0],r[1]-i[1])}}var h,d,p,f=this.getBoundingRect(),g=t.get("layoutCenter"),m=t.get("layoutSize"),v=e.getWidth(),y=e.getHeight(),b=f.width/f.height*this.aspectScale,x=!1;if(g&&m&&(h=[jr(g[0],v),jr(g[1],y)],d=jr(m,Math.min(v,y)),isNaN(h[0])||isNaN(h[1])||isNaN(d)||(x=!0)),x)p={},b>1?(p.width=d,p.height=d/b):(p.height=d,p.width=d*b),p.y=h[1]-p.height/2,p.x=h[0]-p.width/2;else{var _=t.getBoxLayoutParams();_.aspect=b,p=md(_,{width:v,height:y})}this.setViewRect(p.x,p.y,p.width,p.height),this.setCenter(t.get("center"),e),this.setZoom(t.get("zoom"))}P(WA,zA);var XA=function(){function t(){this.dimensions=HA}return t.prototype.create=function(t,e){var n=[];function i(t){return{nameProperty:t.get("nameProperty"),aspectScale:t.get("aspectScale"),projection:t.get("projection")}}t.eachComponent("geo",(function(t,r){var o=t.get("map"),a=new WA(o+r,o,I({nameMap:t.get("nameMap")},i(t)));a.zoomLimit=t.get("scaleLimit"),n.push(a),t.coordinateSystem=a,a.model=t,a.resize=YA,a.resize(t,e)})),t.eachSeries((function(t){if("geo"===t.get("coordinateSystem")){var e=t.get("geoIndex")||0;t.coordinateSystem=n[e]}}));var r={};return t.eachSeriesByType("map",(function(t){if(!t.getHostGeoModel()){var e=t.getMapType();r[e]=r[e]||[],r[e].push(t)}})),R(r,(function(t,r){var o=B(t,(function(t){return t.get("nameMap")})),a=new WA(r,r,I({nameMap:T(o)},i(t[0])));a.zoomLimit=it.apply(null,B(t,(function(t){return t.get("scaleLimit")}))),n.push(a),a.resize=YA,a.resize(t[0],e),R(t,(function(t){t.coordinateSystem=a,function(t,e){R(e.get("geoCoord"),(function(e,n){t.addGeoCoord(n,e)}))}(a,t)}))})),n},t.prototype.getFilledRegions=function(t,e,n,i){for(var r=(t||[]).slice(),o=mt(),a=0;a<r.length;a++)o.set(r[a].name,r[a]);return R(yA(e,n,i).regions,(function(t){var e=t.name;!o.get(e)&&r.push({name:e})})),r},t}(),GA=new XA,qA=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.prototype.init=function(t,e,n){var i=vA(t.map);if(i&&"geoJSON"===i.type){var r=t.itemStyle=t.itemStyle||{};"color"in r||(r.color="#eee")}this.mergeDefaultAndTheme(t,n),yo(t,"label",["show"])},e.prototype.optionUpdated=function(){var t=this,e=this.option;e.regions=GA.getFilledRegions(e.regions,e.map,e.nameMap,e.nameProperty);var n={};this._optionModelMap=z(e.regions||[],(function(e,i){var r=i.name;return r&&(e.set(r,new gh(i,t,t.ecModel)),i.selected&&(n[r]=!0)),e}),mt()),e.selectedMap||(e.selectedMap=n)},e.prototype.getRegionModel=function(t){return this._optionModelMap.get(t)||new gh(null,this,this.ecModel)},e.prototype.getFormattedLabel=function(t,e){var n=this.getRegionModel(t),i="normal"===e?n.get(["label","formatter"]):n.get(["emphasis","label","formatter"]),r={name:t};return X(i)?(r.status=e,i(r)):G(i)?i.replace("{a}",null!=t?t:""):void 0},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.select=function(t){var e=this.option,n=e.selectedMode;n&&("multiple"!==n&&(e.selectedMap=null),(e.selectedMap||(e.selectedMap={}))[t]=!0)},e.prototype.unSelect=function(t){var e=this.option.selectedMap;e&&(e[t]=!1)},e.prototype.toggleSelected=function(t){this[this.isSelected(t)?"unSelect":"select"](t)},e.prototype.isSelected=function(t){var e=this.option.selectedMap;return!(!e||!e[t])},e.type="geo",e.layoutMode="box",e.defaultOption={z:0,show:!0,left:"center",top:"center",aspectScale:null,silent:!1,map:"",boundingCoords:null,center:null,zoom:1,scaleLimit:null,label:{show:!1,color:"#000"},itemStyle:{borderWidth:.5,borderColor:"#444"},emphasis:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},select:{label:{show:!0,color:"rgb(100,0,0)"},itemStyle:{color:"rgba(255,215,0,0.8)"}},regions:[]},e}(Sd);function UA(t,e){return t.pointToProjected?t.pointToProjected(e):t.pointToData(e)}function $A(t,e,n,i){var r=t.getZoom(),o=t.getCenter(),a=e.zoom,s=t.projectedToPoint?t.projectedToPoint(o):t.dataToPoint(o);if(null!=e.dx&&null!=e.dy&&(s[0]-=e.dx,s[1]-=e.dy,t.setCenter(UA(t,s),i)),null!=a){if(n){var l=n.min||0,c=n.max||1/0;a=Math.max(Math.min(r*a,c),l)/r}t.scaleX*=a,t.scaleY*=a;var u=(e.originX-t.x)*(a-1),h=(e.originY-t.y)*(a-1);t.x-=u,t.y-=h,t.updateTransform(),t.setCenter(UA(t,s),i),t.setZoom(a*r)}return{center:t.getCenter(),zoom:t.getZoom()}}var ZA=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.focusBlurEnabled=!0,n}return n(e,t),e.prototype.init=function(t,e){this._api=e},e.prototype.render=function(t,e,n,i){if(this._model=t,!t.get("show"))return this._mapDraw&&this._mapDraw.remove(),void(this._mapDraw=null);this._mapDraw||(this._mapDraw=new AA(n));var r=this._mapDraw;r.draw(t,e,n,this,i),r.group.on("click",this._handleRegionClick,this),r.group.silent=t.get("silent"),this.group.add(r.group),this.updateSelectStatus(t,e,n)},e.prototype._handleRegionClick=function(t){var e;gm(t.target,(function(t){return null!=(e=$s(t).eventData)}),!0),e&&this._api.dispatchAction({type:"geoToggleSelect",geoId:this._model.id,name:e.name})},e.prototype.updateSelectStatus=function(t,e,n){var i=this;this._mapDraw.group.traverse((function(t){var e=$s(t).eventData;if(e)return i._model.isSelected(e.name)?n.enterSelect(t):n.leaveSelect(t),!0}))},e.prototype.findHighDownDispatchers=function(t){return this._mapDraw&&this._mapDraw.findHighDownDispatchers(t,this._model)},e.prototype.dispose=function(){this._mapDraw&&this._mapDraw.remove()},e.type="geo",e}(hg);function KA(t,e,n){!function(t,e,n){if(e.svg){var i=new aA(t,e.svg);mA.set(t,i)}else{var r=e.geoJson||e.geoJSON;r&&!e.features?n=e.specialAreas:r=e,i=new fA(t,r,n),mA.set(t,i)}}(t,e,n)}function QA(t){function e(e,n){n.update="geo:updateSelectStatus",t.registerAction(n,(function(t,n){var i={},r=[];return n.eachComponent({mainType:"geo",query:t},(function(n){n[e](t.name),R(n.coordinateSystem.regions,(function(t){i[t.name]=n.isSelected(t.name)||!1}));var o=[];R(i,(function(t,e){i[e]&&o.push(e)})),r.push({geoIndex:n.componentIndex,name:o})})),{selected:i,allSelected:r,name:t.name}}))}t.registerCoordinateSystem("geo",GA),t.registerComponentModel(qA),t.registerComponentView(ZA),t.registerImpl("registerMap",KA),t.registerImpl("getMap",(function(t){return function(t){var e=mA.get(t);return e&&"geoJSON"===e.type&&e.getMapForUser()}(t)})),e("toggleSelected",{type:"geoToggleSelect",event:"geoselectchanged"}),e("select",{type:"geoSelect",event:"geoselected"}),e("unSelect",{type:"geoUnSelect",event:"geounselected"}),t.registerAction({type:"geoRoam",event:"geoRoam",update:"updateTransform"},(function(t,e,n){var i=t.componentType||"series";e.eachComponent({mainType:i,query:t},(function(e){var r=e.coordinateSystem;if("geo"===r.type){var o=$A(r,t,e.get("scaleLimit"),n);e.setCenter&&e.setCenter(o.center),e.setZoom&&e.setZoom(o.zoom),"series"===i&&R(e.seriesGroup,(function(t){t.setCenter(o.center),t.setZoom(o.zoom)}))}}))}))}function JA(t,e){var n=t.isExpand?t.children:[],i=t.parentNode.children,r=t.hierNode.i?i[t.hierNode.i-1]:null;if(n.length){!function(t){for(var e=t.children,n=e.length,i=0,r=0;--n>=0;){var o=e[n];o.hierNode.prelim+=i,o.hierNode.modifier+=i,r+=o.hierNode.change,i+=o.hierNode.shift+r}}(t);var o=(n[0].hierNode.prelim+n[n.length-1].hierNode.prelim)/2;r?(t.hierNode.prelim=r.hierNode.prelim+e(t,r),t.hierNode.modifier=t.hierNode.prelim-o):t.hierNode.prelim=o}else r&&(t.hierNode.prelim=r.hierNode.prelim+e(t,r));t.parentNode.hierNode.defaultAncestor=function(t,e,n,i){if(e){for(var r=t,o=t,a=o.parentNode.children[0],s=e,l=r.hierNode.modifier,c=o.hierNode.modifier,u=a.hierNode.modifier,h=s.hierNode.modifier;s=iM(s),o=rM(o),s&&o;){r=iM(r),a=rM(a),r.hierNode.ancestor=t;var d=s.hierNode.prelim+h-o.hierNode.prelim-c+i(s,o);d>0&&(aM(oM(s,t,n),t,d),c+=d,l+=d),h+=s.hierNode.modifier,c+=o.hierNode.modifier,l+=r.hierNode.modifier,u+=a.hierNode.modifier}s&&!iM(r)&&(r.hierNode.thread=s,r.hierNode.modifier+=h-l),o&&!rM(a)&&(a.hierNode.thread=o,a.hierNode.modifier+=c-u,n=t)}return n}(t,r,t.parentNode.hierNode.defaultAncestor||i[0],e)}function tM(t){var e=t.hierNode.prelim+t.parentNode.hierNode.modifier;t.setLayout({x:e},!0),t.hierNode.modifier+=t.parentNode.hierNode.modifier}function eM(t){return arguments.length?t:sM}function nM(t,e){return t-=Math.PI/2,{x:e*Math.cos(t),y:e*Math.sin(t)}}function iM(t){var e=t.children;return e.length&&t.isExpand?e[e.length-1]:t.hierNode.thread}function rM(t){var e=t.children;return e.length&&t.isExpand?e[0]:t.hierNode.thread}function oM(t,e,n){return t.hierNode.ancestor.parentNode===e.parentNode?t.hierNode.ancestor:n}function aM(t,e,n){var i=n/(e.hierNode.i-t.hierNode.i);e.hierNode.change-=i,e.hierNode.shift+=n,e.hierNode.modifier+=n,e.hierNode.prelim+=n,t.hierNode.change+=i}function sM(t,e){return t.parentNode===e.parentNode?1:2}var lM=function(){this.parentPoint=[],this.childPoints=[]},cM=function(t){function e(e){return t.call(this,e)||this}return n(e,t),e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new lM},e.prototype.buildPath=function(t,e){var n=e.childPoints,i=n.length,r=e.parentPoint,o=n[0],a=n[i-1];if(1===i)return t.moveTo(r[0],r[1]),void t.lineTo(o[0],o[1]);var s=e.orient,l="TB"===s||"BT"===s?0:1,c=1-l,u=jr(e.forkPosition,1),h=[];h[l]=r[l],h[c]=r[c]+(a[c]-r[c])*u,t.moveTo(r[0],r[1]),t.lineTo(h[0],h[1]),t.moveTo(o[0],o[1]),h[l]=o[l],t.lineTo(h[0],h[1]),h[l]=a[l],t.lineTo(h[0],h[1]),t.lineTo(a[0],a[1]);for(var d=1;d<i-1;d++){var p=n[d];t.moveTo(p[0],p[1]),h[l]=p[l],t.lineTo(h[0],h[1])}},e}(_s),uM=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n._mainGroup=new Dr,n}return n(e,t),e.prototype.init=function(t,e){this._controller=new Ik(e.getZr()),this._controllerHost={target:this.group},this.group.add(this._mainGroup)},e.prototype.render=function(t,e,n){var i=t.getData(),r=t.layoutInfo,o=this._mainGroup;"radial"===t.get("layout")?(o.x=r.x+r.width/2,o.y=r.y+r.height/2):(o.x=r.x,o.y=r.y),this._updateViewCoordSys(t,n),this._updateController(t,e,n);var a=this._data;i.diff(a).add((function(e){hM(i,e)&&dM(i,e,null,o,t)})).update((function(e,n){var r=a.getItemGraphicEl(n);hM(i,e)?dM(i,e,r,o,t):r&&gM(a,n,r,o,t)})).remove((function(e){var n=a.getItemGraphicEl(e);n&&gM(a,e,n,o,t)})).execute(),this._nodeScaleRatio=t.get("nodeScaleRatio"),this._updateNodeAndLinkScale(t),!0===t.get("expandAndCollapse")&&i.eachItemGraphicEl((function(e,i){e.off("click").on("click",(function(){n.dispatchAction({type:"treeExpandAndCollapse",seriesId:t.id,dataIndex:i})}))})),this._data=i},e.prototype._updateViewCoordSys=function(t,e){var n=t.getData(),i=[];n.each((function(t){var e=n.getItemLayout(t);!e||isNaN(e.x)||isNaN(e.y)||i.push([+e.x,+e.y])}));var r=[],o=[];Ea(i,r,o);var a=this._min,s=this._max;o[0]-r[0]==0&&(r[0]=a?a[0]:r[0]-1,o[0]=s?s[0]:o[0]+1),o[1]-r[1]==0&&(r[1]=a?a[1]:r[1]-1,o[1]=s?s[1]:o[1]+1);var l=t.coordinateSystem=new zA;l.zoomLimit=t.get("scaleLimit"),l.setBoundingRect(r[0],r[1],o[0]-r[0],o[1]-r[1]),l.setCenter(t.get("center"),e),l.setZoom(t.get("zoom")),this.group.attr({x:l.x,y:l.y,scaleX:l.scaleX,scaleY:l.scaleY}),this._min=r,this._max=o},e.prototype._updateController=function(t,e,n){var i=this,r=this._controller,o=this._controllerHost,a=this.group;r.setPointerChecker((function(e,i,r){var o=a.getBoundingRect();return o.applyTransform(a.transform),o.contain(i,r)&&!Bk(e,n,t)})),r.enable(t.get("roam")),o.zoomLimit=t.get("scaleLimit"),o.zoom=t.coordinateSystem.getZoom(),r.off("pan").off("zoom").on("pan",(function(e){Lk(o,e.dx,e.dy),n.dispatchAction({seriesId:t.id,type:"treeRoam",dx:e.dx,dy:e.dy})})).on("zoom",(function(e){Pk(o,e.scale,e.originX,e.originY),n.dispatchAction({seriesId:t.id,type:"treeRoam",zoom:e.scale,originX:e.originX,originY:e.originY}),i._updateNodeAndLinkScale(t),n.updateLabelLayout()}))},e.prototype._updateNodeAndLinkScale=function(t){var e=t.getData(),n=this._getNodeGlobalScale(t);e.eachItemGraphicEl((function(t,e){t.setSymbolScale(n)}))},e.prototype._getNodeGlobalScale=function(t){var e=t.coordinateSystem;if("view"!==e.type)return 1;var n=this._nodeScaleRatio,i=e.scaleX||1;return((e.getZoom()-1)*n+1)/i},e.prototype.dispose=function(){this._controller&&this._controller.dispose(),this._controllerHost=null},e.prototype.remove=function(){this._mainGroup.removeAll(),this._data=null},e.type="tree",e}(gg);function hM(t,e){var n=t.getItemLayout(e);return n&&!isNaN(n.x)&&!isNaN(n.y)}function dM(t,e,n,i,r){var o=!n,a=t.tree.getNodeByDataIndex(e),s=a.getModel(),l=a.getVisual("style").fill,c=!1===a.isExpand&&0!==a.children.length?l:"#fff",u=t.tree.root,h=a.parentNode===u?a:a.parentNode||a,d=t.getItemGraphicEl(h.dataIndex),p=h.getLayout(),f=d?{x:d.__oldX,y:d.__oldY,rawX:d.__radialOldRawX,rawY:d.__radialOldRawY}:p,g=a.getLayout();o?((n=new Yw(t,e,null,{symbolInnerColor:c,useNameLabel:!0})).x=f.x,n.y=f.y):n.updateData(t,e,null,{symbolInnerColor:c,useNameLabel:!0}),n.__radialOldRawX=n.__radialRawX,n.__radialOldRawY=n.__radialRawY,n.__radialRawX=g.rawX,n.__radialRawY=g.rawY,i.add(n),t.setItemGraphicEl(e,n),n.__oldX=n.x,n.__oldY=n.y,au(n,{x:g.x,y:g.y},r);var m=n.getSymbolPath();if("radial"===r.get("layout")){var v=u.children[0],y=v.getLayout(),b=v.children.length,x=void 0,_=void 0;if(g.x===y.x&&!0===a.isExpand&&v.children.length){var w={x:(v.children[0].getLayout().x+v.children[b-1].getLayout().x)/2,y:(v.children[0].getLayout().y+v.children[b-1].getLayout().y)/2};(x=Math.atan2(w.y-y.y,w.x-y.x))<0&&(x=2*Math.PI+x),(_=w.x<y.x)&&(x-=Math.PI)}else(x=Math.atan2(g.y-y.y,g.x-y.x))<0&&(x=2*Math.PI+x),0===a.children.length||0!==a.children.length&&!1===a.isExpand?(_=g.x<y.x)&&(x-=Math.PI):(_=g.x>y.x)||(x-=Math.PI);var S=_?"left":"right",C=s.getModel("label"),k=C.get("rotate"),A=k*(Math.PI/180),M=m.getTextContent();M&&(m.setTextConfig({position:C.get("position")||S,rotation:null==k?-x:A,origin:"center"}),M.setStyle("verticalAlign","middle"))}var T=s.get(["emphasis","focus"]),I="relative"===T?vt(a.getAncestorsIndices(),a.getDescendantIndices()):"ancestor"===T?a.getAncestorsIndices():"descendant"===T?a.getDescendantIndices():null;I&&($s(n).focus=I),function(t,e,n,i,r,o,a,s){var l=e.getModel(),c=t.get("edgeShape"),u=t.get("layout"),h=t.getOrient(),d=t.get(["lineStyle","curveness"]),p=t.get("edgeForkPosition"),f=l.getModel("lineStyle").getLineStyle(),g=i.__edge;if("curve"===c)e.parentNode&&e.parentNode!==n&&(g||(g=i.__edge=new jc({shape:mM(u,h,d,r,r)})),au(g,{shape:mM(u,h,d,o,a)},t));else if("polyline"===c&&"orthogonal"===u&&e!==n&&e.children&&0!==e.children.length&&!0===e.isExpand){for(var m=e.children,v=[],y=0;y<m.length;y++){var b=m[y].getLayout();v.push([b.x,b.y])}g||(g=i.__edge=new cM({shape:{parentPoint:[a.x,a.y],childPoints:[[a.x,a.y]],orient:h,forkPosition:p}})),au(g,{shape:{parentPoint:[a.x,a.y],childPoints:v}},t)}g&&("polyline"!==c||e.isExpand)&&(g.useStyle(E({strokeNoScale:!0,fill:null},f)),Hl(g,l,"lineStyle"),xl(g),s.add(g))}(r,a,u,n,f,p,g,i),n.__edge&&(n.onHoverStateChange=function(e){if("blur"!==e){var i=a.parentNode&&t.getItemGraphicEl(a.parentNode.dataIndex);i&&1===i.hoverState||yl(n.__edge,e)}})}function pM(t,e,n,i,r){var o=fM(e.tree.root,t),a=o.source,s=o.sourceLayout,l=e.getItemGraphicEl(t.dataIndex);if(l){var c=e.getItemGraphicEl(a.dataIndex).__edge,u=l.__edge||(!1===a.isExpand||1===a.children.length?c:void 0),h=i.get("edgeShape"),d=i.get("layout"),p=i.get("orient"),f=i.get(["lineStyle","curveness"]);u&&("curve"===h?cu(u,{shape:mM(d,p,f,s,s),style:{opacity:0}},i,{cb:function(){n.remove(u)},removeOpt:r}):"polyline"===h&&"orthogonal"===i.get("layout")&&cu(u,{shape:{parentPoint:[s.x,s.y],childPoints:[[s.x,s.y]]},style:{opacity:0}},i,{cb:function(){n.remove(u)},removeOpt:r}))}}function fM(t,e){for(var n,i=e.parentNode===t?e:e.parentNode||e;null==(n=i.getLayout());)i=i.parentNode===t?i:i.parentNode||i;return{source:i,sourceLayout:n}}function gM(t,e,n,i,r){var o=t.tree.getNodeByDataIndex(e),a=fM(t.tree.root,o).sourceLayout,s={duration:r.get("animationDurationUpdate"),easing:r.get("animationEasingUpdate")};cu(n,{x:a.x+1,y:a.y+1},r,{cb:function(){i.remove(n),t.setItemGraphicEl(e,null)},removeOpt:s}),n.fadeOut(null,t.hostModel,{fadeLabel:!0,animation:s}),o.children.forEach((function(e){pM(e,t,i,r,s)})),pM(o,t,i,r,s)}function mM(t,e,n,i,r){var o,a,s,l,c,u,h,d;if("radial"===t){c=i.rawX,h=i.rawY,u=r.rawX,d=r.rawY;var p=nM(c,h),f=nM(c,h+(d-h)*n),g=nM(u,d+(h-d)*n),m=nM(u,d);return{x1:p.x||0,y1:p.y||0,x2:m.x||0,y2:m.y||0,cpx1:f.x||0,cpy1:f.y||0,cpx2:g.x||0,cpy2:g.y||0}}return c=i.x,h=i.y,u=r.x,d=r.y,"LR"!==e&&"RL"!==e||(o=c+(u-c)*n,a=h,s=u+(c-u)*n,l=d),"TB"!==e&&"BT"!==e||(o=c,a=h+(d-h)*n,s=u,l=d+(h-d)*n),{x1:c,y1:h,x2:u,y2:d,cpx1:o,cpy1:a,cpx2:s,cpy2:l}}var vM=Io();function yM(t){var e=t.mainData,n=t.datas;n||(n={main:e},t.datasAttr={main:"data"}),t.datas=t.mainData=null,CM(e,n,t),R(n,(function(n){R(e.TRANSFERABLE_METHODS,(function(e){n.wrapMethod(e,j(bM,t))}))})),e.wrapMethod("cloneShallow",j(_M,t)),R(e.CHANGABLE_METHODS,(function(n){e.wrapMethod(n,j(xM,t))})),lt(n[e.dataType]===e)}function bM(t,e){if(vM(this).mainData===this){var n=I({},vM(this).datas);n[this.dataType]=e,CM(e,n,t)}else kM(e,this.dataType,vM(this).mainData,t);return e}function xM(t,e){return t.struct&&t.struct.update(),e}function _M(t,e){return R(vM(e).datas,(function(n,i){n!==e&&kM(n.cloneShallow(),i,e,t)})),e}function wM(t){var e=vM(this).mainData;return null==t||null==e?e:vM(e).datas[t]}function SM(){var t=vM(this).mainData;return null==t?[{data:t}]:B(H(vM(t).datas),(function(e){return{type:e,data:vM(t).datas[e]}}))}function CM(t,e,n){vM(t).datas={},R(e,(function(e,i){kM(e,i,t,n)}))}function kM(t,e,n,i){vM(n).datas[e]=t,vM(t).mainData=n,t.dataType=e,i.struct&&(t[i.structAttr]=i.struct,i.struct[i.datasAttr[e]]=t),t.getLinkedData=wM,t.getLinkedDataAll=SM}var AM=function(){function t(t,e){this.depth=0,this.height=0,this.dataIndex=-1,this.children=[],this.viewChildren=[],this.isExpand=!1,this.name=t||"",this.hostTree=e}return t.prototype.isRemoved=function(){return this.dataIndex<0},t.prototype.eachNode=function(t,e,n){X(t)&&(n=e,e=t,t=null),G(t=t||{})&&(t={order:t});var i,r=t.order||"preorder",o=this[t.attr||"children"];"preorder"===r&&(i=e.call(n,this));for(var a=0;!i&&a<o.length;a++)o[a].eachNode(t,e,n);"postorder"===r&&e.call(n,this)},t.prototype.updateDepthAndHeight=function(t){var e=0;this.depth=t;for(var n=0;n<this.children.length;n++){var i=this.children[n];i.updateDepthAndHeight(t+1),i.height>e&&(e=i.height)}this.height=e+1},t.prototype.getNodeById=function(t){if(this.getId()===t)return this;for(var e=0,n=this.children,i=n.length;e<i;e++){var r=n[e].getNodeById(t);if(r)return r}},t.prototype.contains=function(t){if(t===this)return!0;for(var e=0,n=this.children,i=n.length;e<i;e++){var r=n[e].contains(t);if(r)return r}},t.prototype.getAncestors=function(t){for(var e=[],n=t?this:this.parentNode;n;)e.push(n),n=n.parentNode;return e.reverse(),e},t.prototype.getAncestorsIndices=function(){for(var t=[],e=this;e;)t.push(e.dataIndex),e=e.parentNode;return t.reverse(),t},t.prototype.getDescendantIndices=function(){var t=[];return this.eachNode((function(e){t.push(e.dataIndex)})),t},t.prototype.getValue=function(t){var e=this.hostTree.data;return e.getStore().get(e.getDimensionIndex(t||"value"),this.dataIndex)},t.prototype.setLayout=function(t,e){this.dataIndex>=0&&this.hostTree.data.setItemLayout(this.dataIndex,t,e)},t.prototype.getLayout=function(){return this.hostTree.data.getItemLayout(this.dataIndex)},t.prototype.getModel=function(t){if(!(this.dataIndex<0))return this.hostTree.data.getItemModel(this.dataIndex).getModel(t)},t.prototype.getLevelModel=function(){return(this.hostTree.levelModels||[])[this.depth]},t.prototype.setVisual=function(t,e){this.dataIndex>=0&&this.hostTree.data.setItemVisual(this.dataIndex,t,e)},t.prototype.getVisual=function(t){return this.hostTree.data.getItemVisual(this.dataIndex,t)},t.prototype.getRawIndex=function(){return this.hostTree.data.getRawIndex(this.dataIndex)},t.prototype.getId=function(){return this.hostTree.data.getId(this.dataIndex)},t.prototype.getChildIndex=function(){if(this.parentNode){for(var t=this.parentNode.children,e=0;e<t.length;++e)if(t[e]===this)return e;return-1}return-1},t.prototype.isAncestorOf=function(t){for(var e=t.parentNode;e;){if(e===this)return!0;e=e.parentNode}return!1},t.prototype.isDescendantOf=function(t){return t!==this&&t.isAncestorOf(this)},t}(),MM=function(){function t(t){this.type="tree",this._nodes=[],this.hostModel=t}return t.prototype.eachNode=function(t,e,n){this.root.eachNode(t,e,n)},t.prototype.getNodeByDataIndex=function(t){var e=this.data.getRawIndex(t);return this._nodes[e]},t.prototype.getNodeById=function(t){return this.root.getNodeById(t)},t.prototype.update=function(){for(var t=this.data,e=this._nodes,n=0,i=e.length;n<i;n++)e[n].dataIndex=-1;for(n=0,i=t.count();n<i;n++)e[t.getRawIndex(n)].dataIndex=n},t.prototype.clearLayouts=function(){this.data.clearItemLayouts()},t.createTree=function(e,n,i){var r=new t(n),o=[],a=1;!function t(e,n){var i=e.value;a=Math.max(a,Y(i)?i.length:1),o.push(e);var s=new AM(ko(e.name,""),r);n?function(t,e){var n=e.children;t.parentNode!==e&&(n.push(t),t.parentNode=e)}(s,n):r.root=s,r._nodes.push(s);var l=e.children;if(l)for(var c=0;c<l.length;c++)t(l[c],s)}(e),r.root.updateDepthAndHeight(0);var s=Uy(o,{coordDimensions:["value"],dimensionsCount:a}).dimensions,l=new qy(s,n);return l.initData(o),i&&i(l),yM({mainData:l,struct:r,structAttr:"tree"}),r.update(),r},t}();function TM(t,e,n){if(t&&D(e,t.type)>=0){var i=n.getData().tree.root,r=t.targetNode;if(G(r)&&(r=i.getNodeById(r)),r&&i.contains(r))return{node:r};var o=t.targetNodeId;if(null!=o&&(r=i.getNodeById(o)))return{node:r}}}function IM(t){for(var e=[];t;)(t=t.parentNode)&&e.push(t);return e.reverse()}function EM(t,e){return D(IM(t),e)>=0}function OM(t,e){for(var n=[];t;){var i=t.dataIndex;n.push({name:t.name,dataIndex:i,value:e.getRawValue(i)}),t=t.parentNode}return n.reverse(),n}var DM=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hasSymbolVisual=!0,e.ignoreStyleOnData=!0,e}return n(e,t),e.prototype.getInitialData=function(t){var e={name:t.name,children:t.data},n=t.leaves||{},i=new gh(n,this,this.ecModel),r=MM.createTree(e,this,(function(t){t.wrapMethod("getItemModel",(function(t,e){var n=r.getNodeByDataIndex(e);return n&&n.children.length&&n.isExpand||(t.parentModel=i),t}))})),o=0;r.eachNode("preorder",(function(t){t.depth>o&&(o=t.depth)}));var a=t.expandAndCollapse&&t.initialTreeDepth>=0?t.initialTreeDepth:o;return r.root.eachNode("preorder",(function(t){var e=t.hostTree.data.getRawDataItem(t.dataIndex);t.isExpand=e&&null!=e.collapsed?!e.collapsed:t.depth<=a})),r.data},e.prototype.getOrient=function(){var t=this.get("orient");return"horizontal"===t?t="LR":"vertical"===t&&(t="TB"),t},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.formatTooltip=function(t,e,n){for(var i=this.getData().tree,r=i.root.children[0],o=i.getNodeByDataIndex(t),a=o.getValue(),s=o.name;o&&o!==r;)s=o.parentNode.name+"."+s,o=o.parentNode;return Hf("nameValue",{name:s,value:a,noValue:isNaN(a)||null==a})},e.prototype.getDataParams=function(e){var n=t.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(e);return n.treeAncestors=OM(i,this),n.collapsed=!i.isExpand,n},e.type="series.tree",e.layoutMode="box",e.defaultOption={z:2,coordinateSystem:"view",left:"12%",top:"12%",right:"12%",bottom:"12%",layout:"orthogonal",edgeShape:"curve",edgeForkPosition:"50%",roam:!1,nodeScaleRatio:.4,center:null,zoom:1,orient:"LR",symbol:"emptyCircle",symbolSize:7,expandAndCollapse:!0,initialTreeDepth:2,lineStyle:{color:"#ccc",width:1.5,curveness:.5},itemStyle:{color:"lightsteelblue",borderWidth:1.5},label:{show:!0},animationEasing:"linear",animationDuration:700,animationDurationUpdate:500},e}(ig);function LM(t,e){for(var n,i=[t];n=i.pop();)if(e(n),n.isExpand){var r=n.children;if(r.length)for(var o=r.length-1;o>=0;o--)i.push(r[o])}}function PM(t,e){t.eachSeriesByType("tree",(function(t){!function(t,e){var n=function(t,e){return md(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}(t,e);t.layoutInfo=n;var i=t.get("layout"),r=0,o=0,a=null;"radial"===i?(r=2*Math.PI,o=Math.min(n.height,n.width)/2,a=eM((function(t,e){return(t.parentNode===e.parentNode?1:2)/t.depth}))):(r=n.width,o=n.height,a=eM());var s=t.getData().tree.root,l=s.children[0];if(l){!function(t){var e=t;e.hierNode={defaultAncestor:null,ancestor:e,prelim:0,modifier:0,change:0,shift:0,i:0,thread:null};for(var n,i,r=[e];n=r.pop();)if(i=n.children,n.isExpand&&i.length)for(var o=i.length-1;o>=0;o--){var a=i[o];a.hierNode={defaultAncestor:null,ancestor:a,prelim:0,modifier:0,change:0,shift:0,i:o,thread:null},r.push(a)}}(s),function(t,e,n){for(var i,r=[t],o=[];i=r.pop();)if(o.push(i),i.isExpand){var a=i.children;if(a.length)for(var s=0;s<a.length;s++)r.push(a[s])}for(;i=o.pop();)e(i,n)}(l,JA,a),s.hierNode.modifier=-l.hierNode.prelim,LM(l,tM);var c=l,u=l,h=l;LM(l,(function(t){var e=t.getLayout().x;e<c.getLayout().x&&(c=t),e>u.getLayout().x&&(u=t),t.depth>h.depth&&(h=t)}));var d=c===u?1:a(c,u)/2,p=d-c.getLayout().x,f=0,g=0,m=0,v=0;if("radial"===i)f=r/(u.getLayout().x+d+p),g=o/(h.depth-1||1),LM(l,(function(t){m=(t.getLayout().x+p)*f,v=(t.depth-1)*g;var e=nM(m,v);t.setLayout({x:e.x,y:e.y,rawX:m,rawY:v},!0)}));else{var y=t.getOrient();"RL"===y||"LR"===y?(g=o/(u.getLayout().x+d+p),f=r/(h.depth-1||1),LM(l,(function(t){v=(t.getLayout().x+p)*g,m="LR"===y?(t.depth-1)*f:r-(t.depth-1)*f,t.setLayout({x:m,y:v},!0)}))):"TB"!==y&&"BT"!==y||(f=r/(u.getLayout().x+d+p),g=o/(h.depth-1||1),LM(l,(function(t){m=(t.getLayout().x+p)*f,v="TB"===y?(t.depth-1)*g:o-(t.depth-1)*g,t.setLayout({x:m,y:v},!0)})))}}}(t,e)}))}function NM(t){t.eachSeriesByType("tree",(function(t){var e=t.getData();e.tree.eachNode((function(t){var n=t.getModel().getModel("itemStyle").getItemStyle();I(e.ensureUniqueItemVisual(t.dataIndex,"style"),n)}))}))}var RM=["treemapZoomToNode","treemapRender","treemapMove"];function BM(t){var e=t.getData().tree,n={};e.eachNode((function(e){for(var i=e;i&&i.depth>1;)i=i.parentNode;var r=$d(t.ecModel,i.name||i.dataIndex+"",n);e.setVisual("decal",r)}))}var zM=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.preventUsingHoverLayer=!0,n}return n(e,t),e.prototype.getInitialData=function(t,e){var n={name:t.name,children:t.data};FM(n);var i=t.levels||[],r=this.designatedVisualItemStyle={},o=new gh({itemStyle:r},this,e);i=t.levels=function(t,e){var n,i,r=vo(e.get("color")),o=vo(e.get(["aria","decal","decals"]));if(r){R(t=t||[],(function(t){var e=new gh(t),r=e.get("color"),o=e.get("decal");(e.get(["itemStyle","color"])||r&&"none"!==r)&&(n=!0),(e.get(["itemStyle","decal"])||o&&"none"!==o)&&(i=!0)}));var a=t[0]||(t[0]={});return n||(a.color=r.slice()),!i&&o&&(a.decal=o.slice()),t}}(i,e);var a=B(i||[],(function(t){return new gh(t,o,e)}),this),s=MM.createTree(n,this,(function(t){t.wrapMethod("getItemModel",(function(t,e){var n=s.getNodeByDataIndex(e),i=n?a[n.depth]:null;return t.parentModel=i||o,t}))}));return s.data},e.prototype.optionUpdated=function(){this.resetViewRoot()},e.prototype.formatTooltip=function(t,e,n){var i=this.getData(),r=this.getRawValue(t);return Hf("nameValue",{name:i.getName(t),value:r})},e.prototype.getDataParams=function(e){var n=t.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(e);return n.treeAncestors=OM(i,this),n.treePathInfo=n.treeAncestors,n},e.prototype.setLayoutInfo=function(t){this.layoutInfo=this.layoutInfo||{},I(this.layoutInfo,t)},e.prototype.mapIdToIndex=function(t){var e=this._idIndexMap;e||(e=this._idIndexMap=mt(),this._idIndexMapCount=0);var n=e.get(t);return null==n&&e.set(t,n=this._idIndexMapCount++),n},e.prototype.getViewRoot=function(){return this._viewRoot},e.prototype.resetViewRoot=function(t){t?this._viewRoot=t:t=this._viewRoot;var e=this.getRawData().tree.root;t&&(t===e||e.contains(t))||(this._viewRoot=e)},e.prototype.enableAriaDecal=function(){BM(this)},e.type="series.treemap",e.layoutMode="box",e.defaultOption={progressive:0,left:"center",top:"middle",width:"80%",height:"80%",sort:!0,clipWindow:"origin",squareRatio:.5*(1+Math.sqrt(5)),leafDepth:null,drillDownIcon:"",zoomToNodeRatio:.1024,roam:!0,nodeClick:"zoomToNode",animation:!0,animationDurationUpdate:900,animationEasing:"quinticInOut",breadcrumb:{show:!0,height:22,left:"center",top:"bottom",emptyItemWidth:25,itemStyle:{color:"rgba(0,0,0,0.7)",textStyle:{color:"#fff"}},emphasis:{itemStyle:{color:"rgba(0,0,0,0.9)"}}},label:{show:!0,distance:0,padding:5,position:"inside",color:"#fff",overflow:"truncate"},upperLabel:{show:!1,position:[0,"50%"],height:20,overflow:"truncate",verticalAlign:"middle"},itemStyle:{color:null,colorAlpha:null,colorSaturation:null,borderWidth:0,gapWidth:0,borderColor:"#fff",borderColorSaturation:null},emphasis:{upperLabel:{show:!0,position:[0,"50%"],overflow:"truncate",verticalAlign:"middle"}},visualDimension:0,visualMin:null,visualMax:null,color:[],colorAlpha:null,colorSaturation:null,colorMappingBy:"index",visibleMin:10,childrenVisibleMin:null,levels:[]},e}(ig);function FM(t){var e=0;R(t.children,(function(t){FM(t);var n=t.value;Y(n)&&(n=n[0]),e+=n}));var n=t.value;Y(n)&&(n=n[0]),(null==n||isNaN(n))&&(n=e),n<0&&(n=0),Y(t.value)?t.value[0]=n:t.value=n}var VM=function(){function t(t){this.group=new Dr,t.add(this.group)}return t.prototype.render=function(t,e,n,i){var r=t.getModel("breadcrumb"),o=this.group;if(o.removeAll(),r.get("show")&&n){var a=r.getModel("itemStyle"),s=r.getModel("emphasis"),l=a.getModel("textStyle"),c=s.getModel(["itemStyle","textStyle"]),u={pos:{left:r.get("left"),right:r.get("right"),top:r.get("top"),bottom:r.get("bottom")},box:{width:e.getWidth(),height:e.getHeight()},emptyItemWidth:r.get("emptyItemWidth"),totalWidth:0,renderList:[]};this._prepare(n,u,l),this._renderContent(t,u,a,s,l,c,i),vd(o,u.pos,u.box)}},t.prototype._prepare=function(t,e,n){for(var i=t;i;i=i.parentNode){var r=ko(i.getModel().get("name"),""),o=n.getTextRect(r),a=Math.max(o.width+16,e.emptyItemWidth);e.totalWidth+=a+8,e.renderList.push({node:i,text:r,width:a})}},t.prototype._renderContent=function(t,e,n,i,r,o,a){for(var s,l,c,u,h,d,p,f,g,m=0,v=e.emptyItemWidth,y=t.get(["breadcrumb","height"]),b=(s=e.pos,u=(l=e.box).width,h=l.height,d=jr(s.left,u),p=jr(s.top,h),f=jr(s.right,u),g=jr(s.bottom,h),(isNaN(d)||isNaN(parseFloat(s.left)))&&(d=0),(isNaN(f)||isNaN(parseFloat(s.right)))&&(f=u),(isNaN(p)||isNaN(parseFloat(s.top)))&&(p=0),(isNaN(g)||isNaN(parseFloat(s.bottom)))&&(g=h),c=id(c||0),{width:Math.max(f-d-c[1]-c[3],0),height:Math.max(g-p-c[0]-c[2],0)}),x=e.totalWidth,_=e.renderList,w=i.getModel("itemStyle").getItemStyle(),S=_.length-1;S>=0;S--){var C=_[S],k=C.node,A=C.width,M=C.text;x>b.width&&(x-=A-v,A=v,M=null);var T=new Pc({shape:{points:HM(m,0,A,y,S===_.length-1,0===S)},style:E(n.getItemStyle(),{lineJoin:"bevel"}),textContent:new Rs({style:qu(r,{text:M})}),textConfig:{position:"inside"},z2:1e5,onclick:j(a,k)});T.disableLabelAnimation=!0,T.getTextContent().ensureState("emphasis").style=qu(o,{text:M}),T.ensureState("emphasis").style=w,Bl(T,i.get("focus"),i.get("blurScope"),i.get("disabled")),this.group.add(T),WM(T,t,k),m+=A+8}},t.prototype.remove=function(){this.group.removeAll()},t}();function HM(t,e,n,i,r,o){var a=[[r?t:t-5,e],[t+n,e],[t+n,e+i],[r?t:t-5,e+i]];return!o&&a.splice(2,0,[t+n+5,e+i/2]),!r&&a.push([t,e+i/2]),a}function WM(t,e,n){$s(t).eventData={componentType:"series",componentSubType:"treemap",componentIndex:e.componentIndex,seriesIndex:e.seriesIndex,seriesName:e.name,seriesType:"treemap",selfType:"breadcrumb",nodeData:{dataIndex:n&&n.dataIndex,name:n&&n.name},treePathInfo:n&&OM(n,e)}}var jM=function(){function t(){this._storage=[],this._elExistsMap={}}return t.prototype.add=function(t,e,n,i,r){return!this._elExistsMap[t.id]&&(this._elExistsMap[t.id]=!0,this._storage.push({el:t,target:e,duration:n,delay:i,easing:r}),!0)},t.prototype.finished=function(t){return this._finishedCallback=t,this},t.prototype.start=function(){for(var t=this,e=this._storage.length,n=function(){--e<=0&&(t._storage.length=0,t._elExistsMap={},t._finishedCallback&&t._finishedCallback())},i=0,r=this._storage.length;i<r;i++){var o=this._storage[i];o.el.animateTo(o.target,{duration:o.duration,delay:o.delay,easing:o.easing,setToFinal:!0,done:n,aborted:n})}return this},t}(),YM=Dr,XM=Ls,GM="label",qM="upperLabel",UM=Uo([["fill","color"],["stroke","strokeColor"],["lineWidth","strokeWidth"],["shadowBlur"],["shadowOffsetX"],["shadowOffsetY"],["shadowColor"]]),$M=function(t){var e=UM(t);return e.stroke=e.fill=e.lineWidth=null,e},ZM=Io(),KM=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n._state="ready",n._storage={nodeGroup:[],background:[],content:[]},n}return n(e,t),e.prototype.render=function(t,e,n,i){if(!(D(e.findComponents({mainType:"series",subType:"treemap",query:i}),t)<0)){this.seriesModel=t,this.api=n,this.ecModel=e;var r=TM(i,["treemapZoomToNode","treemapRootToNode"],t),o=i&&i.type,a=t.layoutInfo,s=!this._oldTree,l=this._storage,c="treemapRootToNode"===o&&r&&l?{rootNodeGroup:l.nodeGroup[r.node.getRawIndex()],direction:i.direction}:null,u=this._giveContainerGroup(a),h=t.get("animation"),d=this._doRender(u,t,c);!h||s||o&&"treemapZoomToNode"!==o&&"treemapRootToNode"!==o?d.renderFinally():this._doAnimation(u,d,t,c),this._resetController(n),this._renderBreadcrumb(t,n,r)}},e.prototype._giveContainerGroup=function(t){var e=this._containerGroup;return e||(e=this._containerGroup=new YM,this._initEvents(e),this.group.add(e)),e.x=t.x,e.y=t.y,e},e.prototype._doRender=function(t,e,n){var i=e.getData().tree,r=this._oldTree,o={nodeGroup:[],background:[],content:[]},a={nodeGroup:[],background:[],content:[]},s=this._storage,l=[];function c(t,i,r,c){return function(t,e,n,i,r,o,a,s,l,c){if(a){var u=a.getLayout(),h=t.getData(),d=a.getModel();if(h.setItemGraphicEl(a.dataIndex,null),u&&u.isInView){var p=u.width,f=u.height,g=u.borderWidth,m=u.invisible,v=a.getRawIndex(),y=s&&s.getRawIndex(),b=a.viewChildren,x=u.upperHeight,_=b&&b.length,w=d.getModel("itemStyle"),S=d.getModel(["emphasis","itemStyle"]),C=d.getModel(["blur","itemStyle"]),k=d.getModel(["select","itemStyle"]),A=w.get("borderRadius")||0,M=F("nodeGroup",YM);if(M){if(l.add(M),M.x=u.x||0,M.y=u.y||0,M.markRedraw(),ZM(M).nodeWidth=p,ZM(M).nodeHeight=f,u.isAboveViewRoot)return M;var T=F("background",XM,c,20);T&&function(e,n,i){var r=$s(n);if(r.dataIndex=a.dataIndex,r.seriesIndex=t.seriesIndex,n.setShape({x:0,y:0,width:p,height:f,r:A}),m)R(n);else{n.invisible=!1;var o=a.getVisual("style"),s=o.stroke,l=$M(w);l.fill=s;var c=UM(S);c.fill=S.get("borderColor");var u=UM(C);u.fill=C.get("borderColor");var h=UM(k);if(h.fill=k.get("borderColor"),i){var d=p-2*g;B(n,s,o.opacity,{x:g,y:0,width:d,height:x})}else n.removeTextContent();n.setStyle(l),n.ensureState("emphasis").style=c,n.ensureState("blur").style=u,n.ensureState("select").style=h,xl(n)}e.add(n)}(M,T,_&&u.upperLabelHeight);var E=d.getModel("emphasis"),O=E.get("focus"),D=E.get("blurScope"),L=E.get("disabled"),P="ancestor"===O?a.getAncestorsIndices():"descendant"===O?a.getDescendantIndices():O;if(_)jl(M)&&Wl(M,!1),T&&(Wl(T,!L),h.setItemGraphicEl(a.dataIndex,T),zl(T,P,D));else{var N=F("content",XM,c,30);N&&function(e,n){var i=$s(n);i.dataIndex=a.dataIndex,i.seriesIndex=t.seriesIndex;var r=Math.max(p-2*g,0),o=Math.max(f-2*g,0);if(n.culling=!0,n.setShape({x:g,y:g,width:r,height:o,r:A}),m)R(n);else{n.invisible=!1;var s=a.getVisual("style"),l=s.fill,c=$M(w);c.fill=l,c.decal=s.decal;var u=UM(S),h=UM(C),d=UM(k);B(n,l,s.opacity,null),n.setStyle(c),n.ensureState("emphasis").style=u,n.ensureState("blur").style=h,n.ensureState("select").style=d,xl(n)}e.add(n)}(M,N),T.disableMorphing=!0,T&&jl(T)&&Wl(T,!1),Wl(M,!L),h.setItemGraphicEl(a.dataIndex,M),zl(M,P,D)}return M}}}function R(t){!t.invisible&&o.push(t)}function B(e,n,i,r){var o=d.getModel(r?qM:GM),s=ko(d.get("name"),null),l=o.getShallow("show");Xu(e,Gu(d,r?qM:GM),{defaultText:l?s:null,inheritColor:n,defaultOpacity:i,labelFetcher:t,labelDataIndex:a.dataIndex});var c=e.getTextContent();if(c){var h=c.style,p=st(h.padding||0);r&&(e.setTextConfig({layoutRect:r}),c.disableLabelLayout=!0),c.beforeUpdate=function(){var t=Math.max((r?r.width:e.shape.width)-p[1]-p[3],0),n=Math.max((r?r.height:e.shape.height)-p[0]-p[2],0);h.width===t&&h.height===n||c.setStyle({width:t,height:n})},h.truncateMinChar=2,h.lineOverflow="truncate",z(h,r,u);var f=c.getState("emphasis");z(f?f.style:null,r,u)}}function z(e,n,i){var r=e?e.text:null;if(!n&&i.isLeafRoot&&null!=r){var o=t.get("drillDownIcon",!0);e.text=o?o+" "+r:r}}function F(t,i,o,a){var s=null!=y&&n[t][y],l=r[t];return s?(n[t][y]=null,function(t,e){var n=t[v]={};e instanceof YM?(n.oldX=e.x,n.oldY=e.y):n.oldShape=I({},e.shape)}(l,s)):m||((s=new i)instanceof ba&&(s.z2=function(t,e){return 100*t+e}(o,a)),V(l,s)),e[t][v]=s}function V(t,e){var n=t[v]={},o=a.parentNode,s=e instanceof Dr;if(o&&(!i||"drillDown"===i.direction)){var l=0,c=0,u=r.background[o.getRawIndex()];!i&&u&&u.oldShape&&(l=u.oldShape.width,c=u.oldShape.height),s?(n.oldX=0,n.oldY=c):n.oldShape={x:l,y:c,width:0,height:0}}n.fadein=!s}}(e,a,s,n,o,l,t,i,r,c)}!function t(e,n,i,r,o){function a(t){return t.getId()}function s(a,s){var l=null!=a?e[a]:null,u=null!=s?n[s]:null,h=c(l,u,i,o);h&&t(l&&l.viewChildren||[],u&&u.viewChildren||[],h,r,o+1)}r?(n=e,R(e,(function(t,e){!t.isRemoved()&&s(e,e)}))):new Sy(n,e,a,a).add(s).update(s).remove(j(s,null)).execute()}(i.root?[i.root]:[],r&&r.root?[r.root]:[],t,i===r||!r,0);var u=function(t){var e={nodeGroup:[],background:[],content:[]};return t&&R(t,(function(t,n){var i=e[n];R(t,(function(t){t&&(i.push(t),ZM(t).willDelete=!0)}))})),e}(s);return this._oldTree=i,this._storage=a,{lastsForAnimation:o,willDeleteEls:u,renderFinally:function(){R(u,(function(t){R(t,(function(t){t.parent&&t.parent.remove(t)}))})),R(l,(function(t){t.invisible=!0,t.dirty()}))}}},e.prototype._doAnimation=function(t,e,n,i){var r=n.get("animationDurationUpdate"),o=n.get("animationEasing"),a=(X(r)?0:r)||0,s=(X(o)?null:o)||"cubicOut",l=new jM;R(e.willDeleteEls,(function(t,e){R(t,(function(t,n){if(!t.invisible){var r,o=t.parent,c=ZM(o);if(i&&"drillDown"===i.direction)r=o===i.rootNodeGroup?{shape:{x:0,y:0,width:c.nodeWidth,height:c.nodeHeight},style:{opacity:0}}:{style:{opacity:0}};else{var u=0,h=0;c.willDelete||(u=c.nodeWidth/2,h=c.nodeHeight/2),r="nodeGroup"===e?{x:u,y:h,style:{opacity:0}}:{shape:{x:u,y:h,width:0,height:0},style:{opacity:0}}}r&&l.add(t,r,a,0,s)}}))})),R(this._storage,(function(t,n){R(t,(function(t,i){var r=e.lastsForAnimation[n][i],o={};r&&(t instanceof Dr?null!=r.oldX&&(o.x=t.x,o.y=t.y,t.x=r.oldX,t.y=r.oldY):(r.oldShape&&(o.shape=I({},t.shape),t.setShape(r.oldShape)),r.fadein?(t.setStyle("opacity",0),o.style={opacity:1}):1!==t.style.opacity&&(o.style={opacity:1})),l.add(t,o,a,0,s))}))}),this),this._state="animating",l.finished(W((function(){this._state="ready",e.renderFinally()}),this)).start()},e.prototype._resetController=function(t){var e=this._controller;e||((e=this._controller=new Ik(t.getZr())).enable(this.seriesModel.get("roam")),e.on("pan",W(this._onPan,this)),e.on("zoom",W(this._onZoom,this)));var n=new Re(0,0,t.getWidth(),t.getHeight());e.setPointerChecker((function(t,e,i){return n.contain(e,i)}))},e.prototype._clearController=function(){var t=this._controller;t&&(t.dispose(),t=null)},e.prototype._onPan=function(t){if("animating"!==this._state&&(Math.abs(t.dx)>3||Math.abs(t.dy)>3)){var e=this.seriesModel.getData().tree.root;if(!e)return;var n=e.getLayout();if(!n)return;this.api.dispatchAction({type:"treemapMove",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:n.x+t.dx,y:n.y+t.dy,width:n.width,height:n.height}})}},e.prototype._onZoom=function(t){var e=t.originX,n=t.originY;if("animating"!==this._state){var i=this.seriesModel.getData().tree.root;if(!i)return;var r=i.getLayout();if(!r)return;var o=new Re(r.x,r.y,r.width,r.height),a=this.seriesModel.layoutInfo,s=[1,0,0,1,0,0];_e(s,s,[-(e-=a.x),-(n-=a.y)]),Se(s,s,[t.scale,t.scale]),_e(s,s,[e,n]),o.applyTransform(s),this.api.dispatchAction({type:"treemapRender",from:this.uid,seriesId:this.seriesModel.id,rootRect:{x:o.x,y:o.y,width:o.width,height:o.height}})}},e.prototype._initEvents=function(t){var e=this;t.on("click",(function(t){if("ready"===e._state){var n=e.seriesModel.get("nodeClick",!0);if(n){var i=e.findTarget(t.offsetX,t.offsetY);if(i){var r=i.node;if(r.getLayout().isLeafRoot)e._rootToNode(i);else if("zoomToNode"===n)e._zoomToNode(i);else if("link"===n){var o=r.hostTree.data.getItemModel(r.dataIndex),a=o.get("link",!0),s=o.get("target",!0)||"blank";a&&ud(a,s)}}}}}),this)},e.prototype._renderBreadcrumb=function(t,e,n){var i=this;n||(n=null!=t.get("leafDepth",!0)?{node:t.getViewRoot()}:this.findTarget(e.getWidth()/2,e.getHeight()/2))||(n={node:t.getData().tree.root}),(this._breadcrumb||(this._breadcrumb=new VM(this.group))).render(t,e,n.node,(function(e){"animating"!==i._state&&(EM(t.getViewRoot(),e)?i._rootToNode({node:e}):i._zoomToNode({node:e}))}))},e.prototype.remove=function(){this._clearController(),this._containerGroup&&this._containerGroup.removeAll(),this._storage={nodeGroup:[],background:[],content:[]},this._state="ready",this._breadcrumb&&this._breadcrumb.remove()},e.prototype.dispose=function(){this._clearController()},e.prototype._zoomToNode=function(t){this.api.dispatchAction({type:"treemapZoomToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t.node})},e.prototype._rootToNode=function(t){this.api.dispatchAction({type:"treemapRootToNode",from:this.uid,seriesId:this.seriesModel.id,targetNode:t.node})},e.prototype.findTarget=function(t,e){var n;return this.seriesModel.getViewRoot().eachNode({attr:"viewChildren",order:"preorder"},(function(i){var r=this._storage.background[i.getRawIndex()];if(r){var o=r.transformCoordToLocal(t,e),a=r.shape;if(!(a.x<=o[0]&&o[0]<=a.x+a.width&&a.y<=o[1]&&o[1]<=a.y+a.height))return!1;n={node:i,offsetX:o[0],offsetY:o[1]}}}),this),n},e.type="treemap",e}(gg),QM=R,JM=$,tT=function(){function t(e){var n=e.mappingMethod,i=e.type,r=this.option=A(e);this.type=i,this.mappingMethod=n,this._normalizeData=uT[n];var o=t.visualHandlers[i];this.applyVisual=o.applyVisual,this.getColorMapper=o.getColorMapper,this._normalizedToVisual=o._normalizedToVisual[n],"piecewise"===n?(eT(r),function(t){var e=t.pieceList;t.hasSpecialVisual=!1,R(e,(function(e,n){e.originIndex=n,null!=e.visual&&(t.hasSpecialVisual=!0)}))}(r)):"category"===n?r.categories?function(t){var e=t.categories,n=t.categoryMap={},i=t.visual;if(QM(e,(function(t,e){n[t]=e})),!Y(i)){var r=[];$(i)?QM(i,(function(t,e){var i=n[e];r[null!=i?i:-1]=t})):r[-1]=i,i=cT(t,r)}for(var o=e.length-1;o>=0;o--)null==i[o]&&(delete n[e[o]],e.pop())}(r):eT(r,!0):(lt("linear"!==n||r.dataExtent),eT(r))}return t.prototype.mapValueToVisual=function(t){var e=this._normalizeData(t);return this._normalizedToVisual(e,t)},t.prototype.getNormalizer=function(){return W(this._normalizeData,this)},t.listVisualTypes=function(){return H(t.visualHandlers)},t.isValidType=function(e){return t.visualHandlers.hasOwnProperty(e)},t.eachVisual=function(t,e,n){$(t)?R(t,e,n):e.call(n,t)},t.mapVisual=function(e,n,i){var r,o=Y(e)?[]:$(e)?{}:(r=!0,null);return t.eachVisual(e,(function(t,e){var a=n.call(i,t,e);r?o=a:o[e]=a})),o},t.retrieveVisuals=function(e){var n,i={};return e&&QM(t.visualHandlers,(function(t,r){e.hasOwnProperty(r)&&(i[r]=e[r],n=!0)})),n?i:null},t.prepareVisualTypes=function(t){if(Y(t))t=t.slice();else{if(!JM(t))return[];var e=[];QM(t,(function(t,n){e.push(n)})),t=e}return t.sort((function(t,e){return"color"===e&&"color"!==t&&0===t.indexOf("color")?1:-1})),t},t.dependsOn=function(t,e){return"color"===e?!(!t||0!==t.indexOf(e)):t===e},t.findPieceIndex=function(t,e,n){for(var i,r=1/0,o=0,a=e.length;o<a;o++){var s=e[o].value;if(null!=s){if(s===t||G(s)&&s===t+"")return o;n&&h(s,o)}}for(o=0,a=e.length;o<a;o++){var l=e[o],c=l.interval,u=l.close;if(c){if(c[0]===-1/0){if(hT(u[1],t,c[1]))return o}else if(c[1]===1/0){if(hT(u[0],c[0],t))return o}else if(hT(u[0],c[0],t)&&hT(u[1],t,c[1]))return o;n&&h(c[0],o),n&&h(c[1],o)}}if(n)return t===1/0?e.length-1:t===-1/0?0:i;function h(e,n){var o=Math.abs(e-t);o<r&&(r=o,i=n)}},t.visualHandlers={color:{applyVisual:rT("color"),getColorMapper:function(){var t=this.option;return W("category"===t.mappingMethod?function(t,e){return!e&&(t=this._normalizeData(t)),oT.call(this,t)}:function(e,n,i){var r=!!i;return!n&&(e=this._normalizeData(e)),i=$n(e,t.parsedVisual,i),r?i:ei(i,"rgba")},this)},_normalizedToVisual:{linear:function(t){return ei($n(t,this.option.parsedVisual),"rgba")},category:oT,piecewise:function(t,e){var n=lT.call(this,e);return null==n&&(n=ei($n(t,this.option.parsedVisual),"rgba")),n},fixed:aT}},colorHue:nT((function(t,e){return Jn(t,e)})),colorSaturation:nT((function(t,e){return Jn(t,null,e)})),colorLightness:nT((function(t,e){return Jn(t,null,null,e)})),colorAlpha:nT((function(t,e){return ti(t,e)})),decal:{applyVisual:rT("decal"),_normalizedToVisual:{linear:null,category:oT,piecewise:null,fixed:null}},opacity:{applyVisual:rT("opacity"),_normalizedToVisual:sT([0,1])},liftZ:{applyVisual:rT("liftZ"),_normalizedToVisual:{linear:aT,category:aT,piecewise:aT,fixed:aT}},symbol:{applyVisual:function(t,e,n){n("symbol",this.mapValueToVisual(t))},_normalizedToVisual:{linear:iT,category:oT,piecewise:function(t,e){var n=lT.call(this,e);return null==n&&(n=iT.call(this,t)),n},fixed:aT}},symbolSize:{applyVisual:rT("symbolSize"),_normalizedToVisual:sT([0,1])}},t}();function eT(t,e){var n=t.visual,i=[];$(n)?QM(n,(function(t){i.push(t)})):null!=n&&i.push(n),e||1!==i.length||{color:1,symbol:1}.hasOwnProperty(t.type)||(i[1]=i[0]),cT(t,i)}function nT(t){return{applyVisual:function(e,n,i){var r=this.mapValueToVisual(e);i("color",t(n("color"),r))},_normalizedToVisual:sT([0,1])}}function iT(t){var e=this.option.visual;return e[Math.round(Wr(t,[0,1],[0,e.length-1],!0))]||{}}function rT(t){return function(e,n,i){i(t,this.mapValueToVisual(e))}}function oT(t){var e=this.option.visual;return e[this.option.loop&&-1!==t?t%e.length:t]}function aT(){return this.option.visual[0]}function sT(t){return{linear:function(e){return Wr(e,t,this.option.visual,!0)},category:oT,piecewise:function(e,n){var i=lT.call(this,n);return null==i&&(i=Wr(e,t,this.option.visual,!0)),i},fixed:aT}}function lT(t){var e=this.option,n=e.pieceList;if(e.hasSpecialVisual){var i=n[tT.findPieceIndex(t,n)];if(i&&i.visual)return i.visual[this.type]}}function cT(t,e){return t.visual=e,"color"===t.type&&(t.parsedVisual=B(e,(function(t){return Gn(t)||[0,0,0,1]}))),e}var uT={linear:function(t){return Wr(t,this.option.dataExtent,[0,1],!0)},piecewise:function(t){var e=this.option.pieceList,n=tT.findPieceIndex(t,e,!0);if(null!=n)return Wr(n,[0,e.length-1],[0,1],!0)},category:function(t){var e=this.option.categories?this.option.categoryMap[t]:t;return null==e?-1:e},fixed:_t};function hT(t,e,n){return t?e<=n:e<n}var dT=Io(),pT={seriesType:"treemap",reset:function(t){var e=t.getData().tree.root;e.isRemoved()||fT(e,{},t.getViewRoot().getAncestors(),t)}};function fT(t,e,n,i){var r=t.getModel(),o=t.getLayout(),a=t.hostTree.data;if(o&&!o.invisible&&o.isInView){var s,l=r.getModel("itemStyle"),c=function(t,e,n){var i=I({},e),r=n.designatedVisualItemStyle;return R(["color","colorAlpha","colorSaturation"],(function(n){r[n]=e[n];var o=t.get(n);r[n]=null,null!=o&&(i[n]=o)})),i}(l,e,i),u=a.ensureUniqueItemVisual(t.dataIndex,"style"),h=l.get("borderColor"),d=l.get("borderColorSaturation");null!=d&&(h=function(t,e){return null!=e?Jn(e,null,null,t):null}(d,s=gT(c))),u.stroke=h;var p=t.viewChildren;if(p&&p.length){var f=function(t,e,n,i,r,o){if(o&&o.length){var a=vT(e,"color")||null!=r.color&&"none"!==r.color&&(vT(e,"colorAlpha")||vT(e,"colorSaturation"));if(a){var s=e.get("visualMin"),l=e.get("visualMax"),c=n.dataExtent.slice();null!=s&&s<c[0]&&(c[0]=s),null!=l&&l>c[1]&&(c[1]=l);var u=e.get("colorMappingBy"),h={type:a.name,dataExtent:c,visual:a.range};"color"!==h.type||"index"!==u&&"id"!==u?h.mappingMethod="linear":(h.mappingMethod="category",h.loop=!0);var d=new tT(h);return dT(d).drColorMappingBy=u,d}}}(0,r,o,0,c,p);R(p,(function(t,e){if(t.depth>=n.length||t===n[t.depth]){var o=function(t,e,n,i,r,o){var a=I({},e);if(r){var s=r.type,l="color"===s&&dT(r).drColorMappingBy,c="index"===l?i:"id"===l?o.mapIdToIndex(n.getId()):n.getValue(t.get("visualDimension"));a[s]=r.mapValueToVisual(c)}return a}(r,c,t,e,f,i);fT(t,o,n,i)}}))}else s=gT(c),u.fill=s}}function gT(t){var e=mT(t,"color");if(e){var n=mT(t,"colorAlpha"),i=mT(t,"colorSaturation");return i&&(e=Jn(e,null,null,i)),n&&(e=ti(e,n)),e}}function mT(t,e){var n=t[e];if(null!=n&&"none"!==n)return n}function vT(t,e){var n=t.get(e);return Y(n)&&n.length?{name:e,range:n}:null}var yT=Math.max,bT=Math.min,xT=it,_T=R,wT=["itemStyle","borderWidth"],ST=["itemStyle","gapWidth"],CT=["upperLabel","show"],kT=["upperLabel","height"],AT={seriesType:"treemap",reset:function(t,e,n,i){var r=n.getWidth(),o=n.getHeight(),a=t.option,s=md(t.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()}),l=a.size||[],c=jr(xT(s.width,l[0]),r),u=jr(xT(s.height,l[1]),o),h=i&&i.type,d=TM(i,["treemapZoomToNode","treemapRootToNode"],t),p="treemapRender"===h||"treemapMove"===h?i.rootRect:null,f=t.getViewRoot(),g=IM(f);if("treemapMove"!==h){var m="treemapZoomToNode"===h?function(t,e,n,i,r){var o,a=(e||{}).node,s=[i,r];if(!a||a===n)return s;for(var l=i*r,c=l*t.option.zoomToNodeRatio;o=a.parentNode;){for(var u=0,h=o.children,d=0,p=h.length;d<p;d++)u+=h[d].getValue();var f=a.getValue();if(0===f)return s;c*=u/f;var g=o.getModel(),m=g.get(wT);(c+=4*m*m+(3*m+Math.max(m,OT(g)))*Math.pow(c,.5))>Kr&&(c=Kr),a=o}c<l&&(c=l);var v=Math.pow(c/l,.5);return[i*v,r*v]}(t,d,f,c,u):p?[p.width,p.height]:[c,u],v=a.sort;v&&"asc"!==v&&"desc"!==v&&(v="desc");var y={squareRatio:a.squareRatio,sort:v,leafDepth:a.leafDepth};f.hostTree.clearLayouts();var b={x:0,y:0,width:m[0],height:m[1],area:m[0]*m[1]};f.setLayout(b),MT(f,y,!1,0),b=f.getLayout(),_T(g,(function(t,e){var n=(g[e+1]||f).getValue();t.setLayout(I({dataExtent:[n,n],borderWidth:0,upperHeight:0},b))}))}var x=t.getData().tree.root;x.setLayout(function(t,e,n){if(e)return{x:e.x,y:e.y};var i={x:0,y:0};if(!n)return i;var r=n.node,o=r.getLayout();if(!o)return i;for(var a=[o.width/2,o.height/2],s=r;s;){var l=s.getLayout();a[0]+=l.x,a[1]+=l.y,s=s.parentNode}return{x:t.width/2-a[0],y:t.height/2-a[1]}}(s,p,d),!0),t.setLayoutInfo(s),ET(x,new Re(-s.x,-s.y,r,o),g,f,0)}};function MT(t,e,n,i){var r,o;if(!t.isRemoved()){var a=t.getLayout();r=a.width,o=a.height;var s=t.getModel(),l=s.get(wT),c=s.get(ST)/2,u=OT(s),h=Math.max(l,u),d=l-c,p=h-c;t.setLayout({borderWidth:l,upperHeight:h,upperLabelHeight:u},!0);var f=(r=yT(r-2*d,0))*(o=yT(o-d-p,0)),g=function(t,e,n,i,r,o){var a=t.children||[],s=i.sort;"asc"!==s&&"desc"!==s&&(s=null);var l=null!=i.leafDepth&&i.leafDepth<=o;if(r&&!l)return t.viewChildren=[];a=F(a,(function(t){return!t.isRemoved()})),function(t,e){e&&t.sort((function(t,n){var i="asc"===e?t.getValue()-n.getValue():n.getValue()-t.getValue();return 0===i?"asc"===e?t.dataIndex-n.dataIndex:n.dataIndex-t.dataIndex:i}))}(a,s);var c=function(t,e,n){for(var i=0,r=0,o=e.length;r<o;r++)i+=e[r].getValue();var a,s=t.get("visualDimension");return e&&e.length?"value"===s&&n?(a=[e[e.length-1].getValue(),e[0].getValue()],"asc"===n&&a.reverse()):(a=[1/0,-1/0],_T(e,(function(t){var e=t.getValue(s);e<a[0]&&(a[0]=e),e>a[1]&&(a[1]=e)}))):a=[NaN,NaN],{sum:i,dataExtent:a}}(e,a,s);if(0===c.sum)return t.viewChildren=[];if(c.sum=function(t,e,n,i,r){if(!i)return n;for(var o=t.get("visibleMin"),a=r.length,s=a,l=a-1;l>=0;l--){var c=r["asc"===i?a-l-1:l].getValue();c/n*e<o&&(s=l,n-=c)}return"asc"===i?r.splice(0,a-s):r.splice(s,a-s),n}(e,n,c.sum,s,a),0===c.sum)return t.viewChildren=[];for(var u=0,h=a.length;u<h;u++){var d=a[u].getValue()/c.sum*n;a[u].setLayout({area:d})}return l&&(a.length&&t.setLayout({isLeafRoot:!0},!0),a.length=0),t.viewChildren=a,t.setLayout({dataExtent:c.dataExtent},!0),a}(t,s,f,e,n,i);if(g.length){var m={x:d,y:p,width:r,height:o},v=bT(r,o),y=1/0,b=[];b.area=0;for(var x=0,_=g.length;x<_;){var w=g[x];b.push(w),b.area+=w.getLayout().area;var S=TT(b,v,e.squareRatio);S<=y?(x++,y=S):(b.area-=b.pop().getLayout().area,IT(b,v,m,c,!1),v=bT(m.width,m.height),b.length=b.area=0,y=1/0)}if(b.length&&IT(b,v,m,c,!0),!n){var C=s.get("childrenVisibleMin");null!=C&&f<C&&(n=!0)}for(x=0,_=g.length;x<_;x++)MT(g[x],e,n,i+1)}}}function TT(t,e,n){for(var i=0,r=1/0,o=0,a=void 0,s=t.length;o<s;o++)(a=t[o].getLayout().area)&&(a<r&&(r=a),a>i&&(i=a));var l=t.area*t.area,c=e*e*n;return l?yT(c*i/l,l/(c*r)):1/0}function IT(t,e,n,i,r){var o=e===n.width?0:1,a=1-o,s=["x","y"],l=["width","height"],c=n[s[o]],u=e?t.area/e:0;(r||u>n[l[a]])&&(u=n[l[a]]);for(var h=0,d=t.length;h<d;h++){var p=t[h],f={},g=u?p.getLayout().area/u:0,m=f[l[a]]=yT(u-2*i,0),v=n[s[o]]+n[l[o]]-c,y=h===d-1||v<g?v:g,b=f[l[o]]=yT(y-2*i,0);f[s[a]]=n[s[a]]+bT(i,m/2),f[s[o]]=c+bT(i,b/2),c+=y,p.setLayout(f,!0)}n[s[a]]+=u,n[l[a]]-=u}function ET(t,e,n,i,r){var o=t.getLayout(),a=n[r],s=a&&a===t;if(!(a&&!s||r===n.length&&t!==i)){t.setLayout({isInView:!0,invisible:!s&&!e.intersect(o),isAboveViewRoot:s},!0);var l=new Re(e.x-o.x,e.y-o.y,e.width,e.height);_T(t.viewChildren||[],(function(t){ET(t,l,n,i,r+1)}))}}function OT(t){return t.get(CT)?t.get(kT):0}function DT(t){var e=t.findComponents({mainType:"legend"});e&&e.length&&t.eachSeriesByType("graph",(function(t){var n=t.getCategoriesData(),i=t.getGraph().data,r=n.mapArray(n.getName);i.filterSelf((function(t){var n=i.getItemModel(t).getShallow("category");if(null!=n){U(n)&&(n=r[n]);for(var o=0;o<e.length;o++)if(!e[o].isSelected(n))return!1}return!0}))}))}function LT(t){var e={};t.eachSeriesByType("graph",(function(t){var n=t.getCategoriesData(),i=t.getData(),r={};n.each((function(i){var o=n.getName(i);r["ec-"+o]=i;var a=n.getItemModel(i),s=a.getModel("itemStyle").getItemStyle();s.fill||(s.fill=t.getColorFromPalette(o,e)),n.setItemVisual(i,"style",s);for(var l=["symbol","symbolSize","symbolKeepAspect"],c=0;c<l.length;c++){var u=a.getShallow(l[c],!0);null!=u&&n.setItemVisual(i,l[c],u)}})),n.count()&&i.each((function(t){var e=i.getItemModel(t).getShallow("category");if(null!=e){G(e)&&(e=r["ec-"+e]);var o=n.getItemVisual(e,"style");I(i.ensureUniqueItemVisual(t,"style"),o);for(var a=["symbol","symbolSize","symbolKeepAspect"],s=0;s<a.length;s++)i.setItemVisual(t,a[s],n.getItemVisual(e,a[s]))}}))}))}function PT(t){return t instanceof Array||(t=[t,t]),t}function NT(t){t.eachSeriesByType("graph",(function(t){var e=t.getGraph(),n=t.getEdgeData(),i=PT(t.get("edgeSymbol")),r=PT(t.get("edgeSymbolSize"));n.setVisual("fromSymbol",i&&i[0]),n.setVisual("toSymbol",i&&i[1]),n.setVisual("fromSymbolSize",r&&r[0]),n.setVisual("toSymbolSize",r&&r[1]),n.setVisual("style",t.getModel("lineStyle").getLineStyle()),n.each((function(t){var i=n.getItemModel(t),r=e.getEdgeByIndex(t),o=PT(i.getShallow("symbol",!0)),a=PT(i.getShallow("symbolSize",!0)),s=i.getModel("lineStyle").getLineStyle(),l=n.ensureUniqueItemVisual(t,"style");switch(I(l,s),l.stroke){case"source":var c=r.node1.getVisual("style");l.stroke=c&&c.fill;break;case"target":c=r.node2.getVisual("style"),l.stroke=c&&c.fill}o[0]&&r.setVisual("fromSymbol",o[0]),o[1]&&r.setVisual("toSymbol",o[1]),a[0]&&r.setVisual("fromSymbolSize",a[0]),a[1]&&r.setVisual("toSymbolSize",a[1])}))}))}var RT="--\x3e",BT=function(t){return t.get("autoCurveness")||null},zT=function(t,e){var n=BT(t),i=20,r=[];if(U(n))i=n;else if(Y(n))return void(t.__curvenessList=n);e>i&&(i=e);var o=i%2?i+2:i+3;r=[];for(var a=0;a<o;a++)r.push((a%2?a+1:a)/10*(a%2?-1:1));t.__curvenessList=r},FT=function(t,e,n){var i=[t.id,t.dataIndex].join("."),r=[e.id,e.dataIndex].join(".");return[n.uid,i,r].join(RT)},VT=function(t){var e=t.split(RT);return[e[0],e[2],e[1]].join(RT)},HT=function(t,e){var n=e.__edgeMap;return n[t]?n[t].length:0};function WT(t,e,n,i){var r=BT(e),o=Y(r);if(!r)return null;var a=function(t,e){var n=FT(t.node1,t.node2,e);return e.__edgeMap[n]}(t,e);if(!a)return null;for(var s=-1,l=0;l<a.length;l++)if(a[l]===n){s=l;break}var c=function(t,e){return HT(FT(t.node1,t.node2,e),e)+HT(FT(t.node2,t.node1,e),e)}(t,e);zT(e,c),t.lineStyle=t.lineStyle||{};var u=FT(t.node1,t.node2,e),h=e.__curvenessList,d=o||c%2?0:1;if(a.isForward)return h[d+s];var p=VT(u),f=HT(p,e),g=h[s+f+d];return i?o?r&&0===r[0]?(f+d)%2?g:-g:((f%2?0:1)+d)%2?g:-g:(f+d)%2?g:-g:h[s+f+d]}function jT(t){var e=t.coordinateSystem;if(!e||"view"===e.type){var n=t.getGraph();n.eachNode((function(t){var e=t.getModel();t.setLayout([+e.get("x"),+e.get("y")])})),YT(n,t)}}function YT(t,e){t.eachEdge((function(t,n){var i=ot(t.getModel().get(["lineStyle","curveness"]),-WT(t,e,n,!0),0),r=At(t.node1.getLayout()),o=At(t.node2.getLayout()),a=[r,o];+i&&a.push([(r[0]+o[0])/2-(r[1]-o[1])*i,(r[1]+o[1])/2-(o[0]-r[0])*i]),t.setLayout(a)}))}function XT(t,e){t.eachSeriesByType("graph",(function(t){var e=t.get("layout"),n=t.coordinateSystem;if(n&&"view"!==n.type){var i=t.getData(),r=[];R(n.dimensions,(function(t){r=r.concat(i.mapDimensionsAll(t))}));for(var o=0;o<i.count();o++){for(var a=[],s=!1,l=0;l<r.length;l++){var c=i.get(r[l],o);isNaN(c)||(s=!0),a.push(c)}s?i.setItemLayout(o,n.dataToPoint(a)):i.setItemLayout(o,[NaN,NaN])}YT(i.graph,t)}else e&&"none"!==e||jT(t)}))}function GT(t){var e=t.coordinateSystem;if("view"!==e.type)return 1;var n=t.option.nodeScaleRatio,i=e.scaleX;return((e.getZoom()-1)*n+1)/i}function qT(t){var e=t.getVisual("symbolSize");return e instanceof Array&&(e=(e[0]+e[1])/2),+e}var UT=Math.PI,$T=[];function ZT(t,e,n,i){var r=t.coordinateSystem;if(!r||"view"===r.type){var o=r.getBoundingRect(),a=t.getData(),s=a.graph,l=o.width/2+o.x,c=o.height/2+o.y,u=Math.min(o.width,o.height)/2,h=a.count();if(a.setLayout({cx:l,cy:c}),h){if(n){var d=r.pointToData(i),p=d[0],f=d[1],g=[p-l,f-c];Rt(g,g),Nt(g,g,u),n.setLayout([l+g[0],c+g[1]],!0),QT(n,t.get(["circular","rotateLabel"]),l,c)}KT[e](t,s,a,u,l,c,h),s.eachEdge((function(e,n){var i,r=ot(e.getModel().get(["lineStyle","curveness"]),WT(e,t,n),0),o=At(e.node1.getLayout()),a=At(e.node2.getLayout()),s=(o[0]+a[0])/2,u=(o[1]+a[1])/2;+r&&(i=[l*(r*=3)+s*(1-r),c*r+u*(1-r)]),e.setLayout([o,a,i])}))}}}var KT={value:function(t,e,n,i,r,o,a){var s=0,l=n.getSum("value"),c=2*Math.PI/(l||a);e.eachNode((function(t){var e=t.getValue("value"),n=c*(l?e:1)/2;s+=n,t.setLayout([i*Math.cos(s)+r,i*Math.sin(s)+o]),s+=n}))},symbolSize:function(t,e,n,i,r,o,a){var s=0;$T.length=a;var l=GT(t);e.eachNode((function(t){var e=qT(t);isNaN(e)&&(e=2),e<0&&(e=0),e*=l;var n=Math.asin(e/2/i);isNaN(n)&&(n=UT/2),$T[t.dataIndex]=n,s+=2*n}));var c=(2*UT-s)/a/2,u=0;e.eachNode((function(t){var e=c+$T[t.dataIndex];u+=e,(!t.getLayout()||!t.getLayout().fixed)&&t.setLayout([i*Math.cos(u)+r,i*Math.sin(u)+o]),u+=e}))}};function QT(t,e,n,i){var r=t.getGraphicEl();if(r){var o=t.getModel().get(["label","rotate"])||0,a=r.getSymbolPath();if(e){var s=t.getLayout(),l=Math.atan2(s[1]-i,s[0]-n);l<0&&(l=2*Math.PI+l);var c=s[0]<n;c&&(l-=Math.PI);var u=c?"left":"right";a.setTextConfig({rotation:-l,position:u,origin:"center"});var h=a.ensureState("emphasis");I(h.textConfig||(h.textConfig={}),{position:u})}else a.setTextConfig({rotation:o*=Math.PI/180})}}function JT(t){t.eachSeriesByType("graph",(function(t){"circular"===t.get("layout")&&ZT(t,"symbolSize")}))}var tI=It;function eI(t){t.eachSeriesByType("graph",(function(t){var e=t.coordinateSystem;if(!e||"view"===e.type)if("force"===t.get("layout")){var n=t.preservedPoints||{},i=t.getGraph(),r=i.data,o=i.edgeData,a=t.getModel("force"),s=a.get("initLayout");t.preservedPoints?r.each((function(t){var e=r.getId(t);r.setItemLayout(t,n[e]||[NaN,NaN])})):s&&"none"!==s?"circular"===s&&ZT(t,"value"):jT(t);var l=r.getDataExtent("value"),c=o.getDataExtent("value"),u=a.get("repulsion"),h=a.get("edgeLength"),d=Y(u)?u:[u,u],p=Y(h)?h:[h,h];p=[p[1],p[0]];var f=r.mapArray("value",(function(t,e){var n=r.getItemLayout(e),i=Wr(t,l,d);return isNaN(i)&&(i=(d[0]+d[1])/2),{w:i,rep:i,fixed:r.getItemModel(e).get("fixed"),p:!n||isNaN(n[0])||isNaN(n[1])?null:n}})),g=o.mapArray("value",(function(e,n){var r=i.getEdgeByIndex(n),o=Wr(e,c,p);isNaN(o)&&(o=(p[0]+p[1])/2);var a=r.getModel(),s=ot(r.getModel().get(["lineStyle","curveness"]),-WT(r,t,n,!0),0);return{n1:f[r.node1.dataIndex],n2:f[r.node2.dataIndex],d:o,curveness:s,ignoreForceLayout:a.get("ignoreForceLayout")}})),m=e.getBoundingRect(),v=function(t,e,n){for(var i=t,r=e,o=n.rect,a=o.width,s=o.height,l=[o.x+a/2,o.y+s/2],c=null==n.gravity?.1:n.gravity,u=0;u<i.length;u++){var h=i[u];h.p||(h.p=Ct(a*(Math.random()-.5)+l[0],s*(Math.random()-.5)+l[1])),h.pp=At(h.p),h.edges=null}var d,p,f=null==n.friction?.6:n.friction,g=f;return{warmUp:function(){g=.8*f},setFixed:function(t){i[t].fixed=!0},setUnfixed:function(t){i[t].fixed=!1},beforeStep:function(t){d=t},afterStep:function(t){p=t},step:function(t){d&&d(i,r);for(var e=[],n=i.length,o=0;o<r.length;o++){var a=r[o];if(!a.ignoreForceLayout){var s=a.n1;Et(e,(m=a.n2).p,s.p);var u=Ot(e)-a.d,h=m.w/(s.w+m.w);isNaN(h)&&(h=0),Rt(e,e),!s.fixed&&tI(s.p,s.p,e,h*u*g),!m.fixed&&tI(m.p,m.p,e,-(1-h)*u*g)}}for(o=0;o<n;o++)(b=i[o]).fixed||(Et(e,l,b.p),tI(b.p,b.p,e,c*g));for(o=0;o<n;o++){s=i[o];for(var f=o+1;f<n;f++){var m;Et(e,(m=i[f]).p,s.p),0===(u=Ot(e))&&(Mt(e,Math.random()-.5,Math.random()-.5),u=1);var v=(s.rep+m.rep)/u/u;!s.fixed&&tI(s.pp,s.pp,e,v),!m.fixed&&tI(m.pp,m.pp,e,-v)}}var y=[];for(o=0;o<n;o++){var b;(b=i[o]).fixed||(Et(y,b.p,b.pp),tI(b.p,b.p,y,g),kt(b.pp,b.p))}var x=(g*=.992)<.01;p&&p(i,r,x),t&&t(x)}}}(f,g,{rect:m,gravity:a.get("gravity"),friction:a.get("friction")});v.beforeStep((function(t,e){for(var n=0,r=t.length;n<r;n++)t[n].fixed&&kt(t[n].p,i.getNodeByIndex(n).getLayout())})),v.afterStep((function(t,e,o){for(var a=0,s=t.length;a<s;a++)t[a].fixed||i.getNodeByIndex(a).setLayout(t[a].p),n[r.getId(a)]=t[a].p;for(a=0,s=e.length;a<s;a++){var l=e[a],c=i.getEdgeByIndex(a),u=l.n1.p,h=l.n2.p,d=c.getLayout();(d=d?d.slice():[])[0]=d[0]||[],d[1]=d[1]||[],kt(d[0],u),kt(d[1],h),+l.curveness&&(d[2]=[(u[0]+h[0])/2-(u[1]-h[1])*l.curveness,(u[1]+h[1])/2-(h[0]-u[0])*l.curveness]),c.setLayout(d)}})),t.forceLayout=v,t.preservedPoints=n,v.step()}else t.forceLayout=null}))}function nI(t,e){var n=[];return t.eachSeriesByType("graph",(function(t){var i=t.get("coordinateSystem");if(!i||"view"===i){var r=t.getData(),o=[],a=[];Ea(r.mapArray((function(t){var e=r.getItemModel(t);return[+e.get("x"),+e.get("y")]})),o,a),a[0]-o[0]==0&&(a[0]+=1,o[0]-=1),a[1]-o[1]==0&&(a[1]+=1,o[1]-=1);var s=(a[0]-o[0])/(a[1]-o[1]),l=function(t,e,n){return md(I(t.getBoxLayoutParams(),{aspect:n}),{width:e.getWidth(),height:e.getHeight()})}(t,e,s);isNaN(s)&&(o=[l.x,l.y],a=[l.x+l.width,l.y+l.height]);var c=a[0]-o[0],u=a[1]-o[1],h=l.width,d=l.height,p=t.coordinateSystem=new zA;p.zoomLimit=t.get("scaleLimit"),p.setBoundingRect(o[0],o[1],c,u),p.setViewRect(l.x,l.y,h,d),p.setCenter(t.get("center"),e),p.setZoom(t.get("zoom")),n.push(p)}})),n}var iI=Fc.prototype,rI=jc.prototype,oI=function(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.percent=1};function aI(t){return isNaN(+t.cpx1)||isNaN(+t.cpy1)}!function(t){n((function(){return null!==t&&t.apply(this,arguments)||this}),t)}(oI);var sI=function(t){function e(e){var n=t.call(this,e)||this;return n.type="ec-line",n}return n(e,t),e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new oI},e.prototype.buildPath=function(t,e){aI(e)?iI.buildPath.call(this,t,e):rI.buildPath.call(this,t,e)},e.prototype.pointAt=function(t){return aI(this.shape)?iI.pointAt.call(this,t):rI.pointAt.call(this,t)},e.prototype.tangentAt=function(t){var e=this.shape,n=aI(e)?[e.x2-e.x1,e.y2-e.y1]:rI.tangentAt.call(this,t);return Rt(n,n)},e}(_s),lI=["fromSymbol","toSymbol"];function cI(t){return"_"+t+"Type"}function uI(t,e,n){var i=e.getItemVisual(n,t);if(!i||"none"===i)return i;var r=e.getItemVisual(n,t+"Size"),o=e.getItemVisual(n,t+"Rotate"),a=e.getItemVisual(n,t+"Offset"),s=e.getItemVisual(n,t+"KeepAspect"),l=Tm(r);return i+l+Im(a||0,l)+(o||"")+(s||"")}function hI(t,e,n){var i=e.getItemVisual(n,t);if(i&&"none"!==i){var r=e.getItemVisual(n,t+"Size"),o=e.getItemVisual(n,t+"Rotate"),a=e.getItemVisual(n,t+"Offset"),s=e.getItemVisual(n,t+"KeepAspect"),l=Tm(r),c=Im(a||0,l),u=Mm(i,-l[0]/2+c[0],-l[1]/2+c[1],l[0],l[1],null,s);return u.__specifiedRotation=null==o||isNaN(o)?void 0:+o*Math.PI/180||0,u.name=t,u}}function dI(t,e){t.x1=e[0][0],t.y1=e[0][1],t.x2=e[1][0],t.y2=e[1][1],t.percent=1;var n=e[2];n?(t.cpx1=n[0],t.cpy1=n[1]):(t.cpx1=NaN,t.cpy1=NaN)}var pI=function(t){function e(e,n,i){var r=t.call(this)||this;return r._createLine(e,n,i),r}return n(e,t),e.prototype._createLine=function(t,e,n){var i=t.hostModel,r=function(t){var e=new sI({name:"line",subPixelOptimize:!0});return dI(e.shape,t),e}(t.getItemLayout(e));r.shape.percent=0,su(r,{shape:{percent:1}},i,e),this.add(r),R(lI,(function(n){var i=hI(n,t,e);this.add(i),this[cI(n)]=uI(n,t,e)}),this),this._updateCommonStl(t,e,n)},e.prototype.updateData=function(t,e,n){var i=t.hostModel,r=this.childOfName("line"),o=t.getItemLayout(e),a={shape:{}};dI(a.shape,o),au(r,a,i,e),R(lI,(function(n){var i=uI(n,t,e),r=cI(n);if(this[r]!==i){this.remove(this.childOfName(n));var o=hI(n,t,e);this.add(o)}this[r]=i}),this),this._updateCommonStl(t,e,n)},e.prototype.getLinePath=function(){return this.childAt(0)},e.prototype._updateCommonStl=function(t,e,n){var i=t.hostModel,r=this.childOfName("line"),o=n&&n.emphasisLineStyle,a=n&&n.blurLineStyle,s=n&&n.selectLineStyle,l=n&&n.labelStatesModels,c=n&&n.emphasisDisabled,u=n&&n.focus,h=n&&n.blurScope;if(!n||t.hasItemOption){var d=t.getItemModel(e),p=d.getModel("emphasis");o=p.getModel("lineStyle").getLineStyle(),a=d.getModel(["blur","lineStyle"]).getLineStyle(),s=d.getModel(["select","lineStyle"]).getLineStyle(),c=p.get("disabled"),u=p.get("focus"),h=p.get("blurScope"),l=Gu(d)}var f=t.getItemVisual(e,"style"),g=f.stroke;r.useStyle(f),r.style.fill=null,r.style.strokeNoScale=!0,r.ensureState("emphasis").style=o,r.ensureState("blur").style=a,r.ensureState("select").style=s,R(lI,(function(t){var e=this.childOfName(t);if(e){e.setColor(g),e.style.opacity=f.opacity;for(var n=0;n<el.length;n++){var i=el[n],o=r.getState(i);if(o){var a=o.style||{},s=e.ensureState(i),l=s.style||(s.style={});null!=a.stroke&&(l[e.__isEmptyBrush?"stroke":"fill"]=a.stroke),null!=a.opacity&&(l.opacity=a.opacity)}}e.markRedraw()}}),this);var m=i.getRawValue(e);Xu(this,l,{labelDataIndex:e,labelFetcher:{getFormattedLabel:function(e,n){return i.getFormattedLabel(e,n,t.dataType)}},inheritColor:g||"#000",defaultOpacity:f.opacity,defaultText:(null==m?t.getName(e):isFinite(m)?Yr(m):m)+""});var v=this.getTextContent();if(v){var y=l.normal;v.__align=v.style.align,v.__verticalAlign=v.style.verticalAlign,v.__position=y.get("position")||"middle";var b=y.get("distance");Y(b)||(b=[b,b]),v.__labelDistance=b}this.setTextConfig({position:null,local:!0,inside:!1}),Bl(this,u,h,c)},e.prototype.highlight=function(){Sl(this)},e.prototype.downplay=function(){Cl(this)},e.prototype.updateLayout=function(t,e){this.setLinePoints(t.getItemLayout(e))},e.prototype.setLinePoints=function(t){var e=this.childOfName("line");dI(e.shape,t),e.dirty()},e.prototype.beforeUpdate=function(){var t=this,e=t.childOfName("fromSymbol"),n=t.childOfName("toSymbol"),i=t.getTextContent();if(e||n||i&&!i.ignore){for(var r=1,o=this.parent;o;)o.scaleX&&(r/=o.scaleX),o=o.parent;var a=t.childOfName("line");if(this.__dirty||a.__dirty){var s=a.shape.percent,l=a.pointAt(0),c=a.pointAt(s),u=Et([],c,l);if(Rt(u,u),e&&(e.setPosition(l),S(e,0),e.scaleX=e.scaleY=r*s,e.markRedraw()),n&&(n.setPosition(c),S(n,1),n.scaleX=n.scaleY=r*s,n.markRedraw()),i&&!i.ignore){i.x=i.y=0,i.originX=i.originY=0;var h=void 0,d=void 0,p=i.__labelDistance,f=p[0]*r,g=p[1]*r,m=s/2,v=a.tangentAt(m),y=[v[1],-v[0]],b=a.pointAt(m);y[1]>0&&(y[0]=-y[0],y[1]=-y[1]);var x=v[0]<0?-1:1;if("start"!==i.__position&&"end"!==i.__position){var _=-Math.atan2(v[1],v[0]);c[0]<l[0]&&(_=Math.PI+_),i.rotation=_}var w=void 0;switch(i.__position){case"insideStartTop":case"insideMiddleTop":case"insideEndTop":case"middle":w=-g,d="bottom";break;case"insideStartBottom":case"insideMiddleBottom":case"insideEndBottom":w=g,d="top";break;default:w=0,d="middle"}switch(i.__position){case"end":i.x=u[0]*f+c[0],i.y=u[1]*g+c[1],h=u[0]>.8?"left":u[0]<-.8?"right":"center",d=u[1]>.8?"top":u[1]<-.8?"bottom":"middle";break;case"start":i.x=-u[0]*f+l[0],i.y=-u[1]*g+l[1],h=u[0]>.8?"right":u[0]<-.8?"left":"center",d=u[1]>.8?"bottom":u[1]<-.8?"top":"middle";break;case"insideStartTop":case"insideStart":case"insideStartBottom":i.x=f*x+l[0],i.y=l[1]+w,h=v[0]<0?"right":"left",i.originX=-f*x,i.originY=-w;break;case"insideMiddleTop":case"insideMiddle":case"insideMiddleBottom":case"middle":i.x=b[0],i.y=b[1]+w,h="center",i.originY=-w;break;case"insideEndTop":case"insideEnd":case"insideEndBottom":i.x=-f*x+c[0],i.y=c[1]+w,h=v[0]>=0?"right":"left",i.originX=f*x,i.originY=-w}i.scaleX=i.scaleY=r,i.setStyle({verticalAlign:i.__verticalAlign||d,align:i.__align||h})}}}function S(t,e){var n=t.__specifiedRotation;if(null==n){var i=a.tangentAt(e);t.attr("rotation",(1===e?-1:1)*Math.PI/2-Math.atan2(i[1],i[0]))}else t.attr("rotation",n)}},e}(Dr),fI=function(){function t(t){this.group=new Dr,this._LineCtor=t||pI}return t.prototype.updateData=function(t){var e=this;this._progressiveEls=null;var n=this,i=n.group,r=n._lineData;n._lineData=t,r||i.removeAll();var o=gI(t);t.diff(r).add((function(n){e._doAdd(t,n,o)})).update((function(n,i){e._doUpdate(r,t,i,n,o)})).remove((function(t){i.remove(r.getItemGraphicEl(t))})).execute()},t.prototype.updateLayout=function(){var t=this._lineData;t&&t.eachItemGraphicEl((function(e,n){e.updateLayout(t,n)}),this)},t.prototype.incrementalPrepareUpdate=function(t){this._seriesScope=gI(t),this._lineData=null,this.group.removeAll()},t.prototype.incrementalUpdate=function(t,e){function n(t){t.isGroup||function(t){return t.animators&&t.animators.length>0}(t)||(t.incremental=!0,t.ensureState("emphasis").hoverLayer=!0)}this._progressiveEls=[];for(var i=t.start;i<t.end;i++)if(vI(e.getItemLayout(i))){var r=new this._LineCtor(e,i,this._seriesScope);r.traverse(n),this.group.add(r),e.setItemGraphicEl(i,r),this._progressiveEls.push(r)}},t.prototype.remove=function(){this.group.removeAll()},t.prototype.eachRendered=function(t){Vu(this._progressiveEls||this.group,t)},t.prototype._doAdd=function(t,e,n){if(vI(t.getItemLayout(e))){var i=new this._LineCtor(t,e,n);t.setItemGraphicEl(e,i),this.group.add(i)}},t.prototype._doUpdate=function(t,e,n,i,r){var o=t.getItemGraphicEl(n);vI(e.getItemLayout(i))?(o?o.updateData(e,i,r):o=new this._LineCtor(e,i,r),e.setItemGraphicEl(i,o),this.group.add(o)):this.group.remove(o)},t}();function gI(t){var e=t.hostModel,n=e.getModel("emphasis");return{lineStyle:e.getModel("lineStyle").getLineStyle(),emphasisLineStyle:n.getModel(["lineStyle"]).getLineStyle(),blurLineStyle:e.getModel(["blur","lineStyle"]).getLineStyle(),selectLineStyle:e.getModel(["select","lineStyle"]).getLineStyle(),emphasisDisabled:n.get("disabled"),blurScope:n.get("blurScope"),focus:n.get("focus"),labelStatesModels:Gu(e)}}function mI(t){return isNaN(t[0])||isNaN(t[1])}function vI(t){return t&&!mI(t[0])&&!mI(t[1])}var yI=[],bI=[],xI=[],_I=wn,wI=Vt,SI=Math.abs;function CI(t,e,n){for(var i,r=t[0],o=t[1],a=t[2],s=1/0,l=n*n,c=.1,u=.1;u<=.9;u+=.1)yI[0]=_I(r[0],o[0],a[0],u),yI[1]=_I(r[1],o[1],a[1],u),(p=SI(wI(yI,e)-l))<s&&(s=p,i=u);for(var h=0;h<32;h++){var d=i+c;bI[0]=_I(r[0],o[0],a[0],i),bI[1]=_I(r[1],o[1],a[1],i),xI[0]=_I(r[0],o[0],a[0],d),xI[1]=_I(r[1],o[1],a[1],d);var p=wI(bI,e)-l;if(SI(p)<.01)break;var f=wI(xI,e)-l;c/=2,p<0?f>=0?i+=c:i-=c:f>=0?i-=c:i+=c}return i}function kI(t,e){var n=[],i=kn,r=[[],[],[]],o=[[],[]],a=[];e/=2,t.eachEdge((function(t,s){var l=t.getLayout(),c=t.getVisual("fromSymbol"),u=t.getVisual("toSymbol");l.__original||(l.__original=[At(l[0]),At(l[1])],l[2]&&l.__original.push(At(l[2])));var h=l.__original;if(null!=l[2]){if(kt(r[0],h[0]),kt(r[1],h[2]),kt(r[2],h[1]),c&&"none"!==c){var d=qT(t.node1),p=CI(r,h[0],d*e);i(r[0][0],r[1][0],r[2][0],p,n),r[0][0]=n[3],r[1][0]=n[4],i(r[0][1],r[1][1],r[2][1],p,n),r[0][1]=n[3],r[1][1]=n[4]}u&&"none"!==u&&(d=qT(t.node2),p=CI(r,h[1],d*e),i(r[0][0],r[1][0],r[2][0],p,n),r[1][0]=n[1],r[2][0]=n[2],i(r[0][1],r[1][1],r[2][1],p,n),r[1][1]=n[1],r[2][1]=n[2]),kt(l[0],r[0]),kt(l[1],r[2]),kt(l[2],r[1])}else kt(o[0],h[0]),kt(o[1],h[1]),Et(a,o[1],o[0]),Rt(a,a),c&&"none"!==c&&(d=qT(t.node1),It(o[0],o[0],a,d*e)),u&&"none"!==u&&(d=qT(t.node2),It(o[1],o[1],a,-d*e)),kt(l[0],o[0]),kt(l[1],o[1])}))}function AI(t){return"view"===t.type}var MI=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.prototype.init=function(t,e){var n=new $w,i=new fI,r=this.group;this._controller=new Ik(e.getZr()),this._controllerHost={target:r},r.add(n.group),r.add(i.group),this._symbolDraw=n,this._lineDraw=i,this._firstRender=!0},e.prototype.render=function(t,e,n){var i=this,r=t.coordinateSystem;this._model=t;var o=this._symbolDraw,a=this._lineDraw,s=this.group;if(AI(r)){var l={x:r.x,y:r.y,scaleX:r.scaleX,scaleY:r.scaleY};this._firstRender?s.attr(l):au(s,l,t)}kI(t.getGraph(),GT(t));var c=t.getData();o.updateData(c);var u=t.getEdgeData();a.updateData(u),this._updateNodeAndLinkScale(),this._updateController(t,e,n),clearTimeout(this._layoutTimeout);var h=t.forceLayout,d=t.get(["force","layoutAnimation"]);h&&this._startForceLayoutIteration(h,d);var p=t.get("layout");c.graph.eachNode((function(e){var n=e.dataIndex,r=e.getGraphicEl(),o=e.getModel();if(r){r.off("drag").off("dragend");var a=o.get("draggable");a&&r.on("drag",(function(o){switch(p){case"force":h.warmUp(),!i._layouting&&i._startForceLayoutIteration(h,d),h.setFixed(n),c.setItemLayout(n,[r.x,r.y]);break;case"circular":c.setItemLayout(n,[r.x,r.y]),e.setLayout({fixed:!0},!0),ZT(t,"symbolSize",e,[o.offsetX,o.offsetY]),i.updateLayout(t);break;default:c.setItemLayout(n,[r.x,r.y]),YT(t.getGraph(),t),i.updateLayout(t)}})).on("dragend",(function(){h&&h.setUnfixed(n)})),r.setDraggable(a,!!o.get("cursor")),"adjacency"===o.get(["emphasis","focus"])&&($s(r).focus=e.getAdjacentDataIndices())}})),c.graph.eachEdge((function(t){var e=t.getGraphicEl(),n=t.getModel().get(["emphasis","focus"]);e&&"adjacency"===n&&($s(e).focus={edge:[t.dataIndex],node:[t.node1.dataIndex,t.node2.dataIndex]})}));var f="circular"===t.get("layout")&&t.get(["circular","rotateLabel"]),g=c.getLayout("cx"),m=c.getLayout("cy");c.graph.eachNode((function(t){QT(t,f,g,m)})),this._firstRender=!1},e.prototype.dispose=function(){this.remove(),this._controller&&this._controller.dispose(),this._controllerHost=null},e.prototype._startForceLayoutIteration=function(t,e){var n=this;!function i(){t.step((function(t){n.updateLayout(n._model),(n._layouting=!t)&&(e?n._layoutTimeout=setTimeout(i,16):i())}))}()},e.prototype._updateController=function(t,e,n){var i=this,r=this._controller,o=this._controllerHost,a=this.group;r.setPointerChecker((function(e,i,r){var o=a.getBoundingRect();return o.applyTransform(a.transform),o.contain(i,r)&&!Bk(e,n,t)})),AI(t.coordinateSystem)?(r.enable(t.get("roam")),o.zoomLimit=t.get("scaleLimit"),o.zoom=t.coordinateSystem.getZoom(),r.off("pan").off("zoom").on("pan",(function(e){Lk(o,e.dx,e.dy),n.dispatchAction({seriesId:t.id,type:"graphRoam",dx:e.dx,dy:e.dy})})).on("zoom",(function(e){Pk(o,e.scale,e.originX,e.originY),n.dispatchAction({seriesId:t.id,type:"graphRoam",zoom:e.scale,originX:e.originX,originY:e.originY}),i._updateNodeAndLinkScale(),kI(t.getGraph(),GT(t)),i._lineDraw.updateLayout(),n.updateLabelLayout()}))):r.disable()},e.prototype._updateNodeAndLinkScale=function(){var t=this._model,e=t.getData(),n=GT(t);e.eachItemGraphicEl((function(t,e){t&&t.setSymbolScale(n)}))},e.prototype.updateLayout=function(t){kI(t.getGraph(),GT(t)),this._symbolDraw.updateLayout(),this._lineDraw.updateLayout()},e.prototype.remove=function(){clearTimeout(this._layoutTimeout),this._layouting=!1,this._layoutTimeout=null,this._symbolDraw&&this._symbolDraw.remove(),this._lineDraw&&this._lineDraw.remove()},e.type="graph",e}(gg);function TI(t){return"_EC_"+t}var II=function(){function t(t){this.type="graph",this.nodes=[],this.edges=[],this._nodesMap={},this._edgesMap={},this._directed=t||!1}return t.prototype.isDirected=function(){return this._directed},t.prototype.addNode=function(t,e){t=null==t?""+e:""+t;var n=this._nodesMap;if(!n[TI(t)]){var i=new EI(t,e);return i.hostGraph=this,this.nodes.push(i),n[TI(t)]=i,i}},t.prototype.getNodeByIndex=function(t){var e=this.data.getRawIndex(t);return this.nodes[e]},t.prototype.getNodeById=function(t){return this._nodesMap[TI(t)]},t.prototype.addEdge=function(t,e,n){var i=this._nodesMap,r=this._edgesMap;if(U(t)&&(t=this.nodes[t]),U(e)&&(e=this.nodes[e]),t instanceof EI||(t=i[TI(t)]),e instanceof EI||(e=i[TI(e)]),t&&e){var o=t.id+"-"+e.id,a=new OI(t,e,n);return a.hostGraph=this,this._directed&&(t.outEdges.push(a),e.inEdges.push(a)),t.edges.push(a),t!==e&&e.edges.push(a),this.edges.push(a),r[o]=a,a}},t.prototype.getEdgeByIndex=function(t){var e=this.edgeData.getRawIndex(t);return this.edges[e]},t.prototype.getEdge=function(t,e){t instanceof EI&&(t=t.id),e instanceof EI&&(e=e.id);var n=this._edgesMap;return this._directed?n[t+"-"+e]:n[t+"-"+e]||n[e+"-"+t]},t.prototype.eachNode=function(t,e){for(var n=this.nodes,i=n.length,r=0;r<i;r++)n[r].dataIndex>=0&&t.call(e,n[r],r)},t.prototype.eachEdge=function(t,e){for(var n=this.edges,i=n.length,r=0;r<i;r++)n[r].dataIndex>=0&&n[r].node1.dataIndex>=0&&n[r].node2.dataIndex>=0&&t.call(e,n[r],r)},t.prototype.breadthFirstTraverse=function(t,e,n,i){if(e instanceof EI||(e=this._nodesMap[TI(e)]),e){for(var r="out"===n?"outEdges":"in"===n?"inEdges":"edges",o=0;o<this.nodes.length;o++)this.nodes[o].__visited=!1;if(!t.call(i,e,null))for(var a=[e];a.length;){var s=a.shift(),l=s[r];for(o=0;o<l.length;o++){var c=l[o],u=c.node1===s?c.node2:c.node1;if(!u.__visited){if(t.call(i,u,s))return;a.push(u),u.__visited=!0}}}}},t.prototype.update=function(){for(var t=this.data,e=this.edgeData,n=this.nodes,i=this.edges,r=0,o=n.length;r<o;r++)n[r].dataIndex=-1;for(r=0,o=t.count();r<o;r++)n[t.getRawIndex(r)].dataIndex=r;for(e.filterSelf((function(t){var n=i[e.getRawIndex(t)];return n.node1.dataIndex>=0&&n.node2.dataIndex>=0})),r=0,o=i.length;r<o;r++)i[r].dataIndex=-1;for(r=0,o=e.count();r<o;r++)i[e.getRawIndex(r)].dataIndex=r},t.prototype.clone=function(){for(var e=new t(this._directed),n=this.nodes,i=this.edges,r=0;r<n.length;r++)e.addNode(n[r].id,n[r].dataIndex);for(r=0;r<i.length;r++){var o=i[r];e.addEdge(o.node1.id,o.node2.id,o.dataIndex)}return e},t}(),EI=function(){function t(t,e){this.inEdges=[],this.outEdges=[],this.edges=[],this.dataIndex=-1,this.id=null==t?"":t,this.dataIndex=null==e?-1:e}return t.prototype.degree=function(){return this.edges.length},t.prototype.inDegree=function(){return this.inEdges.length},t.prototype.outDegree=function(){return this.outEdges.length},t.prototype.getModel=function(t){if(!(this.dataIndex<0))return this.hostGraph.data.getItemModel(this.dataIndex).getModel(t)},t.prototype.getAdjacentDataIndices=function(){for(var t={edge:[],node:[]},e=0;e<this.edges.length;e++){var n=this.edges[e];n.dataIndex<0||(t.edge.push(n.dataIndex),t.node.push(n.node1.dataIndex,n.node2.dataIndex))}return t},t.prototype.getTrajectoryDataIndices=function(){for(var t=mt(),e=mt(),n=0;n<this.edges.length;n++){var i=this.edges[n];if(!(i.dataIndex<0)){t.set(i.dataIndex,!0);for(var r=[i.node1],o=[i.node2],a=0;a<r.length;){var s=r[a];a++,e.set(s.dataIndex,!0);for(var l=0;l<s.inEdges.length;l++)t.set(s.inEdges[l].dataIndex,!0),r.push(s.inEdges[l].node1)}for(a=0;a<o.length;){var c=o[a];for(a++,e.set(c.dataIndex,!0),l=0;l<c.outEdges.length;l++)t.set(c.outEdges[l].dataIndex,!0),o.push(c.outEdges[l].node2)}}}return{edge:t.keys(),node:e.keys()}},t}(),OI=function(){function t(t,e,n){this.dataIndex=-1,this.node1=t,this.node2=e,this.dataIndex=null==n?-1:n}return t.prototype.getModel=function(t){if(!(this.dataIndex<0))return this.hostGraph.edgeData.getItemModel(this.dataIndex).getModel(t)},t.prototype.getAdjacentDataIndices=function(){return{edge:[this.dataIndex],node:[this.node1.dataIndex,this.node2.dataIndex]}},t.prototype.getTrajectoryDataIndices=function(){var t=mt(),e=mt();t.set(this.dataIndex,!0);for(var n=[this.node1],i=[this.node2],r=0;r<n.length;){var o=n[r];r++,e.set(o.dataIndex,!0);for(var a=0;a<o.inEdges.length;a++)t.set(o.inEdges[a].dataIndex,!0),n.push(o.inEdges[a].node1)}for(r=0;r<i.length;){var s=i[r];for(r++,e.set(s.dataIndex,!0),a=0;a<s.outEdges.length;a++)t.set(s.outEdges[a].dataIndex,!0),i.push(s.outEdges[a].node2)}return{edge:t.keys(),node:e.keys()}},t}();function DI(t,e){return{getValue:function(n){var i=this[t][e];return i.getStore().get(i.getDimensionIndex(n||"value"),this.dataIndex)},setVisual:function(n,i){this.dataIndex>=0&&this[t][e].setItemVisual(this.dataIndex,n,i)},getVisual:function(n){return this[t][e].getItemVisual(this.dataIndex,n)},setLayout:function(n,i){this.dataIndex>=0&&this[t][e].setItemLayout(this.dataIndex,n,i)},getLayout:function(){return this[t][e].getItemLayout(this.dataIndex)},getGraphicEl:function(){return this[t][e].getItemGraphicEl(this.dataIndex)},getRawIndex:function(){return this[t][e].getRawIndex(this.dataIndex)}}}function LI(t,e,n,i,r){for(var o=new II(i),a=0;a<t.length;a++)o.addNode(it(t[a].id,t[a].name,a),a);var s=[],l=[],c=0;for(a=0;a<e.length;a++){var u=e[a],h=u.source,d=u.target;o.addEdge(h,d,c)&&(l.push(u),s.push(it(ko(u.id,null),h+" > "+d)),c++)}var p,f=n.get("coordinateSystem");if("cartesian2d"===f||"polar"===f)p=nb(t,n);else{var g=op.get(f),m=g&&g.dimensions||[];D(m,"value")<0&&m.concat(["value"]);var v=Uy(t,{coordDimensions:m,encodeDefine:n.getEncode()}).dimensions;(p=new qy(v,n)).initData(t)}var y=new qy(["value"],n);return y.initData(l,s),r&&r(p,y),yM({mainData:p,struct:o,structAttr:"graph",datas:{node:p,edge:y},datasAttr:{node:"data",edge:"edgeData"}}),o.update(),o}P(EI,DI("hostGraph","data")),P(OI,DI("hostGraph","edgeData"));var PI=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.hasSymbolVisual=!0,n}return n(e,t),e.prototype.init=function(e){t.prototype.init.apply(this,arguments);var n=this;function i(){return n._categoriesData}this.legendVisualProvider=new cC(i,i),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},e.prototype.mergeOption=function(e){t.prototype.mergeOption.apply(this,arguments),this.fillDataTextStyle(e.edges||e.links),this._updateCategoriesData()},e.prototype.mergeDefaultAndTheme=function(e){t.prototype.mergeDefaultAndTheme.apply(this,arguments),yo(e,"edgeLabel",["show"])},e.prototype.getInitialData=function(t,e){var n,i=t.edges||t.links||[],r=t.data||t.nodes||[],o=this;if(r&&i){BT(n=this)&&(n.__curvenessList=[],n.__edgeMap={},zT(n));var a=LI(r,i,this,!0,(function(t,e){t.wrapMethod("getItemModel",(function(t){var e=o._categoriesModels[t.getShallow("category")];return e&&(e.parentModel=t.parentModel,t.parentModel=e),t}));var n=gh.prototype.getModel;function i(t,e){var i=n.call(this,t,e);return i.resolveParentPath=r,i}function r(t){if(t&&("label"===t[0]||"label"===t[1])){var e=t.slice();return"label"===t[0]?e[0]="edgeLabel":"label"===t[1]&&(e[1]="edgeLabel"),e}return t}e.wrapMethod("getItemModel",(function(t){return t.resolveParentPath=r,t.getModel=i,t}))}));return R(a.edges,(function(t){!function(t,e,n,i){if(BT(n)){var r=FT(t,e,n),o=n.__edgeMap,a=o[VT(r)];o[r]&&!a?o[r].isForward=!0:a&&o[r]&&(a.isForward=!0,o[r].isForward=!1),o[r]=o[r]||[],o[r].push(i)}}(t.node1,t.node2,this,t.dataIndex)}),this),a.data}},e.prototype.getGraph=function(){return this.getData().graph},e.prototype.getEdgeData=function(){return this.getGraph().edgeData},e.prototype.getCategoriesData=function(){return this._categoriesData},e.prototype.formatTooltip=function(t,e,n){if("edge"===n){var i=this.getData(),r=this.getDataParams(t,n),o=i.graph.getEdgeByIndex(t),a=i.getName(o.node1.dataIndex),s=i.getName(o.node2.dataIndex),l=[];return null!=a&&l.push(a),null!=s&&l.push(s),Hf("nameValue",{name:l.join(" > "),value:r.value,noValue:null==r.value})}return Jf({series:this,dataIndex:t,multipleSeries:e})},e.prototype._updateCategoriesData=function(){var t=B(this.option.categories||[],(function(t){return null!=t.value?t:I({value:0},t)})),e=new qy(["value"],this);e.initData(t),this._categoriesData=e,this._categoriesModels=e.mapArray((function(t){return e.getItemModel(t)}))},e.prototype.setZoom=function(t){this.option.zoom=t},e.prototype.setCenter=function(t){this.option.center=t},e.prototype.isAnimationEnabled=function(){return t.prototype.isAnimationEnabled.call(this)&&!("force"===this.get("layout")&&this.get(["force","layoutAnimation"]))},e.type="series.graph",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={z:2,coordinateSystem:"view",legendHoverLink:!0,layout:null,circular:{rotateLabel:!1},force:{initLayout:null,repulsion:[0,50],gravity:.1,friction:.6,edgeLength:30,layoutAnimation:!0},left:"center",top:"center",symbol:"circle",symbolSize:10,edgeSymbol:["none","none"],edgeSymbolSize:10,edgeLabel:{position:"middle",distance:5},draggable:!1,roam:!1,center:null,zoom:1,nodeScaleRatio:.6,label:{show:!1,formatter:"{b}"},itemStyle:{},lineStyle:{color:"#aaa",width:1,opacity:.5},emphasis:{scale:!0,label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},e}(ig),NI={type:"graphRoam",event:"graphRoam",update:"none"},RI=function(){this.angle=0,this.width=10,this.r=10,this.x=0,this.y=0},BI=function(t){function e(e){var n=t.call(this,e)||this;return n.type="pointer",n}return n(e,t),e.prototype.getDefaultShape=function(){return new RI},e.prototype.buildPath=function(t,e){var n=Math.cos,i=Math.sin,r=e.r,o=e.width,a=e.angle,s=e.x-n(a)*o*(o>=r/3?1:2),l=e.y-i(a)*o*(o>=r/3?1:2);a=e.angle-Math.PI/2,t.moveTo(s,l),t.lineTo(e.x+n(a)*o,e.y+i(a)*o),t.lineTo(e.x+n(e.angle)*r,e.y+i(e.angle)*r),t.lineTo(e.x-n(a)*o,e.y-i(a)*o),t.lineTo(s,l)},e}(_s);function zI(t,e){var n=null==t?"":t+"";return e&&(G(e)?n=e.replace("{value}",n):X(e)&&(n=e(t))),n}var FI=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.prototype.render=function(t,e,n){this.group.removeAll();var i=t.get(["axisLine","lineStyle","color"]),r=function(t,e){var n=t.get("center"),i=e.getWidth(),r=e.getHeight(),o=Math.min(i,r);return{cx:jr(n[0],e.getWidth()),cy:jr(n[1],e.getHeight()),r:jr(t.get("radius"),o/2)}}(t,n);this._renderMain(t,e,n,i,r),this._data=t.getData()},e.prototype.dispose=function(){},e.prototype._renderMain=function(t,e,n,i,r){var o=this.group,a=t.get("clockwise"),s=-t.get("startAngle")/180*Math.PI,l=-t.get("endAngle")/180*Math.PI,c=t.getModel("axisLine"),u=c.get("roundCap")?TS:Ic,h=c.get("show"),d=c.getModel("lineStyle"),p=d.get("width"),f=[s,l];ts(f,!a);for(var g=(l=f[1])-(s=f[0]),m=s,v=[],y=0;h&&y<i.length;y++){var b=new u({shape:{startAngle:m,endAngle:l=s+g*Math.min(Math.max(i[y][0],0),1),cx:r.cx,cy:r.cy,clockwise:a,r0:r.r-p,r:r.r},silent:!0});b.setStyle({fill:i[y][1]}),b.setStyle(d.getLineStyle(["color","width"])),v.push(b),m=l}v.reverse(),R(v,(function(t){return o.add(t)}));var x=function(t){if(t<=0)return i[0][1];var e;for(e=0;e<i.length;e++)if(i[e][0]>=t&&(0===e?0:i[e-1][0])<t)return i[e][1];return i[e-1][1]};this._renderTicks(t,e,n,x,r,s,l,a,p),this._renderTitleAndDetail(t,e,n,x,r),this._renderAnchor(t,r),this._renderPointer(t,e,n,x,r,s,l,a,p)},e.prototype._renderTicks=function(t,e,n,i,r,o,a,s,l){for(var c,u,h=this.group,d=r.cx,p=r.cy,f=r.r,g=+t.get("min"),m=+t.get("max"),v=t.getModel("splitLine"),y=t.getModel("axisTick"),b=t.getModel("axisLabel"),x=t.get("splitNumber"),_=y.get("splitNumber"),w=jr(v.get("length"),f),S=jr(y.get("length"),f),C=o,k=(a-o)/x,A=k/_,M=v.getModel("lineStyle").getLineStyle(),T=y.getModel("lineStyle").getLineStyle(),I=v.get("distance"),E=0;E<=x;E++){if(c=Math.cos(C),u=Math.sin(C),v.get("show")){var O=new Fc({shape:{x1:c*(f-(D=I?I+l:l))+d,y1:u*(f-D)+p,x2:c*(f-w-D)+d,y2:u*(f-w-D)+p},style:M,silent:!0});"auto"===M.stroke&&O.setStyle({stroke:i(E/x)}),h.add(O)}if(b.get("show")){var D=b.get("distance")+I,L=zI(Yr(E/x*(m-g)+g),b.get("formatter")),P=i(E/x),N=c*(f-w-D)+d,R=u*(f-w-D)+p,B=b.get("rotate"),z=0;"radial"===B?(z=-C+2*Math.PI)>Math.PI/2&&(z+=Math.PI):"tangential"===B?z=-C-Math.PI/2:U(B)&&(z=B*Math.PI/180),0===z?h.add(new Rs({style:qu(b,{text:L,x:N,y:R,verticalAlign:u<-.8?"top":u>.8?"bottom":"middle",align:c<-.4?"left":c>.4?"right":"center"},{inheritColor:P}),silent:!0})):h.add(new Rs({style:qu(b,{text:L,x:N,y:R,verticalAlign:"middle",align:"center"},{inheritColor:P}),silent:!0,originX:N,originY:R,rotation:z}))}if(y.get("show")&&E!==x){D=(D=y.get("distance"))?D+l:l;for(var F=0;F<=_;F++){c=Math.cos(C),u=Math.sin(C);var V=new Fc({shape:{x1:c*(f-D)+d,y1:u*(f-D)+p,x2:c*(f-S-D)+d,y2:u*(f-S-D)+p},silent:!0,style:T});"auto"===T.stroke&&V.setStyle({stroke:i((E+F/_)/x)}),h.add(V),C+=A}C-=A}else C+=k}},e.prototype._renderPointer=function(t,e,n,i,r,o,a,s,l){var c=this.group,u=this._data,h=this._progressEls,d=[],p=t.get(["pointer","show"]),f=t.getModel("progress"),g=f.get("show"),m=t.getData(),v=m.mapDimension("value"),y=+t.get("min"),b=+t.get("max"),x=[y,b],_=[o,a];function w(e,n){var i,o=m.getItemModel(e).getModel("pointer"),a=jr(o.get("width"),r.r),s=jr(o.get("length"),r.r),l=t.get(["pointer","icon"]),c=o.get("offsetCenter"),u=jr(c[0],r.r),h=jr(c[1],r.r),d=o.get("keepAspect");return(i=l?Mm(l,u-a/2,h-s,a,s,null,d):new BI({shape:{angle:-Math.PI/2,width:a,r:s,x:u,y:h}})).rotation=-(n+Math.PI/2),i.x=r.cx,i.y=r.cy,i}function S(t,e){var n=f.get("roundCap")?TS:Ic,i=f.get("overlap"),a=i?f.get("width"):l/m.count(),c=i?r.r-a:r.r-(t+1)*a,u=i?r.r:r.r-t*a,h=new n({shape:{startAngle:o,endAngle:e,cx:r.cx,cy:r.cy,clockwise:s,r0:c,r:u}});return i&&(h.z2=b-m.get(v,t)%b),h}(g||p)&&(m.diff(u).add((function(e){var n=m.get(v,e);if(p){var i=w(e,o);su(i,{rotation:-((isNaN(+n)?_[0]:Wr(n,x,_,!0))+Math.PI/2)},t),c.add(i),m.setItemGraphicEl(e,i)}if(g){var r=S(e,o),a=f.get("clip");su(r,{shape:{endAngle:Wr(n,x,_,a)}},t),c.add(r),Zs(t.seriesIndex,m.dataType,e,r),d[e]=r}})).update((function(e,n){var i=m.get(v,e);if(p){var r=u.getItemGraphicEl(n),a=r?r.rotation:o,s=w(e,a);s.rotation=a,au(s,{rotation:-((isNaN(+i)?_[0]:Wr(i,x,_,!0))+Math.PI/2)},t),c.add(s),m.setItemGraphicEl(e,s)}if(g){var l=h[n],y=S(e,l?l.shape.endAngle:o),b=f.get("clip");au(y,{shape:{endAngle:Wr(i,x,_,b)}},t),c.add(y),Zs(t.seriesIndex,m.dataType,e,y),d[e]=y}})).execute(),m.each((function(t){var e=m.getItemModel(t),n=e.getModel("emphasis"),r=n.get("focus"),o=n.get("blurScope"),a=n.get("disabled");if(p){var s=m.getItemGraphicEl(t),l=m.getItemVisual(t,"style"),c=l.fill;if(s instanceof As){var u=s.style;s.useStyle(I({image:u.image,x:u.x,y:u.y,width:u.width,height:u.height},l))}else s.useStyle(l),"pointer"!==s.type&&s.setColor(c);s.setStyle(e.getModel(["pointer","itemStyle"]).getItemStyle()),"auto"===s.style.fill&&s.setStyle("fill",i(Wr(m.get(v,t),x,[0,1],!0))),s.z2EmphasisLift=0,Hl(s,e),Bl(s,r,o,a)}if(g){var h=d[t];h.useStyle(m.getItemVisual(t,"style")),h.setStyle(e.getModel(["progress","itemStyle"]).getItemStyle()),h.z2EmphasisLift=0,Hl(h,e),Bl(h,r,o,a)}})),this._progressEls=d)},e.prototype._renderAnchor=function(t,e){var n=t.getModel("anchor");if(n.get("show")){var i=n.get("size"),r=n.get("icon"),o=n.get("offsetCenter"),a=n.get("keepAspect"),s=Mm(r,e.cx-i/2+jr(o[0],e.r),e.cy-i/2+jr(o[1],e.r),i,i,null,a);s.z2=n.get("showAbove")?1:0,s.setStyle(n.getModel("itemStyle").getItemStyle()),this.group.add(s)}},e.prototype._renderTitleAndDetail=function(t,e,n,i,r){var o=this,a=t.getData(),s=a.mapDimension("value"),l=+t.get("min"),c=+t.get("max"),u=new Dr,h=[],d=[],p=t.isAnimationEnabled(),f=t.get(["pointer","showAbove"]);a.diff(this._data).add((function(t){h[t]=new Rs({silent:!0}),d[t]=new Rs({silent:!0})})).update((function(t,e){h[t]=o._titleEls[e],d[t]=o._detailEls[e]})).execute(),a.each((function(e){var n=a.getItemModel(e),o=a.get(s,e),g=new Dr,m=i(Wr(o,[l,c],[0,1],!0)),v=n.getModel("title");if(v.get("show")){var y=v.get("offsetCenter"),b=r.cx+jr(y[0],r.r),x=r.cy+jr(y[1],r.r);(T=h[e]).attr({z2:f?0:2,style:qu(v,{x:b,y:x,text:a.getName(e),align:"center",verticalAlign:"middle"},{inheritColor:m})}),g.add(T)}var _=n.getModel("detail");if(_.get("show")){var w=_.get("offsetCenter"),S=r.cx+jr(w[0],r.r),C=r.cy+jr(w[1],r.r),k=jr(_.get("width"),r.r),A=jr(_.get("height"),r.r),M=t.get(["progress","show"])?a.getItemVisual(e,"style").fill:m,T=d[e],I=_.get("formatter");T.attr({z2:f?0:2,style:qu(_,{x:S,y:C,text:zI(o,I),width:isNaN(k)?null:k,height:isNaN(A)?null:A,align:"center",verticalAlign:"middle"},{inheritColor:M})}),eh(T,{normal:_},o,(function(t){return zI(t,I)})),p&&nh(T,e,a,t,{getFormattedLabel:function(t,e,n,i,r,a){return zI(a?a.interpolatedValue:o,I)}}),g.add(T)}u.add(g)})),this.group.add(u),this._titleEls=h,this._detailEls=d},e.type="gauge",e}(gg),VI=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.visualStyleAccessPath="itemStyle",n}return n(e,t),e.prototype.getInitialData=function(t,e){return lC(this,["value"])},e.type="series.gauge",e.defaultOption={z:2,colorBy:"data",center:["50%","50%"],legendHoverLink:!0,radius:"75%",startAngle:225,endAngle:-45,clockwise:!0,min:0,max:100,splitNumber:10,axisLine:{show:!0,roundCap:!1,lineStyle:{color:[[1,"#E6EBF8"]],width:10}},progress:{show:!1,overlap:!0,width:10,roundCap:!1,clip:!0},splitLine:{show:!0,length:10,distance:10,lineStyle:{color:"#63677A",width:3,type:"solid"}},axisTick:{show:!0,splitNumber:5,length:6,distance:10,lineStyle:{color:"#63677A",width:1,type:"solid"}},axisLabel:{show:!0,distance:15,color:"#464646",fontSize:12,rotate:0},pointer:{icon:null,offsetCenter:[0,0],show:!0,showAbove:!0,length:"60%",width:6,keepAspect:!1},anchor:{show:!1,showAbove:!1,size:6,icon:"circle",offsetCenter:[0,0],keepAspect:!1,itemStyle:{color:"#fff",borderWidth:0,borderColor:"#5470c6"}},title:{show:!0,offsetCenter:[0,"20%"],color:"#464646",fontSize:16,valueAnimation:!1},detail:{show:!0,backgroundColor:"rgba(0,0,0,0)",borderWidth:0,borderColor:"#ccc",width:100,height:null,padding:[5,10],offsetCenter:[0,"40%"],color:"#464646",fontSize:30,fontWeight:"bold",lineHeight:30,valueAnimation:!1}},e}(ig),HI=["itemStyle","opacity"],WI=function(t){function e(e,n){var i=t.call(this)||this,r=i,o=new Rc,a=new Rs;return r.setTextContent(a),i.setTextGuideLine(o),i.updateData(e,n,!0),i}return n(e,t),e.prototype.updateData=function(t,e,n){var i=this,r=t.hostModel,o=t.getItemModel(e),a=t.getItemLayout(e),s=o.getModel("emphasis"),l=o.get(HI);l=null==l?1:l,n||du(i),i.useStyle(t.getItemVisual(e,"style")),i.style.lineJoin="round",n?(i.setShape({points:a.points}),i.style.opacity=0,su(i,{style:{opacity:l}},r,e)):au(i,{style:{opacity:l},shape:{points:a.points}},r,e),Hl(i,o),this._updateLabel(t,e),Bl(this,s.get("focus"),s.get("blurScope"),s.get("disabled"))},e.prototype._updateLabel=function(t,e){var n=this,i=this.getTextGuideLine(),r=n.getTextContent(),o=t.hostModel,a=t.getItemModel(e),s=t.getItemLayout(e).label,l=t.getItemVisual(e,"style"),c=l.fill;Xu(r,Gu(a),{labelFetcher:t.hostModel,labelDataIndex:e,defaultOpacity:l.opacity,defaultText:t.getName(e)},{normal:{align:s.textAlign,verticalAlign:s.verticalAlign}}),n.setTextConfig({local:!0,inside:!!s.inside,insideStroke:c,outsideFill:c});var u=s.linePoints;i.setShape({points:u}),n.textGuideLineConfig={anchor:u?new Me(u[0][0],u[0][1]):null},au(r,{style:{x:s.x,y:s.y}},o,e),r.attr({rotation:s.rotation,originX:s.x,originY:s.y,z2:10}),l_(n,c_(a),{stroke:c})},e}(Pc),jI=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.ignoreLabelLineUpdate=!0,n}return n(e,t),e.prototype.render=function(t,e,n){var i=t.getData(),r=this._data,o=this.group;i.diff(r).add((function(t){var e=new WI(i,t);i.setItemGraphicEl(t,e),o.add(e)})).update((function(t,e){var n=r.getItemGraphicEl(e);n.updateData(i,t),o.add(n),i.setItemGraphicEl(t,n)})).remove((function(e){hu(r.getItemGraphicEl(e),t,e)})).execute(),this._data=i},e.prototype.remove=function(){this.group.removeAll(),this._data=null},e.prototype.dispose=function(){},e.type="funnel",e}(gg),YI=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.prototype.init=function(e){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new cC(W(this.getData,this),W(this.getRawData,this)),this._defaultLabelLine(e)},e.prototype.getInitialData=function(t,e){return lC(this,{coordDimensions:["value"],encodeDefaulter:j(zd,this)})},e.prototype._defaultLabelLine=function(t){yo(t,"labelLine",["show"]);var e=t.labelLine,n=t.emphasis.labelLine;e.show=e.show&&t.label.show,n.show=n.show&&t.emphasis.label.show},e.prototype.getDataParams=function(e){var n=this.getData(),i=t.prototype.getDataParams.call(this,e),r=n.mapDimension("value"),o=n.getSum(r);return i.percent=o?+(n.get(r,e)/o*100).toFixed(2):0,i.$vars.push("percent"),i},e.type="series.funnel",e.defaultOption={z:2,legendHoverLink:!0,colorBy:"data",left:80,top:60,right:80,bottom:60,minSize:"0%",maxSize:"100%",sort:"descending",orient:"vertical",gap:0,funnelAlign:"center",label:{show:!0,position:"outer"},labelLine:{show:!0,length:20,lineStyle:{width:1}},itemStyle:{borderColor:"#fff",borderWidth:1},emphasis:{label:{show:!0}},select:{itemStyle:{borderColor:"#212121"}}},e}(ig);function XI(t,e){t.eachSeriesByType("funnel",(function(t){var n=t.getData(),i=n.mapDimension("value"),r=t.get("sort"),o=function(t,e){return md(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}(t,e),a=t.get("orient"),s=o.width,l=o.height,c=function(t,e){for(var n=t.mapDimension("value"),i=t.mapArray(n,(function(t){return t})),r=[],o="ascending"===e,a=0,s=t.count();a<s;a++)r[a]=a;return X(e)?r.sort(e):"none"!==e&&r.sort((function(t,e){return o?i[t]-i[e]:i[e]-i[t]})),r}(n,r),u=o.x,h=o.y,d="horizontal"===a?[jr(t.get("minSize"),l),jr(t.get("maxSize"),l)]:[jr(t.get("minSize"),s),jr(t.get("maxSize"),s)],p=n.getDataExtent(i),f=t.get("min"),g=t.get("max");null==f&&(f=Math.min(p[0],0)),null==g&&(g=p[1]);var m=t.get("funnelAlign"),v=t.get("gap"),y=(("horizontal"===a?s:l)-v*(n.count()-1))/n.count(),b=function(t,e){if("horizontal"===a){var r=Wr(n.get(i,t)||0,[f,g],d,!0),o=void 0;switch(m){case"top":o=h;break;case"center":o=h+(l-r)/2;break;case"bottom":o=h+(l-r)}return[[e,o],[e,o+r]]}var c,p=Wr(n.get(i,t)||0,[f,g],d,!0);switch(m){case"left":c=u;break;case"center":c=u+(s-p)/2;break;case"right":c=u+s-p}return[[c,e],[c+p,e]]};"ascending"===r&&(y=-y,v=-v,"horizontal"===a?u+=s:h+=l,c=c.reverse());for(var x=0;x<c.length;x++){var _=c[x],w=c[x+1],S=n.getItemModel(_);if("horizontal"===a){var C=S.get(["itemStyle","width"]);null==C?C=y:(C=jr(C,s),"ascending"===r&&(C=-C));var k=b(_,u),A=b(w,u+C);u+=C+v,n.setItemLayout(_,{points:k.concat(A.slice().reverse())})}else{var M=S.get(["itemStyle","height"]);null==M?M=y:(M=jr(M,l),"ascending"===r&&(M=-M)),k=b(_,h),A=b(w,h+M),h+=M+v,n.setItemLayout(_,{points:k.concat(A.slice().reverse())})}}!function(t){var e=t.hostModel.get("orient");t.each((function(n){var i,r,o,a,s=t.getItemModel(n),l=s.getModel("label").get("position"),c=s.getModel("labelLine"),u=t.getItemLayout(n),h=u.points,d="inner"===l||"inside"===l||"center"===l||"insideLeft"===l||"insideRight"===l;if(d)"insideLeft"===l?(r=(h[0][0]+h[3][0])/2+5,o=(h[0][1]+h[3][1])/2,i="left"):"insideRight"===l?(r=(h[1][0]+h[2][0])/2-5,o=(h[1][1]+h[2][1])/2,i="right"):(r=(h[0][0]+h[1][0]+h[2][0]+h[3][0])/4,o=(h[0][1]+h[1][1]+h[2][1]+h[3][1])/4,i="center"),a=[[r,o],[r,o]];else{var p=void 0,f=void 0,g=void 0,m=void 0,v=c.get("length");"left"===l?(p=(h[3][0]+h[0][0])/2,f=(h[3][1]+h[0][1])/2,r=(g=p-v)-5,i="right"):"right"===l?(p=(h[1][0]+h[2][0])/2,f=(h[1][1]+h[2][1])/2,r=(g=p+v)+5,i="left"):"top"===l?(p=(h[3][0]+h[0][0])/2,o=(m=(f=(h[3][1]+h[0][1])/2)-v)-5,i="center"):"bottom"===l?(p=(h[1][0]+h[2][0])/2,o=(m=(f=(h[1][1]+h[2][1])/2)+v)+5,i="center"):"rightTop"===l?(p="horizontal"===e?h[3][0]:h[1][0],f="horizontal"===e?h[3][1]:h[1][1],"horizontal"===e?(o=(m=f-v)-5,i="center"):(r=(g=p+v)+5,i="top")):"rightBottom"===l?(p=h[2][0],f=h[2][1],"horizontal"===e?(o=(m=f+v)+5,i="center"):(r=(g=p+v)+5,i="bottom")):"leftTop"===l?(p=h[0][0],f="horizontal"===e?h[0][1]:h[1][1],"horizontal"===e?(o=(m=f-v)-5,i="center"):(r=(g=p-v)-5,i="right")):"leftBottom"===l?(p="horizontal"===e?h[1][0]:h[3][0],f="horizontal"===e?h[1][1]:h[2][1],"horizontal"===e?(o=(m=f+v)+5,i="center"):(r=(g=p-v)-5,i="right")):(p=(h[1][0]+h[2][0])/2,f=(h[1][1]+h[2][1])/2,"horizontal"===e?(o=(m=f+v)+5,i="center"):(r=(g=p+v)+5,i="left")),"horizontal"===e?r=g=p:o=m=f,a=[[p,f],[g,m]]}u.label={linePoints:a,x:r,y:o,verticalAlign:"middle",textAlign:i,inside:d}}))}(n)}))}var GI=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n._dataGroup=new Dr,n._initialized=!1,n}return n(e,t),e.prototype.init=function(){this.group.add(this._dataGroup)},e.prototype.render=function(t,e,n,i){this._progressiveEls=null;var r=this._dataGroup,o=t.getData(),a=this._data,s=t.coordinateSystem,l=s.dimensions,c=$I(t);if(o.diff(a).add((function(t){ZI(UI(o,r,t,l,s),o,t,c)})).update((function(e,n){var i=a.getItemGraphicEl(n),r=qI(o,e,l,s);o.setItemGraphicEl(e,i),au(i,{shape:{points:r}},t,e),du(i),ZI(i,o,e,c)})).remove((function(t){var e=a.getItemGraphicEl(t);r.remove(e)})).execute(),!this._initialized){this._initialized=!0;var u=function(t,e,n){var i=t.model,r=t.getRect(),o=new Ls({shape:{x:r.x,y:r.y,width:r.width,height:r.height}}),a="horizontal"===i.get("layout")?"width":"height";return o.setShape(a,0),su(o,{shape:{width:r.width,height:r.height}},e,n),o}(s,t,(function(){setTimeout((function(){r.removeClipPath()}))}));r.setClipPath(u)}this._data=o},e.prototype.incrementalPrepareRender=function(t,e,n){this._initialized=!0,this._data=null,this._dataGroup.removeAll()},e.prototype.incrementalRender=function(t,e,n){for(var i=e.getData(),r=e.coordinateSystem,o=r.dimensions,a=$I(e),s=this._progressiveEls=[],l=t.start;l<t.end;l++){var c=UI(i,this._dataGroup,l,o,r);c.incremental=!0,ZI(c,i,l,a),s.push(c)}},e.prototype.remove=function(){this._dataGroup&&this._dataGroup.removeAll(),this._data=null},e.type="parallel",e}(gg);function qI(t,e,n,i){for(var r,o=[],a=0;a<n.length;a++){var s=n[a],l=t.get(t.mapDimension(s),e);r=l,("category"===i.getAxis(s).type?null==r:null==r||isNaN(r))||o.push(i.dataToPoint(l,s))}return o}function UI(t,e,n,i,r){var o=qI(t,n,i,r),a=new Rc({shape:{points:o},z2:10});return e.add(a),t.setItemGraphicEl(n,a),a}function $I(t){var e=t.get("smooth",!0);return!0===e&&(e=.3),nt(e=so(e))&&(e=0),{smooth:e}}function ZI(t,e,n,i){t.useStyle(e.getItemVisual(n,"style")),t.style.fill=null,t.setShape("smooth",i.smooth);var r=e.getItemModel(n),o=r.getModel("emphasis");Hl(t,r,"lineStyle"),Bl(t,o.get("focus"),o.get("blurScope"),o.get("disabled"))}var KI=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.visualStyleAccessPath="lineStyle",n.visualDrawType="stroke",n}return n(e,t),e.prototype.getInitialData=function(t,e){return nb(null,this,{useEncodeDefaulter:W(QI,null,this)})},e.prototype.getRawIndicesByActiveState=function(t){var e=this.coordinateSystem,n=this.getData(),i=[];return e.eachActiveState(n,(function(e,r){t===e&&i.push(n.getRawIndex(r))})),i},e.type="series.parallel",e.dependencies=["parallel"],e.defaultOption={z:2,coordinateSystem:"parallel",parallelIndex:0,label:{show:!1},inactiveOpacity:.05,activeOpacity:1,lineStyle:{width:1,opacity:.45,type:"solid"},emphasis:{label:{show:!1}},progressive:500,smooth:!1,animationEasing:"linear"},e}(ig);function QI(t){var e=t.ecModel.getComponent("parallel",t.get("parallelIndex"));if(e){var n={};return R(e.dimensions,(function(t){var e=+t.replace("dim","");n[t]=e})),n}}var JI=["lineStyle","opacity"],tE={seriesType:"parallel",reset:function(t,e){var n=t.coordinateSystem,i={normal:t.get(["lineStyle","opacity"]),active:t.get("activeOpacity"),inactive:t.get("inactiveOpacity")};return{progress:function(t,e){n.eachActiveState(e,(function(t,n){var r=i[t];if("normal"===t&&e.hasItemOption){var o=e.getItemModel(n).get(JI,!0);null!=o&&(r=o)}e.ensureUniqueItemVisual(n,"style").opacity=r}),t.start,t.end)}}}};function eE(t){!function(t){if(!t.parallel){var e=!1;R(t.series,(function(t){t&&"parallel"===t.type&&(e=!0)})),e&&(t.parallel=[{}])}}(t),function(t){R(vo(t.parallelAxis),(function(e){if($(e)){var n=e.parallelIndex||0,i=vo(t.parallel)[n];i&&i.parallelAxisDefault&&M(e,i.parallelAxisDefault,!1)}}))}(t)}var nE=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.prototype.render=function(t,e,n){this._model=t,this._api=n,this._handlers||(this._handlers={},R(iE,(function(t,e){n.getZr().on(e,this._handlers[e]=W(t,this))}),this)),kg(this,"_throttledDispatchExpand",t.get("axisExpandRate"),"fixRate")},e.prototype.dispose=function(t,e){Ag(this,"_throttledDispatchExpand"),R(this._handlers,(function(t,n){e.getZr().off(n,t)})),this._handlers=null},e.prototype._throttledDispatchExpand=function(t){this._dispatchExpand(t)},e.prototype._dispatchExpand=function(t){t&&this._api.dispatchAction(I({type:"parallelAxisExpand"},t))},e.type="parallel",e}(hg),iE={mousedown:function(t){rE(this,"click")&&(this._mouseDownPoint=[t.offsetX,t.offsetY])},mouseup:function(t){var e=this._mouseDownPoint;if(rE(this,"click")&&e){var n=[t.offsetX,t.offsetY];if(Math.pow(e[0]-n[0],2)+Math.pow(e[1]-n[1],2)>5)return;var i=this._model.coordinateSystem.getSlidedAxisExpandWindow([t.offsetX,t.offsetY]);"none"!==i.behavior&&this._dispatchExpand({axisExpandWindow:i.axisExpandWindow})}this._mouseDownPoint=null},mousemove:function(t){if(!this._mouseDownPoint&&rE(this,"mousemove")){var e=this._model,n=e.coordinateSystem.getSlidedAxisExpandWindow([t.offsetX,t.offsetY]),i=n.behavior;"jump"===i&&this._throttledDispatchExpand.debounceNextCall(e.get("axisExpandDebounce")),this._throttledDispatchExpand("none"===i?null:{axisExpandWindow:n.axisExpandWindow,animation:"jump"===i?null:{duration:0}})}}};function rE(t,e){var n=t._model;return n.get("axisExpandable")&&n.get("axisExpandTriggerOn")===e}var oE=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.prototype.init=function(){t.prototype.init.apply(this,arguments),this.mergeOption({})},e.prototype.mergeOption=function(t){var e=this.option;t&&M(e,t,!0),this._initDimensions()},e.prototype.contains=function(t,e){var n=t.get("parallelIndex");return null!=n&&e.getComponent("parallel",n)===this},e.prototype.setAxisExpand=function(t){R(["axisExpandable","axisExpandCenter","axisExpandCount","axisExpandWidth","axisExpandWindow"],(function(e){t.hasOwnProperty(e)&&(this.option[e]=t[e])}),this)},e.prototype._initDimensions=function(){var t=this.dimensions=[],e=this.parallelAxisIndex=[];R(F(this.ecModel.queryComponents({mainType:"parallelAxis"}),(function(t){return(t.get("parallelIndex")||0)===this.componentIndex}),this),(function(n){t.push("dim"+n.get("dim")),e.push(n.componentIndex)}))},e.type="parallel",e.dependencies=["parallelAxis"],e.layoutMode="box",e.defaultOption={z:0,left:80,top:60,right:80,bottom:60,layout:"horizontal",axisExpandable:!1,axisExpandCenter:null,axisExpandCount:0,axisExpandWidth:50,axisExpandRate:17,axisExpandDebounce:50,axisExpandSlideTriggerArea:[-.15,.05,.4],axisExpandTriggerOn:"click",parallelAxisDefault:null},e}(Sd),aE=function(t){function e(e,n,i,r,o){var a=t.call(this,e,n,i)||this;return a.type=r||"value",a.axisIndex=o,a}return n(e,t),e.prototype.isHorizontal=function(){return"horizontal"!==this.coordinateSystem.getModel().get("layout")},e}(zx);function sE(t,e,n,i,r,o){t=t||0;var a=n[1]-n[0];if(null!=r&&(r=cE(r,[0,a])),null!=o&&(o=Math.max(o,null!=r?r:0)),"all"===i){var s=Math.abs(e[1]-e[0]);s=cE(s,[0,a]),r=o=cE(s,[r,o]),i=0}e[0]=cE(e[0],n),e[1]=cE(e[1],n);var l=lE(e,i);e[i]+=t;var c,u=r||0,h=n.slice();return l.sign<0?h[0]+=u:h[1]-=u,e[i]=cE(e[i],h),c=lE(e,i),null!=r&&(c.sign!==l.sign||c.span<r)&&(e[1-i]=e[i]+l.sign*r),c=lE(e,i),null!=o&&c.span>o&&(e[1-i]=e[i]+c.sign*o),e}function lE(t,e){var n=t[e]-t[1-e];return{span:Math.abs(n),sign:n>0?-1:n<0?1:e?-1:1}}function cE(t,e){return Math.min(null!=e[1]?e[1]:1/0,Math.max(null!=e[0]?e[0]:-1/0,t))}var uE=R,hE=Math.min,dE=Math.max,pE=Math.floor,fE=Math.ceil,gE=Yr,mE=Math.PI,vE=function(){function t(t,e,n){this.type="parallel",this._axesMap=mt(),this._axesLayout={},this.dimensions=t.dimensions,this._model=t,this._init(t,e,n)}return t.prototype._init=function(t,e,n){var i=t.dimensions,r=t.parallelAxisIndex;uE(i,(function(t,n){var i=r[n],o=e.getComponent("parallelAxis",i),a=this._axesMap.set(t,new aE(t,ex(o),[0,0],o.get("type"),i)),s="category"===a.type;a.onBand=s&&o.get("boundaryGap"),a.inverse=o.get("inverse"),o.axis=a,a.model=o,a.coordinateSystem=o.coordinateSystem=this}),this)},t.prototype.update=function(t,e){this._updateAxesFromSeries(this._model,t)},t.prototype.containPoint=function(t){var e=this._makeLayoutInfo(),n=e.axisBase,i=e.layoutBase,r=e.pixelDimIndex,o=t[1-r],a=t[r];return o>=n&&o<=n+e.axisLength&&a>=i&&a<=i+e.layoutLength},t.prototype.getModel=function(){return this._model},t.prototype._updateAxesFromSeries=function(t,e){e.eachSeries((function(n){if(t.contains(n,e)){var i=n.getData();uE(this.dimensions,(function(t){var e=this._axesMap.get(t);e.scale.unionExtentFromData(i,i.mapDimension(t)),tx(e.scale,e.model)}),this)}}),this)},t.prototype.resize=function(t,e){this._rect=md(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()}),this._layoutAxes()},t.prototype.getRect=function(){return this._rect},t.prototype._makeLayoutInfo=function(){var t,e=this._model,n=this._rect,i=["x","y"],r=["width","height"],o=e.get("layout"),a="horizontal"===o?0:1,s=n[r[a]],l=[0,s],c=this.dimensions.length,u=yE(e.get("axisExpandWidth"),l),h=yE(e.get("axisExpandCount")||0,[0,c]),d=e.get("axisExpandable")&&c>3&&c>h&&h>1&&u>0&&s>0,p=e.get("axisExpandWindow");p?(t=yE(p[1]-p[0],l),p[1]=p[0]+t):(t=yE(u*(h-1),l),(p=[u*(e.get("axisExpandCenter")||pE(c/2))-t/2])[1]=p[0]+t);var f=(s-t)/(c-h);f<3&&(f=0);var g=[pE(gE(p[0]/u,1))+1,fE(gE(p[1]/u,1))-1],m=f/u*p[0];return{layout:o,pixelDimIndex:a,layoutBase:n[i[a]],layoutLength:s,axisBase:n[i[1-a]],axisLength:n[r[1-a]],axisExpandable:d,axisExpandWidth:u,axisCollapseWidth:f,axisExpandWindow:p,axisCount:c,winInnerIndices:g,axisExpandWindow0Pos:m}},t.prototype._layoutAxes=function(){var t=this._rect,e=this._axesMap,n=this.dimensions,i=this._makeLayoutInfo(),r=i.layout;e.each((function(t){var e=[0,i.axisLength],n=t.inverse?1:0;t.setExtent(e[n],e[1-n])})),uE(n,(function(e,n){var o=(i.axisExpandable?xE:bE)(n,i),a={horizontal:{x:o.position,y:i.axisLength},vertical:{x:0,y:o.position}},s={horizontal:mE/2,vertical:0},l=[a[r].x+t.x,a[r].y+t.y],c=s[r],u=[1,0,0,1,0,0];we(u,u,c),_e(u,u,l),this._axesLayout[e]={position:l,rotation:c,transform:u,axisNameAvailableWidth:o.axisNameAvailableWidth,axisLabelShow:o.axisLabelShow,nameTruncateMaxWidth:o.nameTruncateMaxWidth,tickDirection:1,labelDirection:1}}),this)},t.prototype.getAxis=function(t){return this._axesMap.get(t)},t.prototype.dataToPoint=function(t,e){return this.axisCoordToPoint(this._axesMap.get(e).dataToCoord(t),e)},t.prototype.eachActiveState=function(t,e,n,i){null==n&&(n=0),null==i&&(i=t.count());var r=this._axesMap,o=this.dimensions,a=[],s=[];R(o,(function(e){a.push(t.mapDimension(e)),s.push(r.get(e).model)}));for(var l=this.hasAxisBrushed(),c=n;c<i;c++){var u=void 0;if(l){u="active";for(var h=t.getValues(a,c),d=0,p=o.length;d<p;d++)if("inactive"===s[d].getActiveState(h[d])){u="inactive";break}}else u="normal";e(u,c)}},t.prototype.hasAxisBrushed=function(){for(var t=this.dimensions,e=this._axesMap,n=!1,i=0,r=t.length;i<r;i++)"normal"!==e.get(t[i]).model.getActiveState()&&(n=!0);return n},t.prototype.axisCoordToPoint=function(t,e){return Tu([t,0],this._axesLayout[e].transform)},t.prototype.getAxisLayout=function(t){return A(this._axesLayout[t])},t.prototype.getSlidedAxisExpandWindow=function(t){var e=this._makeLayoutInfo(),n=e.pixelDimIndex,i=e.axisExpandWindow.slice(),r=i[1]-i[0],o=[0,e.axisExpandWidth*(e.axisCount-1)];if(!this.containPoint(t))return{behavior:"none",axisExpandWindow:i};var a,s=t[n]-e.layoutBase-e.axisExpandWindow0Pos,l="slide",c=e.axisCollapseWidth,u=this._model.get("axisExpandSlideTriggerArea"),h=null!=u[0];if(c)h&&c&&s<r*u[0]?(l="jump",a=s-r*u[2]):h&&c&&s>r*(1-u[0])?(l="jump",a=s-r*(1-u[2])):(a=s-r*u[1])>=0&&(a=s-r*(1-u[1]))<=0&&(a=0),(a*=e.axisExpandWidth/c)?sE(a,i,o,"all"):l="none";else{var d=i[1]-i[0];(i=[dE(0,o[1]*s/d-d/2)])[1]=hE(o[1],i[0]+d),i[0]=i[1]-d}return{axisExpandWindow:i,behavior:l}},t}();function yE(t,e){return hE(dE(t,e[0]),e[1])}function bE(t,e){var n=e.layoutLength/(e.axisCount-1);return{position:n*t,axisNameAvailableWidth:n,axisLabelShow:!0}}function xE(t,e){var n,i,r=e.layoutLength,o=e.axisExpandWidth,a=e.axisCount,s=e.axisCollapseWidth,l=e.winInnerIndices,c=s,u=!1;return t<l[0]?(n=t*s,i=s):t<=l[1]?(n=e.axisExpandWindow0Pos+t*o-e.axisExpandWindow[0],c=o,u=!0):(n=r-(a-1-t)*s,i=s),{position:n,axisNameAvailableWidth:c,axisLabelShow:u,nameTruncateMaxWidth:i}}var _E={create:function(t,e){var n=[];return t.eachComponent("parallel",(function(i,r){var o=new vE(i,t,e);o.name="parallel_"+r,o.resize(i,e),i.coordinateSystem=o,o.model=i,n.push(o)})),t.eachSeries((function(t){if("parallel"===t.get("coordinateSystem")){var e=t.getReferringComponents("parallel",Lo).models[0];t.coordinateSystem=e.coordinateSystem}})),n}},wE=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.activeIntervals=[],n}return n(e,t),e.prototype.getAreaSelectStyle=function(){return Uo([["fill","color"],["lineWidth","borderWidth"],["stroke","borderColor"],["width","width"],["opacity","opacity"]])(this.getModel("areaSelectStyle"))},e.prototype.setActiveIntervals=function(t){var e=this.activeIntervals=A(t);if(e)for(var n=e.length-1;n>=0;n--)Xr(e[n])},e.prototype.getActiveState=function(t){var e=this.activeIntervals;if(!e.length)return"normal";if(null==t||isNaN(+t))return"inactive";if(1===e.length){var n=e[0];if(n[0]<=t&&t<=n[1])return"active"}else for(var i=0,r=e.length;i<r;i++)if(e[i][0]<=t&&t<=e[i][1])return"active";return"inactive"},e}(Sd);P(wE,lx);var SE=!0,CE=Math.min,kE=Math.max,AE=Math.pow,ME="globalPan",TE={w:[0,0],e:[0,1],n:[1,0],s:[1,1]},IE={w:"ew",e:"ew",n:"ns",s:"ns",ne:"nesw",sw:"nesw",nw:"nwse",se:"nwse"},EE={brushStyle:{lineWidth:2,stroke:"rgba(210,219,238,0.3)",fill:"#D2DBEE"},transformable:!0,brushMode:"single",removeOnClick:!1},OE=0,DE=function(t){function e(e){var n=t.call(this)||this;return n._track=[],n._covers=[],n._handlers={},n._zr=e,n.group=new Dr,n._uid="brushController_"+OE++,R(oO,(function(t,e){this._handlers[e]=W(t,this)}),n),n}return n(e,t),e.prototype.enableBrush=function(t){return this._brushType&&this._doDisableBrush(),t.brushType&&this._doEnableBrush(t),this},e.prototype._doEnableBrush=function(t){var e=this._zr;this._enableGlobalPan||function(t,e,n){Tk(t).globalPan=n}(e,0,this._uid),R(this._handlers,(function(t,n){e.on(n,t)})),this._brushType=t.brushType,this._brushOption=M(A(EE),t,!0)},e.prototype._doDisableBrush=function(){var t=this._zr;!function(t,e,n){var i=Tk(t);i[e]===n&&(i[e]=null)}(t,ME,this._uid),R(this._handlers,(function(e,n){t.off(n,e)})),this._brushType=this._brushOption=null},e.prototype.setPanels=function(t){if(t&&t.length){var e=this._panels={};R(t,(function(t){e[t.panelId]=A(t)}))}else this._panels=null;return this},e.prototype.mount=function(t){t=t||{},this._enableGlobalPan=t.enableGlobalPan;var e=this.group;return this._zr.add(e),e.attr({x:t.x||0,y:t.y||0,rotation:t.rotation||0,scaleX:t.scaleX||1,scaleY:t.scaleY||1}),this._transform=e.getLocalTransform(),this},e.prototype.updateCovers=function(t){t=B(t,(function(t){return M(A(EE),t,!0)}));var e=this._covers,n=this._covers=[],i=this,r=this._creatingCover;return new Sy(e,t,(function(t,e){return o(t.__brushOption,e)}),o).add(a).update(a).remove((function(t){e[t]!==r&&i.group.remove(e[t])})).execute(),this;function o(t,e){return(null!=t.id?t.id:"\0-brush-index-"+e)+"-"+t.brushType}function a(o,a){var s=t[o];if(null!=a&&e[a]===r)n[o]=e[a];else{var l=n[o]=null!=a?(e[a].__brushOption=s,e[a]):PE(i,LE(i,s));BE(i,l)}}},e.prototype.unmount=function(){return this.enableBrush(!1),HE(this),this._zr.remove(this.group),this},e.prototype.dispose=function(){this.unmount(),this.off()},e}(Ut);function LE(t,e){var n=sO[e.brushType].createCover(t,e);return n.__brushOption=e,RE(n,e),t.group.add(n),n}function PE(t,e){var n=zE(e);return n.endCreating&&(n.endCreating(t,e),RE(e,e.__brushOption)),e}function NE(t,e){var n=e.__brushOption;zE(e).updateCoverShape(t,e,n.range,n)}function RE(t,e){var n=e.z;null==n&&(n=1e4),t.traverse((function(t){t.z=n,t.z2=n}))}function BE(t,e){zE(e).updateCommon(t,e),NE(t,e)}function zE(t){return sO[t.__brushOption.brushType]}function FE(t,e,n){var i,r=t._panels;if(!r)return SE;var o=t._transform;return R(r,(function(t){t.isTargetByCursor(e,n,o)&&(i=t)})),i}function VE(t,e){var n=t._panels;if(!n)return SE;var i=e.__brushOption.panelId;return null!=i?n[i]:SE}function HE(t){var e=t._covers,n=e.length;return R(e,(function(e){t.group.remove(e)}),t),e.length=0,!!n}function WE(t,e){var n=B(t._covers,(function(t){var e=t.__brushOption,n=A(e.range);return{brushType:e.brushType,panelId:e.panelId,range:n}}));t.trigger("brush",{areas:n,isEnd:!!e.isEnd,removeOnClick:!!e.removeOnClick})}function jE(t){var e=t.length-1;return e<0&&(e=0),[t[0],t[e]]}function YE(t,e,n,i){var r=new Dr;return r.add(new Ls({name:"main",style:UE(n),silent:!0,draggable:!0,cursor:"move",drift:j(KE,t,e,r,["n","s","w","e"]),ondragend:j(WE,e,{isEnd:!0})})),R(i,(function(n){r.add(new Ls({name:n.join(""),style:{opacity:0},draggable:!0,silent:!0,invisible:!0,drift:j(KE,t,e,r,n),ondragend:j(WE,e,{isEnd:!0})}))})),r}function XE(t,e,n,i){var r=i.brushStyle.lineWidth||0,o=kE(r,6),a=n[0][0],s=n[1][0],l=a-r/2,c=s-r/2,u=n[0][1],h=n[1][1],d=u-o+r/2,p=h-o+r/2,f=u-a,g=h-s,m=f+r,v=g+r;qE(t,e,"main",a,s,f,g),i.transformable&&(qE(t,e,"w",l,c,o,v),qE(t,e,"e",d,c,o,v),qE(t,e,"n",l,c,m,o),qE(t,e,"s",l,p,m,o),qE(t,e,"nw",l,c,o,o),qE(t,e,"ne",d,c,o,o),qE(t,e,"sw",l,p,o,o),qE(t,e,"se",d,p,o,o))}function GE(t,e){var n=e.__brushOption,i=n.transformable,r=e.childAt(0);r.useStyle(UE(n)),r.attr({silent:!i,cursor:i?"move":"default"}),R([["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]],(function(n){var r=e.childOfName(n.join("")),o=1===n.length?ZE(t,n[0]):function(t,e){var n=[ZE(t,e[0]),ZE(t,e[1])];return("e"===n[0]||"w"===n[0])&&n.reverse(),n.join("")}(t,n);r&&r.attr({silent:!i,invisible:!i,cursor:i?IE[o]+"-resize":null})}))}function qE(t,e,n,i,r,o,a){var s=e.childOfName(n);s&&s.setShape(function(t){var e=CE(t[0][0],t[1][0]),n=CE(t[0][1],t[1][1]);return{x:e,y:n,width:kE(t[0][0],t[1][0])-e,height:kE(t[0][1],t[1][1])-n}}(tO(t,e,[[i,r],[i+o,r+a]])))}function UE(t){return E({strokeNoScale:!0},t.brushStyle)}function $E(t,e,n,i){var r=[CE(t,n),CE(e,i)],o=[kE(t,n),kE(e,i)];return[[r[0],o[0]],[r[1],o[1]]]}function ZE(t,e){var n=Iu({w:"left",e:"right",n:"top",s:"bottom"}[e],function(t){return Mu(t.group)}(t));return{left:"w",right:"e",top:"n",bottom:"s"}[n]}function KE(t,e,n,i,r,o){var a=n.__brushOption,s=t.toRectRange(a.range),l=JE(e,r,o);R(i,(function(t){var e=TE[t];s[e[0]][e[1]]+=l[e[0]]})),a.range=t.fromRectRange($E(s[0][0],s[1][0],s[0][1],s[1][1])),BE(e,n),WE(e,{isEnd:!1})}function QE(t,e,n,i){var r=e.__brushOption.range,o=JE(t,n,i);R(r,(function(t){t[0]+=o[0],t[1]+=o[1]})),BE(t,e),WE(t,{isEnd:!1})}function JE(t,e,n){var i=t.group,r=i.transformCoordToLocal(e,n),o=i.transformCoordToLocal(0,0);return[r[0]-o[0],r[1]-o[1]]}function tO(t,e,n){var i=VE(t,e);return i&&i!==SE?i.clipPath(n,t._transform):A(n)}function eO(t){var e=t.event;e.preventDefault&&e.preventDefault()}function nO(t,e,n){return t.childOfName("main").contain(e,n)}function iO(t,e,n,i){var r,o=t._creatingCover,a=t._creatingPanel,s=t._brushOption;if(t._track.push(n.slice()),function(t){var e=t._track;if(!e.length)return!1;var n=e[e.length-1],i=e[0],r=n[0]-i[0],o=n[1]-i[1];return AE(r*r+o*o,.5)>6}(t)||o){if(a&&!o){"single"===s.brushMode&&HE(t);var l=A(s);l.brushType=rO(l.brushType,a),l.panelId=a===SE?null:a.panelId,o=t._creatingCover=LE(t,l),t._covers.push(o)}if(o){var c=sO[rO(t._brushType,a)];o.__brushOption.range=c.getCreatingRange(tO(t,o,t._track)),i&&(PE(t,o),c.updateCommon(t,o)),NE(t,o),r={isEnd:i}}}else i&&"single"===s.brushMode&&s.removeOnClick&&FE(t,e,n)&&HE(t)&&(r={isEnd:i,removeOnClick:!0});return r}function rO(t,e){return"auto"===t?e.defaultBrushType:t}var oO={mousedown:function(t){if(this._dragging)aO(this,t);else if(!t.target||!t.target.draggable){eO(t);var e=this.group.transformCoordToLocal(t.offsetX,t.offsetY);this._creatingCover=null,(this._creatingPanel=FE(this,t,e))&&(this._dragging=!0,this._track=[e.slice()])}},mousemove:function(t){var e=t.offsetX,n=t.offsetY,i=this.group.transformCoordToLocal(e,n);if(function(t,e,n){if(t._brushType&&!function(t,e,n){var i=t._zr;return e<0||e>i.getWidth()||n<0||n>i.getHeight()}(t,e.offsetX,e.offsetY)){var i=t._zr,r=t._covers,o=FE(t,e,n);if(!t._dragging)for(var a=0;a<r.length;a++){var s=r[a].__brushOption;if(o&&(o===SE||s.panelId===o.panelId)&&sO[s.brushType].contain(r[a],n[0],n[1]))return}o&&i.setCursorStyle("crosshair")}}(this,t,i),this._dragging){eO(t);var r=iO(this,t,i,!1);r&&WE(this,r)}},mouseup:function(t){aO(this,t)}};function aO(t,e){if(t._dragging){eO(e);var n=e.offsetX,i=e.offsetY,r=t.group.transformCoordToLocal(n,i),o=iO(t,e,r,!0);t._dragging=!1,t._track=[],t._creatingCover=null,o&&WE(t,o)}}var sO={lineX:lO(0),lineY:lO(1),rect:{createCover:function(t,e){function n(t){return t}return YE({toRectRange:n,fromRectRange:n},t,e,[["w"],["e"],["n"],["s"],["s","e"],["s","w"],["n","e"],["n","w"]])},getCreatingRange:function(t){var e=jE(t);return $E(e[1][0],e[1][1],e[0][0],e[0][1])},updateCoverShape:function(t,e,n,i){XE(t,e,n,i)},updateCommon:GE,contain:nO},polygon:{createCover:function(t,e){var n=new Dr;return n.add(new Rc({name:"main",style:UE(e),silent:!0})),n},getCreatingRange:function(t){return t},endCreating:function(t,e){e.remove(e.childAt(0)),e.add(new Pc({name:"main",draggable:!0,drift:j(QE,t,e),ondragend:j(WE,t,{isEnd:!0})}))},updateCoverShape:function(t,e,n,i){e.childAt(0).setShape({points:tO(t,e,n)})},updateCommon:GE,contain:nO}};function lO(t){return{createCover:function(e,n){return YE({toRectRange:function(e){var n=[e,[0,100]];return t&&n.reverse(),n},fromRectRange:function(e){return e[t]}},e,n,[[["w"],["e"]],[["n"],["s"]]][t])},getCreatingRange:function(e){var n=jE(e);return[CE(n[0][t],n[1][t]),kE(n[0][t],n[1][t])]},updateCoverShape:function(e,n,i,r){var o,a=VE(e,n);if(a!==SE&&a.getLinearBrushOtherExtent)o=a.getLinearBrushOtherExtent(t);else{var s=e._zr;o=[0,[s.getWidth(),s.getHeight()][1-t]]}var l=[i,o];t&&l.reverse(),XE(e,n,l,r)},updateCommon:GE,contain:nO}}function cO(t){return t=dO(t),function(e){return Du(e,t)}}function uO(t,e){return t=dO(t),function(n){var i=null!=e?e:n,r=i?t.width:t.height,o=i?t.x:t.y;return[o,o+(r||0)]}}function hO(t,e,n){var i=dO(t);return function(t,r){return i.contain(r[0],r[1])&&!Bk(t,e,n)}}function dO(t){return Re.create(t)}var pO=["axisLine","axisTickLabel","axisName"],fO=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.prototype.init=function(e,n){t.prototype.init.apply(this,arguments),(this._brushController=new DE(n.getZr())).on("brush",W(this._onBrush,this))},e.prototype.render=function(t,e,n,i){if(!function(t,e,n){return n&&"axisAreaSelect"===n.type&&e.findComponents({mainType:"parallelAxis",query:n})[0]===t}(t,e,i)){this.axisModel=t,this.api=n,this.group.removeAll();var r=this._axisGroup;if(this._axisGroup=new Dr,this.group.add(this._axisGroup),t.get("show")){var o=function(t,e){return e.getComponent("parallel",t.get("parallelIndex"))}(t,e),a=o.coordinateSystem,s=t.getAreaSelectStyle(),l=s.width,c=t.axis.dim,u=I({strokeContainThreshold:l},a.getAxisLayout(c)),h=new HC(t,u);R(pO,h.add,h),this._axisGroup.add(h.getGroup()),this._refreshBrushController(u,s,t,o,l,n),Ou(r,this._axisGroup,t)}}},e.prototype._refreshBrushController=function(t,e,n,i,r,o){var a=n.axis.getExtent(),s=a[1]-a[0],l=Math.min(30,.1*Math.abs(s)),c=Re.create({x:a[0],y:-r/2,width:s,height:r});c.x-=l,c.width+=2*l,this._brushController.mount({enableGlobalPan:!0,rotation:t.rotation,x:t.position[0],y:t.position[1]}).setPanels([{panelId:"pl",clipPath:cO(c),isTargetByCursor:hO(c,o,i),getLinearBrushOtherExtent:uO(c,0)}]).enableBrush({brushType:"lineX",brushStyle:e,removeOnClick:!0}).updateCovers(function(t){var e=t.axis;return B(t.activeIntervals,(function(t){return{brushType:"lineX",panelId:"pl",range:[e.dataToCoord(t[0],!0),e.dataToCoord(t[1],!0)]}}))}(n))},e.prototype._onBrush=function(t){var e=t.areas,n=this.axisModel,i=n.axis,r=B(e,(function(t){return[i.coordToData(t.range[0],!0),i.coordToData(t.range[1],!0)]}));(!n.option.realtime===t.isEnd||t.removeOnClick)&&this.api.dispatchAction({type:"axisAreaSelect",parallelAxisId:n.id,intervals:r})},e.prototype.dispose=function(){this._brushController.dispose()},e.type="parallelAxis",e}(hg),gO={type:"axisAreaSelect",event:"axisAreaSelected"},mO={type:"value",areaSelectStyle:{width:20,borderWidth:1,borderColor:"rgba(160,197,232)",color:"rgba(160,197,232)",opacity:.3},realtime:!0,z:10};function vO(t){t.registerComponentView(nE),t.registerComponentModel(oE),t.registerCoordinateSystem("parallel",_E),t.registerPreprocessor(eE),t.registerComponentModel(wE),t.registerComponentView(fO),CC(t,"parallel",wE,mO),function(t){t.registerAction(gO,(function(t,e){e.eachComponent({mainType:"parallelAxis",query:t},(function(e){e.axis.model.setActiveIntervals(t.intervals)}))})),t.registerAction("parallelAxisExpand",(function(t,e){e.eachComponent({mainType:"parallel",query:t},(function(e){e.setAxisExpand(t)}))}))}(t)}var yO=function(){this.x1=0,this.y1=0,this.x2=0,this.y2=0,this.cpx1=0,this.cpy1=0,this.cpx2=0,this.cpy2=0,this.extent=0},bO=function(t){function e(e){return t.call(this,e)||this}return n(e,t),e.prototype.getDefaultShape=function(){return new yO},e.prototype.buildPath=function(t,e){var n=e.extent;t.moveTo(e.x1,e.y1),t.bezierCurveTo(e.cpx1,e.cpy1,e.cpx2,e.cpy2,e.x2,e.y2),"vertical"===e.orient?(t.lineTo(e.x2+n,e.y2),t.bezierCurveTo(e.cpx2+n,e.cpy2,e.cpx1+n,e.cpy1,e.x1+n,e.y1)):(t.lineTo(e.x2,e.y2+n),t.bezierCurveTo(e.cpx2,e.cpy2+n,e.cpx1,e.cpy1+n,e.x1,e.y1+n)),t.closePath()},e.prototype.highlight=function(){Sl(this)},e.prototype.downplay=function(){Cl(this)},e}(_s),xO=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n._focusAdjacencyDisabled=!1,n}return n(e,t),e.prototype.render=function(t,e,n){var i=this,r=t.getGraph(),o=this.group,a=t.layoutInfo,s=a.width,l=a.height,c=t.getData(),u=t.getData("edge"),h=t.get("orient");this._model=t,o.removeAll(),o.x=a.x,o.y=a.y,r.eachEdge((function(e){var n=new bO,i=$s(n);i.dataIndex=e.dataIndex,i.seriesIndex=t.seriesIndex,i.dataType="edge";var r,a,c,d,p,f,g,m,v=e.getModel(),y=v.getModel("lineStyle"),b=y.get("curveness"),x=e.node1.getLayout(),_=e.node1.getModel(),w=_.get("localX"),S=_.get("localY"),C=e.node2.getLayout(),k=e.node2.getModel(),A=k.get("localX"),M=k.get("localY"),T=e.getLayout();n.shape.extent=Math.max(1,T.dy),n.shape.orient=h,"vertical"===h?(r=(null!=w?w*s:x.x)+T.sy,a=(null!=S?S*l:x.y)+x.dy,c=(null!=A?A*s:C.x)+T.ty,p=r,f=a*(1-b)+(d=null!=M?M*l:C.y)*b,g=c,m=a*b+d*(1-b)):(r=(null!=w?w*s:x.x)+x.dx,a=(null!=S?S*l:x.y)+T.sy,p=r*(1-b)+(c=null!=A?A*s:C.x)*b,f=a,g=r*b+c*(1-b),m=d=(null!=M?M*l:C.y)+T.ty),n.setShape({x1:r,y1:a,x2:c,y2:d,cpx1:p,cpy1:f,cpx2:g,cpy2:m}),n.useStyle(y.getItemStyle()),_O(n.style,h,e);var I=""+v.get("value"),E=Gu(v,"edgeLabel");Xu(n,E,{labelFetcher:{getFormattedLabel:function(e,n,i,r,o,a){return t.getFormattedLabel(e,n,"edge",r,ot(o,E.normal&&E.normal.get("formatter"),I),a)}},labelDataIndex:e.dataIndex,defaultText:I}),n.setTextConfig({position:"inside"});var O=v.getModel("emphasis");Hl(n,v,"lineStyle",(function(t){var n=t.getItemStyle();return _O(n,h,e),n})),o.add(n),u.setItemGraphicEl(e.dataIndex,n);var D=O.get("focus");Bl(n,"adjacency"===D?e.getAdjacentDataIndices():"trajectory"===D?e.getTrajectoryDataIndices():D,O.get("blurScope"),O.get("disabled"))})),r.eachNode((function(e){var n=e.getLayout(),i=e.getModel(),r=i.get("localX"),a=i.get("localY"),u=i.getModel("emphasis"),h=new Ls({shape:{x:null!=r?r*s:n.x,y:null!=a?a*l:n.y,width:n.dx,height:n.dy},style:i.getModel("itemStyle").getItemStyle(),z2:10});Xu(h,Gu(i),{labelFetcher:{getFormattedLabel:function(e,n){return t.getFormattedLabel(e,n,"node")}},labelDataIndex:e.dataIndex,defaultText:e.id}),h.disableLabelAnimation=!0,h.setStyle("fill",e.getVisual("color")),h.setStyle("decal",e.getVisual("style").decal),Hl(h,i),o.add(h),c.setItemGraphicEl(e.dataIndex,h),$s(h).dataType="node";var d=u.get("focus");Bl(h,"adjacency"===d?e.getAdjacentDataIndices():"trajectory"===d?e.getTrajectoryDataIndices():d,u.get("blurScope"),u.get("disabled"))})),c.eachItemGraphicEl((function(e,r){c.getItemModel(r).get("draggable")&&(e.drift=function(e,o){i._focusAdjacencyDisabled=!0,this.shape.x+=e,this.shape.y+=o,this.dirty(),n.dispatchAction({type:"dragNode",seriesId:t.id,dataIndex:c.getRawIndex(r),localX:this.shape.x/s,localY:this.shape.y/l})},e.ondragend=function(){i._focusAdjacencyDisabled=!1},e.draggable=!0,e.cursor="move")})),!this._data&&t.isAnimationEnabled()&&o.setClipPath(function(t,e,n){var i=new Ls({shape:{x:t.x-10,y:t.y-10,width:0,height:t.height+20}});return su(i,{shape:{width:t.width+20}},e,(function(){o.removeClipPath()})),i}(o.getBoundingRect(),t)),this._data=t.getData()},e.prototype.dispose=function(){},e.type="sankey",e}(gg);function _O(t,e,n){switch(t.fill){case"source":t.fill=n.node1.getVisual("color"),t.decal=n.node1.getVisual("style").decal;break;case"target":t.fill=n.node2.getVisual("color"),t.decal=n.node2.getVisual("style").decal;break;case"gradient":var i=n.node1.getVisual("color"),r=n.node2.getVisual("color");G(i)&&G(r)&&(t.fill=new Uc(0,0,+("horizontal"===e),+("vertical"===e),[{color:i,offset:0},{color:r,offset:1}]))}}var wO=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.prototype.getInitialData=function(t,e){var n=t.edges||t.links,i=t.data||t.nodes,r=t.levels;this.levelModels=[];for(var o=this.levelModels,a=0;a<r.length;a++)null!=r[a].depth&&r[a].depth>=0&&(o[r[a].depth]=new gh(r[a],this,e));if(i&&n){var s=LI(i,n,this,!0,(function(t,e){t.wrapMethod("getItemModel",(function(t,e){var n=t.parentModel,i=n.getData().getItemLayout(e);if(i){var r=i.depth,o=n.levelModels[r];o&&(t.parentModel=o)}return t})),e.wrapMethod("getItemModel",(function(t,e){var n=t.parentModel,i=n.getGraph().getEdgeByIndex(e).node1.getLayout();if(i){var r=i.depth,o=n.levelModels[r];o&&(t.parentModel=o)}return t}))}));return s.data}},e.prototype.setNodePosition=function(t,e){var n=(this.option.data||this.option.nodes)[t];n.localX=e[0],n.localY=e[1]},e.prototype.getGraph=function(){return this.getData().graph},e.prototype.getEdgeData=function(){return this.getGraph().edgeData},e.prototype.formatTooltip=function(t,e,n){function i(t){return isNaN(t)||null==t}if("edge"===n){var r=this.getDataParams(t,n),o=r.data,a=r.value;return Hf("nameValue",{name:o.source+" -- "+o.target,value:a,noValue:i(a)})}var s=this.getGraph().getNodeByIndex(t).getLayout().value,l=this.getDataParams(t,n).data.name;return Hf("nameValue",{name:null!=l?l+"":null,value:s,noValue:i(s)})},e.prototype.optionUpdated=function(){},e.prototype.getDataParams=function(e,n){var i=t.prototype.getDataParams.call(this,e,n);if(null==i.value&&"node"===n){var r=this.getGraph().getNodeByIndex(e).getLayout().value;i.value=r}return i},e.type="series.sankey",e.defaultOption={z:2,coordinateSystem:"view",left:"5%",top:"5%",right:"20%",bottom:"5%",orient:"horizontal",nodeWidth:20,nodeGap:8,draggable:!0,layoutIterations:32,label:{show:!0,position:"right",fontSize:12},edgeLabel:{show:!1,fontSize:12},levels:[],nodeAlign:"justify",lineStyle:{color:"#314656",opacity:.2,curveness:.5},emphasis:{label:{show:!0},lineStyle:{opacity:.5}},select:{itemStyle:{borderColor:"#212121"}},animationEasing:"linear",animationDuration:1e3},e}(ig);function SO(t,e){t.eachSeriesByType("sankey",(function(t){var n=t.get("nodeWidth"),i=t.get("nodeGap"),r=function(t,e){return md(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()})}(t,e);t.layoutInfo=r;var o=r.width,a=r.height,s=t.getGraph(),l=s.nodes,c=s.edges;!function(t){R(t,(function(t){var e=LO(t.outEdges,DO),n=LO(t.inEdges,DO),i=t.getValue()||0,r=Math.max(e,n,i);t.setLayout({value:r},!0)}))}(l),function(t,e,n,i,r,o,a,s,l){(function(t,e,n,i,r,o,a){for(var s=[],l=[],c=[],u=[],h=0,d=0;d<e.length;d++)s[d]=1;for(d=0;d<t.length;d++)l[d]=t[d].inEdges.length,0===l[d]&&c.push(t[d]);for(var p=-1;c.length;){for(var f=0;f<c.length;f++){var g=c[f],m=g.hostGraph.data.getRawDataItem(g.dataIndex),v=null!=m.depth&&m.depth>=0;v&&m.depth>p&&(p=m.depth),g.setLayout({depth:v?m.depth:h},!0),"vertical"===o?g.setLayout({dy:n},!0):g.setLayout({dx:n},!0);for(var y=0;y<g.outEdges.length;y++){var b=g.outEdges[y];s[e.indexOf(b)]=0;var x=b.node2;0==--l[t.indexOf(x)]&&u.indexOf(x)<0&&u.push(x)}}++h,c=u,u=[]}for(d=0;d<s.length;d++)if(1===s[d])throw new Error("Sankey is a DAG, the original data has cycle!");var _=p>h-1?p:h-1;a&&"left"!==a&&function(t,e,n,i){if("right"===e){for(var r=[],o=t,a=0;o.length;){for(var s=0;s<o.length;s++){var l=o[s];l.setLayout({skNodeHeight:a},!0);for(var c=0;c<l.inEdges.length;c++){var u=l.inEdges[c];r.indexOf(u.node1)<0&&r.push(u.node1)}}o=r,r=[],++a}R(t,(function(t){CO(t)||t.setLayout({depth:Math.max(0,i-t.getLayout().skNodeHeight)},!0)}))}else"justify"===e&&function(t,e){R(t,(function(t){CO(t)||t.outEdges.length||t.setLayout({depth:e},!0)}))}(t,i)}(t,a,0,_),function(t,e,n){R(t,(function(t){var i=t.getLayout().depth*e;"vertical"===n?t.setLayout({y:i},!0):t.setLayout({x:i},!0)}))}(t,"vertical"===o?(r-n)/_:(i-n)/_,o)})(t,e,n,r,o,s,l),function(t,e,n,i,r,o,a){var s=function(t,e){var n=[],i="vertical"===e?"y":"x",r=Bo(t,(function(t){return t.getLayout()[i]}));return r.keys.sort((function(t,e){return t-e})),R(r.keys,(function(t){n.push(r.buckets.get(t))})),n}(t,a);(function(t,e,n,i,r,o){var a=1/0;R(t,(function(t){var e=t.length,s=0;R(t,(function(t){s+=t.getLayout().value}));var l="vertical"===o?(i-(e-1)*r)/s:(n-(e-1)*r)/s;l<a&&(a=l)})),R(t,(function(t){R(t,(function(t,e){var n=t.getLayout().value*a;"vertical"===o?(t.setLayout({x:e},!0),t.setLayout({dx:n},!0)):(t.setLayout({y:e},!0),t.setLayout({dy:n},!0))}))})),R(e,(function(t){var e=+t.getValue()*a;t.setLayout({dy:e},!0)}))})(s,e,n,i,r,a),kO(s,r,n,i,a);for(var l=1;o>0;o--)AO(s,l*=.99,a),kO(s,r,n,i,a),PO(s,l,a),kO(s,r,n,i,a)}(t,e,o,r,i,a,s),function(t,e){var n="vertical"===e?"x":"y";R(t,(function(t){t.outEdges.sort((function(t,e){return t.node2.getLayout()[n]-e.node2.getLayout()[n]})),t.inEdges.sort((function(t,e){return t.node1.getLayout()[n]-e.node1.getLayout()[n]}))})),R(t,(function(t){var e=0,n=0;R(t.outEdges,(function(t){t.setLayout({sy:e},!0),e+=t.getLayout().dy})),R(t.inEdges,(function(t){t.setLayout({ty:n},!0),n+=t.getLayout().dy}))}))}(t,s)}(l,c,n,i,o,a,0!==F(l,(function(t){return 0===t.getLayout().value})).length?0:t.get("layoutIterations"),t.get("orient"),t.get("nodeAlign"))}))}function CO(t){var e=t.hostGraph.data.getRawDataItem(t.dataIndex);return null!=e.depth&&e.depth>=0}function kO(t,e,n,i,r){var o="vertical"===r?"x":"y";R(t,(function(t){var a,s,l;t.sort((function(t,e){return t.getLayout()[o]-e.getLayout()[o]}));for(var c=0,u=t.length,h="vertical"===r?"dx":"dy",d=0;d<u;d++)(l=c-(s=t[d]).getLayout()[o])>0&&(a=s.getLayout()[o]+l,"vertical"===r?s.setLayout({x:a},!0):s.setLayout({y:a},!0)),c=s.getLayout()[o]+s.getLayout()[h]+e;if((l=c-e-("vertical"===r?i:n))>0)for(a=s.getLayout()[o]-l,"vertical"===r?s.setLayout({x:a},!0):s.setLayout({y:a},!0),c=a,d=u-2;d>=0;--d)(l=(s=t[d]).getLayout()[o]+s.getLayout()[h]+e-c)>0&&(a=s.getLayout()[o]-l,"vertical"===r?s.setLayout({x:a},!0):s.setLayout({y:a},!0)),c=s.getLayout()[o]}))}function AO(t,e,n){R(t.slice().reverse(),(function(t){R(t,(function(t){if(t.outEdges.length){var i=LO(t.outEdges,MO,n)/LO(t.outEdges,DO);if(isNaN(i)){var r=t.outEdges.length;i=r?LO(t.outEdges,TO,n)/r:0}if("vertical"===n){var o=t.getLayout().x+(i-OO(t,n))*e;t.setLayout({x:o},!0)}else{var a=t.getLayout().y+(i-OO(t,n))*e;t.setLayout({y:a},!0)}}}))}))}function MO(t,e){return OO(t.node2,e)*t.getValue()}function TO(t,e){return OO(t.node2,e)}function IO(t,e){return OO(t.node1,e)*t.getValue()}function EO(t,e){return OO(t.node1,e)}function OO(t,e){return"vertical"===e?t.getLayout().x+t.getLayout().dx/2:t.getLayout().y+t.getLayout().dy/2}function DO(t){return t.getValue()}function LO(t,e,n){for(var i=0,r=t.length,o=-1;++o<r;){var a=+e(t[o],n);isNaN(a)||(i+=a)}return i}function PO(t,e,n){R(t,(function(t){R(t,(function(t){if(t.inEdges.length){var i=LO(t.inEdges,IO,n)/LO(t.inEdges,DO);if(isNaN(i)){var r=t.inEdges.length;i=r?LO(t.inEdges,EO,n)/r:0}if("vertical"===n){var o=t.getLayout().x+(i-OO(t,n))*e;t.setLayout({x:o},!0)}else{var a=t.getLayout().y+(i-OO(t,n))*e;t.setLayout({y:a},!0)}}}))}))}function NO(t){t.eachSeriesByType("sankey",(function(t){var e=t.getGraph(),n=e.nodes,i=e.edges;if(n.length){var r=1/0,o=-1/0;R(n,(function(t){var e=t.getLayout().value;e<r&&(r=e),e>o&&(o=e)})),R(n,(function(e){var n=new tT({type:"color",mappingMethod:"linear",dataExtent:[r,o],visual:t.get("color")}).mapValueToVisual(e.getLayout().value),i=e.getModel().get(["itemStyle","color"]);null!=i?(e.setVisual("color",i),e.setVisual("style",{fill:i})):(e.setVisual("color",n),e.setVisual("style",{fill:n}))}))}i.length&&R(i,(function(t){var e=t.getModel().get("lineStyle");t.setVisual("style",e)}))}))}var RO=function(){function t(){}return t.prototype.getInitialData=function(t,e){var n,i,r=e.getComponent("xAxis",this.get("xAxisIndex")),o=e.getComponent("yAxis",this.get("yAxisIndex")),a=r.get("type"),s=o.get("type");"category"===a?(t.layout="horizontal",n=r.getOrdinalMeta(),i=!0):"category"===s?(t.layout="vertical",n=o.getOrdinalMeta(),i=!0):t.layout=t.layout||"horizontal";var l=["x","y"],c="horizontal"===t.layout?0:1,u=this._baseAxisDim=l[c],h=l[1-c],d=[r,o],p=d[c].get("type"),f=d[1-c].get("type"),g=t.data;if(g&&i){var m=[];R(g,(function(t,e){var n;Y(t)?(n=t.slice(),t.unshift(e)):Y(t.value)?((n=I({},t)).value=n.value.slice(),t.value.unshift(e)):n=t,m.push(n)})),t.data=m}var v=this.defaultValueDimensions,y=[{name:u,type:Ay(p),ordinalMeta:n,otherDims:{tooltip:!1,itemName:0},dimsDef:["base"]},{name:h,type:Ay(f),dimsDef:v.slice()}];return lC(this,{coordDimensions:y,dimensionsCount:v.length+1,encodeDefaulter:j(Bd,y,this)})},t.prototype.getBaseAxis=function(){var t=this._baseAxisDim;return this.ecModel.getComponent(t+"Axis",this.get(t+"AxisIndex")).axis},t}(),BO=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.defaultValueDimensions=[{name:"min",defaultTooltip:!0},{name:"Q1",defaultTooltip:!0},{name:"median",defaultTooltip:!0},{name:"Q3",defaultTooltip:!0},{name:"max",defaultTooltip:!0}],n.visualDrawType="stroke",n}return n(e,t),e.type="series.boxplot",e.dependencies=["xAxis","yAxis","grid"],e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,boxWidth:[7,50],itemStyle:{color:"#fff",borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2,shadowBlur:5,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}},animationDuration:800},e}(ig);P(BO,RO,!0);var zO=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.prototype.render=function(t,e,n){var i=t.getData(),r=this.group,o=this._data;this._data||r.removeAll();var a="horizontal"===t.get("layout")?1:0;i.diff(o).add((function(t){if(i.hasValue(t)){var e=HO(i.getItemLayout(t),i,t,a,!0);i.setItemGraphicEl(t,e),r.add(e)}})).update((function(t,e){var n=o.getItemGraphicEl(e);if(i.hasValue(t)){var s=i.getItemLayout(t);n?(du(n),WO(s,n,i,t)):n=HO(s,i,t,a),r.add(n),i.setItemGraphicEl(t,n)}else r.remove(n)})).remove((function(t){var e=o.getItemGraphicEl(t);e&&r.remove(e)})).execute(),this._data=i},e.prototype.remove=function(t){var e=this.group,n=this._data;this._data=null,n&&n.eachItemGraphicEl((function(t){t&&e.remove(t)}))},e.type="boxplot",e}(gg),FO=function(){},VO=function(t){function e(e){var n=t.call(this,e)||this;return n.type="boxplotBoxPath",n}return n(e,t),e.prototype.getDefaultShape=function(){return new FO},e.prototype.buildPath=function(t,e){var n=e.points,i=0;for(t.moveTo(n[i][0],n[i][1]),i++;i<4;i++)t.lineTo(n[i][0],n[i][1]);for(t.closePath();i<n.length;i++)t.moveTo(n[i][0],n[i][1]),i++,t.lineTo(n[i][0],n[i][1])},e}(_s);function HO(t,e,n,i,r){var o=t.ends,a=new VO({shape:{points:r?jO(o,i,t):o}});return WO(t,a,e,n,r),a}function WO(t,e,n,i,r){var o=n.hostModel;(0,Hu[r?"initProps":"updateProps"])(e,{shape:{points:t.ends}},o,i),e.useStyle(n.getItemVisual(i,"style")),e.style.strokeNoScale=!0,e.z2=100;var a=n.getItemModel(i),s=a.getModel("emphasis");Hl(e,a),Bl(e,s.get("focus"),s.get("blurScope"),s.get("disabled"))}function jO(t,e,n){return B(t,(function(t){return(t=t.slice())[e]=n.initBaseline,t}))}var YO=R;function XO(t){var e=function(t){var e=[],n=[];return t.eachSeriesByType("boxplot",(function(t){var i=t.getBaseAxis(),r=D(n,i);r<0&&(r=n.length,n[r]=i,e[r]={axis:i,seriesModels:[]}),e[r].seriesModels.push(t)})),e}(t);YO(e,(function(t){var e=t.seriesModels;e.length&&(function(t){var e,n=t.axis,i=t.seriesModels,r=i.length,o=t.boxWidthList=[],a=t.boxOffsetList=[],s=[];if("category"===n.type)e=n.getBandWidth();else{var l=0;YO(i,(function(t){l=Math.max(l,t.getData().count())}));var c=n.getExtent();e=Math.abs(c[1]-c[0])/l}YO(i,(function(t){var n=t.get("boxWidth");Y(n)||(n=[n,n]),s.push([jr(n[0],e)||0,jr(n[1],e)||0])}));var u=.8*e-2,h=u/r*.3,d=(u-h*(r-1))/r,p=d/2-u/2;YO(i,(function(t,e){a.push(p),p+=h+d,o.push(Math.min(Math.max(d,s[e][0]),s[e][1]))}))}(t),YO(e,(function(e,n){!function(t,e,n){var i=t.coordinateSystem,r=t.getData(),o=n/2,a="horizontal"===t.get("layout")?0:1,s=1-a,l=["x","y"],c=r.mapDimension(l[a]),u=r.mapDimensionsAll(l[s]);if(!(null==c||u.length<5))for(var h=0;h<r.count();h++){var d=r.get(c,h),p=b(d,u[2],h),f=b(d,u[0],h),g=b(d,u[1],h),m=b(d,u[3],h),v=b(d,u[4],h),y=[];x(y,g,!1),x(y,m,!0),y.push(f,g,v,m),_(y,f),_(y,v),_(y,p),r.setItemLayout(h,{initBaseline:p[s],ends:y})}function b(t,n,o){var l,c=r.get(n,o),u=[];return u[a]=t,u[s]=c,isNaN(t)||isNaN(c)?l=[NaN,NaN]:(l=i.dataToPoint(u))[a]+=e,l}function x(t,e,n){var i=e.slice(),r=e.slice();i[a]+=o,r[a]-=o,n?t.push(i,r):t.push(r,i)}function _(t,e){var n=e.slice(),i=e.slice();n[a]-=o,i[a]+=o,t.push(n,i)}}(e,t.boxOffsetList[n],t.boxWidthList[n])})))}))}var GO={type:"echarts:boxplot",transform:function(t){var e=t.upstream;if(e.sourceFormat!==Id){po("")}var n=function(t,e){for(var n=[],i=[],r=(e=e||{}).boundIQR,o="none"===r||0===r,a=0;a<t.length;a++){var s=Xr(t[a].slice()),l=oo(s,.25),c=oo(s,.5),u=oo(s,.75),h=s[0],d=s[s.length-1],p=(null==r?1.5:r)*(u-l),f=o?h:Math.max(h,l-p),g=o?d:Math.min(d,u+p),m=e.itemNameFormatter,v=X(m)?m({value:a}):G(m)?m.replace("{value}",a+""):a+"";n.push([v,f,l,c,u,g]);for(var y=0;y<s.length;y++){var b=s[y];if(b<f||b>g){var x=[v,b];i.push(x)}}}return{boxData:n,outliers:i}}(e.getRawData(),t.config);return[{dimensions:["ItemName","Low","Q1","Q2","Q3","High"],data:n.boxData},{data:n.outliers}]}},qO=["color","borderColor"],UO=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.prototype.render=function(t,e,n){this.group.removeClipPath(),this._progressiveEls=null,this._updateDrawMode(t),this._isLargeDraw?this._renderLarge(t):this._renderNormal(t)},e.prototype.incrementalPrepareRender=function(t,e,n){this._clear(),this._updateDrawMode(t)},e.prototype.incrementalRender=function(t,e,n,i){this._progressiveEls=[],this._isLargeDraw?this._incrementalRenderLarge(t,e):this._incrementalRenderNormal(t,e)},e.prototype.eachRendered=function(t){Vu(this._progressiveEls||this.group,t)},e.prototype._updateDrawMode=function(t){var e=t.pipelineContext.large;null!=this._isLargeDraw&&e===this._isLargeDraw||(this._isLargeDraw=e,this._clear())},e.prototype._renderNormal=function(t){var e=t.getData(),n=this._data,i=this.group,r=e.getLayout("isSimpleBox"),o=t.get("clip",!0),a=t.coordinateSystem,s=a.getArea&&a.getArea();this._data||i.removeAll(),e.diff(n).add((function(n){if(e.hasValue(n)){var a=e.getItemLayout(n);if(o&&QO(s,a))return;var l=KO(a,n,!0);su(l,{shape:{points:a.ends}},t,n),JO(l,e,n,r),i.add(l),e.setItemGraphicEl(n,l)}})).update((function(a,l){var c=n.getItemGraphicEl(l);if(e.hasValue(a)){var u=e.getItemLayout(a);o&&QO(s,u)?i.remove(c):(c?(au(c,{shape:{points:u.ends}},t,a),du(c)):c=KO(u),JO(c,e,a,r),i.add(c),e.setItemGraphicEl(a,c))}else i.remove(c)})).remove((function(t){var e=n.getItemGraphicEl(t);e&&i.remove(e)})).execute(),this._data=e},e.prototype._renderLarge=function(t){this._clear(),iD(t,this.group);var e=t.get("clip",!0)?lS(t.coordinateSystem,!1,t):null;e?this.group.setClipPath(e):this.group.removeClipPath()},e.prototype._incrementalRenderNormal=function(t,e){for(var n,i=e.getData(),r=i.getLayout("isSimpleBox");null!=(n=t.next());){var o=KO(i.getItemLayout(n));JO(o,i,n,r),o.incremental=!0,this.group.add(o),this._progressiveEls.push(o)}},e.prototype._incrementalRenderLarge=function(t,e){iD(e,this.group,this._progressiveEls,!0)},e.prototype.remove=function(t){this._clear()},e.prototype._clear=function(){this.group.removeAll(),this._data=null},e.type="candlestick",e}(gg),$O=function(){},ZO=function(t){function e(e){var n=t.call(this,e)||this;return n.type="normalCandlestickBox",n}return n(e,t),e.prototype.getDefaultShape=function(){return new $O},e.prototype.buildPath=function(t,e){var n=e.points;this.__simpleBox?(t.moveTo(n[4][0],n[4][1]),t.lineTo(n[6][0],n[6][1])):(t.moveTo(n[0][0],n[0][1]),t.lineTo(n[1][0],n[1][1]),t.lineTo(n[2][0],n[2][1]),t.lineTo(n[3][0],n[3][1]),t.closePath(),t.moveTo(n[4][0],n[4][1]),t.lineTo(n[5][0],n[5][1]),t.moveTo(n[6][0],n[6][1]),t.lineTo(n[7][0],n[7][1]))},e}(_s);function KO(t,e,n){var i=t.ends;return new ZO({shape:{points:n?tD(i,t):i},z2:100})}function QO(t,e){for(var n=!0,i=0;i<e.ends.length;i++)if(t.contain(e.ends[i][0],e.ends[i][1])){n=!1;break}return n}function JO(t,e,n,i){var r=e.getItemModel(n);t.useStyle(e.getItemVisual(n,"style")),t.style.strokeNoScale=!0,t.__simpleBox=i,Hl(t,r)}function tD(t,e){return B(t,(function(t){return(t=t.slice())[1]=e.initBaseline,t}))}var eD=function(){},nD=function(t){function e(e){var n=t.call(this,e)||this;return n.type="largeCandlestickBox",n}return n(e,t),e.prototype.getDefaultShape=function(){return new eD},e.prototype.buildPath=function(t,e){for(var n=e.points,i=0;i<n.length;)if(this.__sign===n[i++]){var r=n[i++];t.moveTo(r,n[i++]),t.lineTo(r,n[i++])}else i+=3},e}(_s);function iD(t,e,n,i){var r=t.getData().getLayout("largePoints"),o=new nD({shape:{points:r},__sign:1,ignoreCoarsePointer:!0});e.add(o);var a=new nD({shape:{points:r},__sign:-1,ignoreCoarsePointer:!0});e.add(a);var s=new nD({shape:{points:r},__sign:0,ignoreCoarsePointer:!0});e.add(s),rD(1,o,t),rD(-1,a,t),rD(0,s,t),i&&(o.incremental=!0,a.incremental=!0),n&&n.push(o,a)}function rD(t,e,n,i){var r=n.get(["itemStyle",t>0?"borderColor":"borderColor0"])||n.get(["itemStyle",t>0?"color":"color0"]);0===t&&(r=n.get(["itemStyle","borderColorDoji"]));var o=n.getModel("itemStyle").getItemStyle(qO);e.useStyle(o),e.style.fill=null,e.style.stroke=r}var oD=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.defaultValueDimensions=[{name:"open",defaultTooltip:!0},{name:"close",defaultTooltip:!0},{name:"lowest",defaultTooltip:!0},{name:"highest",defaultTooltip:!0}],n}return n(e,t),e.prototype.getShadowDim=function(){return"open"},e.prototype.brushSelector=function(t,e,n){var i=e.getItemLayout(t);return i&&n.rect(i.brushRect)},e.type="series.candlestick",e.dependencies=["xAxis","yAxis","grid"],e.defaultOption={z:2,coordinateSystem:"cartesian2d",legendHoverLink:!0,layout:null,clip:!0,itemStyle:{color:"#eb5454",color0:"#47b262",borderColor:"#eb5454",borderColor0:"#47b262",borderColorDoji:null,borderWidth:1},emphasis:{scale:!0,itemStyle:{borderWidth:2}},barMaxWidth:null,barMinWidth:null,barWidth:null,large:!0,largeThreshold:600,progressive:3e3,progressiveThreshold:1e4,progressiveChunkMode:"mod",animationEasing:"linear",animationDuration:300},e}(ig);function aD(t){t&&Y(t.series)&&R(t.series,(function(t){$(t)&&"k"===t.type&&(t.type="candlestick")}))}P(oD,RO,!0);var sD=["itemStyle","borderColor"],lD=["itemStyle","borderColor0"],cD=["itemStyle","borderColorDoji"],uD=["itemStyle","color"],hD=["itemStyle","color0"],dD={seriesType:"candlestick",plan:dg(),performRawSeries:!0,reset:function(t,e){function n(t,e){return e.get(t>0?uD:hD)}function i(t,e){return e.get(0===t?cD:t>0?sD:lD)}if(!e.isSeriesFiltered(t))return!t.pipelineContext.large&&{progress:function(t,e){for(var r;null!=(r=t.next());){var o=e.getItemModel(r),a=e.getItemLayout(r).sign,s=o.getItemStyle();s.fill=n(a,o),s.stroke=i(a,o)||s.fill,I(e.ensureUniqueItemVisual(r,"style"),s)}}}}},pD={seriesType:"candlestick",plan:dg(),reset:function(t){var e=t.coordinateSystem,n=t.getData(),i=function(t,e){var n,i=t.getBaseAxis(),r="category"===i.type?i.getBandWidth():(n=i.getExtent(),Math.abs(n[1]-n[0])/e.count()),o=jr(rt(t.get("barMaxWidth"),r),r),a=jr(rt(t.get("barMinWidth"),1),r),s=t.get("barWidth");return null!=s?jr(s,r):Math.max(Math.min(r/2,o),a)}(t,n),r=["x","y"],o=n.getDimensionIndex(n.mapDimension(r[0])),a=B(n.mapDimensionsAll(r[1]),n.getDimensionIndex,n),s=a[0],l=a[1],c=a[2],u=a[3];if(n.setLayout({candleWidth:i,isSimpleBox:i<=1.3}),!(o<0||a.length<4))return{progress:t.pipelineContext.large?function(n,i){for(var r,a,h=bb(4*n.count),d=0,p=[],f=[],g=i.getStore(),m=!!t.get(["itemStyle","borderColorDoji"]);null!=(a=n.next());){var v=g.get(o,a),y=g.get(s,a),b=g.get(l,a),x=g.get(c,a),_=g.get(u,a);isNaN(v)||isNaN(x)||isNaN(_)?(h[d++]=NaN,d+=3):(h[d++]=fD(g,a,y,b,l,m),p[0]=v,p[1]=x,r=e.dataToPoint(p,null,f),h[d++]=r?r[0]:NaN,h[d++]=r?r[1]:NaN,p[1]=_,r=e.dataToPoint(p,null,f),h[d++]=r?r[1]:NaN)}i.setLayout("largePoints",h)}:function(t,n){for(var r,a=n.getStore();null!=(r=t.next());){var h=a.get(o,r),d=a.get(s,r),p=a.get(l,r),f=a.get(c,r),g=a.get(u,r),m=Math.min(d,p),v=Math.max(d,p),y=C(m,h),b=C(v,h),x=C(f,h),_=C(g,h),w=[];k(w,b,0),k(w,y,1),w.push(M(_),M(b),M(x),M(y));var S=!!n.getItemModel(r).get(["itemStyle","borderColorDoji"]);n.setItemLayout(r,{sign:fD(a,r,d,p,l,S),initBaseline:d>p?b[1]:y[1],ends:w,brushRect:A(f,g,h)})}function C(t,n){var i=[];return i[0]=n,i[1]=t,isNaN(n)||isNaN(t)?[NaN,NaN]:e.dataToPoint(i)}function k(t,e,n){var r=e.slice(),o=e.slice();r[0]=Au(r[0]+i/2,1,!1),o[0]=Au(o[0]-i/2,1,!0),n?t.push(r,o):t.push(o,r)}function A(t,e,n){var r=C(t,n),o=C(e,n);return r[0]-=i/2,o[0]-=i/2,{x:r[0],y:r[1],width:i,height:o[1]-r[1]}}function M(t){return t[0]=Au(t[0],1),t}}}}};function fD(t,e,n,i,r,o){return n>i?-1:n<i?1:o?0:e>0?t.get(r,e-1)<=i?1:-1:1}function gD(t,e){var n=e.rippleEffectColor||e.color;t.eachChild((function(t){t.attr({z:e.z,zlevel:e.zlevel,style:{stroke:"stroke"===e.brushType?n:null,fill:"fill"===e.brushType?n:null}})}))}var mD=function(t){function e(e,n){var i=t.call(this)||this,r=new Yw(e,n),o=new Dr;return i.add(r),i.add(o),i.updateData(e,n),i}return n(e,t),e.prototype.stopEffectAnimation=function(){this.childAt(1).removeAll()},e.prototype.startEffectAnimation=function(t){for(var e=t.symbolType,n=t.color,i=t.rippleNumber,r=this.childAt(1),o=0;o<i;o++){var a=Mm(e,-1,-1,2,2,n);a.attr({style:{strokeNoScale:!0},z2:99,silent:!0,scaleX:.5,scaleY:.5});var s=-o/i*t.period+t.effectOffset;a.animate("",!0).when(t.period,{scaleX:t.rippleScale/2,scaleY:t.rippleScale/2}).delay(s).start(),a.animateStyle(!0).when(t.period,{opacity:0}).delay(s).start(),r.add(a)}gD(r,t)},e.prototype.updateEffectAnimation=function(t){for(var e=this._effectCfg,n=this.childAt(1),i=["symbolType","period","rippleScale","rippleNumber"],r=0;r<i.length;r++){var o=i[r];if(e[o]!==t[o])return this.stopEffectAnimation(),void this.startEffectAnimation(t)}gD(n,t)},e.prototype.highlight=function(){Sl(this)},e.prototype.downplay=function(){Cl(this)},e.prototype.getSymbolType=function(){var t=this.childAt(0);return t&&t.getSymbolType()},e.prototype.updateData=function(t,e){var n=this,i=t.hostModel;this.childAt(0).updateData(t,e);var r=this.childAt(1),o=t.getItemModel(e),a=t.getItemVisual(e,"symbol"),s=Tm(t.getItemVisual(e,"symbolSize")),l=t.getItemVisual(e,"style"),c=l&&l.fill,u=o.getModel("emphasis");r.setScale(s),r.traverse((function(t){t.setStyle("fill",c)}));var h=Im(t.getItemVisual(e,"symbolOffset"),s);h&&(r.x=h[0],r.y=h[1]);var d=t.getItemVisual(e,"symbolRotate");r.rotation=(d||0)*Math.PI/180||0;var p={};p.showEffectOn=i.get("showEffectOn"),p.rippleScale=o.get(["rippleEffect","scale"]),p.brushType=o.get(["rippleEffect","brushType"]),p.period=1e3*o.get(["rippleEffect","period"]),p.effectOffset=e/t.count(),p.z=i.getShallow("z")||0,p.zlevel=i.getShallow("zlevel")||0,p.symbolType=a,p.color=c,p.rippleEffectColor=o.get(["rippleEffect","color"]),p.rippleNumber=o.get(["rippleEffect","number"]),"render"===p.showEffectOn?(this._effectCfg?this.updateEffectAnimation(p):this.startEffectAnimation(p),this._effectCfg=p):(this._effectCfg=null,this.stopEffectAnimation(),this.onHoverStateChange=function(t){"emphasis"===t?"render"!==p.showEffectOn&&n.startEffectAnimation(p):"normal"===t&&"render"!==p.showEffectOn&&n.stopEffectAnimation()}),this._effectCfg=p,Bl(this,u.get("focus"),u.get("blurScope"),u.get("disabled"))},e.prototype.fadeOut=function(t){t&&t()},e}(Dr),vD=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.prototype.init=function(){this._symbolDraw=new $w(mD)},e.prototype.render=function(t,e,n){var i=t.getData(),r=this._symbolDraw;r.updateData(i,{clipShape:this._getClipShape(t)}),this.group.add(r.group)},e.prototype._getClipShape=function(t){var e=t.coordinateSystem,n=e&&e.getArea&&e.getArea();return t.get("clip",!0)?n:null},e.prototype.updateTransform=function(t,e,n){var i=t.getData();this.group.dirty();var r=_S("").reset(t,e,n);r.progress&&r.progress({start:0,end:i.count(),count:i.count()},i),this._symbolDraw.updateLayout()},e.prototype._updateGroupTransform=function(t){var e=t.coordinateSystem;e&&e.getRoamTransform&&(this.group.transform=ke(e.getRoamTransform()),this.group.decomposeTransform())},e.prototype.remove=function(t,e){this._symbolDraw&&this._symbolDraw.remove(!0)},e.type="effectScatter",e}(gg),yD=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.hasSymbolVisual=!0,n}return n(e,t),e.prototype.getInitialData=function(t,e){return nb(null,this,{useEncodeDefaulter:!0})},e.prototype.brushSelector=function(t,e,n){return n.point(e.getItemLayout(t))},e.type="series.effectScatter",e.dependencies=["grid","polar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,effectType:"ripple",progressive:0,showEffectOn:"render",clip:!0,rippleEffect:{period:4,scale:2.5,brushType:"fill",number:3},universalTransition:{divideShape:"clone"},symbolSize:10},e}(ig),bD=function(t){function e(e,n,i){var r=t.call(this)||this;return r.add(r.createLine(e,n,i)),r._updateEffectSymbol(e,n),r}return n(e,t),e.prototype.createLine=function(t,e,n){return new pI(t,e,n)},e.prototype._updateEffectSymbol=function(t,e){var n=t.getItemModel(e).getModel("effect"),i=n.get("symbolSize"),r=n.get("symbol");Y(i)||(i=[i,i]);var o=t.getItemVisual(e,"style"),a=n.get("color")||o&&o.stroke,s=this.childAt(1);this._symbolType!==r&&(this.remove(s),(s=Mm(r,-.5,-.5,1,1,a)).z2=100,s.culling=!0,this.add(s)),s&&(s.setStyle("shadowColor",a),s.setStyle(n.getItemStyle(["color"])),s.scaleX=i[0],s.scaleY=i[1],s.setColor(a),this._symbolType=r,this._symbolScale=i,this._updateEffectAnimation(t,n,e))},e.prototype._updateEffectAnimation=function(t,e,n){var i=this.childAt(1);if(i){var r=t.getItemLayout(n),o=1e3*e.get("period"),a=e.get("loop"),s=e.get("roundTrip"),l=e.get("constantSpeed"),c=it(e.get("delay"),(function(e){return e/t.count()*o/3}));if(i.ignore=!0,this._updateAnimationPoints(i,r),l>0&&(o=this._getLineLength(i)/l*1e3),o!==this._period||a!==this._loop||s!==this._roundTrip){i.stopAnimation();var u=void 0;u=X(c)?c(n):c,i.__t>0&&(u=-o*i.__t),this._animateSymbol(i,o,u,a,s)}this._period=o,this._loop=a,this._roundTrip=s}},e.prototype._animateSymbol=function(t,e,n,i,r){if(e>0){t.__t=0;var o=this,a=t.animate("",i).when(r?2*e:e,{__t:r?2:1}).delay(n).during((function(){o._updateSymbolPosition(t)}));i||a.done((function(){o.remove(t)})),a.start()}},e.prototype._getLineLength=function(t){return zt(t.__p1,t.__cp1)+zt(t.__cp1,t.__p2)},e.prototype._updateAnimationPoints=function(t,e){t.__p1=e[0],t.__p2=e[1],t.__cp1=e[2]||[(e[0][0]+e[1][0])/2,(e[0][1]+e[1][1])/2]},e.prototype.updateData=function(t,e,n){this.childAt(0).updateData(t,e,n),this._updateEffectSymbol(t,e)},e.prototype._updateSymbolPosition=function(t){var e=t.__p1,n=t.__p2,i=t.__cp1,r=t.__t<1?t.__t:2-t.__t,o=[t.x,t.y],a=o.slice(),s=wn,l=Sn;o[0]=s(e[0],i[0],n[0],r),o[1]=s(e[1],i[1],n[1],r);var c=t.__t<1?l(e[0],i[0],n[0],r):l(n[0],i[0],e[0],1-r),u=t.__t<1?l(e[1],i[1],n[1],r):l(n[1],i[1],e[1],1-r);t.rotation=-Math.atan2(u,c)-Math.PI/2,"line"!==this._symbolType&&"rect"!==this._symbolType&&"roundRect"!==this._symbolType||(void 0!==t.__lastT&&t.__lastT<t.__t?(t.scaleY=1.05*zt(a,o),1===r&&(o[0]=a[0]+(o[0]-a[0])/2,o[1]=a[1]+(o[1]-a[1])/2)):1===t.__lastT?t.scaleY=2*zt(e,o):t.scaleY=this._symbolScale[1]),t.__lastT=t.__t,t.ignore=!1,t.x=o[0],t.y=o[1]},e.prototype.updateLayout=function(t,e){this.childAt(0).updateLayout(t,e);var n=t.getItemModel(e).getModel("effect");this._updateEffectAnimation(t,n,e)},e}(Dr),xD=function(t){function e(e,n,i){var r=t.call(this)||this;return r._createPolyline(e,n,i),r}return n(e,t),e.prototype._createPolyline=function(t,e,n){var i=t.getItemLayout(e),r=new Rc({shape:{points:i}});this.add(r),this._updateCommonStl(t,e,n)},e.prototype.updateData=function(t,e,n){var i=t.hostModel;au(this.childAt(0),{shape:{points:t.getItemLayout(e)}},i,e),this._updateCommonStl(t,e,n)},e.prototype._updateCommonStl=function(t,e,n){var i=this.childAt(0),r=t.getItemModel(e),o=n&&n.emphasisLineStyle,a=n&&n.focus,s=n&&n.blurScope,l=n&&n.emphasisDisabled;if(!n||t.hasItemOption){var c=r.getModel("emphasis");o=c.getModel("lineStyle").getLineStyle(),l=c.get("disabled"),a=c.get("focus"),s=c.get("blurScope")}i.useStyle(t.getItemVisual(e,"style")),i.style.fill=null,i.style.strokeNoScale=!0,i.ensureState("emphasis").style=o,Bl(this,a,s,l)},e.prototype.updateLayout=function(t,e){this.childAt(0).setShape("points",t.getItemLayout(e))},e}(Dr),_D=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._lastFrame=0,e._lastFramePercent=0,e}return n(e,t),e.prototype.createLine=function(t,e,n){return new xD(t,e,n)},e.prototype._updateAnimationPoints=function(t,e){this._points=e;for(var n=[0],i=0,r=1;r<e.length;r++){var o=e[r-1],a=e[r];i+=zt(o,a),n.push(i)}if(0!==i){for(r=0;r<n.length;r++)n[r]/=i;this._offsets=n,this._length=i}else this._length=0},e.prototype._getLineLength=function(){return this._length},e.prototype._updateSymbolPosition=function(t){var e=t.__t<1?t.__t:2-t.__t,n=this._points,i=this._offsets,r=n.length;if(i){var o,a=this._lastFrame;if(e<this._lastFramePercent){for(o=Math.min(a+1,r-1);o>=0&&!(i[o]<=e);o--);o=Math.min(o,r-2)}else{for(o=a;o<r&&!(i[o]>e);o++);o=Math.min(o-1,r-2)}var s=(e-i[o])/(i[o+1]-i[o]),l=n[o],c=n[o+1];t.x=l[0]*(1-s)+s*c[0],t.y=l[1]*(1-s)+s*c[1];var u=t.__t<1?c[0]-l[0]:l[0]-c[0],h=t.__t<1?c[1]-l[1]:l[1]-c[1];t.rotation=-Math.atan2(h,u)-Math.PI/2,this._lastFrame=o,this._lastFramePercent=e,t.ignore=!1}},e}(bD),wD=function(){this.polyline=!1,this.curveness=0,this.segs=[]},SD=function(t){function e(e){var n=t.call(this,e)||this;return n._off=0,n.hoverDataIdx=-1,n}return n(e,t),e.prototype.reset=function(){this.notClear=!1,this._off=0},e.prototype.getDefaultStyle=function(){return{stroke:"#000",fill:null}},e.prototype.getDefaultShape=function(){return new wD},e.prototype.buildPath=function(t,e){var n,i=e.segs,r=e.curveness;if(e.polyline)for(n=this._off;n<i.length;){var o=i[n++];if(o>0){t.moveTo(i[n++],i[n++]);for(var a=1;a<o;a++)t.lineTo(i[n++],i[n++])}}else for(n=this._off;n<i.length;){var s=i[n++],l=i[n++],c=i[n++],u=i[n++];if(t.moveTo(s,l),r>0){var h=(s+c)/2-(l-u)*r,d=(l+u)/2-(c-s)*r;t.quadraticCurveTo(h,d,c,u)}else t.lineTo(c,u)}this.incremental&&(this._off=n,this.notClear=!0)},e.prototype.findDataIndex=function(t,e){var n=this.shape,i=n.segs,r=n.curveness,o=this.style.lineWidth;if(n.polyline)for(var a=0,s=0;s<i.length;){var l=i[s++];if(l>0)for(var c=i[s++],u=i[s++],h=1;h<l;h++)if(ns(c,u,d=i[s++],p=i[s++],o,t,e))return a;a++}else for(a=0,s=0;s<i.length;){c=i[s++],u=i[s++];var d=i[s++],p=i[s++];if(r>0){if(rs(c,u,(c+d)/2-(u-p)*r,(u+p)/2-(d-c)*r,d,p,o,t,e))return a}else if(ns(c,u,d,p,o,t,e))return a;a++}return-1},e.prototype.contain=function(t,e){var n=this.transformCoordToLocal(t,e),i=this.getBoundingRect();return t=n[0],e=n[1],i.contain(t,e)?(this.hoverDataIdx=this.findDataIndex(t,e))>=0:(this.hoverDataIdx=-1,!1)},e.prototype.getBoundingRect=function(){var t=this._rect;if(!t){for(var e=this.shape.segs,n=1/0,i=1/0,r=-1/0,o=-1/0,a=0;a<e.length;){var s=e[a++],l=e[a++];n=Math.min(s,n),r=Math.max(s,r),i=Math.min(l,i),o=Math.max(l,o)}t=this._rect=new Re(n,i,r,o)}return t},e}(_s),CD=function(){function t(){this.group=new Dr}return t.prototype.updateData=function(t){this._clear();var e=this._create();e.setShape({segs:t.getLayout("linesPoints")}),this._setCommon(e,t)},t.prototype.incrementalPrepareUpdate=function(t){this.group.removeAll(),this._clear()},t.prototype.incrementalUpdate=function(t,e){var n=this._newAdded[0],i=e.getLayout("linesPoints"),r=n&&n.shape.segs;if(r&&r.length<2e4){var o=r.length,a=new Float32Array(o+i.length);a.set(r),a.set(i,o),n.setShape({segs:a})}else{this._newAdded=[];var s=this._create();s.incremental=!0,s.setShape({segs:i}),this._setCommon(s,e),s.__startIndex=t.start}},t.prototype.remove=function(){this._clear()},t.prototype.eachRendered=function(t){this._newAdded[0]&&t(this._newAdded[0])},t.prototype._create=function(){var t=new SD({cursor:"default",ignoreCoarsePointer:!0});return this._newAdded.push(t),this.group.add(t),t},t.prototype._setCommon=function(t,e,n){var i=e.hostModel;t.setShape({polyline:i.get("polyline"),curveness:i.get(["lineStyle","curveness"])}),t.useStyle(i.getModel("lineStyle").getLineStyle()),t.style.strokeNoScale=!0;var r=e.getVisual("style");r&&r.stroke&&t.setStyle("stroke",r.stroke),t.setStyle("fill",null);var o=$s(t);o.seriesIndex=i.seriesIndex,t.on("mousemove",(function(e){o.dataIndex=null;var n=t.hoverDataIdx;n>0&&(o.dataIndex=n+t.__startIndex)}))},t.prototype._clear=function(){this._newAdded=[],this.group.removeAll()},t}(),kD={seriesType:"lines",plan:dg(),reset:function(t){var e=t.coordinateSystem;if(e){var n=t.get("polyline"),i=t.pipelineContext.large;return{progress:function(r,o){var a=[];if(i){var s=void 0,l=r.end-r.start;if(n){for(var c=0,u=r.start;u<r.end;u++)c+=t.getLineCoordsCount(u);s=new Float32Array(l+2*c)}else s=new Float32Array(4*l);var h=0,d=[];for(u=r.start;u<r.end;u++){var p=t.getLineCoords(u,a);n&&(s[h++]=p);for(var f=0;f<p;f++)d=e.dataToPoint(a[f],!1,d),s[h++]=d[0],s[h++]=d[1]}o.setLayout("linesPoints",s)}else for(u=r.start;u<r.end;u++){var g=o.getItemModel(u),m=(p=t.getLineCoords(u,a),[]);if(n)for(var v=0;v<p;v++)m.push(e.dataToPoint(a[v]));else{m[0]=e.dataToPoint(a[0]),m[1]=e.dataToPoint(a[1]);var y=g.get(["lineStyle","curveness"]);+y&&(m[2]=[(m[0][0]+m[1][0])/2-(m[0][1]-m[1][1])*y,(m[0][1]+m[1][1])/2-(m[1][0]-m[0][0])*y])}o.setItemLayout(u,m)}}}}}},AD=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.prototype.render=function(t,e,n){var i=t.getData(),r=this._updateLineDraw(i,t),o=t.get("zlevel"),a=t.get(["effect","trailLength"]),s=n.getZr(),l="svg"===s.painter.getType();l||s.painter.getLayer(o).clear(!0),null==this._lastZlevel||l||s.configLayer(this._lastZlevel,{motionBlur:!1}),this._showEffect(t)&&a>0&&(l||s.configLayer(o,{motionBlur:!0,lastFrameAlpha:Math.max(Math.min(a/10+.9,1),0)})),r.updateData(i);var c=t.get("clip",!0)&&lS(t.coordinateSystem,!1,t);c?this.group.setClipPath(c):this.group.removeClipPath(),this._lastZlevel=o,this._finished=!0},e.prototype.incrementalPrepareRender=function(t,e,n){var i=t.getData();this._updateLineDraw(i,t).incrementalPrepareUpdate(i),this._clearLayer(n),this._finished=!1},e.prototype.incrementalRender=function(t,e,n){this._lineDraw.incrementalUpdate(t,e.getData()),this._finished=t.end===e.getData().count()},e.prototype.eachRendered=function(t){this._lineDraw&&this._lineDraw.eachRendered(t)},e.prototype.updateTransform=function(t,e,n){var i=t.getData(),r=t.pipelineContext;if(!this._finished||r.large||r.progressiveRender)return{update:!0};var o=kD.reset(t,e,n);o.progress&&o.progress({start:0,end:i.count(),count:i.count()},i),this._lineDraw.updateLayout(),this._clearLayer(n)},e.prototype._updateLineDraw=function(t,e){var n=this._lineDraw,i=this._showEffect(e),r=!!e.get("polyline"),o=e.pipelineContext.large;return n&&i===this._hasEffet&&r===this._isPolyline&&o===this._isLargeDraw||(n&&n.remove(),n=this._lineDraw=o?new CD:new fI(r?i?_D:xD:i?bD:pI),this._hasEffet=i,this._isPolyline=r,this._isLargeDraw=o),this.group.add(n.group),n},e.prototype._showEffect=function(t){return!!t.get(["effect","show"])},e.prototype._clearLayer=function(t){var e=t.getZr();"svg"===e.painter.getType()||null==this._lastZlevel||e.painter.getLayer(this._lastZlevel).clear(!0)},e.prototype.remove=function(t,e){this._lineDraw&&this._lineDraw.remove(),this._lineDraw=null,this._clearLayer(e)},e.prototype.dispose=function(t,e){this.remove(t,e)},e.type="lines",e}(gg),MD="undefined"==typeof Uint32Array?Array:Uint32Array,TD="undefined"==typeof Float64Array?Array:Float64Array;function ID(t){var e=t.data;e&&e[0]&&e[0][0]&&e[0][0].coord&&(t.data=B(e,(function(t){var e={coords:[t[0].coord,t[1].coord]};return t[0].name&&(e.fromName=t[0].name),t[1].name&&(e.toName=t[1].name),T([e,t[0],t[1]])})))}var ED=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.visualStyleAccessPath="lineStyle",n.visualDrawType="stroke",n}return n(e,t),e.prototype.init=function(e){e.data=e.data||[],ID(e);var n=this._processFlatCoordsArray(e.data);this._flatCoords=n.flatCoords,this._flatCoordsOffset=n.flatCoordsOffset,n.flatCoords&&(e.data=new Float32Array(n.count)),t.prototype.init.apply(this,arguments)},e.prototype.mergeOption=function(e){if(ID(e),e.data){var n=this._processFlatCoordsArray(e.data);this._flatCoords=n.flatCoords,this._flatCoordsOffset=n.flatCoordsOffset,n.flatCoords&&(e.data=new Float32Array(n.count))}t.prototype.mergeOption.apply(this,arguments)},e.prototype.appendData=function(t){var e=this._processFlatCoordsArray(t.data);e.flatCoords&&(this._flatCoords?(this._flatCoords=vt(this._flatCoords,e.flatCoords),this._flatCoordsOffset=vt(this._flatCoordsOffset,e.flatCoordsOffset)):(this._flatCoords=e.flatCoords,this._flatCoordsOffset=e.flatCoordsOffset),t.data=new Float32Array(e.count)),this.getRawData().appendData(t.data)},e.prototype._getCoordsFromItemModel=function(t){var e=this.getData().getItemModel(t);return e.option instanceof Array?e.option:e.getShallow("coords")},e.prototype.getLineCoordsCount=function(t){return this._flatCoordsOffset?this._flatCoordsOffset[2*t+1]:this._getCoordsFromItemModel(t).length},e.prototype.getLineCoords=function(t,e){if(this._flatCoordsOffset){for(var n=this._flatCoordsOffset[2*t],i=this._flatCoordsOffset[2*t+1],r=0;r<i;r++)e[r]=e[r]||[],e[r][0]=this._flatCoords[n+2*r],e[r][1]=this._flatCoords[n+2*r+1];return i}var o=this._getCoordsFromItemModel(t);for(r=0;r<o.length;r++)e[r]=e[r]||[],e[r][0]=o[r][0],e[r][1]=o[r][1];return o.length},e.prototype._processFlatCoordsArray=function(t){var e=0;if(this._flatCoords&&(e=this._flatCoords.length),U(t[0])){for(var n=t.length,i=new MD(n),r=new TD(n),o=0,a=0,s=0,l=0;l<n;){s++;var c=t[l++];i[a++]=o+e,i[a++]=c;for(var u=0;u<c;u++){var h=t[l++],d=t[l++];r[o++]=h,r[o++]=d}}return{flatCoordsOffset:new Uint32Array(i.buffer,0,a),flatCoords:r,count:s}}return{flatCoordsOffset:null,flatCoords:null,count:t.length}},e.prototype.getInitialData=function(t,e){var n=new qy(["value"],this);return n.hasItemOption=!1,n.initData(t.data,[],(function(t,e,i,r){if(t instanceof Array)return NaN;n.hasItemOption=!0;var o=t.value;return null!=o?o instanceof Array?o[r]:o:void 0})),n},e.prototype.formatTooltip=function(t,e,n){var i=this.getData().getItemModel(t),r=i.get("name");if(r)return r;var o=i.get("fromName"),a=i.get("toName"),s=[];return null!=o&&s.push(o),null!=a&&s.push(a),Hf("nameValue",{name:s.join(" > ")})},e.prototype.preventIncremental=function(){return!!this.get(["effect","show"])},e.prototype.getProgressive=function(){var t=this.option.progressive;return null==t?this.option.large?1e4:this.get("progressive"):t},e.prototype.getProgressiveThreshold=function(){var t=this.option.progressiveThreshold;return null==t?this.option.large?2e4:this.get("progressiveThreshold"):t},e.prototype.getZLevelKey=function(){var t=this.getModel("effect"),e=t.get("trailLength");return this.getData().count()>this.getProgressiveThreshold()?this.id:t.get("show")&&e>0?e+"":""},e.type="series.lines",e.dependencies=["grid","polar","geo","calendar"],e.defaultOption={coordinateSystem:"geo",z:2,legendHoverLink:!0,xAxisIndex:0,yAxisIndex:0,symbol:["none","none"],symbolSize:[10,10],geoIndex:0,effect:{show:!1,period:4,constantSpeed:0,symbol:"circle",symbolSize:3,loop:!0,trailLength:.2},large:!1,largeThreshold:2e3,polyline:!1,clip:!0,label:{show:!1,position:"end"},lineStyle:{opacity:.5}},e}(ig);function OD(t){return t instanceof Array||(t=[t,t]),t}var DD={seriesType:"lines",reset:function(t){var e=OD(t.get("symbol")),n=OD(t.get("symbolSize")),i=t.getData();return i.setVisual("fromSymbol",e&&e[0]),i.setVisual("toSymbol",e&&e[1]),i.setVisual("fromSymbolSize",n&&n[0]),i.setVisual("toSymbolSize",n&&n[1]),{dataEach:i.hasItemOption?function(t,e){var n=t.getItemModel(e),i=OD(n.getShallow("symbol",!0)),r=OD(n.getShallow("symbolSize",!0));i[0]&&t.setItemVisual(e,"fromSymbol",i[0]),i[1]&&t.setItemVisual(e,"toSymbol",i[1]),r[0]&&t.setItemVisual(e,"fromSymbolSize",r[0]),r[1]&&t.setItemVisual(e,"toSymbolSize",r[1])}:null}}},LD=function(){function t(){this.blurSize=30,this.pointSize=20,this.maxOpacity=1,this.minOpacity=0,this._gradientPixels={inRange:null,outOfRange:null};var t=u.createCanvas();this.canvas=t}return t.prototype.update=function(t,e,n,i,r,o){var a=this._getBrush(),s=this._getGradient(r,"inRange"),l=this._getGradient(r,"outOfRange"),c=this.pointSize+this.blurSize,u=this.canvas,h=u.getContext("2d"),d=t.length;u.width=e,u.height=n;for(var p=0;p<d;++p){var f=t[p],g=f[0],m=f[1],v=i(f[2]);h.globalAlpha=v,h.drawImage(a,g-c,m-c)}if(!u.width||!u.height)return u;for(var y=h.getImageData(0,0,u.width,u.height),b=y.data,x=0,_=b.length,w=this.minOpacity,S=this.maxOpacity-w;x<_;){v=b[x+3]/256;var C=4*Math.floor(255*v);if(v>0){var k=o(v)?s:l;v>0&&(v=v*S+w),b[x++]=k[C],b[x++]=k[C+1],b[x++]=k[C+2],b[x++]=k[C+3]*v*256}else x+=4}return h.putImageData(y,0,0),u},t.prototype._getBrush=function(){var t=this._brushCanvas||(this._brushCanvas=u.createCanvas()),e=this.pointSize+this.blurSize,n=2*e;t.width=n,t.height=n;var i=t.getContext("2d");return i.clearRect(0,0,n,n),i.shadowOffsetX=n,i.shadowBlur=this.blurSize,i.shadowColor="#000",i.beginPath(),i.arc(-e,e,this.pointSize,0,2*Math.PI,!0),i.closePath(),i.fill(),t},t.prototype._getGradient=function(t,e){for(var n=this._gradientPixels,i=n[e]||(n[e]=new Uint8ClampedArray(1024)),r=[0,0,0,0],o=0,a=0;a<256;a++)t[e](a/255,!0,r),i[o++]=r[0],i[o++]=r[1],i[o++]=r[2],i[o++]=r[3];return i},t}();function PD(t){var e=t.dimensions;return"lng"===e[0]&&"lat"===e[1]}var ND=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.prototype.render=function(t,e,n){var i;e.eachComponent("visualMap",(function(e){e.eachTargetSeries((function(n){n===t&&(i=e)}))})),this._progressiveEls=null,this.group.removeAll();var r=t.coordinateSystem;"cartesian2d"===r.type||"calendar"===r.type?this._renderOnCartesianAndCalendar(t,n,0,t.getData().count()):PD(r)&&this._renderOnGeo(r,t,i,n)},e.prototype.incrementalPrepareRender=function(t,e,n){this.group.removeAll()},e.prototype.incrementalRender=function(t,e,n,i){var r=e.coordinateSystem;r&&(PD(r)?this.render(e,n,i):(this._progressiveEls=[],this._renderOnCartesianAndCalendar(e,i,t.start,t.end,!0)))},e.prototype.eachRendered=function(t){Vu(this._progressiveEls||this.group,t)},e.prototype._renderOnCartesianAndCalendar=function(t,e,n,i,r){var o,a,s,l,c=t.coordinateSystem,u=cS(c,"cartesian2d");if(u){var h=c.getAxis("x"),d=c.getAxis("y");o=h.getBandWidth()+.5,a=d.getBandWidth()+.5,s=h.scale.getExtent(),l=d.scale.getExtent()}for(var p=this.group,f=t.getData(),g=t.getModel(["emphasis","itemStyle"]).getItemStyle(),m=t.getModel(["blur","itemStyle"]).getItemStyle(),v=t.getModel(["select","itemStyle"]).getItemStyle(),y=t.get(["itemStyle","borderRadius"]),b=Gu(t),x=t.getModel("emphasis"),_=x.get("focus"),w=x.get("blurScope"),S=x.get("disabled"),C=u?[f.mapDimension("x"),f.mapDimension("y"),f.mapDimension("value")]:[f.mapDimension("time"),f.mapDimension("value")],k=n;k<i;k++){var A=void 0,M=f.getItemVisual(k,"style");if(u){var T=f.get(C[0],k),I=f.get(C[1],k);if(isNaN(f.get(C[2],k))||isNaN(T)||isNaN(I)||T<s[0]||T>s[1]||I<l[0]||I>l[1])continue;var E=c.dataToPoint([T,I]);A=new Ls({shape:{x:E[0]-o/2,y:E[1]-a/2,width:o,height:a},style:M})}else{if(isNaN(f.get(C[1],k)))continue;A=new Ls({z2:1,shape:c.dataToRect([f.get(C[0],k)]).contentShape,style:M})}if(f.hasItemOption){var O=f.getItemModel(k),D=O.getModel("emphasis");g=D.getModel("itemStyle").getItemStyle(),m=O.getModel(["blur","itemStyle"]).getItemStyle(),v=O.getModel(["select","itemStyle"]).getItemStyle(),y=O.get(["itemStyle","borderRadius"]),_=D.get("focus"),w=D.get("blurScope"),S=D.get("disabled"),b=Gu(O)}A.shape.r=y;var L=t.getRawValue(k),P="-";L&&null!=L[2]&&(P=L[2]+""),Xu(A,b,{labelFetcher:t,labelDataIndex:k,defaultOpacity:M.opacity,defaultText:P}),A.ensureState("emphasis").style=g,A.ensureState("blur").style=m,A.ensureState("select").style=v,Bl(A,_,w,S),A.incremental=r,r&&(A.states.emphasis.hoverLayer=!0),p.add(A),f.setItemGraphicEl(k,A),this._progressiveEls&&this._progressiveEls.push(A)}},e.prototype._renderOnGeo=function(t,e,n,i){var r=n.targetVisuals.inRange,o=n.targetVisuals.outOfRange,a=e.getData(),s=this._hmLayer||this._hmLayer||new LD;s.blurSize=e.get("blurSize"),s.pointSize=e.get("pointSize"),s.minOpacity=e.get("minOpacity"),s.maxOpacity=e.get("maxOpacity");var l=t.getViewRect().clone(),c=t.getRoamTransform();l.applyTransform(c);var u=Math.max(l.x,0),h=Math.max(l.y,0),d=Math.min(l.width+l.x,i.getWidth()),p=Math.min(l.height+l.y,i.getHeight()),f=d-u,g=p-h,m=[a.mapDimension("lng"),a.mapDimension("lat"),a.mapDimension("value")],v=a.mapArray(m,(function(e,n,i){var r=t.dataToPoint([e,n]);return r[0]-=u,r[1]-=h,r.push(i),r})),y=n.getExtent(),b="visualMap.continuous"===n.type?function(t,e){var n=t[1]-t[0];return e=[(e[0]-t[0])/n,(e[1]-t[0])/n],function(t){return t>=e[0]&&t<=e[1]}}(y,n.option.range):function(t,e,n){var i=t[1]-t[0],r=(e=B(e,(function(e){return{interval:[(e.interval[0]-t[0])/i,(e.interval[1]-t[0])/i]}}))).length,o=0;return function(t){var i;for(i=o;i<r;i++)if((a=e[i].interval)[0]<=t&&t<=a[1]){o=i;break}if(i===r)for(i=o-1;i>=0;i--){var a;if((a=e[i].interval)[0]<=t&&t<=a[1]){o=i;break}}return i>=0&&i<r&&n[i]}}(y,n.getPieceList(),n.option.selected);s.update(v,f,g,r.color.getNormalizer(),{inRange:r.color.getColorMapper(),outOfRange:o.color.getColorMapper()},b);var x=new As({style:{width:f,height:g,x:u,y:h,image:s.canvas},silent:!0});this.group.add(x)},e.type="heatmap",e}(gg),RD=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.prototype.getInitialData=function(t,e){return nb(null,this,{generateCoord:"value"})},e.prototype.preventIncremental=function(){var t=op.get(this.get("coordinateSystem"));if(t&&t.dimensions)return"lng"===t.dimensions[0]&&"lat"===t.dimensions[1]},e.type="series.heatmap",e.dependencies=["grid","geo","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,geoIndex:0,blurSize:30,pointSize:20,maxOpacity:1,minOpacity:0,select:{itemStyle:{borderColor:"#212121"}}},e}(ig),BD=["itemStyle","borderWidth"],zD=[{xy:"x",wh:"width",index:0,posDesc:["left","right"]},{xy:"y",wh:"height",index:1,posDesc:["top","bottom"]}],FD=new pc,VD=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.prototype.render=function(t,e,n){var i=this.group,r=t.getData(),o=this._data,a=t.coordinateSystem,s=a.getBaseAxis().isHorizontal(),l=a.master.getRect(),c={ecSize:{width:n.getWidth(),height:n.getHeight()},seriesModel:t,coordSys:a,coordSysExtent:[[l.x,l.x+l.width],[l.y,l.y+l.height]],isHorizontal:s,valueDim:zD[+s],categoryDim:zD[1-+s]};r.diff(o).add((function(t){if(r.hasValue(t)){var e=UD(r,t),n=HD(r,t,e,c),o=KD(r,c,n);r.setItemGraphicEl(t,o),i.add(o),nL(o,c,n)}})).update((function(t,e){var n=o.getItemGraphicEl(e);if(r.hasValue(t)){var a=UD(r,t),s=HD(r,t,a,c),l=JD(r,s);n&&l!==n.__pictorialShapeStr&&(i.remove(n),r.setItemGraphicEl(t,null),n=null),n?function(t,e,n){var i=n.animationModel,r=n.dataIndex;au(t.__pictorialBundle,{x:n.bundlePosition[0],y:n.bundlePosition[1]},i,r),n.symbolRepeat?YD(t,e,n,!0):XD(t,e,n,!0),GD(t,n,!0),qD(t,e,n,!0)}(n,c,s):n=KD(r,c,s,!0),r.setItemGraphicEl(t,n),n.__pictorialSymbolMeta=s,i.add(n),nL(n,c,s)}else i.remove(n)})).remove((function(t){var e=o.getItemGraphicEl(t);e&&QD(o,t,e.__pictorialSymbolMeta.animationModel,e)})).execute();var u=t.get("clip",!0)?lS(t.coordinateSystem,!1,t):null;return u?i.setClipPath(u):i.removeClipPath(),this._data=r,this.group},e.prototype.remove=function(t,e){var n=this.group,i=this._data;t.get("animation")?i&&i.eachItemGraphicEl((function(e){QD(i,$s(e).dataIndex,t,e)})):n.removeAll()},e.type="pictorialBar",e}(gg);function HD(t,e,n,i){var r=t.getItemLayout(e),o=n.get("symbolRepeat"),a=n.get("symbolClip"),s=n.get("symbolPosition")||"start",l=(n.get("symbolRotate")||0)*Math.PI/180||0,c=n.get("symbolPatternSize")||2,u=n.isAnimationEnabled(),h={dataIndex:e,layout:r,itemModel:n,symbolType:t.getItemVisual(e,"symbol")||"circle",style:t.getItemVisual(e,"style"),symbolClip:a,symbolRepeat:o,symbolRepeatDirection:n.get("symbolRepeatDirection"),symbolPatternSize:c,rotation:l,animationModel:u?n:null,hoverScale:u&&n.get(["emphasis","scale"]),z2:n.getShallow("z",!0)||0};!function(t,e,n,i,r){var o,a=i.valueDim,s=t.get("symbolBoundingData"),l=i.coordSys.getOtherAxis(i.coordSys.getBaseAxis()),c=l.toGlobalCoord(l.dataToCoord(0)),u=1-+(n[a.wh]<=0);if(Y(s)){var h=[WD(l,s[0])-c,WD(l,s[1])-c];h[1]<h[0]&&h.reverse(),o=h[u]}else o=null!=s?WD(l,s)-c:e?i.coordSysExtent[a.index][u]-c:n[a.wh];r.boundingLength=o,e&&(r.repeatCutLength=n[a.wh]),r.pxSign=o>0?1:-1}(n,o,r,i,h),function(t,e,n,i,r,o,a,s,l,c){var u,h=l.valueDim,d=l.categoryDim,p=Math.abs(n[d.wh]),f=t.getItemVisual(e,"symbolSize");(u=Y(f)?f.slice():null==f?["100%","100%"]:[f,f])[d.index]=jr(u[d.index],p),u[h.index]=jr(u[h.index],i?p:Math.abs(o)),c.symbolSize=u,(c.symbolScale=[u[0]/s,u[1]/s])[h.index]*=(l.isHorizontal?-1:1)*a}(t,e,r,o,0,h.boundingLength,h.pxSign,c,i,h),function(t,e,n,i,r){var o=t.get(BD)||0;o&&(FD.attr({scaleX:e[0],scaleY:e[1],rotation:n}),FD.updateTransform(),o/=FD.getLineScale(),o*=e[i.valueDim.index]),r.valueLineWidth=o||0}(n,h.symbolScale,l,i,h);var d=h.symbolSize,p=Im(n.get("symbolOffset"),d);return function(t,e,n,i,r,o,a,s,l,c,u,h){var d=u.categoryDim,p=u.valueDim,f=h.pxSign,g=Math.max(e[p.index]+s,0),m=g;if(i){var v=Math.abs(l),y=it(t.get("symbolMargin"),"15%")+"",b=!1;y.lastIndexOf("!")===y.length-1&&(b=!0,y=y.slice(0,y.length-1));var x=jr(y,e[p.index]),_=Math.max(g+2*x,0),w=b?0:2*x,S=lo(i),C=S?i:iL((v+w)/_);_=g+2*(x=(v-C*g)/2/(b?C:Math.max(C-1,1))),w=b?0:2*x,S||"fixed"===i||(C=c?iL((Math.abs(c)+w)/_):0),m=C*_-w,h.repeatTimes=C,h.symbolMargin=x}var k=f*(m/2),A=h.pathPosition=[];A[d.index]=n[d.wh]/2,A[p.index]="start"===a?k:"end"===a?l-k:l/2,o&&(A[0]+=o[0],A[1]+=o[1]);var M=h.bundlePosition=[];M[d.index]=n[d.xy],M[p.index]=n[p.xy];var T=h.barRectShape=I({},n);T[p.wh]=f*Math.max(Math.abs(n[p.wh]),Math.abs(A[p.index]+k)),T[d.wh]=n[d.wh];var E=h.clipShape={};E[d.xy]=-n[d.xy],E[d.wh]=u.ecSize[d.wh],E[p.xy]=0,E[p.wh]=n[p.wh]}(n,d,r,o,0,p,s,h.valueLineWidth,h.boundingLength,h.repeatCutLength,i,h),h}function WD(t,e){return t.toGlobalCoord(t.dataToCoord(t.scale.parse(e)))}function jD(t){var e=t.symbolPatternSize,n=Mm(t.symbolType,-e/2,-e/2,e,e);return n.attr({culling:!0}),"image"!==n.type&&n.setStyle({strokeNoScale:!0}),n}function YD(t,e,n,i){var r=t.__pictorialBundle,o=n.symbolSize,a=n.valueLineWidth,s=n.pathPosition,l=e.valueDim,c=n.repeatTimes||0,u=0,h=o[e.valueDim.index]+a+2*n.symbolMargin;for(tL(t,(function(t){t.__pictorialAnimationIndex=u,t.__pictorialRepeatTimes=c,u<c?eL(t,null,f(u),n,i):eL(t,null,{scaleX:0,scaleY:0},n,i,(function(){r.remove(t)})),u++}));u<c;u++){var d=jD(n);d.__pictorialAnimationIndex=u,d.__pictorialRepeatTimes=c,r.add(d);var p=f(u);eL(d,{x:p.x,y:p.y,scaleX:0,scaleY:0},{scaleX:p.scaleX,scaleY:p.scaleY,rotation:p.rotation},n,i)}function f(t){var e=s.slice(),i=n.pxSign,r=t;return("start"===n.symbolRepeatDirection?i>0:i<0)&&(r=c-1-t),e[l.index]=h*(r-c/2+.5)+s[l.index],{x:e[0],y:e[1],scaleX:n.symbolScale[0],scaleY:n.symbolScale[1],rotation:n.rotation}}}function XD(t,e,n,i){var r=t.__pictorialBundle,o=t.__pictorialMainPath;o?eL(o,null,{x:n.pathPosition[0],y:n.pathPosition[1],scaleX:n.symbolScale[0],scaleY:n.symbolScale[1],rotation:n.rotation},n,i):(o=t.__pictorialMainPath=jD(n),r.add(o),eL(o,{x:n.pathPosition[0],y:n.pathPosition[1],scaleX:0,scaleY:0,rotation:n.rotation},{scaleX:n.symbolScale[0],scaleY:n.symbolScale[1]},n,i))}function GD(t,e,n){var i=I({},e.barRectShape),r=t.__pictorialBarRect;r?eL(r,null,{shape:i},e,n):((r=t.__pictorialBarRect=new Ls({z2:2,shape:i,silent:!0,style:{stroke:"transparent",fill:"transparent",lineWidth:0}})).disableMorphing=!0,t.add(r))}function qD(t,e,n,i){if(n.symbolClip){var r=t.__pictorialClipPath,o=I({},n.clipShape),a=e.valueDim,s=n.animationModel,l=n.dataIndex;if(r)au(r,{shape:o},s,l);else{o[a.wh]=0,r=new Ls({shape:o}),t.__pictorialBundle.setClipPath(r),t.__pictorialClipPath=r;var c={};c[a.wh]=n.clipShape[a.wh],Hu[i?"updateProps":"initProps"](r,{shape:c},s,l)}}}function UD(t,e){var n=t.getItemModel(e);return n.getAnimationDelayParams=$D,n.isAnimationEnabled=ZD,n}function $D(t){return{index:t.__pictorialAnimationIndex,count:t.__pictorialRepeatTimes}}function ZD(){return this.parentModel.isAnimationEnabled()&&!!this.getShallow("animation")}function KD(t,e,n,i){var r=new Dr,o=new Dr;return r.add(o),r.__pictorialBundle=o,o.x=n.bundlePosition[0],o.y=n.bundlePosition[1],n.symbolRepeat?YD(r,e,n):XD(r,0,n),GD(r,n,i),qD(r,e,n,i),r.__pictorialShapeStr=JD(t,n),r.__pictorialSymbolMeta=n,r}function QD(t,e,n,i){var r=i.__pictorialBarRect;r&&r.removeTextContent();var o=[];tL(i,(function(t){o.push(t)})),i.__pictorialMainPath&&o.push(i.__pictorialMainPath),i.__pictorialClipPath&&(n=null),R(o,(function(t){cu(t,{scaleX:0,scaleY:0},n,e,(function(){i.parent&&i.parent.remove(i)}))})),t.setItemGraphicEl(e,null)}function JD(t,e){return[t.getItemVisual(e.dataIndex,"symbol")||"none",!!e.symbolRepeat,!!e.symbolClip].join(":")}function tL(t,e,n){R(t.__pictorialBundle.children(),(function(i){i!==t.__pictorialBarRect&&e.call(n,i)}))}function eL(t,e,n,i,r,o){e&&t.attr(e),i.symbolClip&&!r?n&&t.attr(n):n&&Hu[r?"updateProps":"initProps"](t,n,i.animationModel,i.dataIndex,o)}function nL(t,e,n){var i=n.dataIndex,r=n.itemModel,o=r.getModel("emphasis"),a=o.getModel("itemStyle").getItemStyle(),s=r.getModel(["blur","itemStyle"]).getItemStyle(),l=r.getModel(["select","itemStyle"]).getItemStyle(),c=r.getShallow("cursor"),u=o.get("focus"),h=o.get("blurScope"),d=o.get("scale");tL(t,(function(t){if(t instanceof As){var e=t.style;t.useStyle(I({image:e.image,x:e.x,y:e.y,width:e.width,height:e.height},n.style))}else t.useStyle(n.style);var i=t.ensureState("emphasis");i.style=a,d&&(i.scaleX=1.1*t.scaleX,i.scaleY=1.1*t.scaleY),t.ensureState("blur").style=s,t.ensureState("select").style=l,c&&(t.cursor=c),t.z2=n.z2}));var p=e.valueDim.posDesc[+(n.boundingLength>0)],f=t.__pictorialBarRect;f.ignoreClip=!0,Xu(f,Gu(r),{labelFetcher:e.seriesModel,labelDataIndex:i,defaultText:Ww(e.seriesModel.getData(),i),inheritColor:n.style.fill,defaultOpacity:n.style.opacity,defaultOutsidePosition:p}),Bl(t,u,h,o.get("disabled"))}function iL(t){var e=Math.round(t);return Math.abs(t-e)<1e-4?e:Math.ceil(t)}var rL=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.hasSymbolVisual=!0,n.defaultSymbol="roundRect",n}return n(e,t),e.prototype.getInitialData=function(e){return e.stack=null,t.prototype.getInitialData.apply(this,arguments)},e.type="series.pictorialBar",e.dependencies=["grid"],e.defaultOption=yh(kS.defaultOption,{symbol:"circle",symbolSize:null,symbolRotate:null,symbolPosition:null,symbolOffset:null,symbolMargin:null,symbolRepeat:!1,symbolRepeatDirection:"end",symbolClip:!1,symbolBoundingData:null,symbolPatternSize:400,barGap:"-100%",clip:!1,progressive:0,emphasis:{scale:!1},select:{itemStyle:{borderColor:"#212121"}}}),e}(kS),oL=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n._layers=[],n}return n(e,t),e.prototype.render=function(t,e,n){var i=t.getData(),r=this,o=this.group,a=t.getLayerSeries(),s=i.getLayout("layoutInfo"),l=s.rect,c=s.boundaryGap;function u(t){return t.name}o.x=0,o.y=l.y+c[0];var h=new Sy(this._layersSeries||[],a,u,u),d=[];function p(e,n,s){var l=r._layers;if("remove"!==e){for(var c,u,h=[],p=[],f=a[n].indices,g=0;g<f.length;g++){var m=i.getItemLayout(f[g]),v=m.x,y=m.y0,b=m.y;h.push(v,y),p.push(v,y+b),c=i.getItemVisual(f[g],"style")}var x=i.getItemLayout(f[0]),_=t.getModel("label").get("margin"),w=t.getModel("emphasis");if("add"===e){var S=d[n]=new Dr;u=new oS({shape:{points:h,stackedOnPoints:p,smooth:.4,stackedOnSmooth:.4,smoothConstraint:!1},z2:0}),S.add(u),o.add(S),t.isAnimationEnabled()&&u.setClipPath(function(t,e,n){var i=new Ls({shape:{x:t.x-10,y:t.y-10,width:0,height:t.height+20}});return su(i,{shape:{x:t.x-50,width:t.width+100,height:t.height+20}},e,(function(){u.removeClipPath()})),i}(u.getBoundingRect(),t))}else S=l[s],u=S.childAt(0),o.add(S),d[n]=S,au(u,{shape:{points:h,stackedOnPoints:p}},t),du(u);Xu(u,Gu(t),{labelDataIndex:f[g-1],defaultText:i.getName(f[g-1]),inheritColor:c.fill},{normal:{verticalAlign:"middle"}}),u.setTextConfig({position:null,local:!0});var C=u.getTextContent();C&&(C.x=x.x-_,C.y=x.y0+x.y/2),u.useStyle(c),i.setItemGraphicEl(n,u),Hl(u,t),Bl(u,w.get("focus"),w.get("blurScope"),w.get("disabled"))}else o.remove(l[n])}h.add(W(p,this,"add")).update(W(p,this,"update")).remove(W(p,this,"remove")).execute(),this._layersSeries=a,this._layers=d},e.type="themeRiver",e}(gg),aL=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.prototype.init=function(e){t.prototype.init.apply(this,arguments),this.legendVisualProvider=new cC(W(this.getData,this),W(this.getRawData,this))},e.prototype.fixData=function(t){var e=t.length,n={},i=Bo(t,(function(t){return n.hasOwnProperty(t[0]+"")||(n[t[0]+""]=-1),t[2]})),r=[];i.buckets.each((function(t,e){r.push({name:e,dataList:t})}));for(var o=r.length,a=0;a<o;++a){for(var s=r[a].name,l=0;l<r[a].dataList.length;++l){var c=r[a].dataList[l][0]+"";n[c]=a}for(var c in n)n.hasOwnProperty(c)&&n[c]!==a&&(n[c]=a,t[e]=[c,0,s],e++)}return t},e.prototype.getInitialData=function(t,e){for(var n=this.getReferringComponents("singleAxis",Lo).models[0].get("type"),i=F(t.data,(function(t){return void 0!==t[2]})),r=this.fixData(i||[]),o=[],a=this.nameMap=mt(),s=0,l=0;l<r.length;++l)o.push(r[l][2]),a.get(r[l][2])||(a.set(r[l][2],s),s++);var c=Uy(r,{coordDimensions:["single"],dimensionsDefine:[{name:"time",type:Ay(n)},{name:"value",type:"float"},{name:"name",type:"ordinal"}],encodeDefine:{single:0,value:1,itemName:2}}).dimensions,u=new qy(c,this);return u.initData(r),u},e.prototype.getLayerSeries=function(){for(var t=this.getData(),e=t.count(),n=[],i=0;i<e;++i)n[i]=i;var r=t.mapDimension("single"),o=Bo(n,(function(e){return t.get("name",e)})),a=[];return o.buckets.each((function(e,n){e.sort((function(e,n){return t.get(r,e)-t.get(r,n)})),a.push({name:n,indices:e})})),a},e.prototype.getAxisTooltipData=function(t,e,n){Y(t)||(t=t?[t]:[]);for(var i,r=this.getData(),o=this.getLayerSeries(),a=[],s=o.length,l=0;l<s;++l){for(var c=Number.MAX_VALUE,u=-1,h=o[l].indices.length,d=0;d<h;++d){var p=r.get(t[0],o[l].indices[d]),f=Math.abs(p-e);f<=c&&(i=p,c=f,u=o[l].indices[d])}a.push(u)}return{dataIndices:a,nestestValue:i}},e.prototype.formatTooltip=function(t,e,n){var i=this.getData();return Hf("nameValue",{name:i.getName(t),value:i.get(i.mapDimension("value"),t)})},e.type="series.themeRiver",e.dependencies=["singleAxis"],e.defaultOption={z:2,colorBy:"data",coordinateSystem:"singleAxis",boundaryGap:["10%","10%"],singleAxisIndex:0,animationEasing:"linear",label:{margin:4,show:!0,position:"left",fontSize:11},emphasis:{label:{show:!0}}},e}(ig);function sL(t,e){t.eachSeriesByType("themeRiver",(function(t){var e=t.getData(),n=t.coordinateSystem,i={},r=n.getRect();i.rect=r;var o=t.get("boundaryGap"),a=n.getAxis();i.boundaryGap=o,"horizontal"===a.orient?(o[0]=jr(o[0],r.height),o[1]=jr(o[1],r.height),lL(e,t,r.height-o[0]-o[1])):(o[0]=jr(o[0],r.width),o[1]=jr(o[1],r.width),lL(e,t,r.width-o[0]-o[1])),e.setLayout("layoutInfo",i)}))}function lL(t,e,n){if(t.count())for(var i,r=e.coordinateSystem,o=e.getLayerSeries(),a=t.mapDimension("single"),s=t.mapDimension("value"),l=B(o,(function(e){return B(e.indices,(function(e){var n=r.dataToPoint(t.get(a,e));return n[1]=t.get(s,e),n}))})),c=function(t){for(var e=t.length,n=t[0].length,i=[],r=[],o=0,a=0;a<n;++a){for(var s=0,l=0;l<e;++l)s+=t[l][a][1];s>o&&(o=s),i.push(s)}for(var c=0;c<n;++c)r[c]=(o-i[c])/2;o=0;for(var u=0;u<n;++u){var h=i[u]+r[u];h>o&&(o=h)}return{y0:r,max:o}}(l),u=c.y0,h=n/c.max,d=o.length,p=o[0].indices.length,f=0;f<p;++f){i=u[f]*h,t.setItemLayout(o[0].indices[f],{layerIndex:0,x:l[0][f][0],y0:i,y:l[0][f][1]*h});for(var g=1;g<d;++g)i+=l[g-1][f][1]*h,t.setItemLayout(o[g].indices[f],{layerIndex:g,x:l[g][f][0],y0:i,y:l[g][f][1]*h})}}var cL=function(t){function e(e,n,i,r){var o=t.call(this)||this;o.z2=2,o.textConfig={inside:!0},$s(o).seriesIndex=n.seriesIndex;var a=new Rs({z2:4,silent:e.getModel().get(["label","silent"])});return o.setTextContent(a),o.updateData(!0,e,n,i,r),o}return n(e,t),e.prototype.updateData=function(t,e,n,i,r){this.node=e,e.piece=this,n=n||this._seriesModel,i=i||this._ecModel;var o=this;$s(o).dataIndex=e.dataIndex;var a=e.getModel(),s=a.getModel("emphasis"),l=e.getLayout(),c=I({},l);c.label=null;var u=e.getVisual("style");u.lineJoin="bevel";var h=e.getVisual("decal");h&&(u.decal=tv(h,r));var d=OS(a.getModel("itemStyle"),c,!0);I(c,d),R(el,(function(t){var e=o.ensureState(t),n=a.getModel([t,"itemStyle"]);e.style=n.getItemStyle();var i=OS(n,c);i&&(e.shape=i)})),t?(o.setShape(c),o.shape.r=l.r0,su(o,{shape:{r:l.r}},n,e.dataIndex)):(au(o,{shape:c},n),du(o)),o.useStyle(u),this._updateLabel(n);var p=a.getShallow("cursor");p&&o.attr("cursor",p),this._seriesModel=n||this._seriesModel,this._ecModel=i||this._ecModel;var f=s.get("focus");Bl(this,"ancestor"===f?e.getAncestorsIndices():"descendant"===f?e.getDescendantIndices():f,s.get("blurScope"),s.get("disabled"))},e.prototype._updateLabel=function(t){var e=this,n=this.node.getModel(),i=n.getModel("label"),r=this.node.getLayout(),o=r.endAngle-r.startAngle,a=(r.startAngle+r.endAngle)/2,s=Math.cos(a),l=Math.sin(a),c=this,u=c.getTextContent(),h=this.node.dataIndex,d=i.get("minAngle")/180*Math.PI,p=i.get("show")&&!(null!=d&&Math.abs(o)<d);function f(t,e){var n=t.get(e);return null==n?i.get(e):n}u.ignore=!p,R(nl,(function(i){var d="normal"===i?n.getModel("label"):n.getModel([i,"label"]),p="normal"===i,g=p?u:u.ensureState(i),m=t.getFormattedLabel(h,i);p&&(m=m||e.node.name),g.style=qu(d,{},null,"normal"!==i,!0),m&&(g.style.text=m);var v=d.get("show");null==v||p||(g.ignore=!v);var y,b=f(d,"position"),x=p?c:c.states[i],_=x.style.fill;x.textConfig={outsideFill:"inherit"===d.get("color")?_:null,inside:"outside"!==b};var w=f(d,"distance")||0,S=f(d,"align"),C=f(d,"rotate"),k=.5*Math.PI,A=1.5*Math.PI,M=as("tangential"===C?Math.PI/2-a:a),T=M>k&&!Jr(M-k)&&M<A;"outside"===b?(y=r.r+w,S=T?"right":"left"):S&&"center"!==S?"left"===S?(y=r.r0+w,S=T?"right":"left"):"right"===S&&(y=r.r-w,S=T?"left":"right"):(y=o===2*Math.PI&&0===r.r0?0:(r.r+r.r0)/2,S="center"),g.style.align=S,g.style.verticalAlign=f(d,"verticalAlign")||"middle",g.x=y*s+r.cx,g.y=y*l+r.cy;var I=0;"radial"===C?I=as(-a)+(T?Math.PI:0):"tangential"===C?I=as(Math.PI/2-a)+(T?Math.PI:0):U(C)&&(I=C*Math.PI/180),g.rotation=as(I)})),u.dirtyStyle()},e}(Ic),uL="sunburstRootToNode",hL="sunburstHighlight",dL=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.prototype.render=function(t,e,n,i){var r=this;this.seriesModel=t,this.api=n,this.ecModel=e;var o=t.getData(),a=o.tree.root,s=t.getViewRoot(),l=this.group,c=t.get("renderLabelForZeroData"),u=[];s.eachNode((function(t){u.push(t)}));var h=this._oldChildren||[];!function(i,r){function s(t){return t.getId()}function u(s,u){!function(i,r){if(c||!i||i.getValue()||(i=null),i!==a&&r!==a)if(r&&r.piece)i?(r.piece.updateData(!1,i,t,e,n),o.setItemGraphicEl(i.dataIndex,r.piece)):function(t){t&&t.piece&&(l.remove(t.piece),t.piece=null)}(r);else if(i){var s=new cL(i,t,e,n);l.add(s),o.setItemGraphicEl(i.dataIndex,s)}}(null==s?null:i[s],null==u?null:r[u])}0===i.length&&0===r.length||new Sy(r,i,s,s).add(u).update(u).remove(j(u,null)).execute()}(u,h),function(i,o){o.depth>0?(r.virtualPiece?r.virtualPiece.updateData(!1,i,t,e,n):(r.virtualPiece=new cL(i,t,e,n),l.add(r.virtualPiece)),o.piece.off("click"),r.virtualPiece.on("click",(function(t){r._rootToNode(o.parentNode)}))):r.virtualPiece&&(l.remove(r.virtualPiece),r.virtualPiece=null)}(a,s),this._initEvents(),this._oldChildren=u},e.prototype._initEvents=function(){var t=this;this.group.off("click"),this.group.on("click",(function(e){var n=!1;t.seriesModel.getViewRoot().eachNode((function(i){if(!n&&i.piece&&i.piece===e.target){var r=i.getModel().get("nodeClick");if("rootToNode"===r)t._rootToNode(i);else if("link"===r){var o=i.getModel(),a=o.get("link");a&&ud(a,o.get("target",!0)||"_blank")}n=!0}}))}))},e.prototype._rootToNode=function(t){t!==this.seriesModel.getViewRoot()&&this.api.dispatchAction({type:uL,from:this.uid,seriesId:this.seriesModel.id,targetNode:t})},e.prototype.containPoint=function(t,e){var n=e.getData().getItemLayout(0);if(n){var i=t[0]-n.cx,r=t[1]-n.cy,o=Math.sqrt(i*i+r*r);return o<=n.r&&o>=n.r0}},e.type="sunburst",e}(gg),pL=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.ignoreStyleOnData=!0,n}return n(e,t),e.prototype.getInitialData=function(t,e){var n={name:t.name,children:t.data};fL(n);var i=this._levelModels=B(t.levels||[],(function(t){return new gh(t,this,e)}),this),r=MM.createTree(n,this,(function(t){t.wrapMethod("getItemModel",(function(t,e){var n=r.getNodeByDataIndex(e),o=i[n.depth];return o&&(t.parentModel=o),t}))}));return r.data},e.prototype.optionUpdated=function(){this.resetViewRoot()},e.prototype.getDataParams=function(e){var n=t.prototype.getDataParams.apply(this,arguments),i=this.getData().tree.getNodeByDataIndex(e);return n.treePathInfo=OM(i,this),n},e.prototype.getLevelModel=function(t){return this._levelModels&&this._levelModels[t.depth]},e.prototype.getViewRoot=function(){return this._viewRoot},e.prototype.resetViewRoot=function(t){t?this._viewRoot=t:t=this._viewRoot;var e=this.getRawData().tree.root;t&&(t===e||e.contains(t))||(this._viewRoot=e)},e.prototype.enableAriaDecal=function(){BM(this)},e.type="series.sunburst",e.defaultOption={z:2,center:["50%","50%"],radius:[0,"75%"],clockwise:!0,startAngle:90,minAngle:0,stillShowZeroSum:!0,nodeClick:"rootToNode",renderLabelForZeroData:!1,label:{rotate:"radial",show:!0,opacity:1,align:"center",position:"inside",distance:5,silent:!0},itemStyle:{borderWidth:1,borderColor:"white",borderType:"solid",shadowBlur:0,shadowColor:"rgba(0, 0, 0, 0.2)",shadowOffsetX:0,shadowOffsetY:0,opacity:1},emphasis:{focus:"descendant"},blur:{itemStyle:{opacity:.2},label:{opacity:.1}},animationType:"expansion",animationDuration:1e3,animationDurationUpdate:500,data:[],sort:"desc"},e}(ig);function fL(t){var e=0;R(t.children,(function(t){fL(t);var n=t.value;Y(n)&&(n=n[0]),e+=n}));var n=t.value;Y(n)&&(n=n[0]),(null==n||isNaN(n))&&(n=e),n<0&&(n=0),Y(t.value)?t.value[0]=n:t.value=n}var gL=Math.PI/180;function mL(t,e,n){e.eachSeriesByType(t,(function(t){var e=t.get("center"),i=t.get("radius");Y(i)||(i=[0,i]),Y(e)||(e=[e,e]);var r=n.getWidth(),o=n.getHeight(),a=Math.min(r,o),s=jr(e[0],r),l=jr(e[1],o),c=jr(i[0],a/2),u=jr(i[1],a/2),h=-t.get("startAngle")*gL,d=t.get("minAngle")*gL,p=t.getData().tree.root,f=t.getViewRoot(),g=f.depth,m=t.get("sort");null!=m&&vL(f,m);var v=0;R(f.children,(function(t){!isNaN(t.getValue())&&v++}));var y=f.getValue(),b=Math.PI/(y||v)*2,x=f.depth>0,_=f.height-(x?-1:1),w=(u-c)/(_||1),S=t.get("clockwise"),C=t.get("stillShowZeroSum"),k=S?1:-1,A=function(e,n){if(e){var i=n;if(e!==p){var r=e.getValue(),o=0===y&&C?b:r*b;o<d&&(o=d),i=n+k*o;var u=e.depth-g-(x?-1:1),h=c+w*u,f=c+w*(u+1),m=t.getLevelModel(e);if(m){var v=m.get("r0",!0),_=m.get("r",!0),M=m.get("radius",!0);null!=M&&(v=M[0],_=M[1]),null!=v&&(h=jr(v,a/2)),null!=_&&(f=jr(_,a/2))}e.setLayout({angle:o,startAngle:n,endAngle:i,clockwise:S,cx:s,cy:l,r0:h,r:f})}if(e.children&&e.children.length){var T=0;R(e.children,(function(t){T+=A(t,n+T)}))}return i-n}};if(x){var M=c,T=c+w,I=2*Math.PI;p.setLayout({angle:I,startAngle:h,endAngle:h+I,clockwise:S,cx:s,cy:l,r0:M,r:T})}A(f,h)}))}function vL(t,e){var n=t.children||[];t.children=function(t,e){if(X(e)){var n=B(t,(function(t,e){var n=t.getValue();return{params:{depth:t.depth,height:t.height,dataIndex:t.dataIndex,getValue:function(){return n}},index:e}}));return n.sort((function(t,n){return e(t.params,n.params)})),B(n,(function(e){return t[e.index]}))}var i="asc"===e;return t.sort((function(t,e){var n=(t.getValue()-e.getValue())*(i?1:-1);return 0===n?(t.dataIndex-e.dataIndex)*(i?-1:1):n}))}(n,e),n.length&&R(t.children,(function(t){vL(t,e)}))}function yL(t){var e={};t.eachSeriesByType("sunburst",(function(t){var n=t.getData(),i=n.tree;i.eachNode((function(r){var o=r.getModel().getModel("itemStyle").getItemStyle();o.fill||(o.fill=function(t,n,i){for(var r=t;r&&r.depth>1;)r=r.parentNode;var o=n.getColorFromPalette(r.name||r.dataIndex+"",e);return t.depth>1&&G(o)&&(o=Un(o,(t.depth-1)/(i-1)*.5)),o}(r,t,i.root.height)),I(n.ensureUniqueItemVisual(r.dataIndex,"style"),o)}))}))}var bL={color:"fill",borderColor:"stroke"},xL={symbol:1,symbolSize:1,symbolKeepAspect:1,legendIcon:1,visualMeta:1,liftZ:1,decal:1},_L=Io(),wL=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.prototype.optionUpdated=function(){this.currentZLevel=this.get("zlevel",!0),this.currentZ=this.get("z",!0)},e.prototype.getInitialData=function(t,e){return nb(null,this)},e.prototype.getDataParams=function(e,n,i){var r=t.prototype.getDataParams.call(this,e,n);return i&&(r.info=_L(i).info),r},e.type="series.custom",e.dependencies=["grid","polar","geo","singleAxis","calendar"],e.defaultOption={coordinateSystem:"cartesian2d",z:2,legendHoverLink:!0,clip:!1},e}(ig);function SL(t,e){return e=e||[0,0],B(["x","y"],(function(n,i){var r=this.getAxis(n),o=e[i],a=t[i]/2;return"category"===r.type?r.getBandWidth():Math.abs(r.dataToCoord(o-a)-r.dataToCoord(o+a))}),this)}function CL(t,e){return e=e||[0,0],B([0,1],(function(n){var i=e[n],r=t[n]/2,o=[],a=[];return o[n]=i-r,a[n]=i+r,o[1-n]=a[1-n]=e[1-n],Math.abs(this.dataToPoint(o)[n]-this.dataToPoint(a)[n])}),this)}function kL(t,e){var n=this.getAxis(),i=e instanceof Array?e[0]:e,r=(t instanceof Array?t[0]:t)/2;return"category"===n.type?n.getBandWidth():Math.abs(n.dataToCoord(i-r)-n.dataToCoord(i+r))}function AL(t,e){return e=e||[0,0],B(["Radius","Angle"],(function(n,i){var r=this["get"+n+"Axis"](),o=e[i],a=t[i]/2,s="category"===r.type?r.getBandWidth():Math.abs(r.dataToCoord(o-a)-r.dataToCoord(o+a));return"Angle"===n&&(s=s*Math.PI/180),s}),this)}function ML(t,e,n,i){return t&&(t.legacy||!1!==t.legacy&&!n&&!i&&"tspan"!==e&&("text"===e||xt(t,"text")))}function TL(t,e,n){var i,r,o,a=t;if("text"===e)o=a;else{o={},xt(a,"text")&&(o.text=a.text),xt(a,"rich")&&(o.rich=a.rich),xt(a,"textFill")&&(o.fill=a.textFill),xt(a,"textStroke")&&(o.stroke=a.textStroke),xt(a,"fontFamily")&&(o.fontFamily=a.fontFamily),xt(a,"fontSize")&&(o.fontSize=a.fontSize),xt(a,"fontStyle")&&(o.fontStyle=a.fontStyle),xt(a,"fontWeight")&&(o.fontWeight=a.fontWeight),r={type:"text",style:o,silent:!0},i={};var s=xt(a,"textPosition");n?i.position=s?a.textPosition:"inside":s&&(i.position=a.textPosition),xt(a,"textPosition")&&(i.position=a.textPosition),xt(a,"textOffset")&&(i.offset=a.textOffset),xt(a,"textRotation")&&(i.rotation=a.textRotation),xt(a,"textDistance")&&(i.distance=a.textDistance)}return IL(o,t),R(o.rich,(function(t){IL(t,t)})),{textConfig:i,textContent:r}}function IL(t,e){e&&(e.font=e.textFont||e.font,xt(e,"textStrokeWidth")&&(t.lineWidth=e.textStrokeWidth),xt(e,"textAlign")&&(t.align=e.textAlign),xt(e,"textVerticalAlign")&&(t.verticalAlign=e.textVerticalAlign),xt(e,"textLineHeight")&&(t.lineHeight=e.textLineHeight),xt(e,"textWidth")&&(t.width=e.textWidth),xt(e,"textHeight")&&(t.height=e.textHeight),xt(e,"textBackgroundColor")&&(t.backgroundColor=e.textBackgroundColor),xt(e,"textPadding")&&(t.padding=e.textPadding),xt(e,"textBorderColor")&&(t.borderColor=e.textBorderColor),xt(e,"textBorderWidth")&&(t.borderWidth=e.textBorderWidth),xt(e,"textBorderRadius")&&(t.borderRadius=e.textBorderRadius),xt(e,"textBoxShadowColor")&&(t.shadowColor=e.textBoxShadowColor),xt(e,"textBoxShadowBlur")&&(t.shadowBlur=e.textBoxShadowBlur),xt(e,"textBoxShadowOffsetX")&&(t.shadowOffsetX=e.textBoxShadowOffsetX),xt(e,"textBoxShadowOffsetY")&&(t.shadowOffsetY=e.textBoxShadowOffsetY))}function EL(t,e,n){var i=t;i.textPosition=i.textPosition||n.position||"inside",null!=n.offset&&(i.textOffset=n.offset),null!=n.rotation&&(i.textRotation=n.rotation),null!=n.distance&&(i.textDistance=n.distance);var r=i.textPosition.indexOf("inside")>=0,o=t.fill||"#000";OL(i,e);var a=null==i.textFill;return r?a&&(i.textFill=n.insideFill||"#fff",!i.textStroke&&n.insideStroke&&(i.textStroke=n.insideStroke),!i.textStroke&&(i.textStroke=o),null==i.textStrokeWidth&&(i.textStrokeWidth=2)):(a&&(i.textFill=t.fill||n.outsideFill||"#000"),!i.textStroke&&n.outsideStroke&&(i.textStroke=n.outsideStroke)),i.text=e.text,i.rich=e.rich,R(e.rich,(function(t){OL(t,t)})),i}function OL(t,e){e&&(xt(e,"fill")&&(t.textFill=e.fill),xt(e,"stroke")&&(t.textStroke=e.fill),xt(e,"lineWidth")&&(t.textStrokeWidth=e.lineWidth),xt(e,"font")&&(t.font=e.font),xt(e,"fontStyle")&&(t.fontStyle=e.fontStyle),xt(e,"fontWeight")&&(t.fontWeight=e.fontWeight),xt(e,"fontSize")&&(t.fontSize=e.fontSize),xt(e,"fontFamily")&&(t.fontFamily=e.fontFamily),xt(e,"align")&&(t.textAlign=e.align),xt(e,"verticalAlign")&&(t.textVerticalAlign=e.verticalAlign),xt(e,"lineHeight")&&(t.textLineHeight=e.lineHeight),xt(e,"width")&&(t.textWidth=e.width),xt(e,"height")&&(t.textHeight=e.height),xt(e,"backgroundColor")&&(t.textBackgroundColor=e.backgroundColor),xt(e,"padding")&&(t.textPadding=e.padding),xt(e,"borderColor")&&(t.textBorderColor=e.borderColor),xt(e,"borderWidth")&&(t.textBorderWidth=e.borderWidth),xt(e,"borderRadius")&&(t.textBorderRadius=e.borderRadius),xt(e,"shadowColor")&&(t.textBoxShadowColor=e.shadowColor),xt(e,"shadowBlur")&&(t.textBoxShadowBlur=e.shadowBlur),xt(e,"shadowOffsetX")&&(t.textBoxShadowOffsetX=e.shadowOffsetX),xt(e,"shadowOffsetY")&&(t.textBoxShadowOffsetY=e.shadowOffsetY),xt(e,"textShadowColor")&&(t.textShadowColor=e.textShadowColor),xt(e,"textShadowBlur")&&(t.textShadowBlur=e.textShadowBlur),xt(e,"textShadowOffsetX")&&(t.textShadowOffsetX=e.textShadowOffsetX),xt(e,"textShadowOffsetY")&&(t.textShadowOffsetY=e.textShadowOffsetY))}var DL={position:["x","y"],scale:["scaleX","scaleY"],origin:["originX","originY"]},LL=H(DL),PL=(z(hr,(function(t,e){return t[e]=1,t}),{}),hr.join(", "),["","style","shape","extra"]),NL=Io();function RL(t,e,n,i,r){var o=t+"Animation",a=ru(t,i,r)||{},s=NL(e).userDuring;return a.duration>0&&(a.during=s?W(jL,{el:e,userDuring:s}):null,a.setToFinal=!0,a.scope=t),I(a,n[o]),a}function BL(t,e,n,i){var r=(i=i||{}).dataIndex,o=i.isInit,a=i.clearStyle,s=n.isAnimationEnabled(),l=NL(t),c=e.style;l.userDuring=e.during;var u={},h={};if(function(t,e,n){for(var i=0;i<LL.length;i++){var r=LL[i],o=DL[r],a=e[r];a&&(n[o[0]]=a[0],n[o[1]]=a[1])}for(i=0;i<hr.length;i++){var s=hr[i];null!=e[s]&&(n[s]=e[s])}}(0,e,h),XL("shape",e,h),XL("extra",e,h),!o&&s&&(function(t,e,n){for(var i=e.transition,r=VL(i)?hr:vo(i||[]),o=0;o<r.length;o++){var a=r[o];if("style"!==a&&"shape"!==a&&"extra"!==a){var s=t[a];n[a]=s}}}(t,e,u),YL("shape",t,e,u),YL("extra",t,e,u),function(t,e,n,i){if(n){var r,o=t.style;if(o){var a=n.transition,s=e.transition;if(a&&!VL(a)){var l=vo(a);!r&&(r=i.style={});for(var c=0;c<l.length;c++){var u=o[f=l[c]];r[f]=u}}else if(t.getAnimationStyleProps&&(VL(s)||VL(a)||D(s,"style")>=0)){var h=t.getAnimationStyleProps(),d=h?h.style:null;if(d){!r&&(r=i.style={});var p=H(n);for(c=0;c<p.length;c++){var f;d[f=p[c]]&&(u=o[f],r[f]=u)}}}}}}(t,e,c,u)),h.style=c,function(t,e,n){var i=e.style;if(!t.isGroup&&i){if(n){t.useStyle({});for(var r=t.animators,o=0;o<r.length;o++){var a=r[o];"style"===a.targetName&&a.changeTarget(t.style)}}t.setStyle(i)}e&&(e.style=null,e&&t.attr(e),e.style=i)}(t,h,a),function(t,e){xt(e,"silent")&&(t.silent=e.silent),xt(e,"ignore")&&(t.ignore=e.ignore),t instanceof ba&&xt(e,"invisible")&&(t.invisible=e.invisible),t instanceof _s&&xt(e,"autoBatch")&&(t.autoBatch=e.autoBatch)}(t,e),s)if(o){var d={};R(PL,(function(t){var n=t?e[t]:e;n&&n.enterFrom&&(t&&(d[t]=d[t]||{}),I(t?d[t]:d,n.enterFrom))}));var p=RL("enter",t,e,n,r);p.duration>0&&t.animateFrom(d,p)}else!function(t,e,n,i,r){if(r){var o=RL("update",t,e,i,n);o.duration>0&&t.animateFrom(r,o)}}(t,e,r||0,n,u);zL(t,e),c?t.dirty():t.markRedraw()}function zL(t,e){for(var n=NL(t).leaveToProps,i=0;i<PL.length;i++){var r=PL[i],o=r?e[r]:e;o&&o.leaveTo&&(n||(n=NL(t).leaveToProps={}),r&&(n[r]=n[r]||{}),I(r?n[r]:n,o.leaveTo))}}function FL(t,e,n,i){if(t){var r=t.parent,o=NL(t).leaveToProps;if(o){var a=RL("update",t,e,n,0);a.done=function(){r.remove(t),i&&i()},t.animateTo(o,a)}else r.remove(t),i&&i()}}function VL(t){return"all"===t}var HL={},WL={setTransform:function(t,e){return HL.el[t]=e,this},getTransform:function(t){return HL.el[t]},setShape:function(t,e){var n=HL.el;return(n.shape||(n.shape={}))[t]=e,n.dirtyShape&&n.dirtyShape(),this},getShape:function(t){var e=HL.el.shape;if(e)return e[t]},setStyle:function(t,e){var n=HL.el,i=n.style;return i&&(i[t]=e,n.dirtyStyle&&n.dirtyStyle()),this},getStyle:function(t){var e=HL.el.style;if(e)return e[t]},setExtra:function(t,e){return(HL.el.extra||(HL.el.extra={}))[t]=e,this},getExtra:function(t){var e=HL.el.extra;if(e)return e[t]}};function jL(){var t=this,e=t.el;if(e){var n=NL(e).userDuring,i=t.userDuring;n===i?(HL.el=e,i(WL)):t.el=t.userDuring=null}}function YL(t,e,n,i){var r=n[t];if(r){var o,a=e[t];if(a){var s=n.transition,l=r.transition;if(l)if(!o&&(o=i[t]={}),VL(l))I(o,a);else for(var c=vo(l),u=0;u<c.length;u++){var h=a[p=c[u]];o[p]=h}else if(VL(s)||D(s,t)>=0){!o&&(o=i[t]={});var d=H(a);for(u=0;u<d.length;u++){var p;h=a[p=d[u]],GL(r[p],h)&&(o[p]=h)}}}}}function XL(t,e,n){var i=e[t];if(i)for(var r=n[t]={},o=H(i),a=0;a<o.length;a++){var s=o[a];r[s]=Ti(i[s])}}function GL(t,e){return N(t)?t!==e:null!=t&&isFinite(t)}var qL=Io(),UL=["percent","easing","shape","style","extra"];function $L(t){t.stopAnimation("keyframe"),t.attr(qL(t))}function ZL(t,e,n){if(n.isAnimationEnabled()&&e)if(Y(e))R(e,(function(e){ZL(t,e,n)}));else{var i=e.keyframes,r=e.duration;if(n&&null==r){var o=ru("enter",n,0);r=o&&o.duration}if(i&&r){var a=qL(t);R(PL,(function(n){var o;n&&!t[n]||(i.sort((function(t,e){return t.percent-e.percent})),R(i,(function(i){var s=t.animators,l=n?i[n]:i;if(l){var c=H(l);if(n||(c=F(c,(function(t){return D(UL,t)<0}))),c.length){o||((o=t.animate(n,e.loop,!0)).scope="keyframe");for(var u=0;u<s.length;u++)s[u]!==o&&s[u].targetName===o.targetName&&s[u].stopTracks(c);n&&(a[n]=a[n]||{});var h=n?a[n]:a;R(c,(function(e){h[e]=((n?t[n]:t)||{})[e]})),o.whenWithKeys(r*i.percent,l,c,i.easing)}}})),o&&o.delay(e.delay||0).duration(r).start(e.easing))}))}}}var KL="emphasis",QL="normal",JL="blur",tP="select",eP=[QL,KL,JL,tP],nP={normal:["itemStyle"],emphasis:[KL,"itemStyle"],blur:[JL,"itemStyle"],select:[tP,"itemStyle"]},iP={normal:["label"],emphasis:[KL,"label"],blur:[JL,"label"],select:[tP,"label"]},rP=["x","y"],oP={normal:{},emphasis:{},blur:{},select:{}},aP={cartesian2d:function(t){var e=t.master.getRect();return{coordSys:{type:"cartesian2d",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:function(e){return t.dataToPoint(e)},size:W(SL,t)}}},geo:function(t){var e=t.getBoundingRect();return{coordSys:{type:"geo",x:e.x,y:e.y,width:e.width,height:e.height,zoom:t.getZoom()},api:{coord:function(e){return t.dataToPoint(e)},size:W(CL,t)}}},single:function(t){var e=t.getRect();return{coordSys:{type:"singleAxis",x:e.x,y:e.y,width:e.width,height:e.height},api:{coord:function(e){return t.dataToPoint(e)},size:W(kL,t)}}},polar:function(t){var e=t.getRadiusAxis(),n=t.getAngleAxis(),i=e.getExtent();return i[0]>i[1]&&i.reverse(),{coordSys:{type:"polar",cx:t.cx,cy:t.cy,r:i[1],r0:i[0]},api:{coord:function(i){var r=e.dataToRadius(i[0]),o=n.dataToAngle(i[1]),a=t.coordToPoint([r,o]);return a.push(r,o*Math.PI/180),a},size:W(AL,t)}}},calendar:function(t){var e=t.getRect(),n=t.getRangeInfo();return{coordSys:{type:"calendar",x:e.x,y:e.y,width:e.width,height:e.height,cellWidth:t.getCellWidth(),cellHeight:t.getCellHeight(),rangeInfo:{start:n.start,end:n.end,weeks:n.weeks,dayCount:n.allDay}},api:{coord:function(e,n){return t.dataToPoint(e,n)}}}}};function sP(t){return t instanceof _s}function lP(t){return t instanceof ba}var cP=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.prototype.render=function(t,e,n,i){this._progressiveEls=null;var r=this._data,o=t.getData(),a=this.group,s=fP(t,o,e,n);r||a.removeAll(),o.diff(r).add((function(e){mP(n,null,e,s(e,i),t,a,o)})).remove((function(e){var n=r.getItemGraphicEl(e);n&&FL(n,_L(n).option,t)})).update((function(e,l){var c=r.getItemGraphicEl(l);mP(n,c,e,s(e,i),t,a,o)})).execute();var l=t.get("clip",!0)?lS(t.coordinateSystem,!1,t):null;l?a.setClipPath(l):a.removeClipPath(),this._data=o},e.prototype.incrementalPrepareRender=function(t,e,n){this.group.removeAll(),this._data=null},e.prototype.incrementalRender=function(t,e,n,i,r){var o=e.getData(),a=fP(e,o,n,i),s=this._progressiveEls=[];function l(t){t.isGroup||(t.incremental=!0,t.ensureState("emphasis").hoverLayer=!0)}for(var c=t.start;c<t.end;c++){var u=mP(null,null,c,a(c,r),e,this.group,o);u&&(u.traverse(l),s.push(u))}},e.prototype.eachRendered=function(t){Vu(this._progressiveEls||this.group,t)},e.prototype.filterForExposedEvent=function(t,e,n,i){var r=e.element;if(null==r||n.name===r)return!0;for(;(n=n.__hostTarget||n.parent)&&n!==this.group;)if(n.name===r)return!0;return!1},e.type="custom",e}(gg);function uP(t){var e,n=t.type;if("path"===n){var i=t.shape,r=null!=i.width&&null!=i.height?{x:i.x||0,y:i.y||0,width:i.width,height:i.height}:null,o=AP(i);e=xu(o,null,r,i.layout||"center"),_L(e).customPathData=o}else if("image"===n)e=new As({}),_L(e).customImagePath=t.style.image;else if("text"===n)e=new Rs({});else if("group"===n)e=new Dr;else{if("compoundPath"===n)throw new Error('"compoundPath" is not supported yet.');var a=bu(n);if(!a){po("")}e=new a}return _L(e).customGraphicType=n,e.name=t.name,e.z2EmphasisLift=1,e.z2SelectLift=1,e}function hP(t,e,n,i,r,o,a){$L(e);var s=r&&r.normal.cfg;s&&e.setTextConfig(s),i&&null==i.transition&&(i.transition=rP);var l=i&&i.style;if(l){if("text"===e.type){var c=l;xt(c,"textFill")&&(c.fill=c.textFill),xt(c,"textStroke")&&(c.stroke=c.textStroke)}var u=void 0,h=sP(e)?l.decal:null;t&&h&&(h.dirty=!0,u=tv(h,t)),l.__decalPattern=u}lP(e)&&l&&(u=l.__decalPattern)&&(l.decal=u),BL(e,i,o,{dataIndex:n,isInit:a,clearStyle:!0}),ZL(e,i.keyframeAnimation,o)}function dP(t,e,n,i,r){var o=e.isGroup?null:e,a=r&&r[t].cfg;if(o){var s=o.ensureState(t);if(!1===i){var l=o.getState(t);l&&(l.style=null)}else s.style=i||null;a&&(s.textConfig=a),xl(o)}}function pP(t,e,n){var i=n===QL,r=i?e:xP(e,n),o=r?r.z2:null;null!=o&&((i?t:t.ensureState(n)).z2=o||0)}function fP(t,e,n,i){var r=t.get("renderItem"),o=t.coordinateSystem,a={};o&&(a=o.prepareCustoms?o.prepareCustoms(o):aP[o.type](o));for(var s,l,c=E({getWidth:i.getWidth,getHeight:i.getHeight,getZr:i.getZr,getDevicePixelRatio:i.getDevicePixelRatio,value:function(t,n){return null==n&&(n=s),e.getStore().get(e.getDimensionIndex(t||0),n)},style:function(n,i){null==i&&(i=s);var r=e.getItemVisual(i,"style"),o=r&&r.fill,a=r&&r.opacity,l=y(i,QL).getItemStyle();null!=o&&(l.fill=o),null!=a&&(l.opacity=a);var c={inheritColor:G(o)?o:"#000"},u=b(i,QL),h=qu(u,null,c,!1,!0);h.text=u.getShallow("show")?rt(t.getFormattedLabel(i,QL),Ww(e,i)):null;var d=Uu(u,c,!1);return _(n,l),l=EL(l,h,d),n&&x(l,n),l.legacy=!0,l},ordinalRawValue:function(t,n){null==n&&(n=s),t=t||0;var i=e.getDimensionInfo(t);if(!i){var r=e.getDimensionIndex(t);return r>=0?e.getStore().get(r,n):void 0}var o=e.get(i.name,n),a=i&&i.ordinalMeta;return a?a.categories[o]:o},styleEmphasis:function(n,i){null==i&&(i=s);var r=y(i,KL).getItemStyle(),o=b(i,KL),a=qu(o,null,null,!0,!0);a.text=o.getShallow("show")?ot(t.getFormattedLabel(i,KL),t.getFormattedLabel(i,QL),Ww(e,i)):null;var l=Uu(o,null,!0);return _(n,r),r=EL(r,a,l),n&&x(r,n),r.legacy=!0,r},visual:function(t,n){if(null==n&&(n=s),xt(bL,t)){var i=e.getItemVisual(n,"style");return i?i[bL[t]]:null}if(xt(xL,t))return e.getItemVisual(n,t)},barLayout:function(t){if("cartesian2d"===o.type)return function(t){var e=[],n=t.axis,i="axis0";if("category"===n.type){for(var r=n.getBandWidth(),o=0;o<t.count;o++)e.push(E({bandWidth:r,axisKey:i,stackId:xb+o},t));var a=kb(e),s=[];for(o=0;o<t.count;o++){var l=a[i][xb+o];l.offsetCenter=l.offset+l.width/2,s.push(l)}return s}}(E({axis:o.getBaseAxis()},t))},currentSeriesIndices:function(){return n.getCurrentSeriesIndices()},font:function(t){return Ju(t,n)}},a.api||{}),u={context:{},seriesId:t.id,seriesName:t.name,seriesIndex:t.seriesIndex,coordSys:a.coordSys,dataInsideLength:e.count(),encode:gP(t.getData())},h={},d={},p={},f={},g=0;g<eP.length;g++){var m=eP[g];p[m]=t.getModel(nP[m]),f[m]=t.getModel(iP[m])}function v(t){return t===s?l||(l=e.getItemModel(t)):e.getItemModel(t)}function y(t,n){return e.hasItemOption?t===s?h[n]||(h[n]=v(t).getModel(nP[n])):v(t).getModel(nP[n]):p[n]}function b(t,n){return e.hasItemOption?t===s?d[n]||(d[n]=v(t).getModel(iP[n])):v(t).getModel(iP[n]):f[n]}return function(t,n){return s=t,l=null,h={},d={},r&&r(E({dataIndexInside:t,dataIndex:e.getRawIndex(t),actionType:n?n.type:null},u),c)};function x(t,e){for(var n in e)xt(e,n)&&(t[n]=e[n])}function _(t,e){t&&(t.textFill&&(e.textFill=t.textFill),t.textPosition&&(e.textPosition=t.textPosition))}}function gP(t){var e={};return R(t.dimensions,(function(n){var i=t.getDimensionInfo(n);if(!i.isExtraCoord){var r=i.coordDim;(e[r]=e[r]||[])[i.coordDimIndex]=t.getDimensionIndex(n)}})),e}function mP(t,e,n,i,r,o,a){if(i){var s=vP(t,e,n,i,r,o);return s&&a.setItemGraphicEl(n,s),s&&Bl(s,i.focus,i.blurScope,i.emphasisDisabled),s}o.remove(e)}function vP(t,e,n,i,r,o){var a=-1,s=e;e&&yP(e,i,r)&&(a=D(o.childrenRef(),e),e=null);var l,c,u=!e,h=e;h?h.clearStates():(h=uP(i),s&&(l=s,(c=h).copyTransform(l),lP(c)&&lP(l)&&(c.setStyle(l.style),c.z=l.z,c.z2=l.z2,c.zlevel=l.zlevel,c.invisible=l.invisible,c.ignore=l.ignore,sP(c)&&sP(l)&&c.setShape(l.shape)))),!1===i.morph?h.disableMorphing=!0:h.disableMorphing&&(h.disableMorphing=!1),oP.normal.cfg=oP.normal.conOpt=oP.emphasis.cfg=oP.emphasis.conOpt=oP.blur.cfg=oP.blur.conOpt=oP.select.cfg=oP.select.conOpt=null,oP.isLegacy=!1,function(t,e,n,i,r,o){if(!t.isGroup){bP(n,null,o),bP(n,KL,o);var a=o.normal.conOpt,s=o.emphasis.conOpt,l=o.blur.conOpt,c=o.select.conOpt;if(null!=a||null!=s||null!=c||null!=l){var u=t.getTextContent();if(!1===a)u&&t.removeTextContent();else{a=o.normal.conOpt=a||{type:"text"},u?u.clearStates():(u=uP(a),t.setTextContent(u)),hP(null,u,e,a,null,i,r);for(var h=a&&a.style,d=0;d<eP.length;d++){var p=eP[d];if(p!==QL)dP(p,u,0,_P(a,o[p].conOpt,p),null)}h?u.dirty():u.markRedraw()}}}}(h,n,i,r,u,oP),function(t,e,n,i,r){var o=n.clipPath;if(!1===o)t&&t.getClipPath()&&t.removeClipPath();else if(o){var a=t.getClipPath();a&&yP(a,o,i)&&(a=null),a||(a=uP(o),t.setClipPath(a)),hP(null,a,e,o,null,i,r)}}(h,n,i,r,u),hP(t,h,n,i,oP,r,u),xt(i,"info")&&(_L(h).info=i.info);for(var d=0;d<eP.length;d++){var p=eP[d];if(p!==QL)dP(p,h,0,_P(i,xP(i,p),p),oP)}return function(t,e,n){if(!t.isGroup){var i=t,r=n.currentZ,o=n.currentZLevel;i.z=r,i.zlevel=o;var a=e.z2;null!=a&&(i.z2=a||0);for(var s=0;s<eP.length;s++)pP(i,e,eP[s])}}(h,i,r),"group"===i.type&&function(t,e,n,i,r){var o=i.children,a=o?o.length:0,s=i.$mergeChildren,l="byName"===s||i.diffChildrenByName,c=!1===s;if(a||l||c){if(l)return u={api:t,oldChildren:e.children()||[],newChildren:o||[],dataIndex:n,seriesModel:r,group:e},void new Sy(u.oldChildren,u.newChildren,SP,SP,u).add(CP).update(CP).remove(kP).execute();var u;c&&e.removeAll();for(var h=0;h<a;h++){var d=o[h],p=e.childAt(h);d?(null==d.ignore&&(d.ignore=!1),vP(t,p,n,d,r,e)):p.ignore=!0}for(var f=e.childCount()-1;f>=h;f--){var g=e.childAt(f);wP(e,g,r)}}}(t,h,n,i,r),a>=0?o.replaceAt(h,a):o.add(h),h}function yP(t,e,n){var i,r=_L(t),o=e.type,a=e.shape,s=e.style;return n.isUniversalTransitionEnabled()||null!=o&&o!==r.customGraphicType||"path"===o&&(i=a)&&(xt(i,"pathData")||xt(i,"d"))&&AP(a)!==r.customPathData||"image"===o&&xt(s,"image")&&s.image!==r.customImagePath}function bP(t,e,n){var i=e?xP(t,e):t,r=e?_P(t,i,KL):t.style,o=t.type,a=i?i.textConfig:null,s=t.textContent,l=s?e?xP(s,e):s:null;if(r&&(n.isLegacy||ML(r,o,!!a,!!l))){n.isLegacy=!0;var c=TL(r,o,!e);!a&&c.textConfig&&(a=c.textConfig),!l&&c.textContent&&(l=c.textContent)}if(!e&&l){var u=l;!u.type&&(u.type="text")}var h=e?n[e]:n.normal;h.cfg=a,h.conOpt=l}function xP(t,e){return e?t?t[e]:null:t}function _P(t,e,n){var i=e&&e.style;return null==i&&n===KL&&t&&(i=t.styleEmphasis),i}function wP(t,e,n){e&&FL(e,_L(t).option,n)}function SP(t,e){var n=t&&t.name;return null!=n?n:"e\0\0"+e}function CP(t,e){var n=this.context,i=null!=t?n.newChildren[t]:null,r=null!=e?n.oldChildren[e]:null;vP(n.api,r,n.dataIndex,i,n.seriesModel,n.group)}function kP(t){var e=this.context,n=e.oldChildren[t];n&&FL(n,_L(n).option,e.seriesModel)}function AP(t){return t&&(t.pathData||t.d)}var MP=Io(),TP=A,IP=W,EP=function(){function t(){this._dragging=!1,this.animationThreshold=15}return t.prototype.render=function(t,e,n,i){var r=e.get("value"),o=e.get("status");if(this._axisModel=t,this._axisPointerModel=e,this._api=n,i||this._lastValue!==r||this._lastStatus!==o){this._lastValue=r,this._lastStatus=o;var a=this._group,s=this._handle;if(!o||"hide"===o)return a&&a.hide(),void(s&&s.hide());a&&a.show(),s&&s.show();var l={};this.makeElOption(l,r,t,e,n);var c=l.graphicKey;c!==this._lastGraphicKey&&this.clear(n),this._lastGraphicKey=c;var u=this._moveAnimation=this.determineAnimation(t,e);if(a){var h=j(OP,e,u);this.updatePointerEl(a,l,h),this.updateLabelEl(a,l,h,e)}else a=this._group=new Dr,this.createPointerEl(a,l,t,e),this.createLabelEl(a,l,t,e),n.getZr().add(a);NP(a,e,!0),this._renderHandle(r)}},t.prototype.remove=function(t){this.clear(t)},t.prototype.dispose=function(t){this.clear(t)},t.prototype.determineAnimation=function(t,e){var n=e.get("animation"),i=t.axis,r="category"===i.type,o=e.get("snap");if(!o&&!r)return!1;if("auto"===n||null==n){var a=this.animationThreshold;if(r&&i.getBandWidth()>a)return!0;if(o){var s=$C(t).seriesDataCount,l=i.getExtent();return Math.abs(l[0]-l[1])/s>a}return!1}return!0===n},t.prototype.makeElOption=function(t,e,n,i,r){},t.prototype.createPointerEl=function(t,e,n,i){var r=e.pointer;if(r){var o=MP(t).pointerEl=new Hu[r.type](TP(e.pointer));t.add(o)}},t.prototype.createLabelEl=function(t,e,n,i){if(e.label){var r=MP(t).labelEl=new Rs(TP(e.label));t.add(r),LP(r,i)}},t.prototype.updatePointerEl=function(t,e,n){var i=MP(t).pointerEl;i&&e.pointer&&(i.setStyle(e.pointer.style),n(i,{shape:e.pointer.shape}))},t.prototype.updateLabelEl=function(t,e,n,i){var r=MP(t).labelEl;r&&(r.setStyle(e.label.style),n(r,{x:e.label.x,y:e.label.y}),LP(r,i))},t.prototype._renderHandle=function(t){if(!this._dragging&&this.updateHandleTransform){var e,n=this._axisPointerModel,i=this._api.getZr(),r=this._handle,o=n.getModel("handle"),a=n.get("status");if(!o.get("show")||!a||"hide"===a)return r&&i.remove(r),void(this._handle=null);this._handle||(e=!0,r=this._handle=Pu(o.get("icon"),{cursor:"move",draggable:!0,onmousemove:function(t){pe(t.event)},onmousedown:IP(this._onHandleDragMove,this,0,0),drift:IP(this._onHandleDragMove,this),ondragend:IP(this._onHandleDragEnd,this)}),i.add(r)),NP(r,n,!1),r.setStyle(o.getItemStyle(null,["color","borderColor","borderWidth","opacity","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"]));var s=o.get("size");Y(s)||(s=[s,s]),r.scaleX=s[0]/2,r.scaleY=s[1]/2,kg(this,"_doDispatchAxisPointer",o.get("throttle")||0,"fixRate"),this._moveHandleToValue(t,e)}},t.prototype._moveHandleToValue=function(t,e){OP(this._axisPointerModel,!e&&this._moveAnimation,this._handle,PP(this.getHandleTransform(t,this._axisModel,this._axisPointerModel)))},t.prototype._onHandleDragMove=function(t,e){var n=this._handle;if(n){this._dragging=!0;var i=this.updateHandleTransform(PP(n),[t,e],this._axisModel,this._axisPointerModel);this._payloadInfo=i,n.stopAnimation(),n.attr(PP(i)),MP(n).lastProp=null,this._doDispatchAxisPointer()}},t.prototype._doDispatchAxisPointer=function(){if(this._handle){var t=this._payloadInfo,e=this._axisModel;this._api.dispatchAction({type:"updateAxisPointer",x:t.cursorPoint[0],y:t.cursorPoint[1],tooltipOption:t.tooltipOption,axesInfo:[{axisDim:e.axis.dim,axisIndex:e.componentIndex}]})}},t.prototype._onHandleDragEnd=function(){if(this._dragging=!1,this._handle){var t=this._axisPointerModel.get("value");this._moveHandleToValue(t),this._api.dispatchAction({type:"hideTip"})}},t.prototype.clear=function(t){this._lastValue=null,this._lastStatus=null;var e=t.getZr(),n=this._group,i=this._handle;e&&n&&(this._lastGraphicKey=null,n&&e.remove(n),i&&e.remove(i),this._group=null,this._handle=null,this._payloadInfo=null),Ag(this,"_doDispatchAxisPointer")},t.prototype.doClear=function(){},t.prototype.buildLabel=function(t,e,n){return{x:t[n=n||0],y:t[1-n],width:e[n],height:e[1-n]}},t}();function OP(t,e,n,i){DP(MP(n).lastProp,i)||(MP(n).lastProp=i,e?au(n,i,t):(n.stopAnimation(),n.attr(i)))}function DP(t,e){if($(t)&&$(e)){var n=!0;return R(e,(function(e,i){n=n&&DP(t[i],e)})),!!n}return t===e}function LP(t,e){t[e.get(["label","show"])?"show":"hide"]()}function PP(t){return{x:t.x||0,y:t.y||0,rotation:t.rotation||0}}function NP(t,e,n){var i=e.get("z"),r=e.get("zlevel");t&&t.traverse((function(t){"group"!==t.type&&(null!=i&&(t.z=i),null!=r&&(t.zlevel=r),t.silent=n)}))}function RP(t){var e,n=t.get("type"),i=t.getModel(n+"Style");return"line"===n?(e=i.getLineStyle()).fill=null:"shadow"===n&&((e=i.getAreaStyle()).stroke=null),e}function BP(t,e,n,i,r){var o=zP(n.get("value"),e.axis,e.ecModel,n.get("seriesDataIndices"),{precision:n.get(["label","precision"]),formatter:n.get(["label","formatter"])}),a=n.getModel("label"),s=id(a.get("padding")||0),l=a.getFont(),c=mr(o,l),u=r.position,h=c.width+s[1]+s[3],d=c.height+s[0]+s[2],p=r.align;"right"===p&&(u[0]-=h),"center"===p&&(u[0]-=h/2);var f=r.verticalAlign;"bottom"===f&&(u[1]-=d),"middle"===f&&(u[1]-=d/2),function(t,e,n,i){var r=i.getWidth(),o=i.getHeight();t[0]=Math.min(t[0]+e,r)-e,t[1]=Math.min(t[1]+n,o)-n,t[0]=Math.max(t[0],0),t[1]=Math.max(t[1],0)}(u,h,d,i);var g=a.get("backgroundColor");g&&"auto"!==g||(g=e.get(["axisLine","lineStyle","color"])),t.label={x:u[0],y:u[1],style:qu(a,{text:o,font:l,fill:a.getTextColor(),padding:s,backgroundColor:g}),z2:10}}function zP(t,e,n,i,r){t=e.scale.parse(t);var o=e.scale.getLabel({value:t},{precision:r.precision}),a=r.formatter;if(a){var s={value:ix(e,{value:t}),axisDimension:e.dim,axisIndex:e.index,seriesData:[]};R(i,(function(t){var e=n.getSeriesByIndex(t.seriesIndex),i=t.dataIndexInside,r=e&&e.getDataParams(i);r&&s.seriesData.push(r)})),G(a)?o=a.replace("{value}",o):X(a)&&(o=a(s))}return o}function FP(t,e,n){var i=[1,0,0,1,0,0];return we(i,i,n.rotation),_e(i,i,n.position),Tu([t.dataToCoord(e),(n.labelOffset||0)+(n.labelDirection||1)*(n.labelMargin||0)],i)}function VP(t,e,n,i,r,o){var a=HC.innerTextLayout(n.rotation,0,n.labelDirection);n.labelMargin=r.get(["label","margin"]),BP(e,i,r,o,{position:FP(i.axis,t,n),align:a.textAlign,verticalAlign:a.textVerticalAlign})}function HP(t,e,n){return{x1:t[n=n||0],y1:t[1-n],x2:e[n],y2:e[1-n]}}function WP(t,e,n){return{x:t[n=n||0],y:t[1-n],width:e[n],height:e[1-n]}}function jP(t,e,n,i,r,o){return{cx:t,cy:e,r0:n,r:i,startAngle:r,endAngle:o,clockwise:!0}}var YP=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.makeElOption=function(t,e,n,i,r){var o=n.axis,a=o.grid,s=i.get("type"),l=XP(a,o).getOtherAxis(o).getGlobalExtent(),c=o.toGlobalCoord(o.dataToCoord(e,!0));if(s&&"none"!==s){var u=RP(i),h=GP[s](o,c,l);h.style=u,t.graphicKey=h.type,t.pointer=h}VP(e,t,OC(a.model,n),n,i,r)},e.prototype.getHandleTransform=function(t,e,n){var i=OC(e.axis.grid.model,e,{labelInside:!1});i.labelMargin=n.get(["handle","margin"]);var r=FP(e.axis,t,i);return{x:r[0],y:r[1],rotation:i.rotation+(i.labelDirection<0?Math.PI:0)}},e.prototype.updateHandleTransform=function(t,e,n,i){var r=n.axis,o=r.grid,a=r.getGlobalExtent(!0),s=XP(o,r).getOtherAxis(r).getGlobalExtent(),l="x"===r.dim?0:1,c=[t.x,t.y];c[l]+=e[l],c[l]=Math.min(a[1],c[l]),c[l]=Math.max(a[0],c[l]);var u=(s[1]+s[0])/2,h=[u,u];return h[l]=c[l],{x:c[0],y:c[1],rotation:t.rotation,cursorPoint:h,tooltipOption:[{verticalAlign:"middle"},{align:"center"}][l]}},e}(EP);function XP(t,e){var n={};return n[e.dim+"AxisIndex"]=e.index,t.getCartesian(n)}var GP={line:function(t,e,n){return{type:"Line",subPixelOptimize:!0,shape:HP([e,n[0]],[e,n[1]],qP(t))}},shadow:function(t,e,n){var i=Math.max(1,t.getBandWidth()),r=n[1]-n[0];return{type:"Rect",shape:WP([e-i/2,n[0]],[i,r],qP(t))}}};function qP(t){return"x"===t.dim?0:1}var UP=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.type="axisPointer",e.defaultOption={show:"auto",z:50,type:"line",snap:!1,triggerTooltip:!0,triggerEmphasis:!0,value:null,status:null,link:[],animation:null,animationDurationUpdate:200,lineStyle:{color:"#B9BEC9",width:1,type:"dashed"},shadowStyle:{color:"rgba(210,219,238,0.2)"},label:{show:!0,formatter:null,precision:"auto",margin:3,color:"#fff",padding:[5,7,5,7],backgroundColor:"auto",borderColor:null,borderWidth:0,borderRadius:3},handle:{show:!1,icon:"M10.7,11.9v-1.3H9.3v1.3c-4.9,0.3-8.8,4.4-8.8,9.4c0,5,3.9,9.1,8.8,9.4h1.3c4.9-0.3,8.8-4.4,8.8-9.4C19.5,16.3,15.6,12.2,10.7,11.9z M13.3,24.4H6.7v-1.2h6.6z M13.3,22H6.7v-1.2h6.6z M13.3,19.6H6.7v-1.2h6.6z",size:45,margin:50,color:"#333",shadowBlur:3,shadowColor:"#aaa",shadowOffsetX:0,shadowOffsetY:2,throttle:40}},e}(Sd),$P=Io(),ZP=R;function KP(t,e,n){if(!r.node){var i=e.getZr();$P(i).records||($P(i).records={}),function(t,e){function n(n,i){t.on(n,(function(n){var r=function(t){var e={showTip:[],hideTip:[]},n=function(i){var r=e[i.type];r?r.push(i):(i.dispatchAction=n,t.dispatchAction(i))};return{dispatchAction:n,pendings:e}}(e);ZP($P(t).records,(function(t){t&&i(t,n,r.dispatchAction)})),function(t,e){var n,i=t.showTip.length,r=t.hideTip.length;i?n=t.showTip[i-1]:r&&(n=t.hideTip[r-1]),n&&(n.dispatchAction=null,e.dispatchAction(n))}(r.pendings,e)}))}$P(t).initialized||($P(t).initialized=!0,n("click",j(JP,"click")),n("mousemove",j(JP,"mousemove")),n("globalout",QP))}(i,e),($P(i).records[t]||($P(i).records[t]={})).handler=n}}function QP(t,e,n){t.handler("leave",null,n)}function JP(t,e,n,i){e.handler(t,n,i)}function tN(t,e){if(!r.node){var n=e.getZr();($P(n).records||{})[t]&&($P(n).records[t]=null)}}var eN=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.prototype.render=function(t,e,n){var i=e.getComponent("tooltip"),r=t.get("triggerOn")||i&&i.get("triggerOn")||"mousemove|click";KP("axisPointer",n,(function(t,e,n){"none"!==r&&("leave"===t||r.indexOf(t)>=0)&&n({type:"updateAxisPointer",currTrigger:t,x:e&&e.offsetX,y:e&&e.offsetY})}))},e.prototype.remove=function(t,e){tN("axisPointer",e)},e.prototype.dispose=function(t,e){tN("axisPointer",e)},e.type="axisPointer",e}(hg);function nN(t,e){var n,i=[],r=t.seriesIndex;if(null==r||!(n=e.getSeriesByIndex(r)))return{point:[]};var o=n.getData(),a=To(o,t);if(null==a||a<0||Y(a))return{point:[]};var s=o.getItemGraphicEl(a),l=n.coordinateSystem;if(n.getTooltipPosition)i=n.getTooltipPosition(a)||[];else if(l&&l.dataToPoint)if(t.isStacked){var c=l.getBaseAxis(),u=l.getOtherAxis(c).dim,h=c.dim,d="x"===u||"radius"===u?1:0,p=o.mapDimension(h),f=[];f[d]=o.get(p,a),f[1-d]=o.get(o.getCalculationInfo("stackResultDimension"),a),i=l.dataToPoint(f)||[]}else i=l.dataToPoint(o.getValues(B(l.dimensions,(function(t){return o.mapDimension(t)})),a))||[];else if(s){var g=s.getBoundingRect().clone();g.applyTransform(s.transform),i=[g.x+g.width/2,g.y+g.height/2]}return{point:i,el:s}}var iN=Io();function rN(t,e,n){var i=t.currTrigger,r=[t.x,t.y],o=t,a=t.dispatchAction||W(n.dispatchAction,n),s=e.getComponent("axisPointer").coordSysAxesInfo;if(s){cN(r)&&(r=nN({seriesIndex:o.seriesIndex,dataIndex:o.dataIndex},e).point);var l=cN(r),c=o.axesInfo,u=s.axesInfo,h="leave"===i||cN(r),d={},p={},f={list:[],map:{}},g={showPointer:j(aN,p),showTooltip:j(sN,f)};R(s.coordSysMap,(function(t,e){var n=l||t.containPoint(r);R(s.coordSysAxesInfo[e],(function(t,e){var i=t.axis,o=function(t,e){for(var n=0;n<(t||[]).length;n++){var i=t[n];if(e.axis.dim===i.axisDim&&e.axis.model.componentIndex===i.axisIndex)return i}}(c,t);if(!h&&n&&(!c||o)){var a=o&&o.value;null!=a||l||(a=i.pointToData(r)),null!=a&&oN(t,a,g,!1,d)}}))}));var m={};return R(u,(function(t,e){var n=t.linkGroup;n&&!p[e]&&R(n.axesInfo,(function(e,i){var r=p[i];if(e!==t&&r){var o=r.value;n.mapper&&(o=t.axis.scale.parse(n.mapper(o,lN(e),lN(t)))),m[t.key]=o}}))})),R(m,(function(t,e){oN(u[e],t,g,!0,d)})),function(t,e,n){var i=n.axesInfo=[];R(e,(function(e,n){var r=e.axisPointerModel.option,o=t[n];o?(!e.useHandle&&(r.status="show"),r.value=o.value,r.seriesDataIndices=(o.payloadBatch||[]).slice()):!e.useHandle&&(r.status="hide"),"show"===r.status&&i.push({axisDim:e.axis.dim,axisIndex:e.axis.model.componentIndex,value:r.value})}))}(p,u,d),function(t,e,n,i){if(!cN(e)&&t.list.length){var r=((t.list[0].dataByAxis[0]||{}).seriesDataIndices||[])[0]||{};i({type:"showTip",escapeConnect:!0,x:e[0],y:e[1],tooltipOption:n.tooltipOption,position:n.position,dataIndexInside:r.dataIndexInside,dataIndex:r.dataIndex,seriesIndex:r.seriesIndex,dataByCoordSys:t.list})}else i({type:"hideTip"})}(f,r,t,a),function(t,e,n){var i=n.getZr(),r="axisPointerLastHighlights",o=iN(i)[r]||{},a=iN(i)[r]={};R(t,(function(t,e){var n=t.axisPointerModel.option;"show"===n.status&&t.triggerEmphasis&&R(n.seriesDataIndices,(function(t){var e=t.seriesIndex+" | "+t.dataIndex;a[e]=t}))}));var s=[],l=[];R(o,(function(t,e){!a[e]&&l.push(t)})),R(a,(function(t,e){!o[e]&&s.push(t)})),l.length&&n.dispatchAction({type:"downplay",escapeConnect:!0,notBlur:!0,batch:l}),s.length&&n.dispatchAction({type:"highlight",escapeConnect:!0,notBlur:!0,batch:s})}(u,0,n),d}}function oN(t,e,n,i,r){var o=t.axis;if(!o.scale.isBlank()&&o.containData(e))if(t.involveSeries){var a=function(t,e){var n=e.axis,i=n.dim,r=t,o=[],a=Number.MAX_VALUE,s=-1;return R(e.seriesModels,(function(e,l){var c,u,h=e.getData().mapDimensionsAll(i);if(e.getAxisTooltipData){var d=e.getAxisTooltipData(h,t,n);u=d.dataIndices,c=d.nestestValue}else{if(!(u=e.getData().indicesOfNearest(h[0],t,"category"===n.type?.5:null)).length)return;c=e.getData().get(h[0],u[0])}if(null!=c&&isFinite(c)){var p=t-c,f=Math.abs(p);f<=a&&((f<a||p>=0&&s<0)&&(a=f,s=p,r=c,o.length=0),R(u,(function(t){o.push({seriesIndex:e.seriesIndex,dataIndexInside:t,dataIndex:e.getData().getRawIndex(t)})})))}})),{payloadBatch:o,snapToValue:r}}(e,t),s=a.payloadBatch,l=a.snapToValue;s[0]&&null==r.seriesIndex&&I(r,s[0]),!i&&t.snap&&o.containData(l)&&null!=l&&(e=l),n.showPointer(t,e,s),n.showTooltip(t,a,l)}else n.showPointer(t,e)}function aN(t,e,n,i){t[e.key]={value:n,payloadBatch:i}}function sN(t,e,n,i){var r=n.payloadBatch,o=e.axis,a=o.model,s=e.axisPointerModel;if(e.triggerTooltip&&r.length){var l=e.coordSys.model,c=KC(l),u=t.map[c];u||(u=t.map[c]={coordSysId:l.id,coordSysIndex:l.componentIndex,coordSysType:l.type,coordSysMainType:l.mainType,dataByAxis:[]},t.list.push(u)),u.dataByAxis.push({axisDim:o.dim,axisIndex:a.componentIndex,axisType:a.type,axisId:a.id,value:i,valueLabelOpt:{precision:s.get(["label","precision"]),formatter:s.get(["label","formatter"])},seriesDataIndices:r.slice()})}}function lN(t){var e=t.axis.model,n={},i=n.axisDim=t.axis.dim;return n.axisIndex=n[i+"AxisIndex"]=e.componentIndex,n.axisName=n[i+"AxisName"]=e.name,n.axisId=n[i+"AxisId"]=e.id,n}function cN(t){return!t||null==t[0]||isNaN(t[0])||null==t[1]||isNaN(t[1])}function uN(t){JC.registerAxisPointerClass("CartesianAxisPointer",YP),t.registerComponentModel(UP),t.registerComponentView(eN),t.registerPreprocessor((function(t){if(t){(!t.axisPointer||0===t.axisPointer.length)&&(t.axisPointer={});var e=t.axisPointer.link;e&&!Y(e)&&(t.axisPointer.link=[e])}})),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,(function(t,e){t.getComponent("axisPointer").coordSysAxesInfo=function(t,e){var n={axesInfo:{},seriesInvolved:!1,coordSysAxesInfo:{},coordSysMap:{}};return function(t,e,n){var i=e.getComponent("tooltip"),r=e.getComponent("axisPointer"),o=r.get("link",!0)||[],a=[];R(n.getCoordinateSystems(),(function(n){if(n.axisPointerEnabled){var s=KC(n.model),l=t.coordSysAxesInfo[s]={};t.coordSysMap[s]=n;var c=n.model.getModel("tooltip",i);if(R(n.getAxes(),j(p,!1,null)),n.getTooltipAxes&&i&&c.get("show")){var u="axis"===c.get("trigger"),h="cross"===c.get(["axisPointer","type"]),d=n.getTooltipAxes(c.get(["axisPointer","axis"]));(u||h)&&R(d.baseAxes,j(p,!h||"cross",u)),h&&R(d.otherAxes,j(p,"cross",!1))}}function p(i,s,u){var h=u.model.getModel("axisPointer",r),d=h.get("show");if(d&&("auto"!==d||i||ZC(h))){null==s&&(s=h.get("triggerTooltip")),h=i?function(t,e,n,i,r,o){var a=e.getModel("axisPointer"),s={};R(["type","snap","lineStyle","shadowStyle","label","animation","animationDurationUpdate","animationEasingUpdate","z"],(function(t){s[t]=A(a.get(t))})),s.snap="category"!==t.type&&!!o,"cross"===a.get("type")&&(s.type="line");var l=s.label||(s.label={});if(null==l.show&&(l.show=!1),"cross"===r){var c=a.get(["label","show"]);if(l.show=null==c||c,!o){var u=s.lineStyle=a.get("crossStyle");u&&E(l,u.textStyle)}}return t.model.getModel("axisPointer",new gh(s,n,i))}(u,c,r,e,i,s):h;var p=h.get("snap"),f=h.get("triggerEmphasis"),g=KC(u.model),m=s||p||"category"===u.type,v=t.axesInfo[g]={key:g,axis:u,coordSys:n,axisPointerModel:h,triggerTooltip:s,triggerEmphasis:f,involveSeries:m,snap:p,useHandle:ZC(h),seriesModels:[],linkGroup:null};l[g]=v,t.seriesInvolved=t.seriesInvolved||m;var y=function(t,e){for(var n=e.model,i=e.dim,r=0;r<t.length;r++){var o=t[r]||{};if(qC(o[i+"AxisId"],n.id)||qC(o[i+"AxisIndex"],n.componentIndex)||qC(o[i+"AxisName"],n.name))return r}}(o,u);if(null!=y){var b=a[y]||(a[y]={axesInfo:{}});b.axesInfo[g]=v,b.mapper=o[y].mapper,v.linkGroup=b}}}}))}(n,t,e),n.seriesInvolved&&function(t,e){e.eachSeries((function(e){var n=e.coordinateSystem,i=e.get(["tooltip","trigger"],!0),r=e.get(["tooltip","show"],!0);n&&"none"!==i&&!1!==i&&"item"!==i&&!1!==r&&!1!==e.get(["axisPointer","show"],!0)&&R(t.coordSysAxesInfo[KC(n.model)],(function(t){var i=t.axis;n.getAxis(i.dim)===i&&(t.seriesModels.push(e),null==t.seriesDataCount&&(t.seriesDataCount=0),t.seriesDataCount+=e.getData().count())}))}))}(n,t),n}(t,e)})),t.registerAction({type:"updateAxisPointer",event:"updateAxisPointer",update:":updateAxisPointer"},rN)}var hN=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.makeElOption=function(t,e,n,i,r){var o=n.axis;"angle"===o.dim&&(this.animationThreshold=Math.PI/18);var a=o.polar,s=a.getOtherAxis(o).getExtent(),l=o.dataToCoord(e),c=i.get("type");if(c&&"none"!==c){var u=RP(i),h=dN[c](o,a,l,s);h.style=u,t.graphicKey=h.type,t.pointer=h}var d=function(t,e,n,i,r){var o=e.axis,a=o.dataToCoord(t),s=i.getAngleAxis().getExtent()[0];s=s/180*Math.PI;var l,c,u,h=i.getRadiusAxis().getExtent();if("radius"===o.dim){var d=[1,0,0,1,0,0];we(d,d,s),_e(d,d,[i.cx,i.cy]),l=Tu([a,-r],d);var p=e.getModel("axisLabel").get("rotate")||0,f=HC.innerTextLayout(s,p*Math.PI/180,-1);c=f.textAlign,u=f.textVerticalAlign}else{var g=h[1];l=i.coordToPoint([g+r,a]);var m=i.cx,v=i.cy;c=Math.abs(l[0]-m)/g<.3?"center":l[0]>m?"left":"right",u=Math.abs(l[1]-v)/g<.3?"middle":l[1]>v?"top":"bottom"}return{position:l,align:c,verticalAlign:u}}(e,n,0,a,i.get(["label","margin"]));BP(t,n,i,r,d)},e}(EP),dN={line:function(t,e,n,i){return"angle"===t.dim?{type:"Line",shape:HP(e.coordToPoint([i[0],n]),e.coordToPoint([i[1],n]))}:{type:"Circle",shape:{cx:e.cx,cy:e.cy,r:n}}},shadow:function(t,e,n,i){var r=Math.max(1,t.getBandWidth()),o=Math.PI/180;return"angle"===t.dim?{type:"Sector",shape:jP(e.cx,e.cy,i[0],i[1],(-n-r/2)*o,(r/2-n)*o)}:{type:"Sector",shape:jP(e.cx,e.cy,n-r/2,n+r/2,0,2*Math.PI)}}},pN=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.prototype.findAxisModel=function(t){var e;return this.ecModel.eachComponent(t,(function(t){t.getCoordSysModel()===this&&(e=t)}),this),e},e.type="polar",e.dependencies=["radiusAxis","angleAxis"],e.defaultOption={z:0,center:["50%","50%"],radius:"80%"},e}(Sd),fN=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.getCoordSysModel=function(){return this.getReferringComponents("polar",Lo).models[0]},e.type="polarAxis",e}(Sd);P(fN,lx);var gN=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.type="angleAxis",e}(fN),mN=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.type="radiusAxis",e}(fN),vN=function(t){function e(e,n){return t.call(this,"radius",e,n)||this}return n(e,t),e.prototype.pointToData=function(t,e){return this.polar.pointToData(t,e)["radius"===this.dim?0:1]},e}(zx);vN.prototype.dataToRadius=zx.prototype.dataToCoord,vN.prototype.radiusToData=zx.prototype.coordToData;var yN=Io(),bN=function(t){function e(e,n){return t.call(this,"angle",e,n||[0,360])||this}return n(e,t),e.prototype.pointToData=function(t,e){return this.polar.pointToData(t,e)["radius"===this.dim?0:1]},e.prototype.calculateCategoryInterval=function(){var t=this,e=t.getLabelModel(),n=t.scale,i=n.getExtent(),r=n.count();if(i[1]-i[0]<1)return 0;var o=i[0],a=t.dataToCoord(o+1)-t.dataToCoord(o),s=Math.abs(a),l=mr(null==o?"":o+"",e.getFont(),"center","top"),c=Math.max(l.height,7)/s;isNaN(c)&&(c=1/0);var u=Math.max(0,Math.floor(c)),h=yN(t.model),d=h.lastAutoInterval,p=h.lastTickCount;return null!=d&&null!=p&&Math.abs(d-u)<=1&&Math.abs(p-r)<=1&&d>u?u=d:(h.lastTickCount=r,h.lastAutoInterval=u),u},e}(zx);bN.prototype.dataToAngle=zx.prototype.dataToCoord,bN.prototype.angleToData=zx.prototype.coordToData;var xN=["radius","angle"],_N=function(){function t(t){this.dimensions=xN,this.type="polar",this.cx=0,this.cy=0,this._radiusAxis=new vN,this._angleAxis=new bN,this.axisPointerEnabled=!0,this.name=t||"",this._radiusAxis.polar=this._angleAxis.polar=this}return t.prototype.containPoint=function(t){var e=this.pointToCoord(t);return this._radiusAxis.contain(e[0])&&this._angleAxis.contain(e[1])},t.prototype.containData=function(t){return this._radiusAxis.containData(t[0])&&this._angleAxis.containData(t[1])},t.prototype.getAxis=function(t){return this["_"+t+"Axis"]},t.prototype.getAxes=function(){return[this._radiusAxis,this._angleAxis]},t.prototype.getAxesByScale=function(t){var e=[],n=this._angleAxis,i=this._radiusAxis;return n.scale.type===t&&e.push(n),i.scale.type===t&&e.push(i),e},t.prototype.getAngleAxis=function(){return this._angleAxis},t.prototype.getRadiusAxis=function(){return this._radiusAxis},t.prototype.getOtherAxis=function(t){var e=this._angleAxis;return t===e?this._radiusAxis:e},t.prototype.getBaseAxis=function(){return this.getAxesByScale("ordinal")[0]||this.getAxesByScale("time")[0]||this.getAngleAxis()},t.prototype.getTooltipAxes=function(t){var e=null!=t&&"auto"!==t?this.getAxis(t):this.getBaseAxis();return{baseAxes:[e],otherAxes:[this.getOtherAxis(e)]}},t.prototype.dataToPoint=function(t,e){return this.coordToPoint([this._radiusAxis.dataToRadius(t[0],e),this._angleAxis.dataToAngle(t[1],e)])},t.prototype.pointToData=function(t,e){var n=this.pointToCoord(t);return[this._radiusAxis.radiusToData(n[0],e),this._angleAxis.angleToData(n[1],e)]},t.prototype.pointToCoord=function(t){var e=t[0]-this.cx,n=t[1]-this.cy,i=this.getAngleAxis(),r=i.getExtent(),o=Math.min(r[0],r[1]),a=Math.max(r[0],r[1]);i.inverse?o=a-360:a=o+360;var s=Math.sqrt(e*e+n*n);e/=s,n/=s;for(var l=Math.atan2(-n,e)/Math.PI*180,c=l<o?1:-1;l<o||l>a;)l+=360*c;return[s,l]},t.prototype.coordToPoint=function(t){var e=t[0],n=t[1]/180*Math.PI;return[Math.cos(n)*e+this.cx,-Math.sin(n)*e+this.cy]},t.prototype.getArea=function(){var t=this.getAngleAxis(),e=this.getRadiusAxis().getExtent().slice();e[0]>e[1]&&e.reverse();var n=t.getExtent(),i=Math.PI/180;return{cx:this.cx,cy:this.cy,r0:e[0],r:e[1],startAngle:-n[0]*i,endAngle:-n[1]*i,clockwise:t.inverse,contain:function(t,e){var n=t-this.cx,i=e-this.cy,r=n*n+i*i-1e-4,o=this.r,a=this.r0;return r<=o*o&&r>=a*a}}},t.prototype.convertToPixel=function(t,e,n){return wN(e)===this?this.dataToPoint(n):null},t.prototype.convertFromPixel=function(t,e,n){return wN(e)===this?this.pointToData(n):null},t}();function wN(t){var e=t.seriesModel,n=t.polarModel;return n&&n.coordinateSystem||e&&e.coordinateSystem}function SN(t,e){var n=this,i=n.getAngleAxis(),r=n.getRadiusAxis();if(i.scale.setExtent(1/0,-1/0),r.scale.setExtent(1/0,-1/0),t.eachSeries((function(t){if(t.coordinateSystem===n){var e=t.getData();R(sx(e,"radius"),(function(t){r.scale.unionExtentFromData(e,t)})),R(sx(e,"angle"),(function(t){i.scale.unionExtentFromData(e,t)}))}})),tx(i.scale,i.model),tx(r.scale,r.model),"category"===i.type&&!i.onBand){var o=i.getExtent(),a=360/i.scale.count();i.inverse?o[1]+=a:o[1]-=a,i.setExtent(o[0],o[1])}}function CN(t,e){var n;if(t.type=e.get("type"),t.scale=ex(e),t.onBand=e.get("boundaryGap")&&"category"===t.type,t.inverse=e.get("inverse"),function(t){return"angleAxis"===t.mainType}(e)){t.inverse=t.inverse!==e.get("clockwise");var i=e.get("startAngle"),r=null!==(n=e.get("endAngle"))&&void 0!==n?n:i+(t.inverse?-360:360);t.setExtent(i,r)}e.axis=t,t.model=e}var kN={dimensions:xN,create:function(t,e){var n=[];return t.eachComponent("polar",(function(t,i){var r=new _N(i+"");r.update=SN;var o=r.getRadiusAxis(),a=r.getAngleAxis(),s=t.findAxisModel("radiusAxis"),l=t.findAxisModel("angleAxis");CN(o,s),CN(a,l),function(t,e,n){var i=e.get("center"),r=n.getWidth(),o=n.getHeight();t.cx=jr(i[0],r),t.cy=jr(i[1],o);var a=t.getRadiusAxis(),s=Math.min(r,o)/2,l=e.get("radius");null==l?l=[0,"100%"]:Y(l)||(l=[0,l]);var c=[jr(l[0],s),jr(l[1],s)];a.inverse?a.setExtent(c[1],c[0]):a.setExtent(c[0],c[1])}(r,t,e),n.push(r),t.coordinateSystem=r,r.model=t})),t.eachSeries((function(t){if("polar"===t.get("coordinateSystem")){var e=t.getReferringComponents("polar",Lo).models[0];t.coordinateSystem=e.coordinateSystem}})),n}},AN=["axisLine","axisLabel","axisTick","minorTick","splitLine","minorSplitLine","splitArea"];function MN(t,e,n){e[1]>e[0]&&(e=e.slice().reverse());var i=t.coordToPoint([e[0],n]),r=t.coordToPoint([e[1],n]);return{x1:i[0],y1:i[1],x2:r[0],y2:r[1]}}function TN(t){return t.getRadiusAxis().inverse?0:1}function IN(t){var e=t[0],n=t[t.length-1];e&&n&&Math.abs(Math.abs(e.coord-n.coord)-360)<1e-4&&t.pop()}var EN=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.axisPointerClass="PolarAxisPointer",n}return n(e,t),e.prototype.render=function(t,e){if(this.group.removeAll(),t.get("show")){var n=t.axis,i=n.polar,r=i.getRadiusAxis().getExtent(),o=n.getTicksCoords(),a=n.getMinorTicksCoords(),s=B(n.getViewLabels(),(function(t){t=A(t);var e=n.scale,i="ordinal"===e.type?e.getRawOrdinalNumber(t.tickValue):t.tickValue;return t.coord=n.dataToCoord(i),t}));IN(s),IN(o),R(AN,(function(e){!t.get([e,"show"])||n.scale.isBlank()&&"axisLine"!==e||ON[e](this.group,t,i,o,a,r,s)}),this)}},e.type="angleAxis",e}(JC),ON={axisLine:function(t,e,n,i,r,o){var a,s=e.getModel(["axisLine","lineStyle"]),l=n.getAngleAxis(),c=Math.PI/180,u=l.getExtent(),h=TN(n),d=h?0:1,p=360===Math.abs(u[1]-u[0])?"Circle":"Arc";(a=0===o[d]?new Hu[p]({shape:{cx:n.cx,cy:n.cy,r:o[h],startAngle:-u[0]*c,endAngle:-u[1]*c,clockwise:l.inverse},style:s.getLineStyle(),z2:1,silent:!0}):new Oc({shape:{cx:n.cx,cy:n.cy,r:o[h],r0:o[d]},style:s.getLineStyle(),z2:1,silent:!0})).style.fill=null,t.add(a)},axisTick:function(t,e,n,i,r,o){var a=e.getModel("axisTick"),s=(a.get("inside")?-1:1)*a.get("length"),l=o[TN(n)],c=B(i,(function(t){return new Fc({shape:MN(n,[l,l+s],t.coord)})}));t.add(Su(c,{style:E(a.getModel("lineStyle").getLineStyle(),{stroke:e.get(["axisLine","lineStyle","color"])})}))},minorTick:function(t,e,n,i,r,o){if(r.length){for(var a=e.getModel("axisTick"),s=e.getModel("minorTick"),l=(a.get("inside")?-1:1)*s.get("length"),c=o[TN(n)],u=[],h=0;h<r.length;h++)for(var d=0;d<r[h].length;d++)u.push(new Fc({shape:MN(n,[c,c+l],r[h][d].coord)}));t.add(Su(u,{style:E(s.getModel("lineStyle").getLineStyle(),E(a.getLineStyle(),{stroke:e.get(["axisLine","lineStyle","color"])}))}))}},axisLabel:function(t,e,n,i,r,o,a){var s=e.getCategories(!0),l=e.getModel("axisLabel"),c=l.get("margin"),u=e.get("triggerEvent");R(a,(function(i,r){var a=l,h=i.tickValue,d=o[TN(n)],p=n.coordToPoint([d+c,i.coord]),f=n.cx,g=n.cy,m=Math.abs(p[0]-f)/d<.3?"center":p[0]>f?"left":"right",v=Math.abs(p[1]-g)/d<.3?"middle":p[1]>g?"top":"bottom";if(s&&s[h]){var y=s[h];$(y)&&y.textStyle&&(a=new gh(y.textStyle,l,l.ecModel))}var b=new Rs({silent:HC.isLabelSilent(e),style:qu(a,{x:p[0],y:p[1],fill:a.getTextColor()||e.get(["axisLine","lineStyle","color"]),text:i.formattedLabel,align:m,verticalAlign:v})});if(t.add(b),u){var x=HC.makeAxisEventDataBase(e);x.targetType="axisLabel",x.value=i.rawLabel,$s(b).eventData=x}}),this)},splitLine:function(t,e,n,i,r,o){var a=e.getModel("splitLine").getModel("lineStyle"),s=a.get("color"),l=0;s=s instanceof Array?s:[s];for(var c=[],u=0;u<i.length;u++){var h=l++%s.length;c[h]=c[h]||[],c[h].push(new Fc({shape:MN(n,o,i[u].coord)}))}for(u=0;u<c.length;u++)t.add(Su(c[u],{style:E({stroke:s[u%s.length]},a.getLineStyle()),silent:!0,z:e.get("z")}))},minorSplitLine:function(t,e,n,i,r,o){if(r.length){for(var a=e.getModel("minorSplitLine").getModel("lineStyle"),s=[],l=0;l<r.length;l++)for(var c=0;c<r[l].length;c++)s.push(new Fc({shape:MN(n,o,r[l][c].coord)}));t.add(Su(s,{style:a.getLineStyle(),silent:!0,z:e.get("z")}))}},splitArea:function(t,e,n,i,r,o){if(i.length){var a=e.getModel("splitArea").getModel("areaStyle"),s=a.get("color"),l=0;s=s instanceof Array?s:[s];for(var c=[],u=Math.PI/180,h=-i[0].coord*u,d=Math.min(o[0],o[1]),p=Math.max(o[0],o[1]),f=e.get("clockwise"),g=1,m=i.length;g<=m;g++){var v=g===m?i[0].coord:i[g].coord,y=l++%s.length;c[y]=c[y]||[],c[y].push(new Ic({shape:{cx:n.cx,cy:n.cy,r0:d,r:p,startAngle:h,endAngle:-v*u,clockwise:f},silent:!0})),h=-v*u}for(g=0;g<c.length;g++)t.add(Su(c[g],{style:E({fill:s[g%s.length]},a.getAreaStyle()),silent:!0}))}}},DN=["axisLine","axisTickLabel","axisName"],LN=["splitLine","splitArea","minorSplitLine"],PN=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.axisPointerClass="PolarAxisPointer",n}return n(e,t),e.prototype.render=function(t,e){if(this.group.removeAll(),t.get("show")){var n=this._axisGroup,i=this._axisGroup=new Dr;this.group.add(i);var r=t.axis,o=r.polar,a=o.getAngleAxis(),s=r.getTicksCoords(),l=r.getMinorTicksCoords(),c=a.getExtent()[0],u=r.getExtent(),h=function(t,e,n){return{position:[t.cx,t.cy],rotation:n/180*Math.PI,labelDirection:-1,tickDirection:-1,nameDirection:1,labelRotate:e.getModel("axisLabel").get("rotate"),z2:1}}(o,t,c),d=new HC(t,h);R(DN,d.add,d),i.add(d.getGroup()),Ou(n,i,t),R(LN,(function(e){t.get([e,"show"])&&!r.scale.isBlank()&&NN[e](this.group,t,o,c,u,s,l)}),this)}},e.type="radiusAxis",e}(JC),NN={splitLine:function(t,e,n,i,r,o){var a=e.getModel("splitLine").getModel("lineStyle"),s=a.get("color"),l=0,c=n.getAngleAxis(),u=Math.PI/180,h=c.getExtent(),d=360===Math.abs(h[1]-h[0])?"Circle":"Arc";s=s instanceof Array?s:[s];for(var p=[],f=0;f<o.length;f++){var g=l++%s.length;p[g]=p[g]||[],p[g].push(new Hu[d]({shape:{cx:n.cx,cy:n.cy,r:Math.max(o[f].coord,0),startAngle:-h[0]*u,endAngle:-h[1]*u,clockwise:c.inverse}}))}for(f=0;f<p.length;f++)t.add(Su(p[f],{style:E({stroke:s[f%s.length],fill:null},a.getLineStyle()),silent:!0}))},minorSplitLine:function(t,e,n,i,r,o,a){if(a.length){for(var s=e.getModel("minorSplitLine").getModel("lineStyle"),l=[],c=0;c<a.length;c++)for(var u=0;u<a[c].length;u++)l.push(new pc({shape:{cx:n.cx,cy:n.cy,r:a[c][u].coord}}));t.add(Su(l,{style:E({fill:null},s.getLineStyle()),silent:!0}))}},splitArea:function(t,e,n,i,r,o){if(o.length){var a=e.getModel("splitArea").getModel("areaStyle"),s=a.get("color"),l=0;s=s instanceof Array?s:[s];for(var c=[],u=o[0].coord,h=1;h<o.length;h++){var d=l++%s.length;c[d]=c[d]||[],c[d].push(new Ic({shape:{cx:n.cx,cy:n.cy,r0:u,r:o[h].coord,startAngle:0,endAngle:2*Math.PI},silent:!0})),u=o[h].coord}for(h=0;h<c.length;h++)t.add(Su(c[h],{style:E({fill:s[h%s.length]},a.getAreaStyle()),silent:!0}))}}};function RN(t){return t.get("stack")||"__ec_stack_"+t.seriesIndex}function BN(t,e){return e.dim+t.model.componentIndex}function zN(t,e,n){var i={},r=function(t){var e={};R(t,(function(t,n){var i=t.getData(),r=t.coordinateSystem,o=r.getBaseAxis(),a=BN(r,o),s=o.getExtent(),l="category"===o.type?o.getBandWidth():Math.abs(s[1]-s[0])/i.count(),c=e[a]||{bandWidth:l,remainedWidth:l,autoWidthCount:0,categoryGap:"20%",gap:"30%",stacks:{}},u=c.stacks;e[a]=c;var h=RN(t);u[h]||c.autoWidthCount++,u[h]=u[h]||{width:0,maxWidth:0};var d=jr(t.get("barWidth"),l),p=jr(t.get("barMaxWidth"),l),f=t.get("barGap"),g=t.get("barCategoryGap");d&&!u[h].width&&(d=Math.min(c.remainedWidth,d),u[h].width=d,c.remainedWidth-=d),p&&(u[h].maxWidth=p),null!=f&&(c.gap=f),null!=g&&(c.categoryGap=g)}));var n={};return R(e,(function(t,e){n[e]={};var i=t.stacks,r=t.bandWidth,o=jr(t.categoryGap,r),a=jr(t.gap,1),s=t.remainedWidth,l=t.autoWidthCount,c=(s-o)/(l+(l-1)*a);c=Math.max(c,0),R(i,(function(t,e){var n=t.maxWidth;n&&n<c&&(n=Math.min(n,s),t.width&&(n=Math.min(n,t.width)),s-=n,t.width=n,l--)})),c=(s-o)/(l+(l-1)*a),c=Math.max(c,0);var u,h=0;R(i,(function(t,e){t.width||(t.width=c),u=t,h+=t.width*(1+a)})),u&&(h-=u.width*a);var d=-h/2;R(i,(function(t,i){n[e][i]=n[e][i]||{offset:d,width:t.width},d+=t.width*(1+a)}))})),n}(F(e.getSeriesByType(t),(function(t){return!e.isSeriesFiltered(t)&&t.coordinateSystem&&"polar"===t.coordinateSystem.type})));e.eachSeriesByType(t,(function(t){if("polar"===t.coordinateSystem.type){var e=t.getData(),n=t.coordinateSystem,o=n.getBaseAxis(),a=BN(n,o),s=RN(t),l=r[a][s],c=l.offset,u=l.width,h=n.getOtherAxis(o),d=t.coordinateSystem.cx,p=t.coordinateSystem.cy,f=t.get("barMinHeight")||0,g=t.get("barMinAngle")||0;i[s]=i[s]||[];for(var m=e.mapDimension(h.dim),v=e.mapDimension(o.dim),y=tb(e,m),b="radius"!==o.dim||!t.get("roundCap",!0),x=h.dataToCoord(0),_=0,w=e.count();_<w;_++){var S=e.get(m,_),C=e.get(v,_),k=S>=0?"p":"n",A=x;y&&(i[s][C]||(i[s][C]={p:x,n:x}),A=i[s][C][k]);var M=void 0,T=void 0,I=void 0,E=void 0;if("radius"===h.dim){var O=h.dataToCoord(S)-x,D=o.dataToCoord(C);Math.abs(O)<f&&(O=(O<0?-1:1)*f),M=A,T=A+O,E=(I=D-c)-u,y&&(i[s][C][k]=T)}else{var L=h.dataToCoord(S,b)-x,P=o.dataToCoord(C);Math.abs(L)<g&&(L=(L<0?-1:1)*g),T=(M=P+c)+u,I=A,E=A+L,y&&(i[s][C][k]=E)}e.setItemLayout(_,{cx:d,cy:p,r0:M,r:T,startAngle:-I*Math.PI/180,endAngle:-E*Math.PI/180,clockwise:I>=E})}}}))}var FN={startAngle:90,clockwise:!0,splitNumber:12,axisLabel:{rotate:0}},VN={splitNumber:5},HN=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.type="polar",e}(hg);function WN(t,e){e=e||{};var n=t.coordinateSystem,i=t.axis,r={},o=i.position,a=i.orient,s=n.getRect(),l=[s.x,s.x+s.width,s.y,s.y+s.height],c={horizontal:{top:l[2],bottom:l[3]},vertical:{left:l[0],right:l[1]}};r.position=["vertical"===a?c.vertical[o]:l[0],"horizontal"===a?c.horizontal[o]:l[3]],r.rotation=Math.PI/2*{horizontal:0,vertical:1}[a],r.labelDirection=r.tickDirection=r.nameDirection={top:-1,bottom:1,right:1,left:-1}[o],t.get(["axisTick","inside"])&&(r.tickDirection=-r.tickDirection),it(e.labelInside,t.get(["axisLabel","inside"]))&&(r.labelDirection=-r.labelDirection);var u=e.rotate;return null==u&&(u=t.get(["axisLabel","rotate"])),r.labelRotation="top"===o?-u:u,r.z2=1,r}var jN=["axisLine","axisTickLabel","axisName"],YN=["splitArea","splitLine"],XN=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.axisPointerClass="SingleAxisPointer",n}return n(e,t),e.prototype.render=function(e,n,i,r){var o=this.group;o.removeAll();var a=this._axisGroup;this._axisGroup=new Dr;var s=WN(e),l=new HC(e,s);R(jN,l.add,l),o.add(this._axisGroup),o.add(l.getGroup()),R(YN,(function(t){e.get([t,"show"])&&GN[t](this,this.group,this._axisGroup,e)}),this),Ou(a,this._axisGroup,e),t.prototype.render.call(this,e,n,i,r)},e.prototype.remove=function(){nk(this)},e.type="singleAxis",e}(JC),GN={splitLine:function(t,e,n,i){var r=i.axis;if(!r.scale.isBlank()){var o=i.getModel("splitLine"),a=o.getModel("lineStyle"),s=a.get("color");s=s instanceof Array?s:[s];for(var l=a.get("width"),c=i.coordinateSystem.getRect(),u=r.isHorizontal(),h=[],d=0,p=r.getTicksCoords({tickModel:o}),f=[],g=[],m=0;m<p.length;++m){var v=r.toGlobalCoord(p[m].coord);u?(f[0]=v,f[1]=c.y,g[0]=v,g[1]=c.y+c.height):(f[0]=c.x,f[1]=v,g[0]=c.x+c.width,g[1]=v);var y=new Fc({shape:{x1:f[0],y1:f[1],x2:g[0],y2:g[1]},silent:!0});ku(y.shape,l);var b=d++%s.length;h[b]=h[b]||[],h[b].push(y)}var x=a.getLineStyle(["color"]);for(m=0;m<h.length;++m)e.add(Su(h[m],{style:E({stroke:s[m%s.length]},x),silent:!0}))}},splitArea:function(t,e,n,i){ek(t,n,i,i)}},qN=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.prototype.getCoordSysModel=function(){return this},e.type="singleAxis",e.layoutMode="box",e.defaultOption={left:"5%",top:"5%",right:"5%",bottom:"5%",type:"value",position:"bottom",orient:"horizontal",axisLine:{show:!0,lineStyle:{width:1,type:"solid"}},tooltip:{show:!0},axisTick:{show:!0,length:6,lineStyle:{width:1}},axisLabel:{show:!0,interval:"auto"},splitLine:{show:!0,lineStyle:{type:"dashed",opacity:.2}}},e}(Sd);P(qN,lx.prototype);var UN=function(t){function e(e,n,i,r,o){var a=t.call(this,e,n,i)||this;return a.type=r||"value",a.position=o||"bottom",a}return n(e,t),e.prototype.isHorizontal=function(){var t=this.position;return"top"===t||"bottom"===t},e.prototype.pointToData=function(t,e){return this.coordinateSystem.pointToData(t)[0]},e}(zx),$N=["single"],ZN=function(){function t(t,e,n){this.type="single",this.dimension="single",this.dimensions=$N,this.axisPointerEnabled=!0,this.model=t,this._init(t,e,n)}return t.prototype._init=function(t,e,n){var i=this.dimension,r=new UN(i,ex(t),[0,0],t.get("type"),t.get("position")),o="category"===r.type;r.onBand=o&&t.get("boundaryGap"),r.inverse=t.get("inverse"),r.orient=t.get("orient"),t.axis=r,r.model=t,r.coordinateSystem=this,this._axis=r},t.prototype.update=function(t,e){t.eachSeries((function(t){if(t.coordinateSystem===this){var e=t.getData();R(e.mapDimensionsAll(this.dimension),(function(t){this._axis.scale.unionExtentFromData(e,t)}),this),tx(this._axis.scale,this._axis.model)}}),this)},t.prototype.resize=function(t,e){this._rect=md({left:t.get("left"),top:t.get("top"),right:t.get("right"),bottom:t.get("bottom"),width:t.get("width"),height:t.get("height")},{width:e.getWidth(),height:e.getHeight()}),this._adjustAxis()},t.prototype.getRect=function(){return this._rect},t.prototype._adjustAxis=function(){var t=this._rect,e=this._axis,n=e.isHorizontal(),i=n?[0,t.width]:[0,t.height],r=e.inverse?1:0;e.setExtent(i[r],i[1-r]),this._updateAxisTransform(e,n?t.x:t.y)},t.prototype._updateAxisTransform=function(t,e){var n=t.getExtent(),i=n[0]+n[1],r=t.isHorizontal();t.toGlobalCoord=r?function(t){return t+e}:function(t){return i-t+e},t.toLocalCoord=r?function(t){return t-e}:function(t){return i-t+e}},t.prototype.getAxis=function(){return this._axis},t.prototype.getBaseAxis=function(){return this._axis},t.prototype.getAxes=function(){return[this._axis]},t.prototype.getTooltipAxes=function(){return{baseAxes:[this.getAxis()],otherAxes:[]}},t.prototype.containPoint=function(t){var e=this.getRect(),n=this.getAxis();return"horizontal"===n.orient?n.contain(n.toLocalCoord(t[0]))&&t[1]>=e.y&&t[1]<=e.y+e.height:n.contain(n.toLocalCoord(t[1]))&&t[0]>=e.y&&t[0]<=e.y+e.height},t.prototype.pointToData=function(t){var e=this.getAxis();return[e.coordToData(e.toLocalCoord(t["horizontal"===e.orient?0:1]))]},t.prototype.dataToPoint=function(t){var e=this.getAxis(),n=this.getRect(),i=[],r="horizontal"===e.orient?0:1;return t instanceof Array&&(t=t[0]),i[r]=e.toGlobalCoord(e.dataToCoord(+t)),i[1-r]=0===r?n.y+n.height/2:n.x+n.width/2,i},t.prototype.convertToPixel=function(t,e,n){return KN(e)===this?this.dataToPoint(n):null},t.prototype.convertFromPixel=function(t,e,n){return KN(e)===this?this.pointToData(n):null},t}();function KN(t){var e=t.seriesModel,n=t.singleAxisModel;return n&&n.coordinateSystem||e&&e.coordinateSystem}var QN={create:function(t,e){var n=[];return t.eachComponent("singleAxis",(function(i,r){var o=new ZN(i,t,e);o.name="single_"+r,o.resize(i,e),i.coordinateSystem=o,n.push(o)})),t.eachSeries((function(t){if("singleAxis"===t.get("coordinateSystem")){var e=t.getReferringComponents("singleAxis",Lo).models[0];t.coordinateSystem=e&&e.coordinateSystem}})),n},dimensions:$N},JN=["x","y"],tR=["width","height"],eR=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.makeElOption=function(t,e,n,i,r){var o=n.axis,a=o.coordinateSystem,s=rR(a,1-iR(o)),l=a.dataToPoint(e)[0],c=i.get("type");if(c&&"none"!==c){var u=RP(i),h=nR[c](o,l,s);h.style=u,t.graphicKey=h.type,t.pointer=h}VP(e,t,WN(n),n,i,r)},e.prototype.getHandleTransform=function(t,e,n){var i=WN(e,{labelInside:!1});i.labelMargin=n.get(["handle","margin"]);var r=FP(e.axis,t,i);return{x:r[0],y:r[1],rotation:i.rotation+(i.labelDirection<0?Math.PI:0)}},e.prototype.updateHandleTransform=function(t,e,n,i){var r=n.axis,o=r.coordinateSystem,a=iR(r),s=rR(o,a),l=[t.x,t.y];l[a]+=e[a],l[a]=Math.min(s[1],l[a]),l[a]=Math.max(s[0],l[a]);var c=rR(o,1-a),u=(c[1]+c[0])/2,h=[u,u];return h[a]=l[a],{x:l[0],y:l[1],rotation:t.rotation,cursorPoint:h,tooltipOption:{verticalAlign:"middle"}}},e}(EP),nR={line:function(t,e,n){return{type:"Line",subPixelOptimize:!0,shape:HP([e,n[0]],[e,n[1]],iR(t))}},shadow:function(t,e,n){var i=t.getBandWidth(),r=n[1]-n[0];return{type:"Rect",shape:WP([e-i/2,n[0]],[i,r],iR(t))}}};function iR(t){return t.isHorizontal()?0:1}function rR(t,e){var n=t.getRect();return[n[JN[e]],n[JN[e]]+n[tR[e]]]}var oR=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.type="single",e}(hg),aR=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.prototype.init=function(e,n,i){var r=xd(e);t.prototype.init.apply(this,arguments),sR(e,r)},e.prototype.mergeOption=function(e){t.prototype.mergeOption.apply(this,arguments),sR(this.option,e)},e.prototype.getCellSize=function(){return this.option.cellSize},e.type="calendar",e.defaultOption={z:2,left:80,top:60,cellSize:20,orient:"horizontal",splitLine:{show:!0,lineStyle:{color:"#000",width:1,type:"solid"}},itemStyle:{color:"#fff",borderWidth:1,borderColor:"#ccc"},dayLabel:{show:!0,firstDay:0,position:"start",margin:"50%",color:"#000"},monthLabel:{show:!0,position:"start",margin:5,align:"center",formatter:null,color:"#000"},yearLabel:{show:!0,position:null,margin:30,formatter:null,color:"#ccc",fontFamily:"sans-serif",fontWeight:"bolder",fontSize:20}},e}(Sd);function sR(t,e){var n,i=t.cellSize;1===(n=Y(i)?i:t.cellSize=[i,i]).length&&(n[1]=n[0]);var r=B([0,1],(function(t){return function(t,e){return null!=t[pd[e][0]]||null!=t[pd[e][1]]&&null!=t[pd[e][2]]}(e,t)&&(n[t]="auto"),null!=n[t]&&"auto"!==n[t]}));bd(t,e,{type:"box",ignoreSize:r})}var lR=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.prototype.render=function(t,e,n){var i=this.group;i.removeAll();var r=t.coordinateSystem,o=r.getRangeInfo(),a=r.getOrient(),s=e.getLocaleModel();this._renderDayRect(t,o,i),this._renderLines(t,o,a,i),this._renderYearText(t,o,a,i),this._renderMonthText(t,s,a,i),this._renderWeekText(t,s,o,a,i)},e.prototype._renderDayRect=function(t,e,n){for(var i=t.coordinateSystem,r=t.getModel("itemStyle").getItemStyle(),o=i.getCellWidth(),a=i.getCellHeight(),s=e.start.time;s<=e.end.time;s=i.getNextNDay(s,1).time){var l=i.dataToRect([s],!1).tl,c=new Ls({shape:{x:l[0],y:l[1],width:o,height:a},cursor:"default",style:r});n.add(c)}},e.prototype._renderLines=function(t,e,n,i){var r=this,o=t.coordinateSystem,a=t.getModel(["splitLine","lineStyle"]).getLineStyle(),s=t.get(["splitLine","show"]),l=a.lineWidth;this._tlpoints=[],this._blpoints=[],this._firstDayOfMonth=[],this._firstDayPoints=[];for(var c=e.start,u=0;c.time<=e.end.time;u++){d(c.formatedDate),0===u&&(c=o.getDateInfo(e.start.y+"-"+e.start.m));var h=c.date;h.setMonth(h.getMonth()+1),c=o.getDateInfo(h)}function d(e){r._firstDayOfMonth.push(o.getDateInfo(e)),r._firstDayPoints.push(o.dataToRect([e],!1).tl);var l=r._getLinePointsOfOneWeek(t,e,n);r._tlpoints.push(l[0]),r._blpoints.push(l[l.length-1]),s&&r._drawSplitline(l,a,i)}d(o.getNextNDay(e.end.time,1).formatedDate),s&&this._drawSplitline(r._getEdgesPoints(r._tlpoints,l,n),a,i),s&&this._drawSplitline(r._getEdgesPoints(r._blpoints,l,n),a,i)},e.prototype._getEdgesPoints=function(t,e,n){var i=[t[0].slice(),t[t.length-1].slice()],r="horizontal"===n?0:1;return i[0][r]=i[0][r]-e/2,i[1][r]=i[1][r]+e/2,i},e.prototype._drawSplitline=function(t,e,n){var i=new Rc({z2:20,shape:{points:t},style:e});n.add(i)},e.prototype._getLinePointsOfOneWeek=function(t,e,n){for(var i=t.coordinateSystem,r=i.getDateInfo(e),o=[],a=0;a<7;a++){var s=i.getNextNDay(r.time,a),l=i.dataToRect([s.time],!1);o[2*s.day]=l.tl,o[2*s.day+1]=l["horizontal"===n?"bl":"tr"]}return o},e.prototype._formatterLabel=function(t,e){return G(t)&&t?(n=t,R(e,(function(t,e){n=n.replace("{"+e+"}",t)})),n):X(t)?t(e):e.nameMap;var n},e.prototype._yearTextPositionControl=function(t,e,n,i,r){var o=e[0],a=e[1],s=["center","bottom"];"bottom"===i?(a+=r,s=["center","top"]):"left"===i?o-=r:"right"===i?(o+=r,s=["center","top"]):a-=r;var l=0;return"left"!==i&&"right"!==i||(l=Math.PI/2),{rotation:l,x:o,y:a,style:{align:s[0],verticalAlign:s[1]}}},e.prototype._renderYearText=function(t,e,n,i){var r=t.getModel("yearLabel");if(r.get("show")){var o=r.get("margin"),a=r.get("position");a||(a="horizontal"!==n?"top":"left");var s=[this._tlpoints[this._tlpoints.length-1],this._blpoints[0]],l=(s[0][0]+s[1][0])/2,c=(s[0][1]+s[1][1])/2,u="horizontal"===n?0:1,h={top:[l,s[u][1]],bottom:[l,s[1-u][1]],left:[s[1-u][0],c],right:[s[u][0],c]},d=e.start.y;+e.end.y>+e.start.y&&(d=d+"-"+e.end.y);var p=r.get("formatter"),f={start:e.start.y,end:e.end.y,nameMap:d},g=this._formatterLabel(p,f),m=new Rs({z2:30,style:qu(r,{text:g})});m.attr(this._yearTextPositionControl(m,h[a],n,a,o)),i.add(m)}},e.prototype._monthTextPositionControl=function(t,e,n,i,r){var o="left",a="top",s=t[0],l=t[1];return"horizontal"===n?(l+=r,e&&(o="center"),"start"===i&&(a="bottom")):(s+=r,e&&(a="middle"),"start"===i&&(o="right")),{x:s,y:l,align:o,verticalAlign:a}},e.prototype._renderMonthText=function(t,e,n,i){var r=t.getModel("monthLabel");if(r.get("show")){var o=r.get("nameMap"),a=r.get("margin"),s=r.get("position"),l=r.get("align"),c=[this._tlpoints,this._blpoints];o&&!G(o)||(o&&(e=Ah(o)||e),o=e.get(["time","monthAbbr"])||[]);var u="start"===s?0:1,h="horizontal"===n?0:1;a="start"===s?-a:a;for(var d="center"===l,p=0;p<c[u].length-1;p++){var f=c[u][p].slice(),g=this._firstDayOfMonth[p];if(d){var m=this._firstDayPoints[p];f[h]=(m[h]+c[0][p+1][h])/2}var v=r.get("formatter"),y=o[+g.m-1],b={yyyy:g.y,yy:(g.y+"").slice(2),MM:g.m,M:+g.m,nameMap:y},x=this._formatterLabel(v,b),_=new Rs({z2:30,style:I(qu(r,{text:x}),this._monthTextPositionControl(f,d,n,s,a))});i.add(_)}}},e.prototype._weekTextPositionControl=function(t,e,n,i,r){var o="center",a="middle",s=t[0],l=t[1],c="start"===n;return"horizontal"===e?(s=s+i+(c?1:-1)*r[0]/2,o=c?"right":"left"):(l=l+i+(c?1:-1)*r[1]/2,a=c?"bottom":"top"),{x:s,y:l,align:o,verticalAlign:a}},e.prototype._renderWeekText=function(t,e,n,i,r){var o=t.getModel("dayLabel");if(o.get("show")){var a=t.coordinateSystem,s=o.get("position"),l=o.get("nameMap"),c=o.get("margin"),u=a.getFirstDayOfWeek();l&&!G(l)||(l&&(e=Ah(l)||e),l=e.get(["time","dayOfWeekShort"])||B(e.get(["time","dayOfWeekAbbr"]),(function(t){return t[0]})));var h=a.getNextNDay(n.end.time,7-n.lweek).time,d=[a.getCellWidth(),a.getCellHeight()];c=jr(c,Math.min(d[1],d[0])),"start"===s&&(h=a.getNextNDay(n.start.time,-(7+n.fweek)).time,c=-c);for(var p=0;p<7;p++){var f,g=a.getNextNDay(h,p),m=a.dataToRect([g.time],!1).center;f=Math.abs((p+u)%7);var v=new Rs({z2:30,style:I(qu(o,{text:l[f]}),this._weekTextPositionControl(m,i,s,c,d))});r.add(v)}}},e.type="calendar",e}(hg),cR=864e5,uR=function(){function t(e,n,i){this.type="calendar",this.dimensions=t.dimensions,this.getDimensionsInfo=t.getDimensionsInfo,this._model=e}return t.getDimensionsInfo=function(){return[{name:"time",type:"time"},"value"]},t.prototype.getRangeInfo=function(){return this._rangeInfo},t.prototype.getModel=function(){return this._model},t.prototype.getRect=function(){return this._rect},t.prototype.getCellWidth=function(){return this._sw},t.prototype.getCellHeight=function(){return this._sh},t.prototype.getOrient=function(){return this._orient},t.prototype.getFirstDayOfWeek=function(){return this._firstDayOfWeek},t.prototype.getDateInfo=function(t){var e=(t=eo(t)).getFullYear(),n=t.getMonth()+1,i=n<10?"0"+n:""+n,r=t.getDate(),o=r<10?"0"+r:""+r,a=t.getDay();return{y:e+"",m:i,d:o,day:a=Math.abs((a+7-this.getFirstDayOfWeek())%7),time:t.getTime(),formatedDate:e+"-"+i+"-"+o,date:t}},t.prototype.getNextNDay=function(t,e){return 0===(e=e||0)||(t=new Date(this.getDateInfo(t).time)).setDate(t.getDate()+e),this.getDateInfo(t)},t.prototype.update=function(t,e){this._firstDayOfWeek=+this._model.getModel("dayLabel").get("firstDay"),this._orient=this._model.get("orient"),this._lineWidth=this._model.getModel("itemStyle").getItemStyle().lineWidth||0,this._rangeInfo=this._getRangeInfo(this._initRangeOption());var n=this._rangeInfo.weeks||1,i=["width","height"],r=this._model.getCellSize().slice(),o=this._model.getBoxLayoutParams(),a="horizontal"===this._orient?[n,7]:[7,n];R([0,1],(function(t){c(r,t)&&(o[i[t]]=r[t]*a[t])}));var s={width:e.getWidth(),height:e.getHeight()},l=this._rect=md(o,s);function c(t,e){return null!=t[e]&&"auto"!==t[e]}R([0,1],(function(t){c(r,t)||(r[t]=l[i[t]]/a[t])})),this._sw=r[0],this._sh=r[1]},t.prototype.dataToPoint=function(t,e){Y(t)&&(t=t[0]),null==e&&(e=!0);var n=this.getDateInfo(t),i=this._rangeInfo,r=n.formatedDate;if(e&&!(n.time>=i.start.time&&n.time<i.end.time+cR))return[NaN,NaN];var o=n.day,a=this._getRangeInfo([i.start.time,r]).nthWeek;return"vertical"===this._orient?[this._rect.x+o*this._sw+this._sw/2,this._rect.y+a*this._sh+this._sh/2]:[this._rect.x+a*this._sw+this._sw/2,this._rect.y+o*this._sh+this._sh/2]},t.prototype.pointToData=function(t){var e=this.pointToDate(t);return e&&e.time},t.prototype.dataToRect=function(t,e){var n=this.dataToPoint(t,e);return{contentShape:{x:n[0]-(this._sw-this._lineWidth)/2,y:n[1]-(this._sh-this._lineWidth)/2,width:this._sw-this._lineWidth,height:this._sh-this._lineWidth},center:n,tl:[n[0]-this._sw/2,n[1]-this._sh/2],tr:[n[0]+this._sw/2,n[1]-this._sh/2],br:[n[0]+this._sw/2,n[1]+this._sh/2],bl:[n[0]-this._sw/2,n[1]+this._sh/2]}},t.prototype.pointToDate=function(t){var e=Math.floor((t[0]-this._rect.x)/this._sw)+1,n=Math.floor((t[1]-this._rect.y)/this._sh)+1,i=this._rangeInfo.range;return"vertical"===this._orient?this._getDateByWeeksAndDay(n,e-1,i):this._getDateByWeeksAndDay(e,n-1,i)},t.prototype.convertToPixel=function(t,e,n){var i=hR(e);return i===this?i.dataToPoint(n):null},t.prototype.convertFromPixel=function(t,e,n){var i=hR(e);return i===this?i.pointToData(n):null},t.prototype.containPoint=function(t){return console.warn("Not implemented."),!1},t.prototype._initRangeOption=function(){var t,e=this._model.get("range");if(Y(e)&&1===e.length&&(e=e[0]),Y(e))t=e;else{var n=e.toString();if(/^\d{4}$/.test(n)&&(t=[n+"-01-01",n+"-12-31"]),/^\d{4}[\/|-]\d{1,2}$/.test(n)){var i=this.getDateInfo(n),r=i.date;r.setMonth(r.getMonth()+1);var o=this.getNextNDay(r,-1);t=[i.formatedDate,o.formatedDate]}/^\d{4}[\/|-]\d{1,2}[\/|-]\d{1,2}$/.test(n)&&(t=[n,n])}if(!t)return e;var a=this._getRangeInfo(t);return a.start.time>a.end.time&&t.reverse(),t},t.prototype._getRangeInfo=function(t){var e,n=[this.getDateInfo(t[0]),this.getDateInfo(t[1])];n[0].time>n[1].time&&(e=!0,n.reverse());var i=Math.floor(n[1].time/cR)-Math.floor(n[0].time/cR)+1,r=new Date(n[0].time),o=r.getDate(),a=n[1].date.getDate();r.setDate(o+i-1);var s=r.getDate();if(s!==a)for(var l=r.getTime()-n[1].time>0?1:-1;(s=r.getDate())!==a&&(r.getTime()-n[1].time)*l>0;)i-=l,r.setDate(s-l);var c=Math.floor((i+n[0].day+6)/7),u=e?1-c:c-1;return e&&n.reverse(),{range:[n[0].formatedDate,n[1].formatedDate],start:n[0],end:n[1],allDay:i,weeks:c,nthWeek:u,fweek:n[0].day,lweek:n[1].day}},t.prototype._getDateByWeeksAndDay=function(t,e,n){var i=this._getRangeInfo(n);if(t>i.weeks||0===t&&e<i.fweek||t===i.weeks&&e>i.lweek)return null;var r=7*(t-1)-i.fweek+e,o=new Date(i.start.time);return o.setDate(+i.start.d+r),this.getDateInfo(o)},t.create=function(e,n){var i=[];return e.eachComponent("calendar",(function(r){var o=new t(r,e,n);i.push(o),r.coordinateSystem=o})),e.eachSeries((function(t){"calendar"===t.get("coordinateSystem")&&(t.coordinateSystem=i[t.get("calendarIndex")||0])})),i},t.dimensions=["time","value"],t}();function hR(t){var e=t.calendarModel,n=t.seriesModel;return e?e.coordinateSystem:n?n.coordinateSystem:null}function dR(t,e){var n;return R(e,(function(e){null!=t[e]&&"auto"!==t[e]&&(n=!0)})),n}var pR=["transition","enterFrom","leaveTo"],fR=pR.concat(["enterAnimation","updateAnimation","leaveAnimation"]);function gR(t,e,n){if(n&&(!t[n]&&e[n]&&(t[n]={}),t=t[n],e=e[n]),t&&e)for(var i=n?pR:fR,r=0;r<i.length;r++){var o=i[r];null==t[o]&&null!=e[o]&&(t[o]=e[o])}}var mR=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.preventAutoZ=!0,n}return n(e,t),e.prototype.mergeOption=function(e,n){var i=this.option.elements;this.option.elements=null,t.prototype.mergeOption.call(this,e,n),this.option.elements=i},e.prototype.optionUpdated=function(t,e){var n=this.option,i=(e?n:t).elements,r=n.elements=e?[]:n.elements,o=[];this._flatten(i,o,null);var a=wo(r,o,"normalMerge"),s=this._elOptionsToUpdate=[];R(a,(function(t,e){var n=t.newOption;n&&(s.push(n),function(t,e){var n=t.existing;if(e.id=t.keyInfo.id,!e.type&&n&&(e.type=n.type),null==e.parentId){var i=e.parentOption;i?e.parentId=i.id:n&&(e.parentId=n.parentId)}e.parentOption=null}(t,n),function(t,e,n){var i=I({},n),r=t[e],o=n.$action||"merge";"merge"===o?r?(M(r,i,!0),bd(r,i,{ignoreSize:!0}),_d(n,r),gR(n,r),gR(n,r,"shape"),gR(n,r,"style"),gR(n,r,"extra"),n.clipPath=r.clipPath):t[e]=i:"replace"===o?t[e]=i:"remove"===o&&r&&(t[e]=null)}(r,e,n),function(t,e){if(t&&(t.hv=e.hv=[dR(e,["left","right"]),dR(e,["top","bottom"])],"group"===t.type)){var n=t,i=e;null==n.width&&(n.width=i.width=0),null==n.height&&(n.height=i.height=0)}}(r[e],n))}),this),n.elements=F(r,(function(t){return t&&delete t.$action,null!=t}))},e.prototype._flatten=function(t,e,n){R(t,(function(t){if(t){n&&(t.parentOption=n),e.push(t);var i=t.children;i&&i.length&&this._flatten(i,e,t),delete t.children}}),this)},e.prototype.useElOptionsToUpdate=function(){var t=this._elOptionsToUpdate;return this._elOptionsToUpdate=null,t},e.type="graphic",e.defaultOption={elements:[]},e}(Sd),vR={path:null,compoundPath:null,group:Dr,image:As,text:Rs},yR=Io(),bR=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.prototype.init=function(){this._elMap=mt()},e.prototype.render=function(t,e,n){t!==this._lastGraphicModel&&this._clear(),this._lastGraphicModel=t,this._updateElements(t),this._relocate(t,n)},e.prototype._updateElements=function(t){var e=t.useElOptionsToUpdate();if(e){var n=this._elMap,i=this.group,r=t.get("z"),o=t.get("zlevel");R(e,(function(e){var a=ko(e.id,null),s=null!=a?n.get(a):null,l=ko(e.parentId,null),c=null!=l?n.get(l):i,u=e.type,h=e.style;"text"===u&&h&&e.hv&&e.hv[1]&&(h.textVerticalAlign=h.textBaseline=h.verticalAlign=h.align=null);var d=e.textContent,p=e.textConfig;if(h&&ML(h,u,!!p,!!d)){var f=TL(h,u,!0);!p&&f.textConfig&&(p=e.textConfig=f.textConfig),!d&&f.textContent&&(d=f.textContent)}var g=function(t){return t=I({},t),R(["id","parentId","$action","hv","bounding","textContent","clipPath"].concat(dd),(function(e){delete t[e]})),t}(e),m=e.$action||"merge",v="merge"===m,y="replace"===m;if(v){var b=s;(A=!s)?b=_R(a,c,e.type,n):(b&&(yR(b).isNew=!1),$L(b)),b&&(BL(b,g,t,{isInit:A}),SR(b,e,r,o))}else if(y){wR(s,e,n,t);var x=_R(a,c,e.type,n);x&&(BL(x,g,t,{isInit:!0}),SR(x,e,r,o))}else"remove"===m&&(zL(s,e),wR(s,e,n,t));var _=n.get(a);if(_&&d)if(v){var w=_.getTextContent();w?w.attr(d):_.setTextContent(new Rs(d))}else y&&_.setTextContent(new Rs(d));if(_){var S=e.clipPath;if(S){var C=S.type,k=void 0,A=!1;if(v){var M=_.getClipPath();k=(A=!M||yR(M).type!==C)?xR(C):M}else y&&(A=!0,k=xR(C));_.setClipPath(k),BL(k,S,t,{isInit:A}),ZL(k,S.keyframeAnimation,t)}var T=yR(_);_.setTextConfig(p),T.option=e,function(t,e,n){var i=$s(t).eventData;t.silent||t.ignore||i||(i=$s(t).eventData={componentType:"graphic",componentIndex:e.componentIndex,name:t.name}),i&&(i.info=n.info)}(_,t,e),zu({el:_,componentModel:t,itemName:_.name,itemTooltipOption:e.tooltip}),ZL(_,e.keyframeAnimation,t)}}))}},e.prototype._relocate=function(t,e){for(var n=t.option.elements,i=this.group,r=this._elMap,o=e.getWidth(),a=e.getHeight(),s=["x","y"],l=0;l<n.length;l++)if((f=null!=(p=ko((d=n[l]).id,null))?r.get(p):null)&&f.isGroup){var c=(g=f.parent)===i,u=yR(f),h=yR(g);u.width=jr(u.option.width,c?o:h.width)||0,u.height=jr(u.option.height,c?a:h.height)||0}for(l=n.length-1;l>=0;l--){var d,p,f;if(f=null!=(p=ko((d=n[l]).id,null))?r.get(p):null){var g=f.parent,m=(h=yR(g),{}),v=vd(f,d,g===i?{width:o,height:a}:{width:h.width,height:h.height},null,{hv:d.hv,boundingMode:d.bounding},m);if(!yR(f).isNew&&v){for(var y=d.transition,b={},x=0;x<s.length;x++){var _=s[x],w=m[_];y&&(VL(y)||D(y,_)>=0)?b[_]=w:f[_]=w}au(f,b,t,0)}else f.attr(m)}}},e.prototype._clear=function(){var t=this,e=this._elMap;e.each((function(n){wR(n,yR(n).option,e,t._lastGraphicModel)})),this._elMap=mt()},e.prototype.dispose=function(){this._clear()},e.type="graphic",e}(hg);function xR(t){var e=new(xt(vR,t)?vR[t]:bu(t))({});return yR(e).type=t,e}function _R(t,e,n,i){var r=xR(n);return e.add(r),i.set(t,r),yR(r).id=t,yR(r).isNew=!0,r}function wR(t,e,n,i){t&&t.parent&&("group"===t.type&&t.traverse((function(t){wR(t,e,n,i)})),FL(t,e,i),n.removeKey(yR(t).id))}function SR(t,e,n,i){t.isGroup||R([["cursor",ba.prototype.cursor],["zlevel",i||0],["z",n||0],["z2",0]],(function(n){var i=n[0];xt(e,i)?t[i]=rt(e[i],n[1]):null==t[i]&&(t[i]=n[1])})),R(H(e),(function(n){if(0===n.indexOf("on")){var i=e[n];t[n]=X(i)?i:null}})),xt(e,"draggable")&&(t.draggable=e.draggable),null!=e.name&&(t.name=e.name),null!=e.id&&(t.id=e.id)}var CR=["x","y","radius","angle","single"],kR=["cartesian2d","polar","singleAxis"];function AR(t){return t+"Axis"}function MR(t){var e=t.ecModel,n={infoList:[],infoMap:mt()};return t.eachTargetAxis((function(t,i){var r=e.getComponent(AR(t),i);if(r){var o=r.getCoordSysModel();if(o){var a=o.uid,s=n.infoMap.get(a);s||(s={model:o,axisModels:[]},n.infoList.push(s),n.infoMap.set(a,s)),s.axisModels.push(r)}}})),n}var TR=function(){function t(){this.indexList=[],this.indexMap=[]}return t.prototype.add=function(t){this.indexMap[t]||(this.indexList.push(t),this.indexMap[t]=!0)},t}(),IR=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n._autoThrottle=!0,n._noTarget=!0,n._rangePropMode=["percent","percent"],n}return n(e,t),e.prototype.init=function(t,e,n){var i=ER(t);this.settledOption=i,this.mergeDefaultAndTheme(t,n),this._doInit(i)},e.prototype.mergeOption=function(t){var e=ER(t);M(this.option,t,!0),M(this.settledOption,e,!0),this._doInit(e)},e.prototype._doInit=function(t){var e=this.option;this._setDefaultThrottle(t),this._updateRangeUse(t);var n=this.settledOption;R([["start","startValue"],["end","endValue"]],(function(t,i){"value"===this._rangePropMode[i]&&(e[t[0]]=n[t[0]]=null)}),this),this._resetTarget()},e.prototype._resetTarget=function(){var t=this.get("orient",!0),e=this._targetAxisInfoMap=mt();this._fillSpecifiedTargetAxis(e)?this._orient=t||this._makeAutoOrientByTargetAxis():(this._orient=t||"horizontal",this._fillAutoTargetAxisByOrient(e,this._orient)),this._noTarget=!0,e.each((function(t){t.indexList.length&&(this._noTarget=!1)}),this)},e.prototype._fillSpecifiedTargetAxis=function(t){var e=!1;return R(CR,(function(n){var i=this.getReferringComponents(AR(n),Po);if(i.specified){e=!0;var r=new TR;R(i.models,(function(t){r.add(t.componentIndex)})),t.set(n,r)}}),this),e},e.prototype._fillAutoTargetAxisByOrient=function(t,e){var n=this.ecModel,i=!0;if(i){var r="vertical"===e?"y":"x";o(n.findComponents({mainType:r+"Axis"}),r)}function o(e,n){var r=e[0];if(r){var o=new TR;if(o.add(r.componentIndex),t.set(n,o),i=!1,"x"===n||"y"===n){var a=r.getReferringComponents("grid",Lo).models[0];a&&R(e,(function(t){r.componentIndex!==t.componentIndex&&a===t.getReferringComponents("grid",Lo).models[0]&&o.add(t.componentIndex)}))}}}i&&o(n.findComponents({mainType:"singleAxis",filter:function(t){return t.get("orient",!0)===e}}),"single"),i&&R(CR,(function(e){if(i){var r=n.findComponents({mainType:AR(e),filter:function(t){return"category"===t.get("type",!0)}});if(r[0]){var o=new TR;o.add(r[0].componentIndex),t.set(e,o),i=!1}}}),this)},e.prototype._makeAutoOrientByTargetAxis=function(){var t;return this.eachTargetAxis((function(e){!t&&(t=e)}),this),"y"===t?"vertical":"horizontal"},e.prototype._setDefaultThrottle=function(t){if(t.hasOwnProperty("throttle")&&(this._autoThrottle=!1),this._autoThrottle){var e=this.ecModel.option;this.option.throttle=e.animation&&e.animationDurationUpdate>0?100:20}},e.prototype._updateRangeUse=function(t){var e=this._rangePropMode,n=this.get("rangeMode");R([["start","startValue"],["end","endValue"]],(function(i,r){var o=null!=t[i[0]],a=null!=t[i[1]];o&&!a?e[r]="percent":!o&&a?e[r]="value":n?e[r]=n[r]:o&&(e[r]="percent")}))},e.prototype.noTarget=function(){return this._noTarget},e.prototype.getFirstTargetAxisModel=function(){var t;return this.eachTargetAxis((function(e,n){null==t&&(t=this.ecModel.getComponent(AR(e),n))}),this),t},e.prototype.eachTargetAxis=function(t,e){this._targetAxisInfoMap.each((function(n,i){R(n.indexList,(function(n){t.call(e,i,n)}))}))},e.prototype.getAxisProxy=function(t,e){var n=this.getAxisModel(t,e);if(n)return n.__dzAxisProxy},e.prototype.getAxisModel=function(t,e){var n=this._targetAxisInfoMap.get(t);if(n&&n.indexMap[e])return this.ecModel.getComponent(AR(t),e)},e.prototype.setRawRange=function(t){var e=this.option,n=this.settledOption;R([["start","startValue"],["end","endValue"]],(function(i){null==t[i[0]]&&null==t[i[1]]||(e[i[0]]=n[i[0]]=t[i[0]],e[i[1]]=n[i[1]]=t[i[1]])}),this),this._updateRangeUse(t)},e.prototype.setCalculatedRange=function(t){var e=this.option;R(["start","startValue","end","endValue"],(function(n){e[n]=t[n]}))},e.prototype.getPercentRange=function(){var t=this.findRepresentativeAxisProxy();if(t)return t.getDataPercentWindow()},e.prototype.getValueRange=function(t,e){if(null!=t||null!=e)return this.getAxisProxy(t,e).getDataValueWindow();var n=this.findRepresentativeAxisProxy();return n?n.getDataValueWindow():void 0},e.prototype.findRepresentativeAxisProxy=function(t){if(t)return t.__dzAxisProxy;for(var e,n=this._targetAxisInfoMap.keys(),i=0;i<n.length;i++)for(var r=n[i],o=this._targetAxisInfoMap.get(r),a=0;a<o.indexList.length;a++){var s=this.getAxisProxy(r,o.indexList[a]);if(s.hostedBy(this))return s;e||(e=s)}return e},e.prototype.getRangePropMode=function(){return this._rangePropMode.slice()},e.prototype.getOrient=function(){return this._orient},e.type="dataZoom",e.dependencies=["xAxis","yAxis","radiusAxis","angleAxis","singleAxis","series","toolbox"],e.defaultOption={z:4,filterMode:"filter",start:0,end:100},e}(Sd);function ER(t){var e={};return R(["start","end","startValue","endValue","throttle"],(function(n){t.hasOwnProperty(n)&&(e[n]=t[n])})),e}var OR=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.type="dataZoom.select",e}(IR),DR=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.prototype.render=function(t,e,n,i){this.dataZoomModel=t,this.ecModel=e,this.api=n},e.type="dataZoom",e}(hg),LR=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.type="dataZoom.select",e}(DR),PR=R,NR=Xr,RR=function(){function t(t,e,n,i){this._dimName=t,this._axisIndex=e,this.ecModel=i,this._dataZoomModel=n}return t.prototype.hostedBy=function(t){return this._dataZoomModel===t},t.prototype.getDataValueWindow=function(){return this._valueWindow.slice()},t.prototype.getDataPercentWindow=function(){return this._percentWindow.slice()},t.prototype.getTargetSeriesModels=function(){var t=[];return this.ecModel.eachSeries((function(e){if(function(t){var e=t.get("coordinateSystem");return D(kR,e)>=0}(e)){var n=AR(this._dimName),i=e.getReferringComponents(n,Lo).models[0];i&&this._axisIndex===i.componentIndex&&t.push(e)}}),this),t},t.prototype.getAxisModel=function(){return this.ecModel.getComponent(this._dimName+"Axis",this._axisIndex)},t.prototype.getMinMaxSpan=function(){return A(this._minMaxSpan)},t.prototype.calculateDataWindow=function(t){var e,n=this._dataExtent,i=this.getAxisModel().axis.scale,r=this._dataZoomModel.getRangePropMode(),o=[0,100],a=[],s=[];PR(["start","end"],(function(l,c){var u=t[l],h=t[l+"Value"];"percent"===r[c]?(null==u&&(u=o[c]),h=i.parse(Wr(u,o,n))):(e=!0,u=Wr(h=null==h?n[c]:i.parse(h),n,o)),s[c]=null==h||isNaN(h)?n[c]:h,a[c]=null==u||isNaN(u)?o[c]:u})),NR(s),NR(a);var l=this._minMaxSpan;function c(t,e,n,r,o){var a=o?"Span":"ValueSpan";sE(0,t,n,"all",l["min"+a],l["max"+a]);for(var s=0;s<2;s++)e[s]=Wr(t[s],n,r,!0),o&&(e[s]=i.parse(e[s]))}return e?c(s,a,n,o,!1):c(a,s,o,n,!0),{valueWindow:s,percentWindow:a}},t.prototype.reset=function(t){if(t===this._dataZoomModel){var e=this.getTargetSeriesModels();this._dataExtent=function(t,e,n){var i=[1/0,-1/0];PR(n,(function(t){!function(t,e,n){e&&R(sx(e,n),(function(n){var i=e.getApproximateExtent(n);i[0]<t[0]&&(t[0]=i[0]),i[1]>t[1]&&(t[1]=i[1])}))}(i,t.getData(),e)}));var r=t.getAxisModel(),o=Kb(r.axis.scale,r,i).calculate();return[o.min,o.max]}(this,this._dimName,e),this._updateMinMaxSpan();var n=this.calculateDataWindow(t.settledOption);this._valueWindow=n.valueWindow,this._percentWindow=n.percentWindow,this._setAxisModel()}},t.prototype.filterData=function(t,e){if(t===this._dataZoomModel){var n=this._dimName,i=this.getTargetSeriesModels(),r=t.get("filterMode"),o=this._valueWindow;"none"!==r&&PR(i,(function(t){var e=t.getData(),i=e.mapDimensionsAll(n);if(i.length){if("weakFilter"===r){var a=e.getStore(),s=B(i,(function(t){return e.getDimensionIndex(t)}),e);e.filterSelf((function(t){for(var e,n,r,l=0;l<i.length;l++){var c=a.get(s[l],t),u=!isNaN(c),h=c<o[0],d=c>o[1];if(u&&!h&&!d)return!0;u&&(r=!0),h&&(e=!0),d&&(n=!0)}return r&&e&&n}))}else PR(i,(function(n){if("empty"===r)t.setData(e=e.map(n,(function(t){return function(t){return t>=o[0]&&t<=o[1]}(t)?t:NaN})));else{var i={};i[n]=o,e.selectRange(i)}}));PR(i,(function(t){e.setApproximateExtent(o,t)}))}}))}},t.prototype._updateMinMaxSpan=function(){var t=this._minMaxSpan={},e=this._dataZoomModel,n=this._dataExtent;PR(["min","max"],(function(i){var r=e.get(i+"Span"),o=e.get(i+"ValueSpan");null!=o&&(o=this.getAxisModel().axis.scale.parse(o)),null!=o?r=Wr(n[0]+o,n,[0,100],!0):null!=r&&(o=Wr(r,[0,100],n,!0)-n[0]),t[i+"Span"]=r,t[i+"ValueSpan"]=o}),this)},t.prototype._setAxisModel=function(){var t=this.getAxisModel(),e=this._percentWindow,n=this._valueWindow;if(e){var i=Ur(n,[0,500]);i=Math.min(i,20);var r=t.axis.scale.rawExtentInfo;0!==e[0]&&r.setDeterminedMinMax("min",+n[0].toFixed(i)),100!==e[1]&&r.setDeterminedMinMax("max",+n[1].toFixed(i)),r.freeze()}},t}(),BR={getTargetSeries:function(t){function e(e){t.eachComponent("dataZoom",(function(n){n.eachTargetAxis((function(i,r){var o=t.getComponent(AR(i),r);e(i,r,o,n)}))}))}e((function(t,e,n,i){n.__dzAxisProxy=null}));var n=[];e((function(e,i,r,o){r.__dzAxisProxy||(r.__dzAxisProxy=new RR(e,i,o,t),n.push(r.__dzAxisProxy))}));var i=mt();return R(n,(function(t){R(t.getTargetSeriesModels(),(function(t){i.set(t.uid,t)}))})),i},overallReset:function(t,e){t.eachComponent("dataZoom",(function(t){t.eachTargetAxis((function(e,n){t.getAxisProxy(e,n).reset(t)})),t.eachTargetAxis((function(n,i){t.getAxisProxy(n,i).filterData(t,e)}))})),t.eachComponent("dataZoom",(function(t){var e=t.findRepresentativeAxisProxy();if(e){var n=e.getDataPercentWindow(),i=e.getDataValueWindow();t.setCalculatedRange({start:n[0],end:n[1],startValue:i[0],endValue:i[1]})}}))}},zR=!1;function FR(t){zR||(zR=!0,t.registerProcessor(t.PRIORITY.PROCESSOR.FILTER,BR),function(t){t.registerAction("dataZoom",(function(t,e){R(function(t,e){var n,i=mt(),r=[],o=mt();t.eachComponent({mainType:"dataZoom",query:e},(function(t){o.get(t.uid)||s(t)}));do{n=!1,t.eachComponent("dataZoom",a)}while(n);function a(t){!o.get(t.uid)&&function(t){var e=!1;return t.eachTargetAxis((function(t,n){var r=i.get(t);r&&r[n]&&(e=!0)})),e}(t)&&(s(t),n=!0)}function s(t){o.set(t.uid,!0),r.push(t),t.eachTargetAxis((function(t,e){(i.get(t)||i.set(t,[]))[e]=!0}))}return r}(e,t),(function(e){e.setRawRange({start:t.start,end:t.end,startValue:t.startValue,endValue:t.endValue})}))}))}(t),t.registerSubTypeDefaulter("dataZoom",(function(){return"slider"})))}function VR(t){t.registerComponentModel(OR),t.registerComponentView(LR),FR(t)}var HR=function(){},WR={};function jR(t,e){WR[t]=e}function YR(t){return WR[t]}var XR=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.prototype.optionUpdated=function(){t.prototype.optionUpdated.apply(this,arguments);var e=this.ecModel;R(this.option.feature,(function(t,n){var i=YR(n);i&&(i.getDefaultOption&&(i.defaultOption=i.getDefaultOption(e)),M(t,i.defaultOption))}))},e.type="toolbox",e.layoutMode={type:"box",ignoreSize:!0},e.defaultOption={show:!0,z:6,orient:"horizontal",left:"right",top:"top",backgroundColor:"transparent",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemSize:15,itemGap:8,showTitle:!0,iconStyle:{borderColor:"#666",color:"none"},emphasis:{iconStyle:{borderColor:"#3E98C5"}},tooltip:{show:!1,position:"bottom"}},e}(Sd);function GR(t,e){var n=id(e.get("padding")),i=e.getItemStyle(["color","opacity"]);return i.fill=e.get("backgroundColor"),new Ls({shape:{x:t.x-n[3],y:t.y-n[0],width:t.width+n[1]+n[3],height:t.height+n[0]+n[2],r:e.get("borderRadius")},style:i,silent:!0,z2:-1})}var qR=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.render=function(t,e,n,i){var r=this.group;if(r.removeAll(),t.get("show")){var o=+t.get("itemSize"),a="vertical"===t.get("orient"),s=t.get("feature")||{},l=this._features||(this._features={}),c=[];R(s,(function(t,e){c.push(e)})),new Sy(this._featureNames||[],c).add(u).update(u).remove(j(u,null)).execute(),this._featureNames=c,function(t,e,n){var i=e.getBoxLayoutParams(),r=e.get("padding"),o={width:n.getWidth(),height:n.getHeight()},a=md(i,o,r);gd(e.get("orient"),t,e.get("itemGap"),a.width,a.height),vd(t,i,o,r)}(r,t,n),r.add(GR(r.getBoundingRect(),t)),a||r.eachChild((function(t){var e=t.__title,i=t.ensureState("emphasis"),a=i.textConfig||(i.textConfig={}),s=t.getTextContent(),l=s&&s.ensureState("emphasis");if(l&&!X(l)&&e){var c=l.style||(l.style={}),u=mr(e,Rs.makeFont(c)),h=t.x+r.x,d=!1;t.y+r.y+o+u.height>n.getHeight()&&(a.position="top",d=!0);var p=d?-5-u.height:o+10;h+u.width/2>n.getWidth()?(a.position=["100%",p],c.align="right"):h-u.width/2<0&&(a.position=[0,p],c.align="left")}}))}function u(u,h){var d,p=c[u],f=c[h],g=s[p],m=new gh(g,t,t.ecModel);if(i&&null!=i.newTitle&&i.featureName===p&&(g.title=i.newTitle),p&&!f){if(function(t){return 0===t.indexOf("my")}(p))d={onclick:m.option.onclick,featureName:p};else{var v=YR(p);if(!v)return;d=new v}l[p]=d}else if(!(d=l[f]))return;d.uid=vh("toolbox-feature"),d.model=m,d.ecModel=e,d.api=n;var y=d instanceof HR;p||!f?!m.get("show")||y&&d.unusable?y&&d.remove&&d.remove(e,n):(function(i,s,l){var c,u,h=i.getModel("iconStyle"),d=i.getModel(["emphasis","iconStyle"]),p=s instanceof HR&&s.getIcons?s.getIcons():i.get("icon"),f=i.get("title")||{};G(p)?(c={})[l]=p:c=p,G(f)?(u={})[l]=f:u=f;var g=i.iconPaths={};R(c,(function(l,c){var p=Pu(l,{},{x:-o/2,y:-o/2,width:o,height:o});p.setStyle(h.getItemStyle()),p.ensureState("emphasis").style=d.getItemStyle();var f=new Rs({style:{text:u[c],align:d.get("textAlign"),borderRadius:d.get("textBorderRadius"),padding:d.get("textPadding"),fill:null,font:Ju({fontStyle:d.get("textFontStyle"),fontFamily:d.get("textFontFamily"),fontSize:d.get("textFontSize"),fontWeight:d.get("textFontWeight")},e)},ignore:!0});p.setTextContent(f),zu({el:p,componentModel:t,itemName:c,formatterParamsExtra:{title:u[c]}}),p.__title=u[c],p.on("mouseover",(function(){var e=d.getItemStyle(),i=a?null==t.get("right")&&"right"!==t.get("left")?"right":"left":null==t.get("bottom")&&"bottom"!==t.get("top")?"bottom":"top";f.setStyle({fill:d.get("textFill")||e.fill||e.stroke||"#000",backgroundColor:d.get("textBackgroundColor")}),p.setTextConfig({position:d.get("textPosition")||i}),f.ignore=!t.get("showTitle"),n.enterEmphasis(this)})).on("mouseout",(function(){"emphasis"!==i.get(["iconStatus",c])&&n.leaveEmphasis(this),f.hide()})),("emphasis"===i.get(["iconStatus",c])?Sl:Cl)(p),r.add(p),p.on("click",W(s.onclick,s,e,n,c)),g[c]=p}))}(m,d,p),m.setIconStatus=function(t,e){var n=this.option,i=this.iconPaths;n.iconStatus=n.iconStatus||{},n.iconStatus[t]=e,i[t]&&("emphasis"===e?Sl:Cl)(i[t])},d instanceof HR&&d.render&&d.render(m,e,n,i)):y&&d.dispose&&d.dispose(e,n)}},e.prototype.updateView=function(t,e,n,i){R(this._features,(function(t){t instanceof HR&&t.updateView&&t.updateView(t.model,e,n,i)}))},e.prototype.remove=function(t,e){R(this._features,(function(n){n instanceof HR&&n.remove&&n.remove(t,e)})),this.group.removeAll()},e.prototype.dispose=function(t,e){R(this._features,(function(n){n instanceof HR&&n.dispose&&n.dispose(t,e)}))},e.type="toolbox",e}(hg),UR=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.onclick=function(t,e){var n=this.model,i=n.get("name")||t.get("title.0.text")||"echarts",o="svg"===e.getZr().painter.getType(),a=o?"svg":n.get("type",!0)||"png",s=e.getConnectedDataURL({type:a,backgroundColor:n.get("backgroundColor",!0)||t.get("backgroundColor")||"#fff",connectedBackgroundColor:n.get("connectedBackgroundColor"),excludeComponents:n.get("excludeComponents"),pixelRatio:n.get("pixelRatio")}),l=r.browser;if(X(MouseEvent)&&(l.newEdge||!l.ie&&!l.edge)){var c=document.createElement("a");c.download=i+"."+a,c.target="_blank",c.href=s;var u=new MouseEvent("click",{view:document.defaultView,bubbles:!0,cancelable:!1});c.dispatchEvent(u)}else if(window.navigator.msSaveOrOpenBlob||o){var h=s.split(","),d=h[0].indexOf("base64")>-1,p=o?decodeURIComponent(h[1]):h[1];d&&(p=window.atob(p));var f=i+"."+a;if(window.navigator.msSaveOrOpenBlob){for(var g=p.length,m=new Uint8Array(g);g--;)m[g]=p.charCodeAt(g);var v=new Blob([m]);window.navigator.msSaveOrOpenBlob(v,f)}else{var y=document.createElement("iframe");document.body.appendChild(y);var b=y.contentWindow,x=b.document;x.open("image/svg+xml","replace"),x.write(p),x.close(),b.focus(),x.execCommand("SaveAs",!0,f),document.body.removeChild(y)}}else{var _=n.get("lang"),w='<body style="margin:0;"><img src="'+s+'" style="max-width:100%;" title="'+(_&&_[0]||"")+'" /></body>',S=window.open();S.document.write(w),S.document.title=i}},e.getDefaultOption=function(t){return{show:!0,icon:"M4.7,22.9L29.3,45.5L54.7,23.4M4.6,43.6L4.6,58L53.8,58L53.8,43.6M29.2,45.1L29.2,0",title:t.getLocaleModel().get(["toolbox","saveAsImage","title"]),type:"png",connectedBackgroundColor:"#fff",name:"",excludeComponents:["toolbox"],lang:t.getLocaleModel().get(["toolbox","saveAsImage","lang"])}},e}(HR),$R="__ec_magicType_stack__",ZR=[["line","bar"],["stack"]],KR=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.getIcons=function(){var t=this.model,e=t.get("icon"),n={};return R(t.get("type"),(function(t){e[t]&&(n[t]=e[t])})),n},e.getDefaultOption=function(t){return{show:!0,type:[],icon:{line:"M4.1,28.9h7.1l9.3-22l7.4,38l9.7-19.7l3,12.8h14.9M4.1,58h51.4",bar:"M6.7,22.9h10V48h-10V22.9zM24.9,13h10v35h-10V13zM43.2,2h10v46h-10V2zM3.1,58h53.7",stack:"M8.2,38.4l-8.4,4.1l30.6,15.3L60,42.5l-8.1-4.1l-21.5,11L8.2,38.4z M51.9,30l-8.1,4.2l-13.4,6.9l-13.9-6.9L8.2,30l-8.4,4.2l8.4,4.2l22.2,11l21.5-11l8.1-4.2L51.9,30z M51.9,21.7l-8.1,4.2L35.7,30l-5.3,2.8L24.9,30l-8.4-4.1l-8.3-4.2l-8.4,4.2L8.2,30l8.3,4.2l13.9,6.9l13.4-6.9l8.1-4.2l8.1-4.1L51.9,21.7zM30.4,2.2L-0.2,17.5l8.4,4.1l8.3,4.2l8.4,4.2l5.5,2.7l5.3-2.7l8.1-4.2l8.1-4.2l8.1-4.1L30.4,2.2z"},title:t.getLocaleModel().get(["toolbox","magicType","title"]),option:{},seriesIndex:{}}},e.prototype.onclick=function(t,e,n){var i=this.model,r=i.get(["seriesIndex",n]);if(QR[n]){var o,a={series:[]};R(ZR,(function(t){D(t,n)>=0&&R(t,(function(t){i.setIconStatus(t,"normal")}))})),i.setIconStatus(n,"emphasis"),t.eachComponent({mainType:"series",query:null==r?null:{seriesIndex:r}},(function(t){var e=t.subType,r=t.id,o=QR[n](e,r,t,i);o&&(E(o,t.option),a.series.push(o));var s=t.coordinateSystem;if(s&&"cartesian2d"===s.type&&("line"===n||"bar"===n)){var l=s.getAxesByScale("ordinal")[0];if(l){var c=l.dim+"Axis",u=t.getReferringComponents(c,Lo).models[0].componentIndex;a[c]=a[c]||[];for(var h=0;h<=u;h++)a[c][u]=a[c][u]||{};a[c][u].boundaryGap="bar"===n}}}));var s=n;"stack"===n&&(o=M({stack:i.option.title.tiled,tiled:i.option.title.stack},i.option.title),"emphasis"!==i.get(["iconStatus",n])&&(s="tiled")),e.dispatchAction({type:"changeMagicType",currentType:s,newOption:a,newTitle:o,featureName:"magicType"})}},e}(HR),QR={line:function(t,e,n,i){if("bar"===t)return M({id:e,type:"line",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},i.get(["option","line"])||{},!0)},bar:function(t,e,n,i){if("line"===t)return M({id:e,type:"bar",data:n.get("data"),stack:n.get("stack"),markPoint:n.get("markPoint"),markLine:n.get("markLine")},i.get(["option","bar"])||{},!0)},stack:function(t,e,n,i){var r=n.get("stack")===$R;if("line"===t||"bar"===t)return i.setIconStatus("stack",r?"normal":"emphasis"),M({id:e,stack:r?"":$R},i.get(["option","stack"])||{},!0)}};cy({type:"changeMagicType",event:"magicTypeChanged",update:"prepareAndUpdate"},(function(t,e){e.mergeOption(t.newOption)}));var JR=new Array(60).join("-"),tB="\t";function eB(t){return t.replace(/^\s\s*/,"").replace(/\s\s*$/,"")}var nB=new RegExp("[\t]+","g");var iB=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.onclick=function(t,e){setTimeout((function(){e.dispatchAction({type:"hideTip"})}));var n=e.getDom(),i=this.model;this._dom&&n.removeChild(this._dom);var r=document.createElement("div");r.style.cssText="position:absolute;top:0;bottom:0;left:0;right:0;padding:5px",r.style.backgroundColor=i.get("backgroundColor")||"#fff";var o=document.createElement("h4"),a=i.get("lang")||[];o.innerHTML=a[0]||i.get("title"),o.style.cssText="margin:10px 20px",o.style.color=i.get("textColor");var s=document.createElement("div"),l=document.createElement("textarea");s.style.cssText="overflow:auto";var c=i.get("optionToContent"),u=i.get("contentToOption"),h=function(t){var e,n,i,r=function(t){var e={},n=[],i=[];return t.eachRawSeries((function(t){var r=t.coordinateSystem;if(!r||"cartesian2d"!==r.type&&"polar"!==r.type)n.push(t);else{var o=r.getBaseAxis();if("category"===o.type){var a=o.dim+"_"+o.index;e[a]||(e[a]={categoryAxis:o,valueAxis:r.getOtherAxis(o),series:[]},i.push({axisDim:o.dim,axisIndex:o.index})),e[a].series.push(t)}else n.push(t)}})),{seriesGroupByCategoryAxis:e,other:n,meta:i}}(t);return{value:F([(n=r.seriesGroupByCategoryAxis,i=[],R(n,(function(t,e){var n=t.categoryAxis,r=t.valueAxis.dim,o=[" "].concat(B(t.series,(function(t){return t.name}))),a=[n.model.getCategories()];R(t.series,(function(t){var e=t.getRawData();a.push(t.getRawData().mapArray(e.mapDimension(r),(function(t){return t})))}));for(var s=[o.join(tB)],l=0;l<a[0].length;l++){for(var c=[],u=0;u<a.length;u++)c.push(a[u][l]);s.push(c.join(tB))}i.push(s.join("\n"))})),i.join("\n\n"+JR+"\n\n")),(e=r.other,B(e,(function(t){var e=t.getRawData(),n=[t.name],i=[];return e.each(e.dimensions,(function(){for(var t=arguments.length,r=arguments[t-1],o=e.getName(r),a=0;a<t-1;a++)i[a]=arguments[a];n.push((o?o+tB:"")+i.join(tB))})),n.join("\n")})).join("\n\n"+JR+"\n\n"))],(function(t){return!!t.replace(/[\n\t\s]/g,"")})).join("\n\n"+JR+"\n\n"),meta:r.meta}}(t);if(X(c)){var d=c(e.getOption());G(d)?s.innerHTML=d:Q(d)&&s.appendChild(d)}else{l.readOnly=i.get("readOnly");var p=l.style;p.cssText="display:block;width:100%;height:100%;font-family:monospace;font-size:14px;line-height:1.6rem;resize:none;box-sizing:border-box;outline:none",p.color=i.get("textColor"),p.borderColor=i.get("textareaBorderColor"),p.backgroundColor=i.get("textareaColor"),l.value=h.value,s.appendChild(l)}var f=h.meta,g=document.createElement("div");g.style.cssText="position:absolute;bottom:5px;left:0;right:0";var m="float:right;margin-right:20px;border:none;cursor:pointer;padding:2px 5px;font-size:12px;border-radius:3px",v=document.createElement("div"),y=document.createElement("div");m+=";background-color:"+i.get("buttonColor"),m+=";color:"+i.get("buttonTextColor");var b=this;function x(){n.removeChild(r),b._dom=null}de(v,"click",x),de(y,"click",(function(){if(null==u&&null!=c||null!=u&&null==c)x();else{var t;try{t=X(u)?u(s,e.getOption()):function(t,e){var n=t.split(new RegExp("\n*"+JR+"\n*","g")),i={series:[]};return R(n,(function(t,n){if(function(t){if(t.slice(0,t.indexOf("\n")).indexOf(tB)>=0)return!0}(t)){var r=function(t){for(var e=t.split(/\n+/g),n=[],i=B(eB(e.shift()).split(nB),(function(t){return{name:t,data:[]}})),r=0;r<e.length;r++){var o=eB(e[r]).split(nB);n.push(o.shift());for(var a=0;a<o.length;a++)i[a]&&(i[a].data[r]=o[a])}return{series:i,categories:n}}(t),o=e[n],a=o.axisDim+"Axis";o&&(i[a]=i[a]||[],i[a][o.axisIndex]={data:r.categories},i.series=i.series.concat(r.series))}else r=function(t){for(var e=t.split(/\n+/g),n=eB(e.shift()),i=[],r=0;r<e.length;r++){var o=eB(e[r]);if(o){var a=o.split(nB),s="",l=void 0,c=!1;isNaN(a[0])?(c=!0,s=a[0],a=a.slice(1),i[r]={name:s,value:[]},l=i[r].value):l=i[r]=[];for(var u=0;u<a.length;u++)l.push(+a[u]);1===l.length&&(c?i[r].value=l[0]:i[r]=l[0])}}return{name:n,data:i}}(t),i.series.push(r)})),i}(l.value,f)}catch(t){throw x(),new Error("Data view format error "+t)}t&&e.dispatchAction({type:"changeDataView",newOption:t}),x()}})),v.innerHTML=a[1],y.innerHTML=a[2],y.style.cssText=v.style.cssText=m,!i.get("readOnly")&&g.appendChild(y),g.appendChild(v),r.appendChild(o),r.appendChild(s),r.appendChild(g),s.style.height=n.clientHeight-80+"px",n.appendChild(r),this._dom=r},e.prototype.remove=function(t,e){this._dom&&e.getDom().removeChild(this._dom)},e.prototype.dispose=function(t,e){this.remove(t,e)},e.getDefaultOption=function(t){return{show:!0,readOnly:!1,optionToContent:null,contentToOption:null,icon:"M17.5,17.3H33 M17.5,17.3H33 M45.4,29.5h-28 M11.5,2v56H51V14.8L38.4,2H11.5z M38.4,2.2v12.7H51 M45.4,41.7h-28",title:t.getLocaleModel().get(["toolbox","dataView","title"]),lang:t.getLocaleModel().get(["toolbox","dataView","lang"]),backgroundColor:"#fff",textColor:"#000",textareaColor:"#fff",textareaBorderColor:"#333",buttonColor:"#c23531",buttonTextColor:"#fff"}},e}(HR);function rB(t,e){return B(t,(function(t,n){var i=e&&e[n];if($(i)&&!Y(i)){$(t)&&!Y(t)||(t={value:t});var r=null!=i.name&&null==t.name;return t=E(t,i),r&&delete t.name,t}return t}))}cy({type:"changeDataView",event:"dataViewChanged",update:"prepareAndUpdate"},(function(t,e){var n=[];R(t.newOption.series,(function(t){var i=e.getSeriesByName(t.name)[0];if(i){var r=i.get("data");n.push({name:t.name,data:rB(t.data,r)})}else n.push(I({type:"scatter"},t))})),e.mergeOption(E({series:n},t.newOption))}));var oB=R,aB=Io();function sB(t){var e=aB(t);return e.snapshots||(e.snapshots=[{}]),e.snapshots}var lB=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.onclick=function(t,e){!function(t){aB(t).snapshots=null}(t),e.dispatchAction({type:"restore",from:this.uid})},e.getDefaultOption=function(t){return{show:!0,icon:"M3.8,33.4 M47,18.9h9.8V8.7 M56.3,20.1 C52.1,9,40.5,0.6,26.8,2.1C12.6,3.7,1.6,16.2,2.1,30.6 M13,41.1H3.1v10.2 M3.7,39.9c4.2,11.1,15.8,19.5,29.5,18 c14.2-1.6,25.2-14.1,24.7-28.5",title:t.getLocaleModel().get(["toolbox","restore","title"])}},e}(HR);cy({type:"restore",event:"restore",update:"prepareAndUpdate"},(function(t,e){e.resetOption("recreate")}));var cB=["grid","xAxis","yAxis","geo","graph","polar","radiusAxis","angleAxis","bmap"],uB=function(){function t(t,e,n){var i=this;this._targetInfoList=[];var r=dB(e,t);R(pB,(function(t,e){(!n||!n.include||D(n.include,e)>=0)&&t(r,i._targetInfoList)}))}return t.prototype.setOutputRanges=function(t,e){return this.matchOutputRanges(t,e,(function(t,e,n){if((t.coordRanges||(t.coordRanges=[])).push(e),!t.coordRange){t.coordRange=e;var i=mB[t.brushType](0,n,e);t.__rangeOffset={offset:yB[t.brushType](i.values,t.range,[1,1]),xyMinMax:i.xyMinMax}}})),t},t.prototype.matchOutputRanges=function(t,e,n){R(t,(function(t){var i=this.findTargetInfo(t,e);i&&!0!==i&&R(i.coordSyses,(function(i){var r=mB[t.brushType](1,i,t.range,!0);n(t,r.values,i,e)}))}),this)},t.prototype.setInputRanges=function(t,e){R(t,(function(t){var n,i,r,o,a,s=this.findTargetInfo(t,e);if(t.range=t.range||[],s&&!0!==s){t.panelId=s.panelId;var l=mB[t.brushType](0,s.coordSys,t.coordRange),c=t.__rangeOffset;t.range=c?yB[t.brushType](l.values,c.offset,(n=l.xyMinMax,i=c.xyMinMax,r=xB(n),o=xB(i),a=[r[0]/o[0],r[1]/o[1]],isNaN(a[0])&&(a[0]=1),isNaN(a[1])&&(a[1]=1),a)):l.values}}),this)},t.prototype.makePanelOpts=function(t,e){return B(this._targetInfoList,(function(n){var i=n.getPanelRect();return{panelId:n.panelId,defaultBrushType:e?e(n):null,clipPath:cO(i),isTargetByCursor:hO(i,t,n.coordSysModel),getLinearBrushOtherExtent:uO(i)}}))},t.prototype.controlSeries=function(t,e,n){var i=this.findTargetInfo(t,n);return!0===i||i&&D(i.coordSyses,e.coordinateSystem)>=0},t.prototype.findTargetInfo=function(t,e){for(var n=this._targetInfoList,i=dB(e,t),r=0;r<n.length;r++){var o=n[r],a=t.panelId;if(a){if(o.panelId===a)return o}else for(var s=0;s<fB.length;s++)if(fB[s](i,o))return o}return!0},t}();function hB(t){return t[0]>t[1]&&t.reverse(),t}function dB(t,e){return Oo(t,e,{includeMainTypes:cB})}var pB={grid:function(t,e){var n=t.xAxisModels,i=t.yAxisModels,r=t.gridModels,o=mt(),a={},s={};(n||i||r)&&(R(n,(function(t){var e=t.axis.grid.model;o.set(e.id,e),a[e.id]=!0})),R(i,(function(t){var e=t.axis.grid.model;o.set(e.id,e),s[e.id]=!0})),R(r,(function(t){o.set(t.id,t),a[t.id]=!0,s[t.id]=!0})),o.each((function(t){var r=t.coordinateSystem,o=[];R(r.getCartesians(),(function(t,e){(D(n,t.getAxis("x").model)>=0||D(i,t.getAxis("y").model)>=0)&&o.push(t)})),e.push({panelId:"grid--"+t.id,gridModel:t,coordSysModel:t,coordSys:o[0],coordSyses:o,getPanelRect:gB.grid,xAxisDeclared:a[t.id],yAxisDeclared:s[t.id]})})))},geo:function(t,e){R(t.geoModels,(function(t){var n=t.coordinateSystem;e.push({panelId:"geo--"+t.id,geoModel:t,coordSysModel:t,coordSys:n,coordSyses:[n],getPanelRect:gB.geo})}))}},fB=[function(t,e){var n=t.xAxisModel,i=t.yAxisModel,r=t.gridModel;return!r&&n&&(r=n.axis.grid.model),!r&&i&&(r=i.axis.grid.model),r&&r===e.gridModel},function(t,e){var n=t.geoModel;return n&&n===e.geoModel}],gB={grid:function(){return this.coordSys.master.getRect().clone()},geo:function(){var t=this.coordSys,e=t.getBoundingRect().clone();return e.applyTransform(Mu(t)),e}},mB={lineX:j(vB,0),lineY:j(vB,1),rect:function(t,e,n,i){var r=t?e.pointToData([n[0][0],n[1][0]],i):e.dataToPoint([n[0][0],n[1][0]],i),o=t?e.pointToData([n[0][1],n[1][1]],i):e.dataToPoint([n[0][1],n[1][1]],i),a=[hB([r[0],o[0]]),hB([r[1],o[1]])];return{values:a,xyMinMax:a}},polygon:function(t,e,n,i){var r=[[1/0,-1/0],[1/0,-1/0]];return{values:B(n,(function(n){var o=t?e.pointToData(n,i):e.dataToPoint(n,i);return r[0][0]=Math.min(r[0][0],o[0]),r[1][0]=Math.min(r[1][0],o[1]),r[0][1]=Math.max(r[0][1],o[0]),r[1][1]=Math.max(r[1][1],o[1]),o})),xyMinMax:r}}};function vB(t,e,n,i){var r=n.getAxis(["x","y"][t]),o=hB(B([0,1],(function(t){return e?r.coordToData(r.toLocalCoord(i[t]),!0):r.toGlobalCoord(r.dataToCoord(i[t]))}))),a=[];return a[t]=o,a[1-t]=[NaN,NaN],{values:o,xyMinMax:a}}var yB={lineX:j(bB,0),lineY:j(bB,1),rect:function(t,e,n){return[[t[0][0]-n[0]*e[0][0],t[0][1]-n[0]*e[0][1]],[t[1][0]-n[1]*e[1][0],t[1][1]-n[1]*e[1][1]]]},polygon:function(t,e,n){return B(t,(function(t,i){return[t[0]-n[0]*e[i][0],t[1]-n[1]*e[i][1]]}))}};function bB(t,e,n,i){return[e[0]-i[t]*n[0],e[1]-i[t]*n[1]]}function xB(t){return t?[t[0][1]-t[0][0],t[1][1]-t[1][0]]:[NaN,NaN]}var _B,wB,SB=R,CB=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.render=function(t,e,n,i){this._brushController||(this._brushController=new DE(n.getZr()),this._brushController.on("brush",W(this._onBrush,this)).mount()),function(t,e,n,i,r){var o=n._isZoomActive;i&&"takeGlobalCursor"===i.type&&(o="dataZoomSelect"===i.key&&i.dataZoomSelectActive),n._isZoomActive=o,t.setIconStatus("zoom",o?"emphasis":"normal");var a=new uB(AB(t),e,{include:["grid"]}).makePanelOpts(r,(function(t){return t.xAxisDeclared&&!t.yAxisDeclared?"lineX":!t.xAxisDeclared&&t.yAxisDeclared?"lineY":"rect"}));n._brushController.setPanels(a).enableBrush(!(!o||!a.length)&&{brushType:"auto",brushStyle:t.getModel("brushStyle").getItemStyle()})}(t,e,this,i,n),function(t,e){t.setIconStatus("back",function(t){return sB(t).length}(e)>1?"emphasis":"normal")}(t,e)},e.prototype.onclick=function(t,e,n){kB[n].call(this)},e.prototype.remove=function(t,e){this._brushController&&this._brushController.unmount()},e.prototype.dispose=function(t,e){this._brushController&&this._brushController.dispose()},e.prototype._onBrush=function(t){var e=t.areas;if(t.isEnd&&e.length){var n={},i=this.ecModel;this._brushController.updateCovers([]),new uB(AB(this.model),i,{include:["grid"]}).matchOutputRanges(e,i,(function(t,e,n){if("cartesian2d"===n.type){var i=t.brushType;"rect"===i?(r("x",n,e[0]),r("y",n,e[1])):r({lineX:"x",lineY:"y"}[i],n,e)}})),function(t,e){var n=sB(t);oB(e,(function(e,i){for(var r=n.length-1;r>=0&&!n[r][i];r--);if(r<0){var o=t.queryComponents({mainType:"dataZoom",subType:"select",id:i})[0];if(o){var a=o.getPercentRange();n[0][i]={dataZoomId:i,start:a[0],end:a[1]}}}})),n.push(e)}(i,n),this._dispatchZoomAction(n)}function r(t,e,r){var o=e.getAxis(t),a=o.model,s=function(t,e,n){var i;return n.eachComponent({mainType:"dataZoom",subType:"select"},(function(n){n.getAxisModel(t,e.componentIndex)&&(i=n)})),i}(t,a,i),l=s.findRepresentativeAxisProxy(a).getMinMaxSpan();null==l.minValueSpan&&null==l.maxValueSpan||(r=sE(0,r.slice(),o.scale.getExtent(),0,l.minValueSpan,l.maxValueSpan)),s&&(n[s.id]={dataZoomId:s.id,startValue:r[0],endValue:r[1]})}},e.prototype._dispatchZoomAction=function(t){var e=[];SB(t,(function(t,n){e.push(A(t))})),e.length&&this.api.dispatchAction({type:"dataZoom",from:this.uid,batch:e})},e.getDefaultOption=function(t){return{show:!0,filterMode:"filter",icon:{zoom:"M0,13.5h26.9 M13.5,26.9V0 M32.1,13.5H58V58H13.5 V32.1",back:"M22,1.4L9.9,13.5l12.3,12.3 M10.3,13.5H54.9v44.6 H10.3v-26"},title:t.getLocaleModel().get(["toolbox","dataZoom","title"]),brushStyle:{borderWidth:0,color:"rgba(210,219,238,0.2)"}}},e}(HR),kB={zoom:function(){var t=!this._isZoomActive;this.api.dispatchAction({type:"takeGlobalCursor",key:"dataZoomSelect",dataZoomSelectActive:t})},back:function(){this._dispatchZoomAction(function(t){var e=sB(t),n=e[e.length-1];e.length>1&&e.pop();var i={};return oB(n,(function(t,n){for(var r=e.length-1;r>=0;r--)if(t=e[r][n]){i[n]=t;break}})),i}(this.ecModel))}};function AB(t){var e={xAxisIndex:t.get("xAxisIndex",!0),yAxisIndex:t.get("yAxisIndex",!0),xAxisId:t.get("xAxisId",!0),yAxisId:t.get("yAxisId",!0)};return null==e.xAxisIndex&&null==e.xAxisId&&(e.xAxisIndex="all"),null==e.yAxisIndex&&null==e.yAxisId&&(e.yAxisIndex="all"),e}_B="dataZoom",wB=function(t){var e=t.getComponent("toolbox",0),n=["feature","dataZoom"];if(e&&null!=e.get(n)){var i=e.getModel(n),r=[],o=Oo(t,AB(i));return SB(o.xAxisModels,(function(t){return a(t,"xAxis","xAxisIndex")})),SB(o.yAxisModels,(function(t){return a(t,"yAxis","yAxisIndex")})),r}function a(t,e,n){var o=t.componentIndex,a={type:"select",$fromToolbox:!0,filterMode:i.get("filterMode",!0)||"filter",id:"\0_ec_\0toolbox-dataZoom_"+e+o};a[n]=o,r.push(a)}},lt(null==Xd.get(_B)&&wB),Xd.set(_B,wB);var MB=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.type="tooltip",e.dependencies=["axisPointer"],e.defaultOption={z:60,show:!0,showContent:!0,trigger:"item",triggerOn:"mousemove|click",alwaysShowContent:!1,displayMode:"single",renderMode:"auto",confine:null,showDelay:0,hideDelay:100,transitionDuration:.4,enterable:!1,backgroundColor:"#fff",shadowBlur:10,shadowColor:"rgba(0, 0, 0, .2)",shadowOffsetX:1,shadowOffsetY:2,borderRadius:4,borderWidth:1,padding:null,extraCssText:"",axisPointer:{type:"line",axis:"auto",animation:"auto",animationDurationUpdate:200,animationEasingUpdate:"exponentialOut",crossStyle:{color:"#999",width:1,type:"dashed",textStyle:{}}},textStyle:{color:"#666",fontSize:14}},e}(Sd);function TB(t){var e=t.get("confine");return null!=e?!!e:"richText"===t.get("renderMode")}function IB(t){if(r.domSupported)for(var e=document.documentElement.style,n=0,i=t.length;n<i;n++)if(t[n]in e)return t[n]}var EB=IB(["transform","webkitTransform","OTransform","MozTransform","msTransform"]);function OB(t,e){if(!t)return e;e=nd(e,!0);var n=t.indexOf(e);return(t=-1===n?e:"-"+t.slice(0,n)+"-"+e).toLowerCase()}var DB=OB(IB(["webkitTransition","transition","OTransition","MozTransition","msTransition"]),"transition"),LB=OB(EB,"transform"),PB="position:absolute;display:block;border-style:solid;white-space:nowrap;z-index:9999999;"+(r.transform3dSupported?"will-change:transform;":"");function NB(t,e,n){var i=t.toFixed(0)+"px",o=e.toFixed(0)+"px";if(!r.transformSupported)return n?"top:"+o+";left:"+i+";":[["top",o],["left",i]];var a=r.transform3dSupported,s="translate"+(a?"3d":"")+"("+i+","+o+(a?",0":"")+")";return n?"top:0;left:0;"+LB+":"+s+";":[["top",0],["left",0],[EB,s]]}function RB(t,e,n){var i=[],o=t.get("transitionDuration"),a=t.get("backgroundColor"),s=t.get("shadowBlur"),l=t.get("shadowColor"),c=t.get("shadowOffsetX"),u=t.get("shadowOffsetY"),h=t.getModel("textStyle"),d=Kf(t,"html"),p=c+"px "+u+"px "+s+"px "+l;return i.push("box-shadow:"+p),e&&o&&i.push(function(t,e){var n="cubic-bezier(0.23,1,0.32,1)",i=" "+t/2+"s "+n,o="opacity"+i+",visibility"+i;return e||(i=" "+t+"s "+n,o+=r.transformSupported?","+LB+i:",left"+i+",top"+i),DB+":"+o}(o,n)),a&&i.push("background-color:"+a),R(["width","color","radius"],(function(e){var n="border-"+e,r=nd(n),o=t.get(r);null!=o&&i.push(n+":"+o+("color"===e?"":"px"))})),i.push(function(t){var e=[],n=t.get("fontSize"),i=t.getTextColor();i&&e.push("color:"+i),e.push("font:"+t.getFont()),n&&e.push("line-height:"+Math.round(3*n/2)+"px");var r=t.get("textShadowColor"),o=t.get("textShadowBlur")||0,a=t.get("textShadowOffsetX")||0,s=t.get("textShadowOffsetY")||0;return r&&o&&e.push("text-shadow:"+a+"px "+s+"px "+o+"px "+r),R(["decoration","align"],(function(n){var i=t.get(n);i&&e.push("text-"+n+":"+i)})),e.join(";")}(h)),null!=d&&i.push("padding:"+id(d).join("px ")+"px"),i.join(";")+";"}function BB(t,e,n,i,r){var o=e&&e.painter;if(n){var a=o&&o.getViewportRoot();a&&function(t,e,n,i,r){te(Jt,e,i,r,!0)&&te(t,n,Jt[0],Jt[1])}(t,a,n,i,r)}else{t[0]=i,t[1]=r;var s=o&&o.getViewportRootOffset();s&&(t[0]+=s.offsetLeft,t[1]+=s.offsetTop)}t[2]=t[0]/e.getWidth(),t[3]=t[1]/e.getHeight()}var zB=function(){function t(t,e){if(this._show=!1,this._styleCoord=[0,0,0,0],this._enterable=!0,this._alwaysShowContent=!1,this._firstShow=!0,this._longHide=!0,r.wxa)return null;var n=document.createElement("div");n.domBelongToZr=!0,this.el=n;var i=this._zr=t.getZr(),o=e.appendTo,a=o&&(G(o)?document.querySelector(o):Q(o)?o:X(o)&&o(t.getDom()));BB(this._styleCoord,i,a,t.getWidth()/2,t.getHeight()/2),(a||t.getDom()).appendChild(n),this._api=t,this._container=a;var s=this;n.onmouseenter=function(){s._enterable&&(clearTimeout(s._hideTimeout),s._show=!0),s._inContent=!0},n.onmousemove=function(t){if(t=t||window.event,!s._enterable){var e=i.handler;he(i.painter.getViewportRoot(),t,!0),e.dispatch("mousemove",t)}},n.onmouseleave=function(){s._inContent=!1,s._enterable&&s._show&&s.hideLater(s._hideDelay)}}return t.prototype.update=function(t){if(!this._container){var e=this._api.getDom(),n=(o="position",(a=(r=e).currentStyle||document.defaultView&&document.defaultView.getComputedStyle(r))?a[o]:null),i=e.style;"absolute"!==i.position&&"absolute"!==n&&(i.position="relative")}var r,o,a,s=t.get("alwaysShowContent");s&&this._moveIfResized(),this._alwaysShowContent=s,this.el.className=t.get("className")||""},t.prototype.show=function(t,e){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var n=this.el,i=n.style,r=this._styleCoord;n.innerHTML?i.cssText=PB+RB(t,!this._firstShow,this._longHide)+NB(r[0],r[1],!0)+"border-color:"+cd(e)+";"+(t.get("extraCssText")||"")+";pointer-events:"+(this._enterable?"auto":"none"):i.display="none",this._show=!0,this._firstShow=!1,this._longHide=!1},t.prototype.setContent=function(t,e,n,i,r){var o=this.el;if(null!=t){var a="";if(G(r)&&"item"===n.get("trigger")&&!TB(n)&&(a=function(t,e,n){if(!G(n)||"inside"===n)return"";var i=t.get("backgroundColor"),r=t.get("borderWidth");e=cd(e);var o,a,s="left"===(o=n)?"right":"right"===o?"left":"top"===o?"bottom":"top",l=Math.max(1.5*Math.round(r),6),c="",u=LB+":";D(["left","right"],s)>-1?(c+="top:50%",u+="translateY(-50%) rotate("+(a="left"===s?-225:-45)+"deg)"):(c+="left:50%",u+="translateX(-50%) rotate("+(a="top"===s?225:45)+"deg)");var h=a*Math.PI/180,d=l+r,p=d*Math.abs(Math.cos(h))+d*Math.abs(Math.sin(h)),f=e+" solid "+r+"px;";return'<div style="'+["position:absolute;width:"+l+"px;height:"+l+"px;z-index:-1;",(c+=";"+s+":-"+Math.round(100*((p-Math.SQRT2*r)/2+Math.SQRT2*r-(p-d)/2))/100+"px")+";"+u+";","border-bottom:"+f,"border-right:"+f,"background-color:"+i+";"].join("")+'"></div>'}(n,i,r)),G(t))o.innerHTML=t+a;else if(t){o.innerHTML="",Y(t)||(t=[t]);for(var s=0;s<t.length;s++)Q(t[s])&&t[s].parentNode!==o&&o.appendChild(t[s]);if(a&&o.childNodes.length){var l=document.createElement("div");l.innerHTML=a,o.appendChild(l)}}}else o.innerHTML=""},t.prototype.setEnterable=function(t){this._enterable=t},t.prototype.getSize=function(){var t=this.el;return[t.offsetWidth,t.offsetHeight]},t.prototype.moveTo=function(t,e){var n=this._styleCoord;if(BB(n,this._zr,this._container,t,e),null!=n[0]&&null!=n[1]){var i=this.el.style;R(NB(n[0],n[1]),(function(t){i[t[0]]=t[1]}))}},t.prototype._moveIfResized=function(){var t=this._styleCoord[2],e=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),e*this._zr.getHeight())},t.prototype.hide=function(){var t=this,e=this.el.style;e.visibility="hidden",e.opacity="0",r.transform3dSupported&&(e.willChange=""),this._show=!1,this._longHideTimeout=setTimeout((function(){return t._longHide=!0}),500)},t.prototype.hideLater=function(t){!this._show||this._inContent&&this._enterable||this._alwaysShowContent||(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(W(this.hide,this),t)):this.hide())},t.prototype.isShow=function(){return this._show},t.prototype.dispose=function(){clearTimeout(this._hideTimeout),clearTimeout(this._longHideTimeout);var t=this.el.parentNode;t&&t.removeChild(this.el),this.el=this._container=null},t}(),FB=function(){function t(t){this._show=!1,this._styleCoord=[0,0,0,0],this._alwaysShowContent=!1,this._enterable=!0,this._zr=t.getZr(),WB(this._styleCoord,this._zr,t.getWidth()/2,t.getHeight()/2)}return t.prototype.update=function(t){var e=t.get("alwaysShowContent");e&&this._moveIfResized(),this._alwaysShowContent=e},t.prototype.show=function(){this._hideTimeout&&clearTimeout(this._hideTimeout),this.el.show(),this._show=!0},t.prototype.setContent=function(t,e,n,i,r){var o=this;$(t)&&po(""),this.el&&this._zr.remove(this.el);var a=n.getModel("textStyle");this.el=new Rs({style:{rich:e.richTextStyles,text:t,lineHeight:22,borderWidth:1,borderColor:i,textShadowColor:a.get("textShadowColor"),fill:n.get(["textStyle","color"]),padding:Kf(n,"richText"),verticalAlign:"top",align:"left"},z:n.get("z")}),R(["backgroundColor","borderRadius","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY"],(function(t){o.el.style[t]=n.get(t)})),R(["textShadowBlur","textShadowOffsetX","textShadowOffsetY"],(function(t){o.el.style[t]=a.get(t)||0})),this._zr.add(this.el);var s=this;this.el.on("mouseover",(function(){s._enterable&&(clearTimeout(s._hideTimeout),s._show=!0),s._inContent=!0})),this.el.on("mouseout",(function(){s._enterable&&s._show&&s.hideLater(s._hideDelay),s._inContent=!1}))},t.prototype.setEnterable=function(t){this._enterable=t},t.prototype.getSize=function(){var t=this.el,e=this.el.getBoundingRect(),n=HB(t.style);return[e.width+n.left+n.right,e.height+n.top+n.bottom]},t.prototype.moveTo=function(t,e){var n=this.el;if(n){var i=this._styleCoord;WB(i,this._zr,t,e),t=i[0],e=i[1];var r=n.style,o=VB(r.borderWidth||0),a=HB(r);n.x=t+o+a.left,n.y=e+o+a.top,n.markRedraw()}},t.prototype._moveIfResized=function(){var t=this._styleCoord[2],e=this._styleCoord[3];this.moveTo(t*this._zr.getWidth(),e*this._zr.getHeight())},t.prototype.hide=function(){this.el&&this.el.hide(),this._show=!1},t.prototype.hideLater=function(t){!this._show||this._inContent&&this._enterable||this._alwaysShowContent||(t?(this._hideDelay=t,this._show=!1,this._hideTimeout=setTimeout(W(this.hide,this),t)):this.hide())},t.prototype.isShow=function(){return this._show},t.prototype.dispose=function(){this._zr.remove(this.el)},t}();function VB(t){return Math.max(0,t)}function HB(t){var e=VB(t.shadowBlur||0),n=VB(t.shadowOffsetX||0),i=VB(t.shadowOffsetY||0);return{left:VB(e-n),right:VB(e+n),top:VB(e-i),bottom:VB(e+i)}}function WB(t,e,n,i){t[0]=n,t[1]=i,t[2]=t[0]/e.getWidth(),t[3]=t[1]/e.getHeight()}var jB=new Ls({shape:{x:-1,y:-1,width:2,height:2}}),YB=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.prototype.init=function(t,e){if(!r.node&&e.getDom()){var n,i=t.getComponent("tooltip"),o=this._renderMode="auto"===(n=i.get("renderMode"))?r.domSupported?"html":"richText":n||"html";this._tooltipContent="richText"===o?new FB(e):new zB(e,{appendTo:i.get("appendToBody",!0)?"body":i.get("appendTo",!0)})}},e.prototype.render=function(t,e,n){if(!r.node&&n.getDom()){this.group.removeAll(),this._tooltipModel=t,this._ecModel=e,this._api=n;var i=this._tooltipContent;i.update(t),i.setEnterable(t.get("enterable")),this._initGlobalListener(),this._keepShow(),"richText"!==this._renderMode&&t.get("transitionDuration")?kg(this,"_updatePosition",50,"fixRate"):Ag(this,"_updatePosition")}},e.prototype._initGlobalListener=function(){var t=this._tooltipModel.get("triggerOn");KP("itemTooltip",this._api,W((function(e,n,i){"none"!==t&&(t.indexOf(e)>=0?this._tryShow(n,i):"leave"===e&&this._hide(i))}),this))},e.prototype._keepShow=function(){var t=this._tooltipModel,e=this._ecModel,n=this._api,i=t.get("triggerOn");if(null!=this._lastX&&null!=this._lastY&&"none"!==i&&"click"!==i){var r=this;clearTimeout(this._refreshUpdateTimeout),this._refreshUpdateTimeout=setTimeout((function(){!n.isDisposed()&&r.manuallyShowTip(t,e,n,{x:r._lastX,y:r._lastY,dataByCoordSys:r._lastDataByCoordSys})}))}},e.prototype.manuallyShowTip=function(t,e,n,i){if(i.from!==this.uid&&!r.node&&n.getDom()){var o=GB(i,n);this._ticket="";var a=i.dataByCoordSys,s=function(t,e,n){var i=Do(t).queryOptionMap,r=i.keys()[0];if(r&&"series"!==r){var o,a=No(e,r,i.get(r),{useDefault:!1,enableAll:!1,enableNone:!1}).models[0];if(a)return n.getViewOfComponentModel(a).group.traverse((function(e){var n=$s(e).tooltipConfig;if(n&&n.name===t.name)return o=e,!0})),o?{componentMainType:r,componentIndex:a.componentIndex,el:o}:void 0}}(i,e,n);if(s){var l=s.el.getBoundingRect().clone();l.applyTransform(s.el.transform),this._tryShow({offsetX:l.x+l.width/2,offsetY:l.y+l.height/2,target:s.el,position:i.position,positionDefault:"bottom"},o)}else if(i.tooltip&&null!=i.x&&null!=i.y){var c=jB;c.x=i.x,c.y=i.y,c.update(),$s(c).tooltipConfig={name:null,option:i.tooltip},this._tryShow({offsetX:i.x,offsetY:i.y,target:c},o)}else if(a)this._tryShow({offsetX:i.x,offsetY:i.y,position:i.position,dataByCoordSys:a,tooltipOption:i.tooltipOption},o);else if(null!=i.seriesIndex){if(this._manuallyAxisShowTip(t,e,n,i))return;var u=nN(i,e),h=u.point[0],d=u.point[1];null!=h&&null!=d&&this._tryShow({offsetX:h,offsetY:d,target:u.el,position:i.position,positionDefault:"bottom"},o)}else null!=i.x&&null!=i.y&&(n.dispatchAction({type:"updateAxisPointer",x:i.x,y:i.y}),this._tryShow({offsetX:i.x,offsetY:i.y,position:i.position,target:n.getZr().findHover(i.x,i.y).target},o))}},e.prototype.manuallyHideTip=function(t,e,n,i){var r=this._tooltipContent;this._tooltipModel&&r.hideLater(this._tooltipModel.get("hideDelay")),this._lastX=this._lastY=this._lastDataByCoordSys=null,i.from!==this.uid&&this._hide(GB(i,n))},e.prototype._manuallyAxisShowTip=function(t,e,n,i){var r=i.seriesIndex,o=i.dataIndex,a=e.getComponent("axisPointer").coordSysAxesInfo;if(null!=r&&null!=o&&null!=a){var s=e.getSeriesByIndex(r);if(s&&"axis"===XB([s.getData().getItemModel(o),s,(s.coordinateSystem||{}).model],this._tooltipModel).get("trigger"))return n.dispatchAction({type:"updateAxisPointer",seriesIndex:r,dataIndex:o,position:i.position}),!0}},e.prototype._tryShow=function(t,e){var n=t.target;if(this._tooltipModel){this._lastX=t.offsetX,this._lastY=t.offsetY;var i=t.dataByCoordSys;if(i&&i.length)this._showAxisTooltip(i,t);else if(n){var r,o;if("legend"===$s(n).ssrType)return;this._lastDataByCoordSys=null,gm(n,(function(t){return null!=$s(t).dataIndex?(r=t,!0):null!=$s(t).tooltipConfig?(o=t,!0):void 0}),!0),r?this._showSeriesItemTooltip(t,r,e):o?this._showComponentItemTooltip(t,o,e):this._hide(e)}else this._lastDataByCoordSys=null,this._hide(e)}},e.prototype._showOrMove=function(t,e){var n=t.get("showDelay");e=W(e,this),clearTimeout(this._showTimout),n>0?this._showTimout=setTimeout(e,n):e()},e.prototype._showAxisTooltip=function(t,e){var n=this._ecModel,i=this._tooltipModel,r=[e.offsetX,e.offsetY],o=XB([e.tooltipOption],i),a=this._renderMode,s=[],l=Hf("section",{blocks:[],noHeader:!0}),c=[],u=new Qf;R(t,(function(t){R(t.dataByAxis,(function(t){var e=n.getComponent(t.axisDim+"Axis",t.axisIndex),r=t.value;if(e&&null!=r){var o=zP(r,e.axis,n,t.seriesDataIndices,t.valueLabelOpt),h=Hf("section",{header:o,noHeader:!ct(o),sortBlocks:!0,blocks:[]});l.blocks.push(h),R(t.seriesDataIndices,(function(l){var d=n.getSeriesByIndex(l.seriesIndex),p=l.dataIndexInside,f=d.getDataParams(p);if(!(f.dataIndex<0)){f.axisDim=t.axisDim,f.axisIndex=t.axisIndex,f.axisType=t.axisType,f.axisId=t.axisId,f.axisValue=ix(e.axis,{value:r}),f.axisValueLabel=o,f.marker=u.makeTooltipMarker("item",cd(f.color),a);var g=nf(d.formatTooltip(p,!0,null)),m=g.frag;if(m){var v=XB([d],i).get("valueFormatter");h.blocks.push(v?I({valueFormatter:v},m):m)}g.text&&c.push(g.text),s.push(f)}}))}}))})),l.blocks.reverse(),c.reverse();var h=e.position,d=o.get("order"),p=qf(l,u,a,d,n.get("useUTC"),o.get("textStyle"));p&&c.unshift(p);var f="richText"===a?"\n\n":"<br/>",g=c.join(f);this._showOrMove(o,(function(){this._updateContentNotChangedOnAxis(t,s)?this._updatePosition(o,h,r[0],r[1],this._tooltipContent,s):this._showTooltipContent(o,g,s,Math.random()+"",r[0],r[1],h,null,u)}))},e.prototype._showSeriesItemTooltip=function(t,e,n){var i=this._ecModel,r=$s(e),o=r.seriesIndex,a=i.getSeriesByIndex(o),s=r.dataModel||a,l=r.dataIndex,c=r.dataType,u=s.getData(c),h=this._renderMode,d=t.positionDefault,p=XB([u.getItemModel(l),s,a&&(a.coordinateSystem||{}).model],this._tooltipModel,d?{position:d}:null),f=p.get("trigger");if(null==f||"item"===f){var g=s.getDataParams(l,c),m=new Qf;g.marker=m.makeTooltipMarker("item",cd(g.color),h);var v=nf(s.formatTooltip(l,!1,c)),y=p.get("order"),b=p.get("valueFormatter"),x=v.frag,_=x?qf(b?I({valueFormatter:b},x):x,m,h,y,i.get("useUTC"),p.get("textStyle")):v.text,w="item_"+s.name+"_"+l;this._showOrMove(p,(function(){this._showTooltipContent(p,_,g,w,t.offsetX,t.offsetY,t.position,t.target,m)})),n({type:"showTip",dataIndexInside:l,dataIndex:u.getRawIndex(l),seriesIndex:o,from:this.uid})}},e.prototype._showComponentItemTooltip=function(t,e,n){var i=$s(e),r=i.tooltipConfig.option||{};G(r)&&(r={content:r,formatter:r});var o=[r],a=this._ecModel.getComponent(i.componentMainType,i.componentIndex);a&&o.push(a),o.push({formatter:r.content});var s=t.positionDefault,l=XB(o,this._tooltipModel,s?{position:s}:null),c=l.get("content"),u=Math.random()+"",h=new Qf;this._showOrMove(l,(function(){var n=A(l.get("formatterParams")||{});this._showTooltipContent(l,c,n,u,t.offsetX,t.offsetY,t.position,e,h)})),n({type:"showTip",from:this.uid})},e.prototype._showTooltipContent=function(t,e,n,i,r,o,a,s,l){if(this._ticket="",t.get("showContent")&&t.get("show")){var c=this._tooltipContent;c.setEnterable(t.get("enterable"));var u=t.get("formatter");a=a||t.get("position");var h=e,d=this._getNearestPoint([r,o],n,t.get("trigger"),t.get("borderColor")).color;if(u)if(G(u)){var p=t.ecModel.get("useUTC"),f=Y(n)?n[0]:n;h=u,f&&f.axisType&&f.axisType.indexOf("time")>=0&&(h=zh(f.axisValue,h,p)),h=sd(h,n,!0)}else if(X(u)){var g=W((function(e,i){e===this._ticket&&(c.setContent(i,l,t,d,a),this._updatePosition(t,a,r,o,c,n,s))}),this);this._ticket=i,h=u(n,i,g)}else h=u;c.setContent(h,l,t,d,a),c.show(t,d),this._updatePosition(t,a,r,o,c,n,s)}},e.prototype._getNearestPoint=function(t,e,n,i){return"axis"===n||Y(e)?{color:i||("html"===this._renderMode?"#fff":"none")}:Y(e)?void 0:{color:i||e.color||e.borderColor}},e.prototype._updatePosition=function(t,e,n,i,r,o,a){var s=this._api.getWidth(),l=this._api.getHeight();e=e||t.get("position");var c=r.getSize(),u=t.get("align"),h=t.get("verticalAlign"),d=a&&a.getBoundingRect().clone();if(a&&d.applyTransform(a.transform),X(e)&&(e=e([n,i],o,r.el,d,{viewSize:[s,l],contentSize:c.slice()})),Y(e))n=jr(e[0],s),i=jr(e[1],l);else if($(e)){var p=e;p.width=c[0],p.height=c[1];var f=md(p,{width:s,height:l});n=f.x,i=f.y,u=null,h=null}else if(G(e)&&a){var g=function(t,e,n,i){var r=n[0],o=n[1],a=Math.ceil(Math.SQRT2*i)+8,s=0,l=0,c=e.width,u=e.height;switch(t){case"inside":s=e.x+c/2-r/2,l=e.y+u/2-o/2;break;case"top":s=e.x+c/2-r/2,l=e.y-o-a;break;case"bottom":s=e.x+c/2-r/2,l=e.y+u+a;break;case"left":s=e.x-r-a,l=e.y+u/2-o/2;break;case"right":s=e.x+c+a,l=e.y+u/2-o/2}return[s,l]}(e,d,c,t.get("borderWidth"));n=g[0],i=g[1]}else g=function(t,e,n,i,r,o,a){var s=n.getSize(),l=s[0],c=s[1];return null!=o&&(t+l+o+2>i?t-=l+o:t+=o),null!=a&&(e+c+a>r?e-=c+a:e+=a),[t,e]}(n,i,r,s,l,u?null:20,h?null:20),n=g[0],i=g[1];u&&(n-=qB(u)?c[0]/2:"right"===u?c[0]:0),h&&(i-=qB(h)?c[1]/2:"bottom"===h?c[1]:0),TB(t)&&(g=function(t,e,n,i,r){var o=n.getSize(),a=o[0],s=o[1];return t=Math.min(t+a,i)-a,e=Math.min(e+s,r)-s,[t=Math.max(t,0),e=Math.max(e,0)]}(n,i,r,s,l),n=g[0],i=g[1]),r.moveTo(n,i)},e.prototype._updateContentNotChangedOnAxis=function(t,e){var n=this._lastDataByCoordSys,i=this._cbParamsList,r=!!n&&n.length===t.length;return r&&R(n,(function(n,o){var a=n.dataByAxis||[],s=(t[o]||{}).dataByAxis||[];(r=r&&a.length===s.length)&&R(a,(function(t,n){var o=s[n]||{},a=t.seriesDataIndices||[],l=o.seriesDataIndices||[];(r=r&&t.value===o.value&&t.axisType===o.axisType&&t.axisId===o.axisId&&a.length===l.length)&&R(a,(function(t,e){var n=l[e];r=r&&t.seriesIndex===n.seriesIndex&&t.dataIndex===n.dataIndex})),i&&R(t.seriesDataIndices,(function(t){var n=t.seriesIndex,o=e[n],a=i[n];o&&a&&a.data!==o.data&&(r=!1)}))}))})),this._lastDataByCoordSys=t,this._cbParamsList=e,!!r},e.prototype._hide=function(t){this._lastDataByCoordSys=null,t({type:"hideTip",from:this.uid})},e.prototype.dispose=function(t,e){!r.node&&e.getDom()&&(Ag(this,"_updatePosition"),this._tooltipContent.dispose(),tN("itemTooltip",e))},e.type="tooltip",e}(hg);function XB(t,e,n){var i,r=e.ecModel;n?(i=new gh(n,r,r),i=new gh(e.option,i,r)):i=e;for(var o=t.length-1;o>=0;o--){var a=t[o];a&&(a instanceof gh&&(a=a.get("tooltip",!0)),G(a)&&(a={formatter:a}),a&&(i=new gh(a,i,r)))}return i}function GB(t,e){return t.dispatchAction||W(e.dispatchAction,e)}function qB(t){return"center"===t||"middle"===t}var UB=["rect","polygon","keep","clear"];function $B(t,e){var n=vo(t?t.brush:[]);if(n.length){var i=[];R(n,(function(t){var e=t.hasOwnProperty("toolbox")?t.toolbox:[];e instanceof Array&&(i=i.concat(e))}));var r=t&&t.toolbox;Y(r)&&(r=r[0]),r||(r={feature:{}},t.toolbox=[r]);var o=r.feature||(r.feature={}),a=o.brush||(o.brush={}),s=a.type||(a.type=[]);s.push.apply(s,i),function(t){var e={};R(t,(function(t){e[t]=1})),t.length=0,R(e,(function(e,n){t.push(n)}))}(s),e&&!s.length&&s.push.apply(s,UB)}}var ZB=R;function KB(t){if(t)for(var e in t)if(t.hasOwnProperty(e))return!0}function QB(t,e,n){var i={};return ZB(e,(function(e){var r,o=i[e]=((r=function(){}).prototype.__hidden=r.prototype,new r);ZB(t[e],(function(t,i){if(tT.isValidType(i)){var r={type:i,visual:t};n&&n(r,e),o[i]=new tT(r),"opacity"===i&&((r=A(r)).type="colorAlpha",o.__hidden.__alphaForOpacity=new tT(r))}}))})),i}function JB(t,e,n){var i;R(n,(function(t){e.hasOwnProperty(t)&&KB(e[t])&&(i=!0)})),i&&R(n,(function(n){e.hasOwnProperty(n)&&KB(e[n])?t[n]=A(e[n]):delete t[n]}))}var tz={lineX:ez(0),lineY:ez(1),rect:{point:function(t,e,n){return t&&n.boundingRect.contain(t[0],t[1])},rect:function(t,e,n){return t&&n.boundingRect.intersect(t)}},polygon:{point:function(t,e,n){return t&&n.boundingRect.contain(t[0],t[1])&&dx(n.range,t[0],t[1])},rect:function(t,e,n){var i=n.range;if(!t||i.length<=1)return!1;var r=t.x,o=t.y,a=t.width,s=t.height,l=i[0];return!!(dx(i,r,o)||dx(i,r+a,o)||dx(i,r,o+s)||dx(i,r+a,o+s)||Re.create(t).contain(l[0],l[1])||Nu(r,o,r+a,o,i)||Nu(r,o,r,o+s,i)||Nu(r+a,o,r+a,o+s,i)||Nu(r,o+s,r+a,o+s,i))||void 0}}};function ez(t){var e=["x","y"],n=["width","height"];return{point:function(e,n,i){if(e){var r=i.range;return nz(e[t],r)}},rect:function(i,r,o){if(i){var a=o.range,s=[i[e[t]],i[e[t]]+i[n[t]]];return s[1]<s[0]&&s.reverse(),nz(s[0],a)||nz(s[1],a)||nz(a[0],s)||nz(a[1],s)}}}}function nz(t,e){return e[0]<=t&&t<=e[1]}var iz=["inBrush","outOfBrush"],rz="__ecBrushSelect",oz="__ecInBrushSelectEvent";function az(t){t.eachComponent({mainType:"brush"},(function(e){(e.brushTargetManager=new uB(e.option,t)).setInputRanges(e.areas,t)}))}function sz(t,e,n){var i,r,o=[];t.eachComponent({mainType:"brush"},(function(t){n&&"takeGlobalCursor"===n.type&&t.setBrushOption("brush"===n.key?n.brushOption:{brushType:!1})})),az(t),t.eachComponent({mainType:"brush"},(function(e,n){var a={brushId:e.id,brushIndex:n,brushName:e.name,areas:A(e.areas),selected:[]};o.push(a);var s=e.option,l=s.brushLink,c=[],u=[],h=[],d=!1;n||(i=s.throttleType,r=s.throttleDelay);var p=B(e.areas,(function(t){var e=uz[t.brushType],n=E({boundingRect:e?e(t):void 0},t);return n.selectors=function(t){var e=t.brushType,n={point:function(i){return tz[e].point(i,n,t)},rect:function(i){return tz[e].rect(i,n,t)}};return n}(n),n})),f=QB(e.option,iz,(function(t){t.mappingMethod="fixed"}));function g(t){return"all"===l||!!c[t]}function m(t){return!!t.length}Y(l)&&R(l,(function(t){c[t]=1})),t.eachSeries((function(n,i){var r=h[i]=[];"parallel"===n.subType?function(t,e){var n=t.coordinateSystem;d=d||n.hasAxisBrushed(),g(e)&&n.eachActiveState(t.getData(),(function(t,e){"active"===t&&(u[e]=1)}))}(n,i):function(n,i,r){if(n.brushSelector&&!function(t,e){var n=t.option.seriesIndex;return null!=n&&"all"!==n&&(Y(n)?D(n,e)<0:e!==n)}(e,i)&&(R(p,(function(i){e.brushTargetManager.controlSeries(i,n,t)&&r.push(i),d=d||m(r)})),g(i)&&m(r))){var o=n.getData();o.each((function(t){cz(n,r,o,t)&&(u[t]=1)}))}}(n,i,r)})),t.eachSeries((function(t,e){var n={seriesId:t.id,seriesIndex:e,seriesName:t.name,dataIndex:[]};a.selected.push(n);var i=h[e],r=t.getData(),o=g(e)?function(t){return u[t]?(n.dataIndex.push(r.getRawIndex(t)),"inBrush"):"outOfBrush"}:function(e){return cz(t,i,r,e)?(n.dataIndex.push(r.getRawIndex(e)),"inBrush"):"outOfBrush"};(g(e)?d:m(i))&&function(t,e,n,i,r,o){var a,s={};function l(t){return um(n,a,t)}function c(t,e){dm(n,a,t,e)}function u(t,r){a=t;var o=n.getRawDataItem(a);if(!o||!1!==o.visualMap)for(var u=i.call(undefined,t),h=e[u],d=s[u],p=0,f=d.length;p<f;p++){var g=d[p];h[g]&&h[g].applyVisual(t,l,c)}}R(t,(function(t){var n=tT.prepareVisualTypes(e[t]);s[t]=n})),n.each(u)}(iz,f,r,o)}))})),function(t,e,n,i,r){if(r){var o=t.getZr();if(!o[oz])o[rz]||(o[rz]=lz),kg(o,rz,n,e)(t,i)}}(e,i,r,o,n)}function lz(t,e){if(!t.isDisposed()){var n=t.getZr();n[oz]=!0,t.dispatchAction({type:"brushSelect",batch:e}),n[oz]=!1}}function cz(t,e,n,i){for(var r=0,o=e.length;r<o;r++){var a=e[r];if(t.brushSelector(i,n,a.selectors,a))return!0}}var uz={rect:function(t){return hz(t.range)},polygon:function(t){for(var e,n=t.range,i=0,r=n.length;i<r;i++){e=e||[[1/0,-1/0],[1/0,-1/0]];var o=n[i];o[0]<e[0][0]&&(e[0][0]=o[0]),o[0]>e[0][1]&&(e[0][1]=o[0]),o[1]<e[1][0]&&(e[1][0]=o[1]),o[1]>e[1][1]&&(e[1][1]=o[1])}return e&&hz(e)}};function hz(t){return new Re(t[0][0],t[1][0],t[0][1]-t[0][0],t[1][1]-t[1][0])}var dz=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.prototype.init=function(t,e){this.ecModel=t,this.api=e,this.model,(this._brushController=new DE(e.getZr())).on("brush",W(this._onBrush,this)).mount()},e.prototype.render=function(t,e,n,i){this.model=t,this._updateController(t,e,n,i)},e.prototype.updateTransform=function(t,e,n,i){az(e),this._updateController(t,e,n,i)},e.prototype.updateVisual=function(t,e,n,i){this.updateTransform(t,e,n,i)},e.prototype.updateView=function(t,e,n,i){this._updateController(t,e,n,i)},e.prototype._updateController=function(t,e,n,i){(!i||i.$from!==t.id)&&this._brushController.setPanels(t.brushTargetManager.makePanelOpts(n)).enableBrush(t.brushOption).updateCovers(t.areas.slice())},e.prototype.dispose=function(){this._brushController.dispose()},e.prototype._onBrush=function(t){var e=this.model.id,n=this.model.brushTargetManager.setOutputRanges(t.areas,this.ecModel);(!t.isEnd||t.removeOnClick)&&this.api.dispatchAction({type:"brush",brushId:e,areas:A(n),$from:e}),t.isEnd&&this.api.dispatchAction({type:"brushEnd",brushId:e,areas:A(n),$from:e})},e.type="brush",e}(hg),pz=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.areas=[],n.brushOption={},n}return n(e,t),e.prototype.optionUpdated=function(t,e){var n=this.option;!e&&JB(n,t,["inBrush","outOfBrush"]);var i=n.inBrush=n.inBrush||{};n.outOfBrush=n.outOfBrush||{color:"#ddd"},i.hasOwnProperty("liftZ")||(i.liftZ=5)},e.prototype.setAreas=function(t){t&&(this.areas=B(t,(function(t){return fz(this.option,t)}),this))},e.prototype.setBrushOption=function(t){this.brushOption=fz(this.option,t),this.brushType=this.brushOption.brushType},e.type="brush",e.dependencies=["geo","grid","xAxis","yAxis","parallel","series"],e.defaultOption={seriesIndex:"all",brushType:"rect",brushMode:"single",transformable:!0,brushStyle:{borderWidth:1,color:"rgba(210,219,238,0.3)",borderColor:"#D2DBEE"},throttleType:"fixRate",throttleDelay:0,removeOnClick:!0,z:1e4},e}(Sd);function fz(t,e){return M({brushType:t.brushType,brushMode:t.brushMode,transformable:t.transformable,brushStyle:new gh(t.brushStyle).getItemStyle(),removeOnClick:t.removeOnClick,z:t.z},e,!0)}var gz=["rect","polygon","lineX","lineY","keep","clear"],mz=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return n(e,t),e.prototype.render=function(t,e,n){var i,r,o;e.eachComponent({mainType:"brush"},(function(t){i=t.brushType,r=t.brushOption.brushMode||"single",o=o||!!t.areas.length})),this._brushType=i,this._brushMode=r,R(t.get("type",!0),(function(e){t.setIconStatus(e,("keep"===e?"multiple"===r:"clear"===e?o:e===i)?"emphasis":"normal")}))},e.prototype.updateView=function(t,e,n){this.render(t,e,n)},e.prototype.getIcons=function(){var t=this.model,e=t.get("icon",!0),n={};return R(t.get("type",!0),(function(t){e[t]&&(n[t]=e[t])})),n},e.prototype.onclick=function(t,e,n){var i=this._brushType,r=this._brushMode;"clear"===n?(e.dispatchAction({type:"axisAreaSelect",intervals:[]}),e.dispatchAction({type:"brush",command:"clear",areas:[]})):e.dispatchAction({type:"takeGlobalCursor",key:"brush",brushOption:{brushType:"keep"===n?i:i!==n&&n,brushMode:"keep"===n?"multiple"===r?"single":"multiple":r}})},e.getDefaultOption=function(t){return{show:!0,type:gz.slice(),icon:{rect:"M7.3,34.7 M0.4,10V-0.2h9.8 M89.6,10V-0.2h-9.8 M0.4,60v10.2h9.8 M89.6,60v10.2h-9.8 M12.3,22.4V10.5h13.1 M33.6,10.5h7.8 M49.1,10.5h7.8 M77.5,22.4V10.5h-13 M12.3,31.1v8.2 M77.7,31.1v8.2 M12.3,47.6v11.9h13.1 M33.6,59.5h7.6 M49.1,59.5 h7.7 M77.5,47.6v11.9h-13",polygon:"M55.2,34.9c1.7,0,3.1,1.4,3.1,3.1s-1.4,3.1-3.1,3.1 s-3.1-1.4-3.1-3.1S53.5,34.9,55.2,34.9z M50.4,51c1.7,0,3.1,1.4,3.1,3.1c0,1.7-1.4,3.1-3.1,3.1c-1.7,0-3.1-1.4-3.1-3.1 C47.3,52.4,48.7,51,50.4,51z M55.6,37.1l1.5-7.8 M60.1,13.5l1.6-8.7l-7.8,4 M59,19l-1,5.3 M24,16.1l6.4,4.9l6.4-3.3 M48.5,11.6 l-5.9,3.1 M19.1,12.8L9.7,5.1l1.1,7.7 M13.4,29.8l1,7.3l6.6,1.6 M11.6,18.4l1,6.1 M32.8,41.9 M26.6,40.4 M27.3,40.2l6.1,1.6 M49.9,52.1l-5.6-7.6l-4.9-1.2",lineX:"M15.2,30 M19.7,15.6V1.9H29 M34.8,1.9H40.4 M55.3,15.6V1.9H45.9 M19.7,44.4V58.1H29 M34.8,58.1H40.4 M55.3,44.4 V58.1H45.9 M12.5,20.3l-9.4,9.6l9.6,9.8 M3.1,29.9h16.5 M62.5,20.3l9.4,9.6L62.3,39.7 M71.9,29.9H55.4",lineY:"M38.8,7.7 M52.7,12h13.2v9 M65.9,26.6V32 M52.7,46.3h13.2v-9 M24.9,12H11.8v9 M11.8,26.6V32 M24.9,46.3H11.8v-9 M48.2,5.1l-9.3-9l-9.4,9.2 M38.9-3.9V12 M48.2,53.3l-9.3,9l-9.4-9.2 M38.9,62.3V46.4",keep:"M4,10.5V1h10.3 M20.7,1h6.1 M33,1h6.1 M55.4,10.5V1H45.2 M4,17.3v6.6 M55.6,17.3v6.6 M4,30.5V40h10.3 M20.7,40 h6.1 M33,40h6.1 M55.4,30.5V40H45.2 M21,18.9h62.9v48.6H21V18.9z",clear:"M22,14.7l30.9,31 M52.9,14.7L22,45.7 M4.7,16.8V4.2h13.1 M26,4.2h7.8 M41.6,4.2h7.8 M70.3,16.8V4.2H57.2 M4.7,25.9v8.6 M70.3,25.9v8.6 M4.7,43.2v12.6h13.1 M26,55.8h7.8 M41.6,55.8h7.8 M70.3,43.2v12.6H57.2"},title:t.getLocaleModel().get(["toolbox","brush","title"])}},e}(HR),vz=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.layoutMode={type:"box",ignoreSize:!0},n}return n(e,t),e.type="title",e.defaultOption={z:6,show:!0,text:"",target:"blank",subtext:"",subtarget:"blank",left:0,top:0,backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,padding:5,itemGap:10,textStyle:{fontSize:18,fontWeight:"bold",color:"#464646"},subtextStyle:{fontSize:12,color:"#6E7079"}},e}(Sd),yz=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.prototype.render=function(t,e,n){if(this.group.removeAll(),t.get("show")){var i=this.group,r=t.getModel("textStyle"),o=t.getModel("subtextStyle"),a=t.get("textAlign"),s=rt(t.get("textBaseline"),t.get("textVerticalAlign")),l=new Rs({style:qu(r,{text:t.get("text"),fill:r.getTextColor()},{disableBox:!0}),z2:10}),c=l.getBoundingRect(),u=t.get("subtext"),h=new Rs({style:qu(o,{text:u,fill:o.getTextColor(),y:c.height+t.get("itemGap"),verticalAlign:"top"},{disableBox:!0}),z2:10}),d=t.get("link"),p=t.get("sublink"),f=t.get("triggerEvent",!0);l.silent=!d&&!f,h.silent=!p&&!f,d&&l.on("click",(function(){ud(d,"_"+t.get("target"))})),p&&h.on("click",(function(){ud(p,"_"+t.get("subtarget"))})),$s(l).eventData=$s(h).eventData=f?{componentType:"title",componentIndex:t.componentIndex}:null,i.add(l),u&&i.add(h);var g=i.getBoundingRect(),m=t.getBoxLayoutParams();m.width=g.width,m.height=g.height;var v=md(m,{width:n.getWidth(),height:n.getHeight()},t.get("padding"));a||("middle"===(a=t.get("left")||t.get("right"))&&(a="center"),"right"===a?v.x+=v.width:"center"===a&&(v.x+=v.width/2)),s||("center"===(s=t.get("top")||t.get("bottom"))&&(s="middle"),"bottom"===s?v.y+=v.height:"middle"===s&&(v.y+=v.height/2),s=s||"top"),i.x=v.x,i.y=v.y,i.markRedraw();var y={align:a,verticalAlign:s};l.setStyle(y),h.setStyle(y),g=i.getBoundingRect();var b=v.margin,x=t.getItemStyle(["color","opacity"]);x.fill=t.get("backgroundColor");var _=new Ls({shape:{x:g.x-b[3],y:g.y-b[0],width:g.width+b[1]+b[3],height:g.height+b[0]+b[2],r:t.get("borderRadius")},style:x,subPixelOptimize:!0,silent:!0});i.add(_)}},e.type="title",e}(hg),bz=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.layoutMode="box",n}return n(e,t),e.prototype.init=function(t,e,n){this.mergeDefaultAndTheme(t,n),this._initData()},e.prototype.mergeOption=function(e){t.prototype.mergeOption.apply(this,arguments),this._initData()},e.prototype.setCurrentIndex=function(t){null==t&&(t=this.option.currentIndex);var e=this._data.count();this.option.loop?t=(t%e+e)%e:(t>=e&&(t=e-1),t<0&&(t=0)),this.option.currentIndex=t},e.prototype.getCurrentIndex=function(){return this.option.currentIndex},e.prototype.isIndexMax=function(){return this.getCurrentIndex()>=this._data.count()-1},e.prototype.setPlayState=function(t){this.option.autoPlay=!!t},e.prototype.getPlayState=function(){return!!this.option.autoPlay},e.prototype._initData=function(){var t,e=this.option,n=e.data||[],i=e.axisType,r=this._names=[];"category"===i?(t=[],R(n,(function(e,n){var i,o=ko(xo(e),"");$(e)?(i=A(e)).value=n:i=n,t.push(i),r.push(o)}))):t=n;var o={category:"ordinal",time:"time",value:"number"}[i]||"number";(this._data=new qy([{name:"value",type:o}],this)).initData(t,r)},e.prototype.getData=function(){return this._data},e.prototype.getCategories=function(){if("category"===this.get("axisType"))return this._names.slice()},e.type="timeline",e.defaultOption={z:4,show:!0,axisType:"time",realtime:!0,left:"20%",top:null,right:"20%",bottom:0,width:null,height:40,padding:5,controlPosition:"left",autoPlay:!1,rewind:!1,loop:!0,playInterval:2e3,currentIndex:0,itemStyle:{},label:{color:"#000"},data:[]},e}(Sd),xz=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.type="timeline.slider",e.defaultOption=yh(bz.defaultOption,{backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderWidth:0,orient:"horizontal",inverse:!1,tooltip:{trigger:"item"},symbol:"circle",symbolSize:12,lineStyle:{show:!0,width:2,color:"#DAE1F5"},label:{position:"auto",show:!0,interval:"auto",rotate:0,color:"#A4B1D7"},itemStyle:{color:"#A4B1D7",borderWidth:1},checkpointStyle:{symbol:"circle",symbolSize:15,color:"#316bf3",borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0, 0, 0, 0.3)",animation:!0,animationDuration:300,animationEasing:"quinticInOut"},controlStyle:{show:!0,showPlayBtn:!0,showPrevBtn:!0,showNextBtn:!0,itemSize:24,itemGap:12,position:"left",playIcon:"path://M31.6,53C17.5,53,6,41.5,6,27.4S17.5,1.8,31.6,1.8C45.7,1.8,57.2,13.3,57.2,27.4S45.7,53,31.6,53z M31.6,3.3 C18.4,3.3,7.5,14.1,7.5,27.4c0,13.3,10.8,24.1,24.1,24.1C44.9,51.5,55.7,40.7,55.7,27.4C55.7,14.1,44.9,3.3,31.6,3.3z M24.9,21.3 c0-2.2,1.6-3.1,3.5-2l10.5,6.1c1.899,1.1,1.899,2.9,0,4l-10.5,6.1c-1.9,1.1-3.5,0.2-3.5-2V21.3z",stopIcon:"path://M30.9,53.2C16.8,53.2,5.3,41.7,5.3,27.6S16.8,2,30.9,2C45,2,56.4,13.5,56.4,27.6S45,53.2,30.9,53.2z M30.9,3.5C17.6,3.5,6.8,14.4,6.8,27.6c0,13.3,10.8,24.1,24.101,24.1C44.2,51.7,55,40.9,55,27.6C54.9,14.4,44.1,3.5,30.9,3.5z M36.9,35.8c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H36c0.5,0,0.9,0.4,0.9,1V35.8z M27.8,35.8 c0,0.601-0.4,1-0.9,1h-1.3c-0.5,0-0.9-0.399-0.9-1V19.5c0-0.6,0.4-1,0.9-1H27c0.5,0,0.9,0.4,0.9,1L27.8,35.8L27.8,35.8z",nextIcon:"M2,18.5A1.52,1.52,0,0,1,.92,18a1.49,1.49,0,0,1,0-2.12L7.81,9.36,1,3.11A1.5,1.5,0,1,1,3,.89l8,7.34a1.48,1.48,0,0,1,.49,1.09,1.51,1.51,0,0,1-.46,1.1L3,18.08A1.5,1.5,0,0,1,2,18.5Z",prevIcon:"M10,.5A1.52,1.52,0,0,1,11.08,1a1.49,1.49,0,0,1,0,2.12L4.19,9.64,11,15.89a1.5,1.5,0,1,1-2,2.22L1,10.77A1.48,1.48,0,0,1,.5,9.68,1.51,1.51,0,0,1,1,8.58L9,.92A1.5,1.5,0,0,1,10,.5Z",prevBtnSize:18,nextBtnSize:18,color:"#A4B1D7",borderColor:"#A4B1D7",borderWidth:1},emphasis:{label:{show:!0,color:"#6f778d"},itemStyle:{color:"#316BF3"},controlStyle:{color:"#316BF3",borderColor:"#316BF3",borderWidth:2}},progress:{lineStyle:{color:"#316BF3"},itemStyle:{color:"#316BF3"},label:{color:"#6f778d"}},data:[]}),e}(bz);P(xz,ef.prototype);var _z=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.type="timeline",e}(hg),wz=function(t){function e(e,n,i,r){var o=t.call(this,e,n,i)||this;return o.type=r||"value",o}return n(e,t),e.prototype.getLabelModel=function(){return this.model.getModel("label")},e.prototype.isHorizontal=function(){return"horizontal"===this.model.get("orient")},e}(zx),Sz=Math.PI,Cz=Io(),kz=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.prototype.init=function(t,e){this.api=e},e.prototype.render=function(t,e,n){if(this.model=t,this.api=n,this.ecModel=e,this.group.removeAll(),t.get("show",!0)){var i=this._layout(t,n),r=this._createGroup("_mainGroup"),o=this._createGroup("_labelGroup"),a=this._axis=this._createAxis(i,t);t.formatTooltip=function(t){return Hf("nameValue",{noName:!0,value:a.scale.getLabel({value:t})})},R(["AxisLine","AxisTick","Control","CurrentPointer"],(function(e){this["_render"+e](i,r,a,t)}),this),this._renderAxisLabel(i,o,a,t),this._position(i,t)}this._doPlayStop(),this._updateTicksStatus()},e.prototype.remove=function(){this._clearTimer(),this.group.removeAll()},e.prototype.dispose=function(){this._clearTimer()},e.prototype._layout=function(t,e){var n,i,r,o,a=t.get(["label","position"]),s=t.get("orient"),l=function(t,e){return md(t.getBoxLayoutParams(),{width:e.getWidth(),height:e.getHeight()},t.get("padding"))}(t,e),c={horizontal:"center",vertical:(n=null==a||"auto"===a?"horizontal"===s?l.y+l.height/2<e.getHeight()/2?"-":"+":l.x+l.width/2<e.getWidth()/2?"+":"-":G(a)?{horizontal:{top:"-",bottom:"+"},vertical:{left:"-",right:"+"}}[s][a]:a)>=0||"+"===n?"left":"right"},u={horizontal:n>=0||"+"===n?"top":"bottom",vertical:"middle"},h={horizontal:0,vertical:Sz/2},d="vertical"===s?l.height:l.width,p=t.getModel("controlStyle"),f=p.get("show",!0),g=f?p.get("itemSize"):0,m=f?p.get("itemGap"):0,v=g+m,y=t.get(["label","rotate"])||0;y=y*Sz/180;var b=p.get("position",!0),x=f&&p.get("showPlayBtn",!0),_=f&&p.get("showPrevBtn",!0),w=f&&p.get("showNextBtn",!0),S=0,C=d;"left"===b||"bottom"===b?(x&&(i=[0,0],S+=v),_&&(r=[S,0],S+=v),w&&(o=[C-g,0],C-=v)):(x&&(i=[C-g,0],C-=v),_&&(r=[0,0],S+=v),w&&(o=[C-g,0],C-=v));var k=[S,C];return t.get("inverse")&&k.reverse(),{viewRect:l,mainLength:d,orient:s,rotation:h[s],labelRotation:y,labelPosOpt:n,labelAlign:t.get(["label","align"])||c[s],labelBaseline:t.get(["label","verticalAlign"])||t.get(["label","baseline"])||u[s],playPosition:i,prevBtnPosition:r,nextBtnPosition:o,axisExtent:k,controlSize:g,controlGap:m}},e.prototype._position=function(t,e){var n=this._mainGroup,i=this._labelGroup,r=t.viewRect;if("vertical"===t.orient){var o=[1,0,0,1,0,0],a=r.x,s=r.y+r.height;_e(o,o,[-a,-s]),we(o,o,-Sz/2),_e(o,o,[a,s]),(r=r.clone()).applyTransform(o)}var l=m(r),c=m(n.getBoundingRect()),u=m(i.getBoundingRect()),h=[n.x,n.y],d=[i.x,i.y];d[0]=h[0]=l[0][0];var p,f=t.labelPosOpt;function g(t){t.originX=l[0][0]-t.x,t.originY=l[1][0]-t.y}function m(t){return[[t.x,t.x+t.width],[t.y,t.y+t.height]]}function v(t,e,n,i,r){t[i]+=n[i][r]-e[i][r]}null==f||G(f)?(v(h,c,l,1,p="+"===f?0:1),v(d,u,l,1,1-p)):(v(h,c,l,1,p=f>=0?0:1),d[1]=h[1]+f),n.setPosition(h),i.setPosition(d),n.rotation=i.rotation=t.rotation,g(n),g(i)},e.prototype._createAxis=function(t,e){var n=e.getData(),i=e.get("axisType"),r=function(t,e){if(e=e||t.get("type"))switch(e){case"category":return new fb({ordinalMeta:t.getCategories(),extent:[1/0,-1/0]});case"time":return new Eb({locale:t.ecModel.getLocaleModel(),useUTC:t.ecModel.get("useUTC")});default:return new mb}}(e,i);r.getTicks=function(){return n.mapArray(["value"],(function(t){return{value:t}}))};var o=n.getDataExtent("value");r.setExtent(o[0],o[1]),r.calcNiceTicks();var a=new wz("value",r,t.axisExtent,i);return a.model=e,a},e.prototype._createGroup=function(t){var e=this[t]=new Dr;return this.group.add(e),e},e.prototype._renderAxisLine=function(t,e,n,i){var r=n.getExtent();if(i.get(["lineStyle","show"])){var o=new Fc({shape:{x1:r[0],y1:0,x2:r[1],y2:0},style:I({lineCap:"round"},i.getModel("lineStyle").getLineStyle()),silent:!0,z2:1});e.add(o);var a=this._progressLine=new Fc({shape:{x1:r[0],x2:this._currentPointer?this._currentPointer.x:r[0],y1:0,y2:0},style:E({lineCap:"round",lineWidth:o.style.lineWidth},i.getModel(["progress","lineStyle"]).getLineStyle()),silent:!0,z2:1});e.add(a)}},e.prototype._renderAxisTick=function(t,e,n,i){var r=this,o=i.getData(),a=n.scale.getTicks();this._tickSymbols=[],R(a,(function(t){var a=n.dataToCoord(t.value),s=o.getItemModel(t.value),l=s.getModel("itemStyle"),c=s.getModel(["emphasis","itemStyle"]),u=s.getModel(["progress","itemStyle"]),h={x:a,y:0,onclick:W(r._changeTimeline,r,t.value)},d=Az(s,l,e,h);d.ensureState("emphasis").style=c.getItemStyle(),d.ensureState("progress").style=u.getItemStyle(),Rl(d);var p=$s(d);s.get("tooltip")?(p.dataIndex=t.value,p.dataModel=i):p.dataIndex=p.dataModel=null,r._tickSymbols.push(d)}))},e.prototype._renderAxisLabel=function(t,e,n,i){var r=this;if(n.getLabelModel().get("show")){var o=i.getData(),a=n.getViewLabels();this._tickLabels=[],R(a,(function(i){var a=i.tickValue,s=o.getItemModel(a),l=s.getModel("label"),c=s.getModel(["emphasis","label"]),u=s.getModel(["progress","label"]),h=n.dataToCoord(i.tickValue),d=new Rs({x:h,y:0,rotation:t.labelRotation-t.rotation,onclick:W(r._changeTimeline,r,a),silent:!1,style:qu(l,{text:i.formattedLabel,align:t.labelAlign,verticalAlign:t.labelBaseline})});d.ensureState("emphasis").style=qu(c),d.ensureState("progress").style=qu(u),e.add(d),Rl(d),Cz(d).dataIndex=a,r._tickLabels.push(d)}))}},e.prototype._renderControl=function(t,e,n,i){var r=t.controlSize,o=t.rotation,a=i.getModel("controlStyle").getItemStyle(),s=i.getModel(["emphasis","controlStyle"]).getItemStyle(),l=i.getPlayState(),c=i.get("inverse",!0);function u(t,n,l,c){if(t){var u=xr(rt(i.get(["controlStyle",n+"BtnSize"]),r),r),h=function(t,e,n,i){var r=i.style,o=Pu(t.get(["controlStyle",e]),i||{},new Re(n[0],n[1],n[2],n[3]));return r&&o.setStyle(r),o}(i,n+"Icon",[0,-u/2,u,u],{x:t[0],y:t[1],originX:r/2,originY:0,rotation:c?-o:0,rectHover:!0,style:a,onclick:l});h.ensureState("emphasis").style=s,e.add(h),Rl(h)}}u(t.nextBtnPosition,"next",W(this._changeTimeline,this,c?"-":"+")),u(t.prevBtnPosition,"prev",W(this._changeTimeline,this,c?"+":"-")),u(t.playPosition,l?"stop":"play",W(this._handlePlayClick,this,!l),!0)},e.prototype._renderCurrentPointer=function(t,e,n,i){var r=i.getData(),o=i.getCurrentIndex(),a=r.getItemModel(o).getModel("checkpointStyle"),s=this,l={onCreate:function(t){t.draggable=!0,t.drift=W(s._handlePointerDrag,s),t.ondragend=W(s._handlePointerDragend,s),Mz(t,s._progressLine,o,n,i,!0)},onUpdate:function(t){Mz(t,s._progressLine,o,n,i)}};this._currentPointer=Az(a,a,this._mainGroup,{},this._currentPointer,l)},e.prototype._handlePlayClick=function(t){this._clearTimer(),this.api.dispatchAction({type:"timelinePlayChange",playState:t,from:this.uid})},e.prototype._handlePointerDrag=function(t,e,n){this._clearTimer(),this._pointerChangeTimeline([n.offsetX,n.offsetY])},e.prototype._handlePointerDragend=function(t){this._pointerChangeTimeline([t.offsetX,t.offsetY],!0)},e.prototype._pointerChangeTimeline=function(t,e){var n=this._toAxisCoord(t)[0],i=Xr(this._axis.getExtent().slice());n>i[1]&&(n=i[1]),n<i[0]&&(n=i[0]),this._currentPointer.x=n,this._currentPointer.markRedraw();var r=this._progressLine;r&&(r.shape.x2=n,r.dirty());var o=this._findNearestTick(n),a=this.model;(e||o!==a.getCurrentIndex()&&a.get("realtime"))&&this._changeTimeline(o)},e.prototype._doPlayStop=function(){var t=this;this._clearTimer(),this.model.getPlayState()&&(this._timer=setTimeout((function(){var e=t.model;t._changeTimeline(e.getCurrentIndex()+(e.get("rewind",!0)?-1:1))}),this.model.get("playInterval")))},e.prototype._toAxisCoord=function(t){return Tu(t,this._mainGroup.getLocalTransform(),!0)},e.prototype._findNearestTick=function(t){var e,n=this.model.getData(),i=1/0,r=this._axis;return n.each(["value"],(function(n,o){var a=r.dataToCoord(n),s=Math.abs(a-t);s<i&&(i=s,e=o)})),e},e.prototype._clearTimer=function(){this._timer&&(clearTimeout(this._timer),this._timer=null)},e.prototype._changeTimeline=function(t){var e=this.model.getCurrentIndex();"+"===t?t=e+1:"-"===t&&(t=e-1),this.api.dispatchAction({type:"timelineChange",currentIndex:t,from:this.uid})},e.prototype._updateTicksStatus=function(){var t=this.model.getCurrentIndex(),e=this._tickSymbols,n=this._tickLabels;if(e)for(var i=0;i<e.length;i++)e&&e[i]&&e[i].toggleState("progress",i<t);if(n)for(i=0;i<n.length;i++)n&&n[i]&&n[i].toggleState("progress",Cz(n[i]).dataIndex<=t)},e.type="timeline.slider",e}(_z);function Az(t,e,n,i,r,o){var a=e.get("color");r?(r.setColor(a),n.add(r),o&&o.onUpdate(r)):((r=Mm(t.get("symbol"),-1,-1,2,2,a)).setStyle("strokeNoScale",!0),n.add(r),o&&o.onCreate(r));var s=e.getItemStyle(["color"]);r.setStyle(s),i=M({rectHover:!0,z2:100},i,!0);var l=Tm(t.get("symbolSize"));i.scaleX=l[0]/2,i.scaleY=l[1]/2;var c=Im(t.get("symbolOffset"),l);c&&(i.x=(i.x||0)+c[0],i.y=(i.y||0)+c[1]);var u=t.get("symbolRotate");return i.rotation=(u||0)*Math.PI/180||0,r.attr(i),r.updateTransform(),r}function Mz(t,e,n,i,r,o){if(!t.dragging){var a=r.getModel("checkpointStyle"),s=i.dataToCoord(r.getData().get("value",n));if(o||!a.get("animation",!0))t.attr({x:s,y:0}),e&&e.attr({shape:{x2:s}});else{var l={duration:a.get("animationDuration",!0),easing:a.get("animationEasing",!0)};t.stopAnimation(null,!0),t.animateTo({x:s,y:0},l),e&&e.animateTo({shape:{x2:s}},l)}}}function Tz(t){var e=t&&t.timeline;Y(e)||(e=e?[e]:[]),R(e,(function(t){t&&function(t){var e=t.type,n={number:"value",time:"time"};if(n[e]&&(t.axisType=n[e],delete t.type),Iz(t),Ez(t,"controlPosition")){var i=t.controlStyle||(t.controlStyle={});Ez(i,"position")||(i.position=t.controlPosition),"none"!==i.position||Ez(i,"show")||(i.show=!1,delete i.position),delete t.controlPosition}R(t.data||[],(function(t){$(t)&&!Y(t)&&(!Ez(t,"value")&&Ez(t,"name")&&(t.value=t.name),Iz(t))}))}(t)}))}function Iz(t){var e=t.itemStyle||(t.itemStyle={}),n=e.emphasis||(e.emphasis={}),i=t.label||t.label||{},r=i.normal||(i.normal={}),o={normal:1,emphasis:1};R(i,(function(t,e){o[e]||Ez(r,e)||(r[e]=t)})),n.label&&!Ez(i,"emphasis")&&(i.emphasis=n.label,delete n.label)}function Ez(t,e){return t.hasOwnProperty(e)}function Oz(t,e){if(!t)return!1;for(var n=Y(t)?t:[t],i=0;i<n.length;i++)if(n[i]&&n[i][e])return!0;return!1}function Dz(t){yo(t,"label",["show"])}var Lz=Io(),Pz=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.createdBySelf=!1,n}return n(e,t),e.prototype.init=function(t,e,n){this.mergeDefaultAndTheme(t,n),this._mergeOption(t,n,!1,!0)},e.prototype.isAnimationEnabled=function(){if(r.node)return!1;var t=this.__hostSeries;return this.getShallow("animation")&&t&&t.isAnimationEnabled()},e.prototype.mergeOption=function(t,e){this._mergeOption(t,e,!1,!1)},e.prototype._mergeOption=function(t,e,n,i){var r=this.mainType;n||e.eachSeries((function(t){var n=t.get(this.mainType,!0),o=Lz(t)[r];n&&n.data?(o?o._mergeOption(n,e,!0):(i&&Dz(n),R(n.data,(function(t){t instanceof Array?(Dz(t[0]),Dz(t[1])):Dz(t)})),I(o=this.createMarkerModelFromSeries(n,this,e),{mainType:this.mainType,seriesIndex:t.seriesIndex,name:t.name,createdBySelf:!0}),o.__hostSeries=t),Lz(t)[r]=o):Lz(t)[r]=null}),this)},e.prototype.formatTooltip=function(t,e,n){var i=this.getData(),r=this.getRawValue(t),o=i.getName(t);return Hf("section",{header:this.name,blocks:[Hf("nameValue",{name:o,value:r,noName:!o,noValue:null==r})]})},e.prototype.getData=function(){return this._data},e.prototype.setData=function(t){this._data=t},e.getMarkerModelFromSeries=function(t,e){return Lz(t)[e]},e.type="marker",e.dependencies=["series","grid","polar","geo"],e}(Sd);P(Pz,ef.prototype);var Nz=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.prototype.createMarkerModelFromSeries=function(t,n,i){return new e(t,n,i)},e.type="markPoint",e.defaultOption={z:5,symbol:"pin",symbolSize:50,tooltip:{trigger:"item"},label:{show:!0,position:"inside"},itemStyle:{borderWidth:2},emphasis:{label:{show:!0}}},e}(Pz);function Rz(t){return!(isNaN(parseFloat(t.x))&&isNaN(parseFloat(t.y)))}function Bz(t,e,n,i,r,o){var a=[],s=tb(e,i)?e.getCalculationInfo("stackResultDimension"):i,l=jz(e,s,t),c=e.indicesOfNearest(s,l)[0];a[r]=e.get(n,c),a[o]=e.get(s,c);var u=e.get(i,c),h=Gr(e.get(i,c));return(h=Math.min(h,20))>=0&&(a[o]=+a[o].toFixed(h)),[a,u]}var zz={min:j(Bz,"min"),max:j(Bz,"max"),average:j(Bz,"average"),median:j(Bz,"median")};function Fz(t,e){if(e){var n=t.getData(),i=t.coordinateSystem,r=i&&i.dimensions;if(!function(t){return!isNaN(parseFloat(t.x))&&!isNaN(parseFloat(t.y))}(e)&&!Y(e.coord)&&Y(r)){var o=Vz(e,n,i,t);if((e=A(e)).type&&zz[e.type]&&o.baseAxis&&o.valueAxis){var a=D(r,o.baseAxis.dim),s=D(r,o.valueAxis.dim),l=zz[e.type](n,o.baseDataDim,o.valueDataDim,a,s);e.coord=l[0],e.value=l[1]}else e.coord=[null!=e.xAxis?e.xAxis:e.radiusAxis,null!=e.yAxis?e.yAxis:e.angleAxis]}if(null!=e.coord&&Y(r))for(var c=e.coord,u=0;u<2;u++)zz[c[u]]&&(c[u]=jz(n,n.mapDimension(r[u]),c[u]));else e.coord=[];return e}}function Vz(t,e,n,i){var r={};return null!=t.valueIndex||null!=t.valueDim?(r.valueDataDim=null!=t.valueIndex?e.getDimension(t.valueIndex):t.valueDim,r.valueAxis=n.getAxis(function(t,e){var n=t.getData().getDimensionInfo(e);return n&&n.coordDim}(i,r.valueDataDim)),r.baseAxis=n.getOtherAxis(r.valueAxis),r.baseDataDim=e.mapDimension(r.baseAxis.dim)):(r.baseAxis=i.getBaseAxis(),r.valueAxis=n.getOtherAxis(r.baseAxis),r.baseDataDim=e.mapDimension(r.baseAxis.dim),r.valueDataDim=e.mapDimension(r.valueAxis.dim)),r}function Hz(t,e){return!(t&&t.containData&&e.coord&&!Rz(e))||t.containData(e.coord)}function Wz(t,e){return t?function(t,n,i,r){return sf(r<2?t.coord&&t.coord[r]:t.value,e[r])}:function(t,n,i,r){return sf(t.value,e[r])}}function jz(t,e,n){if("average"===n){var i=0,r=0;return t.each(e,(function(t,e){isNaN(t)||(i+=t,r++)})),i/r}return"median"===n?t.getMedian(e):t.getDataExtent(e)["max"===n?1:0]}var Yz=Io(),Xz=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.prototype.init=function(){this.markerGroupMap=mt()},e.prototype.render=function(t,e,n){var i=this,r=this.markerGroupMap;r.each((function(t){Yz(t).keep=!1})),e.eachSeries((function(t){var r=Pz.getMarkerModelFromSeries(t,i.type);r&&i.renderSeries(t,r,e,n)})),r.each((function(t){!Yz(t).keep&&i.group.remove(t.group)}))},e.prototype.markKeep=function(t){Yz(t).keep=!0},e.prototype.toggleBlurSeries=function(t,e){var n=this;R(t,(function(t){var i=Pz.getMarkerModelFromSeries(t,n.type);i&&i.getData().eachItemGraphicEl((function(t){t&&(e?kl(t):Al(t))}))}))},e.type="marker",e}(hg);function Gz(t,e,n){var i=e.coordinateSystem;t.each((function(r){var o,a=t.getItemModel(r),s=jr(a.get("x"),n.getWidth()),l=jr(a.get("y"),n.getHeight());if(isNaN(s)||isNaN(l)){if(e.getMarkerPosition)o=e.getMarkerPosition(t.getValues(t.dimensions,r));else if(i){var c=t.get(i.dimensions[0],r),u=t.get(i.dimensions[1],r);o=i.dataToPoint([c,u])}}else o=[s,l];isNaN(s)||(o[0]=s),isNaN(l)||(o[1]=l),t.setItemLayout(r,o)}))}var qz=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.prototype.updateTransform=function(t,e,n){e.eachSeries((function(t){var e=Pz.getMarkerModelFromSeries(t,"markPoint");e&&(Gz(e.getData(),t,n),this.markerGroupMap.get(t.id).updateLayout())}),this)},e.prototype.renderSeries=function(t,e,n,i){var r=t.coordinateSystem,o=t.id,a=t.getData(),s=this.markerGroupMap,l=s.get(o)||s.set(o,new $w),c=function(t,e,n){var i;i=t?B(t&&t.dimensions,(function(t){return I(I({},e.getData().getDimensionInfo(e.getData().mapDimension(t))||{}),{name:t,ordinalMeta:null})})):[{name:"value",type:"float"}];var r=new qy(i,n),o=B(n.get("data"),j(Fz,e));t&&(o=F(o,j(Hz,t)));var a=Wz(!!t,i);return r.initData(o,null,a),r}(r,t,e);e.setData(c),Gz(e.getData(),t,i),c.each((function(t){var n=c.getItemModel(t),i=n.getShallow("symbol"),r=n.getShallow("symbolSize"),o=n.getShallow("symbolRotate"),s=n.getShallow("symbolOffset"),l=n.getShallow("symbolKeepAspect");if(X(i)||X(r)||X(o)||X(s)){var u=e.getRawValue(t),h=e.getDataParams(t);X(i)&&(i=i(u,h)),X(r)&&(r=r(u,h)),X(o)&&(o=o(u,h)),X(s)&&(s=s(u,h))}var d=n.getModel("itemStyle").getItemStyle(),p=hm(a,"color");d.fill||(d.fill=p),c.setItemVisual(t,{symbol:i,symbolSize:r,symbolRotate:o,symbolOffset:s,symbolKeepAspect:l,style:d})})),l.updateData(c),this.group.add(l.group),c.eachItemGraphicEl((function(t){t.traverse((function(t){$s(t).dataModel=e}))})),this.markKeep(l),l.group.silent=e.get("silent")||t.get("silent")},e.type="markPoint",e}(Xz),Uz=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.prototype.createMarkerModelFromSeries=function(t,n,i){return new e(t,n,i)},e.type="markLine",e.defaultOption={z:5,symbol:["circle","arrow"],symbolSize:[8,16],symbolOffset:0,precision:2,tooltip:{trigger:"item"},label:{show:!0,position:"end",distance:5},lineStyle:{type:"dashed"},emphasis:{label:{show:!0},lineStyle:{width:3}},animationEasing:"linear"},e}(Pz),$z=Io(),Zz=function(t,e,n,i){var r,o=t.getData();if(Y(i))r=i;else{var a=i.type;if("min"===a||"max"===a||"average"===a||"median"===a||null!=i.xAxis||null!=i.yAxis){var s=void 0,l=void 0;if(null!=i.yAxis||null!=i.xAxis)s=e.getAxis(null!=i.yAxis?"y":"x"),l=it(i.yAxis,i.xAxis);else{var c=Vz(i,o,e,t);s=c.valueAxis,l=jz(o,eb(o,c.valueDataDim),a)}var u="x"===s.dim?0:1,h=1-u,d=A(i),p={coord:[]};d.type=null,d.coord=[],d.coord[h]=-1/0,p.coord[h]=1/0;var f=n.get("precision");f>=0&&U(l)&&(l=+l.toFixed(Math.min(f,20))),d.coord[u]=p.coord[u]=l,r=[d,p,{type:a,valueIndex:i.valueIndex,value:l}]}else r=[]}var g=[Fz(t,r[0]),Fz(t,r[1]),I({},r[2])];return g[2].type=g[2].type||null,M(g[2],g[0]),M(g[2],g[1]),g};function Kz(t){return!isNaN(t)&&!isFinite(t)}function Qz(t,e,n,i){var r=1-t,o=i.dimensions[t];return Kz(e[r])&&Kz(n[r])&&e[t]===n[t]&&i.getAxis(o).containData(e[t])}function Jz(t,e){if("cartesian2d"===t.type){var n=e[0].coord,i=e[1].coord;if(n&&i&&(Qz(1,n,i,t)||Qz(0,n,i,t)))return!0}return Hz(t,e[0])&&Hz(t,e[1])}function tF(t,e,n,i,r){var o,a=i.coordinateSystem,s=t.getItemModel(e),l=jr(s.get("x"),r.getWidth()),c=jr(s.get("y"),r.getHeight());if(isNaN(l)||isNaN(c)){if(i.getMarkerPosition)o=i.getMarkerPosition(t.getValues(t.dimensions,e));else{var u=a.dimensions,h=t.get(u[0],e),d=t.get(u[1],e);o=a.dataToPoint([h,d])}if(cS(a,"cartesian2d")){var p=a.getAxis("x"),f=a.getAxis("y");u=a.dimensions,Kz(t.get(u[0],e))?o[0]=p.toGlobalCoord(p.getExtent()[n?0:1]):Kz(t.get(u[1],e))&&(o[1]=f.toGlobalCoord(f.getExtent()[n?0:1]))}isNaN(l)||(o[0]=l),isNaN(c)||(o[1]=c)}else o=[l,c];t.setItemLayout(e,o)}var eF=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.prototype.updateTransform=function(t,e,n){e.eachSeries((function(t){var e=Pz.getMarkerModelFromSeries(t,"markLine");if(e){var i=e.getData(),r=$z(e).from,o=$z(e).to;r.each((function(e){tF(r,e,!0,t,n),tF(o,e,!1,t,n)})),i.each((function(t){i.setItemLayout(t,[r.getItemLayout(t),o.getItemLayout(t)])})),this.markerGroupMap.get(t.id).updateLayout()}}),this)},e.prototype.renderSeries=function(t,e,n,i){var r=t.coordinateSystem,o=t.id,a=t.getData(),s=this.markerGroupMap,l=s.get(o)||s.set(o,new fI);this.group.add(l.group);var c=function(t,e,n){var i;i=t?B(t&&t.dimensions,(function(t){return I(I({},e.getData().getDimensionInfo(e.getData().mapDimension(t))||{}),{name:t,ordinalMeta:null})})):[{name:"value",type:"float"}];var r=new qy(i,n),o=new qy(i,n),a=new qy([],n),s=B(n.get("data"),j(Zz,e,t,n));t&&(s=F(s,j(Jz,t)));var l=Wz(!!t,i);return r.initData(B(s,(function(t){return t[0]})),null,l),o.initData(B(s,(function(t){return t[1]})),null,l),a.initData(B(s,(function(t){return t[2]}))),a.hasItemOption=!0,{from:r,to:o,line:a}}(r,t,e),u=c.from,h=c.to,d=c.line;$z(e).from=u,$z(e).to=h,e.setData(d);var p=e.get("symbol"),f=e.get("symbolSize"),g=e.get("symbolRotate"),m=e.get("symbolOffset");function v(e,n,r){var o=e.getItemModel(n);tF(e,n,r,t,i);var s=o.getModel("itemStyle").getItemStyle();null==s.fill&&(s.fill=hm(a,"color")),e.setItemVisual(n,{symbolKeepAspect:o.get("symbolKeepAspect"),symbolOffset:rt(o.get("symbolOffset",!0),m[r?0:1]),symbolRotate:rt(o.get("symbolRotate",!0),g[r?0:1]),symbolSize:rt(o.get("symbolSize"),f[r?0:1]),symbol:rt(o.get("symbol",!0),p[r?0:1]),style:s})}Y(p)||(p=[p,p]),Y(f)||(f=[f,f]),Y(g)||(g=[g,g]),Y(m)||(m=[m,m]),c.from.each((function(t){v(u,t,!0),v(h,t,!1)})),d.each((function(t){var e=d.getItemModel(t).getModel("lineStyle").getLineStyle();d.setItemLayout(t,[u.getItemLayout(t),h.getItemLayout(t)]),null==e.stroke&&(e.stroke=u.getItemVisual(t,"style").fill),d.setItemVisual(t,{fromSymbolKeepAspect:u.getItemVisual(t,"symbolKeepAspect"),fromSymbolOffset:u.getItemVisual(t,"symbolOffset"),fromSymbolRotate:u.getItemVisual(t,"symbolRotate"),fromSymbolSize:u.getItemVisual(t,"symbolSize"),fromSymbol:u.getItemVisual(t,"symbol"),toSymbolKeepAspect:h.getItemVisual(t,"symbolKeepAspect"),toSymbolOffset:h.getItemVisual(t,"symbolOffset"),toSymbolRotate:h.getItemVisual(t,"symbolRotate"),toSymbolSize:h.getItemVisual(t,"symbolSize"),toSymbol:h.getItemVisual(t,"symbol"),style:e})})),l.updateData(d),c.line.eachItemGraphicEl((function(t){$s(t).dataModel=e,t.traverse((function(t){$s(t).dataModel=e}))})),this.markKeep(l),l.group.silent=e.get("silent")||t.get("silent")},e.type="markLine",e}(Xz),nF=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.prototype.createMarkerModelFromSeries=function(t,n,i){return new e(t,n,i)},e.type="markArea",e.defaultOption={z:1,tooltip:{trigger:"item"},animation:!1,label:{show:!0,position:"top"},itemStyle:{borderWidth:0},emphasis:{label:{show:!0,position:"top"}}},e}(Pz),iF=Io(),rF=function(t,e,n,i){var r=i[0],o=i[1];if(r&&o){var a=Fz(t,r),s=Fz(t,o),l=a.coord,c=s.coord;l[0]=it(l[0],-1/0),l[1]=it(l[1],-1/0),c[0]=it(c[0],1/0),c[1]=it(c[1],1/0);var u=T([{},a,s]);return u.coord=[a.coord,s.coord],u.x0=a.x,u.y0=a.y,u.x1=s.x,u.y1=s.y,u}};function oF(t){return!isNaN(t)&&!isFinite(t)}function aF(t,e,n,i){var r=1-t;return oF(e[r])&&oF(n[r])}function sF(t,e){var n=e.coord[0],i=e.coord[1],r={coord:n,x:e.x0,y:e.y0},o={coord:i,x:e.x1,y:e.y1};return cS(t,"cartesian2d")?!(!n||!i||!aF(1,n,i)&&!aF(0,n,i))||function(t,e,n){return!(t&&t.containZone&&e.coord&&n.coord&&!Rz(e)&&!Rz(n))||t.containZone(e.coord,n.coord)}(t,r,o):Hz(t,r)||Hz(t,o)}function lF(t,e,n,i,r){var o,a=i.coordinateSystem,s=t.getItemModel(e),l=jr(s.get(n[0]),r.getWidth()),c=jr(s.get(n[1]),r.getHeight());if(isNaN(l)||isNaN(c)){if(i.getMarkerPosition){var u=t.getValues(["x0","y0"],e),h=t.getValues(["x1","y1"],e),d=a.clampData(u),p=a.clampData(h),f=[];"x0"===n[0]?f[0]=d[0]>p[0]?h[0]:u[0]:f[0]=d[0]>p[0]?u[0]:h[0],"y0"===n[1]?f[1]=d[1]>p[1]?h[1]:u[1]:f[1]=d[1]>p[1]?u[1]:h[1],o=i.getMarkerPosition(f,n,!0)}else{var g=[y=t.get(n[0],e),b=t.get(n[1],e)];a.clampData&&a.clampData(g,g),o=a.dataToPoint(g,!0)}if(cS(a,"cartesian2d")){var m=a.getAxis("x"),v=a.getAxis("y"),y=t.get(n[0],e),b=t.get(n[1],e);oF(y)?o[0]=m.toGlobalCoord(m.getExtent()["x0"===n[0]?0:1]):oF(b)&&(o[1]=v.toGlobalCoord(v.getExtent()["y0"===n[1]?0:1]))}isNaN(l)||(o[0]=l),isNaN(c)||(o[1]=c)}else o=[l,c];return o}var cF=[["x0","y0"],["x1","y0"],["x1","y1"],["x0","y1"]],uF=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.prototype.updateTransform=function(t,e,n){e.eachSeries((function(t){var e=Pz.getMarkerModelFromSeries(t,"markArea");if(e){var i=e.getData();i.each((function(e){var r=B(cF,(function(r){return lF(i,e,r,t,n)}));i.setItemLayout(e,r),i.getItemGraphicEl(e).setShape("points",r)}))}}),this)},e.prototype.renderSeries=function(t,e,n,i){var r=t.coordinateSystem,o=t.id,a=t.getData(),s=this.markerGroupMap,l=s.get(o)||s.set(o,{group:new Dr});this.group.add(l.group),this.markKeep(l);var c=function(t,e,n){var i,r;if(t){var o=B(t&&t.dimensions,(function(t){var n=e.getData();return I(I({},n.getDimensionInfo(n.mapDimension(t))||{}),{name:t,ordinalMeta:null})}));r=B(["x0","y0","x1","y1"],(function(t,e){return{name:t,type:o[e%2].type}})),i=new qy(r,n)}else i=new qy(r=[{name:"value",type:"float"}],n);var a=B(n.get("data"),j(rF,e,t,n));t&&(a=F(a,j(sF,t)));var s=t?function(t,e,n,i){return sf(t.coord[Math.floor(i/2)][i%2],r[i])}:function(t,e,n,i){return sf(t.value,r[i])};return i.initData(a,null,s),i.hasItemOption=!0,i}(r,t,e);e.setData(c),c.each((function(e){var n=B(cF,(function(n){return lF(c,e,n,t,i)})),o=r.getAxis("x").scale,s=r.getAxis("y").scale,l=o.getExtent(),u=s.getExtent(),h=[o.parse(c.get("x0",e)),o.parse(c.get("x1",e))],d=[s.parse(c.get("y0",e)),s.parse(c.get("y1",e))];Xr(h),Xr(d);var p=!!(l[0]>h[1]||l[1]<h[0]||u[0]>d[1]||u[1]<d[0]);c.setItemLayout(e,{points:n,allClipped:p});var f=c.getItemModel(e).getModel("itemStyle").getItemStyle(),g=hm(a,"color");f.fill||(f.fill=g,G(f.fill)&&(f.fill=ti(f.fill,.4))),f.stroke||(f.stroke=g),c.setItemVisual(e,"style",f)})),c.diff(iF(l).data).add((function(t){var e=c.getItemLayout(t);if(!e.allClipped){var n=new Pc({shape:{points:e.points}});c.setItemGraphicEl(t,n),l.group.add(n)}})).update((function(t,n){var i=iF(l).data.getItemGraphicEl(n),r=c.getItemLayout(t);r.allClipped?i&&l.group.remove(i):(i?au(i,{shape:{points:r.points}},e,t):i=new Pc({shape:{points:r.points}}),c.setItemGraphicEl(t,i),l.group.add(i))})).remove((function(t){var e=iF(l).data.getItemGraphicEl(t);l.group.remove(e)})).execute(),c.eachItemGraphicEl((function(t,n){var i=c.getItemModel(n),r=c.getItemVisual(n,"style");t.useStyle(c.getItemVisual(n,"style")),Xu(t,Gu(i),{labelFetcher:e,labelDataIndex:n,defaultText:c.getName(n)||"",inheritColor:G(r.fill)?ti(r.fill,1):"#000"}),Hl(t,i),Bl(t,null,null,i.get(["emphasis","disabled"])),$s(t).dataModel=e})),iF(l).data=c,l.group.silent=e.get("silent")||t.get("silent")},e.type="markArea",e}(Xz),hF=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.layoutMode={type:"box",ignoreSize:!0},n}return n(e,t),e.prototype.init=function(t,e,n){this.mergeDefaultAndTheme(t,n),t.selected=t.selected||{},this._updateSelector(t)},e.prototype.mergeOption=function(e,n){t.prototype.mergeOption.call(this,e,n),this._updateSelector(e)},e.prototype._updateSelector=function(t){var e=t.selector,n=this.ecModel;!0===e&&(e=t.selector=["all","inverse"]),Y(e)&&R(e,(function(t,i){G(t)&&(t={type:t}),e[i]=M(t,function(t,e){return"all"===e?{type:"all",title:t.getLocaleModel().get(["legend","selector","all"])}:"inverse"===e?{type:"inverse",title:t.getLocaleModel().get(["legend","selector","inverse"])}:void 0}(n,t.type))}))},e.prototype.optionUpdated=function(){this._updateData(this.ecModel);var t=this._data;if(t[0]&&"single"===this.get("selectedMode")){for(var e=!1,n=0;n<t.length;n++){var i=t[n].get("name");if(this.isSelected(i)){this.select(i),e=!0;break}}!e&&this.select(t[0].get("name"))}},e.prototype._updateData=function(t){var e=[],n=[];t.eachRawSeries((function(i){var r,o=i.name;if(n.push(o),i.legendVisualProvider){var a=i.legendVisualProvider.getAllNames();t.isSeriesFiltered(i)||(n=n.concat(a)),a.length?e=e.concat(a):r=!0}else r=!0;r&&Ao(i)&&e.push(i.name)})),this._availableNames=n;var i=this.get("data")||e,r=mt(),o=B(i,(function(t){return(G(t)||U(t))&&(t={name:t}),r.get(t.name)?null:(r.set(t.name,!0),new gh(t,this,this.ecModel))}),this);this._data=F(o,(function(t){return!!t}))},e.prototype.getData=function(){return this._data},e.prototype.select=function(t){var e=this.option.selected;"single"===this.get("selectedMode")&&R(this._data,(function(t){e[t.get("name")]=!1})),e[t]=!0},e.prototype.unSelect=function(t){"single"!==this.get("selectedMode")&&(this.option.selected[t]=!1)},e.prototype.toggleSelected=function(t){var e=this.option.selected;e.hasOwnProperty(t)||(e[t]=!0),this[e[t]?"unSelect":"select"](t)},e.prototype.allSelect=function(){var t=this._data,e=this.option.selected;R(t,(function(t){e[t.get("name",!0)]=!0}))},e.prototype.inverseSelect=function(){var t=this._data,e=this.option.selected;R(t,(function(t){var n=t.get("name",!0);e.hasOwnProperty(n)||(e[n]=!0),e[n]=!e[n]}))},e.prototype.isSelected=function(t){var e=this.option.selected;return!(e.hasOwnProperty(t)&&!e[t])&&D(this._availableNames,t)>=0},e.prototype.getOrient=function(){return"vertical"===this.get("orient")?{index:1,name:"vertical"}:{index:0,name:"horizontal"}},e.type="legend.plain",e.dependencies=["series"],e.defaultOption={z:4,show:!0,orient:"horizontal",left:"center",top:0,align:"auto",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",borderRadius:0,borderWidth:0,padding:5,itemGap:10,itemWidth:25,itemHeight:14,symbolRotate:"inherit",symbolKeepAspect:!0,inactiveColor:"#ccc",inactiveBorderColor:"#ccc",inactiveBorderWidth:"auto",itemStyle:{color:"inherit",opacity:"inherit",borderColor:"inherit",borderWidth:"auto",borderCap:"inherit",borderJoin:"inherit",borderDashOffset:"inherit",borderMiterLimit:"inherit"},lineStyle:{width:"auto",color:"inherit",inactiveColor:"#ccc",inactiveWidth:2,opacity:"inherit",type:"inherit",cap:"inherit",join:"inherit",dashOffset:"inherit",miterLimit:"inherit"},textStyle:{color:"#333"},selectedMode:!0,selector:!1,selectorLabel:{show:!0,borderRadius:10,padding:[3,5,3,5],fontSize:12,fontFamily:"sans-serif",color:"#666",borderWidth:1,borderColor:"#666"},emphasis:{selectorLabel:{show:!0,color:"#eee",backgroundColor:"#666"}},selectorPosition:"auto",selectorItemGap:7,selectorButtonGap:10,tooltip:{show:!1}},e}(Sd),dF=j,pF=R,fF=Dr,gF=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.newlineDisabled=!1,n}return n(e,t),e.prototype.init=function(){this.group.add(this._contentGroup=new fF),this.group.add(this._selectorGroup=new fF),this._isFirstRender=!0},e.prototype.getContentGroup=function(){return this._contentGroup},e.prototype.getSelectorGroup=function(){return this._selectorGroup},e.prototype.render=function(t,e,n){var i=this._isFirstRender;if(this._isFirstRender=!1,this.resetInner(),t.get("show",!0)){var r=t.get("align"),o=t.get("orient");r&&"auto"!==r||(r="right"===t.get("left")&&"vertical"===o?"right":"left");var a=t.get("selector",!0),s=t.get("selectorPosition",!0);!a||s&&"auto"!==s||(s="horizontal"===o?"end":"start"),this.renderInner(r,t,e,n,a,o,s);var l=t.getBoxLayoutParams(),c={width:n.getWidth(),height:n.getHeight()},u=t.get("padding"),h=md(l,c,u),d=this.layoutInner(t,r,h,i,a,s),p=md(E({width:d.width,height:d.height},l),c,u);this.group.x=p.x-d.x,this.group.y=p.y-d.y,this.group.markRedraw(),this.group.add(this._backgroundEl=GR(d,t))}},e.prototype.resetInner=function(){this.getContentGroup().removeAll(),this._backgroundEl&&this.group.remove(this._backgroundEl),this.getSelectorGroup().removeAll()},e.prototype.renderInner=function(t,e,n,i,r,o,a){var s=this.getContentGroup(),l=mt(),c=e.get("selectedMode"),u=[];n.eachRawSeries((function(t){!t.get("legendHoverLink")&&u.push(t.id)})),pF(e.getData(),(function(r,o){var a=r.get("name");if(!this.newlineDisabled&&(""===a||"\n"===a)){var h=new fF;return h.newline=!0,void s.add(h)}var d=n.getSeriesByName(a)[0];if(!l.get(a))if(d){var p=d.getData(),f=p.getVisual("legendLineStyle")||{},g=p.getVisual("legendIcon"),m=p.getVisual("style"),v=this._createItem(d,a,o,r,e,t,f,m,g,c,i);v.on("click",dF(mF,a,null,i,u)).on("mouseover",dF(yF,d.name,null,i,u)).on("mouseout",dF(bF,d.name,null,i,u)),n.ssr&&v.eachChild((function(t){var e=$s(t);e.seriesIndex=d.seriesIndex,e.dataIndex=o,e.ssrType="legend"})),l.set(a,!0)}else n.eachRawSeries((function(s){if(!l.get(a)&&s.legendVisualProvider){var h=s.legendVisualProvider;if(!h.containName(a))return;var d=h.indexOfName(a),p=h.getItemVisual(d,"style"),f=h.getItemVisual(d,"legendIcon"),g=Gn(p.fill);g&&0===g[3]&&(g[3]=.2,p=I(I({},p),{fill:ei(g,"rgba")}));var m=this._createItem(s,a,o,r,e,t,{},p,f,c,i);m.on("click",dF(mF,null,a,i,u)).on("mouseover",dF(yF,null,a,i,u)).on("mouseout",dF(bF,null,a,i,u)),n.ssr&&m.eachChild((function(t){var e=$s(t);e.seriesIndex=s.seriesIndex,e.dataIndex=o,e.ssrType="legend"})),l.set(a,!0)}}),this)}),this),r&&this._createSelector(r,e,i,o,a)},e.prototype._createSelector=function(t,e,n,i,r){var o=this.getSelectorGroup();pF(t,(function(t){var i=t.type,r=new Rs({style:{x:0,y:0,align:"center",verticalAlign:"middle"},onclick:function(){n.dispatchAction({type:"all"===i?"legendAllSelect":"legendInverseSelect"})}});o.add(r),Xu(r,{normal:e.getModel("selectorLabel"),emphasis:e.getModel(["emphasis","selectorLabel"])},{defaultText:t.title}),Rl(r)}))},e.prototype._createItem=function(t,e,n,i,r,o,a,s,l,c,u){var h=t.visualDrawType,d=r.get("itemWidth"),p=r.get("itemHeight"),f=r.isSelected(e),g=i.get("symbolRotate"),m=i.get("symbolKeepAspect"),v=i.get("icon"),y=function(t,e,n,i,r,o,a){function s(t,e){"auto"===t.lineWidth&&(t.lineWidth=e.lineWidth>0?2:0),pF(t,(function(n,i){"inherit"===t[i]&&(t[i]=e[i])}))}var l=e.getModel("itemStyle"),c=l.getItemStyle(),u=0===t.lastIndexOf("empty",0)?"fill":"stroke",h=l.getShallow("decal");c.decal=h&&"inherit"!==h?tv(h,a):i.decal,"inherit"===c.fill&&(c.fill=i[r]),"inherit"===c.stroke&&(c.stroke=i[u]),"inherit"===c.opacity&&(c.opacity=("fill"===r?i:n).opacity),s(c,i);var d=e.getModel("lineStyle"),p=d.getLineStyle();if(s(p,n),"auto"===c.fill&&(c.fill=i.fill),"auto"===c.stroke&&(c.stroke=i.fill),"auto"===p.stroke&&(p.stroke=i.fill),!o){var f=e.get("inactiveBorderWidth"),g=c[u];c.lineWidth="auto"===f?i.lineWidth>0&&g?2:0:c.lineWidth,c.fill=e.get("inactiveColor"),c.stroke=e.get("inactiveBorderColor"),p.stroke=d.get("inactiveColor"),p.lineWidth=d.get("inactiveWidth")}return{itemStyle:c,lineStyle:p}}(l=v||l||"roundRect",i,a,s,h,f,u),b=new fF,x=i.getModel("textStyle");if(!X(t.getLegendIcon)||v&&"inherit"!==v){var _="inherit"===v&&t.getData().getVisual("symbol")?"inherit"===g?t.getData().getVisual("symbolRotate"):g:0;b.add(function(t){var e=t.icon||"roundRect",n=Mm(e,0,0,t.itemWidth,t.itemHeight,t.itemStyle.fill,t.symbolKeepAspect);return n.setStyle(t.itemStyle),n.rotation=(t.iconRotate||0)*Math.PI/180,n.setOrigin([t.itemWidth/2,t.itemHeight/2]),e.indexOf("empty")>-1&&(n.style.stroke=n.style.fill,n.style.fill="#fff",n.style.lineWidth=2),n}({itemWidth:d,itemHeight:p,icon:l,iconRotate:_,itemStyle:y.itemStyle,lineStyle:y.lineStyle,symbolKeepAspect:m}))}else b.add(t.getLegendIcon({itemWidth:d,itemHeight:p,icon:l,iconRotate:g,itemStyle:y.itemStyle,lineStyle:y.lineStyle,symbolKeepAspect:m}));var w="left"===o?d+5:-5,S=o,C=r.get("formatter"),k=e;G(C)&&C?k=C.replace("{name}",null!=e?e:""):X(C)&&(k=C(e));var A=f?x.getTextColor():i.get("inactiveColor");b.add(new Rs({style:qu(x,{text:k,x:w,y:p/2,fill:A,align:S,verticalAlign:"middle"},{inheritColor:A})}));var M=new Ls({shape:b.getBoundingRect(),style:{fill:"transparent"}}),T=i.getModel("tooltip");return T.get("show")&&zu({el:M,componentModel:r,itemName:e,itemTooltipOption:T.option}),b.add(M),b.eachChild((function(t){t.silent=!0})),M.silent=!c,this.getContentGroup().add(b),Rl(b),b.__legendDataIndex=n,b},e.prototype.layoutInner=function(t,e,n,i,r,o){var a=this.getContentGroup(),s=this.getSelectorGroup();gd(t.get("orient"),a,t.get("itemGap"),n.width,n.height);var l=a.getBoundingRect(),c=[-l.x,-l.y];if(s.markRedraw(),a.markRedraw(),r){gd("horizontal",s,t.get("selectorItemGap",!0));var u=s.getBoundingRect(),h=[-u.x,-u.y],d=t.get("selectorButtonGap",!0),p=t.getOrient().index,f=0===p?"width":"height",g=0===p?"height":"width",m=0===p?"y":"x";"end"===o?h[p]+=l[f]+d:c[p]+=u[f]+d,h[1-p]+=l[g]/2-u[g]/2,s.x=h[0],s.y=h[1],a.x=c[0],a.y=c[1];var v={x:0,y:0};return v[f]=l[f]+d+u[f],v[g]=Math.max(l[g],u[g]),v[m]=Math.min(0,u[m]+h[1-p]),v}return a.x=c[0],a.y=c[1],this.group.getBoundingRect()},e.prototype.remove=function(){this.getContentGroup().removeAll(),this._isFirstRender=!0},e.type="legend.plain",e}(hg);function mF(t,e,n,i){bF(t,e,n,i),n.dispatchAction({type:"legendToggleSelect",name:null!=t?t:e}),yF(t,e,n,i)}function vF(t){for(var e,n=t.getZr().storage.getDisplayList(),i=0,r=n.length;i<r&&!(e=n[i].states.emphasis);)i++;return e&&e.hoverLayer}function yF(t,e,n,i){vF(n)||n.dispatchAction({type:"highlight",seriesName:t,name:e,excludeSeriesId:i})}function bF(t,e,n,i){vF(n)||n.dispatchAction({type:"downplay",seriesName:t,name:e,excludeSeriesId:i})}function xF(t){var e=t.findComponents({mainType:"legend"});e&&e.length&&t.filterSeries((function(t){for(var n=0;n<e.length;n++)if(!e[n].isSelected(t.name))return!1;return!0}))}function _F(t,e,n){var i,r={},o="toggleSelected"===t;return n.eachComponent("legend",(function(n){o&&null!=i?n[i?"select":"unSelect"](e.name):"allSelect"===t||"inverseSelect"===t?n[t]():(n[t](e.name),i=n.isSelected(e.name)),R(n.getData(),(function(t){var e=t.get("name");if("\n"!==e&&""!==e){var i=n.isSelected(e);r.hasOwnProperty(e)?r[e]=r[e]&&i:r[e]=i}}))})),"allSelect"===t||"inverseSelect"===t?{selected:r}:{name:e.name,selected:r}}function wF(t){t.registerComponentModel(hF),t.registerComponentView(gF),t.registerProcessor(t.PRIORITY.PROCESSOR.SERIES_FILTER,xF),t.registerSubTypeDefaulter("legend",(function(){return"plain"})),function(t){t.registerAction("legendToggleSelect","legendselectchanged",j(_F,"toggleSelected")),t.registerAction("legendAllSelect","legendselectall",j(_F,"allSelect")),t.registerAction("legendInverseSelect","legendinverseselect",j(_F,"inverseSelect")),t.registerAction("legendSelect","legendselected",j(_F,"select")),t.registerAction("legendUnSelect","legendunselected",j(_F,"unSelect"))}(t)}var SF=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.prototype.setScrollDataIndex=function(t){this.option.scrollDataIndex=t},e.prototype.init=function(e,n,i){var r=xd(e);t.prototype.init.call(this,e,n,i),CF(this,e,r)},e.prototype.mergeOption=function(e,n){t.prototype.mergeOption.call(this,e,n),CF(this,this.option,e)},e.type="legend.scroll",e.defaultOption=yh(hF.defaultOption,{scrollDataIndex:0,pageButtonItemGap:5,pageButtonGap:null,pageButtonPosition:"end",pageFormatter:"{current}/{total}",pageIcons:{horizontal:["M0,0L12,-10L12,10z","M0,0L-12,-10L-12,10z"],vertical:["M0,0L20,0L10,-20z","M0,0L20,0L10,20z"]},pageIconColor:"#2f4554",pageIconInactiveColor:"#aaa",pageIconSize:15,pageTextStyle:{color:"#333"},animationDurationUpdate:800}),e}(hF);function CF(t,e,n){var i=[1,1];i[t.getOrient().index]=0,bd(e,n,{type:"box",ignoreSize:!!i})}var kF=Dr,AF=["width","height"],MF=["x","y"],TF=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.newlineDisabled=!0,n._currentIndex=0,n}return n(e,t),e.prototype.init=function(){t.prototype.init.call(this),this.group.add(this._containerGroup=new kF),this._containerGroup.add(this.getContentGroup()),this.group.add(this._controllerGroup=new kF)},e.prototype.resetInner=function(){t.prototype.resetInner.call(this),this._controllerGroup.removeAll(),this._containerGroup.removeClipPath(),this._containerGroup.__rectSize=null},e.prototype.renderInner=function(e,n,i,r,o,a,s){var l=this;t.prototype.renderInner.call(this,e,n,i,r,o,a,s);var c=this._controllerGroup,u=n.get("pageIconSize",!0),h=Y(u)?u:[u,u];p("pagePrev",0);var d=n.getModel("pageTextStyle");function p(t,e){var i=t+"DataIndex",o=Pu(n.get("pageIcons",!0)[n.getOrient().name][e],{onclick:W(l._pageGo,l,i,n,r)},{x:-h[0]/2,y:-h[1]/2,width:h[0],height:h[1]});o.name=t,c.add(o)}c.add(new Rs({name:"pageText",style:{text:"xx/xx",fill:d.getTextColor(),font:d.getFont(),verticalAlign:"middle",align:"center"},silent:!0})),p("pageNext",1)},e.prototype.layoutInner=function(t,e,n,i,r,o){var a=this.getSelectorGroup(),s=t.getOrient().index,l=AF[s],c=MF[s],u=AF[1-s],h=MF[1-s];r&&gd("horizontal",a,t.get("selectorItemGap",!0));var d=t.get("selectorButtonGap",!0),p=a.getBoundingRect(),f=[-p.x,-p.y],g=A(n);r&&(g[l]=n[l]-p[l]-d);var m=this._layoutContentAndController(t,i,g,s,l,u,h,c);if(r){if("end"===o)f[s]+=m[l]+d;else{var v=p[l]+d;f[s]-=v,m[c]-=v}m[l]+=p[l]+d,f[1-s]+=m[h]+m[u]/2-p[u]/2,m[u]=Math.max(m[u],p[u]),m[h]=Math.min(m[h],p[h]+f[1-s]),a.x=f[0],a.y=f[1],a.markRedraw()}return m},e.prototype._layoutContentAndController=function(t,e,n,i,r,o,a,s){var l=this.getContentGroup(),c=this._containerGroup,u=this._controllerGroup;gd(t.get("orient"),l,t.get("itemGap"),i?n.width:null,i?null:n.height),gd("horizontal",u,t.get("pageButtonItemGap",!0));var h=l.getBoundingRect(),d=u.getBoundingRect(),p=this._showController=h[r]>n[r],f=[-h.x,-h.y];e||(f[i]=l[s]);var g=[0,0],m=[-d.x,-d.y],v=rt(t.get("pageButtonGap",!0),t.get("itemGap",!0));p&&("end"===t.get("pageButtonPosition",!0)?m[i]+=n[r]-d[r]:g[i]+=d[r]+v),m[1-i]+=h[o]/2-d[o]/2,l.setPosition(f),c.setPosition(g),u.setPosition(m);var y={x:0,y:0};if(y[r]=p?n[r]:h[r],y[o]=Math.max(h[o],d[o]),y[a]=Math.min(0,d[a]+m[1-i]),c.__rectSize=n[r],p){var b={x:0,y:0};b[r]=Math.max(n[r]-d[r]-v,0),b[o]=y[o],c.setClipPath(new Ls({shape:b})),c.__rectSize=b[r]}else u.eachChild((function(t){t.attr({invisible:!0,silent:!0})}));var x=this._getPageInfo(t);return null!=x.pageIndex&&au(l,{x:x.contentPosition[0],y:x.contentPosition[1]},p?t:null),this._updatePageInfoView(t,x),y},e.prototype._pageGo=function(t,e,n){var i=this._getPageInfo(e)[t];null!=i&&n.dispatchAction({type:"legendScroll",scrollDataIndex:i,legendId:e.id})},e.prototype._updatePageInfoView=function(t,e){var n=this._controllerGroup;R(["pagePrev","pageNext"],(function(i){var r=null!=e[i+"DataIndex"],o=n.childOfName(i);o&&(o.setStyle("fill",r?t.get("pageIconColor",!0):t.get("pageIconInactiveColor",!0)),o.cursor=r?"pointer":"default")}));var i=n.childOfName("pageText"),r=t.get("pageFormatter"),o=e.pageIndex,a=null!=o?o+1:0,s=e.pageCount;i&&r&&i.setStyle("text",G(r)?r.replace("{current}",null==a?"":a+"").replace("{total}",null==s?"":s+""):r({current:a,total:s}))},e.prototype._getPageInfo=function(t){var e=t.get("scrollDataIndex",!0),n=this.getContentGroup(),i=this._containerGroup.__rectSize,r=t.getOrient().index,o=AF[r],a=MF[r],s=this._findTargetItemIndex(e),l=n.children(),c=l[s],u=l.length,h=u?1:0,d={contentPosition:[n.x,n.y],pageCount:h,pageIndex:h-1,pagePrevDataIndex:null,pageNextDataIndex:null};if(!c)return d;var p=y(c);d.contentPosition[r]=-p.s;for(var f=s+1,g=p,m=p,v=null;f<=u;++f)(!(v=y(l[f]))&&m.e>g.s+i||v&&!b(v,g.s))&&(g=m.i>g.i?m:v)&&(null==d.pageNextDataIndex&&(d.pageNextDataIndex=g.i),++d.pageCount),m=v;for(f=s-1,g=p,m=p,v=null;f>=-1;--f)(v=y(l[f]))&&b(m,v.s)||!(g.i<m.i)||(m=g,null==d.pagePrevDataIndex&&(d.pagePrevDataIndex=g.i),++d.pageCount,++d.pageIndex),g=v;return d;function y(t){if(t){var e=t.getBoundingRect(),n=e[a]+t[a];return{s:n,e:n+e[o],i:t.__legendDataIndex}}}function b(t,e){return t.e>=e&&t.s<=e+i}},e.prototype._findTargetItemIndex=function(t){return this._showController?(this.getContentGroup().eachChild((function(i,r){var o=i.__legendDataIndex;null==n&&null!=o&&(n=r),o===t&&(e=r)})),null!=e?e:n):0;var e,n},e.type="legend.scroll",e}(gF);function IF(t){xy(wF),t.registerComponentModel(SF),t.registerComponentView(TF),function(t){t.registerAction("legendScroll","legendscroll",(function(t,e){var n=t.scrollDataIndex;null!=n&&e.eachComponent({mainType:"legend",subType:"scroll",query:t},(function(t){t.setScrollDataIndex(n)}))}))}(t)}var EF=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.type="dataZoom.inside",e.defaultOption=yh(IR.defaultOption,{disabled:!1,zoomLock:!1,zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!1,preventDefaultMouseMove:!0}),e}(IR),OF=Io();function DF(t,e,n){OF(t).coordSysRecordMap.each((function(t){var i=t.dataZoomInfoMap.get(e.uid);i&&(i.getRange=n)}))}function LF(t,e){if(e){t.removeKey(e.model.uid);var n=e.controller;n&&n.dispose()}}function PF(t,e){t.isDisposed()||t.dispatchAction({type:"dataZoom",animation:{easing:"cubicOut",duration:100},batch:e})}function NF(t,e,n,i){return t.coordinateSystem.containPoint([n,i])}var RF=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="dataZoom.inside",e}return n(e,t),e.prototype.render=function(e,n,i){t.prototype.render.apply(this,arguments),e.noTarget()?this._clear():(this.range=e.getPercentRange(),DF(i,e,{pan:W(BF.pan,this),zoom:W(BF.zoom,this),scrollMove:W(BF.scrollMove,this)}))},e.prototype.dispose=function(){this._clear(),t.prototype.dispose.apply(this,arguments)},e.prototype._clear=function(){!function(t,e){for(var n=OF(t).coordSysRecordMap,i=n.keys(),r=0;r<i.length;r++){var o=i[r],a=n.get(o),s=a.dataZoomInfoMap;if(s){var l=e.uid;s.get(l)&&(s.removeKey(l),s.keys().length||LF(n,a))}}}(this.api,this.dataZoomModel),this.range=null},e.type="dataZoom.inside",e}(DR),BF={zoom:function(t,e,n,i){var r=this.range,o=r.slice(),a=t.axisModels[0];if(a){var s=FF[e](null,[i.originX,i.originY],a,n,t),l=(s.signal>0?s.pixelStart+s.pixelLength-s.pixel:s.pixel-s.pixelStart)/s.pixelLength*(o[1]-o[0])+o[0],c=Math.max(1/i.scale,0);o[0]=(o[0]-l)*c+l,o[1]=(o[1]-l)*c+l;var u=this.dataZoomModel.findRepresentativeAxisProxy().getMinMaxSpan();return sE(0,o,[0,100],0,u.minSpan,u.maxSpan),this.range=o,r[0]!==o[0]||r[1]!==o[1]?o:void 0}},pan:zF((function(t,e,n,i,r,o){var a=FF[i]([o.oldX,o.oldY],[o.newX,o.newY],e,r,n);return a.signal*(t[1]-t[0])*a.pixel/a.pixelLength})),scrollMove:zF((function(t,e,n,i,r,o){return FF[i]([0,0],[o.scrollDelta,o.scrollDelta],e,r,n).signal*(t[1]-t[0])*o.scrollDelta}))};function zF(t){return function(e,n,i,r){var o=this.range,a=o.slice(),s=e.axisModels[0];if(s)return sE(t(a,s,e,n,i,r),a,[0,100],"all"),this.range=a,o[0]!==a[0]||o[1]!==a[1]?a:void 0}}var FF={grid:function(t,e,n,i,r){var o=n.axis,a={},s=r.model.coordinateSystem.getRect();return t=t||[0,0],"x"===o.dim?(a.pixel=e[0]-t[0],a.pixelLength=s.width,a.pixelStart=s.x,a.signal=o.inverse?1:-1):(a.pixel=e[1]-t[1],a.pixelLength=s.height,a.pixelStart=s.y,a.signal=o.inverse?-1:1),a},polar:function(t,e,n,i,r){var o=n.axis,a={},s=r.model.coordinateSystem,l=s.getRadiusAxis().getExtent(),c=s.getAngleAxis().getExtent();return t=t?s.pointToCoord(t):[0,0],e=s.pointToCoord(e),"radiusAxis"===n.mainType?(a.pixel=e[0]-t[0],a.pixelLength=l[1]-l[0],a.pixelStart=l[0],a.signal=o.inverse?1:-1):(a.pixel=e[1]-t[1],a.pixelLength=c[1]-c[0],a.pixelStart=c[0],a.signal=o.inverse?-1:1),a},singleAxis:function(t,e,n,i,r){var o=n.axis,a=r.model.coordinateSystem.getRect(),s={};return t=t||[0,0],"horizontal"===o.orient?(s.pixel=e[0]-t[0],s.pixelLength=a.width,s.pixelStart=a.x,s.signal=o.inverse?1:-1):(s.pixel=e[1]-t[1],s.pixelLength=a.height,s.pixelStart=a.y,s.signal=o.inverse?-1:1),s}};function VF(t){FR(t),t.registerComponentModel(EF),t.registerComponentView(RF),function(t){t.registerProcessor(t.PRIORITY.PROCESSOR.FILTER,(function(t,e){var n=OF(e),i=n.coordSysRecordMap||(n.coordSysRecordMap=mt());i.each((function(t){t.dataZoomInfoMap=null})),t.eachComponent({mainType:"dataZoom",subType:"inside"},(function(t){R(MR(t).infoList,(function(n){var r=n.model.uid,o=i.get(r)||i.set(r,function(t,e){var n={model:e,containsPoint:j(NF,e),dispatchAction:j(PF,t),dataZoomInfoMap:null,controller:null},i=n.controller=new Ik(t.getZr());return R(["pan","zoom","scrollMove"],(function(t){i.on(t,(function(e){var i=[];n.dataZoomInfoMap.each((function(r){if(e.isAvailableBehavior(r.model.option)){var o=(r.getRange||{})[t],a=o&&o(r.dzReferCoordSysInfo,n.model.mainType,n.controller,e);!r.model.get("disabled",!0)&&a&&i.push({dataZoomId:r.model.id,start:a[0],end:a[1]})}})),i.length&&n.dispatchAction(i)}))})),n}(e,n.model));(o.dataZoomInfoMap||(o.dataZoomInfoMap=mt())).set(t.uid,{dzReferCoordSysInfo:n,model:t,getRange:null})}))})),i.each((function(t){var e,n=t.controller,r=t.dataZoomInfoMap;if(r){var o=r.keys()[0];null!=o&&(e=r.get(o))}if(e){var a=function(t){var e,n="type_",i={type_true:2,type_move:1,type_false:0,type_undefined:-1},r=!0;return t.each((function(t){var o=t.model,a=!o.get("disabled",!0)&&(!o.get("zoomLock",!0)||"move");i[n+a]>i[n+e]&&(e=a),r=r&&o.get("preventDefaultMouseMove",!0)})),{controlType:e,opt:{zoomOnMouseWheel:!0,moveOnMouseMove:!0,moveOnMouseWheel:!0,preventDefaultMouseMove:!!r}}}(r);n.enable(a.controlType,a.opt),n.setPointerChecker(t.containsPoint),kg(t,"dispatchAction",e.model.get("throttle",!0),"fixRate")}else LF(i,t)}))}))}(t)}var HF=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.type="dataZoom.slider",e.layoutMode="box",e.defaultOption=yh(IR.defaultOption,{show:!0,right:"ph",top:"ph",width:"ph",height:"ph",left:null,bottom:null,borderColor:"#d2dbee",borderRadius:3,backgroundColor:"rgba(47,69,84,0)",dataBackground:{lineStyle:{color:"#d2dbee",width:.5},areaStyle:{color:"#d2dbee",opacity:.2}},selectedDataBackground:{lineStyle:{color:"#8fb0f7",width:.5},areaStyle:{color:"#8fb0f7",opacity:.2}},fillerColor:"rgba(135,175,274,0.2)",handleIcon:"path://M-9.35,34.56V42m0-40V9.5m-2,0h4a2,2,0,0,1,2,2v21a2,2,0,0,1-2,2h-4a2,2,0,0,1-2-2v-21A2,2,0,0,1-11.35,9.5Z",handleSize:"100%",handleStyle:{color:"#fff",borderColor:"#ACB8D1"},moveHandleSize:7,moveHandleIcon:"path://M-320.9-50L-320.9-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-348-41-339-50-320.9-50z M-212.3-50L-212.3-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-239.4-41-230.4-50-212.3-50z M-103.7-50L-103.7-50c18.1,0,27.1,9,27.1,27.1V85.7c0,18.1-9,27.1-27.1,27.1l0,0c-18.1,0-27.1-9-27.1-27.1V-22.9C-130.9-41-121.8-50-103.7-50z",moveHandleStyle:{color:"#D2DBEE",opacity:.7},showDetail:!0,showDataShadow:"auto",realtime:!0,zoomLock:!1,textStyle:{color:"#6E7079"},brushSelect:!0,brushStyle:{color:"rgba(135,175,274,0.15)"},emphasis:{handleStyle:{borderColor:"#8FB0F7"},moveHandleStyle:{color:"#8FB0F7"}}}),e}(IR),WF=Ls,jF="horizontal",YF="vertical",XF=["line","bar","candlestick","scatter"],GF={easing:"cubicOut",duration:100,delay:0},qF=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n._displayables={},n}return n(e,t),e.prototype.init=function(t,e){this.api=e,this._onBrush=W(this._onBrush,this),this._onBrushEnd=W(this._onBrushEnd,this)},e.prototype.render=function(e,n,i,r){if(t.prototype.render.apply(this,arguments),kg(this,"_dispatchZoomAction",e.get("throttle"),"fixRate"),this._orient=e.getOrient(),!1!==e.get("show")){if(e.noTarget())return this._clear(),void this.group.removeAll();r&&"dataZoom"===r.type&&r.from===this.uid||this._buildView(),this._updateView()}else this.group.removeAll()},e.prototype.dispose=function(){this._clear(),t.prototype.dispose.apply(this,arguments)},e.prototype._clear=function(){Ag(this,"_dispatchZoomAction");var t=this.api.getZr();t.off("mousemove",this._onBrush),t.off("mouseup",this._onBrushEnd)},e.prototype._buildView=function(){var t=this.group;t.removeAll(),this._brushing=!1,this._displayables.brushRect=null,this._resetLocation(),this._resetInterval();var e=this._displayables.sliderGroup=new Dr;this._renderBackground(),this._renderHandle(),this._renderDataShadow(),t.add(e),this._positionGroup()},e.prototype._resetLocation=function(){var t=this.dataZoomModel,e=this.api,n=t.get("brushSelect")?7:0,i=this._findCoordRect(),r={width:e.getWidth(),height:e.getHeight()},o=this._orient===jF?{right:r.width-i.x-i.width,top:r.height-30-7-n,width:i.width,height:30}:{right:7,top:i.y,width:30,height:i.height},a=xd(t.option);R(["right","top","width","height"],(function(t){"ph"===a[t]&&(a[t]=o[t])}));var s=md(a,r);this._location={x:s.x,y:s.y},this._size=[s.width,s.height],this._orient===YF&&this._size.reverse()},e.prototype._positionGroup=function(){var t=this.group,e=this._location,n=this._orient,i=this.dataZoomModel.getFirstTargetAxisModel(),r=i&&i.get("inverse"),o=this._displayables.sliderGroup,a=(this._dataShadowInfo||{}).otherAxisInverse;o.attr(n!==jF||r?n===jF&&r?{scaleY:a?1:-1,scaleX:-1}:n!==YF||r?{scaleY:a?-1:1,scaleX:-1,rotation:Math.PI/2}:{scaleY:a?-1:1,scaleX:1,rotation:Math.PI/2}:{scaleY:a?1:-1,scaleX:1});var s=t.getBoundingRect([o]);t.x=e.x-s.x,t.y=e.y-s.y,t.markRedraw()},e.prototype._getViewExtent=function(){return[0,this._size[0]]},e.prototype._renderBackground=function(){var t=this.dataZoomModel,e=this._size,n=this._displayables.sliderGroup,i=t.get("brushSelect");n.add(new WF({silent:!0,shape:{x:0,y:0,width:e[0],height:e[1]},style:{fill:t.get("backgroundColor")},z2:-40}));var r=new WF({shape:{x:0,y:0,width:e[0],height:e[1]},style:{fill:"transparent"},z2:0,onclick:W(this._onClickPanel,this)}),o=this.api.getZr();i?(r.on("mousedown",this._onBrushStart,this),r.cursor="crosshair",o.on("mousemove",this._onBrush),o.on("mouseup",this._onBrushEnd)):(o.off("mousemove",this._onBrush),o.off("mouseup",this._onBrushEnd)),n.add(r)},e.prototype._renderDataShadow=function(){var t=this._dataShadowInfo=this._prepareDataShadowInfo();if(this._displayables.dataShadowSegs=[],t){var e=this._size,n=this._shadowSize||[],i=t.series,r=i.getRawData(),o=i.getShadowDim&&i.getShadowDim(),a=o&&r.getDimensionInfo(o)?i.getShadowDim():t.otherDim;if(null!=a){var s=this._shadowPolygonPts,l=this._shadowPolylinePts;if(r!==this._shadowData||a!==this._shadowDim||e[0]!==n[0]||e[1]!==n[1]){var c=r.getDataExtent(a),u=.3*(c[1]-c[0]);c=[c[0]-u,c[1]+u];var h,d=[0,e[1]],p=[0,e[0]],f=[[e[0],0],[0,0]],g=[],m=p[1]/(r.count()-1),v=0,y=Math.round(r.count()/e[0]);r.each([a],(function(t,e){if(y>0&&e%y)v+=m;else{var n=null==t||isNaN(t)||""===t,i=n?0:Wr(t,c,d,!0);n&&!h&&e?(f.push([f[f.length-1][0],0]),g.push([g[g.length-1][0],0])):!n&&h&&(f.push([v,0]),g.push([v,0])),f.push([v,i]),g.push([v,i]),v+=m,h=n}})),s=this._shadowPolygonPts=f,l=this._shadowPolylinePts=g}this._shadowData=r,this._shadowDim=a,this._shadowSize=[e[0],e[1]];for(var b=this.dataZoomModel,x=0;x<3;x++){var _=w(1===x);this._displayables.sliderGroup.add(_),this._displayables.dataShadowSegs.push(_)}}}function w(t){var e=b.getModel(t?"selectedDataBackground":"dataBackground"),n=new Dr,i=new Pc({shape:{points:s},segmentIgnoreThreshold:1,style:e.getModel("areaStyle").getAreaStyle(),silent:!0,z2:-20}),r=new Rc({shape:{points:l},segmentIgnoreThreshold:1,style:e.getModel("lineStyle").getLineStyle(),silent:!0,z2:-19});return n.add(i),n.add(r),n}},e.prototype._prepareDataShadowInfo=function(){var t=this.dataZoomModel,e=t.get("showDataShadow");if(!1!==e){var n,i=this.ecModel;return t.eachTargetAxis((function(r,o){R(t.getAxisProxy(r,o).getTargetSeriesModels(),(function(t){if(!(n||!0!==e&&D(XF,t.get("type"))<0)){var a,s=i.getComponent(AR(r),o).axis,l=function(t){return{x:"y",y:"x",radius:"angle",angle:"radius"}[t]}(r),c=t.coordinateSystem;null!=l&&c.getOtherAxis&&(a=c.getOtherAxis(s).inverse),l=t.getData().mapDimension(l),n={thisAxis:s,series:t,thisDim:r,otherDim:l,otherAxisInverse:a}}}),this)}),this),n}},e.prototype._renderHandle=function(){var t=this.group,e=this._displayables,n=e.handles=[null,null],i=e.handleLabels=[null,null],r=this._displayables.sliderGroup,o=this._size,a=this.dataZoomModel,s=this.api,l=a.get("borderRadius")||0,c=a.get("brushSelect"),u=e.filler=new WF({silent:c,style:{fill:a.get("fillerColor")},textConfig:{position:"inside"}});r.add(u),r.add(new WF({silent:!0,subPixelOptimize:!0,shape:{x:0,y:0,width:o[0],height:o[1],r:l},style:{stroke:a.get("dataBackgroundColor")||a.get("borderColor"),lineWidth:1,fill:"rgba(0,0,0,0)"}})),R([0,1],(function(e){var o=a.get("handleIcon");!Cm[o]&&o.indexOf("path://")<0&&o.indexOf("image://")<0&&(o="path://"+o);var s=Mm(o,-1,0,2,2,null,!0);s.attr({cursor:UF(this._orient),draggable:!0,drift:W(this._onDragMove,this,e),ondragend:W(this._onDragEnd,this),onmouseover:W(this._showDataInfo,this,!0),onmouseout:W(this._showDataInfo,this,!1),z2:5});var l=s.getBoundingRect(),c=a.get("handleSize");this._handleHeight=jr(c,this._size[1]),this._handleWidth=l.width/l.height*this._handleHeight,s.setStyle(a.getModel("handleStyle").getItemStyle()),s.style.strokeNoScale=!0,s.rectHover=!0,s.ensureState("emphasis").style=a.getModel(["emphasis","handleStyle"]).getItemStyle(),Rl(s);var u=a.get("handleColor");null!=u&&(s.style.fill=u),r.add(n[e]=s);var h=a.getModel("textStyle");t.add(i[e]=new Rs({silent:!0,invisible:!0,style:qu(h,{x:0,y:0,text:"",verticalAlign:"middle",align:"center",fill:h.getTextColor(),font:h.getFont()}),z2:10}))}),this);var h=u;if(c){var d=jr(a.get("moveHandleSize"),o[1]),p=e.moveHandle=new Ls({style:a.getModel("moveHandleStyle").getItemStyle(),silent:!0,shape:{r:[0,0,2,2],y:o[1]-.5,height:d}}),f=.8*d,g=e.moveHandleIcon=Mm(a.get("moveHandleIcon"),-f/2,-f/2,f,f,"#fff",!0);g.silent=!0,g.y=o[1]+d/2-.5,p.ensureState("emphasis").style=a.getModel(["emphasis","moveHandleStyle"]).getItemStyle();var m=Math.min(o[1]/2,Math.max(d,10));(h=e.moveZone=new Ls({invisible:!0,shape:{y:o[1]-m,height:d+m}})).on("mouseover",(function(){s.enterEmphasis(p)})).on("mouseout",(function(){s.leaveEmphasis(p)})),r.add(p),r.add(g),r.add(h)}h.attr({draggable:!0,cursor:UF(this._orient),drift:W(this._onDragMove,this,"all"),ondragstart:W(this._showDataInfo,this,!0),ondragend:W(this._onDragEnd,this),onmouseover:W(this._showDataInfo,this,!0),onmouseout:W(this._showDataInfo,this,!1)})},e.prototype._resetInterval=function(){var t=this._range=this.dataZoomModel.getPercentRange(),e=this._getViewExtent();this._handleEnds=[Wr(t[0],[0,100],e,!0),Wr(t[1],[0,100],e,!0)]},e.prototype._updateInterval=function(t,e){var n=this.dataZoomModel,i=this._handleEnds,r=this._getViewExtent(),o=n.findRepresentativeAxisProxy().getMinMaxSpan(),a=[0,100];sE(e,i,r,n.get("zoomLock")?"all":t,null!=o.minSpan?Wr(o.minSpan,a,r,!0):null,null!=o.maxSpan?Wr(o.maxSpan,a,r,!0):null);var s=this._range,l=this._range=Xr([Wr(i[0],r,a,!0),Wr(i[1],r,a,!0)]);return!s||s[0]!==l[0]||s[1]!==l[1]},e.prototype._updateView=function(t){var e=this._displayables,n=this._handleEnds,i=Xr(n.slice()),r=this._size;R([0,1],(function(t){var i=e.handles[t],o=this._handleHeight;i.attr({scaleX:o/2,scaleY:o/2,x:n[t]+(t?-1:1),y:r[1]/2-o/2})}),this),e.filler.setShape({x:i[0],y:0,width:i[1]-i[0],height:r[1]});var o={x:i[0],width:i[1]-i[0]};e.moveHandle&&(e.moveHandle.setShape(o),e.moveZone.setShape(o),e.moveZone.getBoundingRect(),e.moveHandleIcon&&e.moveHandleIcon.attr("x",o.x+o.width/2));for(var a=e.dataShadowSegs,s=[0,i[0],i[1],r[0]],l=0;l<a.length;l++){var c=a[l],u=c.getClipPath();u||(u=new Ls,c.setClipPath(u)),u.setShape({x:s[l],y:0,width:s[l+1]-s[l],height:r[1]})}this._updateDataInfo(t)},e.prototype._updateDataInfo=function(t){var e=this.dataZoomModel,n=this._displayables,i=n.handleLabels,r=this._orient,o=["",""];if(e.get("showDetail")){var a=e.findRepresentativeAxisProxy();if(a){var s=a.getAxisModel().axis,l=this._range,c=t?a.calculateDataWindow({start:l[0],end:l[1]}).valueWindow:a.getDataValueWindow();o=[this._formatLabel(c[0],s),this._formatLabel(c[1],s)]}}var u=Xr(this._handleEnds.slice());function h(t){var e=Mu(n.handles[t].parent,this.group),a=Iu(0===t?"right":"left",e),s=this._handleWidth/2+5,l=Tu([u[t]+(0===t?-s:s),this._size[1]/2],e);i[t].setStyle({x:l[0],y:l[1],verticalAlign:r===jF?"middle":a,align:r===jF?a:"center",text:o[t]})}h.call(this,0),h.call(this,1)},e.prototype._formatLabel=function(t,e){var n=this.dataZoomModel,i=n.get("labelFormatter"),r=n.get("labelPrecision");null!=r&&"auto"!==r||(r=e.getPixelPrecision());var o=null==t||isNaN(t)?"":"category"===e.type||"time"===e.type?e.scale.getLabel({value:Math.round(t)}):t.toFixed(Math.min(r,20));return X(i)?i(t,o):G(i)?i.replace("{value}",o):o},e.prototype._showDataInfo=function(t){t=this._dragging||t;var e=this._displayables,n=e.handleLabels;n[0].attr("invisible",!t),n[1].attr("invisible",!t),e.moveHandle&&this.api[t?"enterEmphasis":"leaveEmphasis"](e.moveHandle,1)},e.prototype._onDragMove=function(t,e,n,i){this._dragging=!0,pe(i.event);var r=Tu([e,n],this._displayables.sliderGroup.getLocalTransform(),!0),o=this._updateInterval(t,r[0]),a=this.dataZoomModel.get("realtime");this._updateView(!a),o&&a&&this._dispatchZoomAction(!0)},e.prototype._onDragEnd=function(){this._dragging=!1,this._showDataInfo(!1),!this.dataZoomModel.get("realtime")&&this._dispatchZoomAction(!1)},e.prototype._onClickPanel=function(t){var e=this._size,n=this._displayables.sliderGroup.transformCoordToLocal(t.offsetX,t.offsetY);if(!(n[0]<0||n[0]>e[0]||n[1]<0||n[1]>e[1])){var i=this._handleEnds,r=(i[0]+i[1])/2,o=this._updateInterval("all",n[0]-r);this._updateView(),o&&this._dispatchZoomAction(!1)}},e.prototype._onBrushStart=function(t){var e=t.offsetX,n=t.offsetY;this._brushStart=new Me(e,n),this._brushing=!0,this._brushStartTime=+new Date},e.prototype._onBrushEnd=function(t){if(this._brushing){var e=this._displayables.brushRect;if(this._brushing=!1,e){e.attr("ignore",!0);var n=e.shape;if(!(+new Date-this._brushStartTime<200&&Math.abs(n.width)<5)){var i=this._getViewExtent(),r=[0,100];this._range=Xr([Wr(n.x,i,r,!0),Wr(n.x+n.width,i,r,!0)]),this._handleEnds=[n.x,n.x+n.width],this._updateView(),this._dispatchZoomAction(!1)}}}},e.prototype._onBrush=function(t){this._brushing&&(pe(t.event),this._updateBrushRect(t.offsetX,t.offsetY))},e.prototype._updateBrushRect=function(t,e){var n=this._displayables,i=this.dataZoomModel,r=n.brushRect;r||(r=n.brushRect=new WF({silent:!0,style:i.getModel("brushStyle").getItemStyle()}),n.sliderGroup.add(r)),r.attr("ignore",!1);var o=this._brushStart,a=this._displayables.sliderGroup,s=a.transformCoordToLocal(t,e),l=a.transformCoordToLocal(o.x,o.y),c=this._size;s[0]=Math.max(Math.min(c[0],s[0]),0),r.setShape({x:l[0],y:0,width:s[0]-l[0],height:c[1]})},e.prototype._dispatchZoomAction=function(t){var e=this._range;this.api.dispatchAction({type:"dataZoom",from:this.uid,dataZoomId:this.dataZoomModel.id,animation:t?GF:null,start:e[0],end:e[1]})},e.prototype._findCoordRect=function(){var t,e=MR(this.dataZoomModel).infoList;if(!t&&e.length){var n=e[0].model.coordinateSystem;t=n.getRect&&n.getRect()}if(!t){var i=this.api.getWidth(),r=this.api.getHeight();t={x:.2*i,y:.2*r,width:.6*i,height:.6*r}}return t},e.type="dataZoom.slider",e}(DR);function UF(t){return"vertical"===t?"ns-resize":"ew-resize"}function $F(t){t.registerComponentModel(HF),t.registerComponentView(qF),FR(t)}var ZF=function(t,e,n){var i=A((KF[t]||{})[e]);return n&&Y(i)?i[i.length-1]:i},KF={color:{active:["#006edd","#e0ffff"],inactive:["rgba(0,0,0,0)"]},colorHue:{active:[0,360],inactive:[0,0]},colorSaturation:{active:[.3,1],inactive:[0,0]},colorLightness:{active:[.9,.5],inactive:[0,0]},colorAlpha:{active:[.3,1],inactive:[0,0]},opacity:{active:[.3,1],inactive:[0,0]},symbol:{active:["circle","roundRect","diamond"],inactive:["none"]},symbolSize:{active:[10,50],inactive:[0,0]}},QF=tT.mapVisual,JF=tT.eachVisual,tV=Y,eV=R,nV=Xr,iV=Wr,rV=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.stateList=["inRange","outOfRange"],n.replacableOptionKeys=["inRange","outOfRange","target","controller","color"],n.layoutMode={type:"box",ignoreSize:!0},n.dataBound=[-1/0,1/0],n.targetVisuals={},n.controllerVisuals={},n}return n(e,t),e.prototype.init=function(t,e,n){this.mergeDefaultAndTheme(t,n)},e.prototype.optionUpdated=function(t,e){var n=this.option;!e&&JB(n,t,this.replacableOptionKeys),this.textStyleModel=this.getModel("textStyle"),this.resetItemSize(),this.completeVisualOption()},e.prototype.resetVisual=function(t){var e=this.stateList;t=W(t,this),this.controllerVisuals=QB(this.option.controller,e,t),this.targetVisuals=QB(this.option.target,e,t)},e.prototype.getItemSymbol=function(){return null},e.prototype.getTargetSeriesIndices=function(){var t=this.option.seriesIndex,e=[];return null==t||"all"===t?this.ecModel.eachSeries((function(t,n){e.push(n)})):e=vo(t),e},e.prototype.eachTargetSeries=function(t,e){R(this.getTargetSeriesIndices(),(function(n){var i=this.ecModel.getSeriesByIndex(n);i&&t.call(e,i)}),this)},e.prototype.isTargetSeries=function(t){var e=!1;return this.eachTargetSeries((function(n){n===t&&(e=!0)})),e},e.prototype.formatValueText=function(t,e,n){var i,r=this.option,o=r.precision,a=this.dataBound,s=r.formatter;n=n||["<",">"],Y(t)&&(t=t.slice(),i=!0);var l=e?t:i?[c(t[0]),c(t[1])]:c(t);return G(s)?s.replace("{value}",i?l[0]:l).replace("{value2}",i?l[1]:l):X(s)?i?s(t[0],t[1]):s(t):i?t[0]===a[0]?n[0]+" "+l[1]:t[1]===a[1]?n[1]+" "+l[0]:l[0]+" - "+l[1]:l;function c(t){return t===a[0]?"min":t===a[1]?"max":(+t).toFixed(Math.min(o,20))}},e.prototype.resetExtent=function(){var t=this.option,e=nV([t.min,t.max]);this._dataExtent=e},e.prototype.getDataDimensionIndex=function(t){var e=this.option.dimension;if(null!=e)return t.getDimensionIndex(e);for(var n=t.dimensions,i=n.length-1;i>=0;i--){var r=n[i],o=t.getDimensionInfo(r);if(!o.isCalculationCoord)return o.storeDimIndex}},e.prototype.getExtent=function(){return this._dataExtent.slice()},e.prototype.completeVisualOption=function(){var t=this.ecModel,e=this.option,n={inRange:e.inRange,outOfRange:e.outOfRange},i=e.target||(e.target={}),r=e.controller||(e.controller={});M(i,n),M(r,n);var o=this.isCategory();function a(n){tV(e.color)&&!n.inRange&&(n.inRange={color:e.color.slice().reverse()}),n.inRange=n.inRange||{color:t.get("gradientColor")}}a.call(this,i),a.call(this,r),function(t,e,n){var i=t[e],r=t[n];i&&!r&&(r=t[n]={},eV(i,(function(t,e){if(tT.isValidType(e)){var n=ZF(e,"inactive",o);null!=n&&(r[e]=n,"color"!==e||r.hasOwnProperty("opacity")||r.hasOwnProperty("colorAlpha")||(r.opacity=[0,0]))}})))}.call(this,i,"inRange","outOfRange"),function(t){var e=(t.inRange||{}).symbol||(t.outOfRange||{}).symbol,n=(t.inRange||{}).symbolSize||(t.outOfRange||{}).symbolSize,i=this.get("inactiveColor"),r=this.getItemSymbol()||"roundRect";eV(this.stateList,(function(a){var s=this.itemSize,l=t[a];l||(l=t[a]={color:o?i:[i]}),null==l.symbol&&(l.symbol=e&&A(e)||(o?r:[r])),null==l.symbolSize&&(l.symbolSize=n&&A(n)||(o?s[0]:[s[0],s[0]])),l.symbol=QF(l.symbol,(function(t){return"none"===t?r:t}));var c=l.symbolSize;if(null!=c){var u=-1/0;JF(c,(function(t){t>u&&(u=t)})),l.symbolSize=QF(c,(function(t){return iV(t,[0,u],[0,s[0]],!0)}))}}),this)}.call(this,r)},e.prototype.resetItemSize=function(){this.itemSize=[parseFloat(this.get("itemWidth")),parseFloat(this.get("itemHeight"))]},e.prototype.isCategory=function(){return!!this.option.categories},e.prototype.setSelected=function(t){},e.prototype.getSelected=function(){return null},e.prototype.getValueState=function(t){return null},e.prototype.getVisualMeta=function(t){return null},e.type="visualMap",e.dependencies=["series"],e.defaultOption={show:!0,z:4,seriesIndex:"all",min:0,max:200,left:0,right:null,top:null,bottom:0,itemWidth:null,itemHeight:null,inverse:!1,orient:"vertical",backgroundColor:"rgba(0,0,0,0)",borderColor:"#ccc",contentColor:"#5793f3",inactiveColor:"#aaa",borderWidth:0,padding:5,textGap:10,precision:0,textStyle:{color:"#333"}},e}(Sd),oV=[20,140],aV=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.prototype.optionUpdated=function(e,n){t.prototype.optionUpdated.apply(this,arguments),this.resetExtent(),this.resetVisual((function(t){t.mappingMethod="linear",t.dataExtent=this.getExtent()})),this._resetRange()},e.prototype.resetItemSize=function(){t.prototype.resetItemSize.apply(this,arguments);var e=this.itemSize;(null==e[0]||isNaN(e[0]))&&(e[0]=oV[0]),(null==e[1]||isNaN(e[1]))&&(e[1]=oV[1])},e.prototype._resetRange=function(){var t=this.getExtent(),e=this.option.range;!e||e.auto?(t.auto=1,this.option.range=t):Y(e)&&(e[0]>e[1]&&e.reverse(),e[0]=Math.max(e[0],t[0]),e[1]=Math.min(e[1],t[1]))},e.prototype.completeVisualOption=function(){t.prototype.completeVisualOption.apply(this,arguments),R(this.stateList,(function(t){var e=this.option.controller[t].symbolSize;e&&e[0]!==e[1]&&(e[0]=e[1]/3)}),this)},e.prototype.setSelected=function(t){this.option.range=t.slice(),this._resetRange()},e.prototype.getSelected=function(){var t=this.getExtent(),e=Xr((this.get("range")||[]).slice());return e[0]>t[1]&&(e[0]=t[1]),e[1]>t[1]&&(e[1]=t[1]),e[0]<t[0]&&(e[0]=t[0]),e[1]<t[0]&&(e[1]=t[0]),e},e.prototype.getValueState=function(t){var e=this.option.range,n=this.getExtent();return(e[0]<=n[0]||e[0]<=t)&&(e[1]>=n[1]||t<=e[1])?"inRange":"outOfRange"},e.prototype.findTargetDataIndices=function(t){var e=[];return this.eachTargetSeries((function(n){var i=[],r=n.getData();r.each(this.getDataDimensionIndex(r),(function(e,n){t[0]<=e&&e<=t[1]&&i.push(n)}),this),e.push({seriesId:n.id,dataIndex:i})}),this),e},e.prototype.getVisualMeta=function(t){var e=sV(this,"outOfRange",this.getExtent()),n=sV(this,"inRange",this.option.range.slice()),i=[];function r(e,n){i.push({value:e,color:t(e,n)})}for(var o=0,a=0,s=n.length,l=e.length;a<l&&(!n.length||e[a]<=n[0]);a++)e[a]<n[o]&&r(e[a],"outOfRange");for(var c=1;o<s;o++,c=0)c&&i.length&&r(n[o],"outOfRange"),r(n[o],"inRange");for(c=1;a<l;a++)(!n.length||n[n.length-1]<e[a])&&(c&&(i.length&&r(i[i.length-1].value,"outOfRange"),c=0),r(e[a],"outOfRange"));var u=i.length;return{stops:i,outerColors:[u?i[0].color:"transparent",u?i[u-1].color:"transparent"]}},e.type="visualMap.continuous",e.defaultOption=yh(rV.defaultOption,{align:"auto",calculable:!1,hoverLink:!0,realtime:!0,handleIcon:"path://M-11.39,9.77h0a3.5,3.5,0,0,1-3.5,3.5h-22a3.5,3.5,0,0,1-3.5-3.5h0a3.5,3.5,0,0,1,3.5-3.5h22A3.5,3.5,0,0,1-11.39,9.77Z",handleSize:"120%",handleStyle:{borderColor:"#fff",borderWidth:1},indicatorIcon:"circle",indicatorSize:"50%",indicatorStyle:{borderColor:"#fff",borderWidth:2,shadowBlur:2,shadowOffsetX:1,shadowOffsetY:1,shadowColor:"rgba(0,0,0,0.2)"}}),e}(rV);function sV(t,e,n){if(n[0]===n[1])return n.slice();for(var i=(n[1]-n[0])/200,r=n[0],o=[],a=0;a<=200&&r<n[1];a++)o.push(r),r+=i;return o.push(n[1]),o}var lV=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n.autoPositionValues={left:1,right:1,top:1,bottom:1},n}return n(e,t),e.prototype.init=function(t,e){this.ecModel=t,this.api=e},e.prototype.render=function(t,e,n,i){this.visualMapModel=t,!1!==t.get("show")?this.doRender(t,e,n,i):this.group.removeAll()},e.prototype.renderBackground=function(t){var e=this.visualMapModel,n=id(e.get("padding")||0),i=t.getBoundingRect();t.add(new Ls({z2:-1,silent:!0,shape:{x:i.x-n[3],y:i.y-n[0],width:i.width+n[3]+n[1],height:i.height+n[0]+n[2]},style:{fill:e.get("backgroundColor"),stroke:e.get("borderColor"),lineWidth:e.get("borderWidth")}}))},e.prototype.getControllerVisual=function(t,e,n){var i=(n=n||{}).forceState,r=this.visualMapModel,o={};if("color"===e){var a=r.get("contentColor");o.color=a}function s(t){return o[t]}function l(t,e){o[t]=e}var c=r.controllerVisuals[i||r.getValueState(t)];return R(tT.prepareVisualTypes(c),(function(i){var r=c[i];n.convertOpacityToAlpha&&"opacity"===i&&(i="colorAlpha",r=c.__alphaForOpacity),tT.dependsOn(i,e)&&r&&r.applyVisual(t,s,l)})),o[e]},e.prototype.positionGroup=function(t){var e=this.visualMapModel,n=this.api;vd(t,e.getBoxLayoutParams(),{width:n.getWidth(),height:n.getHeight()})},e.prototype.doRender=function(t,e,n,i){},e.type="visualMap",e}(hg),cV=[["left","right","width"],["top","bottom","height"]];function uV(t,e,n){var i=t.option,r=i.align;if(null!=r&&"auto"!==r)return r;for(var o={width:e.getWidth(),height:e.getHeight()},a="horizontal"===i.orient?1:0,s=cV[a],l=[0,null,10],c={},u=0;u<3;u++)c[cV[1-a][u]]=l[u],c[s[u]]=2===u?n[0]:i[s[u]];var h=[["x","width",3],["y","height",0]][a],d=md(c,o,i.padding);return s[(d.margin[h[2]]||0)+d[h[0]]+.5*d[h[1]]<.5*o[h[1]]?0:1]}function hV(t,e){return R(t||[],(function(t){null!=t.dataIndex&&(t.dataIndexInside=t.dataIndex,t.dataIndex=null),t.highlightKey="visualMap"+(e?e.componentIndex:"")})),t}var dV=Wr,pV=R,fV=Math.min,gV=Math.max,mV=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n._shapes={},n._dataInterval=[],n._handleEnds=[],n._hoverLinkDataIndices=[],n}return n(e,t),e.prototype.init=function(e,n){t.prototype.init.call(this,e,n),this._hoverLinkFromSeriesMouseOver=W(this._hoverLinkFromSeriesMouseOver,this),this._hideIndicator=W(this._hideIndicator,this)},e.prototype.doRender=function(t,e,n,i){i&&"selectDataRange"===i.type&&i.from===this.uid||this._buildView()},e.prototype._buildView=function(){this.group.removeAll();var t=this.visualMapModel,e=this.group;this._orient=t.get("orient"),this._useHandle=t.get("calculable"),this._resetInterval(),this._renderBar(e);var n=t.get("text");this._renderEndsText(e,n,0),this._renderEndsText(e,n,1),this._updateView(!0),this.renderBackground(e),this._updateView(),this._enableHoverLinkToSeries(),this._enableHoverLinkFromSeries(),this.positionGroup(e)},e.prototype._renderEndsText=function(t,e,n){if(e){var i=e[1-n];i=null!=i?i+"":"";var r=this.visualMapModel,o=r.get("textGap"),a=r.itemSize,s=this._shapes.mainGroup,l=this._applyTransform([a[0]/2,0===n?-o:a[1]+o],s),c=this._applyTransform(0===n?"bottom":"top",s),u=this._orient,h=this.visualMapModel.textStyleModel;this.group.add(new Rs({style:qu(h,{x:l[0],y:l[1],verticalAlign:"horizontal"===u?"middle":c,align:"horizontal"===u?c:"center",text:i})}))}},e.prototype._renderBar=function(t){var e=this.visualMapModel,n=this._shapes,i=e.itemSize,r=this._orient,o=this._useHandle,a=uV(e,this.api,i),s=n.mainGroup=this._createBarGroup(a),l=new Dr;s.add(l),l.add(n.outOfRange=vV()),l.add(n.inRange=vV(null,o?bV(this._orient):null,W(this._dragHandle,this,"all",!1),W(this._dragHandle,this,"all",!0))),l.setClipPath(new Ls({shape:{x:0,y:0,width:i[0],height:i[1],r:3}}));var c=e.textStyleModel.getTextRect(""),u=gV(c.width,c.height);o&&(n.handleThumbs=[],n.handleLabels=[],n.handleLabelPoints=[],this._createHandle(e,s,0,i,u,r),this._createHandle(e,s,1,i,u,r)),this._createIndicator(e,s,i,u,r),t.add(s)},e.prototype._createHandle=function(t,e,n,i,r,o){var a=W(this._dragHandle,this,n,!1),s=W(this._dragHandle,this,n,!0),l=xr(t.get("handleSize"),i[0]),c=Mm(t.get("handleIcon"),-l/2,-l/2,l,l,null,!0),u=bV(this._orient);c.attr({cursor:u,draggable:!0,drift:a,ondragend:s,onmousemove:function(t){pe(t.event)}}),c.x=i[0]/2,c.useStyle(t.getModel("handleStyle").getItemStyle()),c.setStyle({strokeNoScale:!0,strokeFirst:!0}),c.style.lineWidth*=2,c.ensureState("emphasis").style=t.getModel(["emphasis","handleStyle"]).getItemStyle(),Wl(c,!0),e.add(c);var h=this.visualMapModel.textStyleModel,d=new Rs({cursor:u,draggable:!0,drift:a,onmousemove:function(t){pe(t.event)},ondragend:s,style:qu(h,{x:0,y:0,text:""})});d.ensureState("blur").style={opacity:.1},d.stateTransition={duration:200},this.group.add(d);var p=[l,0],f=this._shapes;f.handleThumbs[n]=c,f.handleLabelPoints[n]=p,f.handleLabels[n]=d},e.prototype._createIndicator=function(t,e,n,i,r){var o=xr(t.get("indicatorSize"),n[0]),a=Mm(t.get("indicatorIcon"),-o/2,-o/2,o,o,null,!0);a.attr({cursor:"move",invisible:!0,silent:!0,x:n[0]/2});var s=t.getModel("indicatorStyle").getItemStyle();if(a instanceof As){var l=a.style;a.useStyle(I({image:l.image,x:l.x,y:l.y,width:l.width,height:l.height},s))}else a.useStyle(s);e.add(a);var c=this.visualMapModel.textStyleModel,u=new Rs({silent:!0,invisible:!0,style:qu(c,{x:0,y:0,text:""})});this.group.add(u);var h=[("horizontal"===r?i/2:6)+n[0]/2,0],d=this._shapes;d.indicator=a,d.indicatorLabel=u,d.indicatorLabelPoint=h,this._firstShowIndicator=!0},e.prototype._dragHandle=function(t,e,n,i){if(this._useHandle){if(this._dragging=!e,!e){var r=this._applyTransform([n,i],this._shapes.mainGroup,!0);this._updateInterval(t,r[1]),this._hideIndicator(),this._updateView()}e===!this.visualMapModel.get("realtime")&&this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:this._dataInterval.slice()}),e?!this._hovering&&this._clearHoverLinkToSeries():yV(this.visualMapModel)&&this._doHoverLinkToSeries(this._handleEnds[t],!1)}},e.prototype._resetInterval=function(){var t=this.visualMapModel,e=this._dataInterval=t.getSelected(),n=t.getExtent(),i=[0,t.itemSize[1]];this._handleEnds=[dV(e[0],n,i,!0),dV(e[1],n,i,!0)]},e.prototype._updateInterval=function(t,e){e=e||0;var n=this.visualMapModel,i=this._handleEnds,r=[0,n.itemSize[1]];sE(e,i,r,t,0);var o=n.getExtent();this._dataInterval=[dV(i[0],r,o,!0),dV(i[1],r,o,!0)]},e.prototype._updateView=function(t){var e=this.visualMapModel,n=e.getExtent(),i=this._shapes,r=[0,e.itemSize[1]],o=t?r:this._handleEnds,a=this._createBarVisual(this._dataInterval,n,o,"inRange"),s=this._createBarVisual(n,n,r,"outOfRange");i.inRange.setStyle({fill:a.barColor}).setShape("points",a.barPoints),i.outOfRange.setStyle({fill:s.barColor}).setShape("points",s.barPoints),this._updateHandle(o,a)},e.prototype._createBarVisual=function(t,e,n,i){var r={forceState:i,convertOpacityToAlpha:!0},o=this._makeColorGradient(t,r),a=[this.getControllerVisual(t[0],"symbolSize",r),this.getControllerVisual(t[1],"symbolSize",r)],s=this._createBarPoints(n,a);return{barColor:new Uc(0,0,0,1,o),barPoints:s,handlesColor:[o[0].color,o[o.length-1].color]}},e.prototype._makeColorGradient=function(t,e){var n=[],i=(t[1]-t[0])/100;n.push({color:this.getControllerVisual(t[0],"color",e),offset:0});for(var r=1;r<100;r++){var o=t[0]+i*r;if(o>t[1])break;n.push({color:this.getControllerVisual(o,"color",e),offset:r/100})}return n.push({color:this.getControllerVisual(t[1],"color",e),offset:1}),n},e.prototype._createBarPoints=function(t,e){var n=this.visualMapModel.itemSize;return[[n[0]-e[0],t[0]],[n[0],t[0]],[n[0],t[1]],[n[0]-e[1],t[1]]]},e.prototype._createBarGroup=function(t){var e=this._orient,n=this.visualMapModel.get("inverse");return new Dr("horizontal"!==e||n?"horizontal"===e&&n?{scaleX:"bottom"===t?-1:1,rotation:-Math.PI/2}:"vertical"!==e||n?{scaleX:"left"===t?1:-1}:{scaleX:"left"===t?1:-1,scaleY:-1}:{scaleX:"bottom"===t?1:-1,rotation:Math.PI/2})},e.prototype._updateHandle=function(t,e){if(this._useHandle){var n=this._shapes,i=this.visualMapModel,r=n.handleThumbs,o=n.handleLabels,a=i.itemSize,s=i.getExtent();pV([0,1],(function(l){var c=r[l];c.setStyle("fill",e.handlesColor[l]),c.y=t[l];var u=dV(t[l],[0,a[1]],s,!0),h=this.getControllerVisual(u,"symbolSize");c.scaleX=c.scaleY=h/a[0],c.x=a[0]-h/2;var d=Tu(n.handleLabelPoints[l],Mu(c,this.group));o[l].setStyle({x:d[0],y:d[1],text:i.formatValueText(this._dataInterval[l]),verticalAlign:"middle",align:"vertical"===this._orient?this._applyTransform("left",n.mainGroup):"center"})}),this)}},e.prototype._showIndicator=function(t,e,n,i){var r=this.visualMapModel,o=r.getExtent(),a=r.itemSize,s=[0,a[1]],l=this._shapes,c=l.indicator;if(c){c.attr("invisible",!1);var u=this.getControllerVisual(t,"color",{convertOpacityToAlpha:!0}),h=this.getControllerVisual(t,"symbolSize"),d=dV(t,o,s,!0),p=a[0]-h/2,f={x:c.x,y:c.y};c.y=d,c.x=p;var g=Tu(l.indicatorLabelPoint,Mu(c,this.group)),m=l.indicatorLabel;m.attr("invisible",!1);var v=this._applyTransform("left",l.mainGroup),y="horizontal"===this._orient;m.setStyle({text:(n||"")+r.formatValueText(e),verticalAlign:y?v:"middle",align:y?"center":v});var b={x:p,y:d,style:{fill:u}},x={style:{x:g[0],y:g[1]}};if(r.ecModel.isAnimationEnabled()&&!this._firstShowIndicator){var _={duration:100,easing:"cubicInOut",additive:!0};c.x=f.x,c.y=f.y,c.animateTo(b,_),m.animateTo(x,_)}else c.attr(b),m.attr(x);this._firstShowIndicator=!1;var w=this._shapes.handleLabels;if(w)for(var S=0;S<w.length;S++)this.api.enterBlur(w[S])}},e.prototype._enableHoverLinkToSeries=function(){var t=this;this._shapes.mainGroup.on("mousemove",(function(e){if(t._hovering=!0,!t._dragging){var n=t.visualMapModel.itemSize,i=t._applyTransform([e.offsetX,e.offsetY],t._shapes.mainGroup,!0,!0);i[1]=fV(gV(0,i[1]),n[1]),t._doHoverLinkToSeries(i[1],0<=i[0]&&i[0]<=n[0])}})).on("mouseout",(function(){t._hovering=!1,!t._dragging&&t._clearHoverLinkToSeries()}))},e.prototype._enableHoverLinkFromSeries=function(){var t=this.api.getZr();this.visualMapModel.option.hoverLink?(t.on("mouseover",this._hoverLinkFromSeriesMouseOver,this),t.on("mouseout",this._hideIndicator,this)):this._clearHoverLinkFromSeries()},e.prototype._doHoverLinkToSeries=function(t,e){var n=this.visualMapModel,i=n.itemSize;if(n.option.hoverLink){var r=[0,i[1]],o=n.getExtent();t=fV(gV(r[0],t),r[1]);var a=function(t,e,n){var i=6,r=t.get("hoverLinkDataSize");return r&&(i=dV(r,e,n,!0)/2),i}(n,o,r),s=[t-a,t+a],l=dV(t,r,o,!0),c=[dV(s[0],r,o,!0),dV(s[1],r,o,!0)];s[0]<r[0]&&(c[0]=-1/0),s[1]>r[1]&&(c[1]=1/0),e&&(c[0]===-1/0?this._showIndicator(l,c[1],"< ",a):c[1]===1/0?this._showIndicator(l,c[0],"> ",a):this._showIndicator(l,l," ",a));var u=this._hoverLinkDataIndices,h=[];(e||yV(n))&&(h=this._hoverLinkDataIndices=n.findTargetDataIndices(c));var d=function(t,e){var n={},i={};return r(t||[],n),r(e||[],i,n),[o(n),o(i)];function r(t,e,n){for(var i=0,r=t.length;i<r;i++){var o=ko(t[i].seriesId,null);if(null==o)return;for(var a=vo(t[i].dataIndex),s=n&&n[o],l=0,c=a.length;l<c;l++){var u=a[l];s&&s[u]?s[u]=null:(e[o]||(e[o]={}))[u]=1}}}function o(t,e){var n=[];for(var i in t)if(t.hasOwnProperty(i)&&null!=t[i])if(e)n.push(+i);else{var r=o(t[i],!0);r.length&&n.push({seriesId:i,dataIndex:r})}return n}}(u,h);this._dispatchHighDown("downplay",hV(d[0],n)),this._dispatchHighDown("highlight",hV(d[1],n))}},e.prototype._hoverLinkFromSeriesMouseOver=function(t){var e;if(gm(t.target,(function(t){var n=$s(t);if(null!=n.dataIndex)return e=n,!0}),!0),e){var n=this.ecModel.getSeriesByIndex(e.seriesIndex),i=this.visualMapModel;if(i.isTargetSeries(n)){var r=n.getData(e.dataType),o=r.getStore().get(i.getDataDimensionIndex(r),e.dataIndex);isNaN(o)||this._showIndicator(o,o)}}},e.prototype._hideIndicator=function(){var t=this._shapes;t.indicator&&t.indicator.attr("invisible",!0),t.indicatorLabel&&t.indicatorLabel.attr("invisible",!0);var e=this._shapes.handleLabels;if(e)for(var n=0;n<e.length;n++)this.api.leaveBlur(e[n])},e.prototype._clearHoverLinkToSeries=function(){this._hideIndicator();var t=this._hoverLinkDataIndices;this._dispatchHighDown("downplay",hV(t,this.visualMapModel)),t.length=0},e.prototype._clearHoverLinkFromSeries=function(){this._hideIndicator();var t=this.api.getZr();t.off("mouseover",this._hoverLinkFromSeriesMouseOver),t.off("mouseout",this._hideIndicator)},e.prototype._applyTransform=function(t,e,n,i){var r=Mu(e,i?null:this.group);return Y(t)?Tu(t,r,n):Iu(t,r,n)},e.prototype._dispatchHighDown=function(t,e){e&&e.length&&this.api.dispatchAction({type:t,batch:e})},e.prototype.dispose=function(){this._clearHoverLinkFromSeries(),this._clearHoverLinkToSeries()},e.type="visualMap.continuous",e}(lV);function vV(t,e,n,i){return new Pc({shape:{points:t},draggable:!!n,cursor:e,drift:n,onmousemove:function(t){pe(t.event)},ondragend:i})}function yV(t){var e=t.get("hoverLinkOnHandle");return!!(null==e?t.get("realtime"):e)}function bV(t){return"vertical"===t?"ns-resize":"ew-resize"}var xV={type:"selectDataRange",event:"dataRangeSelected",update:"update"},_V=function(t,e){e.eachComponent({mainType:"visualMap",query:t},(function(e){e.setSelected(t.selected)}))},wV=[{createOnAllSeries:!0,reset:function(t,e){var n=[];return e.eachComponent("visualMap",(function(e){var i,r,o,a,s,l=t.pipelineContext;!e.isTargetSeries(t)||l&&l.large||n.push((i=e.stateList,r=e.targetVisuals,o=W(e.getValueState,e),a=e.getDataDimensionIndex(t.getData()),s={},R(i,(function(t){var e=tT.prepareVisualTypes(r[t]);s[t]=e})),{progress:function(t,e){var n,i;function l(t){return um(e,i,t)}function c(t,n){dm(e,i,t,n)}null!=a&&(n=e.getDimensionIndex(a));for(var u=e.getStore();null!=(i=t.next());){var h=e.getRawDataItem(i);if(!h||!1!==h.visualMap)for(var d=null!=a?u.get(n,i):i,p=o(d),f=r[p],g=s[p],m=0,v=g.length;m<v;m++){var y=g[m];f[y]&&f[y].applyVisual(d,l,c)}}}}))})),n}},{createOnAllSeries:!0,reset:function(t,e){var n=t.getData(),i=[];e.eachComponent("visualMap",(function(e){if(e.isTargetSeries(t)){var r=e.getVisualMeta(W(SV,null,t,e))||{stops:[],outerColors:[]},o=e.getDataDimensionIndex(n);o>=0&&(r.dimension=o,i.push(r))}})),t.getData().setVisual("visualMeta",i)}}];function SV(t,e,n,i){for(var r=e.targetVisuals[i],o=tT.prepareVisualTypes(r),a={color:hm(t.getData(),"color")},s=0,l=o.length;s<l;s++){var c=o[s],u=r["opacity"===c?"__alphaForOpacity":c];u&&u.applyVisual(n,h,d)}return a.color;function h(t){return a[t]}function d(t,e){a[t]=e}}var CV=R;function kV(t){var e=t&&t.visualMap;Y(e)||(e=e?[e]:[]),CV(e,(function(t){if(t){AV(t,"splitList")&&!AV(t,"pieces")&&(t.pieces=t.splitList,delete t.splitList);var e=t.pieces;e&&Y(e)&&CV(e,(function(t){$(t)&&(AV(t,"start")&&!AV(t,"min")&&(t.min=t.start),AV(t,"end")&&!AV(t,"max")&&(t.max=t.end))}))}}))}function AV(t,e){return t&&t.hasOwnProperty&&t.hasOwnProperty(e)}var MV=!1;function TV(t){MV||(MV=!0,t.registerSubTypeDefaulter("visualMap",(function(t){return t.categories||(t.pieces?t.pieces.length>0:t.splitNumber>0)&&!t.calculable?"piecewise":"continuous"})),t.registerAction(xV,_V),R(wV,(function(e){t.registerVisual(t.PRIORITY.VISUAL.COMPONENT,e)})),t.registerPreprocessor(kV))}function IV(t){t.registerComponentModel(aV),t.registerComponentView(mV),TV(t)}var EV=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n._pieceList=[],n}return n(e,t),e.prototype.optionUpdated=function(e,n){t.prototype.optionUpdated.apply(this,arguments),this.resetExtent();var i=this._mode=this._determineMode();this._pieceList=[],OV[this._mode].call(this,this._pieceList),this._resetSelected(e,n);var r=this.option.categories;this.resetVisual((function(t,e){"categories"===i?(t.mappingMethod="category",t.categories=A(r)):(t.dataExtent=this.getExtent(),t.mappingMethod="piecewise",t.pieceList=B(this._pieceList,(function(t){return t=A(t),"inRange"!==e&&(t.visual=null),t})))}))},e.prototype.completeVisualOption=function(){var e=this.option,n={},i=tT.listVisualTypes(),r=this.isCategory();function o(t,e,n){return t&&t[e]&&t[e].hasOwnProperty(n)}R(e.pieces,(function(t){R(i,(function(e){t.hasOwnProperty(e)&&(n[e]=1)}))})),R(n,(function(t,n){var i=!1;R(this.stateList,(function(t){i=i||o(e,t,n)||o(e.target,t,n)}),this),!i&&R(this.stateList,(function(t){(e[t]||(e[t]={}))[n]=ZF(n,"inRange"===t?"active":"inactive",r)}))}),this),t.prototype.completeVisualOption.apply(this,arguments)},e.prototype._resetSelected=function(t,e){var n=this.option,i=this._pieceList,r=(e?n:t).selected||{};if(n.selected=r,R(i,(function(t,e){var n=this.getSelectedMapKey(t);r.hasOwnProperty(n)||(r[n]=!0)}),this),"single"===n.selectedMode){var o=!1;R(i,(function(t,e){var n=this.getSelectedMapKey(t);r[n]&&(o?r[n]=!1:o=!0)}),this)}},e.prototype.getItemSymbol=function(){return this.get("itemSymbol")},e.prototype.getSelectedMapKey=function(t){return"categories"===this._mode?t.value+"":t.index+""},e.prototype.getPieceList=function(){return this._pieceList},e.prototype._determineMode=function(){var t=this.option;return t.pieces&&t.pieces.length>0?"pieces":this.option.categories?"categories":"splitNumber"},e.prototype.setSelected=function(t){this.option.selected=A(t)},e.prototype.getValueState=function(t){var e=tT.findPieceIndex(t,this._pieceList);return null!=e&&this.option.selected[this.getSelectedMapKey(this._pieceList[e])]?"inRange":"outOfRange"},e.prototype.findTargetDataIndices=function(t){var e=[],n=this._pieceList;return this.eachTargetSeries((function(i){var r=[],o=i.getData();o.each(this.getDataDimensionIndex(o),(function(e,i){tT.findPieceIndex(e,n)===t&&r.push(i)}),this),e.push({seriesId:i.id,dataIndex:r})}),this),e},e.prototype.getRepresentValue=function(t){var e;if(this.isCategory())e=t.value;else if(null!=t.value)e=t.value;else{var n=t.interval||[];e=n[0]===-1/0&&n[1]===1/0?0:(n[0]+n[1])/2}return e},e.prototype.getVisualMeta=function(t){if(!this.isCategory()){var e=[],n=["",""],i=this,r=this._pieceList.slice();if(r.length){var o=r[0].interval[0];o!==-1/0&&r.unshift({interval:[-1/0,o]}),(o=r[r.length-1].interval[1])!==1/0&&r.push({interval:[o,1/0]})}else r.push({interval:[-1/0,1/0]});var a=-1/0;return R(r,(function(t){var e=t.interval;e&&(e[0]>a&&s([a,e[0]],"outOfRange"),s(e.slice()),a=e[1])}),this),{stops:e,outerColors:n}}function s(r,o){var a=i.getRepresentValue({interval:r});o||(o=i.getValueState(a));var s=t(a,o);r[0]===-1/0?n[0]=s:r[1]===1/0?n[1]=s:e.push({value:r[0],color:s},{value:r[1],color:s})}},e.type="visualMap.piecewise",e.defaultOption=yh(rV.defaultOption,{selected:null,minOpen:!1,maxOpen:!1,align:"auto",itemWidth:20,itemHeight:14,itemSymbol:"roundRect",pieces:null,categories:null,splitNumber:5,selectedMode:"multiple",itemGap:10,hoverLink:!0}),e}(rV),OV={splitNumber:function(t){var e=this.option,n=Math.min(e.precision,20),i=this.getExtent(),r=e.splitNumber;r=Math.max(parseInt(r,10),1),e.splitNumber=r;for(var o=(i[1]-i[0])/r;+o.toFixed(n)!==o&&n<5;)n++;e.precision=n,o=+o.toFixed(n),e.minOpen&&t.push({interval:[-1/0,i[0]],close:[0,0]});for(var a=0,s=i[0];a<r;s+=o,a++){var l=a===r-1?i[1]:s+o;t.push({interval:[s,l],close:[1,1]})}e.maxOpen&&t.push({interval:[i[1],1/0],close:[0,0]}),ao(t),R(t,(function(t,e){t.index=e,t.text=this.formatValueText(t.interval)}),this)},categories:function(t){var e=this.option;R(e.categories,(function(e){t.push({text:this.formatValueText(e,!0),value:e})}),this),DV(e,t)},pieces:function(t){var e=this.option;R(e.pieces,(function(e,n){$(e)||(e={value:e});var i={text:"",index:n};if(null!=e.label&&(i.text=e.label),e.hasOwnProperty("value")){var r=i.value=e.value;i.interval=[r,r],i.close=[1,1]}else{for(var o=i.interval=[],a=i.close=[0,0],s=[1,0,1],l=[-1/0,1/0],c=[],u=0;u<2;u++){for(var h=[["gte","gt","min"],["lte","lt","max"]][u],d=0;d<3&&null==o[u];d++)o[u]=e[h[d]],a[u]=s[d],c[u]=2===d;null==o[u]&&(o[u]=l[u])}c[0]&&o[1]===1/0&&(a[0]=0),c[1]&&o[0]===-1/0&&(a[1]=0),o[0]===o[1]&&a[0]&&a[1]&&(i.value=o[0])}i.visual=tT.retrieveVisuals(e),t.push(i)}),this),DV(e,t),ao(t),R(t,(function(t){var e=t.close,n=[["<",""][e[1]],[">",""][e[0]]];t.text=t.text||this.formatValueText(null!=t.value?t.value:t.interval,!1,n)}),this)}};function DV(t,e){var n=t.inverse;("vertical"===t.orient?!n:n)&&e.reverse()}var LV=function(t){function e(){var n=null!==t&&t.apply(this,arguments)||this;return n.type=e.type,n}return n(e,t),e.prototype.doRender=function(){var t=this.group;t.removeAll();var e=this.visualMapModel,n=e.get("textGap"),i=e.textStyleModel,r=i.getFont(),o=i.getTextColor(),a=this._getItemAlign(),s=e.itemSize,l=this._getViewData(),c=l.endsText,u=it(e.get("showLabel",!0),!c);c&&this._renderEndsText(t,c[0],s,u,a),R(l.viewPieceList,(function(i){var l=i.piece,c=new Dr;c.onclick=W(this._onItemClick,this,l),this._enableHoverLink(c,i.indexInModelPieceList);var h=e.getRepresentValue(l);if(this._createItemSymbol(c,h,[0,0,s[0],s[1]]),u){var d=this.visualMapModel.getValueState(h);c.add(new Rs({style:{x:"right"===a?-n:s[0]+n,y:s[1]/2,text:l.text,verticalAlign:"middle",align:a,font:r,fill:o,opacity:"outOfRange"===d?.5:1}}))}t.add(c)}),this),c&&this._renderEndsText(t,c[1],s,u,a),gd(e.get("orient"),t,e.get("itemGap")),this.renderBackground(t),this.positionGroup(t)},e.prototype._enableHoverLink=function(t,e){var n=this;t.on("mouseover",(function(){return i("highlight")})).on("mouseout",(function(){return i("downplay")}));var i=function(t){var i=n.visualMapModel;i.option.hoverLink&&n.api.dispatchAction({type:t,batch:hV(i.findTargetDataIndices(e),i)})}},e.prototype._getItemAlign=function(){var t=this.visualMapModel,e=t.option;if("vertical"===e.orient)return uV(t,this.api,t.itemSize);var n=e.align;return n&&"auto"!==n||(n="left"),n},e.prototype._renderEndsText=function(t,e,n,i,r){if(e){var o=new Dr,a=this.visualMapModel.textStyleModel;o.add(new Rs({style:qu(a,{x:i?"right"===r?n[0]:0:n[0]/2,y:n[1]/2,verticalAlign:"middle",align:i?r:"center",text:e})})),t.add(o)}},e.prototype._getViewData=function(){var t=this.visualMapModel,e=B(t.getPieceList(),(function(t,e){return{piece:t,indexInModelPieceList:e}})),n=t.get("text"),i=t.get("orient"),r=t.get("inverse");return("horizontal"===i?r:!r)?e.reverse():n&&(n=n.slice().reverse()),{viewPieceList:e,endsText:n}},e.prototype._createItemSymbol=function(t,e,n){t.add(Mm(this.getControllerVisual(e,"symbol"),n[0],n[1],n[2],n[3],this.getControllerVisual(e,"color")))},e.prototype._onItemClick=function(t){var e=this.visualMapModel,n=e.option,i=n.selectedMode;if(i){var r=A(n.selected),o=e.getSelectedMapKey(t);"single"===i||!0===i?(r[o]=!0,R(r,(function(t,e){r[e]=e===o}))):r[o]=!r[o],this.api.dispatchAction({type:"selectDataRange",from:this.uid,visualMapId:this.visualMapModel.id,selected:r})}},e.type="visualMap.piecewise",e}(lV);function PV(t){t.registerComponentModel(EV),t.registerComponentView(LV),TV(t)}var NV={label:{enabled:!0},decal:{show:!1}},RV=Io(),BV={};function zV(t,e){var n=t.getModel("aria");if(n.get("enabled")){var i=A(NV);M(i.label,t.getLocaleModel().get("aria"),!1),M(n.option,i,!1),function(){if(n.getModel("decal").get("show")){var e=mt();t.eachSeries((function(t){if(!t.isColorBySeries()){var n=e.get(t.type);n||(n={},e.set(t.type,n)),RV(t).scope=n}})),t.eachRawSeries((function(e){if(!t.isSeriesFiltered(e))if(X(e.enableAriaDecal))e.enableAriaDecal();else{var n=e.getData();if(e.isColorBySeries()){var i=$d(e.ecModel,e.name,BV,t.getSeriesCount()),r=n.getVisual("decal");n.setVisual("decal",c(r,i))}else{var o=e.getRawData(),a={},s=RV(e).scope;n.each((function(t){var e=n.getRawIndex(t);a[e]=t}));var l=o.count();o.each((function(t){var i=a[t],r=o.getName(t)||t+"",u=$d(e.ecModel,r,s,l),h=n.getItemVisual(i,"decal");n.setItemVisual(i,"decal",c(h,u))}))}}function c(t,e){var n=t?I(I({},e),t):e;return n.dirty=!0,n}}))}}(),function(){var i=t.getLocaleModel().get("aria"),o=n.getModel("label");if(o.option=E(o.option,i),o.get("enabled")){var a=e.getZr().dom;if(o.get("description"))a.setAttribute("aria-label",o.get("description"));else{var s,l=t.getSeriesCount(),c=o.get(["data","maxCount"])||10,u=o.get(["series","maxCount"])||10,h=Math.min(l,u);if(!(l<1)){var d=function(){var e=t.get("title");return e&&e.length&&(e=e[0]),e&&e.text}();s=d?r(o.get(["general","withTitle"]),{title:d}):o.get(["general","withoutTitle"]);var p=[];s+=r(l>1?o.get(["series","multiple","prefix"]):o.get(["series","single","prefix"]),{seriesCount:l}),t.eachSeries((function(e,n){if(n<h){var i=void 0,a=e.get("name")?"withName":"withoutName";i=r(i=l>1?o.get(["series","multiple",a]):o.get(["series","single",a]),{seriesId:e.seriesIndex,seriesName:e.get("name"),seriesType:(b=e.subType,x=t.getLocaleModel().get(["series","typeNames"]),x[b]||x.chart)});var s=e.getData();s.count()>c?i+=r(o.get(["data","partialData"]),{displayCnt:c}):i+=o.get(["data","allData"]);for(var u=o.get(["data","separator","middle"]),d=o.get(["data","separator","end"]),f=[],g=0;g<s.count();g++)if(g<c){var m=s.getName(g),v=s.getValues(g),y=o.get(["data",m?"withName":"withoutName"]);f.push(r(y,{name:m,value:v.join(u)}))}i+=f.join(u)+d,p.push(i)}var b,x}));var f=o.getModel(["series","multiple","separator"]),g=f.get("middle"),m=f.get("end");s+=p.join(g)+m,a.setAttribute("aria-label",s)}}}}()}function r(t,e){if(!G(t))return t;var n=t;return R(e,(function(t,e){n=n.replace(new RegExp("\\{\\s*"+e+"\\s*\\}","g"),t)})),n}}function FV(t){if(t&&t.aria){var e=t.aria;null!=e.show&&(e.enabled=e.show),e.label=e.label||{},R(["description","general","series","data"],(function(t){null!=e[t]&&(e.label[t]=e[t])}))}}var VV={value:"eq","<":"lt","<=":"lte",">":"gt",">=":"gte","=":"eq","!=":"ne","<>":"ne"},HV=function(){function t(t){if(null==(this._condVal=G(t)?new RegExp(t):et(t)?t:null)){po("")}}return t.prototype.evaluate=function(t){var e=typeof t;return G(e)?this._condVal.test(t):!!U(e)&&this._condVal.test(t+"")},t}(),WV=function(){function t(){}return t.prototype.evaluate=function(){return this.value},t}(),jV=function(){function t(){}return t.prototype.evaluate=function(){for(var t=this.children,e=0;e<t.length;e++)if(!t[e].evaluate())return!1;return!0},t}(),YV=function(){function t(){}return t.prototype.evaluate=function(){for(var t=this.children,e=0;e<t.length;e++)if(t[e].evaluate())return!0;return!1},t}(),XV=function(){function t(){}return t.prototype.evaluate=function(){return!this.child.evaluate()},t}(),GV=function(){function t(){}return t.prototype.evaluate=function(){for(var t=!!this.valueParser,e=(0,this.getValue)(this.valueGetterParam),n=t?this.valueParser(e):null,i=0;i<this.subCondList.length;i++)if(!this.subCondList[i].evaluate(t?n:e))return!1;return!0},t}();function qV(t,e){if(!0===t||!1===t){var n=new WV;return n.value=t,n}return $V(t)||po(""),t.and?UV("and",t,e):t.or?UV("or",t,e):t.not?function(t,e){var n=t.not;$V(n)||po("");var i=new XV;return i.child=qV(n,e),i.child||po(""),i}(t,e):function(t,e){for(var n=e.prepareGetValue(t),i=[],r=H(t),o=t.parser,a=o?cf(o):null,s=0;s<r.length;s++){var l=r[s];if("parser"!==l&&!e.valueGetterAttrMap.get(l)){var c=xt(VV,l)?VV[l]:l,u=t[l],h=a?a(u):u,d=ff(c,h)||"reg"===c&&new HV(h);d||po(""),i.push(d)}}i.length||po("");var p=new GV;return p.valueGetterParam=n,p.valueParser=a,p.getValue=e.getValue,p.subCondList=i,p}(t,e)}function UV(t,e,n){var i=e[t];Y(i)||po(""),i.length||po("");var r="and"===t?new jV:new YV;return r.children=B(i,(function(t){return qV(t,n)})),r.children.length||po(""),r}function $V(t){return $(t)&&!N(t)}var ZV=function(){function t(t,e){this._cond=qV(t,e)}return t.prototype.evaluate=function(){return this._cond.evaluate()},t}(),KV={type:"echarts:filter",transform:function(t){for(var e,n,i,r=t.upstream,o=(n=t.config,i={valueGetterAttrMap:mt({dimension:!0}),prepareGetValue:function(t){var e=t.dimension;xt(t,"dimension")||po("");var n=r.getDimensionInfo(e);return n||po(""),{dimIdx:n.index}},getValue:function(t){return r.retrieveValueFromItem(e,t.dimIdx)}},new ZV(n,i)),a=[],s=0,l=r.count();s<l;s++)e=r.getRawDataItem(s),o.evaluate()&&a.push(e);return{data:a}}},QV={type:"echarts:sort",transform:function(t){var e=t.upstream,n=t.config,i="",r=vo(n);r.length||po(i);var o=[];R(r,(function(t){var n=t.dimension,r=t.order,a=t.parser,s=t.incomparable;if(null==n&&po(i),"asc"!==r&&"desc"!==r&&po(i),s&&"min"!==s&&"max"!==s){po("")}if("asc"!==r&&"desc"!==r){po("")}var l=e.getDimensionInfo(n);l||po(i);var c=a?cf(a):null;a&&!c&&po(i),o.push({dimIdx:l.index,parser:c,comparator:new df(r,s)})}));var a=e.sourceFormat;a!==Id&&a!==Ed&&po(i);for(var s=[],l=0,c=e.count();l<c;l++)s.push(e.getRawDataItem(l));return s.sort((function(t,n){for(var i=0;i<o.length;i++){var r=o[i],a=e.retrieveValueFromItem(t,r.dimIdx),s=e.retrieveValueFromItem(n,r.dimIdx);r.parser&&(a=r.parser(a),s=r.parser(s));var l=r.comparator.evaluate(a,s);if(0!==l)return l}return 0})),{data:s}}},JV=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="dataset",e}return n(e,t),e.prototype.init=function(e,n,i){t.prototype.init.call(this,e,n,i),this._sourceManager=new Lf(this),Pf(this)},e.prototype.mergeOption=function(e,n){t.prototype.mergeOption.call(this,e,n),Pf(this)},e.prototype.optionUpdated=function(){this._sourceManager.dirty()},e.prototype.getSourceManager=function(){return this._sourceManager},e.type="dataset",e.defaultOption={seriesLayoutBy:Pd},e}(Sd),tH=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.type="dataset",e}return n(e,t),e.type="dataset",e}(hg),eH=es.CMD;function nH(t,e){return Math.abs(t-e)<1e-5}function iH(t){var e,n,i,r,o,a=t.data,s=t.len(),l=[],c=0,u=0,h=0,d=0;function p(t,n){e&&e.length>2&&l.push(e),e=[t,n]}function f(t,n,i,r){nH(t,i)&&nH(n,r)||e.push(t,n,i,r,i,r)}function g(t,n,i,r,o,a){var s=Math.abs(n-t),l=4*Math.tan(s/4)/3,c=n<t?-1:1,u=Math.cos(t),h=Math.sin(t),d=Math.cos(n),p=Math.sin(n),f=u*o+i,g=h*a+r,m=d*o+i,v=p*a+r,y=o*l*c,b=a*l*c;e.push(f-y*h,g+b*u,m+y*p,v-b*d,m,v)}for(var m=0;m<s;){var v=a[m++],y=1===m;switch(y&&(h=c=a[m],d=u=a[m+1],v!==eH.L&&v!==eH.C&&v!==eH.Q||(e=[h,d])),v){case eH.M:c=h=a[m++],u=d=a[m++],p(h,d);break;case eH.L:f(c,u,n=a[m++],i=a[m++]),c=n,u=i;break;case eH.C:e.push(a[m++],a[m++],a[m++],a[m++],c=a[m++],u=a[m++]);break;case eH.Q:n=a[m++],i=a[m++],r=a[m++],o=a[m++],e.push(c+2/3*(n-c),u+2/3*(i-u),r+2/3*(n-r),o+2/3*(i-o),r,o),c=r,u=o;break;case eH.A:var b=a[m++],x=a[m++],_=a[m++],w=a[m++],S=a[m++],C=a[m++]+S;m+=1;var k=!a[m++];n=Math.cos(S)*_+b,i=Math.sin(S)*w+x,y?p(h=n,d=i):f(c,u,n,i),c=Math.cos(C)*_+b,u=Math.sin(C)*w+x;for(var A=(k?-1:1)*Math.PI/2,M=S;k?M>C:M<C;M+=A)g(M,k?Math.max(M+A,C):Math.min(M+A,C),b,x,_,w);break;case eH.R:h=c=a[m++],d=u=a[m++],n=h+a[m++],i=d+a[m++],p(n,d),f(n,d,n,i),f(n,i,h,i),f(h,i,h,d),f(h,d,n,d);break;case eH.Z:e&&f(c,u,h,d),c=h,u=d}}return e&&e.length>2&&l.push(e),l}function rH(t,e,n,i,r,o,a,s,l,c){if(nH(t,n)&&nH(e,i)&&nH(r,a)&&nH(o,s))l.push(a,s);else{var u=2/c,h=u*u,d=a-t,p=s-e,f=Math.sqrt(d*d+p*p);d/=f,p/=f;var g=n-t,m=i-e,v=r-a,y=o-s,b=g*g+m*m,x=v*v+y*y;if(b<h&&x<h)l.push(a,s);else{var _=d*g+p*m,w=-d*v-p*y;if(b-_*_<h&&_>=0&&x-w*w<h&&w>=0)l.push(a,s);else{var S=[],C=[];bn(t,n,r,a,.5,S),bn(e,i,o,s,.5,C),rH(S[0],C[0],S[1],C[1],S[2],C[2],S[3],C[3],l,c),rH(S[4],C[4],S[5],C[5],S[6],C[6],S[7],C[7],l,c)}}}}function oH(t,e,n){var i=t[e],r=t[1-e],o=Math.abs(i/r),a=Math.ceil(Math.sqrt(o*n)),s=Math.floor(n/a);0===s&&(s=1,a=n);for(var l=[],c=0;c<a;c++)l.push(s);var u=n-a*s;if(u>0)for(c=0;c<u;c++)l[c%a]+=1;return l}function aH(t,e,n){for(var i=t.r0,r=t.r,o=t.startAngle,a=t.endAngle,s=Math.abs(a-o),l=s*r,c=r-i,u=l>Math.abs(c),h=oH([l,c],u?0:1,e),d=(u?s:c)/h.length,p=0;p<h.length;p++)for(var f=(u?c:s)/h[p],g=0;g<h[p];g++){var m={};u?(m.startAngle=o+d*p,m.endAngle=o+d*(p+1),m.r0=i+f*g,m.r=i+f*(g+1)):(m.startAngle=o+f*g,m.endAngle=o+f*(g+1),m.r0=i+d*p,m.r=i+d*(p+1)),m.clockwise=t.clockwise,m.cx=t.cx,m.cy=t.cy,n.push(m)}}function sH(t,e,n,i){return t*i-n*e}function lH(t,e,n,i,r,o,a,s){var l=n-t,c=i-e,u=a-r,h=s-o,d=sH(u,h,l,c);if(Math.abs(d)<1e-6)return null;var p=sH(t-r,e-o,u,h)/d;return p<0||p>1?null:new Me(p*l+t,p*c+e)}function cH(t,e,n){var i=new Me;Me.sub(i,n,e),i.normalize();var r=new Me;return Me.sub(r,t,e),r.dot(i)}function uH(t,e){var n=t[t.length-1];n&&n[0]===e[0]&&n[1]===e[1]||t.push(e)}function hH(t){var e=t.points,n=[],i=[];Ea(e,n,i);var r=new Re(n[0],n[1],i[0]-n[0],i[1]-n[1]),o=r.width,a=r.height,s=r.x,l=r.y,c=new Me,u=new Me;return o>a?(c.x=u.x=s+o/2,c.y=l,u.y=l+a):(c.y=u.y=l+a/2,c.x=s,u.x=s+o),function(t,e,n){for(var i=t.length,r=[],o=0;o<i;o++){var a=t[o],s=t[(o+1)%i],l=lH(a[0],a[1],s[0],s[1],e.x,e.y,n.x,n.y);l&&r.push({projPt:cH(l,e,n),pt:l,idx:o})}if(r.length<2)return[{points:t},{points:t}];r.sort((function(t,e){return t.projPt-e.projPt}));var c=r[0],u=r[r.length-1];if(u.idx<c.idx){var h=c;c=u,u=h}var d=[c.pt.x,c.pt.y],p=[u.pt.x,u.pt.y],f=[d],g=[p];for(o=c.idx+1;o<=u.idx;o++)uH(f,t[o].slice());for(uH(f,p),uH(f,d),o=u.idx+1;o<=c.idx+i;o++)uH(g,t[o%i].slice());return uH(g,d),uH(g,p),[{points:f},{points:g}]}(e,c,u)}function dH(t,e,n,i){if(1===n)i.push(e);else{var r=Math.floor(n/2),o=t(e);dH(t,o[0],r,i),dH(t,o[1],n-r,i)}return i}function pH(t,e){e.setStyle(t.style),e.z=t.z,e.z2=t.z2,e.zlevel=t.zlevel}function fH(t,e){var n=t.length,i=e.length;if(n===i)return[t,e];for(var r=[],o=[],a=n<i?t:e,s=Math.min(n,i),l=Math.abs(i-n)/6,c=(s-2)/6,u=Math.ceil(l/c)+1,h=[a[0],a[1]],d=l,p=2;p<s;){var f=a[p-2],g=a[p-1],m=a[p++],v=a[p++],y=a[p++],b=a[p++],x=a[p++],_=a[p++];if(d<=0)h.push(m,v,y,b,x,_);else{for(var w=Math.min(d,u-1)+1,S=1;S<=w;S++){var C=S/w;bn(f,m,y,x,C,r),bn(g,v,b,_,C,o),f=r[3],g=o[3],h.push(r[1],o[1],r[2],o[2],f,g),m=r[5],v=o[5],y=r[6],b=o[6]}d-=w-1}}return a===t?[h,e]:[t,h]}function gH(t,e){for(var n=t.length,i=t[n-2],r=t[n-1],o=[],a=0;a<e.length;)o[a++]=i,o[a++]=r;return o}function mH(t){for(var e=0,n=0,i=0,r=t.length,o=0,a=r-2;o<r;a=o,o+=2){var s=t[a],l=t[a+1],c=t[o],u=t[o+1],h=s*u-c*l;e+=h,n+=(s+c)*h,i+=(l+u)*h}return 0===e?[t[0]||0,t[1]||0]:[n/e/3,i/e/3,e]}function vH(t,e,n,i){for(var r=(t.length-2)/6,o=1/0,a=0,s=t.length,l=s-2,c=0;c<r;c++){for(var u=6*c,h=0,d=0;d<s;d+=2){var p=0===d?u:(u+d-2)%l+2,f=t[p]-n[0],g=t[p+1]-n[1],m=e[d]-i[0]-f,v=e[d+1]-i[1]-g;h+=m*m+v*v}h<o&&(o=h,a=c)}return a}function yH(t){for(var e=[],n=t.length,i=0;i<n;i+=2)e[i]=t[n-i-2],e[i+1]=t[n-i-1];return e}function bH(t){return t.__isCombineMorphing}var xH="__mOriginal_";function _H(t,e,n){var i=xH+e,r=t[i]||t[e];t[i]||(t[i]=t[e]);var o=n.replace,a=n.after,s=n.before;t[e]=function(){var t,e=arguments;return s&&s.apply(this,e),t=o?o.apply(this,e):r.apply(this,e),a&&a.apply(this,e),t}}function wH(t,e){var n=xH+e;t[n]&&(t[e]=t[n],t[n]=null)}function SH(t,e){for(var n=0;n<t.length;n++)for(var i=t[n],r=0;r<i.length;){var o=i[r],a=i[r+1];i[r++]=e[0]*o+e[2]*a+e[4],i[r++]=e[1]*o+e[3]*a+e[5]}}function CH(t,e){var n=t.getUpdatedPathProxy(),i=e.getUpdatedPathProxy(),r=function(t,e){for(var n,i,r,o=[],a=[],s=0;s<Math.max(t.length,e.length);s++){var l=t[s],c=e[s],u=void 0,h=void 0;l?c?(i=u=(n=fH(l,c))[0],r=h=n[1]):(h=gH(r||l,l),u=l):(u=gH(i||c,c),h=c),o.push(u),a.push(h)}return[o,a]}(iH(n),iH(i)),o=r[0],a=r[1],s=t.getComputedTransform(),l=e.getComputedTransform();s&&SH(o,s),l&&SH(a,l),_H(e,"updateTransform",{replace:function(){this.transform=null}}),e.transform=null;var c=function(t,e,n,i){for(var r,o=[],a=0;a<t.length;a++){var s=t[a],l=e[a],c=mH(s),u=mH(l);null==r&&(r=c[2]<0!=u[2]<0);var h=[],d=[],p=0,f=1/0,g=[],m=s.length;r&&(s=yH(s));for(var v=6*vH(s,l,c,u),y=m-2,b=0;b<y;b+=2){var x=(v+b)%y+2;h[b+2]=s[x]-c[0],h[b+3]=s[x+1]-c[1]}h[0]=s[v]-c[0],h[1]=s[v+1]-c[1];for(var _=i/10,w=-i/2;w<=i/2;w+=_){var S=Math.sin(w),C=Math.cos(w),k=0;for(b=0;b<s.length;b+=2){var A=h[b],M=h[b+1],T=l[b]-u[0],I=l[b+1]-u[1],E=T*C-I*S,O=T*S+I*C;g[b]=E,g[b+1]=O;var D=E-A,L=O-M;k+=D*D+L*L}if(k<f){f=k,p=w;for(var P=0;P<g.length;P++)d[P]=g[P]}}o.push({from:h,to:d,fromCp:c,toCp:u,rotation:-p})}return o}(o,a,0,Math.PI),u=[];_H(e,"buildPath",{replace:function(t){for(var n=e.__morphT,i=1-n,r=[],o=0;o<c.length;o++){var a=c[o],s=a.from,l=a.to,h=a.rotation*n,d=a.fromCp,p=a.toCp,f=Math.sin(h),g=Math.cos(h);Ht(r,d,p,n);for(var m=0;m<s.length;m+=2){var v=s[m],y=s[m+1],b=v*i+(S=l[m])*n,x=y*i+(C=l[m+1])*n;u[m]=b*g-x*f+r[0],u[m+1]=b*f+x*g+r[1]}var _=u[0],w=u[1];for(t.moveTo(_,w),m=2;m<s.length;){var S=u[m++],C=u[m++],k=u[m++],A=u[m++],M=u[m++],T=u[m++];_===S&&w===C&&k===M&&A===T?t.lineTo(M,T):t.bezierCurveTo(S,C,k,A,M,T),_=M,w=T}}}})}function kH(t,e,n){if(!t||!e)return e;var i=n.done,r=n.during;return CH(t,e),e.__morphT=0,e.animateTo({__morphT:1},E({during:function(t){e.dirtyShape(),r&&r(t)},done:function(){wH(e,"buildPath"),wH(e,"updateTransform"),e.__morphT=-1,e.createPathProxy(),e.dirtyShape(),i&&i()}},n)),e}function AH(t,e,n,i,r,o){t=r===n?0:Math.round(32767*(t-n)/(r-n)),e=o===i?0:Math.round(32767*(e-i)/(o-i));for(var a,s=0,l=32768;l>0;l/=2){var c=0,u=0;(t&l)>0&&(c=1),(e&l)>0&&(u=1),s+=l*l*(3*c^u),0===u&&(1===c&&(t=l-1-t,e=l-1-e),a=t,t=e,e=a)}return s}function MH(t){var e=1/0,n=1/0,i=-1/0,r=-1/0,o=B(t,(function(t){var o=t.getBoundingRect(),a=t.getComputedTransform(),s=o.x+o.width/2+(a?a[4]:0),l=o.y+o.height/2+(a?a[5]:0);return e=Math.min(s,e),n=Math.min(l,n),i=Math.max(s,i),r=Math.max(l,r),[s,l]}));return B(o,(function(o,a){return{cp:o,z:AH(o[0],o[1],e,n,i,r),path:t[a]}})).sort((function(t,e){return t.z-e.z})).map((function(t){return t.path}))}function TH(t){return function(t,e){var n,i=[],r=t.shape;switch(t.type){case"rect":!function(t,e,n){for(var i=t.width,r=t.height,o=i>r,a=oH([i,r],o?0:1,e),s=o?"width":"height",l=o?"height":"width",c=o?"x":"y",u=o?"y":"x",h=t[s]/a.length,d=0;d<a.length;d++)for(var p=t[l]/a[d],f=0;f<a[d];f++){var g={};g[c]=d*h,g[u]=f*p,g[s]=h,g[l]=p,g.x+=t.x,g.y+=t.y,n.push(g)}}(r,e,i),n=Ls;break;case"sector":aH(r,e,i),n=Ic;break;case"circle":aH({r0:0,r:r.r,startAngle:0,endAngle:2*Math.PI,cx:r.cx,cy:r.cy},e,i),n=Ic;break;default:var o=t.getComputedTransform(),a=o?Math.sqrt(Math.max(o[0]*o[0]+o[1]*o[1],o[2]*o[2]+o[3]*o[3])):1,s=B(function(t,e){var n=iH(t),i=[];e=e||1;for(var r=0;r<n.length;r++){var o=n[r],a=[],s=o[0],l=o[1];a.push(s,l);for(var c=2;c<o.length;){var u=o[c++],h=o[c++],d=o[c++],p=o[c++],f=o[c++],g=o[c++];rH(s,l,u,h,d,p,f,g,a,e),s=f,l=g}i.push(a)}return i}(t.getUpdatedPathProxy(),a),(function(t){return function(t){for(var e=[],n=0;n<t.length;)e.push([t[n++],t[n++]]);return e}(t)})),l=s.length;if(0===l)dH(hH,{points:s[0]},e,i);else if(l===e)for(var c=0;c<l;c++)i.push({points:s[c]});else{var u=0,h=B(s,(function(t){var e=[],n=[];Ea(t,e,n);var i=(n[1]-e[1])*(n[0]-e[0]);return u+=i,{poly:t,area:i}}));h.sort((function(t,e){return e.area-t.area}));var d=e;for(c=0;c<l;c++){var p=h[c];if(d<=0)break;var f=c===l-1?d:Math.ceil(p.area/u*e);f<0||(dH(hH,{points:p.poly},f,i),d-=f)}}n=Pc}if(!n)return function(t,e){for(var n=[],i=0;i<e;i++)n.push(hc(t));return n}(t,e);var g=[];for(c=0;c<i.length;c++){var m=new n;m.setShape(i[c]),pH(t,m),g.push(m)}return g}(t.path,t.count)}function IH(t){return Y(t[0])}function EH(t,e){for(var n=[],i=t.length,r=0;r<i;r++)n.push({one:t[r],many:[]});for(r=0;r<e.length;r++){var o=e[r].length,a=void 0;for(a=0;a<o;a++)n[a%i].many.push(e[r][a])}var s=0;for(r=i-1;r>=0;r--)if(!n[r].many.length){var l=n[s].many;if(l.length<=1){if(!s)return n;s=0}o=l.length;var c=Math.ceil(o/2);n[r].many=l.slice(c,o),n[s].many=l.slice(0,c),s++}return n}var OH={clone:function(t){for(var e=[],n=1-Math.pow(1-t.path.style.opacity,1/t.count),i=0;i<t.count;i++){var r=hc(t.path);r.setStyle("opacity",n),e.push(r)}return e},split:null};function DH(t,e,n,i,r,o){if(t.length&&e.length){var a=ru("update",i,r);if(a&&a.duration>0){var s,l,c=i.getModel("universalTransition").get("delay"),u=Object.assign({setToFinal:!0},a);IH(t)&&(s=t,l=e),IH(e)&&(s=e,l=t);for(var h=s?s===t:t.length>e.length,d=s?EH(l,s):EH(h?e:t,[h?t:e]),p=0,f=0;f<d.length;f++)p+=d[f].many.length;var g=0;for(f=0;f<d.length;f++)m(d[f],h,g,p),g+=d[f].many.length}}function m(t,e,i,r,a){var s=t.many,l=t.one;if(1!==s.length||a)for(var h=E({dividePath:OH[n],individualDelay:c&&function(t,e,n,o){return c(t+i,r)}},u),d=e?function(t,e,n){var i=[];!function t(e){for(var n=0;n<e.length;n++){var r=e[n];bH(r)?t(r.childrenRef()):r instanceof _s&&i.push(r)}}(t);var r=i.length;if(!r)return{fromIndividuals:[],toIndividuals:[],count:0};var o=(n.dividePath||TH)({path:e,count:r});if(o.length!==r)return console.error("Invalid morphing: unmatched splitted path"),{fromIndividuals:[],toIndividuals:[],count:0};i=MH(i),o=MH(o);for(var a=n.done,s=n.during,l=n.individualDelay,c=new ur,u=0;u<r;u++){var h=i[u],d=o[u];d.parent=e,d.copyTransform(c),l||CH(h,d)}function p(t){for(var e=0;e<o.length;e++)o[e].addSelfToZr(t)}function f(){e.__isCombineMorphing=!1,e.__morphT=-1,e.childrenRef=null,wH(e,"addSelfToZr"),wH(e,"removeSelfFromZr")}e.__isCombineMorphing=!0,e.childrenRef=function(){return o},_H(e,"addSelfToZr",{after:function(t){p(t)}}),_H(e,"removeSelfFromZr",{after:function(t){for(var e=0;e<o.length;e++)o[e].removeSelfFromZr(t)}});var g=o.length;if(l){var m=g,v=function(){0==--m&&(f(),a&&a())};for(u=0;u<g;u++){var y=l?E({delay:(n.delay||0)+l(u,g,i[u],o[u]),done:v},n):n;kH(i[u],o[u],y)}}else e.__morphT=0,e.animateTo({__morphT:1},E({during:function(t){for(var n=0;n<g;n++){var i=o[n];i.__morphT=e.__morphT,i.dirtyShape()}s&&s(t)},done:function(){f();for(var e=0;e<t.length;e++)wH(t[e],"updateTransform");a&&a()}},n));return e.__zr&&p(e.__zr),{fromIndividuals:i,toIndividuals:o,count:g}}(s,l,h):function(t,e,n){var i=e.length,r=[],o=n.dividePath||TH;if(bH(t)){!function t(e){for(var n=0;n<e.length;n++){var i=e[n];bH(i)?t(i.childrenRef()):i instanceof _s&&r.push(i)}}(t.childrenRef());var a=r.length;if(a<i)for(var s=0,l=a;l<i;l++)r.push(hc(r[s++%a]));r.length=i}else{r=o({path:t,count:i});var c=t.getComputedTransform();for(l=0;l<r.length;l++)r[l].setLocalTransform(c);if(r.length!==i)return console.error("Invalid morphing: unmatched splitted path"),{fromIndividuals:[],toIndividuals:[],count:0}}r=MH(r),e=MH(e);var u=n.individualDelay;for(l=0;l<i;l++){var h=u?E({delay:(n.delay||0)+u(l,i,r[l],e[l])},n):n;kH(r[l],e[l],h)}return{fromIndividuals:r,toIndividuals:e,count:e.length}}(l,s,h),p=d.fromIndividuals,f=d.toIndividuals,g=p.length,v=0;v<g;v++)y=c?E({delay:c(v,g)},u):u,o(p[v],f[v],e?s[v]:t.one,e?t.one:s[v],y);else{var y,b=e?s[0]:l,x=e?l:s[0];bH(b)?m({many:[b],one:x},!0,i,r,!0):(kH(b,x,y=c?E({delay:c(i,r)},u):u),o(b,x,b,x,y))}}}function LH(t){if(!t)return[];if(Y(t)){for(var e=[],n=0;n<t.length;n++)e.push(LH(t[n]));return e}var i=[];return t.traverse((function(t){t instanceof _s&&!t.disableMorphing&&!t.invisible&&!t.ignore&&i.push(t)})),i}var PH=Io();function NH(t,e,n,i){var r=function(t,e){for(var n=t.dimensions,i=0;i<n.length;i++){var r=t.getDimensionInfo(n[i]);if(r&&0===r.otherDims[e])return n[i]}}(t,i?"itemChildGroupId":"itemGroupId");if(r){var o=function(t,e,n){var i=t.getDimensionInfo(n),r=i&&i.ordinalMeta;if(i){var o=t.get(i.name,e);return r&&r.categories[o]||o+""}}(t,e,r);return o}var a=t.getRawDataItem(e),s=i?"childGroupId":"groupId";return a&&a[s]?a[s]+"":i?void 0:n||t.getId(e)}function RH(t){var e=[];return R(t,(function(t){var n=t.data,i=t.dataGroupId;if(!(n.count()>1e4))for(var r=n.getIndices(),o=0;o<r.length;o++)e.push({data:n,groupId:NH(n,o,i,!1),childGroupId:NH(n,o,i,!0),divide:t.divide,dataIndex:o})})),e}function BH(t,e,n){t.traverse((function(t){t instanceof _s&&su(t,{style:{opacity:0}},e,{dataIndex:n,isFrom:!0})}))}function zH(t){if(t.parent){var e=t.getComputedTransform();t.setLocalTransform(e),t.parent.remove(t)}}function FH(t){t.stopAnimation(),t.isGroup&&t.traverse((function(t){t.stopAnimation()}))}function VH(t,e,n){var i=RH(t),r=RH(e);function o(t,e,n,i,r){(n||t)&&e.animateFrom({style:n&&n!==t?I(I({},n.style),t.style):t.style},r)}var a=!1,s=0,l=mt(),c=mt();i.forEach((function(t){t.groupId&&l.set(t.groupId,!0),t.childGroupId&&c.set(t.childGroupId,!0)}));for(var u=0;u<r.length;u++){var h=r[u].groupId;if(c.get(h)){s=1;break}var d=r[u].childGroupId;if(d&&l.get(d)){s=2;break}}function p(t,e){return function(n){var i=n.data,r=n.dataIndex;return e?i.getId(r):t?1===s?n.childGroupId:n.groupId:2===s?n.childGroupId:n.groupId}}var f=function(t,e){var n=t.length;if(n!==e.length)return!1;for(var i=0;i<n;i++){var r=t[i],o=e[i];if(r.data.getId(r.dataIndex)!==o.data.getId(o.dataIndex))return!1}return!0}(i,r),g={};if(!f)for(u=0;u<r.length;u++){var m=r[u],v=m.data.getItemGraphicEl(m.dataIndex);v&&(g[v.id]=!0)}function y(t,e){var n=i[e],s=r[t],l=s.data.hostModel,c=n.data.getItemGraphicEl(n.dataIndex),u=s.data.getItemGraphicEl(s.dataIndex);c!==u?c&&g[c.id]||u&&(FH(u),c?(FH(c),zH(c),a=!0,DH(LH(c),LH(u),s.divide,l,t,o)):BH(u,l,t)):u&&function(t,e,n){var i=ru("update",n,e);i&&t.traverse((function(t){if(t instanceof ba){var e=function(t){return iu(t).oldStyle}(t);e&&t.animateFrom({style:e},i)}}))}(u,s.dataIndex,l)}new Sy(i,r,p(!0,f),p(!1,f),null,"multiple").update(y).updateManyToOne((function(t,e){var n=r[t],s=n.data,l=s.hostModel,c=s.getItemGraphicEl(n.dataIndex),u=F(B(e,(function(t){return i[t].data.getItemGraphicEl(i[t].dataIndex)})),(function(t){return t&&t!==c&&!g[t.id]}));c&&(FH(c),u.length?(R(u,(function(t){FH(t),zH(t)})),a=!0,DH(LH(u),LH(c),n.divide,l,t,o)):BH(c,l,n.dataIndex))})).updateOneToMany((function(t,e){var n=i[e],s=n.data.getItemGraphicEl(n.dataIndex);if(!s||!g[s.id]){var l=F(B(t,(function(t){return r[t].data.getItemGraphicEl(r[t].dataIndex)})),(function(t){return t&&t!==s})),c=r[t[0]].data.hostModel;l.length&&(R(l,(function(t){return FH(t)})),s?(FH(s),zH(s),a=!0,DH(LH(s),LH(l),n.divide,c,t[0],o)):R(l,(function(e){return BH(e,c,t[0])})))}})).updateManyToMany((function(t,e){new Sy(e,t,(function(t){return i[t].data.getId(i[t].dataIndex)}),(function(t){return r[t].data.getId(r[t].dataIndex)})).update((function(n,i){y(t[n],e[i])})).execute()})).execute(),a&&R(e,(function(t){var e=t.data.hostModel,i=e&&n.getViewOfSeriesModel(e),r=ru("update",e,0);i&&e.isAnimationEnabled()&&r&&r.duration>0&&i.group.traverse((function(t){t instanceof _s&&!t.animators.length&&t.animateFrom({style:{opacity:0}},r)}))}))}function HH(t){return t.getModel("universalTransition").get("seriesKey")||t.id}function WH(t){return Y(t)?t.sort().join(","):t}function jH(t){if(t.hostModel)return t.hostModel.getModel("universalTransition").get("divideShape")}function YH(t,e){for(var n=0;n<t.length;n++)if(null!=e.seriesIndex&&e.seriesIndex===t[n].seriesIndex||null!=e.seriesId&&e.seriesId===t[n].id)return n}xy([function(t){t.registerPainter("canvas",Vw)}]),xy([function(t){t.registerPainter("svg",Pw)}]),xy([function(t){t.registerChartView(xS),t.registerSeriesModel(Hw),t.registerLayout(_S("line",!0)),t.registerVisual({seriesType:"line",reset:function(t){var e=t.getData(),n=t.getModel("lineStyle").getLineStyle();n&&!n.stroke&&(n.stroke=e.getVisual("style").fill),e.setVisual("legendLineStyle",n)}}),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,CS("line"))},function(t){t.registerChartView(PS),t.registerSeriesModel(AS),t.registerLayout(t.PRIORITY.VISUAL.LAYOUT,j(Ab,"bar")),t.registerLayout(t.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,Mb("bar")),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,CS("bar")),t.registerAction({type:"changeAxisOrder",event:"changeAxisOrder",update:"update"},(function(t,e){var n=t.componentType||"series";e.eachComponent({mainType:n,query:t},(function(e){t.sortInfo&&e.axis.setCategorySortInfo(t.sortInfo)}))}))},function(t){t.registerChartView(sC),t.registerSeriesModel(hC),pm("pie",t.registerAction),t.registerLayout(j(tC,"pie")),t.registerProcessor(eC("pie")),t.registerProcessor({seriesType:"pie",reset:function(t,e){var n=t.getData();n.filterSelf((function(t){var e=n.mapDimension("value"),i=n.get(e,t);return!(U(i)&&!isNaN(i)&&i<0)}))}})},function(t){xy(hk),t.registerSeriesModel(dC),t.registerChartView(mC),t.registerLayout(_S("scatter"))},function(t){xy(kk),t.registerChartView(mk),t.registerSeriesModel(vk),t.registerLayout(dk),t.registerProcessor(eC("radar")),t.registerPreprocessor(gk)},function(t){xy(QA),t.registerChartView(LA),t.registerSeriesModel(PA),t.registerLayout(RA),t.registerProcessor(t.PRIORITY.PROCESSOR.STATISTIC,NA),pm("map",t.registerAction)},function(t){t.registerChartView(uM),t.registerSeriesModel(DM),t.registerLayout(PM),t.registerVisual(NM),function(t){t.registerAction({type:"treeExpandAndCollapse",event:"treeExpandAndCollapse",update:"update"},(function(t,e){e.eachComponent({mainType:"series",subType:"tree",query:t},(function(e){var n=t.dataIndex,i=e.getData().tree.getNodeByDataIndex(n);i.isExpand=!i.isExpand}))})),t.registerAction({type:"treeRoam",event:"treeRoam",update:"none"},(function(t,e,n){e.eachComponent({mainType:"series",subType:"tree",query:t},(function(e){var i=$A(e.coordinateSystem,t,void 0,n);e.setCenter&&e.setCenter(i.center),e.setZoom&&e.setZoom(i.zoom)}))}))}(t)},function(t){t.registerSeriesModel(zM),t.registerChartView(KM),t.registerVisual(pT),t.registerLayout(AT),function(t){for(var e=0;e<RM.length;e++)t.registerAction({type:RM[e],update:"updateView"},_t);t.registerAction({type:"treemapRootToNode",update:"updateView"},(function(t,e){e.eachComponent({mainType:"series",subType:"treemap",query:t},(function(e,n){var i=TM(t,["treemapZoomToNode","treemapRootToNode"],e);if(i){var r=e.getViewRoot();r&&(t.direction=EM(r,i.node)?"rollUp":"drillDown"),e.resetViewRoot(i.node)}}))}))}(t)},function(t){t.registerChartView(MI),t.registerSeriesModel(PI),t.registerProcessor(DT),t.registerVisual(LT),t.registerVisual(NT),t.registerLayout(XT),t.registerLayout(t.PRIORITY.VISUAL.POST_CHART_LAYOUT,JT),t.registerLayout(eI),t.registerCoordinateSystem("graphView",{dimensions:zA.dimensions,create:nI}),t.registerAction({type:"focusNodeAdjacency",event:"focusNodeAdjacency",update:"series:focusNodeAdjacency"},_t),t.registerAction({type:"unfocusNodeAdjacency",event:"unfocusNodeAdjacency",update:"series:unfocusNodeAdjacency"},_t),t.registerAction(NI,(function(t,e,n){e.eachComponent({mainType:"series",query:t},(function(e){var i=$A(e.coordinateSystem,t,void 0,n);e.setCenter&&e.setCenter(i.center),e.setZoom&&e.setZoom(i.zoom)}))}))},function(t){t.registerChartView(FI),t.registerSeriesModel(VI)},function(t){t.registerChartView(jI),t.registerSeriesModel(YI),t.registerLayout(XI),t.registerProcessor(eC("funnel"))},function(t){xy(vO),t.registerChartView(GI),t.registerSeriesModel(KI),t.registerVisual(t.PRIORITY.VISUAL.BRUSH,tE)},function(t){t.registerChartView(xO),t.registerSeriesModel(wO),t.registerLayout(SO),t.registerVisual(NO),t.registerAction({type:"dragNode",event:"dragnode",update:"update"},(function(t,e){e.eachComponent({mainType:"series",subType:"sankey",query:t},(function(e){e.setNodePosition(t.dataIndex,[t.localX,t.localY])}))}))},function(t){t.registerSeriesModel(BO),t.registerChartView(zO),t.registerLayout(XO),t.registerTransform(GO)},function(t){t.registerChartView(UO),t.registerSeriesModel(oD),t.registerPreprocessor(aD),t.registerVisual(dD),t.registerLayout(pD)},function(t){t.registerChartView(vD),t.registerSeriesModel(yD),t.registerLayout(_S("effectScatter"))},function(t){t.registerChartView(AD),t.registerSeriesModel(ED),t.registerLayout(kD),t.registerVisual(DD)},function(t){t.registerChartView(ND),t.registerSeriesModel(RD)},function(t){t.registerChartView(VD),t.registerSeriesModel(rL),t.registerLayout(t.PRIORITY.VISUAL.LAYOUT,j(Ab,"pictorialBar")),t.registerLayout(t.PRIORITY.VISUAL.PROGRESSIVE_LAYOUT,Mb("pictorialBar"))},function(t){t.registerChartView(oL),t.registerSeriesModel(aL),t.registerLayout(sL),t.registerProcessor(eC("themeRiver"))},function(t){t.registerChartView(dL),t.registerSeriesModel(pL),t.registerLayout(j(mL,"sunburst")),t.registerProcessor(j(eC,"sunburst")),t.registerVisual(yL),function(t){t.registerAction({type:uL,update:"updateView"},(function(t,e){e.eachComponent({mainType:"series",subType:"sunburst",query:t},(function(e,n){var i=TM(t,[uL],e);if(i){var r=e.getViewRoot();r&&(t.direction=EM(r,i.node)?"rollUp":"drillDown"),e.resetViewRoot(i.node)}}))})),t.registerAction({type:hL,update:"none"},(function(t,e,n){t=I({},t),e.eachComponent({mainType:"series",subType:"sunburst",query:t},(function(e){var n=TM(t,[hL],e);n&&(t.dataIndex=n.node.dataIndex)})),n.dispatchAction(I(t,{type:"highlight"}))})),t.registerAction({type:"sunburstUnhighlight",update:"updateView"},(function(t,e,n){t=I({},t),n.dispatchAction(I(t,{type:"downplay"}))}))}(t)},function(t){t.registerChartView(cP),t.registerSeriesModel(wL)}]),xy((function(t){xy(hk),xy(uN)})),xy((function(t){xy(uN),JC.registerAxisPointerClass("PolarAxisPointer",hN),t.registerCoordinateSystem("polar",kN),t.registerComponentModel(pN),t.registerComponentView(HN),CC(t,"angle",gN,FN),CC(t,"radius",mN,VN),t.registerComponentView(EN),t.registerComponentView(PN),t.registerLayout(j(zN,"bar"))})),xy(QA),xy((function(t){xy(uN),JC.registerAxisPointerClass("SingleAxisPointer",eR),t.registerComponentView(oR),t.registerComponentView(XN),t.registerComponentModel(qN),CC(t,"single",qN,qN.defaultOption),t.registerCoordinateSystem("single",QN)})),xy(vO),xy((function(t){t.registerComponentModel(aR),t.registerComponentView(lR),t.registerCoordinateSystem("calendar",uR)})),xy((function(t){t.registerComponentModel(mR),t.registerComponentView(bR),t.registerPreprocessor((function(t){var e=t.graphic;Y(e)?e[0]&&e[0].elements?t.graphic=[t.graphic[0]]:t.graphic=[{elements:e}]:e&&!e.elements&&(t.graphic=[{elements:[e]}])}))})),xy((function(t){t.registerComponentModel(XR),t.registerComponentView(qR),jR("saveAsImage",UR),jR("magicType",KR),jR("dataView",iB),jR("dataZoom",CB),jR("restore",lB),xy(VR)})),xy((function(t){xy(uN),t.registerComponentModel(MB),t.registerComponentView(YB),t.registerAction({type:"showTip",event:"showTip",update:"tooltip:manuallyShowTip"},_t),t.registerAction({type:"hideTip",event:"hideTip",update:"tooltip:manuallyHideTip"},_t)})),xy(uN),xy((function(t){t.registerComponentView(dz),t.registerComponentModel(pz),t.registerPreprocessor($B),t.registerVisual(t.PRIORITY.VISUAL.BRUSH,sz),t.registerAction({type:"brush",event:"brush",update:"updateVisual"},(function(t,e){e.eachComponent({mainType:"brush",query:t},(function(e){e.setAreas(t.areas)}))})),t.registerAction({type:"brushSelect",event:"brushSelected",update:"none"},_t),t.registerAction({type:"brushEnd",event:"brushEnd",update:"none"},_t),jR("brush",mz)})),xy((function(t){t.registerComponentModel(vz),t.registerComponentView(yz)})),xy((function(t){t.registerComponentModel(xz),t.registerComponentView(kz),t.registerSubTypeDefaulter("timeline",(function(){return"slider"})),function(t){t.registerAction({type:"timelineChange",event:"timelineChanged",update:"prepareAndUpdate"},(function(t,e,n){var i=e.getComponent("timeline");return i&&null!=t.currentIndex&&(i.setCurrentIndex(t.currentIndex),!i.get("loop",!0)&&i.isIndexMax()&&i.getPlayState()&&(i.setPlayState(!1),n.dispatchAction({type:"timelinePlayChange",playState:!1,from:t.from}))),e.resetOption("timeline",{replaceMerge:i.get("replaceMerge",!0)}),E({currentIndex:i.option.currentIndex},t)})),t.registerAction({type:"timelinePlayChange",event:"timelinePlayChanged",update:"update"},(function(t,e){var n=e.getComponent("timeline");n&&null!=t.playState&&n.setPlayState(t.playState)}))}(t),t.registerPreprocessor(Tz)})),xy((function(t){t.registerComponentModel(Nz),t.registerComponentView(qz),t.registerPreprocessor((function(t){Oz(t.series,"markPoint")&&(t.markPoint=t.markPoint||{})}))})),xy((function(t){t.registerComponentModel(Uz),t.registerComponentView(eF),t.registerPreprocessor((function(t){Oz(t.series,"markLine")&&(t.markLine=t.markLine||{})}))})),xy((function(t){t.registerComponentModel(nF),t.registerComponentView(uF),t.registerPreprocessor((function(t){Oz(t.series,"markArea")&&(t.markArea=t.markArea||{})}))})),xy((function(t){xy(wF),xy(IF)})),xy((function(t){xy(VF),xy($F)})),xy(VF),xy($F),xy((function(t){xy(IV),xy(PV)})),xy(IV),xy(PV),xy((function(t){t.registerPreprocessor(FV),t.registerVisual(t.PRIORITY.VISUAL.ARIA,zV)})),xy((function(t){t.registerTransform(KV),t.registerTransform(QV)})),xy((function(t){t.registerComponentModel(JV),t.registerComponentView(tH)})),xy((function(t){t.registerUpdateLifecycle("series:beforeupdate",(function(t,e,n){R(vo(n.seriesTransition),(function(t){R(vo(t.to),(function(t){for(var e=n.updatedSeries,i=0;i<e.length;i++)(null!=t.seriesIndex&&t.seriesIndex===e[i].seriesIndex||null!=t.seriesId&&t.seriesId===e[i].id)&&(e[i][ng]=!0)}))}))})),t.registerUpdateLifecycle("series:transition",(function(t,e,n){var i=PH(e);if(i.oldSeries&&n.updatedSeries&&n.optionChanged){var r=n.seriesTransition;if(r)R(vo(r),(function(t){!function(t,e,n,i){var r=[],o=[];R(vo(t.from),(function(t){var n=YH(e.oldSeries,t);n>=0&&r.push({dataGroupId:e.oldDataGroupIds[n],data:e.oldData[n],divide:jH(e.oldData[n]),groupIdDim:t.dimension})})),R(vo(t.to),(function(t){var i=YH(n.updatedSeries,t);if(i>=0){var r=n.updatedSeries[i].getData();o.push({dataGroupId:e.oldDataGroupIds[i],data:r,divide:jH(r),groupIdDim:t.dimension})}})),r.length>0&&o.length>0&&VH(r,o,i)}(t,i,n,e)}));else{var o=function(t,e){var n=mt(),i=mt(),r=mt();return R(t.oldSeries,(function(e,n){var o=t.oldDataGroupIds[n],a=t.oldData[n],s=HH(e),l=WH(s);i.set(l,{dataGroupId:o,data:a}),Y(s)&&R(s,(function(t){r.set(t,{key:l,dataGroupId:o,data:a})}))})),R(e.updatedSeries,(function(t){if(t.isUniversalTransitionEnabled()&&t.isAnimationEnabled()){var e=t.get("dataGroupId"),o=t.getData(),a=HH(t),s=WH(a),l=i.get(s);if(l)n.set(s,{oldSeries:[{dataGroupId:l.dataGroupId,divide:jH(l.data),data:l.data}],newSeries:[{dataGroupId:e,divide:jH(o),data:o}]});else if(Y(a)){var c=[];R(a,(function(t){var e=i.get(t);e.data&&c.push({dataGroupId:e.dataGroupId,divide:jH(e.data),data:e.data})})),c.length&&n.set(s,{oldSeries:c,newSeries:[{dataGroupId:e,data:o,divide:jH(o)}]})}else{var u=r.get(a);if(u){var h=n.get(u.key);h||(h={oldSeries:[{dataGroupId:u.dataGroupId,data:u.data,divide:jH(u.data)}],newSeries:[]},n.set(u.key,h)),h.newSeries.push({dataGroupId:e,data:o,divide:jH(o)})}}}})),n}(i,n);R(o.keys(),(function(t){var n=o.get(t);VH(n.oldSeries,n.newSeries,e)}))}R(n.updatedSeries,(function(t){t[ng]&&(t[ng]=!1)}))}for(var a=t.getSeries(),s=i.oldSeries=[],l=i.oldDataGroupIds=[],c=i.oldData=[],u=0;u<a.length;u++){var h=a[u].getData();h.count()<1e4&&(s.push(a[u]),l.push(a[u].get("dataGroupId")),c.push(h))}}))})),xy((function(t){t.registerUpdateLifecycle("series:beforeupdate",(function(t,e,n){var i=S_(e).labelManager;i||(i=S_(e).labelManager=new w_),i.clearLabels()})),t.registerUpdateLifecycle("series:layoutlabels",(function(t,e,n){var i=S_(e).labelManager;n.updatedSeries.forEach((function(t){i.addLabelsOfSeries(e.getViewOfSeriesModel(t))})),i.updateLayoutConfig(e),i.layout(e),i.processLabelsOverall()}))})),t.Axis=zx,t.ChartView=gg,t.ComponentModel=Sd,t.ComponentView=hg,t.List=qy,t.Model=gh,t.PRIORITY=cv,t.SeriesModel=ig,t.color=oi,t.connect=function(t){if(Y(t)){var e=t;t=null,R(e,(function(e){null!=e.group&&(t=e.group)})),t=t||"g_"+Qv++,R(e,(function(e){e.group=t}))}return Zv[t]=!0,t},t.dataTool={},t.dependencies={zrender:"5.5.0"},t.disConnect=ey,t.disconnect=ty,t.dispose=function(t){G(t)?t=$v[t]:t instanceof zv||(t=ny(t)),t instanceof zv&&!t.isDisposed()&&t.dispose()},t.env=r,t.extendChartView=function(t){var e=gg.extend(t);return gg.registerClass(e),e},t.extendComponentModel=function(t){var e=Sd.extend(t);return Sd.registerClass(e),e},t.extendComponentView=function(t){var e=hg.extend(t);return hg.registerClass(e),e},t.extendSeriesModel=function(t){var e=ig.extend(t);return ig.registerClass(e),e},t.format=Tx,t.getCoordinateSystemDimensions=function(t){var e=op.get(t);if(e)return e.getDimensionsInfo?e.getDimensionsInfo():e.dimensions.slice()},t.getInstanceByDom=ny,t.getInstanceById=function(t){return $v[t]},t.getMap=function(t){var e=av("getMap");return e&&e(t)},t.graphic=Mx,t.helper=ux,t.init=function(t,e,n){var i=!(n&&n.ssr);if(i){var r=ny(t);if(r)return r}var o=new zv(t,e,n);return o.id="ec_"+Kv++,$v[o.id]=o,i&&Ro(t,Jv,o.id),Lv(o),rv.trigger("afterinit",o),o},t.innerDrawElementOnCanvas=$m,t.matrix=Ae,t.number=kx,t.parseGeoJSON=Cx,t.parseGeoJson=Cx,t.registerAction=cy,t.registerCoordinateSystem=uy,t.registerLayout=hy,t.registerLoading=gy,t.registerLocale=kh,t.registerMap=my,t.registerPostInit=ay,t.registerPostUpdate=sy,t.registerPreprocessor=ry,t.registerProcessor=oy,t.registerTheme=iy,t.registerTransform=vy,t.registerUpdateLifecycle=ly,t.registerVisual=dy,t.setCanvasCreator=function(t){h({createCanvas:t})},t.setPlatformAPI=h,t.throttle=Cg,t.time=Ax,t.use=xy,t.util=Ix,t.vector=Xt,t.version="5.5.0",t.zrUtil=St,t.zrender=Hr,Object.defineProperty(t,"__esModule",{value:!0})})),function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define([],e):"object"==typeof exports?exports.Quill=e():t.Quill=e()}("undefined"!=typeof self?self:this,(function(){return function(t){function e(i){if(n[i])return n[i].exports;var r=n[i]={i:i,l:!1,exports:{}};return t[i].call(r.exports,r,r.exports,e),r.l=!0,r.exports}var n={};return e.m=t,e.c=n,e.d=function(t,n,i){e.o(t,n)||Object.defineProperty(t,n,{configurable:!1,enumerable:!0,get:i})},e.n=function(t){var n=t&&t.__esModule?function(){return t.default}:function(){return t};return e.d(n,"a",n),n},e.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},e.p="",e(e.s=45)}([function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(17),r=n(18),o=n(19),a=n(48),s=n(49),l=n(50),c=n(51),u=n(52),h=n(11),d=n(29),p=n(30),f=n(28),g=n(1),m={Scope:g.Scope,create:g.create,find:g.find,query:g.query,register:g.register,Container:i.default,Format:r.default,Leaf:o.default,Embed:c.default,Scroll:a.default,Block:l.default,Inline:s.default,Text:u.default,Attributor:{Attribute:h.default,Class:d.default,Style:p.default,Store:f.default}};e.default=m},function(t,e,n){"use strict";function i(t,e){var n;if(void 0===e&&(e=a.ANY),"string"==typeof t)n=u[t]||s[t];else if(t instanceof Text||t.nodeType===Node.TEXT_NODE)n=u.text;else if("number"==typeof t)t&a.LEVEL&a.BLOCK?n=u.block:t&a.LEVEL&a.INLINE&&(n=u.inline);else if(t instanceof HTMLElement){var i=(t.getAttribute("class")||"").split(/\s+/);for(var r in i)if(n=l[i[r]])break;n=n||c[t.tagName]}return null==n?null:e&a.LEVEL&n.scope&&e&a.TYPE&n.scope?n:null}var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(e){var n=this;return e="[Parchment] "+e,(n=t.call(this,e)||this).message=e,n.name=n.constructor.name,n}return r(e,t),e}(Error);e.ParchmentError=o;var a,s={},l={},c={},u={};e.DATA_KEY="__blot",function(t){t[t.TYPE=3]="TYPE",t[t.LEVEL=12]="LEVEL",t[t.ATTRIBUTE=13]="ATTRIBUTE",t[t.BLOT=14]="BLOT",t[t.INLINE=7]="INLINE",t[t.BLOCK=11]="BLOCK",t[t.BLOCK_BLOT=10]="BLOCK_BLOT",t[t.INLINE_BLOT=6]="INLINE_BLOT",t[t.BLOCK_ATTRIBUTE=9]="BLOCK_ATTRIBUTE",t[t.INLINE_ATTRIBUTE=5]="INLINE_ATTRIBUTE",t[t.ANY=15]="ANY"}(a=e.Scope||(e.Scope={})),e.create=function(t,e){var n=i(t);if(null==n)throw new o("Unable to create "+t+" blot");var r=n;return new r(t instanceof Node||t.nodeType===Node.TEXT_NODE?t:r.create(e),e)},e.find=function t(n,i){return void 0===i&&(i=!1),null==n?null:null!=n[e.DATA_KEY]?n[e.DATA_KEY].blot:i?t(n.parentNode,i):null},e.query=i,e.register=function t(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];if(e.length>1)return e.map((function(e){return t(e)}));var i=e[0];if("string"!=typeof i.blotName&&"string"!=typeof i.attrName)throw new o("Invalid definition");if("abstract"===i.blotName)throw new o("Cannot register abstract class");if(u[i.blotName||i.attrName]=i,"string"==typeof i.keyName)s[i.keyName]=i;else if(null!=i.className&&(l[i.className]=i),null!=i.tagName){Array.isArray(i.tagName)?i.tagName=i.tagName.map((function(t){return t.toUpperCase()})):i.tagName=i.tagName.toUpperCase();var r=Array.isArray(i.tagName)?i.tagName:[i.tagName];r.forEach((function(t){null!=c[t]&&null!=i.className||(c[t]=i)}))}return i}},function(t,e){"use strict";var n=Object.prototype.hasOwnProperty,i=Object.prototype.toString,r=Object.defineProperty,o=Object.getOwnPropertyDescriptor,a=function(t){return"function"==typeof Array.isArray?Array.isArray(t):"[object Array]"===i.call(t)},s=function(t){if(!t||"[object Object]"!==i.call(t))return!1;var e,r=n.call(t,"constructor"),o=t.constructor&&t.constructor.prototype&&n.call(t.constructor.prototype,"isPrototypeOf");if(t.constructor&&!r&&!o)return!1;for(e in t);return void 0===e||n.call(t,e)},l=function(t,e){r&&"__proto__"===e.name?r(t,e.name,{enumerable:!0,configurable:!0,value:e.newValue,writable:!0}):t[e.name]=e.newValue},c=function(t,e){if("__proto__"===e){if(!n.call(t,e))return;if(o)return o(t,e).value}return t[e]};t.exports=function t(){var e,n,i,r,o,u,h=arguments[0],d=1,p=arguments.length,f=!1;for("boolean"==typeof h&&(f=h,h=arguments[1]||{},d=2),(null==h||"object"!=typeof h&&"function"!=typeof h)&&(h={});d<p;++d)if(null!=(e=arguments[d]))for(n in e)i=c(h,n),h!==(r=c(e,n))&&(f&&r&&(s(r)||(o=a(r)))?(o?(o=!1,u=i&&a(i)?i:[]):u=i&&s(i)?i:{},l(h,{name:n,newValue:t(f,u,r)})):void 0!==r&&l(h,{name:n,newValue:r}));return h}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return null==t?e:("function"==typeof t.formats&&(e=(0,u.default)(e,t.formats())),null==t.parent||"scroll"==t.parent.blotName||t.parent.statics.scope!==t.statics.scope?e:s(t.parent,e))}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.BlockEmbed=e.bubbleFormats=void 0;var l=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),c=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},u=i(n(2)),h=i(n(4)),d=i(n(0)),p=i(n(14)),f=i(n(5)),g=i(n(8)),m=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),l(e,[{key:"attach",value:function(){c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"attach",this).call(this),this.attributes=new d.default.Attributor.Store(this.domNode)}},{key:"delta",value:function(){return(new h.default).insert(this.value(),(0,u.default)(this.formats(),this.attributes.values()))}},{key:"format",value:function(t,e){var n=d.default.query(t,d.default.Scope.BLOCK_ATTRIBUTE);null!=n&&this.attributes.attribute(n,e)}},{key:"formatAt",value:function(t,e,n,i){this.format(n,i)}},{key:"insertAt",value:function(t,n,i){if("string"==typeof n&&n.endsWith("\n")){var r=d.default.create(v.blotName);this.parent.insertBefore(r,0===t?this:this.next),r.insertAt(0,n.slice(0,-1))}else c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"insertAt",this).call(this,t,n,i)}}]),e}(d.default.Embed);m.scope=d.default.Scope.BLOCK_BLOT;var v=function(t){function e(t){r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.cache={},n}return a(e,t),l(e,[{key:"delta",value:function(){return null==this.cache.delta&&(this.cache.delta=this.descendants(d.default.Leaf).reduce((function(t,e){return 0===e.length()?t:t.insert(e.value(),s(e))}),new h.default).insert("\n",s(this))),this.cache.delta}},{key:"deleteAt",value:function(t,n){c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"deleteAt",this).call(this,t,n),this.cache={}}},{key:"formatAt",value:function(t,n,i,r){n<=0||(d.default.query(i,d.default.Scope.BLOCK)?t+n===this.length()&&this.format(i,r):c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"formatAt",this).call(this,t,Math.min(n,this.length()-t-1),i,r),this.cache={})}},{key:"insertAt",value:function(t,n,i){if(null!=i)return c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"insertAt",this).call(this,t,n,i);if(0!==n.length){var r=n.split("\n"),o=r.shift();o.length>0&&(t<this.length()-1||null==this.children.tail?c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"insertAt",this).call(this,Math.min(t,this.length()-1),o):this.children.tail.insertAt(this.children.tail.length(),o),this.cache={});var a=this;r.reduce((function(t,e){return(a=a.split(t,!0)).insertAt(0,e),e.length}),t+o.length)}}},{key:"insertBefore",value:function(t,n){var i=this.children.head;c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"insertBefore",this).call(this,t,n),i instanceof p.default&&i.remove(),this.cache={}}},{key:"length",value:function(){return null==this.cache.length&&(this.cache.length=c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"length",this).call(this)+1),this.cache.length}},{key:"moveChildren",value:function(t,n){c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"moveChildren",this).call(this,t,n),this.cache={}}},{key:"optimize",value:function(t){c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"optimize",this).call(this,t),this.cache={}}},{key:"path",value:function(t){return c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"path",this).call(this,t,!0)}},{key:"removeChild",value:function(t){c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"removeChild",this).call(this,t),this.cache={}}},{key:"split",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(n&&(0===t||t>=this.length()-1)){var i=this.clone();return 0===t?(this.parent.insertBefore(i,this),this):(this.parent.insertBefore(i,this.next),i)}var r=c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"split",this).call(this,t,n);return this.cache={},r}}]),e}(d.default.Block);v.blotName="block",v.tagName="P",v.defaultChild="break",v.allowedChildren=[f.default,d.default.Embed,g.default],e.bubbleFormats=s,e.BlockEmbed=m,e.default=v},function(t,e,n){var i=n(54),r=n(12),o=n(2),a=n(20),s=String.fromCharCode(0),l=function(t){Array.isArray(t)?this.ops=t:null!=t&&Array.isArray(t.ops)?this.ops=t.ops:this.ops=[]};l.prototype.insert=function(t,e){var n={};return 0===t.length?this:(n.insert=t,null!=e&&"object"==typeof e&&Object.keys(e).length>0&&(n.attributes=e),this.push(n))},l.prototype.delete=function(t){return t<=0?this:this.push({delete:t})},l.prototype.retain=function(t,e){if(t<=0)return this;var n={retain:t};return null!=e&&"object"==typeof e&&Object.keys(e).length>0&&(n.attributes=e),this.push(n)},l.prototype.push=function(t){var e=this.ops.length,n=this.ops[e-1];if(t=o(!0,{},t),"object"==typeof n){if("number"==typeof t.delete&&"number"==typeof n.delete)return this.ops[e-1]={delete:n.delete+t.delete},this;if("number"==typeof n.delete&&null!=t.insert&&(e-=1,"object"!=typeof(n=this.ops[e-1])))return this.ops.unshift(t),this;if(r(t.attributes,n.attributes)){if("string"==typeof t.insert&&"string"==typeof n.insert)return this.ops[e-1]={insert:n.insert+t.insert},"object"==typeof t.attributes&&(this.ops[e-1].attributes=t.attributes),this;if("number"==typeof t.retain&&"number"==typeof n.retain)return this.ops[e-1]={retain:n.retain+t.retain},"object"==typeof t.attributes&&(this.ops[e-1].attributes=t.attributes),this}}return e===this.ops.length?this.ops.push(t):this.ops.splice(e,0,t),this},l.prototype.chop=function(){var t=this.ops[this.ops.length-1];return t&&t.retain&&!t.attributes&&this.ops.pop(),this},l.prototype.filter=function(t){return this.ops.filter(t)},l.prototype.forEach=function(t){this.ops.forEach(t)},l.prototype.map=function(t){return this.ops.map(t)},l.prototype.partition=function(t){var e=[],n=[];return this.forEach((function(i){(t(i)?e:n).push(i)})),[e,n]},l.prototype.reduce=function(t,e){return this.ops.reduce(t,e)},l.prototype.changeLength=function(){return this.reduce((function(t,e){return e.insert?t+a.length(e):e.delete?t-e.delete:t}),0)},l.prototype.length=function(){return this.reduce((function(t,e){return t+a.length(e)}),0)},l.prototype.slice=function(t,e){t=t||0,"number"!=typeof e&&(e=1/0);for(var n=[],i=a.iterator(this.ops),r=0;r<e&&i.hasNext();){var o;r<t?o=i.next(t-r):(o=i.next(e-r),n.push(o)),r+=a.length(o)}return new l(n)},l.prototype.compose=function(t){var e=a.iterator(this.ops),n=a.iterator(t.ops),i=[],o=n.peek();if(null!=o&&"number"==typeof o.retain&&null==o.attributes){for(var s=o.retain;"insert"===e.peekType()&&e.peekLength()<=s;)s-=e.peekLength(),i.push(e.next());o.retain-s>0&&n.next(o.retain-s)}for(var c=new l(i);e.hasNext()||n.hasNext();)if("insert"===n.peekType())c.push(n.next());else if("delete"===e.peekType())c.push(e.next());else{var u=Math.min(e.peekLength(),n.peekLength()),h=e.next(u),d=n.next(u);if("number"==typeof d.retain){var p={};"number"==typeof h.retain?p.retain=u:p.insert=h.insert;var f=a.attributes.compose(h.attributes,d.attributes,"number"==typeof h.retain);if(f&&(p.attributes=f),c.push(p),!n.hasNext()&&r(c.ops[c.ops.length-1],p)){var g=new l(e.rest());return c.concat(g).chop()}}else"number"==typeof d.delete&&"number"==typeof h.retain&&c.push(d)}return c.chop()},l.prototype.concat=function(t){var e=new l(this.ops.slice());return t.ops.length>0&&(e.push(t.ops[0]),e.ops=e.ops.concat(t.ops.slice(1))),e},l.prototype.diff=function(t,e){if(this.ops===t.ops)return new l;var n=[this,t].map((function(e){return e.map((function(n){if(null!=n.insert)return"string"==typeof n.insert?n.insert:s;throw new Error("diff() called "+(e===t?"on":"with")+" non-document")})).join("")})),o=new l,c=i(n[0],n[1],e),u=a.iterator(this.ops),h=a.iterator(t.ops);return c.forEach((function(t){for(var e=t[1].length;e>0;){var n=0;switch(t[0]){case i.INSERT:n=Math.min(h.peekLength(),e),o.push(h.next(n));break;case i.DELETE:n=Math.min(e,u.peekLength()),u.next(n),o.delete(n);break;case i.EQUAL:n=Math.min(u.peekLength(),h.peekLength(),e);var s=u.next(n),l=h.next(n);r(s.insert,l.insert)?o.retain(n,a.attributes.diff(s.attributes,l.attributes)):o.push(l).delete(n)}e-=n}})),o.chop()},l.prototype.eachLine=function(t,e){e=e||"\n";for(var n=a.iterator(this.ops),i=new l,r=0;n.hasNext();){if("insert"!==n.peekType())return;var o=n.peek(),s=a.length(o)-n.peekLength(),c="string"==typeof o.insert?o.insert.indexOf(e,s)-s:-1;if(c<0)i.push(n.next());else if(c>0)i.push(n.next(c));else{if(!1===t(i,n.next(1).attributes||{},r))return;r+=1,i=new l}}i.length()>0&&t(i,{},r)},l.prototype.transform=function(t,e){if(e=!!e,"number"==typeof t)return this.transformPosition(t,e);for(var n=a.iterator(this.ops),i=a.iterator(t.ops),r=new l;n.hasNext()||i.hasNext();)if("insert"!==n.peekType()||!e&&"insert"===i.peekType())if("insert"===i.peekType())r.push(i.next());else{var o=Math.min(n.peekLength(),i.peekLength()),s=n.next(o),c=i.next(o);if(s.delete)continue;c.delete?r.push(c):r.retain(o,a.attributes.transform(s.attributes,c.attributes,e))}else r.retain(a.length(n.next()));return r.chop()},l.prototype.transformPosition=function(t,e){e=!!e;for(var n=a.iterator(this.ops),i=0;n.hasNext()&&i<=t;){var r=n.peekLength(),o=n.peekType();n.next(),"delete"!==o?("insert"===o&&(i<t||!e)&&(t+=r),i+=r):t-=Math.min(r,t-i)}return t},t.exports=l},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}Object.defineProperty(e,"__esModule",{value:!0});var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},l=i(n(8)),c=i(n(0)),u=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),a(e,[{key:"formatAt",value:function(t,n,i,r){if(e.compare(this.statics.blotName,i)<0&&c.default.query(i,c.default.Scope.BLOT)){var o=this.isolate(t,n);r&&o.wrap(i,r)}else s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"formatAt",this).call(this,t,n,i,r)}},{key:"optimize",value:function(t){if(s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"optimize",this).call(this,t),this.parent instanceof e&&e.compare(this.statics.blotName,this.parent.statics.blotName)>0){var n=this.parent.isolate(this.offset(),this.length());this.moveChildren(n),n.wrap(this)}}}],[{key:"compare",value:function(t,n){var i=e.order.indexOf(t),r=e.order.indexOf(n);return i>=0||r>=0?i-r:t===n?0:t<n?-1:1}}]),e}(c.default.Inline);u.allowedChildren=[u,c.default.Embed,l.default],u.order=["cursor","inline","underline","strike","italic","bold","script","link","code"],e.default=u},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){if((e=(0,x.default)(!0,{container:t,modules:{clipboard:!0,keyboard:!0,history:!0}},e)).theme&&e.theme!==C.DEFAULTS.theme){if(e.theme=C.import("themes/"+e.theme),null==e.theme)throw new Error("Invalid theme "+e.theme+". Did you register it?")}else e.theme=w.default;var n=(0,x.default)(!0,{},e.theme.DEFAULTS);[n,e].forEach((function(t){t.modules=t.modules||{},Object.keys(t.modules).forEach((function(e){!0===t.modules[e]&&(t.modules[e]={})}))}));var i=Object.keys(n.modules).concat(Object.keys(e.modules)).reduce((function(t,e){var n=C.import("modules/"+e);return null==n?S.error("Cannot load "+e+" module. Are you sure you registered it?"):t[e]=n.DEFAULTS||{},t}),{});return null!=e.modules&&e.modules.toolbar&&e.modules.toolbar.constructor!==Object&&(e.modules.toolbar={container:e.modules.toolbar}),e=(0,x.default)(!0,{},C.DEFAULTS,{modules:i},n,e),["bounds","container","scrollingContainer"].forEach((function(t){"string"==typeof e[t]&&(e[t]=document.querySelector(e[t]))})),e.modules=Object.keys(e.modules).reduce((function(t,n){return e.modules[n]&&(t[n]=e.modules[n]),t}),{}),e}function s(t,e,n,i){if(this.options.strict&&!this.isEnabled()&&e===g.default.sources.USER)return new p.default;var r=null==n?null:this.getSelection(),o=this.editor.delta,a=t();if(null!=r&&(!0===n&&(n=r.index),null==i?r=c(r,a,e):0!==i&&(r=c(r,n,i,e)),this.setSelection(r,g.default.sources.SILENT)),a.length()>0){var s,l,u=[g.default.events.TEXT_CHANGE,a,o,e];if((s=this.emitter).emit.apply(s,[g.default.events.EDITOR_CHANGE].concat(u)),e!==g.default.sources.SILENT)(l=this.emitter).emit.apply(l,u)}return a}function l(t,e,n,i,r){var o={};return"number"==typeof t.index&&"number"==typeof t.length?"number"!=typeof e?(r=i,i=n,n=e,e=t.length,t=t.index):(e=t.length,t=t.index):"number"!=typeof e&&(r=i,i=n,n=e,e=0),"object"===(void 0===n?"undefined":u(n))?(o=n,r=i):"string"==typeof n&&(null!=i?o[n]=i:r=n),[t,e,o,r=r||g.default.sources.API]}function c(t,e,n,i){if(null==t)return null;var r=void 0,o=void 0;if(e instanceof p.default){var a=[t.index,t.index+t.length].map((function(t){return e.transformPosition(t,i!==g.default.sources.USER)})),s=h(a,2);r=s[0],o=s[1]}else{var l=[t.index,t.index+t.length].map((function(t){return t<e||t===e&&i===g.default.sources.USER?t:n>=0?t+n:Math.max(e,t+n)})),c=h(l,2);r=c[0],o=c[1]}return new y.Range(r,o-r)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.overload=e.expandConfig=void 0;var u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},h=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},d=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}();n(53);var p=i(n(4)),f=i(n(57)),g=i(n(9)),m=i(n(7)),v=i(n(0)),y=n(22),b=i(y),x=i(n(2)),_=i(n(10)),w=i(n(32)),S=(0,_.default)("quill"),C=function(){function t(e){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(o(this,t),this.options=a(e,i),this.container=this.options.container,null==this.container)return S.error("Invalid Quill container",e);this.options.debug&&t.debug(this.options.debug);var r=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",this.container.__quill=this,this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.root.setAttribute("data-gramm",!1),this.scrollingContainer=this.options.scrollingContainer||this.root,this.emitter=new g.default,this.scroll=v.default.create(this.root,{emitter:this.emitter,whitelist:this.options.formats}),this.editor=new f.default(this.scroll),this.selection=new b.default(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.theme.init(),this.emitter.on(g.default.events.EDITOR_CHANGE,(function(t){t===g.default.events.TEXT_CHANGE&&n.root.classList.toggle("ql-blank",n.editor.isBlank())})),this.emitter.on(g.default.events.SCROLL_UPDATE,(function(t,e){var i=n.selection.lastRange,r=i&&0===i.length?i.index:void 0;s.call(n,(function(){return n.editor.update(null,e,r)}),t)}));var l=this.clipboard.convert("<div class='ql-editor' style=\"white-space: normal;\">"+r+"<p><br></p></div>");this.setContents(l),this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable()}return d(t,null,[{key:"debug",value:function(t){!0===t&&(t="log"),_.default.level(t)}},{key:"find",value:function(t){return t.__quill||v.default.find(t)}},{key:"import",value:function(t){return null==this.imports[t]&&S.error("Cannot import "+t+". Are you sure it was registered?"),this.imports[t]}},{key:"register",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("string"!=typeof t){var r=t.attrName||t.blotName;"string"==typeof r?this.register("formats/"+r,t,e):Object.keys(t).forEach((function(i){n.register(i,t[i],e)}))}else null==this.imports[t]||i||S.warn("Overwriting "+t+" with",e),this.imports[t]=e,(t.startsWith("blots/")||t.startsWith("formats/"))&&"abstract"!==e.blotName?v.default.register(e):t.startsWith("modules")&&"function"==typeof e.register&&e.register()}}]),d(t,[{key:"addContainer",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("string"==typeof t){var n=t;(t=document.createElement("div")).classList.add(n)}return this.container.insertBefore(t,e),t}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(t,e,n){var i=this,r=l(t,e,n),o=h(r,4);return t=o[0],e=o[1],n=o[3],s.call(this,(function(){return i.editor.deleteText(t,e)}),n,t,-1*e)}},{key:"disable",value:function(){this.enable(!1)}},{key:"enable",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.scroll.enable(t),this.container.classList.toggle("ql-disabled",!t)}},{key:"focus",value:function(){var t=this.scrollingContainer.scrollTop;this.selection.focus(),this.scrollingContainer.scrollTop=t,this.scrollIntoView()}},{key:"format",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g.default.sources.API;return s.call(this,(function(){var i=n.getSelection(!0),o=new p.default;if(null==i)return o;if(v.default.query(t,v.default.Scope.BLOCK))o=n.editor.formatLine(i.index,i.length,r({},t,e));else{if(0===i.length)return n.selection.format(t,e),o;o=n.editor.formatText(i.index,i.length,r({},t,e))}return n.setSelection(i,g.default.sources.SILENT),o}),i)}},{key:"formatLine",value:function(t,e,n,i,r){var o,a=this,c=l(t,e,n,i,r),u=h(c,4);return t=u[0],e=u[1],o=u[2],r=u[3],s.call(this,(function(){return a.editor.formatLine(t,e,o)}),r,t,0)}},{key:"formatText",value:function(t,e,n,i,r){var o,a=this,c=l(t,e,n,i,r),u=h(c,4);return t=u[0],e=u[1],o=u[2],r=u[3],s.call(this,(function(){return a.editor.formatText(t,e,o)}),r,t,0)}},{key:"getBounds",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=void 0;n="number"==typeof t?this.selection.getBounds(t,e):this.selection.getBounds(t.index,t.length);var i=this.container.getBoundingClientRect();return{bottom:n.bottom-i.top,height:n.height,left:n.left-i.left,right:n.right-i.left,top:n.top-i.top,width:n.width}}},{key:"getContents",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-t,n=l(t,e),i=h(n,2);return t=i[0],e=i[1],this.editor.getContents(t,e)}},{key:"getFormat",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getSelection(!0),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"number"==typeof t?this.editor.getFormat(t,e):this.editor.getFormat(t.index,t.length)}},{key:"getIndex",value:function(t){return t.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(t){return this.scroll.leaf(t)}},{key:"getLine",value:function(t){return this.scroll.line(t)}},{key:"getLines",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;return"number"!=typeof t?this.scroll.lines(t.index,t.length):this.scroll.lines(t,e)}},{key:"getModule",value:function(t){return this.theme.modules[t]}},{key:"getSelection",value:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getText",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-t,n=l(t,e),i=h(n,2);return t=i[0],e=i[1],this.editor.getText(t,e)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(e,n,i){var r=this,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.sources.API;return s.call(this,(function(){return r.editor.insertEmbed(e,n,i)}),o,e)}},{key:"insertText",value:function(t,e,n,i,r){var o,a=this,c=l(t,0,n,i,r),u=h(c,4);return t=u[0],o=u[2],r=u[3],s.call(this,(function(){return a.editor.insertText(t,e,o)}),r,t,e.length)}},{key:"isEnabled",value:function(){return!this.container.classList.contains("ql-disabled")}},{key:"off",value:function(){return this.emitter.off.apply(this.emitter,arguments)}},{key:"on",value:function(){return this.emitter.on.apply(this.emitter,arguments)}},{key:"once",value:function(){return this.emitter.once.apply(this.emitter,arguments)}},{key:"pasteHTML",value:function(t,e,n){this.clipboard.dangerouslyPasteHTML(t,e,n)}},{key:"removeFormat",value:function(t,e,n){var i=this,r=l(t,e,n),o=h(r,4);return t=o[0],e=o[1],n=o[3],s.call(this,(function(){return i.editor.removeFormat(t,e)}),n,t)}},{key:"scrollIntoView",value:function(){this.selection.scrollIntoView(this.scrollingContainer)}},{key:"setContents",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g.default.sources.API;return s.call(this,(function(){t=new p.default(t);var n=e.getLength(),i=e.editor.deleteText(0,n),r=e.editor.applyDelta(t),o=r.ops[r.ops.length-1];return null!=o&&"string"==typeof o.insert&&"\n"===o.insert[o.insert.length-1]&&(e.editor.deleteText(e.getLength()-1,1),r.delete(1)),i.compose(r)}),n)}},{key:"setSelection",value:function(e,n,i){if(null==e)this.selection.setRange(null,n||t.sources.API);else{var r=l(e,n,i),o=h(r,4);e=o[0],n=o[1],i=o[3],this.selection.setRange(new y.Range(e,n),i),i!==g.default.sources.SILENT&&this.selection.scrollIntoView(this.scrollingContainer)}}},{key:"setText",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g.default.sources.API,n=(new p.default).insert(t);return this.setContents(n,e)}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:g.default.sources.USER,e=this.scroll.update(t);return this.selection.update(t),e}},{key:"updateContents",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:g.default.sources.API;return s.call(this,(function(){return t=new p.default(t),e.editor.applyDelta(t,n)}),n,!0)}}]),t}();C.DEFAULTS={bounds:null,formats:null,modules:{},placeholder:"",readOnly:!1,scrollingContainer:null,strict:!0,theme:"default"},C.events=g.default.events,C.sources=g.default.sources,C.version="1.3.7",C.imports={delta:p.default,parchment:v.default,"core/module":m.default,"core/theme":w.default},e.expandConfig=a,e.overload=l,e.default=C},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}Object.defineProperty(e,"__esModule",{value:!0});var r=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};i(this,t),this.quill=e,this.options=n};r.DEFAULTS={},e.default=r},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){return t&&t.__esModule?t:{default:t}}(n(0)),a=function(t){function e(){return i(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(o.default.Text);e.default=a},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},a=i(n(58)),s=(0,i(n(10)).default)("quill:events");["selectionchange","mousedown","mouseup","click"].forEach((function(t){document.addEventListener(t,(function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];[].slice.call(document.querySelectorAll(".ql-container")).forEach((function(t){var n;t.__quill&&t.__quill.emitter&&(n=t.__quill.emitter).handleDOM.apply(n,e)}))}))}));var l=function(t){function e(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));return t.listeners={},t.on("error",s.error),t}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"emit",value:function(){s.log.apply(s,arguments),o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"emit",this).apply(this,arguments)}},{key:"handleDOM",value:function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];(this.listeners[t.type]||[]).forEach((function(e){var i=e.node,r=e.handler;(t.target===i||i.contains(t.target))&&r.apply(void 0,[t].concat(n))}))}},{key:"listenDOM",value:function(t,e,n){this.listeners[t]||(this.listeners[t]=[]),this.listeners[t].push({node:e,handler:n})}}]),e}(a.default);l.events={EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change"},l.sources={API:"api",SILENT:"silent",USER:"user"},e.default=l},function(t,e,n){"use strict";function i(t){if(o.indexOf(t)<=o.indexOf(a)){for(var e,n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];(e=console)[t].apply(e,i)}}function r(t){return o.reduce((function(e,n){return e[n]=i.bind(console,n,t),e}),{})}Object.defineProperty(e,"__esModule",{value:!0});var o=["error","warn","log","info"],a="warn";i.level=r.level=function(t){a=t},e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),r=function(){function t(t,e,n){void 0===n&&(n={}),this.attrName=t,this.keyName=e;var r=i.Scope.TYPE&i.Scope.ATTRIBUTE;null!=n.scope?this.scope=n.scope&i.Scope.LEVEL|r:this.scope=i.Scope.ATTRIBUTE,null!=n.whitelist&&(this.whitelist=n.whitelist)}return t.keys=function(t){return[].map.call(t.attributes,(function(t){return t.name}))},t.prototype.add=function(t,e){return!!this.canAdd(t,e)&&(t.setAttribute(this.keyName,e),!0)},t.prototype.canAdd=function(t,e){return null!=i.query(t,i.Scope.BLOT&(this.scope|i.Scope.TYPE))&&(null==this.whitelist||("string"==typeof e?this.whitelist.indexOf(e.replace(/["']/g,""))>-1:this.whitelist.indexOf(e)>-1))},t.prototype.remove=function(t){t.removeAttribute(this.keyName)},t.prototype.value=function(t){var e=t.getAttribute(this.keyName);return this.canAdd(t,e)&&e?e:""},t}();e.default=r},function(t,e,n){function i(t){return null==t}function r(t){return!(!t||"object"!=typeof t||"number"!=typeof t.length||"function"!=typeof t.copy||"function"!=typeof t.slice||t.length>0&&"number"!=typeof t[0])}var o=Array.prototype.slice,a=n(55),s=n(56),l=t.exports=function(t,e,n){return n||(n={}),t===e||(t instanceof Date&&e instanceof Date?t.getTime()===e.getTime():!t||!e||"object"!=typeof t&&"object"!=typeof e?n.strict?t===e:t==e:function(t,e,n){var c,u;if(i(t)||i(e))return!1;if(t.prototype!==e.prototype)return!1;if(s(t))return!!s(e)&&(t=o.call(t),e=o.call(e),l(t,e,n));if(r(t)){if(!r(e))return!1;if(t.length!==e.length)return!1;for(c=0;c<t.length;c++)if(t[c]!==e[c])return!1;return!0}try{var h=a(t),d=a(e)}catch(t){return!1}if(h.length!=d.length)return!1;for(h.sort(),d.sort(),c=h.length-1;c>=0;c--)if(h[c]!=d[c])return!1;for(c=h.length-1;c>=0;c--)if(u=h[c],!l(t[u],e[u],n))return!1;return typeof t==typeof e}(t,e,n))}},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.Code=void 0;var s=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},l=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),c=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},u=i(n(4)),h=i(n(0)),d=i(n(3)),p=i(n(5)),f=i(n(8)),g=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),e}(p.default);g.blotName="code",g.tagName="CODE";var m=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),l(e,[{key:"delta",value:function(){var t=this,e=this.domNode.textContent;return e.endsWith("\n")&&(e=e.slice(0,-1)),e.split("\n").reduce((function(e,n){return e.insert(n).insert("\n",t.formats())}),new u.default)}},{key:"format",value:function(t,n){if(t!==this.statics.blotName||!n){var i=this.descendant(f.default,this.length()-1),r=s(i,1)[0];null!=r&&r.deleteAt(r.length()-1,1),c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"format",this).call(this,t,n)}}},{key:"formatAt",value:function(t,n,i,r){if(0!==n&&null!=h.default.query(i,h.default.Scope.BLOCK)&&(i!==this.statics.blotName||r!==this.statics.formats(this.domNode))){var o=this.newlineIndex(t);if(!(o<0||o>=t+n)){var a=this.newlineIndex(t,!0)+1,s=o-a+1,l=this.isolate(a,s),c=l.next;l.format(i,r),c instanceof e&&c.formatAt(0,t-a+n-s,i,r)}}}},{key:"insertAt",value:function(t,e,n){if(null==n){var i=this.descendant(f.default,t),r=s(i,2),o=r[0],a=r[1];o.insertAt(a,e)}}},{key:"length",value:function(){var t=this.domNode.textContent.length;return this.domNode.textContent.endsWith("\n")?t:t+1}},{key:"newlineIndex",value:function(t){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1])return this.domNode.textContent.slice(0,t).lastIndexOf("\n");var e=this.domNode.textContent.slice(t).indexOf("\n");return e>-1?t+e:-1}},{key:"optimize",value:function(t){this.domNode.textContent.endsWith("\n")||this.appendChild(h.default.create("text","\n")),c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"optimize",this).call(this,t);var n=this.next;null!=n&&n.prev===this&&n.statics.blotName===this.statics.blotName&&this.statics.formats(this.domNode)===n.statics.formats(n.domNode)&&(n.optimize(t),n.moveChildren(this),n.remove())}},{key:"replace",value:function(t){c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"replace",this).call(this,t),[].slice.call(this.domNode.querySelectorAll("*")).forEach((function(t){var e=h.default.find(t);null==e?t.parentNode.removeChild(t):e instanceof h.default.Embed?e.remove():e.unwrap()}))}}],[{key:"create",value:function(t){var n=c(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this,t);return n.setAttribute("spellcheck",!1),n}},{key:"formats",value:function(){return!0}}]),e}(d.default);m.blotName="code-block",m.tagName="PRE",m.TAB="  ",e.Code=g,e.default=m},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},s=function(t){return t&&t.__esModule?t:{default:t}}(n(0)),l=function(t){function e(){return i(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),o(e,[{key:"insertInto",value:function(t,n){0===t.children.length?a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"insertInto",this).call(this,t,n):this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}]),e}(s.default.Embed);l.blotName="break",l.tagName="BR",e.default=l},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e){var n=document.createElement("a");n.href=t;var i=n.href.slice(0,n.href.indexOf(":"));return e.indexOf(i)>-1}Object.defineProperty(e,"__esModule",{value:!0}),e.sanitize=e.default=void 0;var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},l=function(t){return t&&t.__esModule?t:{default:t}}(n(5)),c=function(t){function e(){return i(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),a(e,[{key:"format",value:function(t,n){if(t!==this.statics.blotName||!n)return s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"format",this).call(this,t,n);n=this.constructor.sanitize(n),this.domNode.setAttribute("href",n)}}],[{key:"create",value:function(t){var n=s(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this,t);return t=this.sanitize(t),n.setAttribute("href",t),n.setAttribute("rel","noopener noreferrer"),n.setAttribute("target","_blank"),n}},{key:"formats",value:function(t){return t.getAttribute("href")}},{key:"sanitize",value:function(t){return o(t,this.PROTOCOL_WHITELIST)?t:this.SANITIZED_URL}}]),e}(l.default);c.blotName="link",c.tagName="A",c.SANITIZED_URL="about:blank",c.PROTOCOL_WHITELIST=["http","https","mailto","tel"],e.default=c,e.sanitize=o},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){t.setAttribute(e,!("true"===t.getAttribute(e)))}Object.defineProperty(e,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=i(n(25)),l=i(n(106)),c=0,u=function(){function t(e){var n=this;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.select=e,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",(function(){n.togglePicker()})),this.label.addEventListener("keydown",(function(t){switch(t.keyCode){case s.default.keys.ENTER:n.togglePicker();break;case s.default.keys.ESCAPE:n.escape(),t.preventDefault()}})),this.select.addEventListener("change",this.update.bind(this))}return a(t,[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),r(this.label,"aria-expanded"),r(this.options,"aria-hidden")}},{key:"buildItem",value:function(t){var e=this,n=document.createElement("span");return n.tabIndex="0",n.setAttribute("role","button"),n.classList.add("ql-picker-item"),t.hasAttribute("value")&&n.setAttribute("data-value",t.getAttribute("value")),t.textContent&&n.setAttribute("data-label",t.textContent),n.addEventListener("click",(function(){e.selectItem(n,!0)})),n.addEventListener("keydown",(function(t){switch(t.keyCode){case s.default.keys.ENTER:e.selectItem(n,!0),t.preventDefault();break;case s.default.keys.ESCAPE:e.escape(),t.preventDefault()}})),n}},{key:"buildLabel",value:function(){var t=document.createElement("span");return t.classList.add("ql-picker-label"),t.innerHTML=l.default,t.tabIndex="0",t.setAttribute("role","button"),t.setAttribute("aria-expanded","false"),this.container.appendChild(t),t}},{key:"buildOptions",value:function(){var t=this,e=document.createElement("span");e.classList.add("ql-picker-options"),e.setAttribute("aria-hidden","true"),e.tabIndex="-1",e.id="ql-picker-options-"+c,c+=1,this.label.setAttribute("aria-controls",e.id),this.options=e,[].slice.call(this.select.options).forEach((function(n){var i=t.buildItem(n);e.appendChild(i),!0===n.selected&&t.selectItem(i)})),this.container.appendChild(e)}},{key:"buildPicker",value:function(){var t=this;[].slice.call(this.select.attributes).forEach((function(e){t.container.setAttribute(e.name,e.value)})),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var t=this;this.close(),setTimeout((function(){return t.label.focus()}),1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.container.querySelector(".ql-selected");if(t!==n&&(null!=n&&n.classList.remove("ql-selected"),null!=t&&(t.classList.add("ql-selected"),this.select.selectedIndex=[].indexOf.call(t.parentNode.children,t),t.hasAttribute("data-value")?this.label.setAttribute("data-value",t.getAttribute("data-value")):this.label.removeAttribute("data-value"),t.hasAttribute("data-label")?this.label.setAttribute("data-label",t.getAttribute("data-label")):this.label.removeAttribute("data-label"),e))){if("function"==typeof Event)this.select.dispatchEvent(new Event("change"));else if("object"===("undefined"==typeof Event?"undefined":o(Event))){var i=document.createEvent("Event");i.initEvent("change",!0,!0),this.select.dispatchEvent(i)}this.close()}}},{key:"update",value:function(){var t=void 0;if(this.select.selectedIndex>-1){var e=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];t=this.select.options[this.select.selectedIndex],this.selectItem(e)}else this.selectItem(null);var n=null!=t&&t!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",n)}}]),t}();e.default=u},function(t,e,n){"use strict";function i(t){var e=s.find(t);if(null==e)try{e=s.create(t)}catch(n){e=s.create(s.Scope.INLINE),[].slice.call(t.childNodes).forEach((function(t){e.domNode.appendChild(t)})),t.parentNode&&t.parentNode.replaceChild(e.domNode,t),e.attach()}return e}var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=n(47),a=n(27),s=n(1),l=function(t){function e(e){var n=t.call(this,e)||this;return n.build(),n}return r(e,t),e.prototype.appendChild=function(t){this.insertBefore(t)},e.prototype.attach=function(){t.prototype.attach.call(this),this.children.forEach((function(t){t.attach()}))},e.prototype.build=function(){var t=this;this.children=new o.default,[].slice.call(this.domNode.childNodes).reverse().forEach((function(e){try{var n=i(e);t.insertBefore(n,t.children.head||void 0)}catch(t){if(t instanceof s.ParchmentError)return;throw t}}))},e.prototype.deleteAt=function(t,e){if(0===t&&e===this.length())return this.remove();this.children.forEachAt(t,e,(function(t,e,n){t.deleteAt(e,n)}))},e.prototype.descendant=function(t,n){var i=this.children.find(n),r=i[0],o=i[1];return null==t.blotName&&t(r)||null!=t.blotName&&r instanceof t?[r,o]:r instanceof e?r.descendant(t,o):[null,-1]},e.prototype.descendants=function(t,n,i){void 0===n&&(n=0),void 0===i&&(i=Number.MAX_VALUE);var r=[],o=i;return this.children.forEachAt(n,i,(function(n,i,a){(null==t.blotName&&t(n)||null!=t.blotName&&n instanceof t)&&r.push(n),n instanceof e&&(r=r.concat(n.descendants(t,i,o))),o-=a})),r},e.prototype.detach=function(){this.children.forEach((function(t){t.detach()})),t.prototype.detach.call(this)},e.prototype.formatAt=function(t,e,n,i){this.children.forEachAt(t,e,(function(t,e,r){t.formatAt(e,r,n,i)}))},e.prototype.insertAt=function(t,e,n){var i=this.children.find(t),r=i[0],o=i[1];if(r)r.insertAt(o,e,n);else{var a=null==n?s.create("text",e):s.create(e,n);this.appendChild(a)}},e.prototype.insertBefore=function(t,e){if(null!=this.statics.allowedChildren&&!this.statics.allowedChildren.some((function(e){return t instanceof e})))throw new s.ParchmentError("Cannot insert "+t.statics.blotName+" into "+this.statics.blotName);t.insertInto(this,e)},e.prototype.length=function(){return this.children.reduce((function(t,e){return t+e.length()}),0)},e.prototype.moveChildren=function(t,e){this.children.forEach((function(n){t.insertBefore(n,e)}))},e.prototype.optimize=function(e){if(t.prototype.optimize.call(this,e),0===this.children.length)if(null!=this.statics.defaultChild){var n=s.create(this.statics.defaultChild);this.appendChild(n),n.optimize(e)}else this.remove()},e.prototype.path=function(t,n){void 0===n&&(n=!1);var i=this.children.find(t,n),r=i[0],o=i[1],a=[[this,t]];return r instanceof e?a.concat(r.path(o,n)):(null!=r&&a.push([r,o]),a)},e.prototype.removeChild=function(t){this.children.remove(t)},e.prototype.replace=function(n){n instanceof e&&n.moveChildren(this),t.prototype.replace.call(this,n)},e.prototype.split=function(t,e){if(void 0===e&&(e=!1),!e){if(0===t)return this;if(t===this.length())return this.next}var n=this.clone();return this.parent.insertBefore(n,this.next),this.children.forEachAt(t,this.length(),(function(t,i,r){t=t.split(i,e),n.appendChild(t)})),n},e.prototype.unwrap=function(){this.moveChildren(this.parent,this.next),this.remove()},e.prototype.update=function(t,e){var n=this,r=[],o=[];t.forEach((function(t){t.target===n.domNode&&"childList"===t.type&&(r.push.apply(r,t.addedNodes),o.push.apply(o,t.removedNodes))})),o.forEach((function(t){if(!(null!=t.parentNode&&"IFRAME"!==t.tagName&&document.body.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY)){var e=s.find(t);null!=e&&(null!=e.domNode.parentNode&&e.domNode.parentNode!==n.domNode||e.detach())}})),r.filter((function(t){return t.parentNode==n.domNode})).sort((function(t,e){return t===e?0:t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_FOLLOWING?1:-1})).forEach((function(t){var e=null;null!=t.nextSibling&&(e=s.find(t.nextSibling));var r=i(t);r.next==e&&null!=r.next||(null!=r.parent&&r.parent.removeChild(n),n.insertBefore(r,e||void 0))}))},e}(a.default);e.default=l},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(11),o=n(28),a=n(17),s=n(1),l=function(t){function e(e){var n=t.call(this,e)||this;return n.attributes=new o.default(n.domNode),n}return i(e,t),e.formats=function(t){return"string"==typeof this.tagName||(Array.isArray(this.tagName)?t.tagName.toLowerCase():void 0)},e.prototype.format=function(t,e){var n=s.query(t);n instanceof r.default?this.attributes.attribute(n,e):e&&(null==n||t===this.statics.blotName&&this.formats()[t]===e||this.replaceWith(t,e))},e.prototype.formats=function(){var t=this.attributes.values(),e=this.statics.formats(this.domNode);return null!=e&&(t[this.statics.blotName]=e),t},e.prototype.replaceWith=function(e,n){var i=t.prototype.replaceWith.call(this,e,n);return this.attributes.copy(i),i},e.prototype.update=function(e,n){var i=this;t.prototype.update.call(this,e,n),e.some((function(t){return t.target===i.domNode&&"attributes"===t.type}))&&this.attributes.build()},e.prototype.wrap=function(n,i){var r=t.prototype.wrap.call(this,n,i);return r instanceof e&&r.statics.scope===this.statics.scope&&this.attributes.move(r),r},e}(a.default);e.default=l},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(27),o=n(1),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.value=function(t){return!0},e.prototype.index=function(t,e){return this.domNode===t||this.domNode.compareDocumentPosition(t)&Node.DOCUMENT_POSITION_CONTAINED_BY?Math.min(e,1):-1},e.prototype.position=function(t,e){var n=[].indexOf.call(this.parent.domNode.childNodes,this.domNode);return t>0&&(n+=1),[this.parent.domNode,n]},e.prototype.value=function(){var t;return(t={})[this.statics.blotName]=this.statics.value(this.domNode)||!0,t},e.scope=o.Scope.INLINE_BLOT,e}(r.default);e.default=a},function(t,e,n){function i(t){this.ops=t,this.index=0,this.offset=0}var r=n(12),o=n(2),a={attributes:{compose:function(t,e,n){"object"!=typeof t&&(t={}),"object"!=typeof e&&(e={});var i=o(!0,{},e);for(var r in n||(i=Object.keys(i).reduce((function(t,e){return null!=i[e]&&(t[e]=i[e]),t}),{})),t)void 0!==t[r]&&void 0===e[r]&&(i[r]=t[r]);return Object.keys(i).length>0?i:void 0},diff:function(t,e){"object"!=typeof t&&(t={}),"object"!=typeof e&&(e={});var n=Object.keys(t).concat(Object.keys(e)).reduce((function(n,i){return r(t[i],e[i])||(n[i]=void 0===e[i]?null:e[i]),n}),{});return Object.keys(n).length>0?n:void 0},transform:function(t,e,n){if("object"!=typeof t)return e;if("object"==typeof e){if(!n)return e;var i=Object.keys(e).reduce((function(n,i){return void 0===t[i]&&(n[i]=e[i]),n}),{});return Object.keys(i).length>0?i:void 0}}},iterator:function(t){return new i(t)},length:function(t){return"number"==typeof t.delete?t.delete:"number"==typeof t.retain?t.retain:"string"==typeof t.insert?t.insert.length:1}};i.prototype.hasNext=function(){return this.peekLength()<1/0},i.prototype.next=function(t){t||(t=1/0);var e=this.ops[this.index];if(e){var n=this.offset,i=a.length(e);if(t>=i-n?(t=i-n,this.index+=1,this.offset=0):this.offset+=t,"number"==typeof e.delete)return{delete:t};var r={};return e.attributes&&(r.attributes=e.attributes),"number"==typeof e.retain?r.retain=t:"string"==typeof e.insert?r.insert=e.insert.substr(n,t):r.insert=e.insert,r}return{retain:1/0}},i.prototype.peek=function(){return this.ops[this.index]},i.prototype.peekLength=function(){return this.ops[this.index]?a.length(this.ops[this.index])-this.offset:1/0},i.prototype.peekType=function(){return this.ops[this.index]?"number"==typeof this.ops[this.index].delete?"delete":"number"==typeof this.ops[this.index].retain?"retain":"insert":"retain"},i.prototype.rest=function(){if(this.hasNext()){if(0===this.offset)return this.ops.slice(this.index);var t=this.offset,e=this.index,n=this.next(),i=this.ops.slice(this.index);return this.offset=t,this.index=e,[n].concat(i)}return[]},t.exports=a},function(t,e){var n=function(){"use strict";function t(t,e){return null!=e&&t instanceof e}function e(n,s,l,c,u){"object"==typeof s&&(l=s.depth,c=s.prototype,u=s.includeNonEnumerable,s=s.circular);var h=[],d=[],p="undefined"!=typeof Buffer;return void 0===s&&(s=!0),void 0===l&&(l=1/0),function n(l,f){if(null===l)return null;if(0===f)return l;var g,m;if("object"!=typeof l)return l;if(t(l,r))g=new r;else if(t(l,o))g=new o;else if(t(l,a))g=new a((function(t,e){l.then((function(e){t(n(e,f-1))}),(function(t){e(n(t,f-1))}))}));else if(e.__isArray(l))g=[];else if(e.__isRegExp(l))g=new RegExp(l.source,i(l)),l.lastIndex&&(g.lastIndex=l.lastIndex);else if(e.__isDate(l))g=new Date(l.getTime());else{if(p&&Buffer.isBuffer(l))return g=Buffer.allocUnsafe?Buffer.allocUnsafe(l.length):new Buffer(l.length),l.copy(g),g;t(l,Error)?g=Object.create(l):void 0===c?(m=Object.getPrototypeOf(l),g=Object.create(m)):(g=Object.create(c),m=c)}if(s){var v=h.indexOf(l);if(-1!=v)return d[v];h.push(l),d.push(g)}for(var y in t(l,r)&&l.forEach((function(t,e){var i=n(e,f-1),r=n(t,f-1);g.set(i,r)})),t(l,o)&&l.forEach((function(t){var e=n(t,f-1);g.add(e)})),l){var b;m&&(b=Object.getOwnPropertyDescriptor(m,y)),b&&null==b.set||(g[y]=n(l[y],f-1))}if(Object.getOwnPropertySymbols){var x=Object.getOwnPropertySymbols(l);for(y=0;y<x.length;y++){var _=x[y];(!(S=Object.getOwnPropertyDescriptor(l,_))||S.enumerable||u)&&(g[_]=n(l[_],f-1),S.enumerable||Object.defineProperty(g,_,{enumerable:!1}))}}if(u){var w=Object.getOwnPropertyNames(l);for(y=0;y<w.length;y++){var S,C=w[y];(S=Object.getOwnPropertyDescriptor(l,C))&&S.enumerable||(g[C]=n(l[C],f-1),Object.defineProperty(g,C,{enumerable:!1}))}}return g}(n,l)}function n(t){return Object.prototype.toString.call(t)}function i(t){var e="";return t.global&&(e+="g"),t.ignoreCase&&(e+="i"),t.multiline&&(e+="m"),e}var r,o,a;try{r=Map}catch(t){r=function(){}}try{o=Set}catch(t){o=function(){}}try{a=Promise}catch(t){a=function(){}}return e.clonePrototype=function(t){if(null===t)return null;var e=function(){};return e.prototype=t,new e},e.__objToStr=n,e.__isDate=function(t){return"object"==typeof t&&"[object Date]"===n(t)},e.__isArray=function(t){return"object"==typeof t&&"[object Array]"===n(t)},e.__isRegExp=function(t){return"object"==typeof t&&"[object RegExp]"===n(t)},e.__getRegExpFlags=i,e}();"object"==typeof t&&t.exports&&(t.exports=n)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function a(t,e){try{e.parentNode}catch(t){return!1}return e instanceof Text&&(e=e.parentNode),t.contains(e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.Range=void 0;var s=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},l=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),c=i(n(0)),u=i(n(21)),h=i(n(12)),d=i(n(9)),p=(0,i(n(10)).default)("quill:selection"),f=function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;o(this,t),this.index=e,this.length=n},g=function(){function t(e,n){var i=this;o(this,t),this.emitter=n,this.scroll=e,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=c.default.create("cursor",this),this.lastRange=this.savedRange=new f(0,0),this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,(function(){i.mouseDown||setTimeout(i.update.bind(i,d.default.sources.USER),1)})),this.emitter.on(d.default.events.EDITOR_CHANGE,(function(t,e){t===d.default.events.TEXT_CHANGE&&e.length()>0&&i.update(d.default.sources.SILENT)})),this.emitter.on(d.default.events.SCROLL_BEFORE_UPDATE,(function(){if(i.hasFocus()){var t=i.getNativeRange();null!=t&&t.start.node!==i.cursor.textNode&&i.emitter.once(d.default.events.SCROLL_UPDATE,(function(){try{i.setNativeRange(t.start.node,t.start.offset,t.end.node,t.end.offset)}catch(t){}}))}})),this.emitter.on(d.default.events.SCROLL_OPTIMIZE,(function(t,e){if(e.range){var n=e.range,r=n.startNode,o=n.startOffset,a=n.endNode,s=n.endOffset;i.setNativeRange(r,o,a,s)}})),this.update(d.default.sources.SILENT)}return l(t,[{key:"handleComposition",value:function(){var t=this;this.root.addEventListener("compositionstart",(function(){t.composing=!0})),this.root.addEventListener("compositionend",(function(){if(t.composing=!1,t.cursor.parent){var e=t.cursor.restore();if(!e)return;setTimeout((function(){t.setNativeRange(e.startNode,e.startOffset,e.endNode,e.endOffset)}),1)}}))}},{key:"handleDragging",value:function(){var t=this;this.emitter.listenDOM("mousedown",document.body,(function(){t.mouseDown=!0})),this.emitter.listenDOM("mouseup",document.body,(function(){t.mouseDown=!1,t.update(d.default.sources.USER)}))}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus(),this.setRange(this.savedRange))}},{key:"format",value:function(t,e){if(null==this.scroll.whitelist||this.scroll.whitelist[t]){this.scroll.update();var n=this.getNativeRange();if(null!=n&&n.native.collapsed&&!c.default.query(t,c.default.Scope.BLOCK)){if(n.start.node!==this.cursor.textNode){var i=c.default.find(n.start.node,!1);if(null==i)return;if(i instanceof c.default.Leaf){var r=i.split(n.start.offset);i.parent.insertBefore(this.cursor,r)}else i.insertBefore(this.cursor,n.start.node);this.cursor.attach()}this.cursor.format(t,e),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}}},{key:"getBounds",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.scroll.length();t=Math.min(t,n-1),e=Math.min(t+e,n-1)-t;var i=void 0,r=this.scroll.leaf(t),o=s(r,2),a=o[0],l=o[1];if(null==a)return null;var c=a.position(l,!0),u=s(c,2);i=u[0],l=u[1];var h=document.createRange();if(e>0){h.setStart(i,l);var d=this.scroll.leaf(t+e),p=s(d,2);if(a=p[0],l=p[1],null==a)return null;var f=a.position(l,!0),g=s(f,2);return i=g[0],l=g[1],h.setEnd(i,l),h.getBoundingClientRect()}var m="left",v=void 0;return i instanceof Text?(l<i.data.length?(h.setStart(i,l),h.setEnd(i,l+1)):(h.setStart(i,l-1),h.setEnd(i,l),m="right"),v=h.getBoundingClientRect()):(v=a.domNode.getBoundingClientRect(),l>0&&(m="right")),{bottom:v.top+v.height,height:v.height,left:v[m],right:v[m],top:v.top,width:0}}},{key:"getNativeRange",value:function(){var t=document.getSelection();if(null==t||t.rangeCount<=0)return null;var e=t.getRangeAt(0);if(null==e)return null;var n=this.normalizeNative(e);return p.info("getNativeRange",n),n}},{key:"getRange",value:function(){var t=this.getNativeRange();return null==t?[null,null]:[this.normalizedToRange(t),t]}},{key:"hasFocus",value:function(){return document.activeElement===this.root}},{key:"normalizedToRange",value:function(t){var e=this,n=[[t.start.node,t.start.offset]];t.native.collapsed||n.push([t.end.node,t.end.offset]);var i=n.map((function(t){var n=s(t,2),i=n[0],r=n[1],o=c.default.find(i,!0),a=o.offset(e.scroll);return 0===r?a:o instanceof c.default.Container?a+o.length():a+o.index(i,r)})),o=Math.min(Math.max.apply(Math,r(i)),this.scroll.length()-1),a=Math.min.apply(Math,[o].concat(r(i)));return new f(a,o-a)}},{key:"normalizeNative",value:function(t){if(!a(this.root,t.startContainer)||!t.collapsed&&!a(this.root,t.endContainer))return null;var e={start:{node:t.startContainer,offset:t.startOffset},end:{node:t.endContainer,offset:t.endOffset},native:t};return[e.start,e.end].forEach((function(t){for(var e=t.node,n=t.offset;!(e instanceof Text)&&e.childNodes.length>0;)if(e.childNodes.length>n)e=e.childNodes[n],n=0;else{if(e.childNodes.length!==n)break;n=(e=e.lastChild)instanceof Text?e.data.length:e.childNodes.length+1}t.node=e,t.offset=n})),e}},{key:"rangeToNative",value:function(t){var e=this,n=t.collapsed?[t.index]:[t.index,t.index+t.length],i=[],r=this.scroll.length();return n.forEach((function(t,n){t=Math.min(r-1,t);var o,a=e.scroll.leaf(t),l=s(a,2),c=l[0],u=l[1],h=c.position(u,0!==n),d=s(h,2);o=d[0],u=d[1],i.push(o,u)})),i.length<2&&(i=i.concat(i)),i}},{key:"scrollIntoView",value:function(t){var e=this.lastRange;if(null!=e){var n=this.getBounds(e.index,e.length);if(null!=n){var i=this.scroll.length()-1,r=this.scroll.line(Math.min(e.index,i)),o=s(r,1)[0],a=o;if(e.length>0){var l=this.scroll.line(Math.min(e.index+e.length,i));a=s(l,1)[0]}if(null!=o&&null!=a){var c=t.getBoundingClientRect();n.top<c.top?t.scrollTop-=c.top-n.top:n.bottom>c.bottom&&(t.scrollTop+=n.bottom-c.bottom)}}}}},{key:"setNativeRange",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(p.info("setNativeRange",t,e,n,i),null==t||null!=this.root.parentNode&&null!=t.parentNode&&null!=n.parentNode){var o=document.getSelection();if(null!=o)if(null!=t){this.hasFocus()||this.root.focus();var a=(this.getNativeRange()||{}).native;if(null==a||r||t!==a.startContainer||e!==a.startOffset||n!==a.endContainer||i!==a.endOffset){"BR"==t.tagName&&(e=[].indexOf.call(t.parentNode.childNodes,t),t=t.parentNode),"BR"==n.tagName&&(i=[].indexOf.call(n.parentNode.childNodes,n),n=n.parentNode);var s=document.createRange();s.setStart(t,e),s.setEnd(n,i),o.removeAllRanges(),o.addRange(s)}}else o.removeAllRanges(),this.root.blur(),document.body.focus()}}},{key:"setRange",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d.default.sources.API;if("string"==typeof e&&(n=e,e=!1),p.info("setRange",t),null!=t){var i=this.rangeToNative(t);this.setNativeRange.apply(this,r(i).concat([e]))}else this.setNativeRange(null);this.update(n)}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d.default.sources.USER,e=this.lastRange,n=this.getRange(),i=s(n,2),r=i[0],o=i[1];if(this.lastRange=r,null!=this.lastRange&&(this.savedRange=this.lastRange),!(0,h.default)(e,this.lastRange)){var a;!this.composing&&null!=o&&o.native.collapsed&&o.start.node!==this.cursor.textNode&&this.cursor.restore();var l,c=[d.default.events.SELECTION_CHANGE,(0,u.default)(this.lastRange),(0,u.default)(e),t];if((a=this.emitter).emit.apply(a,[d.default.events.EDITOR_CHANGE].concat(c)),t!==d.default.sources.SILENT)(l=this.emitter).emit.apply(l,c)}}}]),t}();e.Range=f,e.default=g},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}Object.defineProperty(e,"__esModule",{value:!0});var a=i(n(0)),s=n(3),l=i(s),c=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(a.default.Container);c.allowedChildren=[l.default,s.BlockEmbed,c],e.default=c},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}Object.defineProperty(e,"__esModule",{value:!0}),e.ColorStyle=e.ColorClass=e.ColorAttributor=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},s=function(t){return t&&t.__esModule?t:{default:t}}(n(0)),l=function(t){function e(){return i(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),o(e,[{key:"value",value:function(t){var n=a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"value",this).call(this,t);return n.startsWith("rgb(")?"#"+(n=n.replace(/^[^\d]+/,"").replace(/[^\d]+$/,"")).split(",").map((function(t){return("00"+parseInt(t).toString(16)).slice(-2)})).join(""):n}}]),e}(s.default.Attributor.Style),c=new s.default.Attributor.Class("color","ql-color",{scope:s.default.Scope.INLINE}),u=new l("color","color",{scope:s.default.Scope.INLINE});e.ColorAttributor=l,e.ColorClass=c,e.ColorStyle=u},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e){var n,i=t===M.keys.LEFT?"prefix":"suffix";return r(n={key:t,shiftKey:e,altKey:null},i,/^$/),r(n,"handler",(function(n){var i=n.index;t===M.keys.RIGHT&&(i+=n.length+1);var r=this.quill.getLeaf(i);return!(f(r,1)[0]instanceof _.default.Embed&&(t===M.keys.LEFT?e?this.quill.setSelection(n.index-1,n.length+1,w.default.sources.USER):this.quill.setSelection(n.index-1,w.default.sources.USER):e?this.quill.setSelection(n.index,n.length+1,w.default.sources.USER):this.quill.setSelection(n.index+n.length+1,w.default.sources.USER),1))})),n}function a(t,e){if(!(0===t.index||this.quill.getLength()<=1)){var n=this.quill.getLine(t.index),i=f(n,1)[0],r={};if(0===e.offset){var o=this.quill.getLine(t.index-1),a=f(o,1)[0];if(null!=a&&a.length()>1){var s=i.formats(),l=this.quill.getFormat(t.index-1,1);r=x.default.attributes.diff(s,l)||{}}}var c=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(e.prefix)?2:1;this.quill.deleteText(t.index-c,c,w.default.sources.USER),Object.keys(r).length>0&&this.quill.formatLine(t.index-c,c,r,w.default.sources.USER),this.quill.focus()}}function s(t,e){var n=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(e.suffix)?2:1;if(!(t.index>=this.quill.getLength()-n)){var i={},r=0,o=this.quill.getLine(t.index),a=f(o,1)[0];if(e.offset>=a.length()-1){var s=this.quill.getLine(t.index+1),l=f(s,1)[0];if(l){var c=a.formats(),u=this.quill.getFormat(t.index,1);i=x.default.attributes.diff(c,u)||{},r=l.length()}}this.quill.deleteText(t.index,n,w.default.sources.USER),Object.keys(i).length>0&&this.quill.formatLine(t.index+r-1,n,i,w.default.sources.USER)}}function l(t){var e=this.quill.getLines(t),n={};if(e.length>1){var i=e[0].formats(),r=e[e.length-1].formats();n=x.default.attributes.diff(r,i)||{}}this.quill.deleteText(t,w.default.sources.USER),Object.keys(n).length>0&&this.quill.formatLine(t.index,1,n,w.default.sources.USER),this.quill.setSelection(t.index,w.default.sources.SILENT),this.quill.focus()}function c(t,e){var n=this;t.length>0&&this.quill.scroll.deleteAt(t.index,t.length);var i=Object.keys(e.format).reduce((function(t,n){return _.default.query(n,_.default.Scope.BLOCK)&&!Array.isArray(e.format[n])&&(t[n]=e.format[n]),t}),{});this.quill.insertText(t.index,"\n",i,w.default.sources.USER),this.quill.setSelection(t.index+1,w.default.sources.SILENT),this.quill.focus(),Object.keys(e.format).forEach((function(t){null==i[t]&&(Array.isArray(e.format[t])||"link"!==t&&n.quill.format(t,e.format[t],w.default.sources.USER))}))}function u(t){return{key:M.keys.TAB,shiftKey:!t,format:{"code-block":!0},handler:function(e){var n=_.default.query("code-block"),i=e.index,r=e.length,o=this.quill.scroll.descendant(n,i),a=f(o,2),s=a[0],l=a[1];if(null!=s){var c=this.quill.getIndex(s),u=s.newlineIndex(l,!0)+1,h=s.newlineIndex(c+l+r),d=s.domNode.textContent.slice(u,h).split("\n");l=0,d.forEach((function(e,o){t?(s.insertAt(u+l,n.TAB),l+=n.TAB.length,0===o?i+=n.TAB.length:r+=n.TAB.length):e.startsWith(n.TAB)&&(s.deleteAt(u+l,n.TAB.length),l-=n.TAB.length,0===o?i-=n.TAB.length:r-=n.TAB.length),l+=e.length+1})),this.quill.update(w.default.sources.USER),this.quill.setSelection(i,r,w.default.sources.SILENT)}}}}function h(t){return{key:t[0].toUpperCase(),shortKey:!0,handler:function(e,n){this.quill.format(t,!n.format[t],w.default.sources.USER)}}}function d(t){if("string"==typeof t||"number"==typeof t)return d({key:t});if("object"===(void 0===t?"undefined":p(t))&&(t=(0,m.default)(t,!1)),"string"==typeof t.key)if(null!=M.keys[t.key.toUpperCase()])t.key=M.keys[t.key.toUpperCase()];else{if(1!==t.key.length)return null;t.key=t.key.toUpperCase().charCodeAt(0)}return t.shortKey&&(t[A]=t.shortKey,delete t.shortKey),t}Object.defineProperty(e,"__esModule",{value:!0}),e.SHORTKEY=e.default=void 0;var p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},g=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),m=i(n(21)),v=i(n(12)),y=i(n(2)),b=i(n(4)),x=i(n(20)),_=i(n(0)),w=i(n(6)),S=i(n(10)),C=i(n(7)),k=(0,S.default)("quill:keyboard"),A=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",M=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return i.bindings={},Object.keys(i.options.bindings).forEach((function(e){("list autofill"!==e||null==t.scroll.whitelist||t.scroll.whitelist.list)&&i.options.bindings[e]&&i.addBinding(i.options.bindings[e])})),i.addBinding({key:e.keys.ENTER,shiftKey:null},c),i.addBinding({key:e.keys.ENTER,metaKey:null,ctrlKey:null,altKey:null},(function(){})),/Firefox/i.test(navigator.userAgent)?(i.addBinding({key:e.keys.BACKSPACE},{collapsed:!0},a),i.addBinding({key:e.keys.DELETE},{collapsed:!0},s)):(i.addBinding({key:e.keys.BACKSPACE},{collapsed:!0,prefix:/^.?$/},a),i.addBinding({key:e.keys.DELETE},{collapsed:!0,suffix:/^.?$/},s)),i.addBinding({key:e.keys.BACKSPACE},{collapsed:!1},l),i.addBinding({key:e.keys.DELETE},{collapsed:!1},l),i.addBinding({key:e.keys.BACKSPACE,altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},a),i.listen(),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),g(e,null,[{key:"match",value:function(t,e){return e=d(e),!["altKey","ctrlKey","metaKey","shiftKey"].some((function(n){return!!e[n]!==t[n]&&null!==e[n]}))&&e.key===(t.which||t.keyCode)}}]),g(e,[{key:"addBinding",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=d(t);if(null==i||null==i.key)return k.warn("Attempted to add invalid keyboard binding",i);"function"==typeof e&&(e={handler:e}),"function"==typeof n&&(n={handler:n}),i=(0,y.default)(i,e,n),this.bindings[i.key]=this.bindings[i.key]||[],this.bindings[i.key].push(i)}},{key:"listen",value:function(){var t=this;this.quill.root.addEventListener("keydown",(function(n){if(!n.defaultPrevented){var i=n.which||n.keyCode,r=(t.bindings[i]||[]).filter((function(t){return e.match(n,t)}));if(0!==r.length){var o=t.quill.getSelection();if(null!=o&&t.quill.hasFocus()){var a=t.quill.getLine(o.index),s=f(a,2),l=s[0],c=s[1],u=t.quill.getLeaf(o.index),h=f(u,2),d=h[0],g=h[1],m=0===o.length?[d,g]:t.quill.getLeaf(o.index+o.length),y=f(m,2),b=y[0],x=y[1],w=d instanceof _.default.Text?d.value().slice(0,g):"",S=b instanceof _.default.Text?b.value().slice(x):"",C={collapsed:0===o.length,empty:0===o.length&&l.length()<=1,format:t.quill.getFormat(o),offset:c,prefix:w,suffix:S};r.some((function(e){if(null!=e.collapsed&&e.collapsed!==C.collapsed)return!1;if(null!=e.empty&&e.empty!==C.empty)return!1;if(null!=e.offset&&e.offset!==C.offset)return!1;if(Array.isArray(e.format)){if(e.format.every((function(t){return null==C.format[t]})))return!1}else if("object"===p(e.format)&&!Object.keys(e.format).every((function(t){return!0===e.format[t]?null!=C.format[t]:!1===e.format[t]?null==C.format[t]:(0,v.default)(e.format[t],C.format[t])})))return!1;return!(null!=e.prefix&&!e.prefix.test(C.prefix)||null!=e.suffix&&!e.suffix.test(C.suffix)||!0===e.handler.call(t,o,C))}))&&n.preventDefault()}}}}))}}]),e}(C.default);M.keys={BACKSPACE:8,TAB:9,ENTER:13,ESCAPE:27,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46},M.DEFAULTS={bindings:{bold:h("bold"),italic:h("italic"),underline:h("underline"),indent:{key:M.keys.TAB,format:["blockquote","indent","list"],handler:function(t,e){if(e.collapsed&&0!==e.offset)return!0;this.quill.format("indent","+1",w.default.sources.USER)}},outdent:{key:M.keys.TAB,shiftKey:!0,format:["blockquote","indent","list"],handler:function(t,e){if(e.collapsed&&0!==e.offset)return!0;this.quill.format("indent","-1",w.default.sources.USER)}},"outdent backspace":{key:M.keys.BACKSPACE,collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(t,e){null!=e.format.indent?this.quill.format("indent","-1",w.default.sources.USER):null!=e.format.list&&this.quill.format("list",!1,w.default.sources.USER)}},"indent code-block":u(!0),"outdent code-block":u(!1),"remove tab":{key:M.keys.TAB,shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(t){this.quill.deleteText(t.index-1,1,w.default.sources.USER)}},tab:{key:M.keys.TAB,handler:function(t){this.quill.history.cutoff();var e=(new b.default).retain(t.index).delete(t.length).insert("\t");this.quill.updateContents(e,w.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index+1,w.default.sources.SILENT)}},"list empty enter":{key:M.keys.ENTER,collapsed:!0,format:["list"],empty:!0,handler:function(t,e){this.quill.format("list",!1,w.default.sources.USER),e.format.indent&&this.quill.format("indent",!1,w.default.sources.USER)}},"checklist enter":{key:M.keys.ENTER,collapsed:!0,format:{list:"checked"},handler:function(t){var e=this.quill.getLine(t.index),n=f(e,2),i=n[0],r=n[1],o=(0,y.default)({},i.formats(),{list:"checked"}),a=(new b.default).retain(t.index).insert("\n",o).retain(i.length()-r-1).retain(1,{list:"unchecked"});this.quill.updateContents(a,w.default.sources.USER),this.quill.setSelection(t.index+1,w.default.sources.SILENT),this.quill.scrollIntoView()}},"header enter":{key:M.keys.ENTER,collapsed:!0,format:["header"],suffix:/^$/,handler:function(t,e){var n=this.quill.getLine(t.index),i=f(n,2),r=i[0],o=i[1],a=(new b.default).retain(t.index).insert("\n",e.format).retain(r.length()-o-1).retain(1,{header:null});this.quill.updateContents(a,w.default.sources.USER),this.quill.setSelection(t.index+1,w.default.sources.SILENT),this.quill.scrollIntoView()}},"list autofill":{key:" ",collapsed:!0,format:{list:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(t,e){var n=e.prefix.length,i=this.quill.getLine(t.index),r=f(i,2),o=r[0],a=r[1];if(a>n)return!0;var s=void 0;switch(e.prefix.trim()){case"[]":case"[ ]":s="unchecked";break;case"[x]":s="checked";break;case"-":case"*":s="bullet";break;default:s="ordered"}this.quill.insertText(t.index," ",w.default.sources.USER),this.quill.history.cutoff();var l=(new b.default).retain(t.index-a).delete(n+1).retain(o.length()-2-a).retain(1,{list:s});this.quill.updateContents(l,w.default.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index-n,w.default.sources.SILENT)}},"code exit":{key:M.keys.ENTER,collapsed:!0,format:["code-block"],prefix:/\n\n$/,suffix:/^\s+$/,handler:function(t){var e=this.quill.getLine(t.index),n=f(e,2),i=n[0],r=n[1],o=(new b.default).retain(t.index+i.length()-r-2).retain(1,{"code-block":null}).delete(1);this.quill.updateContents(o,w.default.sources.USER)}},"embed left":o(M.keys.LEFT,!1),"embed left shift":o(M.keys.LEFT,!0),"embed right":o(M.keys.RIGHT,!1),"embed right shift":o(M.keys.RIGHT,!0)}},e.default=M,e.SHORTKEY=A},function(t,e,n){"use strict";t.exports={align:{"":n(75),center:n(76),right:n(77),justify:n(78)},background:n(79),blockquote:n(80),bold:n(81),clean:n(82),code:n(40),"code-block":n(40),color:n(83),direction:{"":n(84),rtl:n(85)},float:{center:n(86),full:n(87),left:n(88),right:n(89)},formula:n(90),header:{1:n(91),2:n(92)},italic:n(93),image:n(94),indent:{"+1":n(95),"-1":n(96)},link:n(97),list:{ordered:n(98),bullet:n(99),check:n(100)},script:{sub:n(101),super:n(102)},strike:n(103),underline:n(104),video:n(105)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(1),r=function(){function t(t){this.domNode=t,this.domNode[i.DATA_KEY]={blot:this}}return Object.defineProperty(t.prototype,"statics",{get:function(){return this.constructor},enumerable:!0,configurable:!0}),t.create=function(t){if(null==this.tagName)throw new i.ParchmentError("Blot definition missing tagName");var e;return Array.isArray(this.tagName)?("string"==typeof t&&(t=t.toUpperCase(),parseInt(t).toString()===t&&(t=parseInt(t))),e="number"==typeof t?document.createElement(this.tagName[t-1]):this.tagName.indexOf(t)>-1?document.createElement(t):document.createElement(this.tagName[0])):e=document.createElement(this.tagName),this.className&&e.classList.add(this.className),e},t.prototype.attach=function(){null!=this.parent&&(this.scroll=this.parent.scroll)},t.prototype.clone=function(){var t=this.domNode.cloneNode(!1);return i.create(t)},t.prototype.detach=function(){null!=this.parent&&this.parent.removeChild(this),delete this.domNode[i.DATA_KEY]},t.prototype.deleteAt=function(t,e){this.isolate(t,e).remove()},t.prototype.formatAt=function(t,e,n,r){var o=this.isolate(t,e);if(null!=i.query(n,i.Scope.BLOT)&&r)o.wrap(n,r);else if(null!=i.query(n,i.Scope.ATTRIBUTE)){var a=i.create(this.statics.scope);o.wrap(a),a.format(n,r)}},t.prototype.insertAt=function(t,e,n){var r=null==n?i.create("text",e):i.create(e,n),o=this.split(t);this.parent.insertBefore(r,o)},t.prototype.insertInto=function(t,e){void 0===e&&(e=null),null!=this.parent&&this.parent.children.remove(this);var n=null;t.children.insertBefore(this,e),null!=e&&(n=e.domNode),this.domNode.parentNode==t.domNode&&this.domNode.nextSibling==n||t.domNode.insertBefore(this.domNode,n),this.parent=t,this.attach()},t.prototype.isolate=function(t,e){var n=this.split(t);return n.split(e),n},t.prototype.length=function(){return 1},t.prototype.offset=function(t){return void 0===t&&(t=this.parent),null==this.parent||this==t?0:this.parent.children.offset(this)+this.parent.offset(t)},t.prototype.optimize=function(t){null!=this.domNode[i.DATA_KEY]&&delete this.domNode[i.DATA_KEY].mutations},t.prototype.remove=function(){null!=this.domNode.parentNode&&this.domNode.parentNode.removeChild(this.domNode),this.detach()},t.prototype.replace=function(t){null!=t.parent&&(t.parent.insertBefore(this,t.next),t.remove())},t.prototype.replaceWith=function(t,e){var n="string"==typeof t?i.create(t,e):t;return n.replace(this),n},t.prototype.split=function(t,e){return 0===t?this:this.next},t.prototype.update=function(t,e){},t.prototype.wrap=function(t,e){var n="string"==typeof t?i.create(t,e):t;return null!=this.parent&&this.parent.insertBefore(n,this.next),n.appendChild(this),n},t.blotName="abstract",t}();e.default=r},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=n(11),r=n(29),o=n(30),a=n(1),s=function(){function t(t){this.attributes={},this.domNode=t,this.build()}return t.prototype.attribute=function(t,e){e?t.add(this.domNode,e)&&(null!=t.value(this.domNode)?this.attributes[t.attrName]=t:delete this.attributes[t.attrName]):(t.remove(this.domNode),delete this.attributes[t.attrName])},t.prototype.build=function(){var t=this;this.attributes={};var e=i.default.keys(this.domNode),n=r.default.keys(this.domNode),s=o.default.keys(this.domNode);e.concat(n).concat(s).forEach((function(e){var n=a.query(e,a.Scope.ATTRIBUTE);n instanceof i.default&&(t.attributes[n.attrName]=n)}))},t.prototype.copy=function(t){var e=this;Object.keys(this.attributes).forEach((function(n){var i=e.attributes[n].value(e.domNode);t.format(n,i)}))},t.prototype.move=function(t){var e=this;this.copy(t),Object.keys(this.attributes).forEach((function(t){e.attributes[t].remove(e.domNode)})),this.attributes={}},t.prototype.values=function(){var t=this;return Object.keys(this.attributes).reduce((function(e,n){return e[n]=t.attributes[n].value(t.domNode),e}),{})},t}();e.default=s},function(t,e,n){"use strict";function i(t,e){return(t.getAttribute("class")||"").split(/\s+/).filter((function(t){return 0===t.indexOf(e+"-")}))}var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.keys=function(t){return(t.getAttribute("class")||"").split(/\s+/).map((function(t){return t.split("-").slice(0,-1).join("-")}))},e.prototype.add=function(t,e){return!!this.canAdd(t,e)&&(this.remove(t),t.classList.add(this.keyName+"-"+e),!0)},e.prototype.remove=function(t){i(t,this.keyName).forEach((function(e){t.classList.remove(e)})),0===t.classList.length&&t.removeAttribute("class")},e.prototype.value=function(t){var e=(i(t,this.keyName)[0]||"").slice(this.keyName.length+1);return this.canAdd(t,e)?e:""},e}(n(11).default);e.default=o},function(t,e,n){"use strict";function i(t){var e=t.split("-"),n=e.slice(1).map((function(t){return t[0].toUpperCase()+t.slice(1)})).join("");return e[0]+n}var r=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return r(e,t),e.keys=function(t){return(t.getAttribute("style")||"").split(";").map((function(t){return t.split(":")[0].trim()}))},e.prototype.add=function(t,e){return!!this.canAdd(t,e)&&(t.style[i(this.keyName)]=e,!0)},e.prototype.remove=function(t){t.style[i(this.keyName)]="",t.getAttribute("style")||t.removeAttribute("style")},e.prototype.value=function(t){var e=t.style[i(this.keyName)];return this.canAdd(t,e)?e:""},e}(n(11).default);e.default=o},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},o=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=i(n(0)),l=i(n(8)),c=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.selection=n,i.textNode=document.createTextNode(e.CONTENTS),i.domNode.appendChild(i.textNode),i._length=0,i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),a(e,null,[{key:"value",value:function(){}}]),a(e,[{key:"detach",value:function(){null!=this.parent&&this.parent.removeChild(this)}},{key:"format",value:function(t,n){if(0!==this._length)return o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"format",this).call(this,t,n);for(var i=this,r=0;null!=i&&i.statics.scope!==s.default.Scope.BLOCK_BLOT;)r+=i.offset(i.parent),i=i.parent;null!=i&&(this._length=e.CONTENTS.length,i.optimize(),i.formatAt(r,e.CONTENTS.length,t,n),this._length=0)}},{key:"index",value:function(t,n){return t===this.textNode?0:o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"index",this).call(this,t,n)}},{key:"length",value:function(){return this._length}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(!this.selection.composing&&null!=this.parent){var t=this.textNode,n=this.selection.getNativeRange(),i=void 0,o=void 0,a=void 0;if(null!=n&&n.start.node===t&&n.end.node===t){var c=[t,n.start.offset,n.end.offset];i=c[0],o=c[1],a=c[2]}for(;null!=this.domNode.lastChild&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);if(this.textNode.data!==e.CONTENTS){var u=this.textNode.data.split(e.CONTENTS).join("");this.next instanceof l.default?(i=this.next.domNode,this.next.insertAt(0,u),this.textNode.data=e.CONTENTS):(this.textNode.data=u,this.parent.insertBefore(s.default.create(this.textNode),this),this.textNode=document.createTextNode(e.CONTENTS),this.domNode.appendChild(this.textNode))}if(this.remove(),null!=o){var h=[o,a].map((function(t){return Math.max(0,Math.min(i.data.length,t-1))})),d=r(h,2);return o=d[0],a=d[1],{startNode:i,startOffset:o,endNode:i,endOffset:a}}}}},{key:"update",value:function(t,e){var n=this;if(t.some((function(t){return"characterData"===t.type&&t.target===n.textNode}))){var i=this.restore();i&&(e.range=i)}}},{key:"value",value:function(){return""}}]),e}(s.default.Embed);c.blotName="cursor",c.className="ql-cursor",c.tagName="span",c.CONTENTS="\ufeff",e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(){function t(e,n){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.quill=e,this.options=n,this.modules={}}return i(t,[{key:"init",value:function(){var t=this;Object.keys(this.options.modules).forEach((function(e){null==t.modules[e]&&t.addModule(e)}))}},{key:"addModule",value:function(t){var e=this.quill.constructor.import("modules/"+t);return this.modules[t]=new e(this.quill,this.options.modules[t]||{}),this.modules[t]}}]),t}();r.DEFAULTS={modules:{}},r.themes={default:r},e.default=r},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),o=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},a=i(n(0)),s=i(n(8)),l="\ufeff",c=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.contentNode=document.createElement("span"),n.contentNode.setAttribute("contenteditable",!1),[].slice.call(n.domNode.childNodes).forEach((function(t){n.contentNode.appendChild(t)})),n.leftGuard=document.createTextNode(l),n.rightGuard=document.createTextNode(l),n.domNode.appendChild(n.leftGuard),n.domNode.appendChild(n.contentNode),n.domNode.appendChild(n.rightGuard),n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),r(e,[{key:"index",value:function(t,n){return t===this.leftGuard?0:t===this.rightGuard?1:o(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"index",this).call(this,t,n)}},{key:"restore",value:function(t){var e=void 0,n=void 0,i=t.data.split(l).join("");if(t===this.leftGuard)if(this.prev instanceof s.default){var r=this.prev.length();this.prev.insertAt(r,i),e={startNode:this.prev.domNode,startOffset:r+i.length}}else n=document.createTextNode(i),this.parent.insertBefore(a.default.create(n),this),e={startNode:n,startOffset:i.length};else t===this.rightGuard&&(this.next instanceof s.default?(this.next.insertAt(0,i),e={startNode:this.next.domNode,startOffset:i.length}):(n=document.createTextNode(i),this.parent.insertBefore(a.default.create(n),this.next),e={startNode:n,startOffset:i.length}));return t.data=l,e}},{key:"update",value:function(t,e){var n=this;t.forEach((function(t){if("characterData"===t.type&&(t.target===n.leftGuard||t.target===n.rightGuard)){var i=n.restore(t.target);i&&(e.range=i)}}))}}]),e}(a.default.Embed);e.default=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.AlignStyle=e.AlignClass=e.AlignAttribute=void 0;var i=function(t){return t&&t.__esModule?t:{default:t}}(n(0)),r={scope:i.default.Scope.BLOCK,whitelist:["right","center","justify"]},o=new i.default.Attributor.Attribute("align","align",r),a=new i.default.Attributor.Class("align","ql-align",r),s=new i.default.Attributor.Style("align","text-align",r);e.AlignAttribute=o,e.AlignClass=a,e.AlignStyle=s},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.BackgroundStyle=e.BackgroundClass=void 0;var i=function(t){return t&&t.__esModule?t:{default:t}}(n(0)),r=n(24),o=new i.default.Attributor.Class("background","ql-bg",{scope:i.default.Scope.INLINE}),a=new r.ColorAttributor("background","background-color",{scope:i.default.Scope.INLINE});e.BackgroundClass=o,e.BackgroundStyle=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DirectionStyle=e.DirectionClass=e.DirectionAttribute=void 0;var i=function(t){return t&&t.__esModule?t:{default:t}}(n(0)),r={scope:i.default.Scope.BLOCK,whitelist:["rtl"]},o=new i.default.Attributor.Attribute("direction","dir",r),a=new i.default.Attributor.Class("direction","ql-direction",r),s=new i.default.Attributor.Style("direction","direction",r);e.DirectionAttribute=o,e.DirectionClass=a,e.DirectionStyle=s},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}Object.defineProperty(e,"__esModule",{value:!0}),e.FontClass=e.FontStyle=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},s=function(t){return t&&t.__esModule?t:{default:t}}(n(0)),l={scope:s.default.Scope.INLINE,whitelist:["serif","monospace"]},c=new s.default.Attributor.Class("font","ql-font",l),u=function(t){function e(){return i(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),o(e,[{key:"value",value:function(t){return a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"value",this).call(this,t).replace(/["']/g,"")}}]),e}(s.default.Attributor.Style),h=new u("font","font-family",l);e.FontStyle=h,e.FontClass=c},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.SizeStyle=e.SizeClass=void 0;var i=function(t){return t&&t.__esModule?t:{default:t}}(n(0)),r=new i.default.Attributor.Class("size","ql-size",{scope:i.default.Scope.INLINE,whitelist:["small","large","huge"]}),o=new i.default.Attributor.Style("size","font-size",{scope:i.default.Scope.INLINE,whitelist:["10px","18px","32px"]});e.SizeClass=r,e.SizeStyle=o},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},s=function(t){return t&&t.__esModule?t:{default:t}}(n(5)),l=function(t){function e(){return i(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),o(e,[{key:"optimize",value:function(t){a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"optimize",this).call(this,t),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return a(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this)}},{key:"formats",value:function(){return!0}}]),e}(s.default);l.blotName="bold",l.tagName=["STRONG","B"],e.default=l},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"></polyline> <polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"></polyline> <line class=ql-stroke x1=10 x2=8 y1=5 y2=13></line> </svg>'},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},o=function(t){return t&&t.__esModule?t:{default:t}}(n(16)),a=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.label.innerHTML=n,i.container.classList.add("ql-color-picker"),[].slice.call(i.container.querySelectorAll(".ql-picker-item"),0,7).forEach((function(t){t.classList.add("ql-primary")})),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"buildItem",value:function(t){var n=r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"buildItem",this).call(this,t);return n.style.backgroundColor=t.getAttribute("value")||"",n}},{key:"selectItem",value:function(t,n){r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"selectItem",this).call(this,t,n);var i=this.label.querySelector(".ql-color-label"),o=t&&t.getAttribute("data-value")||"";i&&("line"===i.tagName?i.style.stroke=o:i.style.fill=o)}}]),e}(o.default);e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},o=function(t){return t&&t.__esModule?t:{default:t}}(n(16)),a=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.container.classList.add("ql-icon-picker"),[].forEach.call(i.container.querySelectorAll(".ql-picker-item"),(function(t){t.innerHTML=n[t.getAttribute("data-value")||""]})),i.defaultItem=i.container.querySelector(".ql-selected"),i.selectItem(i.defaultItem),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),i(e,[{key:"selectItem",value:function(t,n){r(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"selectItem",this).call(this,t,n),t=t||this.defaultItem,this.label.innerHTML=t.innerHTML}}]),e}(o.default);e.default=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(){function t(e,n){var i=this;(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.quill=e,this.boundsContainer=n||document.body,this.root=e.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,this.quill.root===this.quill.scrollingContainer&&this.quill.root.addEventListener("scroll",(function(){i.root.style.marginTop=-1*i.quill.root.scrollTop+"px"})),this.hide()}return i(t,[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(t){var e=t.left+t.width/2-this.root.offsetWidth/2,n=t.bottom+this.quill.root.scrollTop;this.root.style.left=e+"px",this.root.style.top=n+"px",this.root.classList.remove("ql-flip");var i=this.boundsContainer.getBoundingClientRect(),r=this.root.getBoundingClientRect(),o=0;if(r.right>i.right&&(o=i.right-r.right,this.root.style.left=e+o+"px"),r.left<i.left&&(o=i.left-r.left,this.root.style.left=e+o+"px"),r.bottom>i.bottom){var a=r.bottom-r.top,s=t.bottom-t.top+a;this.root.style.top=n-s+"px",this.root.classList.add("ql-flip")}return o}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}]),t}();e.default=r},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function s(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.forEach((function(e){var i=document.createElement("option");e===n?i.setAttribute("selected","selected"):i.setAttribute("value",e),t.appendChild(i)}))}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.BaseTooltip=void 0;var l=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),c=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},u=i(n(2)),h=i(n(4)),d=i(n(9)),p=i(n(25)),f=i(n(32)),g=i(n(41)),m=i(n(42)),v=i(n(16)),y=i(n(43)),b=[!1,"center","right","justify"],x=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],_=[!1,"serif","monospace"],w=["1","2","3",!1],S=["small",!1,"large","huge"],C=function(t){function e(t,n){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return t.emitter.listenDOM("click",document.body,(function e(n){if(!document.body.contains(t.root))return document.body.removeEventListener("click",e);null==i.tooltip||i.tooltip.root.contains(n.target)||document.activeElement===i.tooltip.textbox||i.quill.hasFocus()||i.tooltip.hide(),null!=i.pickers&&i.pickers.forEach((function(t){t.container.contains(n.target)||t.close()}))})),i}return a(e,t),l(e,[{key:"addModule",value:function(t){var n=c(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"addModule",this).call(this,t);return"toolbar"===t&&this.extendToolbar(n),n}},{key:"buildButtons",value:function(t,e){t.forEach((function(t){(t.getAttribute("class")||"").split(/\s+/).forEach((function(n){if(n.startsWith("ql-")&&(n=n.slice("ql-".length),null!=e[n]))if("direction"===n)t.innerHTML=e[n][""]+e[n].rtl;else if("string"==typeof e[n])t.innerHTML=e[n];else{var i=t.value||"";null!=i&&e[n][i]&&(t.innerHTML=e[n][i])}}))}))}},{key:"buildPickers",value:function(t,e){var n=this;this.pickers=t.map((function(t){if(t.classList.contains("ql-align"))return null==t.querySelector("option")&&s(t,b),new m.default(t,e.align);if(t.classList.contains("ql-background")||t.classList.contains("ql-color")){var n=t.classList.contains("ql-background")?"background":"color";return null==t.querySelector("option")&&s(t,x,"background"===n?"#ffffff":"#000000"),new g.default(t,e[n])}return null==t.querySelector("option")&&(t.classList.contains("ql-font")?s(t,_):t.classList.contains("ql-header")?s(t,w):t.classList.contains("ql-size")&&s(t,S)),new v.default(t)}));this.quill.on(d.default.events.EDITOR_CHANGE,(function(){n.pickers.forEach((function(t){t.update()}))}))}}]),e}(f.default);C.DEFAULTS=(0,u.default)(!0,{},f.default.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var t=this,e=this.container.querySelector("input.ql-image[type=file]");null==e&&((e=document.createElement("input")).setAttribute("type","file"),e.setAttribute("accept","image/png, image/gif, image/jpeg, image/bmp, image/x-icon"),e.classList.add("ql-image"),e.addEventListener("change",(function(){if(null!=e.files&&null!=e.files[0]){var n=new FileReader;n.onload=function(n){var i=t.quill.getSelection(!0);t.quill.updateContents((new h.default).retain(i.index).delete(i.length).insert({image:n.target.result}),d.default.sources.USER),t.quill.setSelection(i.index+1,d.default.sources.SILENT),e.value=""},n.readAsDataURL(e.files[0])}})),this.container.appendChild(e)),e.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var k=function(t){function e(t,n){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return i.textbox=i.root.querySelector('input[type="text"]'),i.listen(),i}return a(e,t),l(e,[{key:"listen",value:function(){var t=this;this.textbox.addEventListener("keydown",(function(e){p.default.match(e,"enter")?(t.save(),e.preventDefault()):p.default.match(e,"escape")&&(t.cancel(),e.preventDefault())}))}},{key:"cancel",value:function(){this.hide()}},{key:"edit",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"link",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),null!=e?this.textbox.value=e:t!==this.root.getAttribute("data-mode")&&(this.textbox.value=""),this.position(this.quill.getBounds(this.quill.selection.savedRange)),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-"+t)||""),this.root.setAttribute("data-mode",t)}},{key:"restoreFocus",value:function(){var t=this.quill.scrollingContainer.scrollTop;this.quill.focus(),this.quill.scrollingContainer.scrollTop=t}},{key:"save",value:function(){var t=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":var e=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",t,d.default.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",t,d.default.sources.USER)),this.quill.root.scrollTop=e;break;case"video":t=function(t){var e=t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);return e?(e[1]||"https")+"://www.youtube.com/embed/"+e[2]+"?showinfo=0":(e=t.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))?(e[1]||"https")+"://player.vimeo.com/video/"+e[2]+"/":t}(t);case"formula":if(!t)break;var n=this.quill.getSelection(!0);if(null!=n){var i=n.index+n.length;this.quill.insertEmbed(i,this.root.getAttribute("data-mode"),t,d.default.sources.USER),"formula"===this.root.getAttribute("data-mode")&&this.quill.insertText(i+1," ",d.default.sources.USER),this.quill.setSelection(i+2,d.default.sources.USER)}}this.textbox.value="",this.hide()}}]),e}(y.default);e.BaseTooltip=k,e.default=C},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(n(46)),o=n(34),a=n(36),s=n(62),l=i(n(63)),c=i(n(64)),u=n(65),h=i(u),d=n(35),p=n(24),f=n(37),g=n(38),m=i(n(39)),v=i(n(66)),y=i(n(15)),b=i(n(67)),x=i(n(68)),_=i(n(69)),w=i(n(70)),S=i(n(71)),C=n(13),k=i(C),A=i(n(72)),M=i(n(73)),T=i(n(74)),I=i(n(26)),E=i(n(16)),O=i(n(41)),D=i(n(42)),L=i(n(43)),P=i(n(107)),N=i(n(108));r.default.register({"attributors/attribute/direction":a.DirectionAttribute,"attributors/class/align":o.AlignClass,"attributors/class/background":d.BackgroundClass,"attributors/class/color":p.ColorClass,"attributors/class/direction":a.DirectionClass,"attributors/class/font":f.FontClass,"attributors/class/size":g.SizeClass,"attributors/style/align":o.AlignStyle,"attributors/style/background":d.BackgroundStyle,"attributors/style/color":p.ColorStyle,"attributors/style/direction":a.DirectionStyle,"attributors/style/font":f.FontStyle,"attributors/style/size":g.SizeStyle},!0),r.default.register({"formats/align":o.AlignClass,"formats/direction":a.DirectionClass,"formats/indent":s.IndentClass,"formats/background":d.BackgroundStyle,"formats/color":p.ColorStyle,"formats/font":f.FontClass,"formats/size":g.SizeClass,"formats/blockquote":l.default,"formats/code-block":k.default,"formats/header":c.default,"formats/list":h.default,"formats/bold":m.default,"formats/code":C.Code,"formats/italic":v.default,"formats/link":y.default,"formats/script":b.default,"formats/strike":x.default,"formats/underline":_.default,"formats/image":w.default,"formats/video":S.default,"formats/list/item":u.ListItem,"modules/formula":A.default,"modules/syntax":M.default,"modules/toolbar":T.default,"themes/bubble":P.default,"themes/snow":N.default,"ui/icons":I.default,"ui/picker":E.default,"ui/icon-picker":D.default,"ui/color-picker":O.default,"ui/tooltip":L.default},!0),e.default=r.default},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}Object.defineProperty(e,"__esModule",{value:!0});var r=i(n(0)),o=i(n(6)),a=n(3),s=i(a),l=i(n(14)),c=i(n(23)),u=i(n(31)),h=i(n(33)),d=i(n(5)),p=i(n(59)),f=i(n(8)),g=i(n(60)),m=i(n(61)),v=i(n(25));o.default.register({"blots/block":s.default,"blots/block/embed":a.BlockEmbed,"blots/break":l.default,"blots/container":c.default,"blots/cursor":u.default,"blots/embed":h.default,"blots/inline":d.default,"blots/scroll":p.default,"blots/text":f.default,"modules/clipboard":g.default,"modules/history":m.default,"modules/keyboard":v.default}),r.default.register(s.default,l.default,u.default,d.default,p.default,f.default),e.default=o.default},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=function(){function t(){this.head=this.tail=null,this.length=0}return t.prototype.append=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this.insertBefore(t[0],null),t.length>1&&this.append.apply(this,t.slice(1))},t.prototype.contains=function(t){for(var e,n=this.iterator();e=n();)if(e===t)return!0;return!1},t.prototype.insertBefore=function(t,e){t&&(t.next=e,null!=e?(t.prev=e.prev,null!=e.prev&&(e.prev.next=t),e.prev=t,e===this.head&&(this.head=t)):null!=this.tail?(this.tail.next=t,t.prev=this.tail,this.tail=t):(t.prev=null,this.head=this.tail=t),this.length+=1)},t.prototype.offset=function(t){for(var e=0,n=this.head;null!=n;){if(n===t)return e;e+=n.length(),n=n.next}return-1},t.prototype.remove=function(t){this.contains(t)&&(null!=t.prev&&(t.prev.next=t.next),null!=t.next&&(t.next.prev=t.prev),t===this.head&&(this.head=t.next),t===this.tail&&(this.tail=t.prev),this.length-=1)},t.prototype.iterator=function(t){return void 0===t&&(t=this.head),function(){var e=t;return null!=t&&(t=t.next),e}},t.prototype.find=function(t,e){void 0===e&&(e=!1);for(var n,i=this.iterator();n=i();){var r=n.length();if(t<r||e&&t===r&&(null==n.next||0!==n.next.length()))return[n,t];t-=r}return[null,0]},t.prototype.forEach=function(t){for(var e,n=this.iterator();e=n();)t(e)},t.prototype.forEachAt=function(t,e,n){if(!(e<=0))for(var i,r=this.find(t),o=r[0],a=t-r[1],s=this.iterator(o);(i=s())&&a<t+e;){var l=i.length();t>a?n(i,t-a,Math.min(e,a+l-t)):n(i,0,Math.min(l,t+e-a)),a+=l}},t.prototype.map=function(t){return this.reduce((function(e,n){return e.push(t(n)),e}),[])},t.prototype.reduce=function(t,e){for(var n,i=this.iterator();n=i();)e=t(e,n);return e},t}();e.default=i},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(17),o=n(1),a={attributes:!0,characterData:!0,characterDataOldValue:!0,childList:!0,subtree:!0},s=function(t){function e(e){var n=t.call(this,e)||this;return n.scroll=n,n.observer=new MutationObserver((function(t){n.update(t)})),n.observer.observe(n.domNode,a),n.attach(),n}return i(e,t),e.prototype.detach=function(){t.prototype.detach.call(this),this.observer.disconnect()},e.prototype.deleteAt=function(e,n){this.update(),0===e&&n===this.length()?this.children.forEach((function(t){t.remove()})):t.prototype.deleteAt.call(this,e,n)},e.prototype.formatAt=function(e,n,i,r){this.update(),t.prototype.formatAt.call(this,e,n,i,r)},e.prototype.insertAt=function(e,n,i){this.update(),t.prototype.insertAt.call(this,e,n,i)},e.prototype.optimize=function(e,n){var i=this;void 0===e&&(e=[]),void 0===n&&(n={}),t.prototype.optimize.call(this,n);for(var a=[].slice.call(this.observer.takeRecords());a.length>0;)e.push(a.pop());for(var s=function(t,e){void 0===e&&(e=!0),null!=t&&t!==i&&null!=t.domNode.parentNode&&(null==t.domNode[o.DATA_KEY].mutations&&(t.domNode[o.DATA_KEY].mutations=[]),e&&s(t.parent))},l=function(t){null!=t.domNode[o.DATA_KEY]&&null!=t.domNode[o.DATA_KEY].mutations&&(t instanceof r.default&&t.children.forEach(l),t.optimize(n))},c=e,u=0;c.length>0;u+=1){if(u>=100)throw new Error("[Parchment] Maximum optimize iterations reached");for(c.forEach((function(t){var e=o.find(t.target,!0);null!=e&&(e.domNode===t.target&&("childList"===t.type?(s(o.find(t.previousSibling,!1)),[].forEach.call(t.addedNodes,(function(t){var e=o.find(t,!1);s(e,!1),e instanceof r.default&&e.children.forEach((function(t){s(t,!1)}))}))):"attributes"===t.type&&s(e.prev)),s(e))})),this.children.forEach(l),a=(c=[].slice.call(this.observer.takeRecords())).slice();a.length>0;)e.push(a.pop())}},e.prototype.update=function(e,n){var i=this;void 0===n&&(n={}),(e=e||this.observer.takeRecords()).map((function(t){var e=o.find(t.target,!0);return null==e?null:null==e.domNode[o.DATA_KEY].mutations?(e.domNode[o.DATA_KEY].mutations=[t],e):(e.domNode[o.DATA_KEY].mutations.push(t),null)})).forEach((function(t){null!=t&&t!==i&&null!=t.domNode[o.DATA_KEY]&&t.update(t.domNode[o.DATA_KEY].mutations||[],n)})),null!=this.domNode[o.DATA_KEY].mutations&&t.prototype.update.call(this,this.domNode[o.DATA_KEY].mutations,n),this.optimize(e,n)},e.blotName="scroll",e.defaultChild="block",e.scope=o.Scope.BLOCK_BLOT,e.tagName="DIV",e}(r.default);e.default=s},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(18),o=n(1),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.formats=function(n){if(n.tagName!==e.tagName)return t.formats.call(this,n)},e.prototype.format=function(n,i){var o=this;n!==this.statics.blotName||i?t.prototype.format.call(this,n,i):(this.children.forEach((function(t){t instanceof r.default||(t=t.wrap(e.blotName,!0)),o.attributes.copy(t)})),this.unwrap())},e.prototype.formatAt=function(e,n,i,r){null!=this.formats()[i]||o.query(i,o.Scope.ATTRIBUTE)?this.isolate(e,n).format(i,r):t.prototype.formatAt.call(this,e,n,i,r)},e.prototype.optimize=function(n){t.prototype.optimize.call(this,n);var i=this.formats();if(0===Object.keys(i).length)return this.unwrap();var r=this.next;r instanceof e&&r.prev===this&&function(t,e){if(Object.keys(t).length!==Object.keys(e).length)return!1;for(var n in t)if(t[n]!==e[n])return!1;return!0}(i,r.formats())&&(r.moveChildren(this),r.remove())},e.blotName="inline",e.scope=o.Scope.INLINE_BLOT,e.tagName="SPAN",e}(r.default);e.default=a},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(18),o=n(1),a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.formats=function(n){var i=o.query(e.blotName).tagName;if(n.tagName!==i)return t.formats.call(this,n)},e.prototype.format=function(n,i){null!=o.query(n,o.Scope.BLOCK)&&(n!==this.statics.blotName||i?t.prototype.format.call(this,n,i):this.replaceWith(e.blotName))},e.prototype.formatAt=function(e,n,i,r){null!=o.query(i,o.Scope.BLOCK)?this.format(i,r):t.prototype.formatAt.call(this,e,n,i,r)},e.prototype.insertAt=function(e,n,i){if(null==i||null!=o.query(n,o.Scope.INLINE))t.prototype.insertAt.call(this,e,n,i);else{var r=this.split(e),a=o.create(n,i);r.parent.insertBefore(a,r)}},e.prototype.update=function(e,n){navigator.userAgent.match(/Trident/)?this.build():t.prototype.update.call(this,e,n)},e.blotName="block",e.scope=o.Scope.BLOCK_BLOT,e.tagName="P",e}(r.default);e.default=a},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return i(e,t),e.formats=function(t){},e.prototype.format=function(e,n){t.prototype.formatAt.call(this,0,this.length(),e,n)},e.prototype.formatAt=function(e,n,i,r){0===e&&n===this.length()?this.format(i,r):t.prototype.formatAt.call(this,e,n,i,r)},e.prototype.formats=function(){return this.statics.formats(this.domNode)},e}(n(19).default);e.default=r},function(t,e,n){"use strict";var i=this&&this.__extends||function(){var t=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])};return function(e,n){function i(){this.constructor=e}t(e,n),e.prototype=null===n?Object.create(n):(i.prototype=n.prototype,new i)}}();Object.defineProperty(e,"__esModule",{value:!0});var r=n(19),o=n(1),a=function(t){function e(e){var n=t.call(this,e)||this;return n.text=n.statics.value(n.domNode),n}return i(e,t),e.create=function(t){return document.createTextNode(t)},e.value=function(t){var e=t.data;return e.normalize&&(e=e.normalize()),e},e.prototype.deleteAt=function(t,e){this.domNode.data=this.text=this.text.slice(0,t)+this.text.slice(t+e)},e.prototype.index=function(t,e){return this.domNode===t?e:-1},e.prototype.insertAt=function(e,n,i){null==i?(this.text=this.text.slice(0,e)+n+this.text.slice(e),this.domNode.data=this.text):t.prototype.insertAt.call(this,e,n,i)},e.prototype.length=function(){return this.text.length},e.prototype.optimize=function(n){t.prototype.optimize.call(this,n),this.text=this.statics.value(this.domNode),0===this.text.length?this.remove():this.next instanceof e&&this.next.prev===this&&(this.insertAt(this.length(),this.next.value()),this.next.remove())},e.prototype.position=function(t,e){return void 0===e&&(e=!1),[this.domNode,t]},e.prototype.split=function(t,e){if(void 0===e&&(e=!1),!e){if(0===t)return this;if(t===this.length())return this.next}var n=o.create(this.domNode.splitText(t));return this.parent.insertBefore(n,this.next),this.text=this.statics.value(this.domNode),n},e.prototype.update=function(t,e){var n=this;t.some((function(t){return"characterData"===t.type&&t.target===n.domNode}))&&(this.text=this.statics.value(this.domNode))},e.prototype.value=function(){return this.text},e.blotName="text",e.scope=o.Scope.INLINE_BLOT,e}(r.default);e.default=a},function(t,e,n){"use strict";var i=document.createElement("div");if(i.classList.toggle("test-class",!1),i.classList.contains("test-class")){var r=DOMTokenList.prototype.toggle;DOMTokenList.prototype.toggle=function(t,e){return arguments.length>1&&!this.contains(t)==!e?e:r.call(this,t)}}String.prototype.startsWith||(String.prototype.startsWith=function(t,e){return e=e||0,this.substr(e,t.length)===t}),String.prototype.endsWith||(String.prototype.endsWith=function(t,e){var n=this.toString();("number"!=typeof e||!isFinite(e)||Math.floor(e)!==e||e>n.length)&&(e=n.length),e-=t.length;var i=n.indexOf(t,e);return-1!==i&&i===e}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(t){if(null===this)throw new TypeError("Array.prototype.find called on null or undefined");if("function"!=typeof t)throw new TypeError("predicate must be a function");for(var e,n=Object(this),i=n.length>>>0,r=arguments[1],o=0;o<i;o++)if(e=n[o],t.call(r,e,o,n))return e}}),document.addEventListener("DOMContentLoaded",(function(){document.execCommand("enableObjectResizing",!1,!1),document.execCommand("autoUrlDetect",!1,!1)}))},function(t,e){function n(t,e,n){if(t==e)return t?[[f,t]]:[];(n<0||t.length<n)&&(n=null);var r=a(t,e),o=t.substring(0,r);r=s(t=t.substring(r),e=e.substring(r));var l=t.substring(t.length-r),h=i(t=t.substring(0,t.length-r),e=e.substring(0,e.length-r));return o&&h.unshift([f,o]),l&&h.push([f,l]),c(h),null!=n&&(h=u(h,n)),function(t){for(var e=!1,n=function(t){return t.charCodeAt(0)>=56320&&t.charCodeAt(0)<=57343},i=2;i<t.length;i+=1)t[i-2][0]===f&&function(t){return t.charCodeAt(t.length-1)>=55296&&t.charCodeAt(t.length-1)<=56319}(t[i-2][1])&&t[i-1][0]===d&&n(t[i-1][1])&&t[i][0]===p&&n(t[i][1])&&(e=!0,t[i-1][1]=t[i-2][1].slice(-1)+t[i-1][1],t[i][1]=t[i-2][1].slice(-1)+t[i][1],t[i-2][1]=t[i-2][1].slice(0,-1));if(!e)return t;var r=[];for(i=0;i<t.length;i+=1)t[i][1].length>0&&r.push(t[i]);return r}(h)}function i(t,e){var i;if(!t)return[[p,e]];if(!e)return[[d,t]];var o=t.length>e.length?t:e,a=t.length>e.length?e:t,s=o.indexOf(a);if(-1!=s)return i=[[p,o.substring(0,s)],[f,a],[p,o.substring(s+a.length)]],t.length>e.length&&(i[0][0]=i[2][0]=d),i;if(1==a.length)return[[d,t],[p,e]];var c=l(t,e);if(c){var u=c[0],h=c[1],g=c[2],m=c[3],v=c[4],y=n(u,g),b=n(h,m);return y.concat([[f,v]],b)}return r(t,e)}function r(t,e){for(var n=t.length,i=e.length,r=Math.ceil((n+i)/2),a=r,s=2*r,l=new Array(s),c=new Array(s),u=0;u<s;u++)l[u]=-1,c[u]=-1;l[a+1]=0,c[a+1]=0;for(var h=n-i,f=h%2!=0,g=0,m=0,v=0,y=0,b=0;b<r;b++){for(var x=-b+g;x<=b-m;x+=2){for(var _=a+x,w=(M=x==-b||x!=b&&l[_-1]<l[_+1]?l[_+1]:l[_-1]+1)-x;M<n&&w<i&&t.charAt(M)==e.charAt(w);)M++,w++;if(l[_]=M,M>n)m+=2;else if(w>i)g+=2;else if(f){if((k=a+h-x)>=0&&k<s&&-1!=c[k])if(M>=(C=n-c[k]))return o(t,e,M,w)}}for(var S=-b+v;S<=b-y;S+=2){for(var C,k=a+S,A=(C=S==-b||S!=b&&c[k-1]<c[k+1]?c[k+1]:c[k-1]+1)-S;C<n&&A<i&&t.charAt(n-C-1)==e.charAt(i-A-1);)C++,A++;if(c[k]=C,C>n)y+=2;else if(A>i)v+=2;else if(!f){if((_=a+h-S)>=0&&_<s&&-1!=l[_]){var M;w=a+(M=l[_])-_;if(M>=(C=n-C))return o(t,e,M,w)}}}}return[[d,t],[p,e]]}function o(t,e,i,r){var o=t.substring(0,i),a=e.substring(0,r),s=t.substring(i),l=e.substring(r),c=n(o,a),u=n(s,l);return c.concat(u)}function a(t,e){if(!t||!e||t.charAt(0)!=e.charAt(0))return 0;for(var n=0,i=Math.min(t.length,e.length),r=i,o=0;n<r;)t.substring(o,r)==e.substring(o,r)?o=n=r:i=r,r=Math.floor((i-n)/2+n);return r}function s(t,e){if(!t||!e||t.charAt(t.length-1)!=e.charAt(e.length-1))return 0;for(var n=0,i=Math.min(t.length,e.length),r=i,o=0;n<r;)t.substring(t.length-r,t.length-o)==e.substring(e.length-r,e.length-o)?o=n=r:i=r,r=Math.floor((i-n)/2+n);return r}function l(t,e){function n(t,e,n){for(var i,r,o,l,c=t.substring(n,n+Math.floor(t.length/4)),u=-1,h="";-1!=(u=e.indexOf(c,u+1));){var d=a(t.substring(n),e.substring(u)),p=s(t.substring(0,n),e.substring(0,u));h.length<p+d&&(h=e.substring(u-p,u)+e.substring(u,u+d),i=t.substring(0,n-p),r=t.substring(n+d),o=e.substring(0,u-p),l=e.substring(u+d))}return 2*h.length>=t.length?[i,r,o,l,h]:null}var i=t.length>e.length?t:e,r=t.length>e.length?e:t;if(i.length<4||2*r.length<i.length)return null;var o,l,c,u,h,d=n(i,r,Math.ceil(i.length/4)),p=n(i,r,Math.ceil(i.length/2));return d||p?(o=p?d&&d[4].length>p[4].length?d:p:d,t.length>e.length?(l=o[0],c=o[1],u=o[2],h=o[3]):(u=o[0],h=o[1],l=o[2],c=o[3]),[l,c,u,h,o[4]]):null}function c(t){t.push([f,""]);for(var e,n=0,i=0,r=0,o="",l="";n<t.length;)switch(t[n][0]){case p:r++,l+=t[n][1],n++;break;case d:i++,o+=t[n][1],n++;break;case f:i+r>1?(0!==i&&0!==r&&(0!==(e=a(l,o))&&(n-i-r>0&&t[n-i-r-1][0]==f?t[n-i-r-1][1]+=l.substring(0,e):(t.splice(0,0,[f,l.substring(0,e)]),n++),l=l.substring(e),o=o.substring(e)),0!==(e=s(l,o))&&(t[n][1]=l.substring(l.length-e)+t[n][1],l=l.substring(0,l.length-e),o=o.substring(0,o.length-e))),0===i?t.splice(n-r,i+r,[p,l]):0===r?t.splice(n-i,i+r,[d,o]):t.splice(n-i-r,i+r,[d,o],[p,l]),n=n-i-r+(i?1:0)+(r?1:0)+1):0!==n&&t[n-1][0]==f?(t[n-1][1]+=t[n][1],t.splice(n,1)):n++,r=0,i=0,o="",l=""}""===t[t.length-1][1]&&t.pop();var u=!1;for(n=1;n<t.length-1;)t[n-1][0]==f&&t[n+1][0]==f&&(t[n][1].substring(t[n][1].length-t[n-1][1].length)==t[n-1][1]?(t[n][1]=t[n-1][1]+t[n][1].substring(0,t[n][1].length-t[n-1][1].length),t[n+1][1]=t[n-1][1]+t[n+1][1],t.splice(n-1,1),u=!0):t[n][1].substring(0,t[n+1][1].length)==t[n+1][1]&&(t[n-1][1]+=t[n+1][1],t[n][1]=t[n][1].substring(t[n+1][1].length)+t[n+1][1],t.splice(n+1,1),u=!0)),n++;u&&c(t)}function u(t,e){var n=function(t,e){if(0===e)return[f,t];for(var n=0,i=0;i<t.length;i++){var r=t[i];if(r[0]===d||r[0]===f){var o=n+r[1].length;if(e===o)return[i+1,t];if(e<o){t=t.slice();var a=e-n,s=[r[0],r[1].slice(0,a)],l=[r[0],r[1].slice(a)];return t.splice(i,1,s,l),[i+1,t]}n=o}}throw new Error("cursor_pos is out of bounds!")}(t,e),i=n[1],r=n[0],o=i[r],a=i[r+1];if(null==o)return t;if(o[0]!==f)return t;if(null!=a&&o[1]+a[1]===a[1]+o[1])return i.splice(r,2,a,o),h(i,r,2);if(null!=a&&0===a[1].indexOf(o[1])){i.splice(r,2,[a[0],o[1]],[0,o[1]]);var s=a[1].slice(o[1].length);return s.length>0&&i.splice(r+2,0,[a[0],s]),h(i,r,3)}return t}function h(t,e,n){for(var i=e+n-1;i>=0&&i>=e-1;i--)if(i+1<t.length){var r=t[i],o=t[i+1];r[0]===o[1]&&t.splice(i,2,[r[0],r[1]+o[1]])}return t}var d=-1,p=1,f=0,g=n;g.INSERT=p,g.DELETE=d,g.EQUAL=f,t.exports=g},function(t,e){function n(t){var e=[];for(var n in t)e.push(n);return e}(t.exports="function"==typeof Object.keys?Object.keys:n).shim=n},function(t,e){function n(t){return"[object Arguments]"==Object.prototype.toString.call(t)}function i(t){return t&&"object"==typeof t&&"number"==typeof t.length&&Object.prototype.hasOwnProperty.call(t,"callee")&&!Object.prototype.propertyIsEnumerable.call(t,"callee")||!1}var r="[object Arguments]"==function(){return Object.prototype.toString.call(arguments)}();(e=t.exports=r?n:i).supported=n,e.unsupported=i},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){return Object.keys(e).reduce((function(n,i){return null==t[i]||(e[i]===t[i]?n[i]=e[i]:Array.isArray(e[i])?e[i].indexOf(t[i])<0&&(n[i]=e[i].concat([t[i]])):n[i]=[e[i],t[i]]),n}),{})}Object.defineProperty(e,"__esModule",{value:!0});var o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},a=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=i(n(4)),c=i(n(20)),u=i(n(0)),h=i(n(13)),d=i(n(31)),p=n(3),f=i(p),g=i(n(14)),m=i(n(21)),v=i(n(12)),y=i(n(2)),b=/^[ -~]*$/,x=function(){function t(e){(function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")})(this,t),this.scroll=e,this.delta=this.getDelta()}return s(t,[{key:"applyDelta",value:function(t){var e=this,n=!1;this.scroll.update();var i=this.scroll.length();return this.scroll.batchStart(),t=function(t){return t.reduce((function(t,e){if(1===e.insert){var n=(0,m.default)(e.attributes);return delete n.image,t.insert({image:e.attributes.image},n)}if(null==e.attributes||!0!==e.attributes.list&&!0!==e.attributes.bullet||((e=(0,m.default)(e)).attributes.list?e.attributes.list="ordered":(e.attributes.list="bullet",delete e.attributes.bullet)),"string"==typeof e.insert){var i=e.insert.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return t.insert(i,e.attributes)}return t.push(e)}),new l.default)}(t),t.reduce((function(t,r){var s=r.retain||r.delete||r.insert.length||1,l=r.attributes||{};if(null!=r.insert){if("string"==typeof r.insert){var h=r.insert;h.endsWith("\n")&&n&&(n=!1,h=h.slice(0,-1)),t>=i&&!h.endsWith("\n")&&(n=!0),e.scroll.insertAt(t,h);var d=e.scroll.line(t),g=a(d,2),m=g[0],v=g[1],b=(0,y.default)({},(0,p.bubbleFormats)(m));if(m instanceof f.default){var x=m.descendant(u.default.Leaf,v),_=a(x,1)[0];b=(0,y.default)(b,(0,p.bubbleFormats)(_))}l=c.default.attributes.diff(b,l)||{}}else if("object"===o(r.insert)){var w=Object.keys(r.insert)[0];if(null==w)return t;e.scroll.insertAt(t,w,r.insert[w])}i+=s}return Object.keys(l).forEach((function(n){e.scroll.formatAt(t,s,n,l[n])})),t+s}),0),t.reduce((function(t,n){return"number"==typeof n.delete?(e.scroll.deleteAt(t,n.delete),t):t+(n.retain||n.insert.length||1)}),0),this.scroll.batchEnd(),this.update(t)}},{key:"deleteText",value:function(t,e){return this.scroll.deleteAt(t,e),this.update((new l.default).retain(t).delete(e))}},{key:"formatLine",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return this.scroll.update(),Object.keys(i).forEach((function(r){if(null==n.scroll.whitelist||n.scroll.whitelist[r]){var o=n.scroll.lines(t,Math.max(e,1)),a=e;o.forEach((function(e){var o=e.length();if(e instanceof h.default){var s=t-e.offset(n.scroll),l=e.newlineIndex(s+a)-s+1;e.formatAt(s,l,r,i[r])}else e.format(r,i[r]);a-=o}))}})),this.scroll.optimize(),this.update((new l.default).retain(t).retain(e,(0,m.default)(i)))}},{key:"formatText",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return Object.keys(i).forEach((function(r){n.scroll.formatAt(t,e,r,i[r])})),this.update((new l.default).retain(t).retain(e,(0,m.default)(i)))}},{key:"getContents",value:function(t,e){return this.delta.slice(t,t+e)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce((function(t,e){return t.concat(e.delta())}),new l.default)}},{key:"getFormat",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[],i=[];0===e?this.scroll.path(t).forEach((function(t){var e=a(t,1)[0];e instanceof f.default?n.push(e):e instanceof u.default.Leaf&&i.push(e)})):(n=this.scroll.lines(t,e),i=this.scroll.descendants(u.default.Leaf,t,e));var o=[n,i].map((function(t){if(0===t.length)return{};for(var e=(0,p.bubbleFormats)(t.shift());Object.keys(e).length>0;){var n=t.shift();if(null==n)return e;e=r((0,p.bubbleFormats)(n),e)}return e}));return y.default.apply(y.default,o)}},{key:"getText",value:function(t,e){return this.getContents(t,e).filter((function(t){return"string"==typeof t.insert})).map((function(t){return t.insert})).join("")}},{key:"insertEmbed",value:function(t,e,n){return this.scroll.insertAt(t,e,n),this.update((new l.default).retain(t).insert(function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},e,n)))}},{key:"insertText",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e=e.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),this.scroll.insertAt(t,e),Object.keys(i).forEach((function(r){n.scroll.formatAt(t,e.length,r,i[r])})),this.update((new l.default).retain(t).insert(e,(0,m.default)(i)))}},{key:"isBlank",value:function(){if(0==this.scroll.children.length)return!0;if(this.scroll.children.length>1)return!1;var t=this.scroll.children.head;return t.statics.blotName===f.default.blotName&&!(t.children.length>1)&&t.children.head instanceof g.default}},{key:"removeFormat",value:function(t,e){var n=this.getText(t,e),i=this.scroll.line(t+e),r=a(i,2),o=r[0],s=r[1],c=0,u=new l.default;null!=o&&(c=o instanceof h.default?o.newlineIndex(s)-s+1:o.length()-s,u=o.delta().slice(s,s+c-1).insert("\n"));var d=this.getContents(t,e+c).diff((new l.default).insert(n).concat(u)),p=(new l.default).retain(t).concat(d);return this.applyDelta(p)}},{key:"update",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=this.delta;if(1===e.length&&"characterData"===e[0].type&&e[0].target.data.match(b)&&u.default.find(e[0].target)){var r=u.default.find(e[0].target),o=(0,p.bubbleFormats)(r),a=r.offset(this.scroll),s=e[0].oldValue.replace(d.default.CONTENTS,""),c=(new l.default).insert(s),h=(new l.default).insert(r.value());t=(new l.default).retain(a).concat(c.diff(h,n)).reduce((function(t,e){return e.insert?t.insert(e.insert,o):t.push(e)}),new l.default),this.delta=i.compose(t)}else this.delta=this.getDelta(),t&&(0,v.default)(i.compose(t),this.delta)||(t=i.diff(this.delta,n));return t}}]),t}();e.default=x},function(t,e){"use strict";function n(){}function i(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function r(){this._events=new n,this._eventsCount=0}var o=Object.prototype.hasOwnProperty,a="~";Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(a=!1)),r.prototype.eventNames=function(){var t,e,n=[];if(0===this._eventsCount)return n;for(e in t=this._events)o.call(t,e)&&n.push(a?e.slice(1):e);return Object.getOwnPropertySymbols?n.concat(Object.getOwnPropertySymbols(t)):n},r.prototype.listeners=function(t,e){var n=a?a+t:t,i=this._events[n];if(e)return!!i;if(!i)return[];if(i.fn)return[i.fn];for(var r=0,o=i.length,s=new Array(o);r<o;r++)s[r]=i[r].fn;return s},r.prototype.emit=function(t,e,n,i,r,o){var s=a?a+t:t;if(!this._events[s])return!1;var l,c,u=this._events[s],h=arguments.length;if(u.fn){switch(u.once&&this.removeListener(t,u.fn,void 0,!0),h){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,e),!0;case 3:return u.fn.call(u.context,e,n),!0;case 4:return u.fn.call(u.context,e,n,i),!0;case 5:return u.fn.call(u.context,e,n,i,r),!0;case 6:return u.fn.call(u.context,e,n,i,r,o),!0}for(c=1,l=new Array(h-1);c<h;c++)l[c-1]=arguments[c];u.fn.apply(u.context,l)}else{var d,p=u.length;for(c=0;c<p;c++)switch(u[c].once&&this.removeListener(t,u[c].fn,void 0,!0),h){case 1:u[c].fn.call(u[c].context);break;case 2:u[c].fn.call(u[c].context,e);break;case 3:u[c].fn.call(u[c].context,e,n);break;case 4:u[c].fn.call(u[c].context,e,n,i);break;default:if(!l)for(d=1,l=new Array(h-1);d<h;d++)l[d-1]=arguments[d];u[c].fn.apply(u[c].context,l)}}return!0},r.prototype.on=function(t,e,n){var r=new i(e,n||this),o=a?a+t:t;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],r]:this._events[o].push(r):(this._events[o]=r,this._eventsCount++),this},r.prototype.once=function(t,e,n){var r=new i(e,n||this,!0),o=a?a+t:t;return this._events[o]?this._events[o].fn?this._events[o]=[this._events[o],r]:this._events[o].push(r):(this._events[o]=r,this._eventsCount++),this},r.prototype.removeListener=function(t,e,i,r){var o=a?a+t:t;if(!this._events[o])return this;if(!e)return 0==--this._eventsCount?this._events=new n:delete this._events[o],this;var s=this._events[o];if(s.fn)s.fn!==e||r&&!s.once||i&&s.context!==i||(0==--this._eventsCount?this._events=new n:delete this._events[o]);else{for(var l=0,c=[],u=s.length;l<u;l++)(s[l].fn!==e||r&&!s[l].once||i&&s[l].context!==i)&&c.push(s[l]);c.length?this._events[o]=1===c.length?c[0]:c:0==--this._eventsCount?this._events=new n:delete this._events[o]}return this},r.prototype.removeAllListeners=function(t){var e;return t?(e=a?a+t:t,this._events[e]&&(0==--this._eventsCount?this._events=new n:delete this._events[e])):(this._events=new n,this._eventsCount=0),this},r.prototype.off=r.prototype.removeListener,r.prototype.addListener=r.prototype.on,r.prototype.setMaxListeners=function(){return this},r.prefixed=a,r.EventEmitter=r,void 0!==t&&(t.exports=r)},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){return t instanceof h.default||t instanceof u.BlockEmbed}Object.defineProperty(e,"__esModule",{value:!0});var o=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),s=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},l=i(n(0)),c=i(n(9)),u=n(3),h=i(u),d=i(n(14)),p=i(n(13)),f=i(n(23)),g=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return i.emitter=n.emitter,Array.isArray(n.whitelist)&&(i.whitelist=n.whitelist.reduce((function(t,e){return t[e]=!0,t}),{})),i.domNode.addEventListener("DOMNodeInserted",(function(){})),i.optimize(),i.enable(),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),a(e,[{key:"batchStart",value:function(){this.batch=!0}},{key:"batchEnd",value:function(){this.batch=!1,this.optimize()}},{key:"deleteAt",value:function(t,n){var i=this.line(t),r=o(i,2),a=r[0],l=r[1],c=this.line(t+n),h=o(c,1)[0];if(s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"deleteAt",this).call(this,t,n),null!=h&&a!==h&&l>0){if(a instanceof u.BlockEmbed||h instanceof u.BlockEmbed)return void this.optimize();if(a instanceof p.default){var f=a.newlineIndex(a.length(),!0);if(f>-1&&(a=a.split(f+1))===h)return void this.optimize()}else if(h instanceof p.default){var g=h.newlineIndex(0);g>-1&&h.split(g+1)}var m=h.children.head instanceof d.default?null:h.children.head;a.moveChildren(h,m),a.remove()}this.optimize()}},{key:"enable",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.domNode.setAttribute("contenteditable",t)}},{key:"formatAt",value:function(t,n,i,r){(null==this.whitelist||this.whitelist[i])&&(s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"formatAt",this).call(this,t,n,i,r),this.optimize())}},{key:"insertAt",value:function(t,n,i){if(null==i||null==this.whitelist||this.whitelist[n]){if(t>=this.length())if(null==i||null==l.default.query(n,l.default.Scope.BLOCK)){var r=l.default.create(this.statics.defaultChild);this.appendChild(r),null==i&&n.endsWith("\n")&&(n=n.slice(0,-1)),r.insertAt(0,n,i)}else{var o=l.default.create(n,i);this.appendChild(o)}else s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"insertAt",this).call(this,t,n,i);this.optimize()}}},{key:"insertBefore",value:function(t,n){if(t.statics.scope===l.default.Scope.INLINE_BLOT){var i=l.default.create(this.statics.defaultChild);i.appendChild(t),t=i}s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"insertBefore",this).call(this,t,n)}},{key:"leaf",value:function(t){return this.path(t).pop()||[null,-1]}},{key:"line",value:function(t){return t===this.length()?this.line(t-1):this.descendant(r,t)}},{key:"lines",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;return function t(e,n,i){var o=[],a=i;return e.children.forEachAt(n,i,(function(e,n,i){r(e)?o.push(e):e instanceof l.default.Container&&(o=o.concat(t(e,n,a))),a-=i})),o}(this,t,e)}},{key:"optimize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!0!==this.batch&&(s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"optimize",this).call(this,t,n),t.length>0&&this.emitter.emit(c.default.events.SCROLL_OPTIMIZE,t,n))}},{key:"path",value:function(t){return s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"path",this).call(this,t).slice(1)}},{key:"update",value:function(t){if(!0!==this.batch){var n=c.default.sources.USER;"string"==typeof t&&(n=t),Array.isArray(t)||(t=this.observer.takeRecords()),t.length>0&&this.emitter.emit(c.default.events.SCROLL_BEFORE_UPDATE,n,t),s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"update",this).call(this,t.concat([])),t.length>0&&this.emitter.emit(c.default.events.SCROLL_UPDATE,n,t)}}}]),e}(l.default.Scroll);g.blotName="scroll",g.className="ql-editor",g.tagName="DIV",g.defaultChild="block",g.allowedChildren=[h.default,u.BlockEmbed,f.default],e.default=g},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function o(t,e,n){return"object"===(void 0===e?"undefined":m(e))?Object.keys(e).reduce((function(t,n){return o(t,n,e[n])}),t):t.reduce((function(t,i){return i.attributes&&i.attributes[e]?t.push(i):t.insert(i.insert,(0,b.default)({},r({},e,n),i.attributes))}),new x.default)}function a(t){return t.nodeType!==Node.ELEMENT_NODE?{}:t["__ql-computed-style"]||(t["__ql-computed-style"]=window.getComputedStyle(t))}function s(t,e){for(var n="",i=t.ops.length-1;i>=0&&n.length<e.length;--i){var r=t.ops[i];if("string"!=typeof r.insert)break;n=r.insert+n}return n.slice(-1*e.length)===e}function l(t){return 0!==t.childNodes.length&&["block","list-item"].indexOf(a(t).display)>-1}function c(t,e,n){return t.nodeType===t.TEXT_NODE?n.reduce((function(e,n){return n(t,e)}),new x.default):t.nodeType===t.ELEMENT_NODE?[].reduce.call(t.childNodes||[],(function(i,r){var o=c(r,e,n);return r.nodeType===t.ELEMENT_NODE&&(o=e.reduce((function(t,e){return e(r,t)}),o),o=(r[L]||[]).reduce((function(t,e){return e(r,t)}),o)),i.concat(o)}),new x.default):new x.default}function u(t,e,n){return o(n,t,!0)}function h(t,e){var n=_.default.Attributor.Attribute.keys(t),i=_.default.Attributor.Class.keys(t),r=_.default.Attributor.Style.keys(t),a={};return n.concat(i).concat(r).forEach((function(e){var n=_.default.query(e,_.default.Scope.ATTRIBUTE);null!=n&&(a[n.attrName]=n.value(t),a[n.attrName])||(null==(n=N[e])||n.attrName!==e&&n.keyName!==e||(a[n.attrName]=n.value(t)||void 0),null==(n=R[e])||n.attrName!==e&&n.keyName!==e||(n=R[e],a[n.attrName]=n.value(t)||void 0))})),Object.keys(a).length>0&&(e=o(e,a)),e}function d(t,e){var n=_.default.query(t);if(null==n)return e;if(n.prototype instanceof _.default.Embed){var i={},r=n.value(t);null!=r&&(i[n.blotName]=r,e=(new x.default).insert(i,n.formats(t)))}else"function"==typeof n.formats&&(e=o(e,n.blotName,n.formats(t)));return e}function p(t,e){return s(e,"\n")||(l(t)||e.length()>0&&t.nextSibling&&l(t.nextSibling))&&e.insert("\n"),e}function f(t,e){if(l(t)&&null!=t.nextElementSibling&&!s(e,"\n\n")){var n=t.offsetHeight+parseFloat(a(t).marginTop)+parseFloat(a(t).marginBottom);t.nextElementSibling.offsetTop>t.offsetTop+1.5*n&&e.insert("\n")}return e}function g(t,e){var n=t.data;if("O:P"===t.parentNode.tagName)return e.insert(n.trim());if(0===n.trim().length&&t.parentNode.classList.contains("ql-clipboard"))return e;if(!a(t.parentNode).whiteSpace.startsWith("pre")){var i=function(t,e){return(e=e.replace(/[^\u00a0]/g,"")).length<1&&t?" ":e};n=(n=n.replace(/\r\n/g," ").replace(/\n/g," ")).replace(/\s\s+/g,i.bind(i,!0)),(null==t.previousSibling&&l(t.parentNode)||null!=t.previousSibling&&l(t.previousSibling))&&(n=n.replace(/^\s+/,i.bind(i,!1))),(null==t.nextSibling&&l(t.parentNode)||null!=t.nextSibling&&l(t.nextSibling))&&(n=n.replace(/\s+$/,i.bind(i,!1)))}return e.insert(n)}Object.defineProperty(e,"__esModule",{value:!0}),e.matchText=e.matchSpacing=e.matchNewline=e.matchBlot=e.matchAttributor=e.default=void 0;var m="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},v=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},y=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),b=i(n(2)),x=i(n(4)),_=i(n(0)),w=i(n(6)),S=i(n(10)),C=i(n(7)),k=n(34),A=n(35),M=i(n(13)),T=n(24),I=n(36),E=n(37),O=n(38),D=(0,S.default)("quill:clipboard"),L="__ql-matcher",P=[[Node.TEXT_NODE,g],[Node.TEXT_NODE,p],["br",function(t,e){return s(e,"\n")||e.insert("\n"),e}],[Node.ELEMENT_NODE,p],[Node.ELEMENT_NODE,d],[Node.ELEMENT_NODE,f],[Node.ELEMENT_NODE,h],[Node.ELEMENT_NODE,function(t,e){var n={},i=t.style||{};return i.fontStyle&&"italic"===a(t).fontStyle&&(n.italic=!0),i.fontWeight&&(a(t).fontWeight.startsWith("bold")||parseInt(a(t).fontWeight)>=700)&&(n.bold=!0),Object.keys(n).length>0&&(e=o(e,n)),parseFloat(i.textIndent||0)>0&&(e=(new x.default).insert("\t").concat(e)),e}],["li",function(t,e){var n=_.default.query(t);if(null==n||"list-item"!==n.blotName||!s(e,"\n"))return e;for(var i=-1,r=t.parentNode;!r.classList.contains("ql-clipboard");)"list"===(_.default.query(r)||{}).blotName&&(i+=1),r=r.parentNode;return i<=0?e:e.compose((new x.default).retain(e.length()-1).retain(1,{indent:i}))}],["b",u.bind(u,"bold")],["i",u.bind(u,"italic")],["style",function(){return new x.default}]],N=[k.AlignAttribute,I.DirectionAttribute].reduce((function(t,e){return t[e.keyName]=e,t}),{}),R=[k.AlignStyle,A.BackgroundStyle,T.ColorStyle,I.DirectionStyle,E.FontStyle,O.SizeStyle].reduce((function(t,e){return t[e.keyName]=e,t}),{}),B=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return i.quill.root.addEventListener("paste",i.onPaste.bind(i)),i.container=i.quill.addContainer("ql-clipboard"),i.container.setAttribute("contenteditable",!0),i.container.setAttribute("tabindex",-1),i.matchers=[],P.concat(i.options.matchers).forEach((function(t){var e=v(t,2),r=e[0],o=e[1];(n.matchVisual||o!==f)&&i.addMatcher(r,o)})),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),y(e,[{key:"addMatcher",value:function(t,e){this.matchers.push([t,e])}},{key:"convert",value:function(t){if("string"==typeof t)return this.container.innerHTML=t.replace(/\>\r?\n +\</g,"><"),this.convert();var e=this.quill.getFormat(this.quill.selection.savedRange.index);if(e[M.default.blotName]){var n=this.container.innerText;return this.container.innerHTML="",(new x.default).insert(n,r({},M.default.blotName,e[M.default.blotName]))}var i=this.prepareMatching(),o=v(i,2),a=o[0],l=o[1],u=c(this.container,a,l);return s(u,"\n")&&null==u.ops[u.ops.length-1].attributes&&(u=u.compose((new x.default).retain(u.length()-1).delete(1))),D.log("convert",this.container.innerHTML,u),this.container.innerHTML="",u}},{key:"dangerouslyPasteHTML",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:w.default.sources.API;if("string"==typeof t)this.quill.setContents(this.convert(t),e),this.quill.setSelection(0,w.default.sources.SILENT);else{var i=this.convert(e);this.quill.updateContents((new x.default).retain(t).concat(i),n),this.quill.setSelection(t+i.length(),w.default.sources.SILENT)}}},{key:"onPaste",value:function(t){var e=this;if(!t.defaultPrevented&&this.quill.isEnabled()){var n=this.quill.getSelection(),i=(new x.default).retain(n.index),r=this.quill.scrollingContainer.scrollTop;this.container.focus(),this.quill.selection.update(w.default.sources.SILENT),setTimeout((function(){i=i.concat(e.convert()).delete(n.length),e.quill.updateContents(i,w.default.sources.USER),e.quill.setSelection(i.length()-n.length,w.default.sources.SILENT),e.quill.scrollingContainer.scrollTop=r,e.quill.focus()}),1)}}},{key:"prepareMatching",value:function(){var t=this,e=[],n=[];return this.matchers.forEach((function(i){var r=v(i,2),o=r[0],a=r[1];switch(o){case Node.TEXT_NODE:n.push(a);break;case Node.ELEMENT_NODE:e.push(a);break;default:[].forEach.call(t.container.querySelectorAll(o),(function(t){t[L]=t[L]||[],t[L].push(a)}))}})),[e,n]}}]),e}(C.default);B.DEFAULTS={matchers:[],matchVisual:!0},e.default=B,e.matchAttributor=h,e.matchBlot=d,e.matchNewline=p,e.matchSpacing=f,e.matchText=g},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t){var e=t.reduce((function(t,e){return t+(e.delete||0)}),0),n=t.length()-e;return function(t){var e=t.ops[t.ops.length-1];return null!=e&&(null!=e.insert?"string"==typeof e.insert&&e.insert.endsWith("\n"):null!=e.attributes&&Object.keys(e.attributes).some((function(t){return null!=a.default.query(t,a.default.Scope.BLOCK)})))}(t)&&(n-=1),n}Object.defineProperty(e,"__esModule",{value:!0}),e.getLastChangeIndex=e.default=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=i(n(0)),s=i(n(6)),l=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return i.lastRecorded=0,i.ignoreChange=!1,i.clear(),i.quill.on(s.default.events.EDITOR_CHANGE,(function(t,e,n,r){t!==s.default.events.TEXT_CHANGE||i.ignoreChange||(i.options.userOnly&&r!==s.default.sources.USER?i.transform(e):i.record(e,n))})),i.quill.keyboard.addBinding({key:"Z",shortKey:!0},i.undo.bind(i)),i.quill.keyboard.addBinding({key:"Z",shortKey:!0,shiftKey:!0},i.redo.bind(i)),/Win/i.test(navigator.platform)&&i.quill.keyboard.addBinding({key:"Y",shortKey:!0},i.redo.bind(i)),i}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),o(e,[{key:"change",value:function(t,e){if(0!==this.stack[t].length){var n=this.stack[t].pop();this.stack[e].push(n),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(n[t],s.default.sources.USER),this.ignoreChange=!1;var i=r(n[t]);this.quill.setSelection(i)}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(t,e){if(0!==t.ops.length){this.stack.redo=[];var n=this.quill.getContents().diff(e),i=Date.now();if(this.lastRecorded+this.options.delay>i&&this.stack.undo.length>0){var r=this.stack.undo.pop();n=n.compose(r.undo),t=r.redo.compose(t)}else this.lastRecorded=i;this.stack.undo.push({redo:t,undo:n}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift()}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(t){this.stack.undo.forEach((function(e){e.undo=t.transform(e.undo,!0),e.redo=t.transform(e.redo,!0)})),this.stack.redo.forEach((function(e){e.undo=t.transform(e.undo,!0),e.redo=t.transform(e.redo,!0)}))}},{key:"undo",value:function(){this.change("undo","redo")}}]),e}(i(n(7)).default);l.DEFAULTS={delay:1e3,maxStack:100,userOnly:!1},e.default=l,e.getLastChangeIndex=r},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}Object.defineProperty(e,"__esModule",{value:!0}),e.IndentClass=void 0;var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},s=function(t){return t&&t.__esModule?t:{default:t}}(n(0)),l=function(t){function e(){return i(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),o(e,[{key:"add",value:function(t,n){if("+1"===n||"-1"===n){var i=this.value(t)||0;n="+1"===n?i+1:i-1}return 0===n?(this.remove(t),!0):a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"add",this).call(this,t,n)}},{key:"canAdd",value:function(t,n){return a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"canAdd",this).call(this,t,n)||a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"canAdd",this).call(this,t,parseInt(n))}},{key:"value",value:function(t){return parseInt(a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"value",this).call(this,t))||void 0}}]),e}(s.default.Attributor.Class),c=new l("indent","ql-indent",{scope:s.default.Scope.BLOCK,whitelist:[1,2,3,4,5,6,7,8]});e.IndentClass=c},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){return t&&t.__esModule?t:{default:t}}(n(3)),a=function(t){function e(){return i(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(o.default);a.blotName="blockquote",a.tagName="blockquote",e.default=a},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function(t){return t&&t.__esModule?t:{default:t}}(n(3)),s=function(t){function e(){return i(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),o(e,null,[{key:"formats",value:function(t){return this.tagName.indexOf(t.tagName)+1}}]),e}(a.default);s.blotName="header",s.tagName=["H1","H2","H3","H4","H5","H6"],e.default=s},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.ListItem=void 0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},c=i(n(0)),u=i(n(3)),h=i(n(23)),d=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"format",value:function(t,n){t!==p.blotName||n?l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"format",this).call(this,t,n):this.replaceWith(c.default.create(this.statics.scope))}},{key:"remove",value:function(){null==this.prev&&null==this.next?this.parent.remove():l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"remove",this).call(this)}},{key:"replaceWith",value:function(t,n){return this.parent.isolate(this.offset(this.parent),this.length()),t===this.parent.statics.blotName?(this.parent.replaceWith(t,n),this):(this.parent.unwrap(),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"replaceWith",this).call(this,t,n))}}],[{key:"formats",value:function(t){return t.tagName===this.tagName?void 0:l(e.__proto__||Object.getPrototypeOf(e),"formats",this).call(this,t)}}]),e}(u.default);d.blotName="list-item",d.tagName="LI";var p=function(t){function e(t){r(this,e);var n=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t)),i=function(e){if(e.target.parentNode===t){var i=n.statics.formats(t),r=c.default.find(e.target);"checked"===i?r.format("list","unchecked"):"unchecked"===i&&r.format("list","checked")}};return t.addEventListener("touchstart",i),t.addEventListener("mousedown",i),n}return a(e,t),s(e,null,[{key:"create",value:function(t){var n="ordered"===t?"OL":"UL",i=l(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this,n);return"checked"!==t&&"unchecked"!==t||i.setAttribute("data-checked","checked"===t),i}},{key:"formats",value:function(t){return"OL"===t.tagName?"ordered":"UL"===t.tagName?t.hasAttribute("data-checked")?"true"===t.getAttribute("data-checked")?"checked":"unchecked":"bullet":void 0}}]),s(e,[{key:"format",value:function(t,e){this.children.length>0&&this.children.tail.format(t,e)}},{key:"formats",value:function(){return function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},this.statics.blotName,this.statics.formats(this.domNode))}},{key:"insertBefore",value:function(t,n){if(t instanceof d)l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"insertBefore",this).call(this,t,n);else{var i=null==n?this.length():n.offset(this),r=this.split(i);r.parent.insertBefore(t,r)}}},{key:"optimize",value:function(t){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"optimize",this).call(this,t);var n=this.next;null!=n&&n.prev===this&&n.statics.blotName===this.statics.blotName&&n.domNode.tagName===this.domNode.tagName&&n.domNode.getAttribute("data-checked")===this.domNode.getAttribute("data-checked")&&(n.moveChildren(this),n.remove())}},{key:"replace",value:function(t){if(t.statics.blotName!==this.statics.blotName){var n=c.default.create(this.statics.defaultChild);t.moveChildren(n),this.appendChild(n)}l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"replace",this).call(this,t)}}]),e}(h.default);p.blotName="list",p.scope=c.default.Scope.BLOCK_BLOT,p.tagName=["OL","UL"],p.defaultChild="list-item",p.allowedChildren=[d],e.ListItem=d,e.default=p},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){return t&&t.__esModule?t:{default:t}}(n(39)),a=function(t){function e(){return i(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(o.default);a.blotName="italic",a.tagName=["EM","I"],e.default=a},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},s=function(t){return t&&t.__esModule?t:{default:t}}(n(5)),l=function(t){function e(){return i(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),o(e,null,[{key:"create",value:function(t){return"super"===t?document.createElement("sup"):"sub"===t?document.createElement("sub"):a(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this,t)}},{key:"formats",value:function(t){return"SUB"===t.tagName?"sub":"SUP"===t.tagName?"super":void 0}}]),e}(s.default);l.blotName="script",l.tagName=["SUB","SUP"],e.default=l},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){return t&&t.__esModule?t:{default:t}}(n(5)),a=function(t){function e(){return i(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(o.default);a.blotName="strike",a.tagName="S",e.default=a},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}Object.defineProperty(e,"__esModule",{value:!0});var o=function(t){return t&&t.__esModule?t:{default:t}}(n(5)),a=function(t){function e(){return i(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),e}(o.default);a.blotName="underline",a.tagName="U",e.default=a},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},s=function(t){return t&&t.__esModule?t:{default:t}}(n(0)),l=n(15),c=["alt","height","width"],u=function(t){function e(){return i(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),o(e,[{key:"format",value:function(t,n){c.indexOf(t)>-1?n?this.domNode.setAttribute(t,n):this.domNode.removeAttribute(t):a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"format",this).call(this,t,n)}}],[{key:"create",value:function(t){var n=a(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this,t);return"string"==typeof t&&n.setAttribute("src",this.sanitize(t)),n}},{key:"formats",value:function(t){return c.reduce((function(e,n){return t.hasAttribute(n)&&(e[n]=t.getAttribute(n)),e}),{})}},{key:"match",value:function(t){return/\.(jpe?g|gif|png)$/.test(t)||/^data:image\/.+;base64/.test(t)}},{key:"sanitize",value:function(t){return(0,l.sanitize)(t,["http","https","data"])?t:"//:0"}},{key:"value",value:function(t){return t.getAttribute("src")}}]),e}(s.default.Embed);u.blotName="image",u.tagName="IMG",e.default=u},function(t,e,n){"use strict";function i(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}Object.defineProperty(e,"__esModule",{value:!0});var o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),a=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},s=n(3),l=function(t){return t&&t.__esModule?t:{default:t}}(n(15)),c=["height","width"],u=function(t){function e(){return i(this,e),r(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),o(e,[{key:"format",value:function(t,n){c.indexOf(t)>-1?n?this.domNode.setAttribute(t,n):this.domNode.removeAttribute(t):a(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"format",this).call(this,t,n)}}],[{key:"create",value:function(t){var n=a(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this,t);return n.setAttribute("frameborder","0"),n.setAttribute("allowfullscreen",!0),n.setAttribute("src",this.sanitize(t)),n}},{key:"formats",value:function(t){return c.reduce((function(e,n){return t.hasAttribute(n)&&(e[n]=t.getAttribute(n)),e}),{})}},{key:"sanitize",value:function(t){return l.default.sanitize(t)}},{key:"value",value:function(t){return t.getAttribute("src")}}]),e}(s.BlockEmbed);u.blotName="video",u.className="ql-video",u.tagName="IFRAME",e.default=u},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.FormulaBlot=void 0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},c=i(n(33)),u=i(n(6)),h=i(n(7)),d=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,null,[{key:"create",value:function(t){var n=l(e.__proto__||Object.getPrototypeOf(e),"create",this).call(this,t);return"string"==typeof t&&(window.katex.render(t,n,{throwOnError:!1,errorColor:"#f00"}),n.setAttribute("data-value",t)),n}},{key:"value",value:function(t){return t.getAttribute("data-value")}}]),e}(c.default);d.blotName="formula",d.className="ql-formula",d.tagName="SPAN";var p=function(t){function e(){r(this,e);var t=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this));if(null==window.katex)throw new Error("Formula module requires KaTeX.");return t}return a(e,t),s(e,null,[{key:"register",value:function(){u.default.register(d,!0)}}]),e}(h.default);e.FormulaBlot=d,e.default=p},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.CodeToken=e.CodeBlock=void 0;var s=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),l=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},c=i(n(0)),u=i(n(6)),h=i(n(7)),d=function(t){function e(){return r(this,e),o(this,(e.__proto__||Object.getPrototypeOf(e)).apply(this,arguments))}return a(e,t),s(e,[{key:"replaceWith",value:function(t){this.domNode.textContent=this.domNode.textContent,this.attach(),l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"replaceWith",this).call(this,t)}},{key:"highlight",value:function(t){var e=this.domNode.textContent;this.cachedText!==e&&((e.trim().length>0||null==this.cachedText)&&(this.domNode.innerHTML=t(e),this.domNode.normalize(),this.attach()),this.cachedText=e)}}]),e}(i(n(13)).default);d.className="ql-syntax";var p=new c.default.Attributor.Class("token","hljs",{scope:c.default.Scope.INLINE}),f=function(t){function e(t,n){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));if("function"!=typeof i.options.highlight)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");var a=null;return i.quill.on(u.default.events.SCROLL_OPTIMIZE,(function(){clearTimeout(a),a=setTimeout((function(){i.highlight(),a=null}),i.options.interval)})),i.highlight(),i}return a(e,t),s(e,null,[{key:"register",value:function(){u.default.register(p,!0),u.default.register(d,!0)}}]),s(e,[{key:"highlight",value:function(){var t=this;if(!this.quill.selection.composing){this.quill.update(u.default.sources.USER);var e=this.quill.getSelection();this.quill.scroll.descendants(d).forEach((function(e){e.highlight(t.options.highlight)})),this.quill.update(u.default.sources.SILENT),null!=e&&this.quill.setSelection(e,u.default.sources.SILENT)}}}]),e}(h.default);f.DEFAULTS={highlight:null==window.hljs?null:function(t){return window.hljs.highlightAuto(t).value},interval:1e3},e.CodeBlock=d,e.CodeToken=p,e.default=f},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function o(t,e,n){var i=document.createElement("button");i.setAttribute("type","button"),i.classList.add("ql-"+e),null!=n&&(i.value=n),t.appendChild(i)}function a(t,e){Array.isArray(e[0])||(e=[e]),e.forEach((function(e){var n=document.createElement("span");n.classList.add("ql-formats"),e.forEach((function(t){if("string"==typeof t)o(n,t);else{var e=Object.keys(t)[0],i=t[e];Array.isArray(i)?function(t,e,n){var i=document.createElement("select");i.classList.add("ql-"+e),n.forEach((function(t){var e=document.createElement("option");!1!==t?e.setAttribute("value",t):e.setAttribute("selected","selected"),i.appendChild(e)})),t.appendChild(i)}(n,e,i):o(n,e,i)}})),t.appendChild(n)}))}Object.defineProperty(e,"__esModule",{value:!0}),e.addControls=e.default=void 0;var s=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},l=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),c=i(n(4)),u=i(n(0)),h=i(n(6)),d=i(n(10)),p=i(n(7)),f=(0,d.default)("quill:toolbar"),g=function(t){function e(t,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i,o=r(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));if(Array.isArray(o.options.container)){var l=document.createElement("div");a(l,o.options.container),t.container.parentNode.insertBefore(l,t.container),o.container=l}else"string"==typeof o.options.container?o.container=document.querySelector(o.options.container):o.container=o.options.container;return o.container instanceof HTMLElement?(o.container.classList.add("ql-toolbar"),o.controls=[],o.handlers={},Object.keys(o.options.handlers).forEach((function(t){o.addHandler(t,o.options.handlers[t])})),[].forEach.call(o.container.querySelectorAll("button, select"),(function(t){o.attach(t)})),o.quill.on(h.default.events.EDITOR_CHANGE,(function(t,e){t===h.default.events.SELECTION_CHANGE&&o.update(e)})),o.quill.on(h.default.events.SCROLL_OPTIMIZE,(function(){var t=o.quill.selection.getRange(),e=s(t,1)[0];o.update(e)})),o):(i=f.error("Container required for toolbar",o.options),r(o,i))}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,t),l(e,[{key:"addHandler",value:function(t,e){this.handlers[t]=e}},{key:"attach",value:function(t){var e=this,n=[].find.call(t.classList,(function(t){return 0===t.indexOf("ql-")}));if(n){if(n=n.slice("ql-".length),"BUTTON"===t.tagName&&t.setAttribute("type","button"),null==this.handlers[n]){if(null!=this.quill.scroll.whitelist&&null==this.quill.scroll.whitelist[n])return void f.warn("ignoring attaching to disabled format",n,t);if(null==u.default.query(n))return void f.warn("ignoring attaching to nonexistent format",n,t)}var i="SELECT"===t.tagName?"change":"click";t.addEventListener(i,(function(i){var r=void 0;if("SELECT"===t.tagName){if(t.selectedIndex<0)return;var o=t.options[t.selectedIndex];r=!o.hasAttribute("selected")&&(o.value||!1)}else r=!t.classList.contains("ql-active")&&(t.value||!t.hasAttribute("value")),i.preventDefault();e.quill.focus();var a=e.quill.selection.getRange(),l=s(a,1)[0];if(null!=e.handlers[n])e.handlers[n].call(e,r);else if(u.default.query(n).prototype instanceof u.default.Embed){if(!(r=prompt("Enter "+n)))return;e.quill.updateContents((new c.default).retain(l.index).delete(l.length).insert(function(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}({},n,r)),h.default.sources.USER)}else e.quill.format(n,r,h.default.sources.USER);e.update(l)})),this.controls.push([n,t])}}},{key:"update",value:function(t){var e=null==t?{}:this.quill.getFormat(t);this.controls.forEach((function(n){var i=s(n,2),r=i[0],o=i[1];if("SELECT"===o.tagName){var a=void 0;if(null==t)a=null;else if(null==e[r])a=o.querySelector("option[selected]");else if(!Array.isArray(e[r])){var l=e[r];"string"==typeof l&&(l=l.replace(/\"/g,'\\"')),a=o.querySelector('option[value="'+l+'"]')}null==a?(o.value="",o.selectedIndex=-1):a.selected=!0}else if(null==t)o.classList.remove("ql-active");else if(o.hasAttribute("value")){var c=e[r]===o.getAttribute("value")||null!=e[r]&&e[r].toString()===o.getAttribute("value")||null==e[r]&&!o.getAttribute("value");o.classList.toggle("ql-active",c)}else o.classList.toggle("ql-active",null!=e[r])}))}}]),e}(p.default);g.DEFAULTS={},g.DEFAULTS={container:null,handlers:{clean:function(){var t=this,e=this.quill.getSelection();if(null!=e)if(0==e.length){var n=this.quill.getFormat();Object.keys(n).forEach((function(e){null!=u.default.query(e,u.default.Scope.INLINE)&&t.quill.format(e,!1)}))}else this.quill.removeFormat(e,h.default.sources.USER)},direction:function(t){var e=this.quill.getFormat().align;"rtl"===t&&null==e?this.quill.format("align","right",h.default.sources.USER):t||"right"!==e||this.quill.format("align",!1,h.default.sources.USER),this.quill.format("direction",t,h.default.sources.USER)},indent:function(t){var e=this.quill.getSelection(),n=this.quill.getFormat(e),i=parseInt(n.indent||0);if("+1"===t||"-1"===t){var r="+1"===t?1:-1;"rtl"===n.direction&&(r*=-1),this.quill.format("indent",i+r,h.default.sources.USER)}},link:function(t){!0===t&&(t=prompt("Enter link URL:")),this.quill.format("link",t,h.default.sources.USER)},list:function(t){var e=this.quill.getSelection(),n=this.quill.getFormat(e);"check"===t?"checked"===n.list||"unchecked"===n.list?this.quill.format("list",!1,h.default.sources.USER):this.quill.format("list","unchecked",h.default.sources.USER):this.quill.format("list",t,h.default.sources.USER)}}},e.default=g,e.addControls=a},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=13 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=9 y1=4 y2=4></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=14 x2=4 y1=14 y2=14></line> <line class=ql-stroke x1=12 x2=6 y1=4 y2=4></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=5 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=9 y1=4 y2=4></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=15 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=15 x2=3 y1=14 y2=14></line> <line class=ql-stroke x1=15 x2=3 y1=4 y2=4></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <g class="ql-fill ql-color-label"> <polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"></polygon> <rect height=1 width=1 x=4 y=4></rect> <polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"></polygon> <rect height=1 width=1 x=2 y=6></rect> <rect height=1 width=1 x=3 y=5></rect> <rect height=1 width=1 x=4 y=7></rect> <polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"></polygon> <rect height=1 width=1 x=2 y=12></rect> <rect height=1 width=1 x=2 y=9></rect> <rect height=1 width=1 x=2 y=15></rect> <polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"></polygon> <rect height=1 width=1 x=3 y=8></rect> <path d=M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z></path> <path d=M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z></path> <path d=M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z></path> <rect height=1 width=1 x=12 y=2></rect> <rect height=1 width=1 x=11 y=3></rect> <path d=M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z></path> <rect height=1 width=1 x=2 y=3></rect> <rect height=1 width=1 x=6 y=2></rect> <rect height=1 width=1 x=3 y=2></rect> <rect height=1 width=1 x=5 y=3></rect> <rect height=1 width=1 x=9 y=2></rect> <rect height=1 width=1 x=15 y=14></rect> <polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"></polygon> <rect height=1 width=1 x=13 y=7></rect> <rect height=1 width=1 x=15 y=5></rect> <rect height=1 width=1 x=14 y=6></rect> <rect height=1 width=1 x=15 y=8></rect> <rect height=1 width=1 x=14 y=9></rect> <path d=M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z></path> <rect height=1 width=1 x=14 y=3></rect> <polygon points="12 6.868 12 6 11.62 6 12 6.868"></polygon> <rect height=1 width=1 x=15 y=2></rect> <rect height=1 width=1 x=12 y=5></rect> <rect height=1 width=1 x=13 y=4></rect> <polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"></polygon> <rect height=1 width=1 x=9 y=14></rect> <rect height=1 width=1 x=8 y=15></rect> <path d=M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z></path> <rect height=1 width=1 x=5 y=15></rect> <path d=M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z></path> <rect height=1 width=1 x=11 y=15></rect> <path d=M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z></path> <rect height=1 width=1 x=14 y=15></rect> <rect height=1 width=1 x=15 y=11></rect> </g> <polyline class=ql-stroke points="5.5 13 9 5 12.5 13"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=11 y2=11></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <rect class="ql-fill ql-stroke" height=3 width=3 x=4 y=5></rect> <rect class="ql-fill ql-stroke" height=3 width=3 x=11 y=5></rect> <path class="ql-even ql-fill ql-stroke" d=M7,8c0,4.031-3,5-3,5></path> <path class="ql-even ql-fill ql-stroke" d=M14,8c0,4.031-3,5-3,5></path> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z></path> <path class=ql-stroke d=M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z></path> </svg>'},function(t,e){t.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=5 x2=13 y1=3 y2=3></line> <line class=ql-stroke x1=6 x2=9.35 y1=12 y2=3></line> <line class=ql-stroke x1=11 x2=15 y1=11 y2=15></line> <line class=ql-stroke x1=15 x2=11 y1=11 y2=15></line> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=7 x=2 y=14></rect> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class="ql-color-label ql-stroke ql-transparent" x1=3 x2=15 y1=15 y2=15></line> <polyline class=ql-stroke points="5.5 11 9 3 12.5 11"></polyline> <line class=ql-stroke x1=11.63 x2=6.38 y1=9 y2=9></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"></polygon> <line class="ql-stroke ql-fill" x1=15 x2=11 y1=4 y2=4></line> <path class=ql-fill d=M11,3a3,3,0,0,0,0,6h1V3H11Z></path> <rect class=ql-fill height=11 width=1 x=11 y=4></rect> <rect class=ql-fill height=11 width=1 x=13 y=4></rect> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"></polygon> <line class="ql-stroke ql-fill" x1=9 x2=5 y1=4 y2=4></line> <path class=ql-fill d=M5,3A3,3,0,0,0,5,9H6V3H5Z></path> <rect class=ql-fill height=11 width=1 x=5 y=4></rect> <rect class=ql-fill height=11 width=1 x=7 y=4></rect> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M14,16H4a1,1,0,0,1,0-2H14A1,1,0,0,1,14,16Z /> <path class=ql-fill d=M14,4H4A1,1,0,0,1,4,2H14A1,1,0,0,1,14,4Z /> <rect class=ql-fill x=3 y=6 width=12 height=6 rx=1 ry=1 /> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M13,16H5a1,1,0,0,1,0-2h8A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H5A1,1,0,0,1,5,2h8A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=2 y=6 width=14 height=6 rx=1 ry=1 /> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15,8H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,8Z /> <path class=ql-fill d=M15,12H13a1,1,0,0,1,0-2h2A1,1,0,0,1,15,12Z /> <path class=ql-fill d=M15,16H5a1,1,0,0,1,0-2H15A1,1,0,0,1,15,16Z /> <path class=ql-fill d=M15,4H5A1,1,0,0,1,5,2H15A1,1,0,0,1,15,4Z /> <rect class=ql-fill x=2 y=6 width=8 height=6 rx=1 ry=1 /> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M5,8H3A1,1,0,0,1,3,6H5A1,1,0,0,1,5,8Z /> <path class=ql-fill d=M5,12H3a1,1,0,0,1,0-2H5A1,1,0,0,1,5,12Z /> <path class=ql-fill d=M13,16H3a1,1,0,0,1,0-2H13A1,1,0,0,1,13,16Z /> <path class=ql-fill d=M13,4H3A1,1,0,0,1,3,2H13A1,1,0,0,1,13,4Z /> <rect class=ql-fill x=8 y=6 width=8 height=6 rx=1 ry=1 transform="translate(24 18) rotate(-180)"/> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z></path> <rect class=ql-fill height=1.6 rx=0.8 ry=0.8 width=5 x=5.15 y=6.2></rect> <path class=ql-fill d=M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z></path> </svg>'},function(t,e){t.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z /> </svg>'},function(t,e){t.exports='<svg viewBox="0 0 18 18"> <path class=ql-fill d=M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z /> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=13 y1=4 y2=4></line> <line class=ql-stroke x1=5 x2=11 y1=14 y2=14></line> <line class=ql-stroke x1=8 x2=10 y1=14 y2=4></line> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=10 width=12 x=3 y=4></rect> <circle class=ql-fill cx=6 cy=7 r=1></circle> <polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"></polyline> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"></polyline> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=3 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="5 7 5 11 3 9 5 7"></polyline> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=11 y1=7 y2=11></line> <path class="ql-even ql-stroke" d=M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z></path> <path class="ql-even ql-stroke" d=M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z></path> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=7 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=7 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=7 x2=15 y1=14 y2=14></line> <line class="ql-stroke ql-thin" x1=2.5 x2=4.5 y1=5.5 y2=5.5></line> <path class=ql-fill d=M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z></path> <path class="ql-stroke ql-thin" d=M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156></path> <path class="ql-stroke ql-thin" d=M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109></path> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class=ql-stroke x1=6 x2=15 y1=4 y2=4></line> <line class=ql-stroke x1=6 x2=15 y1=9 y2=9></line> <line class=ql-stroke x1=6 x2=15 y1=14 y2=14></line> <line class=ql-stroke x1=3 x2=3 y1=4 y2=4></line> <line class=ql-stroke x1=3 x2=3 y1=9 y2=9></line> <line class=ql-stroke x1=3 x2=3 y1=14 y2=14></line> </svg>'},function(t,e){t.exports='<svg class="" viewbox="0 0 18 18"> <line class=ql-stroke x1=9 x2=15 y1=4 y2=4></line> <polyline class=ql-stroke points="3 4 4 5 6 3"></polyline> <line class=ql-stroke x1=9 x2=15 y1=14 y2=14></line> <polyline class=ql-stroke points="3 14 4 15 6 13"></polyline> <line class=ql-stroke x1=9 x2=15 y1=9 y2=9></line> <polyline class=ql-stroke points="3 9 4 10 6 8"></polyline> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z /> <path class=ql-fill d=M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z /> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-fill d=M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z /> <path class=ql-fill d=M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z /> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <line class="ql-stroke ql-thin" x1=15.5 x2=2.5 y1=8.5 y2=9.5></line> <path class=ql-fill d=M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z></path> <path class=ql-fill d=M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z></path> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <path class=ql-stroke d=M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3></path> <rect class=ql-fill height=1 rx=0.5 ry=0.5 width=12 x=3 y=15></rect> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <rect class=ql-stroke height=12 width=12 x=3 y=3></rect> <rect class=ql-fill height=12 width=1 x=5 y=3></rect> <rect class=ql-fill height=12 width=1 x=12 y=3></rect> <rect class=ql-fill height=2 width=8 x=5 y=8></rect> <rect class=ql-fill height=1 width=3 x=3 y=5></rect> <rect class=ql-fill height=1 width=3 x=3 y=7></rect> <rect class=ql-fill height=1 width=3 x=3 y=10></rect> <rect class=ql-fill height=1 width=3 x=3 y=12></rect> <rect class=ql-fill height=1 width=3 x=12 y=5></rect> <rect class=ql-fill height=1 width=3 x=12 y=7></rect> <rect class=ql-fill height=1 width=3 x=12 y=10></rect> <rect class=ql-fill height=1 width=3 x=12 y=12></rect> </svg>'},function(t,e){t.exports='<svg viewbox="0 0 18 18"> <polygon class=ql-stroke points="7 11 9 13 11 11 7 11"></polygon> <polygon class=ql-stroke points="7 7 9 5 11 7 7 7"></polygon> </svg>'},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0}),e.default=e.BubbleTooltip=void 0;var s=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},l=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),c=i(n(2)),u=i(n(9)),h=n(44),d=i(h),p=n(22),f=i(n(26)),g=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],m=function(t){function e(t,n){r(this,e),null!=n.modules.toolbar&&null==n.modules.toolbar.container&&(n.modules.toolbar.container=g);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return i.quill.container.classList.add("ql-bubble"),i}return a(e,t),l(e,[{key:"extendToolbar",value:function(t){this.tooltip=new v(this.quill,this.options.bounds),this.tooltip.root.appendChild(t.container),this.buildButtons([].slice.call(t.container.querySelectorAll("button")),f.default),this.buildPickers([].slice.call(t.container.querySelectorAll("select")),f.default)}}]),e}(d.default);m.DEFAULTS=(0,c.default)(!0,{},d.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(t){t?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var v=function(t){function e(t,n){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return i.quill.on(u.default.events.EDITOR_CHANGE,(function(t,e,n,r){if(t===u.default.events.SELECTION_CHANGE)if(null!=e&&e.length>0&&r===u.default.sources.USER){i.show(),i.root.style.left="0px",i.root.style.width="",i.root.style.width=i.root.offsetWidth+"px";var o=i.quill.getLines(e.index,e.length);if(1===o.length)i.position(i.quill.getBounds(e));else{var a=o[o.length-1],s=i.quill.getIndex(a),l=Math.min(a.length()-1,e.index+e.length-s),c=i.quill.getBounds(new p.Range(s,l));i.position(c)}}else document.activeElement!==i.textbox&&i.quill.hasFocus()&&i.hide()})),i}return a(e,t),l(e,[{key:"listen",value:function(){var t=this;s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",(function(){t.root.classList.remove("ql-editing")})),this.quill.on(u.default.events.SCROLL_OPTIMIZE,(function(){setTimeout((function(){if(!t.root.classList.contains("ql-hidden")){var e=t.quill.getSelection();null!=e&&t.position(t.quill.getBounds(e))}}),1)}))}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(t){var n=s(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"position",this).call(this,t),i=this.root.querySelector(".ql-tooltip-arrow");if(i.style.marginLeft="",0===n)return n;i.style.marginLeft=-1*n-i.offsetWidth/2+"px"}}]),e}(h.BaseTooltip);v.TEMPLATE=['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""),e.BubbleTooltip=v,e.default=m},function(t,e,n){"use strict";function i(t){return t&&t.__esModule?t:{default:t}}function r(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function o(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function a(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}Object.defineProperty(e,"__esModule",{value:!0});var s=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],i=!0,r=!1,o=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);i=!0);}catch(t){r=!0,o=t}finally{try{!i&&s.return&&s.return()}finally{if(r)throw o}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},l=function t(e,n,i){null===e&&(e=Function.prototype);var r=Object.getOwnPropertyDescriptor(e,n);if(void 0===r){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,i)}if("value"in r)return r.value;var a=r.get;return void 0!==a?a.call(i):void 0},c=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),u=i(n(2)),h=i(n(9)),d=n(44),p=i(d),f=i(n(15)),g=n(22),m=i(n(26)),v=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],y=function(t){function e(t,n){r(this,e),null!=n.modules.toolbar&&null==n.modules.toolbar.container&&(n.modules.toolbar.container=v);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return i.quill.container.classList.add("ql-snow"),i}return a(e,t),c(e,[{key:"extendToolbar",value:function(t){t.container.classList.add("ql-snow"),this.buildButtons([].slice.call(t.container.querySelectorAll("button")),m.default),this.buildPickers([].slice.call(t.container.querySelectorAll("select")),m.default),this.tooltip=new b(this.quill,this.options.bounds),t.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"K",shortKey:!0},(function(e,n){t.handlers.link.call(t,!n.format.link)}))}}]),e}(p.default);y.DEFAULTS=(0,u.default)(!0,{},p.default.DEFAULTS,{modules:{toolbar:{handlers:{link:function(t){if(t){var e=this.quill.getSelection();if(null==e||0==e.length)return;var n=this.quill.getText(e);/^\S+@\S+\.\S+$/.test(n)&&0!==n.indexOf("mailto:")&&(n="mailto:"+n),this.quill.theme.tooltip.edit("link",n)}else this.quill.format("link",!1)}}}}});var b=function(t){function e(t,n){r(this,e);var i=o(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t,n));return i.preview=i.root.querySelector("a.ql-preview"),i}return a(e,t),c(e,[{key:"listen",value:function(){var t=this;l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",(function(e){t.root.classList.contains("ql-editing")?t.save():t.edit("link",t.preview.textContent),e.preventDefault()})),this.root.querySelector("a.ql-remove").addEventListener("click",(function(e){if(null!=t.linkRange){var n=t.linkRange;t.restoreFocus(),t.quill.formatText(n,"link",!1,h.default.sources.USER),delete t.linkRange}e.preventDefault(),t.hide()})),this.quill.on(h.default.events.SELECTION_CHANGE,(function(e,n,i){if(null!=e){if(0===e.length&&i===h.default.sources.USER){var r=t.quill.scroll.descendant(f.default,e.index),o=s(r,2),a=o[0],l=o[1];if(null!=a){t.linkRange=new g.Range(e.index-l,a.length());var c=f.default.formats(a.domNode);return t.preview.textContent=c,t.preview.setAttribute("href",c),t.show(),void t.position(t.quill.getBounds(t.linkRange))}}else delete t.linkRange;t.hide()}}))}},{key:"show",value:function(){l(e.prototype.__proto__||Object.getPrototypeOf(e.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}]),e}(d.BaseTooltip);b.TEMPLATE=['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""),e.default=y}]).default})),function(t){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).simpleDatatables=t()}}((function(){return function t(e,n,i){function r(a,s){if(!n[a]){if(!e[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var c=new Error("Cannot find module '"+a+"'");throw c.code="MODULE_NOT_FOUND",c}var u=n[a]={exports:{}};e[a][0].call(u.exports,(function(t){return r(e[a][1][t]||t)}),u,u.exports,t,e,n,i)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<i.length;a++)r(i[a]);return r}({1:[function(t,e,n){(function(t){(function(){"use strict";const e=t=>"[object Object]"===Object.prototype.toString.call(t),i=t=>{let n=!1;try{n=JSON.parse(t)}catch(t){return!1}return!(null===n||!Array.isArray(n)&&!e(n))&&n},r=(t,e)=>{const n=document.createElement(t);if(e&&"object"==typeof e)for(const t in e)"html"===t?n.innerHTML=e[t]:n.setAttribute(t,e[t]);return n},o=t=>["#text","#comment"].includes(t.nodeName)?t.data:t.childNodes?t.childNodes.map((t=>o(t))).join(""):"",a=t=>{if(null==t)return"";if(t.hasOwnProperty("text")||t.hasOwnProperty("data")){const e=t;return e.text??a(e.data)}return t.hasOwnProperty("nodeName")?o(t):String(t)},s=function(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;")},l=function(t,e){let n=0,i=0;for(;n<t+1;)e[i].hidden||(n+=1),i+=1;return i-1},c=function(t){const e={};if(t)for(const n of t)e[n.name]=n.value;return e},u=t=>t?t.trim().split(" ").map((t=>`.${t}`)).join(""):null,h=(t,e)=>{const n=e?.split(" ").some((e=>!t.classList.contains(e)));return!n},d=(t,e)=>t?e?`${t} ${e}`:t:e||"";var p=function(){function t(t){var e=this;void 0===t&&(t={}),Object.entries(t).forEach((function(t){var n=t[0],i=t[1];return e[n]=i}))}return t.prototype.toString=function(){return JSON.stringify(this)},t.prototype.setValue=function(t,e){return this[t]=e,this},t}();function f(t){for(var e=arguments,n=[],i=1;i<arguments.length;i++)n[i-1]=e[i];return null!=t&&n.some((function(e){var n,i;return"function"==typeof(null===(i=null===(n=null==t?void 0:t.ownerDocument)||void 0===n?void 0:n.defaultView)||void 0===i?void 0:i[e])&&t instanceof t.ownerDocument.defaultView[e]}))}function g(t,e,n){var i;return"#text"===t.nodeName?i=n.document.createTextNode(t.data):"#comment"===t.nodeName?i=n.document.createComment(t.data):(e?i=n.document.createElementNS("http://www.w3.org/2000/svg",t.nodeName):"svg"===t.nodeName.toLowerCase()?(i=n.document.createElementNS("http://www.w3.org/2000/svg","svg"),e=!0):i=n.document.createElement(t.nodeName),t.attributes&&Object.entries(t.attributes).forEach((function(t){var e=t[0],n=t[1];return i.setAttribute(e,n)})),t.childNodes&&t.childNodes.forEach((function(t){return i.appendChild(g(t,e,n))})),n.valueDiffing&&(t.value&&f(i,"HTMLButtonElement","HTMLDataElement","HTMLInputElement","HTMLLIElement","HTMLMeterElement","HTMLOptionElement","HTMLProgressElement","HTMLParamElement")&&(i.value=t.value),t.checked&&f(i,"HTMLInputElement")&&(i.checked=t.checked),t.selected&&f(i,"HTMLOptionElement")&&(i.selected=t.selected))),i}var m=function(t,e){for(e=e.slice();e.length>0;){var n=e.splice(0,1)[0];t=t.childNodes[n]}return t};function v(t,e,n){var i,r,o,a=e[n._const.action],s=e[n._const.route];[n._const.addElement,n._const.addTextElement].includes(a)||(i=m(t,s));var l={diff:e,node:i};if(n.preDiffApply(l))return!0;switch(a){case n._const.addAttribute:if(!i||!f(i,"Element"))return!1;i.setAttribute(e[n._const.name],e[n._const.value]);break;case n._const.modifyAttribute:if(!i||!f(i,"Element"))return!1;i.setAttribute(e[n._const.name],e[n._const.newValue]),f(i,"HTMLInputElement")&&"value"===e[n._const.name]&&(i.value=e[n._const.newValue]);break;case n._const.removeAttribute:if(!i||!f(i,"Element"))return!1;i.removeAttribute(e[n._const.name]);break;case n._const.modifyTextElement:if(!i||!f(i,"Text"))return!1;n.textDiff(i,i.data,e[n._const.oldValue],e[n._const.newValue]),f(i.parentNode,"HTMLTextAreaElement")&&(i.parentNode.value=e[n._const.newValue]);break;case n._const.modifyValue:if(!i||void 0===i.value)return!1;i.value=e[n._const.newValue];break;case n._const.modifyComment:if(!i||!f(i,"Comment"))return!1;n.textDiff(i,i.data,e[n._const.oldValue],e[n._const.newValue]);break;case n._const.modifyChecked:if(!i||void 0===i.checked)return!1;i.checked=e[n._const.newValue];break;case n._const.modifySelected:if(!i||void 0===i.selected)return!1;i.selected=e[n._const.newValue];break;case n._const.replaceElement:var c="svg"===e[n._const.newValue].nodeName.toLowerCase()||"http://www.w3.org/2000/svg"===i.parentNode.namespaceURI;i.parentNode.replaceChild(g(e[n._const.newValue],c,n),i);break;case n._const.relocateGroup:Array.apply(void 0,new Array(e[n._const.groupLength])).map((function(){return i.removeChild(i.childNodes[e[n._const.from]])})).forEach((function(t,r){0===r&&(o=i.childNodes[e[n._const.to]]),i.insertBefore(t,o||null)}));break;case n._const.removeElement:i.parentNode.removeChild(i);break;case n._const.addElement:var u=(d=s.slice()).splice(d.length-1,1)[0];if(!f(i=m(t,d),"Element"))return!1;i.insertBefore(g(e[n._const.element],"http://www.w3.org/2000/svg"===i.namespaceURI,n),i.childNodes[u]||null);break;case n._const.removeTextElement:if(!i||3!==i.nodeType)return!1;var h=i.parentNode;h.removeChild(i),f(h,"HTMLTextAreaElement")&&(h.value="");break;case n._const.addTextElement:var d;if(u=(d=s.slice()).splice(d.length-1,1)[0],r=n.document.createTextNode(e[n._const.value]),!(i=m(t,d)).childNodes)return!1;i.insertBefore(r,i.childNodes[u]||null),f(i.parentNode,"HTMLTextAreaElement")&&(i.parentNode.value=e[n._const.value]);break;default:console.log("unknown action")}return n.postDiffApply({diff:l.diff,node:l.node,newNode:r}),!0}function y(t,e,n){var i=t[e];t[e]=t[n],t[n]=i}var b=function(){return b=Object.assign||function(t){for(var e,n=arguments,i=1,r=arguments.length;i<r;i++)for(var o in e=n[i])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t},b.apply(this,arguments)};"function"==typeof SuppressedError&&SuppressedError;var x=function(t){var e=[];return e.push(t.nodeName),"#text"!==t.nodeName&&"#comment"!==t.nodeName&&t.attributes&&(t.attributes.class&&e.push("".concat(t.nodeName,".").concat(t.attributes.class.replace(/ /g,"."))),t.attributes.id&&e.push("".concat(t.nodeName,"#").concat(t.attributes.id))),e},_=function(t){var e={},n={};return t.forEach((function(t){x(t).forEach((function(t){var i=t in e;i||t in n?i&&(delete e[t],n[t]=!0):e[t]=!0}))})),e},w=function(t,e){var n=_(t),i=_(e),r={};return Object.keys(n).forEach((function(t){i[t]&&(r[t]=!0)})),r},S=function(t){return delete t.outerDone,delete t.innerDone,delete t.valueDone,!t.childNodes||t.childNodes.every(S)},C=function(t){if(Object.prototype.hasOwnProperty.call(t,"data"))return{nodeName:"#text"===t.nodeName?"#text":"#comment",data:t.data};var e={nodeName:t.nodeName};return Object.prototype.hasOwnProperty.call(t,"attributes")&&(e.attributes=b({},t.attributes)),Object.prototype.hasOwnProperty.call(t,"checked")&&(e.checked=t.checked),Object.prototype.hasOwnProperty.call(t,"value")&&(e.value=t.value),Object.prototype.hasOwnProperty.call(t,"selected")&&(e.selected=t.selected),Object.prototype.hasOwnProperty.call(t,"childNodes")&&(e.childNodes=t.childNodes.map((function(t){return C(t)}))),e},k=function(t,e){if(!["nodeName","value","checked","selected","data"].every((function(n){return t[n]===e[n]})))return!1;if(Object.prototype.hasOwnProperty.call(t,"data"))return!0;if(Boolean(t.attributes)!==Boolean(e.attributes))return!1;if(Boolean(t.childNodes)!==Boolean(e.childNodes))return!1;if(t.attributes){var n=Object.keys(t.attributes),i=Object.keys(e.attributes);if(n.length!==i.length)return!1;if(!n.every((function(n){return t.attributes[n]===e.attributes[n]})))return!1}if(t.childNodes){if(t.childNodes.length!==e.childNodes.length)return!1;if(!t.childNodes.every((function(t,n){return k(t,e.childNodes[n])})))return!1}return!0},A=function(t,e,n,i,r){if(void 0===r&&(r=!1),!t||!e)return!1;if(t.nodeName!==e.nodeName)return!1;if(["#text","#comment"].includes(t.nodeName))return!!r||t.data===e.data;if(t.nodeName in n)return!0;if(t.attributes&&e.attributes){if(t.attributes.id){if(t.attributes.id!==e.attributes.id)return!1;if("".concat(t.nodeName,"#").concat(t.attributes.id)in n)return!0}if(t.attributes.class&&t.attributes.class===e.attributes.class&&"".concat(t.nodeName,".").concat(t.attributes.class.replace(/ /g,"."))in n)return!0}if(i)return!0;var o=t.childNodes?t.childNodes.slice().reverse():[],a=e.childNodes?e.childNodes.slice().reverse():[];if(o.length!==a.length)return!1;if(r)return o.every((function(t,e){return t.nodeName===a[e].nodeName}));var s=w(o,a);return o.every((function(t,e){return A(t,a[e],s,!0,!0)}))},M=function(t,e){return Array.apply(void 0,new Array(t)).map((function(){return e}))},T=function(){function t(){this.list=[]}return t.prototype.add=function(t){var e;(e=this.list).push.apply(e,t)},t.prototype.forEach=function(t){this.list.forEach((function(e){return t(e)}))},t}();function I(t,e){var n,i,r=t;for(e=e.slice();e.length>0;)i=e.splice(0,1)[0],n=r,r=r.childNodes?r.childNodes[i]:void 0;return{node:r,parentNode:n,nodeIndex:i}}function E(t,e,n){return e.forEach((function(e){!function(t,e,n){var i,r,o,a;if(![n._const.addElement,n._const.addTextElement].includes(e[n._const.action])){var s=I(t,e[n._const.route]);r=s.node,o=s.parentNode,a=s.nodeIndex}var l,c,u=[],h={diff:e,node:r};if(n.preVirtualDiffApply(h))return!0;switch(e[n._const.action]){case n._const.addAttribute:r.attributes||(r.attributes={}),r.attributes[e[n._const.name]]=e[n._const.value],"checked"===e[n._const.name]?r.checked=!0:"selected"===e[n._const.name]?r.selected=!0:"INPUT"===r.nodeName&&"value"===e[n._const.name]&&(r.value=e[n._const.value]);break;case n._const.modifyAttribute:r.attributes[e[n._const.name]]=e[n._const.newValue];break;case n._const.removeAttribute:delete r.attributes[e[n._const.name]],0===Object.keys(r.attributes).length&&delete r.attributes,"checked"===e[n._const.name]?r.checked=!1:"selected"===e[n._const.name]?delete r.selected:"INPUT"===r.nodeName&&"value"===e[n._const.name]&&delete r.value;break;case n._const.modifyTextElement:r.data=e[n._const.newValue],"TEXTAREA"===o.nodeName&&(o.value=e[n._const.newValue]);break;case n._const.modifyValue:r.value=e[n._const.newValue];break;case n._const.modifyComment:r.data=e[n._const.newValue];break;case n._const.modifyChecked:r.checked=e[n._const.newValue];break;case n._const.modifySelected:r.selected=e[n._const.newValue];break;case n._const.replaceElement:l=C(e[n._const.newValue]),o.childNodes[a]=l;break;case n._const.relocateGroup:r.childNodes.splice(e[n._const.from],e[n._const.groupLength]).reverse().forEach((function(t){return r.childNodes.splice(e[n._const.to],0,t)})),r.subsets&&r.subsets.forEach((function(t){if(e[n._const.from]<e[n._const.to]&&t.oldValue<=e[n._const.to]&&t.oldValue>e[n._const.from])t.oldValue-=e[n._const.groupLength],(i=t.oldValue+t.length-e[n._const.to])>0&&(u.push({oldValue:e[n._const.to]+e[n._const.groupLength],newValue:t.newValue+t.length-i,length:i}),t.length-=i);else if(e[n._const.from]>e[n._const.to]&&t.oldValue>e[n._const.to]&&t.oldValue<e[n._const.from]){var i;t.oldValue+=e[n._const.groupLength],(i=t.oldValue+t.length-e[n._const.to])>0&&(u.push({oldValue:e[n._const.to]+e[n._const.groupLength],newValue:t.newValue+t.length-i,length:i}),t.length-=i)}else t.oldValue===e[n._const.from]&&(t.oldValue=e[n._const.to])}));break;case n._const.removeElement:o.childNodes.splice(a,1),o.subsets&&o.subsets.forEach((function(t){t.oldValue>a?t.oldValue-=1:t.oldValue===a?t.delete=!0:t.oldValue<a&&t.oldValue+t.length>a&&(t.oldValue+t.length-1===a?t.length--:(u.push({newValue:t.newValue+a-t.oldValue,oldValue:a,length:t.length-a+t.oldValue-1}),t.length=a-t.oldValue))})),r=o;break;case n._const.addElement:var d=(c=e[n._const.route].slice()).splice(c.length-1,1)[0];r=null===(i=I(t,c))||void 0===i?void 0:i.node,l=C(e[n._const.element]),r.childNodes||(r.childNodes=[]),d>=r.childNodes.length?r.childNodes.push(l):r.childNodes.splice(d,0,l),r.subsets&&r.subsets.forEach((function(t){if(t.oldValue>=d)t.oldValue+=1;else if(t.oldValue<d&&t.oldValue+t.length>d){var e=t.oldValue+t.length-d;u.push({newValue:t.newValue+t.length-e,oldValue:d+1,length:e}),t.length-=e}}));break;case n._const.removeTextElement:o.childNodes.splice(a,1),"TEXTAREA"===o.nodeName&&delete o.value,o.subsets&&o.subsets.forEach((function(t){t.oldValue>a?t.oldValue-=1:t.oldValue===a?t.delete=!0:t.oldValue<a&&t.oldValue+t.length>a&&(t.oldValue+t.length-1===a?t.length--:(u.push({newValue:t.newValue+a-t.oldValue,oldValue:a,length:t.length-a+t.oldValue-1}),t.length=a-t.oldValue))})),r=o;break;case n._const.addTextElement:var p=(c=e[n._const.route].slice()).splice(c.length-1,1)[0];l={nodeName:"#text",data:e[n._const.value]},(r=I(t,c).node).childNodes||(r.childNodes=[]),p>=r.childNodes.length?r.childNodes.push(l):r.childNodes.splice(p,0,l),"TEXTAREA"===r.nodeName&&(r.value=e[n._const.newValue]),r.subsets&&r.subsets.forEach((function(t){if(t.oldValue>=p&&(t.oldValue+=1),t.oldValue<p&&t.oldValue+t.length>p){var e=t.oldValue+t.length-p;u.push({newValue:t.newValue+t.length-e,oldValue:p+1,length:e}),t.length-=e}}));break;default:console.log("unknown action")}r.subsets&&(r.subsets=r.subsets.filter((function(t){return!t.delete&&t.oldValue!==t.newValue})),u.length&&(r.subsets=r.subsets.concat(u))),n.postVirtualDiffApply({node:h.node,diff:h.diff,newNode:l})}(t,e,n)})),!0}function O(t,e){void 0===e&&(e={valueDiffing:!0});var n={nodeName:t.nodeName};return f(t,"Text","Comment")?n.data=t.data:(t.attributes&&t.attributes.length>0&&(n.attributes={},Array.prototype.slice.call(t.attributes).forEach((function(t){return n.attributes[t.name]=t.value}))),t.childNodes&&t.childNodes.length>0&&(n.childNodes=[],Array.prototype.slice.call(t.childNodes).forEach((function(t){return n.childNodes.push(O(t,e))}))),e.valueDiffing&&(f(t,"HTMLTextAreaElement")&&(n.value=t.value),f(t,"HTMLInputElement")&&["radio","checkbox"].includes(t.type.toLowerCase())&&void 0!==t.checked?n.checked=t.checked:f(t,"HTMLButtonElement","HTMLDataElement","HTMLInputElement","HTMLLIElement","HTMLMeterElement","HTMLOptionElement","HTMLProgressElement","HTMLParamElement")&&(n.value=t.value),f(t,"HTMLOptionElement")&&(n.selected=t.selected))),n}var D=/<\s*\/*[a-zA-Z:_][a-zA-Z0-9:_\-.]*\s*(?:"[^"]*"['"]*|'[^']*'['"]*|[^'"/>])*\/*\s*>|<!--(?:.|\n|\r)*?-->/g,L=/\s([^'"/\s><]+?)[\s/>]|([^\s=]+)=\s?(".*?"|'.*?')/g;function P(t){return t.replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&amp;/g,"&")}var N={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,menuItem:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},R=function(t,e){var n={nodeName:"",attributes:{}},i=!1,r=t.match(/<\/?([^\s]+?)[/\s>]/);if(r&&(n.nodeName=e||"svg"===r[1]?r[1]:r[1].toUpperCase(),(N[r[1]]||"/"===t.charAt(t.length-2))&&(i=!0),n.nodeName.startsWith("!--"))){var o=t.indexOf("--\x3e");return{type:"comment",node:{nodeName:"#comment",data:-1!==o?t.slice(4,o):""},voidElement:i}}for(var a=new RegExp(L),s=null,l=!1;!l;)if(null===(s=a.exec(t)))l=!0;else if(s[0].trim())if(s[1]){var c=s[1].trim(),u=[c,""];c.indexOf("=")>-1&&(u=c.split("=")),n.attributes[u[0]]=u[1],a.lastIndex--}else s[2]&&(n.attributes[s[2]]=s[3].trim().substring(1,s[3].length-1));return{type:"tag",node:n,voidElement:i}},B=function(t,e){void 0===e&&(e={valueDiffing:!0,caseSensitive:!1});var n,i=[],r=-1,o=[],a=!1;if(0!==t.indexOf("<")){var s=t.indexOf("<");i.push({nodeName:"#text",data:-1===s?t:t.substring(0,s)})}return t.replace(D,(function(s,l){var c="/"!==s.charAt(1),u=s.startsWith("\x3c!--"),h=l+s.length,d=t.charAt(h);if(u){var p=R(s,e.caseSensitive).node;if(r<0)return i.push(p),"";var f=o[r];return f&&p.nodeName&&(f.node.childNodes||(f.node.childNodes=[]),f.node.childNodes.push(p)),""}if(c){if("svg"===(n=R(s,e.caseSensitive||a)).node.nodeName&&(a=!0),r++,!n.voidElement&&d&&"<"!==d){n.node.childNodes||(n.node.childNodes=[]);var g=P(t.slice(h,t.indexOf("<",h)));n.node.childNodes.push({nodeName:"#text",data:g}),e.valueDiffing&&"TEXTAREA"===n.node.nodeName&&(n.node.value=g)}0===r&&n.node.nodeName&&i.push(n.node);var m=o[r-1];m&&n.node.nodeName&&(m.node.childNodes||(m.node.childNodes=[]),m.node.childNodes.push(n.node)),o[r]=n}if((!c||n.voidElement)&&(r>-1&&(n.voidElement||e.caseSensitive&&n.node.nodeName===s.slice(2,-1)||!e.caseSensitive&&n.node.nodeName.toUpperCase()===s.slice(2,-1).toUpperCase())&&--r>-1&&("svg"===n.node.nodeName&&(a=!1),n=o[r]),"<"!==d&&d)){var v=-1===r?i:o[r].node.childNodes||[],y=t.indexOf("<",h);g=P(t.slice(h,-1===y?void 0:y)),v.push({nodeName:"#text",data:g})}return""})),i[0]},z=function(){function t(t,e,n){this.options=n,this.t1="undefined"!=typeof Element&&f(t,"Element")?O(t,this.options):"string"==typeof t?B(t,this.options):JSON.parse(JSON.stringify(t)),this.t2="undefined"!=typeof Element&&f(e,"Element")?O(e,this.options):"string"==typeof e?B(e,this.options):JSON.parse(JSON.stringify(e)),this.diffcount=0,this.foundAll=!1,this.debug&&(this.t1Orig="undefined"!=typeof Element&&f(t,"Element")?O(t,this.options):"string"==typeof t?B(t,this.options):JSON.parse(JSON.stringify(t)),this.t2Orig="undefined"!=typeof Element&&f(e,"Element")?O(e,this.options):"string"==typeof e?B(e,this.options):JSON.parse(JSON.stringify(e))),this.tracker=new T}return t.prototype.init=function(){return this.findDiffs(this.t1,this.t2)},t.prototype.findDiffs=function(t,e){var n;do{if(this.options.debug&&(this.diffcount+=1,this.diffcount>this.options.diffcap))throw new Error("surpassed diffcap:".concat(JSON.stringify(this.t1Orig)," -> ").concat(JSON.stringify(this.t2Orig)));0===(n=this.findNextDiff(t,e,[])).length&&(k(t,e)||(this.foundAll?console.error("Could not find remaining diffs!"):(this.foundAll=!0,S(t),n=this.findNextDiff(t,e,[])))),n.length>0&&(this.foundAll=!1,this.tracker.add(n),E(t,n,this.options))}while(n.length>0);return this.tracker.list},t.prototype.findNextDiff=function(t,e,n){var i,r;if(this.options.maxDepth&&n.length>this.options.maxDepth)return[];if(!t.outerDone){if(i=this.findOuterDiff(t,e,n),this.options.filterOuterDiff&&(r=this.options.filterOuterDiff(t,e,i))&&(i=r),i.length>0)return t.outerDone=!0,i;t.outerDone=!0}if(Object.prototype.hasOwnProperty.call(t,"data"))return[];if(!t.innerDone){if((i=this.findInnerDiff(t,e,n)).length>0)return i;t.innerDone=!0}if(this.options.valueDiffing&&!t.valueDone){if((i=this.findValueDiff(t,e,n)).length>0)return t.valueDone=!0,i;t.valueDone=!0}return[]},t.prototype.findOuterDiff=function(t,e,n){var i,r,o,a,s,l,c=[];if(t.nodeName!==e.nodeName){if(!n.length)throw new Error("Top level nodes have to be of the same kind.");return[(new p).setValue(this.options._const.action,this.options._const.replaceElement).setValue(this.options._const.oldValue,C(t)).setValue(this.options._const.newValue,C(e)).setValue(this.options._const.route,n)]}if(n.length&&this.options.diffcap<Math.abs((t.childNodes||[]).length-(e.childNodes||[]).length))return[(new p).setValue(this.options._const.action,this.options._const.replaceElement).setValue(this.options._const.oldValue,C(t)).setValue(this.options._const.newValue,C(e)).setValue(this.options._const.route,n)];if(Object.prototype.hasOwnProperty.call(t,"data")&&t.data!==e.data)return"#text"===t.nodeName?[(new p).setValue(this.options._const.action,this.options._const.modifyTextElement).setValue(this.options._const.route,n).setValue(this.options._const.oldValue,t.data).setValue(this.options._const.newValue,e.data)]:[(new p).setValue(this.options._const.action,this.options._const.modifyComment).setValue(this.options._const.route,n).setValue(this.options._const.oldValue,t.data).setValue(this.options._const.newValue,e.data)];for(r=t.attributes?Object.keys(t.attributes).sort():[],o=e.attributes?Object.keys(e.attributes).sort():[],a=r.length,l=0;l<a;l++)i=r[l],-1===(s=o.indexOf(i))?c.push((new p).setValue(this.options._const.action,this.options._const.removeAttribute).setValue(this.options._const.route,n).setValue(this.options._const.name,i).setValue(this.options._const.value,t.attributes[i])):(o.splice(s,1),t.attributes[i]!==e.attributes[i]&&c.push((new p).setValue(this.options._const.action,this.options._const.modifyAttribute).setValue(this.options._const.route,n).setValue(this.options._const.name,i).setValue(this.options._const.oldValue,t.attributes[i]).setValue(this.options._const.newValue,e.attributes[i])));for(a=o.length,l=0;l<a;l++)i=o[l],c.push((new p).setValue(this.options._const.action,this.options._const.addAttribute).setValue(this.options._const.route,n).setValue(this.options._const.name,i).setValue(this.options._const.value,e.attributes[i]));return c},t.prototype.findInnerDiff=function(t,e,n){var i=t.childNodes?t.childNodes.slice():[],r=e.childNodes?e.childNodes.slice():[],o=Math.max(i.length,r.length),a=Math.abs(i.length-r.length),s=[],l=0;if(!this.options.maxChildCount||o<this.options.maxChildCount){var c=Boolean(t.subsets&&t.subsetsAge--),u=c?t.subsets:t.childNodes&&e.childNodes?function(t,e){for(var n=t.childNodes?t.childNodes:[],i=e.childNodes?e.childNodes:[],r=M(n.length,!1),o=M(i.length,!1),a=[],s=function(){return arguments[1]},l=!1,c=function(){var t=function(t,e,n,i){var r=0,o=[],a=t.length,s=e.length,l=Array.apply(void 0,new Array(a+1)).map((function(){return[]})),c=w(t,e),u=a===s;u&&t.some((function(t,n){var i=x(t),r=x(e[n]);return i.length!==r.length?(u=!1,!0):(i.some((function(t,e){if(t!==r[e])return u=!1,!0})),!u||void 0)}));for(var h=0;h<a;h++)for(var d=t[h],p=0;p<s;p++){var f=e[p];n[h]||i[p]||!A(d,f,c,u)?l[h+1][p+1]=0:(l[h+1][p+1]=l[h][p]?l[h][p]+1:1,l[h+1][p+1]>=r&&(r=l[h+1][p+1],o=[h+1,p+1]))}return 0!==r&&{oldValue:o[0]-r,newValue:o[1]-r,length:r}}(n,i,r,o);t?(a.push(t),Array.apply(void 0,new Array(t.length)).map(s).forEach((function(e){return function(t,e,n,i){t[n.oldValue+i]=!0,e[n.newValue+i]=!0}(r,o,t,e)}))):l=!0};!l;)c();return t.subsets=a,t.subsetsAge=100,a}(t,e):[];if(u.length>0&&(s=this.attemptGroupRelocation(t,e,u,n,c)).length>0)return s}for(var h=0;h<o;h+=1){var d=i[h],f=r[h];a&&(d&&!f?"#text"===d.nodeName?(s.push((new p).setValue(this.options._const.action,this.options._const.removeTextElement).setValue(this.options._const.route,n.concat(l)).setValue(this.options._const.value,d.data)),l-=1):(s.push((new p).setValue(this.options._const.action,this.options._const.removeElement).setValue(this.options._const.route,n.concat(l)).setValue(this.options._const.element,C(d))),l-=1):f&&!d&&("#text"===f.nodeName?s.push((new p).setValue(this.options._const.action,this.options._const.addTextElement).setValue(this.options._const.route,n.concat(l)).setValue(this.options._const.value,f.data)):s.push((new p).setValue(this.options._const.action,this.options._const.addElement).setValue(this.options._const.route,n.concat(l)).setValue(this.options._const.element,C(f))))),d&&f&&(!this.options.maxChildCount||o<this.options.maxChildCount?s=s.concat(this.findNextDiff(d,f,n.concat(l))):k(d,f)||(i.length>r.length?("#text"===d.nodeName?s.push((new p).setValue(this.options._const.action,this.options._const.removeTextElement).setValue(this.options._const.route,n.concat(l)).setValue(this.options._const.value,d.data)):s.push((new p).setValue(this.options._const.action,this.options._const.removeElement).setValue(this.options._const.element,C(d)).setValue(this.options._const.route,n.concat(l))),i.splice(h,1),h-=1,l-=1,a-=1):i.length<r.length?(s=s.concat([(new p).setValue(this.options._const.action,this.options._const.addElement).setValue(this.options._const.element,C(f)).setValue(this.options._const.route,n.concat(l))]),i.splice(h,0,C(f)),a-=1):s=s.concat([(new p).setValue(this.options._const.action,this.options._const.replaceElement).setValue(this.options._const.oldValue,C(d)).setValue(this.options._const.newValue,C(f)).setValue(this.options._const.route,n.concat(l))]))),l+=1}return t.innerDone=!0,s},t.prototype.attemptGroupRelocation=function(t,e,n,i,r){for(var o,a,s,l,c,u=function(t,e,n){var i=t.childNodes?M(t.childNodes.length,!0):[],r=e.childNodes?M(e.childNodes.length,!0):[],o=0;return n.forEach((function(t){for(var e=t.oldValue+t.length,n=t.newValue+t.length,a=t.oldValue;a<e;a+=1)i[a]=o;for(a=t.newValue;a<n;a+=1)r[a]=o;o+=1})),{gaps1:i,gaps2:r}}(t,e,n),h=u.gaps1,d=u.gaps2,f=t.childNodes.slice(),g=e.childNodes.slice(),m=Math.min(h.length,d.length),v=[],y=0,b=0;y<m;b+=1,y+=1)if(!r||!0!==h[y]&&!0!==d[y])if(!0===h[b])if("#text"===(l=f[b]).nodeName)if("#text"===g[y].nodeName){if(l.data!==g[y].data){for(var x=b;f.length>x+1&&"#text"===f[x+1].nodeName;)if(x+=1,g[y].data===f[x].data){c=!0;break}c||v.push((new p).setValue(this.options._const.action,this.options._const.modifyTextElement).setValue(this.options._const.route,i.concat(b)).setValue(this.options._const.oldValue,l.data).setValue(this.options._const.newValue,g[y].data))}}else v.push((new p).setValue(this.options._const.action,this.options._const.removeTextElement).setValue(this.options._const.route,i.concat(b)).setValue(this.options._const.value,l.data)),h.splice(b,1),f.splice(b,1),m=Math.min(h.length,d.length),b-=1,y-=1;else!0===d[y]?v.push((new p).setValue(this.options._const.action,this.options._const.replaceElement).setValue(this.options._const.oldValue,C(l)).setValue(this.options._const.newValue,C(g[y])).setValue(this.options._const.route,i.concat(b))):(v.push((new p).setValue(this.options._const.action,this.options._const.removeElement).setValue(this.options._const.route,i.concat(b)).setValue(this.options._const.element,C(l))),h.splice(b,1),f.splice(b,1),m=Math.min(h.length,d.length),b-=1,y-=1);else if(!0===d[y])"#text"===(l=g[y]).nodeName?(v.push((new p).setValue(this.options._const.action,this.options._const.addTextElement).setValue(this.options._const.route,i.concat(b)).setValue(this.options._const.value,l.data)),h.splice(b,0,!0),f.splice(b,0,{nodeName:"#text",data:l.data}),m=Math.min(h.length,d.length)):(v.push((new p).setValue(this.options._const.action,this.options._const.addElement).setValue(this.options._const.route,i.concat(b)).setValue(this.options._const.element,C(l))),h.splice(b,0,!0),f.splice(b,0,C(l)),m=Math.min(h.length,d.length));else if(h[b]!==d[y]){if(v.length>0)return v;if(s=n[h[b]],(a=Math.min(s.newValue,f.length-s.length))!==s.oldValue){o=!1;for(var _=0;_<s.length;_+=1)A(f[a+_],f[s.oldValue+_],{},!1,!0)||(o=!0);if(o)return[(new p).setValue(this.options._const.action,this.options._const.relocateGroup).setValue(this.options._const.groupLength,s.length).setValue(this.options._const.from,s.oldValue).setValue(this.options._const.to,a).setValue(this.options._const.route,i)]}}return v},t.prototype.findValueDiff=function(t,e,n){var i=[];return t.selected!==e.selected&&i.push((new p).setValue(this.options._const.action,this.options._const.modifySelected).setValue(this.options._const.oldValue,t.selected).setValue(this.options._const.newValue,e.selected).setValue(this.options._const.route,n)),(t.value||e.value)&&t.value!==e.value&&"OPTION"!==t.nodeName&&i.push((new p).setValue(this.options._const.action,this.options._const.modifyValue).setValue(this.options._const.oldValue,t.value||"").setValue(this.options._const.newValue,e.value||"").setValue(this.options._const.route,n)),t.checked!==e.checked&&i.push((new p).setValue(this.options._const.action,this.options._const.modifyChecked).setValue(this.options._const.oldValue,t.checked).setValue(this.options._const.newValue,e.checked).setValue(this.options._const.route,n)),i},t}(),F={debug:!1,diffcap:10,maxDepth:!1,maxChildCount:50,valueDiffing:!0,textDiff:function(t,e,n,i){t.data=i},preVirtualDiffApply:function(){},postVirtualDiffApply:function(){},preDiffApply:function(){},postDiffApply:function(){},filterOuterDiff:null,compress:!1,_const:!1,document:!("undefined"==typeof window||!window.document)&&window.document,components:[]},V=function(){function t(t){if(void 0===t&&(t={}),Object.entries(F).forEach((function(e){var n=e[0],i=e[1];Object.prototype.hasOwnProperty.call(t,n)||(t[n]=i)})),!t._const){var e=["addAttribute","modifyAttribute","removeAttribute","modifyTextElement","relocateGroup","removeElement","addElement","removeTextElement","addTextElement","replaceElement","modifyValue","modifyChecked","modifySelected","modifyComment","action","route","oldValue","newValue","element","group","groupLength","from","to","name","value","data","attributes","nodeName","childNodes","checked","selected"],n={};t.compress?e.forEach((function(t,e){return n[t]=e})):e.forEach((function(t){return n[t]=t})),t._const=n}this.options=t}return t.prototype.apply=function(t,e){return function(t,e,n){return e.every((function(e){return v(t,e,n)}))}(t,e,this.options)},t.prototype.undo=function(t,e){return function(t,e,n){(e=e.slice()).reverse(),e.forEach((function(e){!function(t,e,n){switch(e[n._const.action]){case n._const.addAttribute:e[n._const.action]=n._const.removeAttribute,v(t,e,n);break;case n._const.modifyAttribute:y(e,n._const.oldValue,n._const.newValue),v(t,e,n);break;case n._const.removeAttribute:e[n._const.action]=n._const.addAttribute,v(t,e,n);break;case n._const.modifyTextElement:case n._const.modifyValue:case n._const.modifyComment:case n._const.modifyChecked:case n._const.modifySelected:case n._const.replaceElement:y(e,n._const.oldValue,n._const.newValue),v(t,e,n);break;case n._const.relocateGroup:y(e,n._const.from,n._const.to),v(t,e,n);break;case n._const.removeElement:e[n._const.action]=n._const.addElement,v(t,e,n);break;case n._const.addElement:e[n._const.action]=n._const.removeElement,v(t,e,n);break;case n._const.removeTextElement:e[n._const.action]=n._const.addTextElement,v(t,e,n);break;case n._const.addTextElement:e[n._const.action]=n._const.removeTextElement,v(t,e,n);break;default:console.log("unknown action")}}(t,e,n)}))}(t,e,this.options)},t.prototype.diff=function(t,e){return new z(t,e,this.options).init()},t}();const H=(t,e,n,{classes:i,format:r,hiddenHeader:o,sortable:a,scrollY:s,type:l},{noColumnWidths:c,unhideHeader:u})=>({nodeName:"TR",childNodes:t.map(((t,h)=>{const p=e[h]||{type:l,format:r,sortable:!0,searchable:!0};if(p.hidden)return;const f=t.attributes?{...t.attributes}:{};if(p.sortable&&a&&(!s.length||u)&&(p.filter?f["data-filterable"]="true":f["data-sortable"]="true"),p.headerClass&&(f.class=d(f.class,p.headerClass)),n.sort&&n.sort.column===h){const t="asc"===n.sort.dir?i.ascending:i.descending;f.class=d(f.class,t),f["aria-sort"]="asc"===n.sort.dir?"ascending":"descending"}else n.filters[h]&&(f.class=d(f.class,i.filterActive));if(n.widths[h]&&!c){const t=`width: ${n.widths[h]}%;`;f.style=d(f.style,t)}if(s.length&&!u){const t="padding-bottom: 0;padding-top: 0;border: 0;";f.style=d(f.style,t)}const g="html"===t.type?t.data:[{nodeName:"#text",data:t.text??String(t.data)}];return{nodeName:"TH",attributes:f,childNodes:!o&&!s.length||u?p.sortable&&a?[{nodeName:"BUTTON",attributes:{class:p.filter?i.filter:i.sorter},childNodes:g}]:g:[{nodeName:"#text",data:""}]}})).filter((t=>t))}),W=(t,e,n,i,r,o,{classes:s,hiddenHeader:l,header:c,footer:u,format:h,sortable:p,scrollY:f,type:g,rowRender:m,tabIndex:v},{noColumnWidths:y,unhideHeader:b,renderHeader:x},_,w)=>{const S={nodeName:"TABLE",attributes:{...t},childNodes:[{nodeName:"TBODY",childNodes:n.map((({row:t,index:e})=>{const n={nodeName:"TR",attributes:{...t.attributes,"data-index":String(e)},childNodes:t.cells.map(((t,n)=>{const o=i[n]||{type:g,format:h,sortable:!0,searchable:!0};if(o.hidden)return;const s={nodeName:"TD",attributes:t.attributes?{...t.attributes}:{},childNodes:"html"===o.type?t.data:[{nodeName:"#text",data:a(t)}]};if(c||u||!r.widths[n]||y||(s.attributes.style=d(s.attributes.style,`width: ${r.widths[n]}%;`)),o.cellClass&&(s.attributes.class=d(s.attributes.class,o.cellClass)),o.render){const i=o.render(t.data,s,e,n);if(i){if("string"!=typeof i)return i;{const t=B(`<td>${i}</td>`);1===t.childNodes.length&&["#text","#comment"].includes(t.childNodes[0].nodeName)?s.childNodes[0].data=i:s.childNodes=t.childNodes}}}return s})).filter((t=>t))};if(e===o&&(n.attributes.class=d(n.attributes.class,s.cursor)),m){const i=m(t,n,e);if(i){if("string"!=typeof i)return i;{const t=B(`<tr>${i}</tr>`);!t.childNodes||1===t.childNodes.length&&["#text","#comment"].includes(t.childNodes[0].nodeName)?n.childNodes[0].data=i:n.childNodes=t.childNodes}}}return n}))}]};if(S.attributes.class=d(S.attributes.class,s.table),c||u||x){const t=H(e,i,r,{classes:s,hiddenHeader:l,sortable:p,scrollY:f},{noColumnWidths:y,unhideHeader:b});if(c||x){const e={nodeName:"THEAD",childNodes:[t]};!f.length&&!l||b||(e.attributes={style:"height: 0px;"}),S.childNodes.unshift(e)}if(u){const e={nodeName:"TFOOT",childNodes:[c?structuredClone(t):t]};!f.length&&!l||b||(e.attributes={style:"height: 0px;"}),S.childNodes.push(e)}}return _.forEach((t=>S.childNodes.push(t))),w.forEach((t=>S.childNodes.push(t))),!1!==v&&(S.attributes.tabindex=String(v)),S};function j(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}"undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:void 0!==t||"undefined"!=typeof self&&self;var Y=j({exports:{}}.exports=function(){var t=6e4,e=36e5,n="millisecond",i="second",r="minute",o="hour",a="day",s="week",l="month",c="quarter",u="year",h="date",d="Invalid Date",p=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,f=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,g={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(t){var e=["th","st","nd","rd"],n=t%100;return"["+t+(e[(n-20)%10]||e[n]||e[0])+"]"}},m=function(t,e,n){var i=String(t);return!i||i.length>=e?t:""+Array(e+1-i.length).join(n)+t},v={s:m,z:function(t){var e=-t.utcOffset(),n=Math.abs(e),i=Math.floor(n/60),r=n%60;return(e<=0?"+":"-")+m(i,2,"0")+":"+m(r,2,"0")},m:function t(e,n){if(e.date()<n.date())return-t(n,e);var i=12*(n.year()-e.year())+(n.month()-e.month()),r=e.clone().add(i,l),o=n-r<0,a=e.clone().add(i+(o?-1:1),l);return+(-(i+(n-r)/(o?r-a:a-r))||0)},a:function(t){return t<0?Math.ceil(t)||0:Math.floor(t)},p:function(t){return{M:l,y:u,w:s,d:a,D:h,h:o,m:r,s:i,ms:n,Q:c}[t]||String(t||"").toLowerCase().replace(/s$/,"")},u:function(t){return void 0===t}},y="en",b={};b[y]=g;var x="$isDayjsObject",_=function(t){return t instanceof k||!(!t||!t[x])},w=function t(e,n,i){var r;if(!e)return y;if("string"==typeof e){var o=e.toLowerCase();b[o]&&(r=o),n&&(b[o]=n,r=o);var a=e.split("-");if(!r&&a.length>1)return t(a[0])}else{var s=e.name;b[s]=e,r=s}return!i&&r&&(y=r),r||!i&&y},S=function(t,e){if(_(t))return t.clone();var n="object"==typeof e?e:{};return n.date=t,n.args=arguments,new k(n)},C=v;C.l=w,C.i=_,C.w=function(t,e){return S(t,{locale:e.$L,utc:e.$u,x:e.$x,$offset:e.$offset})};var k=function(){function g(t){this.$L=w(t.locale,null,!0),this.parse(t),this.$x=this.$x||t.x||{},this[x]=!0}var m=g.prototype;return m.parse=function(t){this.$d=function(t){var e=t.date,n=t.utc;if(null===e)return new Date(NaN);if(C.u(e))return new Date;if(e instanceof Date)return new Date(e);if("string"==typeof e&&!/Z$/i.test(e)){var i=e.match(p);if(i){var r=i[2]-1||0,o=(i[7]||"0").substring(0,3);return n?new Date(Date.UTC(i[1],r,i[3]||1,i[4]||0,i[5]||0,i[6]||0,o)):new Date(i[1],r,i[3]||1,i[4]||0,i[5]||0,i[6]||0,o)}}return new Date(e)}(t),this.init()},m.init=function(){var t=this.$d;this.$y=t.getFullYear(),this.$M=t.getMonth(),this.$D=t.getDate(),this.$W=t.getDay(),this.$H=t.getHours(),this.$m=t.getMinutes(),this.$s=t.getSeconds(),this.$ms=t.getMilliseconds()},m.$utils=function(){return C},m.isValid=function(){return!(this.$d.toString()===d)},m.isSame=function(t,e){var n=S(t);return this.startOf(e)<=n&&n<=this.endOf(e)},m.isAfter=function(t,e){return S(t)<this.startOf(e)},m.isBefore=function(t,e){return this.endOf(e)<S(t)},m.$g=function(t,e,n){return C.u(t)?this[e]:this.set(n,t)},m.unix=function(){return Math.floor(this.valueOf()/1e3)},m.valueOf=function(){return this.$d.getTime()},m.startOf=function(t,e){var n=this,c=!!C.u(e)||e,d=C.p(t),p=function(t,e){var i=C.w(n.$u?Date.UTC(n.$y,e,t):new Date(n.$y,e,t),n);return c?i:i.endOf(a)},f=function(t,e){return C.w(n.toDate()[t].apply(n.toDate("s"),(c?[0,0,0,0]:[23,59,59,999]).slice(e)),n)},g=this.$W,m=this.$M,v=this.$D,y="set"+(this.$u?"UTC":"");switch(d){case u:return c?p(1,0):p(31,11);case l:return c?p(1,m):p(0,m+1);case s:var b=this.$locale().weekStart||0,x=(g<b?g+7:g)-b;return p(c?v-x:v+(6-x),m);case a:case h:return f(y+"Hours",0);case o:return f(y+"Minutes",1);case r:return f(y+"Seconds",2);case i:return f(y+"Milliseconds",3);default:return this.clone()}},m.endOf=function(t){return this.startOf(t,!1)},m.$set=function(t,e){var s,c=C.p(t),d="set"+(this.$u?"UTC":""),p=(s={},s[a]=d+"Date",s[h]=d+"Date",s[l]=d+"Month",s[u]=d+"FullYear",s[o]=d+"Hours",s[r]=d+"Minutes",s[i]=d+"Seconds",s[n]=d+"Milliseconds",s)[c],f=c===a?this.$D+(e-this.$W):e;if(c===l||c===u){var g=this.clone().set(h,1);g.$d[p](f),g.init(),this.$d=g.set(h,Math.min(this.$D,g.daysInMonth())).$d}else p&&this.$d[p](f);return this.init(),this},m.set=function(t,e){return this.clone().$set(t,e)},m.get=function(t){return this[C.p(t)]()},m.add=function(n,c){var h,d=this;n=Number(n);var p=C.p(c),f=function(t){var e=S(d);return C.w(e.date(e.date()+Math.round(t*n)),d)};if(p===l)return this.set(l,this.$M+n);if(p===u)return this.set(u,this.$y+n);if(p===a)return f(1);if(p===s)return f(7);var g=(h={},h[r]=t,h[o]=e,h[i]=1e3,h)[p]||1,m=this.$d.getTime()+n*g;return C.w(m,this)},m.subtract=function(t,e){return this.add(-1*t,e)},m.format=function(t){var e=this,n=this.$locale();if(!this.isValid())return n.invalidDate||d;var i=t||"YYYY-MM-DDTHH:mm:ssZ",r=C.z(this),o=this.$H,a=this.$m,s=this.$M,l=n.weekdays,c=n.months,u=n.meridiem,h=function(t,n,r,o){return t&&(t[n]||t(e,i))||r[n].slice(0,o)},p=function(t){return C.s(o%12||12,t,"0")},g=u||function(t,e,n){var i=t<12?"AM":"PM";return n?i.toLowerCase():i};return i.replace(f,(function(t,i){return i||function(t){switch(t){case"YY":return String(e.$y).slice(-2);case"YYYY":return C.s(e.$y,4,"0");case"M":return s+1;case"MM":return C.s(s+1,2,"0");case"MMM":return h(n.monthsShort,s,c,3);case"MMMM":return h(c,s);case"D":return e.$D;case"DD":return C.s(e.$D,2,"0");case"d":return String(e.$W);case"dd":return h(n.weekdaysMin,e.$W,l,2);case"ddd":return h(n.weekdaysShort,e.$W,l,3);case"dddd":return l[e.$W];case"H":return String(o);case"HH":return C.s(o,2,"0");case"h":return p(1);case"hh":return p(2);case"a":return g(o,a,!0);case"A":return g(o,a,!1);case"m":return String(a);case"mm":return C.s(a,2,"0");case"s":return String(e.$s);case"ss":return C.s(e.$s,2,"0");case"SSS":return C.s(e.$ms,3,"0");case"Z":return r}return null}(t)||r.replace(":","")}))},m.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},m.diff=function(n,h,d){var p,f=this,g=C.p(h),m=S(n),v=(m.utcOffset()-this.utcOffset())*t,y=this-m,b=function(){return C.m(f,m)};switch(g){case u:p=b()/12;break;case l:p=b();break;case c:p=b()/3;break;case s:p=(y-v)/6048e5;break;case a:p=(y-v)/864e5;break;case o:p=y/e;break;case r:p=y/t;break;case i:p=y/1e3;break;default:p=y}return d?p:C.a(p)},m.daysInMonth=function(){return this.endOf(l).$D},m.$locale=function(){return b[this.$L]},m.locale=function(t,e){if(!t)return this.$L;var n=this.clone(),i=w(t,e,!0);return i&&(n.$L=i),n},m.clone=function(){return C.w(this.$d,this)},m.toDate=function(){return new Date(this.valueOf())},m.toJSON=function(){return this.isValid()?this.toISOString():null},m.toISOString=function(){return this.$d.toISOString()},m.toString=function(){return this.$d.toUTCString()},g}(),A=k.prototype;return S.prototype=A,[["$ms",n],["$s",i],["$m",r],["$H",o],["$W",a],["$M",l],["$y",u],["$D",h]].forEach((function(t){A[t[1]]=function(e){return this.$g(e,t[0],t[1])}})),S.extend=function(t,e){return t.$i||(t(e,k,S),t.$i=!0),S},S.locale=w,S.isDayjs=_,S.unix=function(t){return S(1e3*t)},S.en=b[y],S.Ls=b,S.p={},S}()),X=j({exports:{}}.exports=function(){var t={LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY h:mm A",LLLL:"dddd, MMMM D, YYYY h:mm A"},e=/(\[[^[]*\])|([-_:/.,()\s]+)|(A|a|YYYY|YY?|MM?M?M?|Do|DD?|hh?|HH?|mm?|ss?|S{1,3}|z|ZZ?)/g,n=/\d\d/,i=/\d\d?/,r=/\d*[^-_:/,()\s\d]+/,o={},a=function(t){return(t=+t)+(t>68?1900:2e3)},s=function(t){return function(e){this[t]=+e}},l=[/[+-]\d\d:?(\d\d)?|Z/,function(t){(this.zone||(this.zone={})).offset=function(t){if(!t)return 0;if("Z"===t)return 0;var e=t.match(/([+-]|\d\d)/g),n=60*e[1]+(+e[2]||0);return 0===n?0:"+"===e[0]?-n:n}(t)}],c=function(t){var e=o[t];return e&&(e.indexOf?e:e.s.concat(e.f))},u=function(t,e){var n,i=o.meridiem;if(i){for(var r=1;r<=24;r+=1)if(t.indexOf(i(r,0,e))>-1){n=r>12;break}}else n=t===(e?"pm":"PM");return n},h={A:[r,function(t){this.afternoon=u(t,!1)}],a:[r,function(t){this.afternoon=u(t,!0)}],S:[/\d/,function(t){this.milliseconds=100*+t}],SS:[n,function(t){this.milliseconds=10*+t}],SSS:[/\d{3}/,function(t){this.milliseconds=+t}],s:[i,s("seconds")],ss:[i,s("seconds")],m:[i,s("minutes")],mm:[i,s("minutes")],H:[i,s("hours")],h:[i,s("hours")],HH:[i,s("hours")],hh:[i,s("hours")],D:[i,s("day")],DD:[n,s("day")],Do:[r,function(t){var e=o.ordinal,n=t.match(/\d+/);if(this.day=n[0],e)for(var i=1;i<=31;i+=1)e(i).replace(/\[|\]/g,"")===t&&(this.day=i)}],M:[i,s("month")],MM:[n,s("month")],MMM:[r,function(t){var e=c("months"),n=(c("monthsShort")||e.map((function(t){return t.slice(0,3)}))).indexOf(t)+1;if(n<1)throw new Error;this.month=n%12||n}],MMMM:[r,function(t){var e=c("months").indexOf(t)+1;if(e<1)throw new Error;this.month=e%12||e}],Y:[/[+-]?\d+/,s("year")],YY:[n,function(t){this.year=a(t)}],YYYY:[/\d{4}/,s("year")],Z:l,ZZ:l};function d(n){var i,r;i=n,r=o&&o.formats;for(var a=(n=i.replace(/(\[[^\]]+])|(LTS?|l{1,4}|L{1,4})/g,(function(e,n,i){var o=i&&i.toUpperCase();return n||r[i]||t[i]||r[o].replace(/(\[[^\]]+])|(MMMM|MM|DD|dddd)/g,(function(t,e,n){return e||n.slice(1)}))}))).match(e),s=a.length,l=0;l<s;l+=1){var c=a[l],u=h[c],d=u&&u[0],p=u&&u[1];a[l]=p?{regex:d,parser:p}:c.replace(/^\[|\]$/g,"")}return function(t){for(var e={},n=0,i=0;n<s;n+=1){var r=a[n];if("string"==typeof r)i+=r.length;else{var o=r.regex,l=r.parser,c=t.slice(i),u=o.exec(c)[0];l.call(e,u),t=t.replace(u,"")}}return function(t){var e=t.afternoon;if(void 0!==e){var n=t.hours;e?n<12&&(t.hours+=12):12===n&&(t.hours=0),delete t.afternoon}}(e),e}}return function(t,e,n){n.p.customParseFormat=!0,t&&t.parseTwoDigitYear&&(a=t.parseTwoDigitYear);var i=e.prototype,r=i.parse;i.parse=function(t){var e=t.date,i=t.utc,a=t.args;this.$u=i;var s=a[1];if("string"==typeof s){var l=!0===a[2],c=!0===a[3],u=l||c,h=a[2];c&&(h=a[2]),o=this.$locale(),!l&&h&&(o=n.Ls[h]),this.$d=function(t,e,n){try{if(["x","X"].indexOf(e)>-1)return new Date(("X"===e?1e3:1)*t);var i=d(e)(t),r=i.year,o=i.month,a=i.day,s=i.hours,l=i.minutes,c=i.seconds,u=i.milliseconds,h=i.zone,p=new Date,f=a||(r||o?1:p.getDate()),g=r||p.getFullYear(),m=0;r&&!o||(m=o>0?o-1:p.getMonth());var v=s||0,y=l||0,b=c||0,x=u||0;return h?new Date(Date.UTC(g,m,f,v,y,b,x+60*h.offset*1e3)):n?new Date(Date.UTC(g,m,f,v,y,b,x)):new Date(g,m,f,v,y,b,x)}catch(t){return new Date("")}}(e,s,i),this.init(),h&&!0!==h&&(this.$L=this.locale(h).$L),u&&e!=this.format(s)&&(this.$d=new Date("")),o={}}else if(s instanceof Array)for(var p=s.length,f=1;f<=p;f+=1){a[1]=s[f-1];var g=n.apply(this,a);if(g.isValid()){this.$d=g.$d,this.$L=g.$L,this.init();break}f===p&&(this.$d=new Date(""))}else r.call(this,t)}}}());Y.extend(X);const G=(t,e)=>{let n;if(e)switch(e){case"ISO_8601":n=t;break;case"RFC_2822":n=Y(t.slice(5),"DD MMM YYYY HH:mm:ss ZZ").unix();break;case"MYSQL":n=Y(t,"YYYY-MM-DD hh:mm:ss").unix();break;case"UNIX":n=Y(t).unix();break;default:n=Y(t,e,!0).valueOf()}return n},q=(t,e)=>{if(t?.constructor===Object&&Object.prototype.hasOwnProperty.call(t,"data")&&!Object.keys(t).find((t=>!["text","order","data","attributes"].includes(t))))return t;const n={data:t};switch(e.type){case"string":"string"!=typeof t&&(n.text=String(n.data),n.order=n.text);break;case"date":e.format&&(n.order=G(String(n.data),e.format));break;case"number":n.text=String(n.data),n.data=parseInt(n.data,10);break;case"html":{const t=Array.isArray(n.data)?{nodeName:"TD",childNodes:n.data}:B(`<td>${String(n.data)}</td>`);n.data=t.childNodes||[];const e=o(t);n.text=e,n.order=e;break}case"boolean":"string"==typeof n.data&&(n.data=n.data.toLowerCase().trim()),n.data=!["false",!1,null,void 0,0].includes(n.data),n.order=n.data?1:0,n.text=String(n.data);break;case"other":n.text="",n.order=0;break;default:n.text=JSON.stringify(n.data)}return n},U=t=>{if(t instanceof Object&&t.constructor===Object&&t.hasOwnProperty("data")&&("string"==typeof t.text||"string"==typeof t.data))return t;const e={data:t};if("string"==typeof t){if(t.length){const n=B(`<th>${t}</th>`);if(n.childNodes&&(1!==n.childNodes.length||"#text"!==n.childNodes[0].nodeName)){e.data=n.childNodes,e.type="html";const t=o(n);e.text=t}}}else[null,void 0].includes(t)?e.text="":e.text=JSON.stringify(t);return e},$=(t,e,n,i,r)=>{const a={data:[],headings:[]};if(t.headings)a.headings=t.headings.map((t=>U(t)));else if(e?.tHead)a.headings=Array.from(e.tHead.querySelectorAll("th")).map(((t,e)=>{const a=(t=>{const e=O(t,{valueDiffing:!1});let n;return n=!e.childNodes||1===e.childNodes.length&&"#text"===e.childNodes[0].nodeName?{data:t.innerText,type:"string"}:{data:e.childNodes,type:"html",text:o(e)},n.attributes=e.attributes,n})(t);n[e]||(n[e]={type:i,format:r,searchable:!0,sortable:!0});const s=n[e];return"false"!==t.dataset.sortable?.trim().toLowerCase()&&"false"!==t.dataset.sort?.trim().toLowerCase()||(s.sortable=!1),"false"===t.dataset.searchable?.trim().toLowerCase()&&(s.searchable=!1),"true"!==t.dataset.hidden?.trim().toLowerCase()&&"true"!==t.getAttribute("hidden")?.trim().toLowerCase()||(s.hidden=!0),["number","string","html","date","boolean","other"].includes(t.dataset.type)&&(s.type=t.dataset.type,"date"===s.type&&t.dataset.format&&(s.format=t.dataset.format)),a}));else if(t.data?.length){const e=t.data[0],n=Array.isArray(e)?e:e.cells;a.headings=n.map((t=>U("")))}else e?.tBodies.length&&(a.headings=Array.from(e.tBodies[0].rows[0].cells).map((t=>U(""))));for(let t=0;t<a.headings.length;t++)n[t]||(n[t]={type:i,format:r,sortable:!0,searchable:!0});if(t.data?a.data=t.data.map((t=>{let e,i;return Array.isArray(t)?(e={},i=t):(e=t.attributes,i=t.cells),{attributes:e,cells:i.map(((t,e)=>q(t,n[e])))}})):e?.tBodies?.length&&(a.data=Array.from(e.tBodies[0].rows).map((t=>({attributes:c(t.attributes),cells:Array.from(t.cells).map(((t,e)=>{const i=t.dataset.content?q(t.dataset.content,n[e]):((t,e)=>{let n;switch(e.type){case"string":n={data:t.innerText};break;case"date":{const i=t.innerText;n={data:i,order:G(i,e.format)};break}case"number":n={data:parseInt(t.innerText,10),text:t.innerText};break;case"boolean":{const e=!["false","0","null","undefined"].includes(t.innerText.toLowerCase().trim());n={data:e,text:e?"1":"0",order:e?1:0};break}default:n={data:O(t,{valueDiffing:!1}).childNodes||[],text:t.innerText,order:t.innerText}}return n.attributes=c(t.attributes),n})(t,n[e]);return t.dataset.order&&(i.order=isNaN(parseFloat(t.dataset.order))?t.dataset.order:parseFloat(t.dataset.order)),i}))})))),a.data.length&&a.data[0].cells.length!==a.headings.length)throw new Error("Data heading length mismatch.");return a};class Z{constructor(t){this.dt=t,this.cursor=!1}setCursor(t=!1){if(t===this.cursor)return;const e=this.cursor;if(this.cursor=t,this.dt._renderTable(),!1!==t&&this.dt.options.scrollY){const t=u(this.dt.options.classes.cursor),e=this.dt.dom.querySelector(`tr${t}`);e&&e.scrollIntoView({block:"nearest"})}this.dt.emit("datatable.cursormove",this.cursor,e)}add(t){if(!Array.isArray(t)||t.length<1)return;const e={cells:t.map(((t,e)=>{const n=this.dt.columns.settings[e];return q(t,n)}))};this.dt.data.data.push(e),this.dt.hasRows=!0,this.dt.update(!0)}remove(t){if(!Array.isArray(t))return this.remove([t]);this.dt.data.data=this.dt.data.data.filter(((e,n)=>!t.includes(n))),this.dt.data.data.length||(this.dt.hasRows=!1),this.dt.update(!0)}findRowIndex(t,e){return this.dt.data.data.findIndex((n=>{const i=n.cells[t];return a(i).toLowerCase().includes(String(e).toLowerCase())}))}findRow(t,e){const n=this.findRowIndex(t,e);if(n<0)return{index:-1,row:null,cols:[]};const i=this.dt.data.data[n],r=i.cells.map((t=>t.data));return{index:n,row:i,cols:r}}updateRow(t,e){const n={cells:e.map(((t,e)=>{const n=this.dt.columns.settings[e];return q(t,n)}))};this.dt.data.data.splice(t,1,n),this.dt.update(!0)}}class K{constructor(t){this.dt=t,this.init()}init(){[this.settings,this._state]=((t=[],e,n)=>{let i=[],r=!1;const o=[];return t.forEach((t=>{(Array.isArray(t.select)?t.select:[t.select]).forEach((a=>{i[a]?t.type&&(i[a].type=t.type):i[a]={type:t.type||e,sortable:!0,searchable:!0};const s=i[a];t.render&&(s.render=t.render),t.format?s.format=t.format:"date"===t.type&&(s.format=n),t.cellClass&&(s.cellClass=t.cellClass),t.headerClass&&(s.headerClass=t.headerClass),t.locale&&(s.locale=t.locale),!1===t.sortable?s.sortable=!1:(t.numeric&&(s.numeric=t.numeric),t.caseFirst&&(s.caseFirst=t.caseFirst)),!1===t.searchable?s.searchable=!1:t.sensitivity&&(s.sensitivity=t.sensitivity),(s.searchable||s.sortable)&&void 0!==t.ignorePunctuation&&(s.ignorePunctuation=t.ignorePunctuation),t.hidden&&(s.hidden=!0),t.filter&&(s.filter=t.filter),t.sortSequence&&(s.sortSequence=t.sortSequence),t.sort&&(t.filter?o[a]=t.sort:r={column:a,dir:t.sort}),void 0!==t.searchItemSeparator&&(s.searchItemSeparator=t.searchItemSeparator)}))})),i=i.map((t=>t||{type:e,format:"date"===e?n:void 0,sortable:!0,searchable:!0})),[i,{filters:o,sort:r,widths:[]}]})(this.dt.options.columns,this.dt.options.type,this.dt.options.format)}get(t){return t<0||t>=this.size()?null:{...this.settings[t]}}size(){return this.settings.length}swap(t){if(2===t.length){const e=this.dt.data.headings.map(((t,e)=>e)),n=t[0],i=t[1],r=e[i];return e[i]=e[n],e[n]=r,this.order(e)}}order(t){this.dt.data.headings=t.map((t=>this.dt.data.headings[t])),this.dt.data.data.forEach((e=>e.cells=t.map((t=>e.cells[t])))),this.settings=t.map((t=>this.settings[t])),this.dt.update()}hide(t){t.length&&(t.forEach((t=>{this.settings[t]||(this.settings[t]={type:"string"}),this.settings[t].hidden=!0})),this.dt.update())}show(t){t.length&&(t.forEach((t=>{this.settings[t]||(this.settings[t]={type:"string",sortable:!0}),delete this.settings[t].hidden})),this.dt.update())}visible(t){return void 0===t&&(t=[...Array(this.dt.data.headings.length).keys()]),Array.isArray(t)?t.map((t=>!this.settings[t]?.hidden)):!this.settings[t]?.hidden}add(t){const e=this.dt.data.headings.length;if(this.dt.data.headings=this.dt.data.headings.concat([U(t.heading)]),this.dt.data.data.forEach(((e,n)=>{e.cells=e.cells.concat([q(t.data[n],t)])})),this.settings[e]={type:t.type||"string",sortable:!0,searchable:!0},t.type||t.format||t.sortable||t.render||t.filter){const n=this.settings[e];t.render&&(n.render=t.render),t.format&&(n.format=t.format),t.cellClass&&(n.cellClass=t.cellClass),t.headerClass&&(n.headerClass=t.headerClass),t.locale&&(n.locale=t.locale),!1===t.sortable?n.sortable=!1:(t.numeric&&(n.numeric=t.numeric),t.caseFirst&&(n.caseFirst=t.caseFirst)),!1===t.searchable?n.searchable=!1:t.sensitivity&&(n.sensitivity=t.sensitivity),(n.searchable||n.sortable)&&t.ignorePunctuation&&(n.ignorePunctuation=t.ignorePunctuation),t.hidden&&(n.hidden=!0),t.filter&&(n.filter=t.filter),t.sortSequence&&(n.sortSequence=t.sortSequence)}this.dt.update(!0)}remove(t){if(!Array.isArray(t))return this.remove([t]);this.dt.data.headings=this.dt.data.headings.filter(((e,n)=>!t.includes(n))),this.dt.data.data.forEach((e=>e.cells=e.cells.filter(((e,n)=>!t.includes(n))))),this.dt.update(!0)}filter(t,e=!1){if(!this.settings[t]?.filter?.length)return;const n=this._state.filters[t];let i;if(n){let e=!1;i=this.settings[t].filter.find((t=>!!e||(t===n&&(e=!0),!1)))}else{const e=this.settings[t].filter;i=e?e[0]:void 0}i?this._state.filters[t]=i:n&&(this._state.filters[t]=void 0),this.dt._currentPage=1,this.dt.update(),e||this.dt.emit("datatable.filter",t,i)}sort(t,e,n=!1){const i=this.settings[t];if(n||this.dt.emit("datatable.sorting",t,e),!e){const n=!(!this._state.sort||this._state.sort.column!==t)&&this._state.sort?.dir,r=i?.sortSequence||["asc","desc"];if(n){const t=r.indexOf(n);e=-1===t?r[0]||"asc":t===r.length-1?r[0]:r[t+1]}else e=r.length?r[0]:"asc"}const r=!!["string","html"].includes(i.type)&&new Intl.Collator(i.locale||this.dt.options.locale,{usage:"sort",numeric:i.numeric||this.dt.options.numeric,caseFirst:i.caseFirst||this.dt.options.caseFirst,ignorePunctuation:i.ignorePunctuation||this.dt.options.ignorePunctuation});this.dt.data.data.sort(((n,i)=>{const o=n.cells[t],s=i.cells[t];let l=o.order??a(o),c=s.order??a(s);if("desc"===e){const t=l;l=c,c=t}return r?r.compare(String(l),String(c)):l<c?-1:l>c?1:0})),this._state.sort={column:t,dir:e},this.dt._searchQueries.length?(this.dt.multiSearch(this.dt._searchQueries),this.dt.emit("datatable.sort",t,e)):n||(this.dt._currentPage=1,this.dt.update(),this.dt.emit("datatable.sort",t,e))}_measureWidths(){const t=this.dt.data.headings.filter(((t,e)=>!this.settings[e]?.hidden));if((this.dt.options.scrollY.length||this.dt.options.fixedColumns)&&t?.length){this._state.widths=[];const t={noPaging:!0};if(this.dt.options.header||this.dt.options.footer){this.dt.options.scrollY.length&&(t.unhideHeader=!0),this.dt.headerDOM&&this.dt.headerDOM.parentElement.removeChild(this.dt.headerDOM),t.noColumnWidths=!0,this.dt._renderTable(t);const e=Array.from(this.dt.dom.querySelector("thead, tfoot")?.firstElementChild?.querySelectorAll("th")||[]);let n=0;const i=this.dt.data.headings.map(((t,i)=>{if(this.settings[i]?.hidden)return 0;const r=e[n].offsetWidth;return n+=1,r})),r=i.reduce(((t,e)=>t+e),0);this._state.widths=i.map((t=>t/r*100))}else{t.renderHeader=!0,this.dt._renderTable(t);const e=Array.from(this.dt.dom.querySelector("thead, tfoot")?.firstElementChild?.querySelectorAll("th")||[]);let n=0;const i=this.dt.data.headings.map(((t,i)=>{if(this.settings[i]?.hidden)return 0;const r=e[n].offsetWidth;return n+=1,r})),r=i.reduce(((t,e)=>t+e),0);this._state.widths=i.map((t=>t/r*100))}this.dt._renderTable()}}}const Q={sortable:!0,locale:"en",numeric:!0,caseFirst:"false",searchable:!0,sensitivity:"base",ignorePunctuation:!0,destroyable:!0,searchItemSeparator:"",searchQuerySeparator:" ",searchAnd:!1,data:{},type:"html",format:"YYYY-MM-DD",columns:[],paging:!0,perPage:10,perPageSelect:[5,10,15,20,25],nextPrev:!0,firstLast:!1,prevText:"",nextText:"",firstText:"",lastText:"",ellipsisText:"",truncatePager:!0,pagerDelta:2,scrollY:"",fixedColumns:!0,fixedHeight:!1,footer:!1,header:!0,hiddenHeader:!1,caption:void 0,rowNavigation:!1,tabIndex:!1,pagerRender:!1,rowRender:!1,tableRender:!1,diffDomOptions:{valueDiffing:!1},labels:{placeholder:"Search...",searchTitle:"Search within table",perPage:"entries per page",pageTitle:"Page {page}",noRows:"No entries found",noResults:"No results match your search query",info:"Showing {start} to {end} of {rows} entries"},template:(t,e)=>`<div class='${t.classes.top}'>\n    ${t.paging&&t.perPageSelect?`<div class='${t.classes.dropdown}'>\n            <label>\n                <select class='${t.classes.selector}'></select> ${t.labels.perPage}\n            </label>\n        </div>`:""}\n    ${t.searchable?`<div class='${t.classes.search}'>\n            <input class='${t.classes.input}' placeholder='${t.labels.placeholder}' type='search' title='${t.labels.searchTitle}'${e.id?` aria-controls="${e.id}"`:""}>\n        </div>`:""}\n</div>\n<div class='${t.classes.container}'${t.scrollY.length?` style='height: ${t.scrollY}; overflow-Y: auto;'`:""}></div>\n<div class='${t.classes.bottom}'>\n    ${t.paging?`<div class='${t.classes.info}'></div>`:""}\n    <nav class='${t.classes.pagination}'></nav>\n</div>`,classes:{active:"datatable-active",ascending:"datatable-ascending",bottom:"datatable-bottom",container:"datatable-container",cursor:"datatable-cursor",descending:"datatable-descending",disabled:"datatable-disabled",dropdown:"datatable-dropdown",ellipsis:"datatable-ellipsis",filter:"datatable-filter",filterActive:"datatable-filter-active",empty:"datatable-empty",headercontainer:"datatable-headercontainer",hidden:"datatable-hidden",info:"datatable-info",input:"datatable-input",loading:"datatable-loading",pagination:"datatable-pagination",paginationList:"datatable-pagination-list",paginationListItem:"datatable-pagination-list-item",paginationListItemLink:"datatable-pagination-list-item-link",search:"datatable-search",selector:"datatable-selector",sorter:"datatable-sorter",table:"datatable-table",top:"datatable-top",wrapper:"datatable-wrapper"}},J=(t,e,n,i={})=>({nodeName:"LI",attributes:{class:i.active&&!i.hidden?`${n.classes.paginationListItem} ${n.classes.active}`:i.hidden?`${n.classes.paginationListItem} ${n.classes.hidden} ${n.classes.disabled}`:n.classes.paginationListItem},childNodes:[{nodeName:"BUTTON",attributes:{"data-page":String(t),class:n.classes.paginationListItemLink,"aria-label":n.labels.pageTitle.replace("{page}",String(t))},childNodes:[{nodeName:"#text",data:e}]}]}),tt={classes:{row:"datatable-editor-row",form:"datatable-editor-form",item:"datatable-editor-item",menu:"datatable-editor-menu",save:"datatable-editor-save",block:"datatable-editor-block",cancel:"datatable-editor-cancel",close:"datatable-editor-close",inner:"datatable-editor-inner",input:"datatable-editor-input",label:"datatable-editor-label",modal:"datatable-editor-modal",action:"datatable-editor-action",header:"datatable-editor-header",wrapper:"datatable-editor-wrapper",editable:"datatable-editor-editable",container:"datatable-editor-container",separator:"datatable-editor-separator"},labels:{closeX:"x",editCell:"Edit Cell",editRow:"Edit Row",removeRow:"Remove Row",reallyRemove:"Are you sure?",reallyCancel:"Do you really want to cancel?",save:"Save",cancel:"Cancel"},cancelModal:t=>confirm(t.options.labels.reallyCancel),inline:!0,hiddenColumns:!1,contextMenu:!0,clickEvent:"dblclick",excludeColumns:[],menuItems:[{text:t=>t.options.labels.editCell,action:(t,e)=>{if(!(t.event.target instanceof Element))return;const n=t.event.target.closest("td");return t.editCell(n)}},{text:t=>t.options.labels.editRow,action:(t,e)=>{if(!(t.event.target instanceof Element))return;const n=t.event.target.closest("tr");return t.editRow(n)}},{separator:!0},{text:t=>t.options.labels.removeRow,action:(t,e)=>{if(t.event.target instanceof Element&&confirm(t.options.labels.reallyRemove)){const e=t.event.target.closest("tr");t.removeRow(e)}}}]};class et{constructor(t,e={}){this.dt=t,this.options={...tt,...e}}init(){this.initialized||(this.options.classes.editable?.split(" ").forEach((t=>this.dt.wrapperDOM.classList.add(t))),this.options.inline&&(this.originalRowRender=this.dt.options.rowRender,this.dt.options.rowRender=(t,e,n)=>{let i=this.rowRender(t,e,n);return this.originalRowRender&&(i=this.originalRowRender(t,i,n)),i}),this.options.contextMenu&&(this.containerDOM=r("div",{id:this.options.classes.container}),this.wrapperDOM=r("div",{class:this.options.classes.wrapper}),this.menuDOM=r("ul",{class:this.options.classes.menu}),this.options.menuItems&&this.options.menuItems.length&&this.options.menuItems.forEach((t=>{const e=r("li",{class:t.separator?this.options.classes.separator:this.options.classes.item});if(!t.separator){const n=r("a",{class:this.options.classes.action,href:t.url||"#",html:"function"==typeof t.text?t.text(this):t.text});e.appendChild(n),t.action&&"function"==typeof t.action&&n.addEventListener("click",(e=>{e.preventDefault(),t.action(this,e)}))}this.menuDOM.appendChild(e)})),this.wrapperDOM.appendChild(this.menuDOM),this.containerDOM.appendChild(this.wrapperDOM),this.updateMenu()),this.data={},this.menuOpen=!1,this.editing=!1,this.editingRow=!1,this.editingCell=!1,this.bindEvents(),setTimeout((()=>{this.initialized=!0,this.dt.emit("editable.init")}),10))}bindEvents(){this.events={keydown:this.keydown.bind(this),click:this.click.bind(this)},this.dt.dom.addEventListener(this.options.clickEvent,this.events.click),document.addEventListener("keydown",this.events.keydown),this.options.contextMenu&&(this.events.context=this.context.bind(this),this.events.updateMenu=this.updateMenu.bind(this),this.events.dismissMenu=this.dismissMenu.bind(this),this.events.reset=function(t,e=300){let n;return(...i)=>{clearTimeout(n),n=window.setTimeout((()=>t()),e)}}((()=>this.events.updateMenu()),50),this.dt.dom.addEventListener("contextmenu",this.events.context),document.addEventListener("click",this.events.dismissMenu),window.addEventListener("resize",this.events.reset),window.addEventListener("scroll",this.events.reset))}context(t){const e=t.target;if(!(e instanceof Element))return;this.event=t;const n=e.closest("tbody td");if(!this.disabled&&n){t.preventDefault();let e=t.pageX,n=t.pageY;e>this.limits.x&&(e-=this.rect.width),n>this.limits.y&&(n-=this.rect.height),this.wrapperDOM.style.top=`${n}px`,this.wrapperDOM.style.left=`${e}px`,this.openMenu(),this.updateMenu()}}click(t){const e=t.target;if(e instanceof Element)if(this.editing&&this.data&&this.editingCell){const t=u(this.options.classes.input),e=this.modalDOM?this.modalDOM.querySelector(`input${t}[type=text]`):this.dt.wrapperDOM.querySelector(`input${t}[type=text]`);this.saveCell(e.value)}else if(!this.editing){const n=e.closest("tbody td");n&&(this.editCell(n),t.preventDefault())}}keydown(t){const e=u(this.options.classes.input);if(this.modalDOM){if("Escape"===t.key)this.options.cancelModal(this)&&this.closeModal();else if("Enter"===t.key)if(this.editingCell){const t=this.modalDOM.querySelector(`input${e}[type=text]`);this.saveCell(t.value)}else{const t=Array.from(this.modalDOM.querySelectorAll(`input${e}[type=text]`)).map((t=>t.value.trim()));this.saveRow(t,this.data.row)}}else if(this.editing&&this.data)if("Enter"===t.key){if(this.editingCell){const t=this.dt.wrapperDOM.querySelector(`input${e}[type=text]`);this.saveCell(t.value)}else if(this.editingRow){const t=Array.from(this.dt.wrapperDOM.querySelectorAll(`input${e}[type=text]`)).map((t=>t.value.trim()));this.saveRow(t,this.data.row)}}else"Escape"===t.key&&(this.editingCell?this.saveCell(this.data.content):this.editingRow&&this.saveRow(null,this.data.row))}editCell(t){const e=l(t.cellIndex,this.dt.columns.settings);if(this.options.excludeColumns.includes(e))return void this.closeMenu();const n=parseInt(t.parentElement.dataset.index,10),i=this.dt.data.data[n].cells[e];this.data={cell:i,rowIndex:n,columnIndex:e,content:a(i)},this.editing=!0,this.editingCell=!0,this.options.inline?this.dt.update():this.editCellModal(),this.closeMenu()}editCellModal(){const t=this.data.cell,e=this.data.columnIndex,n=this.dt.data.headings[e].text||String(this.dt.data.headings[e].data),i=[`<div class='${this.options.classes.inner}'>`,`<div class='${this.options.classes.header}'>`,`<h4>${this.options.labels.editCell}</h4>`,`<button class='${this.options.classes.close}' type='button' data-editor-cancel>${this.options.labels.closeX}</button>`," </div>",`<div class='${this.options.classes.block}'>`,`<form class='${this.options.classes.form}'>`,`<div class='${this.options.classes.row}'>`,`<label class='${this.options.classes.label}'>${s(n)}</label>`,`<input class='${this.options.classes.input}' value='${s(a(t))}' type='text'>`,"</div>",`<div class='${this.options.classes.row}'>`,`<button class='${this.options.classes.cancel}' type='button' data-editor-cancel>${this.options.labels.cancel}</button>`,`<button class='${this.options.classes.save}' type='button' data-editor-save>${this.options.labels.save}</button>`,"</div>","</form>","</div>","</div>"].join(""),o=r("div",{class:this.options.classes.modal,html:i});this.modalDOM=o,this.openModal();const l=u(this.options.classes.input),c=o.querySelector(`input${l}[type=text]`);c.focus(),c.selectionStart=c.selectionEnd=c.value.length,o.addEventListener("click",(t=>{const e=t.target;e instanceof Element&&(e.hasAttribute("data-editor-cancel")?(t.preventDefault(),this.options.cancelModal(this)&&this.closeModal()):e.hasAttribute("data-editor-save")&&(t.preventDefault(),this.saveCell(c.value)))}))}saveCell(t){const e=this.data.content,n=this.dt.columns.settings[this.data.columnIndex].type||this.dt.options.type,i=t.trim();let r;if("number"===n)r={data:parseFloat(i)};else if("boolean"===n)r=["","false","0"].includes(i)?{data:!1,text:"false",order:0}:{data:!0,text:"true",order:1};else if("html"===n)r={data:[{nodeName:"#text",data:t}],text:t,order:t};else if("string"===n)r={data:t};else if("date"===n){const e=this.dt.columns.settings[this.data.columnIndex].format||this.dt.options.format;r={data:t,order:G(String(t),e)}}else r={data:t};this.dt.data.data[this.data.rowIndex].cells[this.data.columnIndex]=r,this.closeModal();const o=this.data.rowIndex,a=this.data.columnIndex;this.data={},this.dt.update(!0),this.editing=!1,this.editingCell=!1,this.dt.emit("editable.save.cell",t,e,o,a)}editRow(t){if(!t||"TR"!==t.nodeName||this.editing)return;const e=parseInt(t.dataset.index,10),n=this.dt.data.data[e];this.data={row:n.cells,rowIndex:e},this.editing=!0,this.editingRow=!0,this.options.inline?this.dt.update():this.editRowModal(),this.closeMenu()}editRowModal(){const t=this.data.row,e=[`<div class='${this.options.classes.inner}'>`,`<div class='${this.options.classes.header}'>`,`<h4>${this.options.labels.editRow}</h4>`,`<button class='${this.options.classes.close}' type='button' data-editor-cancel>${this.options.labels.closeX}</button>`," </div>",`<div class='${this.options.classes.block}'>`,`<form class='${this.options.classes.form}'>`,`<div class='${this.options.classes.row}'>`,`<button class='${this.options.classes.cancel}' type='button' data-editor-cancel>${this.options.labels.cancel}</button>`,`<button class='${this.options.classes.save}' type='button' data-editor-save>${this.options.labels.save}</button>`,"</div>","</form>","</div>","</div>"].join(""),n=r("div",{class:this.options.classes.modal,html:e}),i=n.firstElementChild;if(!i)return;const o=i.lastElementChild?.firstElementChild;if(!o)return;t.forEach(((t,e)=>{const n=this.dt.columns.settings[e];if((!n.hidden||n.hidden&&this.options.hiddenColumns)&&!this.options.excludeColumns.includes(e)){const n=this.dt.data.headings[e].text||String(this.dt.data.headings[e].data);o.insertBefore(r("div",{class:this.options.classes.row,html:[`<div class='${this.options.classes.row}'>`,`<label class='${this.options.classes.label}'>${s(n)}</label>`,`<input class='${this.options.classes.input}' value='${s(a(t))}' type='text'>`,"</div>"].join("")}),o.lastElementChild)}})),this.modalDOM=n,this.openModal();const l=u(this.options.classes.input),c=Array.from(o.querySelectorAll(`input${l}[type=text]`));n.addEventListener("click",(t=>{const e=t.target;if(e instanceof Element)if(e.hasAttribute("data-editor-cancel"))this.options.cancelModal(this)&&this.closeModal();else if(e.hasAttribute("data-editor-save")){const t=c.map((t=>t.value.trim()));this.saveRow(t,this.data.row)}}))}saveRow(t,e){const n=e.map((t=>a(t))),i=this.dt.data.data[this.data.rowIndex];if(t){let n=0;i.cells=e.map(((e,i)=>{if(this.options.excludeColumns.includes(i)||this.dt.columns.settings[i].hidden)return e;const r=this.dt.columns.settings[i].type||this.dt.options.type,o=t[n++];let a;if("number"===r)a={data:parseFloat(o)};else if("boolean"===r)a=["","false","0"].includes(o)?{data:!1,text:"false",order:0}:{data:!0,text:"true",order:1};else if("html"===r)a={data:[{nodeName:"#text",data:o}],text:o,order:o};else if("string"===r)a={data:o};else if("date"===r){const t=this.dt.columns.settings[i].format||this.dt.options.format;a={data:o,order:G(String(o),t)}}else a={data:o};return a}))}const r=i.cells.map((t=>a(t)));this.data={},this.dt.update(!0),this.closeModal(),this.editing=!1,this.dt.emit("editable.save.row",r,n,e)}openModal(){this.modalDOM&&document.body.appendChild(this.modalDOM)}closeModal(){this.editing&&this.modalDOM&&(document.body.removeChild(this.modalDOM),this.modalDOM=this.editing=this.editingRow=this.editingCell=!1)}removeRow(t){if(!t||"TR"!==t.nodeName||this.editing)return;const e=parseInt(t.dataset.index,10);this.dt.rows.remove(e),this.closeMenu()}updateMenu(){const t=window.scrollX||window.pageXOffset,e=window.scrollY||window.pageYOffset;this.rect=this.wrapperDOM.getBoundingClientRect(),this.limits={x:window.innerWidth+t-this.rect.width,y:window.innerHeight+e-this.rect.height}}dismissMenu(t){const e=t.target;if(!(e instanceof Element)||this.wrapperDOM.contains(e))return;let n=!0;if(this.editing){const t=u(this.options.classes.input);n=!e.matches(`input${t}[type=text]`)}n&&this.closeMenu()}openMenu(){if(this.editing&&this.data&&this.editingCell){const t=u(this.options.classes.input),e=this.modalDOM?this.modalDOM.querySelector(`input${t}[type=text]`):this.dt.wrapperDOM.querySelector(`input${t}[type=text]`);this.saveCell(e.value)}document.body.appendChild(this.containerDOM),this.menuOpen=!0,this.dt.emit("editable.context.open")}closeMenu(){this.menuOpen&&(this.menuOpen=!1,document.body.removeChild(this.containerDOM),this.dt.emit("editable.context.close"))}destroy(){this.dt.dom.removeEventListener(this.options.clickEvent,this.events.click),this.dt.dom.removeEventListener("contextmenu",this.events.context),document.removeEventListener("click",this.events.dismissMenu),document.removeEventListener("keydown",this.events.keydown),window.removeEventListener("resize",this.events.reset),window.removeEventListener("scroll",this.events.reset),document.body.contains(this.containerDOM)&&document.body.removeChild(this.containerDOM),this.options.inline&&(this.dt.options.rowRender=this.originalRowRender),this.initialized=!1}rowRender(t,e,n){return this.data&&this.data.rowIndex===n?(this.editingCell?e.childNodes[function(t,e){let n=t,i=0;for(;i<t;)e[i].hidden&&(n-=1),i++;return n}(this.data.columnIndex,this.dt.columns.settings)].childNodes=[{nodeName:"INPUT",attributes:{type:"text",value:this.data.content,class:this.options.classes.input}}]:e.childNodes.forEach(((n,i)=>{const r=l(i,this.dt.columns.settings),o=t[r];this.options.excludeColumns.includes(r)||(e.childNodes[i].childNodes=[{nodeName:"INPUT",attributes:{type:"text",value:s(o.text||String(o.data)||""),class:this.options.classes.input}}])})),e):e}}const nt={classes:{button:"datatable-column-filter-button",menu:"datatable-column-filter-menu",container:"datatable-column-filter-container",wrapper:"datatable-column-filter-wrapper"},labels:{button:"Filter columns within the table"},hiddenColumns:[]};class it{constructor(t,e={}){this.dt=t,this.options={...nt,...e}}init(){if(this.initialized)return;const t=u(this.options.classes.button);let e=this.dt.wrapperDOM.querySelector(t);if(!e){e=r("button",{class:this.options.classes.button,html:""});const t=u(this.dt.options.classes.search),n=this.dt.wrapperDOM.querySelector(t);n?n.appendChild(e):this.dt.wrapperDOM.appendChild(e),this.addedButtonDOM=!0}this.buttonDOM=e,this.containerDOM=r("div",{id:this.options.classes.container}),this.wrapperDOM=r("div",{class:this.options.classes.wrapper}),this.menuDOM=r("ul",{class:this.options.classes.menu,html:this.dt.data.headings.map(((t,e)=>{const n=this.dt.columns.settings[e];return this.options.hiddenColumns.includes(e)?"":`<li data-column="${e}">\n                        <input type="checkbox" value="${t.text||t.data}" ${n.hidden?"":"checked=''"}>\n                        <label>\n                            ${t.text||t.data}\n                        </label>\n                    </li>`})).join("")}),this.wrapperDOM.appendChild(this.menuDOM),this.containerDOM.appendChild(this.wrapperDOM),this._measureSpace(),this._bind(),this.initialized=!0}dismiss(){this.addedButtonDOM&&this.buttonDOM.parentElement&&this.buttonDOM.parentElement.removeChild(this.buttonDOM),document.removeEventListener("click",this.events.click)}_bind(){this.events={click:this._click.bind(this)},document.addEventListener("click",this.events.click)}_openMenu(){document.body.appendChild(this.containerDOM),this._measureSpace(),this.menuOpen=!0,this.dt.emit("columnFilter.menu.open")}_closeMenu(){this.menuOpen&&(this.menuOpen=!1,document.body.removeChild(this.containerDOM),this.dt.emit("columnFilter.menu.close"))}_measureSpace(){const t=window.scrollX||window.pageXOffset,e=window.scrollY||window.pageYOffset;this.rect=this.wrapperDOM.getBoundingClientRect(),this.limits={x:window.innerWidth+t-this.rect.width,y:window.innerHeight+e-this.rect.height}}_click(t){const e=t.target;if(e instanceof Element)if(this.event=t,this.buttonDOM.contains(e)){if(t.preventDefault(),this.menuOpen)return void this._closeMenu();this._openMenu();let e=t.pageX,n=t.pageY;e>this.limits.x&&(e-=this.rect.width),n>this.limits.y&&(n-=this.rect.height),this.wrapperDOM.style.top=`${n}px`,this.wrapperDOM.style.left=`${e}px`}else if(this.menuDOM.contains(e)){const t=u(this.options.classes.menu),n=e.closest(`${t} > li`);if(!n)return;const i=n.querySelector("input[type=checkbox]");i.contains(e)||(i.checked=!i.checked);const r=Number(n.dataset.column);i.checked?this.dt.columns.show([r]):this.dt.columns.hide([r])}else this.menuOpen&&this._closeMenu()}}n.DataTable=class{constructor(t,e={}){const n="string"==typeof t?document.querySelector(t):t;n instanceof HTMLTableElement?this.dom=n:(this.dom=document.createElement("table"),n.appendChild(this.dom));const i={...Q.diffDomOptions,...e.diffDomOptions},r={...Q.labels,...e.labels},o={...Q.classes,...e.classes};this.options={...Q,...e,diffDomOptions:i,labels:r,classes:o},this._initialInnerHTML=this.options.destroyable?this.dom.innerHTML:"",this.options.tabIndex?this.dom.tabIndex=this.options.tabIndex:this.options.rowNavigation&&-1===this.dom.tabIndex&&(this.dom.tabIndex=0),this._listeners={onResize:()=>this._onResize()},this._dd=new V(this.options.diffDomOptions||{}),this.initialized=!1,this._events={},this._currentPage=0,this.onFirstPage=!0,this.hasHeadings=!1,this.hasRows=!1,this._searchQueries=[],this.init()}init(){if(this.initialized||h(this.dom,this.options.classes.table))return!1;this._virtualDOM=O(this.dom,this.options.diffDomOptions||{}),this._tableAttributes={...this._virtualDOM.attributes},this._tableFooters=this._virtualDOM.childNodes?.filter((t=>"TFOOT"===t.nodeName))??[],this._tableCaptions=this._virtualDOM.childNodes?.filter((t=>"CAPTION"===t.nodeName))??[],void 0!==this.options.caption&&this._tableCaptions.push({nodeName:"CAPTION",childNodes:[{nodeName:"#text",data:this.options.caption}]}),this.rows=new Z(this),this.columns=new K(this),this.data=$(this.options.data,this.dom,this.columns.settings,this.options.type,this.options.format),this._render(),setTimeout((()=>{this.emit("datatable.init"),this.initialized=!0}),10)}_render(){this.wrapperDOM=r("div",{class:`${this.options.classes.wrapper} ${this.options.classes.loading}`}),this.wrapperDOM.innerHTML=this.options.template(this.options,this.dom);const t=u(this.options.classes.selector),e=this.wrapperDOM.querySelector(`select${t}`);e&&this.options.paging&&this.options.perPageSelect?this.options.perPageSelect.forEach((t=>{const[n,i]=Array.isArray(t)?[t[0],t[1]]:[String(t),t],r=i===this.options.perPage,o=new Option(n,String(i),r,r);e.appendChild(o)})):e&&e.parentElement.removeChild(e);const n=u(this.options.classes.container);this.containerDOM=this.wrapperDOM.querySelector(n),this._pagerDOMs=[];const i=u(this.options.classes.pagination);Array.from(this.wrapperDOM.querySelectorAll(i)).forEach((t=>{t instanceof HTMLElement&&(t.innerHTML=`<ul class="${this.options.classes.paginationList}"></ul>`,this._pagerDOMs.push(t.firstElementChild))})),this._virtualPagerDOM={nodeName:"UL",attributes:{class:this.options.classes.paginationList}};const o=u(this.options.classes.info);this._label=this.wrapperDOM.querySelector(o),this.dom.parentElement.replaceChild(this.wrapperDOM,this.dom),this.containerDOM.appendChild(this.dom),this._rect=this.dom.getBoundingClientRect(),this._fixHeight(),this.options.header||this.wrapperDOM.classList.add("no-header"),this.options.footer||this.wrapperDOM.classList.add("no-footer"),this.options.sortable&&this.wrapperDOM.classList.add("sortable"),this.options.searchable&&this.wrapperDOM.classList.add("searchable"),this.options.fixedHeight&&this.wrapperDOM.classList.add("fixed-height"),this.options.fixedColumns&&this.wrapperDOM.classList.add("fixed-columns"),this._bindEvents(),this.columns._state.sort&&this.columns.sort(this.columns._state.sort.column,this.columns._state.sort.dir,!0),this.update(!0)}_renderTable(t={}){let e;e=(this.options.paging||this._searchQueries.length||this.columns._state.filters.length)&&this._currentPage&&this.pages.length&&!t.noPaging?this.pages[this._currentPage-1]:this.data.data.map(((t,e)=>({row:t,index:e})));let n=W(this._tableAttributes,this.data.headings,e,this.columns.settings,this.columns._state,this.rows.cursor,this.options,t,this._tableFooters,this._tableCaptions);if(this.options.tableRender){const t=this.options.tableRender(this.data,n,"main");t&&(n=t)}const i=this._dd.diff(this._virtualDOM,n);this._dd.apply(this.dom,i),this._virtualDOM=n}_renderPage(t=!1){this.hasRows&&this.totalPages?(this._currentPage>this.totalPages&&(this._currentPage=1),this._renderTable(),this.onFirstPage=1===this._currentPage,this.onLastPage=this._currentPage===this.lastPage):this.setMessage(this.options.labels.noRows);let e,n=0,i=0,r=0;if(this.totalPages&&(n=this._currentPage-1,i=n*this.options.perPage,r=i+this.pages[n].length,i+=1,e=this._searchQueries.length?this._searchData.length:this.data.data.length),this._label&&this.options.labels.info.length){const t=this.options.labels.info.replace("{start}",String(i)).replace("{end}",String(r)).replace("{page}",String(this._currentPage)).replace("{pages}",String(this.totalPages)).replace("{rows}",String(e));this._label.innerHTML=e?t:""}if(1==this._currentPage&&this._fixHeight(),this.options.rowNavigation&&this._currentPage&&(!this.rows.cursor||!this.pages[this._currentPage-1].find((t=>t.index===this.rows.cursor)))){const e=this.pages[this._currentPage-1];e.length&&(t?this.rows.setCursor(e[e.length-1].index):this.rows.setCursor(e[0].index))}}_renderPagers(){if(!this.options.paging)return;let t=((t,e,n,i,r)=>{let o=[];if(r.firstLast&&o.push(J(1,r.firstText,r)),r.nextPrev){const e=t?1:n-1;o.push(J(e,r.prevText,r,{hidden:t}))}let a=[...Array(i).keys()].map((t=>J(t+1,String(t+1),r,{active:t===n-1})));if(r.truncatePager&&(a=((t,e,n,i)=>{const r=i.pagerDelta,o=i.classes,a=i.ellipsisText,s=2*r;let l=e-r,c=e+r;e<4-r+s?c=3+s:e>n-(3-r+s)&&(l=n-(2+s));const u=[];for(let e=1;e<=n;e++)if(1==e||e==n||e>=l&&e<=c){const n=t[e-1];u.push(n)}let h;const d=[];return u.forEach((e=>{const n=parseInt(e.childNodes[0].attributes["data-page"],10);if(h){const e=parseInt(h.childNodes[0].attributes["data-page"],10);if(n-e==2)d.push(t[e]);else if(n-e!=1){const t={nodeName:"LI",attributes:{class:`${o.paginationListItem} ${o.ellipsis} ${o.disabled}`},childNodes:[{nodeName:"BUTTON",attributes:{class:o.paginationListItemLink},childNodes:[{nodeName:"#text",data:a}]}]};d.push(t)}}d.push(e),h=e})),d})(a,n,i,r)),o=o.concat(a),r.nextPrev){const t=e?i:n+1;o.push(J(t,r.nextText,r,{hidden:e}))}return r.firstLast&&o.push(J(i,r.lastText,r)),{nodeName:"UL",attributes:{class:r.classes.paginationList},childNodes:a.length>1?o:[]}})(this.onFirstPage,this.onLastPage,this._currentPage,this.totalPages,this.options);if(this.options.pagerRender){const e=this.options.pagerRender([this.onFirstPage,this.onLastPage,this._currentPage,this.totalPages],t);e&&(t=e)}const e=this._dd.diff(this._virtualPagerDOM,t);this._pagerDOMs.forEach((t=>{this._dd.apply(t,e)})),this._virtualPagerDOM=t}_renderSeparateHeader(){const t=this.dom.parentElement;this.headerDOM||(this.headerDOM=document.createElement("div"),this._virtualHeaderDOM={nodeName:"DIV"}),t.parentElement.insertBefore(this.headerDOM,t);let e={nodeName:"TABLE",attributes:this._tableAttributes,childNodes:[{nodeName:"THEAD",childNodes:[H(this.data.headings,this.columns.settings,this.columns._state,this.options,{unhideHeader:!0})]}]};if(e.attributes.class=d(e.attributes.class,this.options.classes.table),this.options.tableRender){const t=this.options.tableRender(this.data,e,"header");t&&(e=t)}const n={nodeName:"DIV",attributes:{class:this.options.classes.headercontainer},childNodes:[e]},i=this._dd.diff(this._virtualHeaderDOM,n);this._dd.apply(this.headerDOM,i),this._virtualHeaderDOM=n;const r=this.headerDOM.firstElementChild.clientWidth-this.dom.clientWidth;if(r){const t=structuredClone(this._virtualHeaderDOM);t.attributes.style=`padding-right: ${r}px;`;const e=this._dd.diff(this._virtualHeaderDOM,t);this._dd.apply(this.headerDOM,e),this._virtualHeaderDOM=t}t.scrollHeight>t.clientHeight&&(t.style.overflowY="scroll")}_bindEvents(){if(this.options.perPageSelect){const t=u(this.options.classes.selector),e=this.wrapperDOM.querySelector(t);e&&e instanceof HTMLSelectElement&&e.addEventListener("change",(()=>{this.options.perPage=parseInt(e.value,10),this.update(),this._fixHeight(),this.emit("datatable.perpage",this.options.perPage)}),!1)}this.options.searchable&&this.wrapperDOM.addEventListener("input",(t=>{const e=u(this.options.classes.input),n=t.target;if(!(n instanceof HTMLInputElement&&n.matches(e)))return;t.preventDefault();const i=[];if(Array.from(this.wrapperDOM.querySelectorAll(e)).filter((t=>t.value.length)).forEach((t=>{const e=t.dataset.and||this.options.searchAnd,n=t.dataset.querySeparator||this.options.searchQuerySeparator?t.value.split(this.options.searchQuerySeparator):[t.value];e?n.forEach((e=>{t.dataset.columns?i.push({terms:[e],columns:JSON.parse(t.dataset.columns)}):i.push({terms:[e],columns:void 0})})):t.dataset.columns?i.push({terms:n,columns:JSON.parse(t.dataset.columns)}):i.push({terms:n,columns:void 0})})),1===i.length&&1===i[0].terms.length){const t=i[0];this.search(t.terms[0],t.columns)}else this.multiSearch(i)})),this.wrapperDOM.addEventListener("click",(t=>{const e=t.target.closest("a, button");if(e)if(e.hasAttribute("data-page"))this.page(parseInt(e.getAttribute("data-page"),10)),t.preventDefault();else if(h(e,this.options.classes.sorter)){const n=Array.from(e.parentElement.parentElement.children).indexOf(e.parentElement),i=l(n,this.columns.settings);this.columns.sort(i),t.preventDefault()}else if(h(e,this.options.classes.filter)){const n=Array.from(e.parentElement.parentElement.children).indexOf(e.parentElement),i=l(n,this.columns.settings);this.columns.filter(i),t.preventDefault()}}),!1),this.options.rowNavigation?(this.dom.addEventListener("keydown",(t=>{if("ArrowUp"===t.key){let e;t.preventDefault(),t.stopPropagation(),this.pages[this._currentPage-1].find((t=>t.index===this.rows.cursor||(e=t,!1))),e?this.rows.setCursor(e.index):this.onFirstPage||this.page(this._currentPage-1,!0)}else if("ArrowDown"===t.key){let e;t.preventDefault(),t.stopPropagation();const n=this.pages[this._currentPage-1].find((t=>!!e||(t.index===this.rows.cursor&&(e=!0),!1)));n?this.rows.setCursor(n.index):this.onLastPage||this.page(this._currentPage+1)}else["Enter"," "].includes(t.key)&&this.emit("datatable.selectrow",this.rows.cursor,t)})),this.dom.addEventListener("mousedown",(t=>{const e=t.target;if(e instanceof Element&&this.dom.matches(":focus")){const n=Array.from(this.dom.querySelectorAll("tbody > tr")).find((t=>t.contains(e)));n&&n instanceof HTMLElement&&this.emit("datatable.selectrow",parseInt(n.dataset.index,10),t)}}))):this.dom.addEventListener("mousedown",(t=>{const e=t.target;if(!(e instanceof Element))return;const n=Array.from(this.dom.querySelectorAll("tbody > tr")).find((t=>t.contains(e)));n&&n instanceof HTMLElement&&this.emit("datatable.selectrow",parseInt(n.dataset.index,10),t)})),window.addEventListener("resize",this._listeners.onResize)}_onResize(){this._rect=this.containerDOM.getBoundingClientRect(),this._rect.width&&this.update(!0)}destroy(){this.options.destroyable&&(this.dom.innerHTML=this._initialInnerHTML,this.options.classes.table?.split(" ").forEach((t=>this.wrapperDOM.classList.remove(t))),this.wrapperDOM.parentElement&&this.wrapperDOM.parentElement.replaceChild(this.dom,this.wrapperDOM),this.initialized=!1,window.removeEventListener("resize",this._listeners.onResize))}update(t=!1){t&&(this.columns._measureWidths(),this.hasRows=Boolean(this.data.data.length),this.hasHeadings=Boolean(this.data.headings.length)),this.options.classes.empty?.split(" ").forEach((t=>this.wrapperDOM.classList.remove(t))),this._paginate(),this._renderPage(),this._renderPagers(),this.options.scrollY.length&&this._renderSeparateHeader(),this.emit("datatable.update")}_paginate(){let t=this.data.data.map(((t,e)=>({row:t,index:e})));return this._searchQueries.length&&(t=[],this._searchData.forEach((e=>t.push({index:e,row:this.data.data[e]})))),this.columns._state.filters.length&&this.columns._state.filters.forEach(((e,n)=>{e&&(t=t.filter((t=>{const i=t.row.cells[n];return"function"==typeof e?e(i.data):a(i)===e})))})),this.options.paging&&this.options.perPage>0?this.pages=t.map(((e,n)=>n%this.options.perPage==0?t.slice(n,n+this.options.perPage):null)).filter((t=>t)):this.pages=[t],this.totalPages=this.lastPage=this.pages.length,this._currentPage||(this._currentPage=1),this.totalPages}_fixHeight(){this.options.fixedHeight&&(this.containerDOM.style.height=null,this._rect=this.containerDOM.getBoundingClientRect(),this.containerDOM.style.height=`${this._rect.height}px`)}search(t,e){if(!t.length)return this._currentPage=1,this._searchQueries=[],this._searchData=[],this.update(),this.emit("datatable.search","",[]),this.wrapperDOM.classList.remove("search-results"),!1;this.multiSearch([{terms:[t],columns:e||void 0}]),this.emit("datatable.search",t,this._searchData)}multiSearch(t){if(!this.hasRows)return!1;this._currentPage=1,this._searchData=[];const e=t.map((t=>({columns:t.columns,terms:t.terms.map((t=>t.trim())).filter((t=>t))}))).filter((t=>t.terms.length));if(this._searchQueries=e,!e.length)return this.update(),this.emit("datatable.multisearch",e,this._searchData),this.wrapperDOM.classList.remove("search-results"),!1;const n=e.map((t=>this.columns.settings.map(((e,n)=>{if(e.hidden||!e.searchable||t.columns&&!t.columns.includes(n))return!1;let i=t.terms;const r=e.sensitivity||this.options.sensitivity;return["base","accent"].includes(r)&&(i=i.map((t=>t.toLowerCase()))),["base","case"].includes(r)&&(i=i.map((t=>t.normalize("NFD").replace(/\p{Diacritic}/gu,"")))),(e.ignorePunctuation??this.options.ignorePunctuation)&&(i=i.map((t=>t.replace(/[.,/#!$%^&*;:{}=-_`~()]/g,"")))),i}))));this.data.data.forEach(((t,e)=>{const i=t.cells.map(((t,e)=>{let n=a(t).trim();const i=this.columns.settings[e];if(n.length){const t=i.sensitivity||this.options.sensitivity;["base","accent"].includes(t)&&(n=n.toLowerCase()),["base","case"].includes(t)&&(n=n.normalize("NFD").replace(/\p{Diacritic}/gu,"")),(i.ignorePunctuation??this.options.ignorePunctuation)&&(n=n.replace(/[.,/#!$%^&*;:{}=-_`~()]/g,""))}const r=i.searchItemSeparator||this.options.searchItemSeparator;return r?n.split(r):[n]}));n.every((t=>t.find(((t,e)=>!!t&&t.find((t=>i[e].find((e=>e.includes(t)))))))))&&this._searchData.push(e)})),this.wrapperDOM.classList.add("search-results"),this._searchData.length?this.update():(this.wrapperDOM.classList.remove("search-results"),this.setMessage(this.options.labels.noResults)),this.emit("datatable.multisearch",e,this._searchData)}page(t,e=!1){return t!==this._currentPage&&(isNaN(t)||(this._currentPage=t),!(t>this.pages.length||t<0)&&(this._renderPage(e),this._renderPagers(),void this.emit("datatable.page",t)))}insert(t){let n=[];if(Array.isArray(t)){const e=this.data.headings.map((t=>t.text??String(t.data)));t.forEach(((t,i)=>{const r=[];Object.entries(t).forEach((([t,n])=>{const o=e.indexOf(t);o>-1?r[o]=q(n,this.columns.settings[o]):this.hasHeadings||this.hasRows||0!==i||(r[e.length]=q(n,this.columns.settings[e.length]),e.push(t),this.data.headings.push(U(t)))})),n.push({cells:r})}))}else e(t)&&(!t.headings||this.hasHeadings||this.hasRows?t.data&&Array.isArray(t.data)&&(n=t.data.map((t=>{let e,n;return Array.isArray(t)?(e={},n=t):(e=t.attributes,n=t.cells),{attributes:e,cells:n.map(((t,e)=>q(t,this.columns.settings[e])))}}))):this.data=$(t,void 0,this.columns.settings,this.options.type,this.options.format));n.length&&n.forEach((t=>this.data.data.push(t))),this.hasHeadings=Boolean(this.data.headings.length),this.columns._state.sort&&this.columns.sort(this.columns._state.sort.column,this.columns._state.sort.dir,!0),this.update(!0)}refresh(){if(this.options.searchable){const t=u(this.options.classes.input);Array.from(this.wrapperDOM.querySelectorAll(t)).forEach((t=>t.value="")),this._searchQueries=[]}this._currentPage=1,this.onFirstPage=!0,this.update(!0),this.emit("datatable.refresh")}print(){const t=r("table");let e=W(this._tableAttributes,this.data.headings,this.data.data.map(((t,e)=>({row:t,index:e}))),this.columns.settings,this.columns._state,!1,this.options,{noColumnWidths:!0,unhideHeader:!0},this._tableFooters,this._tableCaptions);if(this.options.tableRender){const t=this.options.tableRender(this.data,e,"print");t&&(e=t)}const n=this._dd.diff({nodeName:"TABLE"},e);this._dd.apply(t,n);const i=window.open();i.document.body.appendChild(t),i.print()}setMessage(t){const e=this.data.headings.filter(((t,e)=>!this.columns.settings[e]?.hidden)).length||1;this.options.classes.empty?.split(" ").forEach((t=>this.wrapperDOM.classList.add(t))),this._label&&(this._label.innerHTML=""),this.totalPages=0,this._renderPagers();let n={nodeName:"TABLE",attributes:this._tableAttributes,childNodes:[{nodeName:"THEAD",childNodes:[H(this.data.headings,this.columns.settings,this.columns._state,this.options,{})]},{nodeName:"TBODY",childNodes:[{nodeName:"TR",childNodes:[{nodeName:"TD",attributes:{class:this.options.classes.empty,colspan:String(e)},childNodes:[{nodeName:"#text",data:t}]}]}]}]};if(this._tableFooters.forEach((t=>n.childNodes.push(t))),this._tableCaptions.forEach((t=>n.childNodes.push(t))),n.attributes.class=d(n.attributes.class,this.options.classes.table),this.options.tableRender){const t=this.options.tableRender(this.data,n,"message");t&&(n=t)}const i=this._dd.diff(this._virtualDOM,n);this._dd.apply(this.dom,i),this._virtualDOM=n}on(t,e){this._events[t]=this._events[t]||[],this._events[t].push(e)}off(t,e){t in this._events!=0&&this._events[t].splice(this._events[t].indexOf(e),1)}emit(t,...e){if(t in this._events!=0)for(let n=0;n<this._events[t].length;n++)this._events[t][n](...e)}},n.addColumnFilter=function(t,e={}){const n=new it(t,e);return t.initialized?n.init():t.on("datatable.init",(()=>n.init())),n},n.convertCSV=function(t){let n;if(!e(t))return!1;const i={lineDelimiter:"\n",columnDelimiter:",",removeDoubleQuotes:!1,...t};if(i.data.length){n={data:[]};const t=i.data.split(i.lineDelimiter);if(t.length&&(i.headings&&(n.headings=t[0].split(i.columnDelimiter),i.removeDoubleQuotes&&(n.headings=n.headings.map((t=>t.trim().replace(/(^"|"$)/g,"")))),t.shift()),t.forEach(((t,e)=>{n.data[e]=[];const r=t.split(i.columnDelimiter);r.length&&r.forEach((t=>{i.removeDoubleQuotes&&(t=t.trim().replace(/(^"|"$)/g,"")),n.data[e].push(t)}))}))),n)return n}return!1},n.convertJSON=function(t){let n;if(!e(t))return!1;const r={data:"",...t};if(r.data.length||e(r.data)){const t=!!i(r.data)&&JSON.parse(r.data);if(t?(n={headings:[],data:[]},t.forEach(((t,e)=>{n.data[e]=[],Object.entries(t).forEach((([t,i])=>{n.headings.includes(t)||n.headings.push(t),n.data[e].push(i)}))}))):console.warn("That's not valid JSON!"),n)return n}return!1},n.createElement=r,n.exportCSV=function(t,n={}){if(!t.hasHeadings&&!t.hasRows)return!1;if(!e(n))return!1;const i={download:!0,skipColumn:[],lineDelimiter:"\n",columnDelimiter:",",...n},r=e=>!i.skipColumn.includes(e)&&!t.columns.settings[e]?.hidden,o=t.data.headings.filter(((t,e)=>r(e))).map((t=>t.text??t.data));let s;if(i.selection)if(Array.isArray(i.selection)){s=[];for(let e=0;e<i.selection.length;e++)s=s.concat(t.pages[i.selection[e]-1].map((t=>t.row)))}else s=t.pages[i.selection-1].map((t=>t.row));else s=t.data.data;let l=[];if(l[0]=o,l=l.concat(s.map((t=>t.cells.filter(((t,e)=>r(e))).map((t=>a(t)))))),l.length){let t="";if(l.forEach((e=>{e.forEach((e=>{"string"==typeof e&&(e=(e=(e=(e=(e=e.trim()).replace(/\s{2,}/g," ")).replace(/\n/g,"  ")).replace(/"/g,'""')).replace(/#/g,"%23")).includes(",")&&(e=`"${e}"`),t+=e+i.columnDelimiter})),t=t.trim().substring(0,t.length-1),t+=i.lineDelimiter})),t=t.trim().substring(0,t.length-1),i.download){const e=document.createElement("a");e.href=encodeURI(`data:text/csv;charset=utf-8,${t}`),e.download=`${i.filename||"datatable_export"}.csv`,document.body.appendChild(e),e.click(),document.body.removeChild(e)}return t}return!1},n.exportJSON=function(t,n={}){if(!t.hasHeadings&&!t.hasRows)return!1;if(!e(n))return!1;const i={download:!0,skipColumn:[],replacer:null,space:4,...n},r=e=>!i.skipColumn.includes(e)&&!t.columns.settings[e]?.hidden;let o;if(i.selection)if(Array.isArray(i.selection)){o=[];for(let e=0;e<i.selection.length;e++)o=o.concat(t.pages[i.selection[e]-1].map((t=>t.row)))}else o=t.pages[i.selection-1].map((t=>t.row));else o=t.data.data;const s=o.map((t=>t.cells.filter(((t,e)=>r(e))).map((t=>a(t))))),l=t.data.headings.filter(((t,e)=>r(e))).map((t=>t.text??String(t.data)));if(s.length){const t=[];s.forEach(((e,n)=>{t[n]=t[n]||{},e.forEach(((e,i)=>{t[n][l[i]]=e}))}));const e=JSON.stringify(t,i.replacer,i.space);if(i.download){const t=new Blob([e],{type:"data:application/json;charset=utf-8"}),n=URL.createObjectURL(t),r=document.createElement("a");r.href=n,r.download=`${i.filename||"datatable_export"}.json`,document.body.appendChild(r),r.click(),document.body.removeChild(r),URL.revokeObjectURL(n)}return e}return!1},n.exportSQL=function(t,n={}){if(!t.hasHeadings&&!t.hasRows)return!1;if(!e(n))return!1;const i={download:!0,skipColumn:[],tableName:"myTable",...n},r=e=>!i.skipColumn.includes(e)&&!t.columns.settings[e]?.hidden;let o=[];if(i.selection)if(Array.isArray(i.selection))for(let e=0;e<i.selection.length;e++)o=o.concat(t.pages[i.selection[e]-1].map((t=>t.row)));else o=t.pages[i.selection-1].map((t=>t.row));else o=t.data.data;const s=o.map((t=>t.cells.filter(((t,e)=>r(e))).map((t=>a(t))))),l=t.data.headings.filter(((t,e)=>r(e))).map((t=>t.text??String(t.data)));if(s.length){let t=`INSERT INTO \`${i.tableName}\` (`;if(l.forEach((e=>{t+=`\`${e}\`,`})),t=t.trim().substring(0,t.length-1),t+=") VALUES ",s.forEach((e=>{t+="(",e.forEach((e=>{t+="string"==typeof e?`"${e}",`:`${e},`})),t=t.trim().substring(0,t.length-1),t+="),"})),t=t.trim().substring(0,t.length-1),t+=";",i.download&&(t=`data:application/sql;charset=utf-8,${t}`),i.download){const e=document.createElement("a");e.href=encodeURI(t),e.download=`${i.filename||"datatable_export"}.sql`,document.body.appendChild(e),e.click(),document.body.removeChild(e)}return t}return!1},n.exportTXT=function(t,n={}){if(!t.hasHeadings&&!t.hasRows)return!1;if(!e(n))return!1;const i={download:!0,skipColumn:[],lineDelimiter:"\n",columnDelimiter:",",...n},r=e=>!i.skipColumn.includes(e)&&!t.columns.settings[e]?.hidden,o=t.data.headings.filter(((t,e)=>r(e))).map((t=>t.text??t.data));let s;if(i.selection)if(Array.isArray(i.selection)){s=[];for(let e=0;e<i.selection.length;e++)s=s.concat(t.pages[i.selection[e]-1].map((t=>t.row)))}else s=t.pages[i.selection-1].map((t=>t.row));else s=t.data.data;let l=[];if(l[0]=o,l=l.concat(s.map((t=>t.cells.filter(((t,e)=>r(e))).map((t=>a(t)))))),l.length){let t="";if(l.forEach((e=>{e.forEach((e=>{"string"==typeof e&&(e=(e=(e=(e=(e=e.trim()).replace(/\s{2,}/g," ")).replace(/\n/g,"  ")).replace(/"/g,'""')).replace(/#/g,"%23")).includes(",")&&(e=`"${e}"`),t+=e+i.columnDelimiter})),t=t.trim().substring(0,t.length-1),t+=i.lineDelimiter})),t=t.trim().substring(0,t.length-1),i.download&&(t=`data:text/csv;charset=utf-8,${t}`),i.download){const e=document.createElement("a");e.href=encodeURI(t),e.download=`${i.filename||"datatable_export"}.txt`,document.body.appendChild(e),e.click(),document.body.removeChild(e)}return t}return!1},n.isJson=i,n.isObject=e,n.makeEditable=function(t,e={}){const n=new et(t,e);return t.initialized?n.init():t.on("datatable.init",(()=>n.init())),n}}).call(this)}).call(this,"undefined"!=typeof global?global:"undefined"!=typeof self?self:"undefined"!=typeof window?window:{})},{}]},{},[1])(1)})),function(){"use strict";var t=function(t){if(null===t)return"null";if(void 0===t)return"undefined";var e=typeof t;return"object"===e&&(Array.prototype.isPrototypeOf(t)||t.constructor&&"Array"===t.constructor.name)?"array":"object"===e&&(String.prototype.isPrototypeOf(t)||t.constructor&&"String"===t.constructor.name)?"string":e},e=function(t){return{eq:t}},n=e((function(t,e){return t===e})),i=function(t){return e((function(e,n){if(e.length!==n.length)return!1;for(var i=e.length,r=0;r<i;r++)if(!t.eq(e[r],n[r]))return!1;return!0}))},r=function(t){return e((function(r,o){var a=Object.keys(r),s=Object.keys(o);if(!function(t,n){return function(t,n){return e((function(e,i){return t.eq(n(e),n(i))}))}(i(t),(function(t){return function(t,e){return Array.prototype.slice.call(t).sort(undefined)}(t)}))}(n).eq(a,s))return!1;for(var l=a.length,c=0;c<l;c++){var u=a[c];if(!t.eq(r[u],o[u]))return!1}return!0}))},o=e((function(e,n){if(e===n)return!0;var a=t(e);return a===t(n)&&(function(t){return-1!==["undefined","boolean","number","string","function","xml","null"].indexOf(t)}(a)?e===n:"array"===a?i(o).eq(e,n):"object"===a&&r(o).eq(e,n))}));const a=Object.getPrototypeOf,s=(t,e,n)=>{var i;return!!n(t,e.prototype)||(null===(i=t.constructor)||void 0===i?void 0:i.name)===e.name},l=t=>e=>(t=>{const e=typeof t;return null===t?"null":"object"===e&&Array.isArray(t)?"array":"object"===e&&s(t,String,((t,e)=>e.isPrototypeOf(t)))?"string":e})(e)===t,c=t=>e=>typeof e===t,u=t=>e=>t===e,h=(t,e)=>p(t)&&s(t,e,((t,e)=>a(t)===e)),d=l("string"),p=l("object"),f=t=>h(t,Object),g=l("array"),m=u(null),v=c("boolean"),y=u(void 0),b=t=>null==t,x=t=>!b(t),_=c("function"),w=c("number"),S=(t,e)=>{if(g(t)){for(let n=0,i=t.length;n<i;++n)if(!e(t[n]))return!1;return!0}return!1},C=()=>{},k=(t,e)=>(...n)=>t(e.apply(null,n)),A=(t,e)=>n=>t(e(n)),M=t=>()=>t,T=t=>t,I=(t,e)=>t===e;function E(t,...e){return(...n)=>{const i=e.concat(n);return t.apply(null,i)}}const O=t=>e=>!t(e),D=t=>()=>{throw new Error(t)},L=t=>t(),P=t=>{t()},N=M(!1),R=M(!0);class B{constructor(t,e){this.tag=t,this.value=e}static some(t){return new B(!0,t)}static none(){return B.singletonNone}fold(t,e){return this.tag?e(this.value):t()}isSome(){return this.tag}isNone(){return!this.tag}map(t){return this.tag?B.some(t(this.value)):B.none()}bind(t){return this.tag?t(this.value):B.none()}exists(t){return this.tag&&t(this.value)}forall(t){return!this.tag||t(this.value)}filter(t){return!this.tag||t(this.value)?this:B.none()}getOr(t){return this.tag?this.value:t}or(t){return this.tag?this:t}getOrThunk(t){return this.tag?this.value:t()}orThunk(t){return this.tag?this:t()}getOrDie(t){if(this.tag)return this.value;throw new Error(null!=t?t:"Called getOrDie on None")}static from(t){return x(t)?B.some(t):B.none()}getOrNull(){return this.tag?this.value:null}getOrUndefined(){return this.value}each(t){this.tag&&t(this.value)}toArray(){return this.tag?[this.value]:[]}toString(){return this.tag?`some(${this.value})`:"none()"}}B.singletonNone=new B(!1);const z=Array.prototype.slice,F=Array.prototype.indexOf,V=Array.prototype.push,H=(t,e)=>F.call(t,e),W=(t,e)=>H(t,e)>-1,j=(t,e)=>{for(let n=0,i=t.length;n<i;n++)if(e(t[n],n))return!0;return!1},Y=(t,e)=>{const n=t.length,i=new Array(n);for(let r=0;r<n;r++){const n=t[r];i[r]=e(n,r)}return i},X=(t,e)=>{for(let n=0,i=t.length;n<i;n++)e(t[n],n)},G=(t,e)=>{for(let n=t.length-1;n>=0;n--)e(t[n],n)},q=(t,e)=>{const n=[],i=[];for(let r=0,o=t.length;r<o;r++){const o=t[r];(e(o,r)?n:i).push(o)}return{pass:n,fail:i}},U=(t,e)=>{const n=[];for(let i=0,r=t.length;i<r;i++){const r=t[i];e(r,i)&&n.push(r)}return n},$=(t,e,n)=>(G(t,((t,i)=>{n=e(n,t,i)})),n),Z=(t,e,n)=>(X(t,((t,i)=>{n=e(n,t,i)})),n),K=(t,e,n)=>{for(let i=0,r=t.length;i<r;i++){const r=t[i];if(e(r,i))return B.some(r);if(n(r,i))break}return B.none()},Q=(t,e)=>K(t,e,N),J=(t,e)=>{for(let n=0,i=t.length;n<i;n++)if(e(t[n],n))return B.some(n);return B.none()},tt=t=>{const e=[];for(let n=0,i=t.length;n<i;++n){if(!g(t[n]))throw new Error("Arr.flatten item "+n+" was not an array, input: "+t);V.apply(e,t[n])}return e},et=(t,e)=>tt(Y(t,e)),nt=(t,e)=>{for(let n=0,i=t.length;n<i;++n)if(!0!==e(t[n],n))return!1;return!0},it=t=>{const e=z.call(t,0);return e.reverse(),e},rt=(t,e)=>U(t,(t=>!W(e,t))),ot=(t,e)=>{const n={};for(let i=0,r=t.length;i<r;i++){const r=t[i];n[String(r)]=e(r,i)}return n},at=(t,e)=>{const n=z.call(t,0);return n.sort(e),n},st=(t,e)=>e>=0&&e<t.length?B.some(t[e]):B.none(),lt=t=>st(t,0),ct=t=>st(t,t.length-1),ut=_(Array.from)?Array.from:t=>z.call(t),ht=(t,e)=>{for(let n=0;n<t.length;n++){const i=e(t[n],n);if(i.isSome())return i}return B.none()},dt=(t,e)=>{const n=[],i=_(e)?t=>j(n,(n=>e(n,t))):t=>W(n,t);for(let e=0,r=t.length;e<r;e++){const r=t[e];i(r)||n.push(r)}return n},pt=Object.keys,ft=Object.hasOwnProperty,gt=(t,e)=>{const n=pt(t);for(let i=0,r=n.length;i<r;i++){const r=n[i];e(t[r],r)}},mt=(t,e)=>vt(t,((t,n)=>({k:n,v:e(t,n)}))),vt=(t,e)=>{const n={};return gt(t,((t,i)=>{const r=e(t,i);n[r.k]=r.v})),n},yt=t=>(e,n)=>{t[n]=e},bt=(t,e,n,i)=>{gt(t,((t,r)=>{(e(t,r)?n:i)(t,r)}))},xt=(t,e)=>{const n={};return bt(t,e,yt(n),C),n},_t=(t,e)=>{const n=[];return gt(t,((t,i)=>{n.push(e(t,i))})),n},wt=t=>_t(t,T),St=(t,e)=>Ct(t,e)?B.from(t[e]):B.none(),Ct=(t,e)=>ft.call(t,e),kt=(t,e)=>Ct(t,e)&&void 0!==t[e]&&null!==t[e],At=t=>{const e={};return X(t,(t=>{e[t]={}})),pt(e)},Mt=t=>void 0!==t.length,Tt=Array.isArray,It=(t,e,n)=>{if(!t)return!1;if(n=n||t,Mt(t)){for(let i=0,r=t.length;i<r;i++)if(!1===e.call(n,t[i],i,t))return!1}else for(const i in t)if(Ct(t,i)&&!1===e.call(n,t[i],i,t))return!1;return!0},Et=(t,e)=>{const n=[];return It(t,((i,r)=>{n.push(e(i,r,t))})),n},Ot=(t,e)=>{const n=[];return It(t,((i,r)=>{e&&!e(i,r,t)||n.push(i)})),n},Dt=(t,e,n,i)=>{let r=y(n)?t[0]:n;for(let n=0;n<t.length;n++)r=e.call(i,r,t[n],n);return r},Lt=(t,e,n)=>{for(let i=0,r=t.length;i<r;i++)if(e.call(n,t[i],i,t))return i;return-1},Pt=t=>t[t.length-1],Nt=t=>{let e,n=!1;return(...i)=>(n||(n=!0,e=t.apply(null,i)),e)},Rt=()=>Bt(0,0),Bt=(t,e)=>({major:t,minor:e}),zt={nu:Bt,detect:(t,e)=>{const n=String(e).toLowerCase();return 0===t.length?Rt():((t,e)=>{const n=((t,e)=>{for(let n=0;n<t.length;n++){const i=t[n];if(i.test(e))return i}})(t,e);if(!n)return{major:0,minor:0};const i=t=>Number(e.replace(n,"$"+t));return Bt(i(1),i(2))})(t,n)},unknown:Rt},Ft=(t,e)=>{const n=String(e).toLowerCase();return Q(t,(t=>t.search(n)))},Vt=(t,e,n)=>""===e||t.length>=e.length&&t.substr(n,n+e.length)===e,Ht=(t,e)=>jt(t,e)?((t,e)=>t.substring(e))(t,e.length):t,Wt=(t,e,n=0,i)=>{const r=t.indexOf(e,n);return-1!==r&&(!!y(i)||r+e.length<=i)},jt=(t,e)=>Vt(t,e,0),Yt=(t,e)=>Vt(t,e,t.length-e.length),Xt=t=>e=>e.replace(t,""),Gt=Xt(/^\s+|\s+$/g),qt=Xt(/^\s+/g),Ut=Xt(/\s+$/g),$t=t=>t.length>0,Zt=t=>!$t(t),Kt=(t,e=10)=>{const n=parseInt(t,e);return isNaN(n)?B.none():B.some(n)},Qt=/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,Jt=t=>e=>Wt(e,t),te=[{name:"Edge",versionRegexes:[/.*?edge\/ ?([0-9]+)\.([0-9]+)$/],search:t=>Wt(t,"edge/")&&Wt(t,"chrome")&&Wt(t,"safari")&&Wt(t,"applewebkit")},{name:"Chromium",brand:"Chromium",versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/,Qt],search:t=>Wt(t,"chrome")&&!Wt(t,"chromeframe")},{name:"IE",versionRegexes:[/.*?msie\ ?([0-9]+)\.([0-9]+).*/,/.*?rv:([0-9]+)\.([0-9]+).*/],search:t=>Wt(t,"msie")||Wt(t,"trident")},{name:"Opera",versionRegexes:[Qt,/.*?opera\/([0-9]+)\.([0-9]+).*/],search:Jt("opera")},{name:"Firefox",versionRegexes:[/.*?firefox\/\ ?([0-9]+)\.([0-9]+).*/],search:Jt("firefox")},{name:"Safari",versionRegexes:[Qt,/.*?cpu os ([0-9]+)_([0-9]+).*/],search:t=>(Wt(t,"safari")||Wt(t,"mobile/"))&&Wt(t,"applewebkit")}],ee=[{name:"Windows",search:Jt("win"),versionRegexes:[/.*?windows\ nt\ ?([0-9]+)\.([0-9]+).*/]},{name:"iOS",search:t=>Wt(t,"iphone")||Wt(t,"ipad"),versionRegexes:[/.*?version\/\ ?([0-9]+)\.([0-9]+).*/,/.*cpu os ([0-9]+)_([0-9]+).*/,/.*cpu iphone os ([0-9]+)_([0-9]+).*/]},{name:"Android",search:Jt("android"),versionRegexes:[/.*?android\ ?([0-9]+)\.([0-9]+).*/]},{name:"macOS",search:Jt("mac os x"),versionRegexes:[/.*?mac\ os\ x\ ?([0-9]+)_([0-9]+).*/]},{name:"Linux",search:Jt("linux"),versionRegexes:[]},{name:"Solaris",search:Jt("sunos"),versionRegexes:[]},{name:"FreeBSD",search:Jt("freebsd"),versionRegexes:[]},{name:"ChromeOS",search:Jt("cros"),versionRegexes:[/.*?chrome\/([0-9]+)\.([0-9]+).*/]}],ne={browsers:M(te),oses:M(ee)},ie="Edge",re="Chromium",oe="Opera",ae="Firefox",se="Safari",le=t=>{const e=t.current,n=t.version,i=t=>()=>e===t;return{current:e,version:n,isEdge:i(ie),isChromium:i(re),isIE:i("IE"),isOpera:i(oe),isFirefox:i(ae),isSafari:i(se)}},ce=()=>le({current:void 0,version:zt.unknown()}),ue=le,he=(M(ie),M(re),M("IE"),M(oe),M(ae),M(se),"Windows"),de="Android",pe="Linux",fe="macOS",ge="Solaris",me="FreeBSD",ve="ChromeOS",ye=t=>{const e=t.current,n=t.version,i=t=>()=>e===t;return{current:e,version:n,isWindows:i(he),isiOS:i("iOS"),isAndroid:i(de),isMacOS:i(fe),isLinux:i(pe),isSolaris:i(ge),isFreeBSD:i(me),isChromeOS:i(ve)}},be=()=>ye({current:void 0,version:zt.unknown()}),xe=ye,_e=(M(he),M("iOS"),M(de),M(pe),M(fe),M(ge),M(me),M(ve),t=>window.matchMedia(t).matches);let we=Nt((()=>((t,e,n)=>{const i=ne.browsers(),r=ne.oses(),o=e.bind((t=>((t,e)=>ht(e.brands,(e=>{const n=e.brand.toLowerCase();return Q(t,(t=>{var e;return n===(null===(e=t.brand)||void 0===e?void 0:e.toLowerCase())})).map((t=>({current:t.name,version:zt.nu(parseInt(e.version,10),0)})))})))(i,t))).orThunk((()=>((t,e)=>Ft(t,e).map((t=>{const n=zt.detect(t.versionRegexes,e);return{current:t.name,version:n}})))(i,t))).fold(ce,ue),a=((t,e)=>Ft(t,e).map((t=>{const n=zt.detect(t.versionRegexes,e);return{current:t.name,version:n}})))(r,t).fold(be,xe),s=((t,e,n,i)=>{const r=t.isiOS()&&!0===/ipad/i.test(n),o=t.isiOS()&&!r,a=t.isiOS()||t.isAndroid(),s=a||i("(pointer:coarse)"),l=r||!o&&a&&i("(min-device-width:768px)"),c=o||a&&!l,u=e.isSafari()&&t.isiOS()&&!1===/safari/i.test(n),h=!c&&!l&&!u;return{isiPad:M(r),isiPhone:M(o),isTablet:M(l),isPhone:M(c),isTouch:M(s),isAndroid:t.isAndroid,isiOS:t.isiOS,isWebView:M(u),isDesktop:M(h)}})(a,o,t,n);return{browser:o,os:a,deviceType:s}})(navigator.userAgent,B.from(navigator.userAgentData),_e)));const Se=()=>we(),Ce=navigator.userAgent,ke=Se(),Ae=ke.browser,Me=ke.os,Te=ke.deviceType,Ie=-1!==Ce.indexOf("Windows Phone"),Ee={transparentSrc:"data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",documentMode:Ae.isIE()?document.documentMode||7:10,cacheSuffix:null,container:null,canHaveCSP:!Ae.isIE(),windowsPhone:Ie,browser:{current:Ae.current,version:Ae.version,isChromium:Ae.isChromium,isEdge:Ae.isEdge,isFirefox:Ae.isFirefox,isIE:Ae.isIE,isOpera:Ae.isOpera,isSafari:Ae.isSafari},os:{current:Me.current,version:Me.version,isAndroid:Me.isAndroid,isChromeOS:Me.isChromeOS,isFreeBSD:Me.isFreeBSD,isiOS:Me.isiOS,isLinux:Me.isLinux,isMacOS:Me.isMacOS,isSolaris:Me.isSolaris,isWindows:Me.isWindows},deviceType:{isDesktop:Te.isDesktop,isiPad:Te.isiPad,isiPhone:Te.isiPhone,isPhone:Te.isPhone,isTablet:Te.isTablet,isTouch:Te.isTouch,isWebView:Te.isWebView}},Oe=/^\s*|\s*$/g,De=t=>b(t)?"":(""+t).replace(Oe,""),Le=function(t,e,n,i){i=i||this,t&&(n&&(t=t[n]),It(t,((t,r)=>!1!==e.call(i,t,r,n)&&(Le(t,e,n,i),!0))))},Pe={trim:De,isArray:Tt,is:(t,e)=>e?!("array"!==e||!Tt(t))||typeof t===e:void 0!==t,toArray:t=>{if(Tt(t))return t;{const e=[];for(let n=0,i=t.length;n<i;n++)e[n]=t[n];return e}},makeMap:(t,e,n={})=>{const i=d(t)?t.split(e||","):t||[];let r=i.length;for(;r--;)n[i[r]]={};return n},each:It,map:Et,grep:Ot,inArray:(t,e)=>{if(t)for(let n=0,i=t.length;n<i;n++)if(t[n]===e)return n;return-1},hasOwn:Ct,extend:(t,...e)=>{for(let n=0;n<e.length;n++){const i=e[n];for(const e in i)if(Ct(i,e)){const n=i[e];void 0!==n&&(t[e]=n)}}return t},walk:Le,resolve:(t,e=window)=>{const n=t.split(".");for(let t=0,i=n.length;t<i&&(e=e[n[t]]);t++);return e},explode:(t,e)=>g(t)?t:""===t?[]:Et(t.split(e||","),De),_addCacheSuffix:t=>{const e=Ee.cacheSuffix;return e&&(t+=(-1===t.indexOf("?")?"?":"&")+e),t}},Ne=(t,e,n=I)=>t.exists((t=>n(t,e))),Re=(t,e,n=I)=>Be(t,e,n).getOr(t.isNone()&&e.isNone()),Be=(t,e,n)=>t.isSome()&&e.isSome()?B.some(n(t.getOrDie(),e.getOrDie())):B.none(),ze=(t,e)=>t?B.some(e):B.none(),Fe="undefined"!=typeof window?window:Function("return this;")(),Ve=(t,e)=>((t,e)=>{let n=null!=e?e:Fe;for(let e=0;e<t.length&&null!=n;++e)n=n[t[e]];return n})(t.split("."),e),He=Object.getPrototypeOf,We=t=>t.dom.nodeName.toLowerCase(),je=t=>t.dom.nodeType,Ye=t=>e=>je(e)===t,Xe=t=>Ge(t)&&(t=>{const e=Ve("ownerDocument.defaultView",t);return p(t)&&((t=>((t,e)=>{const n=((t,e)=>Ve("HTMLElement",e))(0,e);if(null==n)throw new Error(t+" not available on this browser");return n})("HTMLElement",t))(e).prototype.isPrototypeOf(t)||/^HTML\w*Element$/.test(He(t).constructor.name))})(t.dom),Ge=Ye(1),qe=Ye(3),Ue=Ye(9),$e=Ye(11),Ze=t=>e=>Ge(e)&&We(e)===t,Ke=(t,e,n)=>{if(!(d(n)||v(n)||w(n)))throw console.error("Invalid call to Attribute.set. Key ",e,":: Value ",n,":: Element ",t),new Error("Attribute value was not simple");t.setAttribute(e,n+"")},Qe=(t,e,n)=>{Ke(t.dom,e,n)},Je=(t,e)=>{const n=t.dom;gt(e,((t,e)=>{Ke(n,e,t)}))},tn=(t,e)=>{const n=t.dom.getAttribute(e);return null===n?void 0:n},en=(t,e)=>B.from(tn(t,e)),nn=(t,e)=>{const n=t.dom;return!(!n||!n.hasAttribute)&&n.hasAttribute(e)},rn=(t,e)=>{t.dom.removeAttribute(e)},on=t=>Z(t.dom.attributes,((t,e)=>(t[e.name]=e.value,t)),{}),an=(t,e)=>{const n=tn(t,e);return void 0===n||""===n?[]:n.split(" ")},sn=t=>void 0!==t.dom.classList,ln=t=>an(t,"class"),cn=(t,e)=>((t,e,n)=>{const i=an(t,e).concat([n]);return Qe(t,e,i.join(" ")),!0})(t,"class",e),un=(t,e)=>((t,e,n)=>{const i=U(an(t,e),(t=>t!==n));return i.length>0?Qe(t,e,i.join(" ")):rn(t,e),!1})(t,"class",e),hn=(t,e)=>{sn(t)?t.dom.classList.add(e):cn(t,e)},dn=t=>{0===(sn(t)?t.dom.classList:ln(t)).length&&rn(t,"class")},pn=(t,e)=>{sn(t)?t.dom.classList.remove(e):un(t,e),dn(t)},fn=(t,e)=>sn(t)&&t.dom.classList.contains(e),gn=t=>{if(null==t)throw new Error("Node cannot be null or undefined");return{dom:t}},mn=(t,e)=>{const n=(e||document).createElement("div");if(n.innerHTML=t,!n.hasChildNodes()||n.childNodes.length>1){const e="HTML does not have a single root node";throw console.error(e,t),new Error(e)}return gn(n.childNodes[0])},vn=(t,e)=>{const n=(e||document).createElement(t);return gn(n)},yn=(t,e)=>{const n=(e||document).createTextNode(t);return gn(n)},bn=gn,xn=(t,e)=>{const n=[],i=t=>(n.push(t),e(t));let r=e(t);do{r=r.bind(i)}while(r.isSome());return n},_n=(t,e)=>{const n=t.dom;if(1!==n.nodeType)return!1;{const t=n;if(void 0!==t.matches)return t.matches(e);if(void 0!==t.msMatchesSelector)return t.msMatchesSelector(e);if(void 0!==t.webkitMatchesSelector)return t.webkitMatchesSelector(e);if(void 0!==t.mozMatchesSelector)return t.mozMatchesSelector(e);throw new Error("Browser lacks native selectors")}},wn=t=>1!==t.nodeType&&9!==t.nodeType&&11!==t.nodeType||0===t.childElementCount,Sn=(t,e)=>t.dom===e.dom,Cn=(t,e)=>{const n=t.dom,i=e.dom;return n!==i&&n.contains(i)},kn=t=>bn(t.dom.ownerDocument),An=t=>Ue(t)?t:kn(t),Mn=t=>bn(An(t).dom.defaultView),Tn=t=>B.from(t.dom.parentNode).map(bn),In=t=>B.from(t.dom.parentElement).map(bn),En=(t,e)=>{const n=_(e)?e:N;let i=t.dom;const r=[];for(;null!==i.parentNode&&void 0!==i.parentNode;){const t=i.parentNode,e=bn(t);if(r.push(e),!0===n(e))break;i=t}return r},On=t=>B.from(t.dom.previousSibling).map(bn),Dn=t=>B.from(t.dom.nextSibling).map(bn),Ln=t=>it(xn(t,On)),Pn=t=>xn(t,Dn),Nn=t=>Y(t.dom.childNodes,bn),Rn=(t,e)=>{const n=t.dom.childNodes;return B.from(n[e]).map(bn)},Bn=t=>Rn(t,0),zn=t=>Rn(t,t.dom.childNodes.length-1),Fn=t=>t.dom.childNodes.length,Vn=t=>$e(t)&&x(t.dom.host),Hn=_(Element.prototype.attachShadow)&&_(Node.prototype.getRootNode),Wn=M(Hn),jn=Hn?t=>bn(t.dom.getRootNode()):An,Yn=t=>Vn(t)?t:(t=>{const e=t.dom.head;if(null==e)throw new Error("Head is not available yet");return bn(e)})(An(t)),Xn=t=>bn(t.dom.host),Gn=t=>{if(Wn()&&x(t.target)){const e=bn(t.target);if(Ge(e)&&qn(e)&&t.composed&&t.composedPath){const e=t.composedPath();if(e)return lt(e)}}return B.from(t.target)},qn=t=>x(t.dom.shadowRoot),Un=t=>{const e=qe(t)?t.dom.parentNode:t.dom;if(null==e||null===e.ownerDocument)return!1;const n=e.ownerDocument;return(t=>{const e=jn(t);return Vn(e)?B.some(e):B.none()})(bn(e)).fold((()=>n.body.contains(e)),A(Un,Xn))};var $n=(t,e,n,i,r)=>t(n,i)?B.some(n):_(r)&&r(n)?B.none():e(n,i,r);const Zn=(t,e,n)=>{let i=t.dom;const r=_(n)?n:N;for(;i.parentNode;){i=i.parentNode;const t=bn(i);if(e(t))return B.some(t);if(r(t))break}return B.none()},Kn=(t,e,n)=>$n(((t,e)=>e(t)),Zn,t,e,n),Qn=(t,e)=>{const n=t=>{for(let i=0;i<t.childNodes.length;i++){const r=bn(t.childNodes[i]);if(e(r))return B.some(r);const o=n(t.childNodes[i]);if(o.isSome())return o}return B.none()};return n(t.dom)},Jn=(t,e,n)=>Zn(t,(t=>_n(t,e)),n),ti=(t,e)=>((t,e)=>{const n=void 0===e?document:e.dom;return wn(n)?B.none():B.from(n.querySelector(t)).map(bn)})(e,t),ei=(t,e,n)=>$n(((t,e)=>_n(t,e)),Jn,t,e,n),ni=(t,e=!1)=>{return Un(t)?t.dom.isContentEditable:(n=t,ei(n,"[contenteditable]")).fold(M(e),(t=>"true"===ii(t)));var n},ii=t=>t.dom.contentEditable,ri=t=>void 0!==t.style&&_(t.style.getPropertyValue),oi=(t,e,n)=>{if(!d(n))throw console.error("Invalid call to CSS.set. Property ",e,":: Value ",n,":: Element ",t),new Error("CSS value must be a string: "+n);ri(t)&&t.style.setProperty(e,n)},ai=(t,e,n)=>{const i=t.dom;oi(i,e,n)},si=(t,e)=>{const n=t.dom;gt(e,((t,e)=>{oi(n,e,t)}))},li=(t,e)=>{const n=t.dom,i=window.getComputedStyle(n).getPropertyValue(e);return""!==i||Un(t)?i:ci(n,e)},ci=(t,e)=>ri(t)?t.style.getPropertyValue(e):"",ui=(t,e)=>{const n=t.dom,i=ci(n,e);return B.from(i).filter((t=>t.length>0))},hi=t=>{const e={},n=t.dom;if(ri(n))for(let t=0;t<n.style.length;t++){const i=n.style.item(t);e[i]=n.style[i]}return e},di=(t,e)=>{((t,e)=>{ri(t)&&t.style.removeProperty(e)})(t.dom,e),Ne(en(t,"style").map(Gt),"")&&rn(t,"style")},pi=(t,e)=>{Tn(t).each((n=>{n.dom.insertBefore(e.dom,t.dom)}))},fi=(t,e)=>{Dn(t).fold((()=>{Tn(t).each((t=>{mi(t,e)}))}),(t=>{pi(t,e)}))},gi=(t,e)=>{Bn(t).fold((()=>{mi(t,e)}),(n=>{t.dom.insertBefore(e.dom,n.dom)}))},mi=(t,e)=>{t.dom.appendChild(e.dom)},vi=(t,e)=>{pi(t,e),mi(e,t)},yi=(t,e)=>{X(e,(e=>{mi(t,e)}))},bi=t=>{t.dom.textContent="",X(Nn(t),(t=>{xi(t)}))},xi=t=>{const e=t.dom;null!==e.parentNode&&e.parentNode.removeChild(e)},_i=t=>{const e=Nn(t);var n,i;e.length>0&&(n=t,X(i=e,((t,e)=>{const r=0===e?n:i[e-1];fi(r,t)}))),xi(t)},wi=t=>Y(t,bn),Si=t=>t.dom.innerHTML,Ci=(t,e)=>{const n=kn(t).dom,i=bn(n.createDocumentFragment()),r=((t,e)=>{const n=(e||document).createElement("div");return n.innerHTML=t,Nn(bn(n))})(e,n);yi(i,r),bi(t),mi(t,i)},ki=(t,e,n,i)=>{t.dom.removeEventListener(e,n,i)},Ai=(t,e)=>({left:t,top:e,translate:(n,i)=>Ai(t+n,e+i)}),Mi=Ai,Ti=(t,e)=>void 0!==t?t:void 0!==e?e:0,Ii=t=>{const e=t.dom,n=e.ownerDocument.body;return n===e?Mi(n.offsetLeft,n.offsetTop):Un(t)?(t=>{const e=t.getBoundingClientRect();return Mi(e.left,e.top)})(e):Mi(0,0)},Ei=t=>{const e=void 0!==t?t.dom:document,n=e.body.scrollLeft||e.documentElement.scrollLeft,i=e.body.scrollTop||e.documentElement.scrollTop;return Mi(n,i)},Oi=(t,e,n)=>{const i=(void 0!==n?n.dom:document).defaultView;i&&i.scrollTo(t,e)},Di=(t,e)=>{Se().browser.isSafari()&&_(t.dom.scrollIntoViewIfNeeded)?t.dom.scrollIntoViewIfNeeded(!1):t.dom.scrollIntoView(e)},Li=(t,e,n,i)=>({x:t,y:e,width:n,height:i,right:t+n,bottom:e+i}),Pi=t=>{const e=void 0===t?window:t,n=e.document,i=Ei(bn(n));return(t=>{const e=void 0===t?window:t;return Se().browser.isFirefox()?B.none():B.from(e.visualViewport)})(e).fold((()=>{const t=e.document.documentElement,n=t.clientWidth,r=t.clientHeight;return Li(i.left,i.top,n,r)}),(t=>Li(Math.max(t.pageLeft,i.left),Math.max(t.pageTop,i.top),t.width,t.height)))},Ni=(t,e)=>{let n=[];return X(Nn(t),(t=>{e(t)&&(n=n.concat([t])),n=n.concat(Ni(t,e))})),n},Ri=(t,e)=>((t,e)=>{const n=void 0===e?document:e.dom;return wn(n)?[]:Y(n.querySelectorAll(t),bn)})(e,t),Bi=(t,e,n)=>Zn(t,e,n).isSome(),zi=(t,e)=>Qn(t,e).isSome();class Fi{constructor(t,e){this.node=t,this.rootNode=e,this.current=this.current.bind(this),this.next=this.next.bind(this),this.prev=this.prev.bind(this),this.prev2=this.prev2.bind(this)}current(){return this.node}next(t){return this.node=this.findSibling(this.node,"firstChild","nextSibling",t),this.node}prev(t){return this.node=this.findSibling(this.node,"lastChild","previousSibling",t),this.node}prev2(t){return this.node=this.findPreviousNode(this.node,t),this.node}findSibling(t,e,n,i){if(t){if(!i&&t[e])return t[e];if(t!==this.rootNode){let e=t[n];if(e)return e;for(let i=t.parentNode;i&&i!==this.rootNode;i=i.parentNode)if(e=i[n],e)return e}}}findPreviousNode(t,e){if(t){const n=t.previousSibling;if(this.rootNode&&n===this.rootNode)return;if(n){if(!e)for(let t=n.lastChild;t;t=t.lastChild)if(!t.lastChild)return t;return n}const i=t.parentNode;if(i&&i!==this.rootNode)return i}}}const Vi="\ufeff",Hi="",Wi=t=>t===Vi,ji=/^[ \t\r\n]*$/,Yi=t=>ji.test(t),Xi=t=>"\n"===t||"\r"===t,Gi=(t,e=4,n=!0,i=!0)=>{const r=((t,e)=>e<=0?"":new Array(e+1).join(" "))(0,e),o=t.replace(/\t/g,r),a=Z(o,((t,e)=>(t=>-1!==" \f\t\v".indexOf(t))(e)||e===Hi?t.pcIsSpace||""===t.str&&n||t.str.length===o.length-1&&i||((t,e)=>e<t.length&&e>=0&&Xi(t[e]))(o,t.str.length+1)?{pcIsSpace:!1,str:t.str+Hi}:{pcIsSpace:!0,str:t.str+" "}:{pcIsSpace:Xi(e),str:t.str+e}),{pcIsSpace:!1,str:""});return a.str},qi=t=>e=>!!e&&e.nodeType===t,Ui=t=>!!t&&!Object.getPrototypeOf(t),$i=qi(1),Zi=t=>$i(t)&&Xe(bn(t)),Ki=t=>{const e=t.toLowerCase();return t=>x(t)&&t.nodeName.toLowerCase()===e},Qi=t=>{const e=t.map((t=>t.toLowerCase()));return t=>{if(t&&t.nodeName){const n=t.nodeName.toLowerCase();return W(e,n)}return!1}},Ji=(t,e)=>{const n=e.toLowerCase().split(" ");return e=>{if($i(e)){const i=e.ownerDocument.defaultView;if(i)for(let r=0;r<n.length;r++){const o=i.getComputedStyle(e,null);if((o?o.getPropertyValue(t):null)===n[r])return!0}}return!1}},tr=t=>$i(t)&&t.hasAttribute("data-mce-bogus"),er=t=>$i(t)&&"TABLE"===t.tagName,nr=t=>e=>{if(Zi(e)){if(e.contentEditable===t)return!0;if(e.getAttribute("data-mce-contenteditable")===t)return!0}return!1},ir=Qi(["textarea","input"]),rr=qi(3),or=qi(4),ar=qi(7),sr=qi(8),lr=qi(9),cr=qi(11),ur=Ki("br"),hr=Ki("img"),dr=nr("true"),pr=nr("false"),fr=Qi(["td","th"]),gr=Qi(["td","th","caption"]),mr=Qi(["video","audio","object","embed"]),vr=Ki("li"),yr=Ki("details"),br=Ki("summary"),xr={skipBogus:!0,includeZwsp:!1,checkRootAsContent:!1},_r=t=>$i(t)&&t.hasAttribute("data-mce-bookmark"),wr=(t,e,n,i)=>_(i.isContent)&&i.isContent(e)||((t,e)=>$i(t)&&Ct(e.getNonEmptyElements(),t.nodeName))(e,t)||_r(e)||(t=>$i(t)&&"A"===t.nodeName&&!t.hasAttribute("href")&&(t.hasAttribute("name")||t.hasAttribute("id")))(e)||((t,e,n,i)=>rr(t)&&!((t,e,n)=>Yi(t.data)&&!((t,e,n)=>{const i=bn(e),r=bn(t),o=n.getWhitespaceElements();return Bi(r,(t=>Ct(o,We(t))),E(Sn,i))})(t,e,n))(t,e,n)&&(!i.includeZwsp||!(t=>{for(const e of t)if(!Wi(e))return!1;return!0})(t.data)))(e,n,t,i)||pr(e)||dr(e)&&(t=>In(bn(t)).exists((t=>!ni(t))))(e),Sr=(t,e,n)=>{const i={...xr,...n};if(i.checkRootAsContent&&wr(t,e,e,i))return!1;let r=e.firstChild,o=0;if(!r)return!0;const a=new Fi(r,e);do{if(i.skipBogus&&$i(r)){const t=r.getAttribute("data-mce-bogus");if(t){r=a.next("all"===t);continue}}if(sr(r))r=a.next(!0);else if(ur(r))o++,r=a.next();else{if(wr(t,r,e,i))return!1;r=a.next()}}while(r);return o<=1},Cr=(t,e,n)=>Sr(t,e.dom,{checkRootAsContent:!0,...n}),kr=(t,e,n)=>wr(t,e,e,{includeZwsp:xr.includeZwsp,...n}),Ar=t=>"svg"===t.toLowerCase(),Mr=t=>Ar(t.nodeName),Tr=t=>"svg"===(null==t?void 0:t.nodeName)?"svg":"html",Ir=["svg"],Er="data-mce-block",Or=t=>Y((t=>U(pt(t),(t=>!/[A-Z]/.test(t))))(t),(t=>`${t}:`+Y(Ir,(e=>`not(${e} ${t})`)).join(":"))).join(","),Dr=(t,e)=>x(e.querySelector(t))?(e.setAttribute(Er,"true"),"inline-boundary"===e.getAttribute("data-mce-selected")&&e.removeAttribute("data-mce-selected"),!0):(e.removeAttribute(Er),!1),Lr=(t,e)=>{const n=Or(t.getTransparentElements()),i=Or(t.getBlockElements());return U(e.querySelectorAll(n),(t=>Dr(i,t)))},Pr=(t,e,n)=>{var i;const r=n?"lastChild":"firstChild";for(let n=e[r];n;n=n[r])if(Sr(t,n,{checkRootAsContent:!0}))return void(null===(i=n.parentNode)||void 0===i||i.removeChild(n))},Nr=(t,e)=>{const n=Lr(t,e);((t,e,n)=>{const i=t.getBlockElements(),r=bn(e),o=t=>We(t)in i,a=t=>Sn(t,r);X(wi(n),(e=>{Zn(e,o,a).each((n=>{const i=((e,i)=>U(Nn(e),(e=>o(e)&&!t.isValidChild(We(n),We(e)))))(e);if(i.length>0){const e=In(n);X(i,(e=>{Zn(e,o,a).each((n=>{((t,e,n)=>{const i=document.createRange(),r=e.parentNode;if(r){i.setStartBefore(e),i.setEndBefore(n);const o=i.extractContents();Pr(t,o,!0),i.setStartAfter(n),i.setEndAfter(e);const a=i.extractContents();Pr(t,a,!1),Sr(t,o,{checkRootAsContent:!0})||r.insertBefore(o,e),Sr(t,n,{checkRootAsContent:!0})||r.insertBefore(n,e),Sr(t,a,{checkRootAsContent:!0})||r.insertBefore(a,e),r.removeChild(e)}})(t,n.dom,e.dom)}))})),e.each((e=>Lr(t,e.dom)))}}))}))})(t,e,n),((t,e,n)=>{X([...n,...Vr(t,e)?[e]:[]],(e=>X(Ri(bn(e),e.nodeName.toLowerCase()),(e=>{Hr(t,e.dom)&&_i(e)}))))})(t,e,n)},Rr=(t,e)=>{if(Fr(t,e)){const n=Or(t.getBlockElements());Dr(n,e)}},Br=t=>t.hasAttribute(Er),zr=(t,e)=>Ct(t.getTransparentElements(),e),Fr=(t,e)=>$i(e)&&zr(t,e.nodeName),Vr=(t,e)=>Fr(t,e)&&Br(e),Hr=(t,e)=>Fr(t,e)&&!Br(e),Wr=(t,e)=>1===e.type&&zr(t,e.name)&&d(e.attr(Er)),jr=Se().browser,Yr=t=>Q(t,Ge),Xr=(t,e)=>t.children&&W(t.children,e),Gr=(t,e={})=>{let n=0;const i={},r=bn(t),o=An(r),a=t=>{mi(Yn(r),t)},s=t=>{const e=Yn(r);ti(e,"#"+t).each(xi)},l=t=>St(i,t).getOrThunk((()=>({id:"mce-u"+n++,passed:[],failed:[],count:0}))),c=t=>new Promise(((n,r)=>{let s;const c=Pe._addCacheSuffix(t),u=l(c);i[c]=u,u.count++;const h=(t,e)=>{X(t,P),u.status=e,u.passed=[],u.failed=[],s&&(s.onload=null,s.onerror=null,s=null)},d=()=>h(u.passed,2),p=()=>h(u.failed,3);if(n&&u.passed.push(n),r&&u.failed.push(r),1===u.status)return;if(2===u.status)return void d();if(3===u.status)return void p();u.status=1;const f=vn("link",o.dom);Je(f,{rel:"stylesheet",type:"text/css",id:u.id}),e.contentCssCors&&Qe(f,"crossOrigin","anonymous"),e.referrerPolicy&&Qe(f,"referrerpolicy",e.referrerPolicy),s=f.dom,s.onload=d,s.onerror=p,a(f),Qe(f,"href",c)})),u=t=>{const e=Pe._addCacheSuffix(t);St(i,e).each((t=>{0==--t.count&&(delete i[e],s(t.id))}))};return{load:c,loadRawCss:(t,e)=>{const n=l(t);i[t]=n,n.count++;const r=vn("style",o.dom);Je(r,{rel:"stylesheet",type:"text/css",id:n.id}),r.dom.innerHTML=e,a(r)},loadAll:t=>Promise.allSettled(Y(t,(t=>c(t).then(M(t))))).then((t=>{const e=q(t,(t=>"fulfilled"===t.status));return e.fail.length>0?Promise.reject(Y(e.fail,(t=>t.reason))):Y(e.pass,(t=>t.value))})),unload:u,unloadRawCss:t=>{St(i,t).each((e=>{0==--e.count&&(delete i[t],s(e.id))}))},unloadAll:t=>{X(t,(t=>{u(t)}))},_setReferrerPolicy:t=>{e.referrerPolicy=t},_setContentCssCors:t=>{e.contentCssCors=t}}},qr=(()=>{const t=new WeakMap;return{forElement:(e,n)=>{const i=jn(e).dom;return B.from(t.get(i)).getOrThunk((()=>{const e=Gr(i,n);return t.set(i,e),e}))}}})(),Ur=(t,e)=>x(t)&&(kr(e,t)||e.isInline(t.nodeName.toLowerCase())),$r=t=>(t=>"span"===t.nodeName.toLowerCase())(t)&&"bookmark"===t.getAttribute("data-mce-type"),Zr=(t,e,n,i)=>{var r;const o=i||e;if($i(e)&&$r(e))return e;const a=e.childNodes;for(let e=a.length-1;e>=0;e--)Zr(t,a[e],n,o);if($i(e)){const t=e.childNodes;1===t.length&&$r(t[0])&&(null===(r=e.parentNode)||void 0===r||r.insertBefore(t[0],e))}return(t=>cr(t)||lr(t))(e)||kr(n,e)||(t=>!!$i(t)&&t.childNodes.length>0)(e)||((t,e,n)=>rr(t)&&t.data.length>0&&((t,e,n)=>{const i=new Fi(t,e).prev(!1),r=new Fi(t,e).next(!1),o=y(i)||Ur(i,n),a=y(r)||Ur(r,n);return o&&a})(t,e,n))(e,o,n)||t.remove(e),e},Kr=Pe.makeMap,Qr=/[&<>\"\u0060\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Jr=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,to=/[<>&\"\']/g,eo=/&#([a-z0-9]+);?|&([a-z0-9]+);/gi,no={128:"",130:"",131:"",132:"",133:"",134:"",135:"",136:"",137:"",138:"",139:"",140:"",142:"",145:"",146:"",147:"",148:"",149:"",150:"",151:"",152:"",153:"",154:"",155:"",156:"",158:"",159:""},io={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;","`":"&#96;"},ro={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},oo=(t,e)=>{const n={};if(t){const i=t.split(",");e=e||10;for(let t=0;t<i.length;t+=2){const r=String.fromCharCode(parseInt(i[t],e));if(!io[r]){const e="&"+i[t+1]+";";n[r]=e,n[e]=r}}return n}},ao=oo("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),so=(t,e)=>t.replace(e?Qr:Jr,(t=>io[t]||t)),lo=(t,e)=>t.replace(e?Qr:Jr,(t=>t.length>1?"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";":io[t]||"&#"+t.charCodeAt(0)+";")),co=(t,e,n)=>{const i=n||ao;return t.replace(e?Qr:Jr,(t=>io[t]||i[t]||t))},uo={encodeRaw:so,encodeAllRaw:t=>(""+t).replace(to,(t=>io[t]||t)),encodeNumeric:lo,encodeNamed:co,getEncodeFunc:(t,e)=>{const n=oo(e)||ao,i=Kr(t.replace(/\+/g,","));return i.named&&i.numeric?(t,e)=>t.replace(e?Qr:Jr,(t=>void 0!==io[t]?io[t]:void 0!==n[t]?n[t]:t.length>1?"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";":"&#"+t.charCodeAt(0)+";")):i.named?e?(t,e)=>co(t,e,n):co:i.numeric?lo:so},decode:t=>t.replace(eo,((t,e)=>e?(e="x"===e.charAt(0).toLowerCase()?parseInt(e.substr(1),16):parseInt(e,10))>65535?(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e))):no[e]||String.fromCharCode(e):ro[t]||ao[t]||(t=>{const e=vn("div").dom;return e.innerHTML=t,e.textContent||e.innerText||t})(t)))},ho=(t,e)=>(t=Pe.trim(t))?t.split(e||" "):[],po=t=>new RegExp("^"+t.replace(/([?+*])/g,".$1")+"$"),fo=t=>Object.freeze(["id","accesskey","class","dir","lang","style","tabindex","title","role",..."html4"!==t?["contenteditable","contextmenu","draggable","dropzone","hidden","spellcheck","translate"]:[],..."html5-strict"!==t?["xml:lang"]:[]]),go=t=>{let e,n;e="address blockquote div dl fieldset form h1 h2 h3 h4 h5 h6 hr menu ol p pre table ul",n="a abbr b bdo br button cite code del dfn em embed i iframe img input ins kbd label map noscript object q s samp script select small span strong sub sup textarea u var #text #comment","html4"!==t&&(e+=" article aside details dialog figure main header footer hgroup section nav a ins del canvas map",n+=" audio canvas command data datalist mark meter output picture progress time wbr video ruby bdi keygen svg"),"html5-strict"!==t&&(n=[n,"acronym applet basefont big font strike tt"].join(" "),e=[e,"center dir isindex noframes"].join(" "));const i=[e,n].join(" ");return{blockContent:e,phrasingContent:n,flowContent:i}},mo=t=>{const{blockContent:e,phrasingContent:n,flowContent:i}=go(t),r=t=>Object.freeze(t.split(" "));return Object.freeze({blockContent:r(e),phrasingContent:r(n),flowContent:r(i)})},vo={html4:Nt((()=>mo("html4"))),html5:Nt((()=>mo("html5"))),"html5-strict":Nt((()=>mo("html5-strict")))},yo=(t,e)=>{const{blockContent:n,phrasingContent:i,flowContent:r}=vo[t]();return"blocks"===e?B.some(n):"phrasing"===e?B.some(i):"flow"===e?B.some(r):B.none()},bo=t=>B.from(/^(@?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)$/.exec(t)).map((t=>({preset:"@"===t[1],name:t[2]}))),xo={},_o=Pe.makeMap,wo=Pe.each,So=Pe.extend,Co=Pe.explode,ko=(t,e={})=>{const n=_o(t," ",_o(t.toUpperCase()," "));return So(n,e)},Ao=t=>ko("td th li dt dd figcaption caption details summary",t.getTextBlockElements()),Mo=(t,e)=>{if(t){const n={};return d(t)&&(t={"*":t}),wo(t,((t,i)=>{n[i]=n[i.toUpperCase()]="map"===e?_o(t,/[, ]/):Co(t,/[, ]/)})),n}},To=(t={})=>{var e;const n={},i={};let r=[];const o={},a={},s=(e,n,i)=>{const r=t[e];if(r)return _o(r,/[, ]/,_o(r.toUpperCase(),/[, ]/));{let t=xo[e];return t||(t=ko(n,i),xo[e]=t),t}},l=null!==(e=t.schema)&&void 0!==e?e:"html5",c=(t=>{const e=fo(t),{phrasingContent:n,flowContent:i}=go(t),r={},o=(t,e,n)=>{r[t]={attributes:ot(e,M({})),attributesOrder:e,children:ot(n,M({}))}},a=(t,n="",i="")=>{const r=ho(i),a=ho(t);let s=a.length;const l=[...e,...ho(n)];for(;s--;)o(a[s],l.slice(),r)},s=(t,e)=>{const n=ho(t),i=ho(e);let o=n.length;for(;o--;){const t=r[n[o]];for(let e=0,n=i.length;e<n;e++)t.attributes[i[e]]={},t.attributesOrder.push(i[e])}};return"html5-strict"!==t&&(X(ho("acronym applet basefont big font strike tt"),(t=>{a(t,"",n)})),X(ho("center dir isindex noframes"),(t=>{a(t,"",i)}))),a("html","manifest","head body"),a("head","","base command link meta noscript script style title"),a("title hr noscript br"),a("base","href target"),a("link","href rel media hreflang type sizes hreflang"),a("meta","name http-equiv content charset"),a("style","media type scoped"),a("script","src async defer type charset"),a("body","onafterprint onbeforeprint onbeforeunload onblur onerror onfocus onhashchange onload onmessage onoffline ononline onpagehide onpageshow onpopstate onresize onscroll onstorage onunload",i),a("dd div","",i),a("address dt caption","","html4"===t?n:i),a("h1 h2 h3 h4 h5 h6 pre p abbr code var samp kbd sub sup i b u bdo span legend em strong small s cite dfn","",n),a("blockquote","cite",i),a("ol","reversed start type","li"),a("ul","","li"),a("li","value",i),a("dl","","dt dd"),a("a","href target rel media hreflang type","html4"===t?n:i),a("q","cite",n),a("ins del","cite datetime",i),a("img","src sizes srcset alt usemap ismap width height"),a("iframe","src name width height",i),a("embed","src type width height"),a("object","data type typemustmatch name usemap form width height",[i,"param"].join(" ")),a("param","name value"),a("map","name",[i,"area"].join(" ")),a("area","alt coords shape href target rel media hreflang type"),a("table","border","caption colgroup thead tfoot tbody tr"+("html4"===t?" col":"")),a("colgroup","span","col"),a("col","span"),a("tbody thead tfoot","","tr"),a("tr","","td th"),a("td","colspan rowspan headers",i),a("th","colspan rowspan headers scope abbr",i),a("form","accept-charset action autocomplete enctype method name novalidate target",i),a("fieldset","disabled form name",[i,"legend"].join(" ")),a("label","form for",n),a("input","accept alt autocomplete checked dirname disabled form formaction formenctype formmethod formnovalidate formtarget height list max maxlength min multiple name pattern readonly required size src step type value width"),a("button","disabled form formaction formenctype formmethod formnovalidate formtarget name type value","html4"===t?i:n),a("select","disabled form multiple name required size","option optgroup"),a("optgroup","disabled label","option"),a("option","disabled label selected value"),a("textarea","cols dirname disabled form maxlength name readonly required rows wrap"),a("menu","type label",[i,"li"].join(" ")),a("noscript","",i),"html4"!==t&&(a("wbr"),a("ruby","",[n,"rt rp"].join(" ")),a("figcaption","",i),a("mark rt rp bdi","",n),a("summary","",[n,"h1 h2 h3 h4 h5 h6"].join(" ")),a("canvas","width height",i),a("data","value",n),a("video","src crossorigin poster preload autoplay mediagroup loop muted controls width height buffered",[i,"track source"].join(" ")),a("audio","src crossorigin preload autoplay mediagroup loop muted controls buffered volume",[i,"track source"].join(" ")),a("picture","","img source"),a("source","src srcset type media sizes"),a("track","kind src srclang label default"),a("datalist","",[n,"option"].join(" ")),a("article section nav aside main header footer","",i),a("hgroup","","h1 h2 h3 h4 h5 h6"),a("figure","",[i,"figcaption"].join(" ")),a("time","datetime",n),a("dialog","open",i),a("command","type label icon disabled checked radiogroup command"),a("output","for form name",n),a("progress","value max",n),a("meter","value min max low high optimum",n),a("details","open",[i,"summary"].join(" ")),a("keygen","autofocus challenge disabled form keytype name"),o("svg","id tabindex lang xml:space class style x y width height viewBox preserveAspectRatio zoomAndPan transform".split(" "),[])),"html5-strict"!==t&&(s("script","language xml:space"),s("style","xml:space"),s("object","declare classid code codebase codetype archive standby align border hspace vspace"),s("embed","align name hspace vspace"),s("param","valuetype type"),s("a","charset name rev shape coords"),s("br","clear"),s("applet","codebase archive code object alt name width height align hspace vspace"),s("img","name longdesc align border hspace vspace"),s("iframe","longdesc frameborder marginwidth marginheight scrolling align"),s("font basefont","size color face"),s("input","usemap align"),s("select"),s("textarea"),s("h1 h2 h3 h4 h5 h6 div p legend caption","align"),s("ul","type compact"),s("li","type"),s("ol dl menu dir","compact"),s("pre","width xml:space"),s("hr","align noshade size width"),s("isindex","prompt"),s("table","summary width frame rules cellspacing cellpadding align bgcolor"),s("col","width align char charoff valign"),s("colgroup","width align char charoff valign"),s("thead","align char charoff valign"),s("tr","align char charoff valign bgcolor"),s("th","axis align char charoff valign nowrap bgcolor width height"),s("form","accept"),s("td","abbr axis scope align char charoff valign nowrap bgcolor width height"),s("tfoot","align char charoff valign"),s("tbody","align char charoff valign"),s("area","nohref"),s("body","background bgcolor text link vlink alink")),"html4"!==t&&(s("input button select textarea","autofocus"),s("input textarea","placeholder"),s("a","download"),s("link script img","crossorigin"),s("img","loading"),s("iframe","sandbox seamless allow allowfullscreen loading")),"html4"!==t&&X([r.video,r.audio],(t=>{delete t.children.audio,delete t.children.video})),X(ho("a form meter progress dfn"),(t=>{r[t]&&delete r[t].children[t]})),delete r.caption.children.table,delete r.script,r})(l);!1===t.verify_html&&(t.valid_elements="*[*]");const u=Mo(t.valid_styles),h=Mo(t.invalid_styles,"map"),f=Mo(t.valid_classes,"map"),m=s("whitespace_elements","pre script noscript style textarea video audio iframe object code"),y=s("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),b=s("void_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr track"),x=s("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls allowfullscreen"),_="td th iframe video audio object script code",w=s("non_empty_elements",_+" pre svg textarea summary",b),S=s("move_caret_before_on_enter_elements",_+" table",b),C="h1 h2 h3 h4 h5 h6",k=s("text_block_elements",C+" p div address pre form blockquote center dir fieldset header footer article section hgroup aside main nav figure"),A=s("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex option datalist select optgroup figcaption details summary html body multicol listing",k),T=s("text_inline_elements","span strong b em i font s strike u var cite dfn code mark q sup sub samp"),I=s("transparent_elements","a ins del canvas map"),E=s("wrap_block_elements","pre "+C);wo("script noscript iframe noframes noembed title style textarea xmp plaintext".split(" "),(t=>{a[t]=new RegExp("</"+t+"[^>]*>","gi")}));const O=t=>{const e=B.from(n["@"]),i=/[*?+]/;X(((t,e)=>{const n=/^([#+\-])?([^\[!\/]+)(?:\/([^\[!]+))?(?:(!?)\[([^\]]+)])?$/;return et(ho(e,","),(e=>{const i=n.exec(e);if(i){const e=i[1],n=i[2],r=i[3],o=i[4],a=i[5],s={attributes:{},attributesOrder:[]};if(t.each((t=>((t,e)=>{gt(t.attributes,((t,n)=>{e.attributes[n]=t})),e.attributesOrder.push(...t.attributesOrder)})(t,s))),"#"===e?s.paddEmpty=!0:"-"===e&&(s.removeEmpty=!0),"!"===o&&(s.removeEmptyAttrs=!0),a&&((t,e)=>{const n=/^([!\-])?(\w+[\\:]:\w+|[^=~<]+)?(?:([=~<])(.*))?$/,i=/[*?+]/,{attributes:r,attributesOrder:o}=e;X(ho(t,"|"),(t=>{const a=n.exec(t);if(a){const t={},n=a[1],s=a[2].replace(/[\\:]:/g,":"),l=a[3],c=a[4];if("!"===n&&(e.attributesRequired=e.attributesRequired||[],e.attributesRequired.push(s),t.required=!0),"-"===n)return delete r[s],void o.splice(Pe.inArray(o,s),1);if(l&&("="===l?(e.attributesDefault=e.attributesDefault||[],e.attributesDefault.push({name:s,value:c}),t.defaultValue=c):"~"===l?(e.attributesForced=e.attributesForced||[],e.attributesForced.push({name:s,value:c}),t.forcedValue=c):"<"===l&&(t.validValues=Pe.makeMap(c,"?"))),i.test(s)){const n=t;e.attributePatterns=e.attributePatterns||[],n.pattern=po(s),e.attributePatterns.push(n)}else r[s]||o.push(s),r[s]=t}}))})(a,s),r&&(s.outputName=n),"@"===n){if(!t.isNone())return[];t=B.some(s)}return[r?{name:n,element:s,aliasName:r}:{name:n,element:s}]}return[]}))})(e,null!=t?t:""),(({name:t,element:e,aliasName:o})=>{if(o&&(n[o]=e),i.test(t)){const n=e;n.pattern=po(t),r.push(n)}else n[t]=e}))},D=t=>{r=[],X(pt(n),(t=>{delete n[t]})),O(t)},L=(t,e)=>{var r,a;delete xo.text_block_elements,delete xo.block_elements;const s=!!e.extends&&!it(e.extends),c=e.extends;if(i[t]=c?i[c]:{},o[t]=null!=c?c:t,w[t.toUpperCase()]={},w[t]={},s||(A[t.toUpperCase()]={},A[t]={}),c&&!n[t]&&n[c]){const e=(t=>{const e=t=>g(t)?Y(t,e):(t=>p(t)&&t.source&&"[object RegExp]"===Object.prototype.toString.call(t))(t)?new RegExp(t.source,t.flags):p(t)?mt(t,e):t;return e(t)})(n[c]);delete e.removeEmptyAttrs,delete e.removeEmpty,n[t]=e}else n[t]={attributesOrder:[],attributes:{}};if(g(e.attributes)){const i=t=>{o.attributesOrder.push(t),o.attributes[t]={}},o=null!==(r=n[t])&&void 0!==r?r:{};delete o.attributesDefault,delete o.attributesForced,delete o.attributePatterns,delete o.attributesRequired,o.attributesOrder=[],o.attributes={},X(e.attributes,(t=>{const e=fo(l);bo(t).each((({preset:t,name:n})=>{t?"global"===n&&X(e,i):i(n)}))})),n[t]=o}if(v(e.padEmpty)){const i=null!==(a=n[t])&&void 0!==a?a:{};i.paddEmpty=e.padEmpty,n[t]=i}if(g(e.children)){const n={},r=t=>{n[t]={}},o=t=>{yo(l,t).each((t=>{X(t,r)}))};X(e.children,(t=>{bo(t).each((({preset:t,name:e})=>{t?o(e):r(e)}))})),i[t]=n}c&&gt(i,((e,n)=>{e[c]&&(i[n]=e=So({},i[n]),e[t]=e[c])}))},P=t=>{p(t)?gt(t,((t,e)=>L(e,t))):d(t)&&(t=>{X((t=>{const e=/^(~)?(.+)$/;return et(ho(t,","),(t=>{const n=e.exec(t);return n?[{cloneName:"~"===n[1]?"span":"div",name:n[2]}]:[]}))})(null!=t?t:""),(({name:t,cloneName:e})=>{L(t,{extends:e})}))})(t)},N=t=>{X((t=>{const e=/^([+\-]?)([A-Za-z0-9_\-.\u00b7\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u037d\u037f-\u1fff\u200c-\u200d\u203f-\u2040\u2070-\u218f\u2c00-\u2fef\u3001-\ud7ff\uf900-\ufdcf\ufdf0-\ufffd]+)\[([^\]]+)]$/;return et(ho(t,","),(t=>{const n=e.exec(t);if(n){const t=n[1],e=t?(t=>"-"===t?"remove":"add")(t):"replace";return[{operation:e,name:n[2],validChildren:et(ho(n[3],"|"),(t=>bo(t).toArray()))}]}return[]}))})(null!=t?t:""),(({operation:t,name:e,validChildren:n})=>{const r="replace"===t?{"#comment":{}}:i[e],o=e=>{"remove"===t?delete r[e]:r[e]={}};X(n,(({preset:t,name:e})=>{t?(t=>{yo(l,t).each((t=>{X(t,o)}))})(e):o(e)})),i[e]=r}))},R=t=>{const e=n[t];if(e)return e;let i=r.length;for(;i--;){const e=r[i];if(e.pattern.test(t))return e}},z=M(u),F=M(h),V=M(f),H=M(x),W=M(A),j=M(k),G=M(T),q=M(Object.seal(b)),U=M(y),$=M(w),Z=M(S),K=M(m),Q=M(I),J=M(E),tt=M(Object.seal(a)),nt=(t,e)=>{const n=R(t);if(n){if(!e)return!0;{if(n.attributes[e])return!0;const t=n.attributePatterns;if(t){let n=t.length;for(;n--;)if(t[n].pattern.test(e))return!0}}}return!1},it=t=>Ct(W(),t),rt=t=>!jt(t,"#")&&nt(t)&&!it(t),at=M(o);return t.valid_elements?(D(t.valid_elements),wo(c,((t,e)=>{i[e]=t.children}))):(wo(c,((t,e)=>{n[e]={attributes:t.attributes,attributesOrder:t.attributesOrder},i[e]=t.children})),wo(ho("strong/b em/i"),(t=>{const e=ho(t,"/");n[e[1]].outputName=e[0]})),wo(T,((e,i)=>{n[i]&&(t.padd_empty_block_inline_children&&(n[i].paddInEmptyBlock=!0),n[i].removeEmpty=!0)})),wo(ho("ol ul blockquote a table tbody"),(t=>{n[t]&&(n[t].removeEmpty=!0)})),wo(ho("p h1 h2 h3 h4 h5 h6 th td pre div address caption li summary"),(t=>{n[t]&&(n[t].paddEmpty=!0)})),wo(ho("span"),(t=>{n[t].removeEmptyAttrs=!0}))),delete n.svg,P(t.custom_elements),N(t.valid_children),O(t.extended_valid_elements),N("+ol[ul|ol],+ul[ul|ol]"),wo({dd:"dl",dt:"dl",li:"ul ol",td:"tr",th:"tr",tr:"tbody thead tfoot",tbody:"table",thead:"table",tfoot:"table",legend:"fieldset",area:"map",param:"video audio object"},((t,e)=>{n[e]&&(n[e].parentsRequired=ho(t))})),t.invalid_elements&&wo(Co(t.invalid_elements),(t=>{n[t]&&delete n[t]})),R("span")||O("span[!data-mce-type|*]"),{type:l,children:i,elements:n,getValidStyles:z,getValidClasses:V,getBlockElements:W,getInvalidStyles:F,getVoidElements:q,getTextBlockElements:j,getTextInlineElements:G,getBoolAttrs:H,getElementRule:R,getSelfClosingElements:U,getNonEmptyElements:$,getMoveCaretBeforeOnEnterElements:Z,getWhitespaceElements:K,getTransparentElements:Q,getSpecialElements:tt,isValidChild:(t,e)=>{const n=i[t.toLowerCase()];return!(!n||!n[e.toLowerCase()])},isValid:nt,isBlock:it,isInline:rt,isWrapper:t=>Ct(J(),t)||rt(t),getCustomElements:at,addValidElements:O,setValidElements:D,addCustomElements:P,addValidChildren:N}},Io=t=>{const e=t.toString(16);return(1===e.length?"0"+e:e).toUpperCase()},Eo=t=>(t=>{return{value:(e=t,Ht(e,"#").toUpperCase())};var e})(Io(t.red)+Io(t.green)+Io(t.blue)),Oo=/^\s*rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)\s*$/i,Do=/^\s*rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d?(?:\.\d+)?)\s*\)\s*$/i,Lo=(t,e,n,i)=>({red:t,green:e,blue:n,alpha:i}),Po=(t,e,n,i)=>{const r=parseInt(t,10),o=parseInt(e,10),a=parseInt(n,10),s=parseFloat(i);return Lo(r,o,a,s)},No=t=>{if("transparent"===t)return B.some(Lo(0,0,0,0));const e=Oo.exec(t);if(null!==e)return B.some(Po(e[1],e[2],e[3],"1"));const n=Do.exec(t);return null!==n?B.some(Po(n[1],n[2],n[3],n[4])):B.none()},Ro=t=>`rgba(${t.red},${t.green},${t.blue},${t.alpha})`,Bo=t=>No(t).map(Eo).map((t=>"#"+t.value)).getOr(t),zo=(t={},e)=>{const n=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,i=/\s*([^:]+):\s*([^;]+);?/g,r=/\s+$/,o=/rgba *\(/i,a={};let s,l;e&&(s=e.getValidStyles(),l=e.getInvalidStyles());const c="\\\" \\' \\; \\: ; : \ufeff".split(" ");for(let t=0;t<c.length;t++)a[c[t]]="\ufeff"+t,a["\ufeff"+t]=c[t];const u={parse:e=>{const s={};let l=!1;const c=t.url_converter,h=t.url_converter_scope||u,d=(t,e,n)=>{const i=s[t+"-top"+e];if(!i)return;const r=s[t+"-right"+e];if(!r)return;const o=s[t+"-bottom"+e];if(!o)return;const a=s[t+"-left"+e];if(!a)return;const l=[i,r,o,a];let c=l.length-1;for(;c--&&l[c]===l[c+1];);c>-1&&n||(s[t+e]=-1===c?l[0]:l.join(" "),delete s[t+"-top"+e],delete s[t+"-right"+e],delete s[t+"-bottom"+e],delete s[t+"-left"+e])},p=t=>{const e=s[t];if(!e)return;const n=e.indexOf(",")>-1?[e]:e.split(" ");let i=n.length;for(;i--;)if(n[i]!==n[0])return!1;return s[t]=n[0],!0},f=t=>(l=!0,a[t]),g=(t,e)=>(l&&(t=t.replace(/\uFEFF[0-9]/g,(t=>a[t]))),e||(t=t.replace(/\\([\'\";:])/g,"$1")),t),m=t=>String.fromCharCode(parseInt(t.slice(1),16)),v=t=>t.replace(/\\[0-9a-f]+/gi,m),y=(e,n,i,r,o,a)=>{if(o=o||a)return"'"+(o=g(o)).replace(/\'/g,"\\'")+"'";if(n=g(n||i||r||""),!t.allow_script_urls){const e=n.replace(/[\s\r\n]+/g,"");if(/(java|vb)script:/i.test(e))return"";if(!t.allow_svg_data_urls&&/^data:image\/svg/i.test(e))return""}return c&&(n=c.call(h,n,"style")),"url('"+n.replace(/\'/g,"\\'")+"')"};if(e){let a;for(e=(e=e.replace(/[\u0000-\u001F]/g,"")).replace(/\\[\"\';:\uFEFF]/g,f).replace(/\"[^\"]+\"|\'[^\']+\'/g,(t=>t.replace(/[;:]/g,f)));a=i.exec(e);){i.lastIndex=a.index+a[0].length;let e=a[1].replace(r,"").toLowerCase(),c=a[2].replace(r,"");if(e&&c){if(e=v(e),c=v(c),-1!==e.indexOf("\ufeff")||-1!==e.indexOf('"'))continue;if(!t.allow_script_urls&&("behavior"===e||/expression\s*\(|\/\*|\*\//.test(c)))continue;"font-weight"===e&&"700"===c?c="bold":"color"!==e&&"background-color"!==e||(c=c.toLowerCase()),o.test(c)||No(c).each((t=>{c=Bo(Ro(t)).toLowerCase()})),c=c.replace(n,y),s[e]=l?g(c,!0):c}}d("border","",!0),d("border","-width"),d("border","-color"),d("border","-style"),d("padding",""),d("margin",""),x="border-style",_="border-color",p(b="border-width")&&p(x)&&p(_)&&(s.border=s[b]+" "+s[x]+" "+s[_],delete s[b],delete s[x],delete s[_]),"medium none"===s.border&&delete s.border,"none"===s["border-image"]&&delete s["border-image"]}var b,x,_;return s},serialize:(t,e)=>{let n="";const i=(e,i)=>{const r=i[e];if(r)for(let e=0,i=r.length;e<i;e++){const i=r[e],o=t[i];o&&(n+=(n.length>0?" ":"")+i+": "+o+";")}};return e&&s?(i("*",s),i(e,s)):gt(t,((t,i)=>{t&&((t,e)=>{if(!l||!e)return!0;let n=l["*"];return!(n&&n[t]||(n=l[e],n&&n[t]))})(i,e)&&(n+=(n.length>0?" ":"")+i+": "+t+";")})),n}};return u},Fo={keyLocation:!0,layerX:!0,layerY:!0,returnValue:!0,webkitMovementX:!0,webkitMovementY:!0,keyIdentifier:!0,mozPressure:!0},Vo=(t,e)=>{const n=null!=e?e:{};for(const e in t)Ct(Fo,e)||(n[e]=t[e]);return x(t.composedPath)&&(n.composedPath=()=>t.composedPath()),x(t.getModifierState)&&(n.getModifierState=e=>t.getModifierState(e)),x(t.getTargetRanges)&&(n.getTargetRanges=()=>t.getTargetRanges()),n},Ho=(t,e,n,i)=>{var r;const o=Vo(e,i);return o.type=t,b(o.target)&&(o.target=null!==(r=o.srcElement)&&void 0!==r?r:n),(t=>b(t.preventDefault)||(t=>t instanceof Event||_(t.initEvent))(t))(e)&&(o.preventDefault=()=>{o.defaultPrevented=!0,o.isDefaultPrevented=R,_(e.preventDefault)&&e.preventDefault()},o.stopPropagation=()=>{o.cancelBubble=!0,o.isPropagationStopped=R,_(e.stopPropagation)&&e.stopPropagation()},o.stopImmediatePropagation=()=>{o.isImmediatePropagationStopped=R,o.stopPropagation()},(t=>t.isDefaultPrevented===R||t.isDefaultPrevented===N)(o)||(o.isDefaultPrevented=!0===o.defaultPrevented?R:N,o.isPropagationStopped=!0===o.cancelBubble?R:N,o.isImmediatePropagationStopped=N)),o},Wo=/^(?:mouse|contextmenu)|click/,jo=(t,e,n,i)=>{t.addEventListener(e,n,i||!1)},Yo=(t,e,n,i)=>{t.removeEventListener(e,n,i||!1)},Xo=(t,e)=>{const n=Ho(t.type,t,document,e);if((t=>x(t)&&Wo.test(t.type))(t)&&y(t.pageX)&&!y(t.clientX)){const e=n.target.ownerDocument||document,i=e.documentElement,r=e.body,o=n;o.pageX=t.clientX+(i&&i.scrollLeft||r&&r.scrollLeft||0)-(i&&i.clientLeft||r&&r.clientLeft||0),o.pageY=t.clientY+(i&&i.scrollTop||r&&r.scrollTop||0)-(i&&i.clientTop||r&&r.clientTop||0)}return n},Go=(t,e,n)=>{const i=t.document,r={type:"ready"};if(n.domLoaded)return void e(r);const o=()=>{Yo(t,"DOMContentLoaded",o),Yo(t,"load",o),n.domLoaded||(n.domLoaded=!0,e(r)),t=null};"complete"===i.readyState||"interactive"===i.readyState&&i.body?o():jo(t,"DOMContentLoaded",o),n.domLoaded||jo(t,"load",o)};class qo{constructor(){this.domLoaded=!1,this.events={},this.count=1,this.expando="mce-data-"+(+new Date).toString(32),this.hasFocusIn="onfocusin"in document.documentElement,this.count=1}bind(t,e,n,i){const r=this;let o;const a=window,s=t=>{r.executeHandlers(Xo(t||a.event),l)};if(!t||rr(t)||sr(t))return n;let l;t[r.expando]?l=t[r.expando]:(l=r.count++,t[r.expando]=l,r.events[l]={}),i=i||t;const c=e.split(" ");let u=c.length;for(;u--;){let e=c[u],h=s,d=!1,p=!1;"DOMContentLoaded"===e&&(e="ready"),r.domLoaded&&"ready"===e&&"complete"===t.readyState?n.call(i,Xo({type:e})):(r.hasFocusIn||"focusin"!==e&&"focusout"!==e||(d=!0,p="focusin"===e?"focus":"blur",h=t=>{const e=Xo(t||a.event);e.type="focus"===e.type?"focusin":"focusout",r.executeHandlers(e,l)}),o=r.events[l][e],o?"ready"===e&&r.domLoaded?n(Xo({type:e})):o.push({func:n,scope:i}):(r.events[l][e]=o=[{func:n,scope:i}],o.fakeName=p,o.capture=d,o.nativeHandler=h,"ready"===e?Go(t,h,r):jo(t,p||e,h,d)))}return t=o=null,n}unbind(t,e,n){if(!t||rr(t)||sr(t))return this;const i=t[this.expando];if(i){let r=this.events[i];if(e){const i=e.split(" ");let o=i.length;for(;o--;){const e=i[o],a=r[e];if(a){if(n){let t=a.length;for(;t--;)if(a[t].func===n){const n=a.nativeHandler,i=a.fakeName,o=a.capture,s=a.slice(0,t).concat(a.slice(t+1));s.nativeHandler=n,s.fakeName=i,s.capture=o,r[e]=s}}n&&0!==a.length||(delete r[e],Yo(t,a.fakeName||e,a.nativeHandler,a.capture))}}}else gt(r,((e,n)=>{Yo(t,e.fakeName||n,e.nativeHandler,e.capture)})),r={};for(const t in r)if(Ct(r,t))return this;delete this.events[i];try{delete t[this.expando]}catch(e){t[this.expando]=null}}return this}fire(t,e,n){return this.dispatch(t,e,n)}dispatch(t,e,n){if(!t||rr(t)||sr(t))return this;const i=Xo({type:e,target:t},n);do{const e=t[this.expando];e&&this.executeHandlers(i,e),t=t.parentNode||t.ownerDocument||t.defaultView||t.parentWindow}while(t&&!i.isPropagationStopped());return this}clean(t){if(!t||rr(t)||sr(t))return this;if(t[this.expando]&&this.unbind(t),t.getElementsByTagName||(t=t.document),t&&t.getElementsByTagName){this.unbind(t);const e=t.getElementsByTagName("*");let n=e.length;for(;n--;)(t=e[n])[this.expando]&&this.unbind(t)}return this}destroy(){this.events={}}cancel(t){return t&&(t.preventDefault(),t.stopImmediatePropagation()),!1}executeHandlers(t,e){const n=this.events[e],i=n&&n[t.type];if(i)for(let e=0,n=i.length;e<n;e++){const n=i[e];if(n&&!1===n.func.call(n.scope,t)&&t.preventDefault(),t.isImmediatePropagationStopped())return}}}qo.Event=new qo;const Uo=Pe.each,$o=Pe.grep,Zo="data-mce-style",Ko=Pe.makeMap("fill-opacity font-weight line-height opacity orphans widows z-index zoom"," "),Qo=(t,e,n)=>{b(n)||""===n?rn(t,e):Qe(t,e,n)},Jo=t=>t.replace(/[A-Z]/g,(t=>"-"+t.toLowerCase())),ta=(t,e)=>{let n=0;if(t)for(let i=t.nodeType,r=t.previousSibling;r;r=r.previousSibling){const t=r.nodeType;(!e||!rr(r)||t!==i&&r.data.length)&&(n++,i=t)}return n},ea=(t,e)=>{const n=tn(e,"style"),i=t.serialize(t.parse(n),We(e));Qo(e,Zo,i)},na=(t,e,n)=>{const i=Jo(e);b(n)||""===n?di(t,i):ai(t,i,((t,e)=>w(t)?Ct(Ko,e)?t+"":t+"px":t)(n,i))},ia=(t,e={})=>{const n={},i=window,r={};let o=0;const a=qr.forElement(bn(t),{contentCssCors:e.contentCssCors,referrerPolicy:e.referrerPolicy}),s=[],l=e.schema?e.schema:To({}),c=zo({url_converter:e.url_converter,url_converter_scope:e.url_converter_scope},e.schema),u=e.ownEvents?new qo:qo.Event,h=l.getBlockElements(),p=e=>e&&t&&d(e)?t.getElementById(e):e,m=t=>{const e=p(t);return x(e)?bn(e):null},v=(t,e,n="")=>{let i;const r=m(t);if(x(r)&&Ge(r)){const t=$[e];i=t&&t.get?t.get(r.dom,e):tn(r,e)}return x(i)?i:n},y=t=>{const e=p(t);return b(e)?[]:e.attributes},w=(t,n,i)=>{D(t,(t=>{if($i(t)){const r=bn(t),o=""===i?null:i,a=tn(r,n),s=$[n];s&&s.set?s.set(r.dom,o,n):Qo(r,n,o),a!==o&&e.onSetAttrib&&e.onSetAttrib({attrElm:r.dom,attrName:n,attrValue:o})}}))},S=()=>e.root_element||t.body,k=(e,n)=>((t,e,n)=>{let i=0,r=0;const o=t.ownerDocument;if(n=n||t,e){if(n===t&&e.getBoundingClientRect&&"static"===li(bn(t),"position")){const n=e.getBoundingClientRect();return i=n.left+(o.documentElement.scrollLeft||t.scrollLeft)-o.documentElement.clientLeft,r=n.top+(o.documentElement.scrollTop||t.scrollTop)-o.documentElement.clientTop,{x:i,y:r}}let a=e;for(;a&&a!==n&&a.nodeType&&!Xr(a,n);){const t=a;i+=t.offsetLeft||0,r+=t.offsetTop||0,a=t.offsetParent}for(a=e.parentNode;a&&a!==n&&a.nodeType&&!Xr(a,n);)i-=a.scrollLeft||0,r-=a.scrollTop||0,a=a.parentNode;r+=(t=>jr.isFirefox()&&"table"===We(t)?Yr(Nn(t)).filter((t=>"caption"===We(t))).bind((t=>Yr(Pn(t)).map((e=>{const n=e.dom.offsetTop,i=t.dom.offsetTop,r=t.dom.offsetHeight;return n<=i?-r:0})))).getOr(0):0)(bn(e))}return{x:i,y:r}})(t.body,p(e),n),A=(t,e,n)=>{const i=p(t);var r;if(!b(i)&&(Zi(i)||$i(r=i)&&"http://www.w3.org/2000/svg"===r.namespaceURI))return n?li(bn(i),Jo(e)):("float"===(e=e.replace(/-(\D)/g,((t,e)=>e.toUpperCase())))&&(e="cssFloat"),i.style?i.style[e]:void 0)},T=t=>{const e=p(t);if(!e)return{w:0,h:0};let n=A(e,"width"),i=A(e,"height");return n&&-1!==n.indexOf("px")||(n="0"),i&&-1!==i.indexOf("px")||(i="0"),{w:parseInt(n,10)||e.offsetWidth||e.clientWidth,h:parseInt(i,10)||e.offsetHeight||e.clientHeight}},I=(t,e)=>{if(!t)return!1;const n=g(t)?t:[t];return j(n,(t=>_n(bn(t),e)))},E=(t,e,n,i)=>{const r=[];let o=p(t);i=void 0===i;const a=n||("BODY"!==S().nodeName?S().parentNode:null);if(d(e))if("*"===e)e=$i;else{const t=e;e=e=>I(e,t)}for(;o&&!(o===a||b(o.nodeType)||lr(o)||cr(o));){if(!e||e(o)){if(!i)return[o];r.push(o)}o=o.parentNode}return i?r:null},O=(t,e,n)=>{let i=e;if(t){d(e)&&(i=t=>I(t,e));for(let e=t[n];e;e=e[n])if(_(i)&&i(e))return e}return null},D=function(t,e,n){const i=null!=n?n:this;if(g(t)){const n=[];return Uo(t,((t,r)=>{const o=p(t);o&&n.push(e.call(i,o,r))})),n}{const n=p(t);return!!n&&e.call(i,n)}},L=(t,e)=>{D(t,(t=>{gt(e,((e,n)=>{w(t,n,e)}))}))},P=(t,e)=>{D(t,(t=>{const n=bn(t);Ci(n,e)}))},N=(e,n,i,r,o)=>D(e,(e=>{const a=d(n)?t.createElement(n):n;return x(i)&&L(a,i),r&&(!d(r)&&r.nodeType?a.appendChild(r):d(r)&&P(a,r)),o?a:e.appendChild(a)})),R=(e,n,i)=>N(t.createElement(e),e,n,i,!0),B=uo.encodeAllRaw,z=(t,e)=>D(t,(t=>{const n=bn(t);return e&&X(Nn(n),(t=>{qe(t)&&0===t.dom.length?xi(t):pi(n,t)})),xi(n),n.dom})),F=(t,e,n)=>{D(t,(t=>{if($i(t)){const i=bn(t),r=e.split(" ");X(r,(t=>{x(n)?(n?hn:pn)(i,t):((t,e)=>{sn(t)?t.dom.classList.toggle(e):((t,e)=>{W(ln(t),e)?un(t,e):cn(t,e)})(t,e);dn(t)})(i,t)}))}}))},V=(t,e,n)=>D(e,(i=>{var r;const o=g(e)?t.cloneNode(!0):t;return n&&Uo($o(i.childNodes),(t=>{o.appendChild(t)})),null===(r=i.parentNode)||void 0===r||r.replaceChild(o,i),i})),H=()=>t.createRange(),Y=(n,r,o,a)=>{if(g(n)){let t=n.length;const e=[];for(;t--;)e[t]=Y(n[t],r,o,a);return e}return!e.collect||n!==t&&n!==i||s.push([n,r,o,a]),u.bind(n,r,o,a||U)},G=(e,n,r)=>{if(g(e)){let t=e.length;const i=[];for(;t--;)i[t]=G(e[t],n,r);return i}if(s.length>0&&(e===t||e===i)){let t=s.length;for(;t--;){const[i,o,a]=s[t];e!==i||n&&n!==o||r&&r!==a||u.unbind(i,o,a)}}return u.unbind(e,n,r)},q=t=>{if(t&&Zi(t)){const e=t.getAttribute("data-mce-contenteditable");return e&&"inherit"!==e?e:"inherit"!==t.contentEditable?t.contentEditable:null}return null},U={doc:t,settings:e,win:i,files:r,stdMode:!0,boxModel:!0,styleSheetLoader:a,boundEvents:s,styles:c,schema:l,events:u,isBlock:t=>d(t)?Ct(h,t):$i(t)&&(Ct(h,t.nodeName)||Vr(l,t)),root:null,clone:(t,e)=>t.cloneNode(e),getRoot:S,getViewPort:t=>{const e=Pi(t);return{x:e.x,y:e.y,w:e.width,h:e.height}},getRect:t=>{const e=p(t),n=k(e),i=T(e);return{x:n.x,y:n.y,w:i.w,h:i.h}},getSize:T,getParent:(t,e,n)=>{const i=E(t,e,n,!1);return i&&i.length>0?i[0]:null},getParents:E,get:p,getNext:(t,e)=>O(t,e,"nextSibling"),getPrev:(t,e)=>O(t,e,"previousSibling"),select:(n,i)=>{var r,o;const a=null!==(o=null!==(r=p(i))&&void 0!==r?r:e.root_element)&&void 0!==o?o:t;return _(a.querySelectorAll)?ut(a.querySelectorAll(n)):[]},is:I,add:N,create:R,createHTML:(t,e,n="")=>{let i="<"+t;for(const t in e)kt(e,t)&&(i+=" "+t+'="'+B(e[t])+'"');return Zt(n)&&Ct(l.getVoidElements(),t)?i+" />":i+">"+n+"</"+t+">"},createFragment:e=>{const n=t.createElement("div"),i=t.createDocumentFragment();let r;for(i.appendChild(n),e&&(n.innerHTML=e);r=n.firstChild;)i.appendChild(r);return i.removeChild(n),i},remove:z,setStyle:(t,n,i)=>{D(t,(t=>{const r=bn(t);na(r,n,i),e.update_styles&&ea(c,r)}))},getStyle:A,setStyles:(t,n)=>{D(t,(t=>{const i=bn(t);gt(n,((t,e)=>{na(i,e,t)})),e.update_styles&&ea(c,i)}))},removeAllAttribs:t=>D(t,(t=>{const e=t.attributes;for(let n=e.length-1;n>=0;n--)t.removeAttributeNode(e.item(n))})),setAttrib:w,setAttribs:L,getAttrib:v,getPos:k,parseStyle:t=>c.parse(t),serializeStyle:(t,e)=>c.serialize(t,e),addStyle:e=>{if(U!==ia.DOM&&t===document){if(n[e])return;n[e]=!0}let i=t.getElementById("mceDefaultStyles");if(!i){i=t.createElement("style"),i.id="mceDefaultStyles",i.type="text/css";const e=t.head;e.firstChild?e.insertBefore(i,e.firstChild):e.appendChild(i)}i.styleSheet?i.styleSheet.cssText+=e:i.appendChild(t.createTextNode(e))},loadCSS:t=>{t||(t=""),X(t.split(","),(t=>{r[t]=!0,a.load(t).catch(C)}))},addClass:(t,e)=>{F(t,e,!0)},removeClass:(t,e)=>{F(t,e,!1)},hasClass:(t,e)=>{const n=m(t),i=e.split(" ");return x(n)&&nt(i,(t=>fn(n,t)))},toggleClass:F,show:t=>{D(t,(t=>di(bn(t),"display")))},hide:t=>{D(t,(t=>ai(bn(t),"display","none")))},isHidden:t=>{const e=m(t);return x(e)&&Ne(ui(e,"display"),"none")},uniqueId:t=>(t||"mce_")+o++,setHTML:P,getOuterHTML:t=>{const e=m(t);return x(e)?$i(e.dom)?e.dom.outerHTML:(t=>{const e=vn("div"),n=bn(t.dom.cloneNode(!0));return mi(e,n),Si(e)})(e):""},setOuterHTML:(t,e)=>{D(t,(t=>{$i(t)&&(t.outerHTML=e)}))},decode:uo.decode,encode:B,insertAfter:(t,e)=>{const n=p(e);return D(t,(t=>{const e=null==n?void 0:n.parentNode,i=null==n?void 0:n.nextSibling;return e&&(i?e.insertBefore(t,i):e.appendChild(t)),t}))},replace:V,rename:(t,e)=>{if(t.nodeName!==e.toUpperCase()){const n=R(e);return Uo(y(t),(e=>{w(n,e.nodeName,v(t,e.nodeName))})),V(n,t,!0),n}return t},findCommonAncestor:(t,e)=>{let n=t;for(;n;){let t=e;for(;t&&n!==t;)t=t.parentNode;if(n===t)break;n=n.parentNode}return!n&&t.ownerDocument?t.ownerDocument.documentElement:n},run:D,getAttribs:y,isEmpty:(t,e,n)=>{if(f(e)){const i=t=>{const n=t.nodeName.toLowerCase();return Boolean(e[n])};return Sr(l,t,{...n,isContent:i})}return Sr(l,t,n)},createRng:H,nodeIndex:ta,split:(t,e,n)=>{let i,r,o=H();if(t&&e&&t.parentNode&&e.parentNode){const a=t.parentNode;return o.setStart(a,ta(t)),o.setEnd(e.parentNode,ta(e)),i=o.extractContents(),o=H(),o.setStart(e.parentNode,ta(e)+1),o.setEnd(a,ta(t)+1),r=o.extractContents(),a.insertBefore(Zr(U,i,l),t),n?a.insertBefore(n,t):a.insertBefore(e,t),a.insertBefore(Zr(U,r,l),t),z(t),n||e}},bind:Y,unbind:G,fire:(t,e,n)=>u.dispatch(t,e,n),dispatch:(t,e,n)=>u.dispatch(t,e,n),getContentEditable:q,getContentEditableParent:t=>{const e=S();let n=null;for(let i=t;i&&i!==e&&(n=q(i),null===n);i=i.parentNode);return n},isEditable:t=>{if(x(t)){const e=$i(t)?t:t.parentElement;return x(e)&&Zi(e)&&ni(bn(e))}return!1},destroy:()=>{if(s.length>0){let t=s.length;for(;t--;){const[e,n,i]=s[t];u.unbind(e,n,i)}}gt(r,((t,e)=>{a.unload(e),delete r[e]}))},isChildOf:(t,e)=>t===e||e.contains(t),dumpRng:t=>"startContainer: "+t.startContainer.nodeName+", startOffset: "+t.startOffset+", endContainer: "+t.endContainer.nodeName+", endOffset: "+t.endOffset},$=((t,e,n)=>{const i=e.keep_values,r={set:(t,i,r)=>{const o=bn(t);_(e.url_converter)&&x(i)&&(i=e.url_converter.call(e.url_converter_scope||n(),String(i),r,t)),Qo(o,"data-mce-"+r,i),Qo(o,r,i)},get:(t,e)=>{const n=bn(t);return tn(n,"data-mce-"+e)||tn(n,e)}},o={style:{set:(e,n)=>{const r=bn(e);i&&Qo(r,Zo,n),rn(r,"style"),d(n)&&si(r,t.parse(n))},get:e=>{const n=bn(e),i=tn(n,Zo)||tn(n,"style");return t.serialize(t.parse(i),We(n))}}};return i&&(o.href=o.src=r),o})(c,e,M(U));return U};ia.DOM=ia(document),ia.nodeIndex=ta;const ra=ia.DOM;class oa{constructor(t={}){this.states={},this.queue=[],this.scriptLoadedCallbacks={},this.queueLoadedCallbacks=[],this.loading=!1,this.settings=t}_setReferrerPolicy(t){this.settings.referrerPolicy=t}loadScript(t){return new Promise(((e,n)=>{const i=ra;let r;const o=()=>{i.remove(a),r&&(r.onerror=r.onload=r=null)},a=i.uniqueId();r=document.createElement("script"),r.id=a,r.type="text/javascript",r.src=Pe._addCacheSuffix(t),this.settings.referrerPolicy&&i.setAttrib(r,"referrerpolicy",this.settings.referrerPolicy),r.onload=()=>{o(),e()},r.onerror=()=>{o(),n("Failed to load script: "+t)},(document.getElementsByTagName("head")[0]||document.body).appendChild(r)}))}isDone(t){return 2===this.states[t]}markDone(t){this.states[t]=2}add(t){const e=this;return e.queue.push(t),void 0===e.states[t]&&(e.states[t]=0),new Promise(((n,i)=>{e.scriptLoadedCallbacks[t]||(e.scriptLoadedCallbacks[t]=[]),e.scriptLoadedCallbacks[t].push({resolve:n,reject:i})}))}load(t){return this.add(t)}remove(t){delete this.states[t],delete this.scriptLoadedCallbacks[t]}loadQueue(){const t=this.queue;return this.queue=[],this.loadScripts(t)}loadScripts(t){const e=this,n=(t,n)=>{St(e.scriptLoadedCallbacks,n).each((e=>{X(e,(e=>e[t](n)))})),delete e.scriptLoadedCallbacks[n]},i=t=>{const e=U(t,(t=>"rejected"===t.status));return e.length>0?Promise.reject(et(e,(({reason:t})=>g(t)?t:[t]))):Promise.resolve()},r=t=>Promise.allSettled(Y(t,(t=>2===e.states[t]?(n("resolve",t),Promise.resolve()):3===e.states[t]?(n("reject",t),Promise.reject(t)):(e.states[t]=1,e.loadScript(t).then((()=>{e.states[t]=2,n("resolve",t);const o=e.queue;return o.length>0?(e.queue=[],r(o).then(i)):Promise.resolve()}),(()=>(e.states[t]=3,n("reject",t),Promise.reject(t)))))))),o=t=>(e.loading=!0,r(t).then((t=>{e.loading=!1;const n=e.queueLoadedCallbacks.shift();return B.from(n).each(P),i(t)}))),a=At(t);return e.loading?new Promise(((t,n)=>{e.queueLoadedCallbacks.push((()=>{o(a).then(t,n)}))})):o(a)}}oa.ScriptLoader=new oa;const aa=t=>{let e=t;return{get:()=>e,set:t=>{e=t}}},sa={},la=aa("en"),ca=()=>St(sa,la.get()),ua={getData:()=>mt(sa,(t=>({...t}))),setCode:t=>{t&&la.set(t)},getCode:()=>la.get(),add:(t,e)=>{let n=sa[t];n||(sa[t]=n={});const i=Y(pt(e),(t=>t.toLowerCase()));gt(e,((t,r)=>{const o=r.toLowerCase();o!==r&&((t,e)=>{const n=t.indexOf(e);return-1!==n&&t.indexOf(e,n+1)>n})(i,o)?(Ct(e,o)||(n[o]=t),n[r]=t):n[o]=t}))},translate:t=>{const e=ca().getOr({}),n=t=>_(t)?Object.prototype.toString.call(t):i(t)?"":""+t,i=t=>""===t||null==t,r=t=>{const i=n(t);return Ct(e,i)?n(e[i]):St(e,i.toLowerCase()).map(n).getOr(i)},o=t=>t.replace(/{context:\w+}$/,"");if(i(t))return"";if(p(a=t)&&Ct(a,"raw"))return n(t.raw);var a;if((t=>g(t)&&t.length>1)(t)){const e=t.slice(1);return o(r(t[0]).replace(/\{([0-9]+)\}/g,((t,i)=>Ct(e,i)?n(e[i]):t)))}return o(r(t))},isRtl:()=>ca().bind((t=>St(t,"_dir"))).exists((t=>"rtl"===t)),hasCode:t=>Ct(sa,t)},ha=()=>{const t=[],e={},n={},i=[],r=(t,e)=>{const n=U(i,(n=>n.name===t&&n.state===e));X(n,(t=>t.resolve()))},o=t=>Ct(e,t),a=(t,n)=>{const i=ua.getCode();!i||n&&-1===(","+(n||"")+",").indexOf(","+i+",")||oa.ScriptLoader.add(e[t]+"/langs/"+i+".js")},s=(t,e="added")=>"added"===e&&(t=>Ct(n,t))(t)||"loaded"===e&&o(t)?Promise.resolve():new Promise((n=>{i.push({name:t,state:e,resolve:n})}));return{items:t,urls:e,lookup:n,get:t=>{if(n[t])return n[t].instance},requireLangPack:(t,e)=>{!1!==ha.languageLoad&&(o(t)?a(t,e):s(t,"loaded").then((()=>a(t,e))))},add:(e,i)=>(t.push(i),n[e]={instance:i},r(e,"added"),i),remove:t=>{delete e[t],delete n[t]},createUrl:(t,e)=>d(e)?d(t)?{prefix:"",resource:e,suffix:""}:{prefix:t.prefix,resource:e,suffix:t.suffix}:e,load:(t,i)=>{if(e[t])return Promise.resolve();let o=d(i)?i:i.prefix+i.resource+i.suffix;0!==o.indexOf("/")&&-1===o.indexOf("://")&&(o=ha.baseURL+"/"+o),e[t]=o.substring(0,o.lastIndexOf("/"));const a=()=>(r(t,"loaded"),Promise.resolve());return n[t]?a():oa.ScriptLoader.add(o).then(a)},waitFor:s}};ha.languageLoad=!0,ha.baseURL="",ha.PluginManager=ha(),ha.ThemeManager=ha(),ha.ModelManager=ha();const da=t=>{const e=aa(B.none()),n=()=>e.get().each((t=>clearInterval(t)));return{clear:()=>{n(),e.set(B.none())},isSet:()=>e.get().isSome(),get:()=>e.get(),set:i=>{n(),e.set(B.some(setInterval(i,t)))}}},pa=()=>{const t=(t=>{const e=aa(B.none()),n=()=>e.get().each(t);return{clear:()=>{n(),e.set(B.none())},isSet:()=>e.get().isSome(),get:()=>e.get(),set:t=>{n(),e.set(B.some(t))}}})(C);return{...t,on:e=>t.get().each(e)}},fa=(t,e)=>{let n=null;return{cancel:()=>{m(n)||(clearTimeout(n),n=null)},throttle:(...i)=>{m(n)&&(n=setTimeout((()=>{n=null,t.apply(null,i)}),e))}}},ga=(t,e)=>{let n=null;const i=()=>{m(n)||(clearTimeout(n),n=null)};return{cancel:i,throttle:(...r)=>{i(),n=setTimeout((()=>{n=null,t.apply(null,r)}),e)}}},ma=M("mce-annotation"),va=M("data-mce-annotation"),ya=M("data-mce-annotation-uid"),ba=M("data-mce-annotation-active"),xa=M("data-mce-annotation-classes"),_a=M("data-mce-annotation-attrs"),wa=t=>e=>Sn(e,t),Sa=(t,e)=>{const n=t.selection.getRng(),i=bn(n.startContainer),r=bn(t.getBody()),o=e.fold((()=>"."+ma()),(t=>`[${va()}="${t}"]`)),a=Rn(i,n.startOffset).getOr(i);return ei(a,o,wa(r)).bind((e=>en(e,`${ya()}`).bind((n=>en(e,`${va()}`).map((e=>{const i=ka(t,n);return{uid:n,name:e,elements:i}}))))))},Ca=(t,e)=>nn(t,"data-mce-bogus")||((t,e,n)=>Jn(t,'[data-mce-bogus="all"]',n).isSome())(t,0,wa(e)),ka=(t,e)=>{const n=bn(t.getBody()),i=Ri(n,`[${ya()}="${e}"]`);return U(i,(t=>!Ca(t,n)))},Aa=(t,e)=>{const n=bn(t.getBody()),i=Ri(n,`[${va()}="${e}"]`),r={};return X(i,(t=>{if(!Ca(t,n)){const e=tn(t,ya()),n=St(r,e).getOr([]);r[e]=n.concat([t])}})),r};let Ma=0;const Ta=t=>{const e=(new Date).getTime(),n=Math.floor(1e9*Math.random());return Ma++,t+"_"+n+Ma+String(e)},Ia=(t,e)=>bn(t.dom.cloneNode(e)),Ea=t=>Ia(t,!1),Oa=t=>Ia(t,!0),Da=(t,e,n=N)=>{const i=new Fi(t,e),r=t=>{let e;do{e=i[t]()}while(e&&!rr(e)&&!n(e));return B.from(e).filter(rr)};return{current:()=>B.from(i.current()).filter(rr),next:()=>r("next"),prev:()=>r("prev"),prev2:()=>r("prev2")}},La=(t,e)=>{const n=e||(e=>t.isBlock(e)||ur(e)||pr(e)),i=(t,e,n,r)=>{if(rr(t)){const n=r(t,e,t.data);if(-1!==n)return B.some({container:t,offset:n})}return n().bind((t=>i(t.container,t.offset,n,r)))};return{backwards:(e,r,o,a)=>{const s=Da(e,null!=a?a:t.getRoot(),n);return i(e,r,(()=>s.prev().map((t=>({container:t,offset:t.length})))),o).getOrNull()},forwards:(e,r,o,a)=>{const s=Da(e,null!=a?a:t.getRoot(),n);return i(e,r,(()=>s.next().map((t=>({container:t,offset:0})))),o).getOrNull()}}},Pa=((t,e)=>{const n=e=>t(e)?B.from(e.dom.nodeValue):B.none();return{get:e=>{if(!t(e))throw new Error("Can only get text value of a text node");return n(e).getOr("")},getOption:n,set:(e,n)=>{if(!t(e))throw new Error("Can only set raw text value of a text node");e.dom.nodeValue=n}}})(qe),Na=t=>Pa.get(t),Ra=t=>{let e;return n=>(e=e||ot(t,R),Ct(e,We(n)))},Ba=t=>Ge(t)&&"br"===We(t),za=Ra(["h1","h2","h3","h4","h5","h6","p","div","address","pre","form","blockquote","center","dir","fieldset","header","footer","article","section","hgroup","aside","nav","figure"]),Fa=Ra(["ul","ol","dl"]),Va=Ra(["li","dd","dt"]),Ha=Ra(["thead","tbody","tfoot"]),Wa=Ra(["td","th"]),ja=Ra(["pre","script","textarea","style"]),Ya=()=>{const t=vn("br");return Qe(t,"data-mce-bogus","1"),t},Xa=t=>{bi(t),mi(t,Ya())},Ga=Vi,qa=Wi,Ua=t=>t.replace(/\uFEFF/g,""),$a=$i,Za=rr,Ka=t=>(Za(t)&&(t=t.parentNode),$a(t)&&t.hasAttribute("data-mce-caret")),Qa=t=>Za(t)&&qa(t.data),Ja=t=>Ka(t)||Qa(t),ts=t=>t.firstChild!==t.lastChild||!ur(t.firstChild),es=t=>{const e=t.container();return!!rr(e)&&(e.data.charAt(t.offset())===Ga||t.isAtStart()&&Qa(e.previousSibling))},ns=t=>{const e=t.container();return!!rr(e)&&(e.data.charAt(t.offset()-1)===Ga||t.isAtEnd()&&Qa(e.nextSibling))},is=t=>Za(t)&&t.data[0]===Ga,rs=t=>Za(t)&&t.data[t.data.length-1]===Ga,os=t=>t&&t.hasAttribute("data-mce-caret")?((t=>{var e;const n=t.getElementsByTagName("br"),i=n[n.length-1];tr(i)&&(null===(e=i.parentNode)||void 0===e||e.removeChild(i))})(t),t.removeAttribute("data-mce-caret"),t.removeAttribute("data-mce-bogus"),t.removeAttribute("style"),t.removeAttribute("data-mce-style"),t.removeAttribute("_moz_abspos"),t):null,as=t=>Ka(t.startContainer),ss=Math.round,ls=t=>t?{left:ss(t.left),top:ss(t.top),bottom:ss(t.bottom),right:ss(t.right),width:ss(t.width),height:ss(t.height)}:{left:0,top:0,bottom:0,right:0,width:0,height:0},cs=(t,e)=>(t=ls(t),e||(t.left=t.left+t.width),t.right=t.left,t.width=0,t),us=(t,e,n)=>t>=0&&t<=Math.min(e.height,n.height)/2,hs=(t,e)=>{const n=Math.min(e.height/2,t.height/2);return t.bottom-n<e.top||!(t.top>e.bottom)&&us(e.top-t.bottom,t,e)},ds=(t,e)=>t.top>e.bottom||!(t.bottom<e.top)&&us(e.bottom-t.top,t,e),ps=(t,e,n)=>{const i=Math.max(Math.min(e,t.left+t.width),t.left),r=Math.max(Math.min(n,t.top+t.height),t.top);return Math.sqrt((e-i)*(e-i)+(n-r)*(n-r))},fs=t=>{const e=t.startContainer,n=t.startOffset;return e===t.endContainer&&e.hasChildNodes()&&t.endOffset===n+1?e.childNodes[n]:null},gs=(t,e)=>{if($i(t)&&t.hasChildNodes()){const n=t.childNodes,i=((t,e,n)=>Math.min(Math.max(t,0),n))(e,0,n.length-1);return n[i]}return t},ms=new RegExp("[-----------------------------------------------------------------------------------------------------------------------------------]"),vs=t=>d(t)&&t.charCodeAt(0)>=768&&ms.test(t),ys=dr,bs=pr,xs=ur,_s=rr,ws=Qi(["script","style","textarea"]),Ss=Qi(["img","input","textarea","hr","iframe","video","audio","object","embed"]),Cs=Qi(["table"]),ks=Ja,As=t=>!ks(t)&&(_s(t)?!ws(t.parentNode):Ss(t)||xs(t)||Cs(t)||Ms(t)),Ms=t=>!(t=>$i(t)&&"true"===t.getAttribute("unselectable"))(t)&&bs(t),Ts=(t,e)=>As(t)&&((t,e)=>{for(let n=t.parentNode;n&&n!==e;n=n.parentNode){if(Ms(n))return!1;if(ys(n))return!0}return!0})(t,e),Is=$i,Es=As,Os=Ji("display","block table"),Ds=Ji("float","left right"),Ls=((...t)=>e=>{for(let n=0;n<t.length;n++)if(!t[n](e))return!1;return!0})(Is,Es,O(Ds)),Ps=O(Ji("white-space","pre pre-line pre-wrap")),Ns=rr,Rs=ur,Bs=ia.nodeIndex,zs=(t,e)=>e<0&&$i(t)&&t.hasChildNodes()?void 0:gs(t,e),Fs=t=>t?t.createRange():ia.DOM.createRng(),Vs=t=>d(t)&&/[\r\n\t ]/.test(t),Hs=t=>!!t.setStart&&!!t.setEnd,Ws=t=>{const e=t.startContainer,n=t.startOffset;if(Vs(t.toString())&&Ps(e.parentNode)&&rr(e)){const t=e.data;if(Vs(t[n-1])||Vs(t[n+1]))return!0}return!1},js=t=>0===t.left&&0===t.right&&0===t.top&&0===t.bottom,Ys=t=>{var e;let n;const i=t.getClientRects();return n=i.length>0?ls(i[0]):ls(t.getBoundingClientRect()),!Hs(t)&&Rs(t)&&js(n)?(t=>{const e=t.ownerDocument,n=Fs(e),i=e.createTextNode(Hi),r=t.parentNode;r.insertBefore(i,t),n.setStart(i,0),n.setEnd(i,1);const o=ls(n.getBoundingClientRect());return r.removeChild(i),o})(t):js(n)&&Hs(t)&&null!==(e=(t=>{const e=t.startContainer,n=t.endContainer,i=t.startOffset,r=t.endOffset;if(e===n&&rr(n)&&0===i&&1===r){const e=t.cloneRange();return e.setEndAfter(n),Ys(e)}return null})(t))&&void 0!==e?e:n},Xs=(t,e)=>{const n=cs(t,e);return n.width=1,n.right=n.left+1,n},Gs=(t,e,n)=>{const i=()=>(n||(n=(t=>{const e=[],n=t=>{var n,i;0!==t.height&&(e.length>0&&(n=t,i=e[e.length-1],n.left===i.left&&n.top===i.top&&n.bottom===i.bottom&&n.right===i.right)||e.push(t))},i=(t,e)=>{const i=Fs(t.ownerDocument);if(e<t.data.length){if(vs(t.data[e]))return;if(vs(t.data[e-1])&&(i.setStart(t,e),i.setEnd(t,e+1),!Ws(i)))return void n(Xs(Ys(i),!1))}e>0&&(i.setStart(t,e-1),i.setEnd(t,e),Ws(i)||n(Xs(Ys(i),!1))),e<t.data.length&&(i.setStart(t,e),i.setEnd(t,e+1),Ws(i)||n(Xs(Ys(i),!0)))},r=t.container(),o=t.offset();if(Ns(r))return i(r,o),e;if(Is(r))if(t.isAtEnd()){const t=zs(r,o);Ns(t)&&i(t,t.data.length),Ls(t)&&!Rs(t)&&n(Xs(Ys(t),!1))}else{const a=zs(r,o);if(Ns(a)&&i(a,0),Ls(a)&&t.isAtEnd())return n(Xs(Ys(a),!1)),e;const s=zs(t.container(),t.offset()-1);Ls(s)&&!Rs(s)&&(Os(s)||Os(a)||!Ls(a))&&n(Xs(Ys(s),!1)),Ls(a)&&n(Xs(Ys(a),!0))}return e})(Gs(t,e))),n);return{container:M(t),offset:M(e),toRange:()=>{const n=Fs(t.ownerDocument);return n.setStart(t,e),n.setEnd(t,e),n},getClientRects:i,isVisible:()=>i().length>0,isAtStart:()=>(Ns(t),0===e),isAtEnd:()=>Ns(t)?e>=t.data.length:e>=t.childNodes.length,isEqual:n=>n&&t===n.container()&&e===n.offset(),getNode:n=>zs(t,n?e-1:e)}};Gs.fromRangeStart=t=>Gs(t.startContainer,t.startOffset),Gs.fromRangeEnd=t=>Gs(t.endContainer,t.endOffset),Gs.after=t=>Gs(t.parentNode,Bs(t)+1),Gs.before=t=>Gs(t.parentNode,Bs(t)),Gs.isAbove=(t,e)=>Be(lt(e.getClientRects()),ct(t.getClientRects()),hs).getOr(!1),Gs.isBelow=(t,e)=>Be(ct(e.getClientRects()),lt(t.getClientRects()),ds).getOr(!1),Gs.isAtStart=t=>!!t&&t.isAtStart(),Gs.isAtEnd=t=>!!t&&t.isAtEnd(),Gs.isTextPosition=t=>!!t&&rr(t.container()),Gs.isElementPosition=t=>!Gs.isTextPosition(t);const qs=(t,e)=>{rr(e)&&0===e.data.length&&t.remove(e)},Us=(t,e,n)=>{cr(n)?((t,e,n)=>{const i=B.from(n.firstChild),r=B.from(n.lastChild);e.insertNode(n),i.each((e=>qs(t,e.previousSibling))),r.each((e=>qs(t,e.nextSibling)))})(t,e,n):((t,e,n)=>{e.insertNode(n),qs(t,n.previousSibling),qs(t,n.nextSibling)})(t,e,n)},$s=rr,Zs=tr,Ks=ia.nodeIndex,Qs=t=>{const e=t.parentNode;return Zs(e)?Qs(e):e},Js=t=>t?Dt(t.childNodes,((t,e)=>(Zs(e)&&"BR"!==e.nodeName?t=t.concat(Js(e)):t.push(e),t)),[]):[],tl=t=>e=>t===e,el=t=>($s(t)?"text()":t.nodeName.toLowerCase())+"["+(t=>{let e,n;e=Js(Qs(t)),n=Lt(e,tl(t),t),e=e.slice(0,n+1);const i=Dt(e,((t,n,i)=>($s(n)&&$s(e[i-1])&&t++,t)),0);return e=Ot(e,Qi([t.nodeName])),n=Lt(e,tl(t),t),n-i})(t)+"]",nl=(t,e)=>{let n,i=[],r=e.container(),o=e.offset();if($s(r))n=((t,e)=>{let n=t;for(;(n=n.previousSibling)&&$s(n);)e+=n.data.length;return e})(r,o);else{const t=r.childNodes;o>=t.length?(n="after",o=t.length-1):n="before",r=t[o]}i.push(el(r));let a=((t,e,n)=>{const i=[];for(let n=e.parentNode;n&&n!==t;n=n.parentNode)i.push(n);return i})(t,r);return a=Ot(a,O(tr)),i=i.concat(Et(a,(t=>el(t)))),i.reverse().join("/")+","+n},il=(t,e)=>{if(!e)return null;const n=e.split(","),i=n[0].split("/"),r=n.length>1?n[1]:"before",o=Dt(i,((t,e)=>{const n=/([\w\-\(\)]+)\[([0-9]+)\]/.exec(e);return n?("text()"===n[1]&&(n[1]="#text"),((t,e,n)=>{let i=Js(t);return i=Ot(i,((t,e)=>!$s(t)||!$s(i[e-1]))),i=Ot(i,Qi([e])),i[n]})(t,n[1],parseInt(n[2],10))):null}),t);if(!o)return null;if(!$s(o)&&o.parentNode){let t;return t="after"===r?Ks(o)+1:Ks(o),Gs(o.parentNode,t)}return((t,e)=>{let n=t,i=0;for(;$s(n);){const r=n.data.length;if(e>=i&&e<=i+r){t=n,e-=i;break}if(!$s(n.nextSibling)){t=n,e=r;break}i+=r,n=n.nextSibling}return $s(t)&&e>t.data.length&&(e=t.data.length),Gs(t,e)})(o,parseInt(r,10))},rl=pr,ol=(t,e,n,i,r)=>{const o=r?i.startContainer:i.endContainer;let a=r?i.startOffset:i.endOffset;const s=[],l=t.getRoot();if(rr(o))s.push(n?((t,e,n)=>{let i=t(e.data.slice(0,n)).length;for(let n=e.previousSibling;n&&rr(n);n=n.previousSibling)i+=t(n.data).length;return i})(e,o,a):a);else{let e=0;const i=o.childNodes;a>=i.length&&i.length&&(e=1,a=Math.max(0,i.length-1)),s.push(t.nodeIndex(i[a],n)+e)}for(let e=o;e&&e!==l;e=e.parentNode)s.push(t.nodeIndex(e,n));return s},al=(t,e,n)=>{let i=0;return Pe.each(t.select(e),(t=>"all"===t.getAttribute("data-mce-bogus")?void 0:t!==n&&void i++)),i},sl=(t,e)=>{let n=e?t.startContainer:t.endContainer,i=e?t.startOffset:t.endOffset;if($i(n)&&"TR"===n.nodeName){const r=n.childNodes;n=r[Math.min(e?i:i-1,r.length-1)],n&&(i=e?0:n.childNodes.length,e?t.setStart(n,i):t.setEnd(n,i))}},ll=t=>(sl(t,!0),sl(t,!1),t),cl=(t,e)=>{if($i(t)&&(t=gs(t,e),rl(t)))return t;if(Ja(t)){rr(t)&&Ka(t)&&(t=t.parentNode);let e=t.previousSibling;if(rl(e))return e;if(e=t.nextSibling,rl(e))return e}},ul=(t,e,n)=>{const i=n.getNode(),r=n.getRng();if("IMG"===i.nodeName||rl(i)){const t=i.nodeName;return{name:t,index:al(n.dom,t,i)}}const o=(t=>cl(t.startContainer,t.startOffset)||cl(t.endContainer,t.endOffset))(r);if(o){const t=o.tagName;return{name:t,index:al(n.dom,t,o)}}return((t,e,n,i)=>{const r=e.dom,o=ol(r,t,n,i,!0),a=e.isForward(),s=as(i)?{isFakeCaret:!0}:{};return e.isCollapsed()?{start:o,forward:a,...s}:{start:o,end:ol(r,t,n,i,!1),forward:a,...s}})(t,n,e,r)},hl=(t,e,n)=>{const i={"data-mce-type":"bookmark",id:e,style:"overflow:hidden;line-height:0px"};return n?t.create("span",i,"&#xFEFF;"):t.create("span",i)},dl=(t,e)=>{const n=t.dom;let i=t.getRng();const r=n.uniqueId(),o=t.isCollapsed(),a=t.getNode(),s=a.nodeName,l=t.isForward();if("IMG"===s)return{name:s,index:al(n,s,a)};const c=ll(i.cloneRange());if(!o){c.collapse(!1);const t=hl(n,r+"_end",e);Us(n,c,t)}i=ll(i),i.collapse(!0);const u=hl(n,r+"_start",e);return Us(n,i,u),t.moveToBookmark({id:r,keep:!0,forward:l}),{id:r,forward:l}},pl=E(ul,T,!0),fl=t=>{const e=e=>e(t),n=M(t),i=()=>r,r={tag:!0,inner:t,fold:(e,n)=>n(t),isValue:R,isError:N,map:e=>ml.value(e(t)),mapError:i,bind:e,exists:e,forall:e,getOr:n,or:i,getOrThunk:n,orThunk:i,getOrDie:n,each:e=>{e(t)},toOptional:()=>B.some(t)};return r},gl=t=>{const e=()=>n,n={tag:!1,inner:t,fold:(e,n)=>e(t),isValue:N,isError:R,map:e,mapError:e=>ml.error(e(t)),bind:e,exists:N,forall:R,getOr:T,or:T,getOrThunk:L,orThunk:L,getOrDie:D(String(t)),each:C,toOptional:B.none};return n},ml={value:fl,error:gl,fromOption:(t,e)=>t.fold((()=>gl(e)),fl)},vl=t=>{if(!g(t))throw new Error("cases must be an array");if(0===t.length)throw new Error("there must be at least one case");const e=[],n={};return X(t,((i,r)=>{const o=pt(i);if(1!==o.length)throw new Error("one and only one name per case");const a=o[0],s=i[a];if(void 0!==n[a])throw new Error("duplicate key detected:"+a);if("cata"===a)throw new Error("cannot have a case named cata (sorry)");if(!g(s))throw new Error("case arguments must be an array");e.push(a),n[a]=(...n)=>{const i=n.length;if(i!==s.length)throw new Error("Wrong number of arguments to case "+a+". Expected "+s.length+" ("+s+"), got "+i);return{fold:(...e)=>{if(e.length!==t.length)throw new Error("Wrong number of arguments to fold. Expected "+t.length+", got "+e.length);return e[r].apply(null,n)},match:t=>{const i=pt(t);if(e.length!==i.length)throw new Error("Wrong number of arguments to match. Expected: "+e.join(",")+"\nActual: "+i.join(","));if(!nt(e,(t=>W(i,t))))throw new Error("Not all branches were specified when using match. Specified: "+i.join(", ")+"\nRequired: "+e.join(", "));return t[a].apply(null,n)},log:t=>{console.log(t,{constructors:e,constructor:a,params:n})}}}})),n};vl([{bothErrors:["error1","error2"]},{firstError:["error1","value2"]},{secondError:["value1","error2"]},{bothValues:["value1","value2"]}]);const yl=t=>"inline-command"===t.type||"inline-format"===t.type,bl=t=>"block-command"===t.type||"block-format"===t.type,xl=t=>{var e;const n=e=>ml.error({message:e,pattern:t}),i=(e,i,r)=>{if(void 0!==t.format){let r;if(g(t.format)){if(!nt(t.format,d))return n(e+" pattern has non-string items in the `format` array");r=t.format}else{if(!d(t.format))return n(e+" pattern has non-string `format` parameter");r=[t.format]}return ml.value(i(r))}return void 0!==t.cmd?d(t.cmd)?ml.value(r(t.cmd,t.value)):n(e+" pattern has non-string `cmd` parameter"):n(e+" pattern is missing both `format` and `cmd` parameters")};if(!p(t))return n("Raw pattern is not an object");if(!d(t.start))return n("Raw pattern is missing `start` parameter");if(void 0!==t.end){if(!d(t.end))return n("Inline pattern has non-string `end` parameter");if(0===t.start.length&&0===t.end.length)return n("Inline pattern has empty `start` and `end` parameters");let e=t.start,r=t.end;return 0===r.length&&(r=e,e=""),i("Inline",(t=>({type:"inline-format",start:e,end:r,format:t})),((t,n)=>({type:"inline-command",start:e,end:r,cmd:t,value:n})))}if(void 0!==t.replacement)return d(t.replacement)?0===t.start.length?n("Replacement pattern has empty `start` parameter"):ml.value({type:"inline-command",start:"",end:t.start,cmd:"mceInsertContent",value:t.replacement}):n("Replacement pattern has non-string `replacement` parameter");{const r=null!==(e=t.trigger)&&void 0!==e?e:"space";return 0===t.start.length?n("Block pattern has empty `start` parameter"):i("Block",(e=>({type:"block-format",start:t.start,format:e[0],trigger:r})),((e,n)=>({type:"block-command",start:t.start,cmd:e,value:n,trigger:r})))}},_l=t=>U(t,bl),wl=t=>U(t,yl),Sl=(t,e)=>({...t,blockPatterns:U(t.blockPatterns,(t=>((t,e)=>("block-command"===t.type||"block-format"===t.type)&&t.trigger===e)(t,e)))}),Cl=t=>{const e=(t=>{const e=[],n=[];return X(t,(t=>{t.fold((t=>{e.push(t)}),(t=>{n.push(t)}))})),{errors:e,values:n}})(Y(t,xl));return X(e.errors,(t=>console.error(t.message,t.pattern))),e.values},kl=Se().deviceType,Al=kl.isTouch(),Ml=ia.DOM,Tl=t=>h(t,RegExp),Il=t=>e=>e.options.get(t),El=t=>d(t)||p(t),Ol=(t,e="")=>n=>{const i=d(n);if(i){if(-1!==n.indexOf("=")){const r=(t=>{const e=t.indexOf("=")>0?t.split(/[;,](?![^=;,]*(?:[;,]|$))/):t.split(",");return Z(e,((t,e)=>{const n=e.split("="),i=n[0],r=n.length>1?n[1]:i;return t[Gt(i)]=Gt(r),t}),{})})(n);return{value:St(r,t.id).getOr(e),valid:i}}return{value:n,valid:i}}return{valid:!1,message:"Must be a string."}},Dl=Il("iframe_attrs"),Ll=Il("doctype"),Pl=Il("document_base_url"),Nl=Il("body_id"),Rl=Il("body_class"),Bl=Il("content_security_policy"),zl=Il("br_in_pre"),Fl=Il("forced_root_block"),Vl=Il("forced_root_block_attrs"),Hl=Il("newline_behavior"),Wl=Il("br_newline_selector"),jl=Il("no_newline_selector"),Yl=Il("keep_styles"),Xl=Il("end_container_on_empty_block"),Gl=Il("automatic_uploads"),ql=Il("images_reuse_filename"),Ul=Il("images_replace_blob_uris"),$l=Il("icons"),Zl=Il("icons_url"),Kl=Il("images_upload_url"),Ql=Il("images_upload_base_path"),Jl=Il("images_upload_credentials"),tc=Il("images_upload_handler"),ec=Il("content_css_cors"),nc=Il("referrer_policy"),ic=Il("language"),rc=Il("language_url"),oc=Il("indent_use_margin"),ac=Il("indentation"),sc=Il("content_css"),lc=Il("content_style"),cc=Il("font_css"),uc=Il("directionality"),hc=Il("inline_boundaries_selector"),dc=Il("object_resizing"),pc=Il("resize_img_proportional"),fc=Il("placeholder"),gc=Il("event_root"),mc=Il("service_message"),vc=Il("theme"),yc=Il("theme_url"),bc=Il("model"),xc=Il("model_url"),_c=Il("inline_boundaries"),wc=Il("formats"),Sc=Il("preview_styles"),Cc=Il("format_empty_lines"),kc=Il("format_noneditable_selector"),Ac=Il("custom_ui_selector"),Mc=Il("inline"),Tc=Il("hidden_input"),Ic=Il("submit_patch"),Ec=Il("add_form_submit_trigger"),Oc=Il("add_unload_trigger"),Dc=Il("custom_undo_redo_levels"),Lc=Il("disable_nodechange"),Pc=Il("readonly"),Nc=Il("editable_root"),Rc=Il("content_css_cors"),Bc=Il("plugins"),zc=Il("external_plugins"),Fc=Il("block_unsupported_drop"),Vc=Il("visual"),Hc=Il("visual_table_class"),Wc=Il("visual_anchor_class"),jc=Il("iframe_aria_text"),Yc=Il("setup"),Xc=Il("init_instance_callback"),Gc=Il("urlconverter_callback"),qc=Il("auto_focus"),Uc=Il("browser_spellcheck"),$c=Il("protect"),Zc=Il("paste_block_drop"),Kc=Il("paste_data_images"),Qc=Il("paste_preprocess"),Jc=Il("paste_postprocess"),tu=Il("newdocument_content"),eu=Il("paste_webkit_styles"),nu=Il("paste_remove_styles_if_webkit"),iu=Il("paste_merge_formats"),ru=Il("smart_paste"),ou=Il("paste_as_text"),au=Il("paste_tab_spaces"),su=Il("allow_html_data_urls"),lu=Il("text_patterns"),cu=Il("text_patterns_lookup"),uu=Il("noneditable_class"),hu=Il("editable_class"),du=Il("noneditable_regexp"),pu=Il("preserve_cdata"),fu=Il("highlight_on_focus"),gu=Il("xss_sanitization"),mu=Il("init_content_sync"),vu=t=>Pe.explode(t.options.get("images_file_types")),yu=Il("table_tab_navigation"),bu=Il("details_initial_state"),xu=Il("details_serialized_state"),_u=Il("sandbox_iframes"),wu=t=>t.options.get("sandbox_iframes_exclusions"),Su=Il("convert_unsafe_embeds"),Cu=Il("license_key"),ku=Il("api_key"),Au=$i,Mu=rr,Tu=t=>{const e=t.parentNode;e&&e.removeChild(t)},Iu=t=>{const e=Ua(t);return{count:t.length-e.length,text:e}},Eu=t=>{let e;for(;-1!==(e=t.data.lastIndexOf(Ga));)t.deleteData(e,1)},Ou=(t,e)=>(Du(t),e),Du=t=>{Au(t)&&Ja(t)&&(ts(t)?t.removeAttribute("data-mce-caret"):Tu(t)),Mu(t)&&(Eu(t),0===t.data.length&&Tu(t))},Lu=pr,Pu=mr,Nu=fr,Ru=(t,e,n)=>{const i=cs(e.getBoundingClientRect(),n);let r,o;if("BODY"===t.tagName){const e=t.ownerDocument.documentElement;r=t.scrollLeft||e.scrollLeft,o=t.scrollTop||e.scrollTop}else{const e=t.getBoundingClientRect();r=t.scrollLeft-e.left,o=t.scrollTop-e.top}i.left+=r,i.right+=r,i.top+=o,i.bottom+=o,i.width=1;let a=e.offsetWidth-e.clientWidth;return a>0&&(n&&(a*=-1),i.left+=a,i.right+=a),i},Bu=()=>Ee.browser.isFirefox(),zu=t=>Lu(t)||Pu(t),Fu=t=>(zu(t)||er(t)&&Bu())&&In(bn(t)).exists(ni),Vu=dr,Hu=pr,Wu=mr,ju=Ji("display","block table table-cell table-caption list-item"),Yu=Ja,Xu=Ka,Gu=$i,qu=rr,Uu=As,$u=t=>t>0,Zu=t=>t<0,Ku=(t,e)=>{let n;for(;n=t(e);)if(!Xu(n))return n;return null},Qu=(t,e,n,i,r)=>{const o=new Fi(t,i),a=Hu(t)||Xu(t);let s;if(Zu(e)){if(a&&(s=Ku(o.prev.bind(o),!0),n(s)))return s;for(;s=Ku(o.prev.bind(o),r);)if(n(s))return s}if($u(e)){if(a&&(s=Ku(o.next.bind(o),!0),n(s)))return s;for(;s=Ku(o.next.bind(o),r);)if(n(s))return s}return null},Ju=(t,e)=>{for(;t&&t!==e;){if(ju(t))return t;t=t.parentNode}return null},th=(t,e,n)=>Ju(t.container(),n)===Ju(e.container(),n),eh=(t,e)=>{if(!e)return B.none();const n=e.container(),i=e.offset();return Gu(n)?B.from(n.childNodes[i+t]):B.none()},nh=(t,e)=>{var n;const i=(null!==(n=e.ownerDocument)&&void 0!==n?n:document).createRange();return t?(i.setStartBefore(e),i.setEndBefore(e)):(i.setStartAfter(e),i.setEndAfter(e)),i},ih=(t,e,n)=>Ju(e,t)===Ju(n,t),rh=(t,e,n)=>{const i=t?"previousSibling":"nextSibling";let r=n;for(;r&&r!==e;){let t=r[i];if(t&&Yu(t)&&(t=t[i]),Hu(t)||Wu(t)){if(ih(e,t,r))return t;break}if(Uu(t))break;r=r.parentNode}return null},oh=E(nh,!0),ah=E(nh,!1),sh=(t,e,n)=>{let i;const r=E(rh,!0,e),o=E(rh,!1,e),a=n.startContainer,s=n.startOffset;if(Ka(a)){const t=qu(a)?a.parentNode:a,e=t.getAttribute("data-mce-caret");if("before"===e&&(i=t.nextSibling,Fu(i)))return oh(i);if("after"===e&&(i=t.previousSibling,Fu(i)))return ah(i)}if(!n.collapsed)return n;if(rr(a)){if(Yu(a)){if(1===t){if(i=o(a),i)return oh(i);if(i=r(a),i)return ah(i)}if(-1===t){if(i=r(a),i)return ah(i);if(i=o(a),i)return oh(i)}return n}if(rs(a)&&s>=a.data.length-1)return 1===t&&(i=o(a),i)?oh(i):n;if(is(a)&&s<=1)return-1===t&&(i=r(a),i)?ah(i):n;if(s===a.data.length)return i=o(a),i?oh(i):n;if(0===s)return i=r(a),i?ah(i):n}return n},lh=(t,e)=>eh(t?0:-1,e).filter(Hu),ch=(t,e,n)=>{const i=sh(t,e,n);return-1===t?Gs.fromRangeStart(i):Gs.fromRangeEnd(i)},uh=t=>B.from(t.getNode()).map(bn),hh=(t,e)=>{let n=e;for(;n=t(n);)if(n.isVisible())return n;return n},dh=(t,e)=>{const n=th(t,e);return!(n||!ur(t.getNode()))||n};var ph;!function(t){t[t.Backwards=-1]="Backwards",t[t.Forwards=1]="Forwards"}(ph||(ph={}));const fh=pr,gh=rr,mh=$i,vh=ur,yh=As,bh=t=>Ss(t)||(t=>!!Ms(t)&&!Z(ut(t.getElementsByTagName("*")),((t,e)=>t||ys(e)),!1))(t),xh=Ts,_h=(t,e)=>t.hasChildNodes()&&e<t.childNodes.length?t.childNodes[e]:null,wh=(t,e)=>{if($u(t)){if(yh(e.previousSibling)&&!gh(e.previousSibling))return Gs.before(e);if(gh(e))return Gs(e,0)}if(Zu(t)){if(yh(e.nextSibling)&&!gh(e.nextSibling))return Gs.after(e);if(gh(e))return Gs(e,e.data.length)}return Zu(t)?vh(e)?Gs.before(e):Gs.after(e):Gs.before(e)},Sh=(t,e,n)=>{let i,r,o,a;if(!mh(n)||!e)return null;if(e.isEqual(Gs.after(n))&&n.lastChild){if(a=Gs.after(n.lastChild),Zu(t)&&yh(n.lastChild)&&mh(n.lastChild))return vh(n.lastChild)?Gs.before(n.lastChild):a}else a=e;const s=a.container();let l=a.offset();if(gh(s)){if(Zu(t)&&l>0)return Gs(s,--l);if($u(t)&&l<s.length)return Gs(s,++l);i=s}else{if(Zu(t)&&l>0&&(r=_h(s,l-1),yh(r)))return!bh(r)&&(o=Qu(r,t,xh,r),o)?gh(o)?Gs(o,o.data.length):Gs.after(o):gh(r)?Gs(r,r.data.length):Gs.before(r);if($u(t)&&l<s.childNodes.length&&(r=_h(s,l),yh(r)))return vh(r)?((t,e)=>{const n=e.nextSibling;return n&&yh(n)?gh(n)?Gs(n,0):Gs.before(n):Sh(ph.Forwards,Gs.after(e),t)})(n,r):!bh(r)&&(o=Qu(r,t,xh,r),o)?gh(o)?Gs(o,0):Gs.before(o):gh(r)?Gs(r,0):Gs.after(r);i=r||a.getNode()}if(i&&($u(t)&&a.isAtEnd()||Zu(t)&&a.isAtStart())&&(i=Qu(i,t,R,n,!0),xh(i,n)))return wh(t,i);r=i?Qu(i,t,xh,n):i;const c=Pt(U(((t,e)=>{const n=[];let i=t;for(;i&&i!==e;)n.push(i),i=i.parentNode;return n})(s,n),fh));return!c||r&&c.contains(r)?r?wh(t,r):null:(a=$u(t)?Gs.after(c):Gs.before(c),a)},Ch=t=>({next:e=>Sh(ph.Forwards,e,t),prev:e=>Sh(ph.Backwards,e,t)}),kh=t=>Gs.isTextPosition(t)?0===t.offset():As(t.getNode()),Ah=t=>{if(Gs.isTextPosition(t)){const e=t.container();return t.offset()===e.data.length}return As(t.getNode(!0))},Mh=(t,e)=>!Gs.isTextPosition(t)&&!Gs.isTextPosition(e)&&t.getNode()===e.getNode(!0),Th=(t,e,n)=>{const i=Ch(e);return B.from(t?i.next(n):i.prev(n))},Ih=(t,e,n)=>Th(t,e,n).bind((i=>th(n,i,e)&&((t,e,n)=>{return t?!Mh(e,n)&&(i=e,!(!Gs.isTextPosition(i)&&ur(i.getNode())))&&Ah(e)&&kh(n):!Mh(n,e)&&kh(e)&&Ah(n);var i})(t,n,i)?Th(t,e,i):B.some(i))),Eh=(t,e,n,i)=>Ih(t,e,n).bind((n=>i(n)?Eh(t,e,n,i):B.some(n))),Oh=(t,e)=>{const n=t?e.firstChild:e.lastChild;return rr(n)?B.some(Gs(n,t?0:n.data.length)):n?As(n)?B.some(t?Gs.before(n):ur(i=n)?Gs.before(i):Gs.after(i)):((t,e,n)=>{const i=t?Gs.before(n):Gs.after(n);return Th(t,e,i)})(t,e,n):B.none();var i},Dh=E(Th,!0),Lh=E(Th,!1),Ph=E(Oh,!0),Nh=E(Oh,!1),Rh="_mce_caret",Bh=t=>$i(t)&&t.id===Rh,zh=(t,e)=>{let n=e;for(;n&&n!==t;){if(Bh(n))return n;n=n.parentNode}return null},Fh=t=>Ct(t,"name"),Vh=t=>Pe.isArray(t.start),Hh=t=>!(!Fh(t)&&v(t.forward))||t.forward,Wh=(t,e)=>($i(e)&&t.isBlock(e)&&!e.innerHTML&&(e.innerHTML='<br data-mce-bogus="1" />'),e),jh=(t,e)=>Nh(t).fold(N,(t=>(e.setStart(t.container(),t.offset()),e.setEnd(t.container(),t.offset()),!0))),Yh=(t,e,n)=>!(!(t=>!t.hasChildNodes())(e)||!zh(t,e)||(((t,e)=>{var n;const i=(null!==(n=t.ownerDocument)&&void 0!==n?n:document).createTextNode(Ga);t.appendChild(i),e.setStart(i,0),e.setEnd(i,0)})(e,n),0)),Xh=(t,e,n,i)=>{const r=n[e?"start":"end"],o=t.getRoot();if(r){let t=o,n=r[0];for(let e=r.length-1;t&&e>=1;e--){const n=t.childNodes;if(Yh(o,t,i))return!0;if(r[e]>n.length-1)return!!Yh(o,t,i)||jh(t,i);t=n[r[e]]}rr(t)&&(n=Math.min(r[0],t.data.length)),$i(t)&&(n=Math.min(r[0],t.childNodes.length)),e?i.setStart(t,n):i.setEnd(t,n)}return!0},Gh=t=>rr(t)&&t.data.length>0,qh=(t,e,n)=>{const i=t.get(n.id+"_"+e),r=null==i?void 0:i.parentNode,o=n.keep;if(i&&r){let a,s;if("start"===e?o?i.hasChildNodes()?(a=i.firstChild,s=1):Gh(i.nextSibling)?(a=i.nextSibling,s=0):Gh(i.previousSibling)?(a=i.previousSibling,s=i.previousSibling.data.length):(a=r,s=t.nodeIndex(i)+1):(a=r,s=t.nodeIndex(i)):o?i.hasChildNodes()?(a=i.firstChild,s=1):Gh(i.previousSibling)?(a=i.previousSibling,s=i.previousSibling.data.length):(a=r,s=t.nodeIndex(i)):(a=r,s=t.nodeIndex(i)),!o){const r=i.previousSibling,o=i.nextSibling;let l;for(Pe.each(Pe.grep(i.childNodes),(t=>{rr(t)&&(t.data=t.data.replace(/\uFEFF/g,""))}));l=t.get(n.id+"_"+e);)t.remove(l,!0);if(rr(o)&&rr(r)&&!Ee.browser.isOpera()){const e=r.data.length;r.appendData(o.data),t.remove(o),a=r,s=e}}return B.some(Gs(a,s))}return B.none()},Uh=(t,e,n)=>((t,e,n=!1)=>2===e?ul(Ua,n,t):3===e?(t=>{const e=t.getRng();return{start:nl(t.dom.getRoot(),Gs.fromRangeStart(e)),end:nl(t.dom.getRoot(),Gs.fromRangeEnd(e)),forward:t.isForward()}})(t):e?(t=>({rng:t.getRng(),forward:t.isForward()}))(t):dl(t,!1))(t,e,n),$h=(t,e)=>{((t,e)=>{const n=t.dom;if(e){if(Vh(e))return((t,e)=>{const n=t.createRng();return Xh(t,!0,e,n)&&Xh(t,!1,e,n)?B.some({range:n,forward:Hh(e)}):B.none()})(n,e);if((t=>d(t.start))(e))return((t,e)=>{const n=B.from(il(t.getRoot(),e.start)),i=B.from(il(t.getRoot(),e.end));return Be(n,i,((n,i)=>{const r=t.createRng();return r.setStart(n.container(),n.offset()),r.setEnd(i.container(),i.offset()),{range:r,forward:Hh(e)}}))})(n,e);if((t=>Ct(t,"id"))(e))return((t,e)=>{const n=qh(t,"start",e),i=qh(t,"end",e);return Be(n,i.or(n),((n,i)=>{const r=t.createRng();return r.setStart(Wh(t,n.container()),n.offset()),r.setEnd(Wh(t,i.container()),i.offset()),{range:r,forward:Hh(e)}}))})(n,e);if(Fh(e))return((t,e)=>B.from(t.select(e.name)[e.index]).map((e=>{const n=t.createRng();return n.selectNode(e),{range:n,forward:!0}})))(n,e);if((t=>Ct(t,"rng"))(e))return B.some({range:e.rng,forward:Hh(e)})}return B.none()})(t,e).each((({range:e,forward:n})=>{t.setRng(e,n)}))},Zh=t=>$i(t)&&"SPAN"===t.tagName&&"bookmark"===t.getAttribute("data-mce-type"),Kh=(Hi,t=>""===t);const Qh=t=>""!==t&&-1!==" \f\n\r\t\v".indexOf(t),Jh=t=>!Qh(t)&&!Kh(t)&&!Wi(t),td=t=>{const e=[];if(t)for(let n=0;n<t.rangeCount;n++)e.push(t.getRangeAt(n));return e},ed=(t,e)=>{const n=Ri(e,"td[data-mce-selected],th[data-mce-selected]");return n.length>0?n:(t=>U((t=>et(t,(t=>{const e=fs(t);return e?[bn(e)]:[]})))(t),Wa))(t)},nd=t=>ed(td(t.selection.getSel()),bn(t.getBody())),id=(t,e)=>Jn(t,"table",e),rd=t=>Bn(t).fold(M([t]),(e=>[t].concat(rd(e)))),od=t=>zn(t).fold(M([t]),(e=>"br"===We(e)?On(e).map((e=>[t].concat(od(e)))).getOr([]):[t].concat(od(e)))),ad=(t,e)=>Be((t=>{const e=t.startContainer,n=t.startOffset;return rr(e)?0===n?B.some(bn(e)):B.none():B.from(e.childNodes[n]).map(bn)})(e),(t=>{const e=t.endContainer,n=t.endOffset;return rr(e)?n===e.data.length?B.some(bn(e)):B.none():B.from(e.childNodes[n-1]).map(bn)})(e),((e,n)=>{const i=Q(rd(t),E(Sn,e)),r=Q(od(t),E(Sn,n));return i.isSome()&&r.isSome()})).getOr(!1),sd=(t,e,n,i)=>{const r=n,o=new Fi(n,r),a=xt(t.schema.getMoveCaretBeforeOnEnterElements(),((t,e)=>!W(["td","th","table"],e.toLowerCase())));let s=n;do{if(rr(s)&&0!==Pe.trim(s.data).length)return void(i?e.setStart(s,0):e.setEnd(s,s.data.length));if(a[s.nodeName])return void(i?e.setStartBefore(s):"BR"===s.nodeName?e.setEndBefore(s):e.setEndAfter(s))}while(s=i?o.next():o.prev());"BODY"===r.nodeName&&(i?e.setStart(r,0):e.setEnd(r,r.childNodes.length))},ld=t=>{const e=t.selection.getSel();return x(e)&&e.rangeCount>0},cd=(t,e)=>{const n=nd(t);n.length>0?X(n,(n=>{const i=n.dom,r=t.dom.createRng();r.setStartBefore(i),r.setEndAfter(i),e(r,!0)})):e(t.selection.getRng(),!1)},ud=(t,e,n)=>{const i=dl(t,e);n(i),t.moveToBookmark(i)},hd=t=>w(null==t?void 0:t.nodeType),dd=t=>$i(t)&&!Zh(t)&&!Bh(t)&&!tr(t),pd=(t,e,n)=>{const{selection:i,dom:r}=t,o=i.getNode(),a=pr(o);ud(i,!0,(()=>{e()})),a&&pr(o)&&r.isChildOf(o,t.getBody())?t.selection.select(o):n(i.getStart())&&fd(r,i)},fd=(t,e)=>{var n,i;const r=e.getRng(),{startContainer:o,startOffset:a}=r;if(!((t,e)=>{if(dd(e)&&!/^(TD|TH)$/.test(e.nodeName)){const n=t.getAttrib(e,"data-mce-selected"),i=parseInt(n,10);return!isNaN(i)&&i>0}return!1})(t,e.getNode())&&$i(o)){const s=o.childNodes,l=t.getRoot();let c;if(a<s.length){const e=s[a];c=new Fi(e,null!==(n=t.getParent(e,t.isBlock))&&void 0!==n?n:l)}else{const e=s[s.length-1];c=new Fi(e,null!==(i=t.getParent(e,t.isBlock))&&void 0!==i?i:l),c.next(!0)}for(let n=c.current();n;n=c.next()){if("false"===t.getContentEditable(n))return;if(rr(n)&&!yd(n))return r.setStart(n,0),void e.setRng(r)}}},gd=(t,e,n)=>{if(t){const i=e?"nextSibling":"previousSibling";for(t=n?t:t[i];t;t=t[i])if($i(t)||!yd(t))return t}},md=(t,e)=>!!t.getTextBlockElements()[e.nodeName.toLowerCase()]||Vr(t,e),vd=(t,e,n)=>t.schema.isValidChild(e,n),yd=(t,e=!1)=>{if(x(t)&&rr(t)){const n=e?t.data.replace(/ /g,""):t.data;return Yi(n)}return!1},bd=(t,e)=>{const n=t.dom;return dd(e)&&"false"===n.getContentEditable(e)&&((t,e)=>{const n="[data-mce-cef-wrappable]",i=kc(t),r=Zt(i)?n:`${n},${i}`;return _n(bn(e),r)})(t,e)&&0===n.select('[contenteditable="true"]',e).length},xd=(t,e)=>_(t)?t(e):(x(e)&&(t=t.replace(/%(\w+)/g,((t,n)=>e[n]||t))),t),_d=(t,e)=>(e=e||"",t=""+((t=t||"").nodeName||t),e=""+(e.nodeName||e),t.toLowerCase()===e.toLowerCase()),wd=(t,e)=>{if(b(t))return null;{let n=String(t);return"color"!==e&&"backgroundColor"!==e||(n=Bo(n)),"fontWeight"===e&&700===t&&(n="bold"),"fontFamily"===e&&(n=n.replace(/[\'\"]/g,"").replace(/,\s+/g,",")),n}},Sd=(t,e,n)=>{const i=t.getStyle(e,n);return wd(i,n)},Cd=(t,e)=>{let n;return t.getParent(e,(e=>!!$i(e)&&(n=t.getStyle(e,"text-decoration"),!!n&&"none"!==n))),n},kd=(t,e,n)=>t.getParents(e,n,t.getRoot()),Ad=(t,e,n)=>{const i=t.formatter.get(e);return x(i)&&j(i,n)},Md=t=>kt(t,"block"),Td=t=>kt(t,"selector"),Id=t=>kt(t,"inline"),Ed=t=>Td(t)&&!1!==t.expand&&!Id(t),Od=t=>(t=>{const e=[];let n=t;for(;n;){if(rr(n)&&n.data!==Ga||n.childNodes.length>1)return[];$i(n)&&e.push(n),n=n.firstChild}return e})(t).length>0,Dd=t=>Bh(t.dom)&&Od(t.dom),Ld=Zh,Pd=kd,Nd=yd,Rd=md,Bd=(t,e)=>{let n=e;for(;n;){if($i(n)&&t.getContentEditable(n))return"false"===t.getContentEditable(n)?n:e;n=n.parentNode}return e},zd=(t,e,n,i)=>{const r=e.data;if(t){for(let t=n;t>0;t--)if(i(r.charAt(t-1)))return t}else for(let t=n;t<r.length;t++)if(i(r.charAt(t)))return t;return-1},Fd=(t,e,n)=>zd(t,e,n,(t=>Kh(t)||Qh(t))),Vd=(t,e,n)=>zd(t,e,n,Jh),Hd=(t,e,n,i,r,o)=>{let a;const s=t.getParent(n,t.isBlock)||e,l=(e,n,i)=>{const o=La(t),l=r?o.backwards:o.forwards;return B.from(l(e,n,((t,e)=>Ld(t.parentNode)?-1:(a=t,i(r,t,e))),s))};return l(n,i,Fd).bind((t=>o?l(t.container,t.offset+(r?-1:0),Vd):B.some(t))).orThunk((()=>a?B.some({container:a,offset:r?0:a.length}):B.none()))},Wd=(t,e,n,i,r)=>{const o=i[r];rr(i)&&Zt(i.data)&&o&&(i=o);const a=Pd(t,i);for(let i=0;i<a.length;i++)for(let r=0;r<e.length;r++){const o=e[r];if((!x(o.collapsed)||o.collapsed===n.collapsed)&&Td(o)&&t.is(a[i],o.selector))return a[i]}return i},jd=(t,e,n,i)=>{var r;let o=n;const a=t.getRoot(),s=e[0];if(Md(s)&&(o=s.wrapper?null:t.getParent(n,s.block,a)),!o){const e=null!==(r=t.getParent(n,"LI,TD,TH,SUMMARY"))&&void 0!==r?r:a;o=t.getParent(rr(n)?n.parentNode:n,(e=>e!==a&&Rd(t.schema,e)),e)}if(o&&Md(s)&&s.wrapper&&(o=Pd(t,o,"ul,ol").reverse()[0]||o),!o)for(o=n;o&&o[i]&&!t.isBlock(o[i])&&(o=o[i],!_d(o,"br")););return o||n},Yd=(t,e,n,i)=>{const r=n.parentNode;return!x(n[i])&&(!(r!==e&&!b(r)&&!t.isBlock(r))||Yd(t,e,r,i))},Xd=(t,e,n,i,r)=>{let o=n;const a=r?"previousSibling":"nextSibling",s=t.getRoot();if(rr(n)&&!Nd(n)&&(r?i>0:i<n.data.length))return n;for(;o;){if(!e[0].block_expand&&t.isBlock(o))return o;for(let e=o[a];e;e=e[a]){const n=rr(e)&&!Yd(t,s,e,a);if(!Ld(e)&&(!ur(l=e)||!l.getAttribute("data-mce-bogus")||l.nextSibling)&&!Nd(e,n))return o}if(o===s||o.parentNode===s){n=o;break}o=o.parentNode}var l;return n},Gd=t=>Ld(t.parentNode)||Ld(t),qd=(t,e,n,i=!1)=>{let{startContainer:r,startOffset:o,endContainer:a,endOffset:s}=e;const l=n[0];return $i(r)&&r.hasChildNodes()&&(r=gs(r,o),rr(r)&&(o=0)),$i(a)&&a.hasChildNodes()&&(a=gs(a,e.collapsed?s:s-1),rr(a)&&(s=a.data.length)),r=Bd(t,r),a=Bd(t,a),Gd(r)&&(r=Ld(r)?r:r.parentNode,r=e.collapsed?r.previousSibling||r:r.nextSibling||r,rr(r)&&(o=e.collapsed?r.length:0)),Gd(a)&&(a=Ld(a)?a:a.parentNode,a=e.collapsed?a.nextSibling||a:a.previousSibling||a,rr(a)&&(s=e.collapsed?0:a.length)),e.collapsed&&(Hd(t,t.getRoot(),r,o,!0,i).each((({container:t,offset:e})=>{r=t,o=e})),Hd(t,t.getRoot(),a,s,!1,i).each((({container:t,offset:e})=>{a=t,s=e}))),(Id(l)||l.block_expand)&&(Id(l)&&rr(r)&&0!==o||(r=Xd(t,n,r,o,!0)),Id(l)&&rr(a)&&s!==a.data.length||(a=Xd(t,n,a,s,!1))),Ed(l)&&(r=Wd(t,n,e,r,"previousSibling"),a=Wd(t,n,e,a,"nextSibling")),(Md(l)||Td(l))&&(r=jd(t,n,r,"previousSibling"),a=jd(t,n,a,"nextSibling"),Md(l)&&(t.isBlock(r)||(r=Xd(t,n,r,o,!0),rr(r)&&(o=0)),t.isBlock(a)||(a=Xd(t,n,a,s,!1),rr(a)&&(s=a.data.length)))),$i(r)&&r.parentNode&&(o=t.nodeIndex(r),r=r.parentNode),$i(a)&&a.parentNode&&(s=t.nodeIndex(a)+1,a=a.parentNode),{startContainer:r,startOffset:o,endContainer:a,endOffset:s}},Ud=(t,e,n)=>{var i;const r=e.startOffset,o=gs(e.startContainer,r),a=e.endOffset,s=gs(e.endContainer,a-1),l=t=>{const e=t[0];rr(e)&&e===o&&r>=e.data.length&&t.splice(0,1);const n=t[t.length-1];return 0===a&&t.length>0&&n===s&&rr(n)&&t.splice(t.length-1,1),t},c=(t,e,n)=>{const i=[];for(;t&&t!==n;t=t[e])i.push(t);return i},u=(e,n)=>t.getParent(e,(t=>t.parentNode===n),n),h=(t,e,i)=>{const r=i?"nextSibling":"previousSibling";for(let o=t,a=o.parentNode;o&&o!==e;o=a){a=o.parentNode;const e=c(o===t?o:o[r],r);e.length&&(i||e.reverse(),n(l(e)))}};if(o===s)return n(l([o]));const d=null!==(i=t.findCommonAncestor(o,s))&&void 0!==i?i:t.getRoot();if(t.isChildOf(o,s))return h(o,d,!0);if(t.isChildOf(s,o))return h(s,d);const p=u(o,d)||o,f=u(s,d)||s;h(o,p,!0);const g=c(p===o?p:p.nextSibling,"nextSibling",f===s?f.nextSibling:f);g.length&&n(l(g)),h(s,f)},$d=['pre[class*=language-][contenteditable="false"]',"figure.image","div[data-ephox-embed-iri]","div.tiny-pageembed","div.mce-toc","div[data-mce-toc]"],Zd=(t,e,n,i,r,o)=>{const{uid:a=e,...s}=n;hn(t,ma()),Qe(t,`${ya()}`,a),Qe(t,`${va()}`,i);const{attributes:l={},classes:c=[]}=r(a,s);if(Je(t,l),((t,e)=>{X(e,(e=>{hn(t,e)}))})(t,c),o){c.length>0&&Qe(t,`${xa()}`,c.join(","));const e=pt(l);e.length>0&&Qe(t,`${_a()}`,e.join(","))}},Kd=(t,e,n,i,r)=>{const o=vn("span",t);return Zd(o,e,n,i,r,!1),o},Qd=t=>{const e=(()=>{const t={};return{register:(e,n)=>{t[e]={name:e,settings:n}},lookup:e=>St(t,e).map((t=>t.settings)),getNames:()=>pt(t)}})();((t,e)=>{const n=va(),i=t=>B.from(t.attr(n)).bind(e.lookup),r=t=>{var e,n;t.attr(ya(),null),t.attr(va(),null),t.attr(ba(),null);const i=B.from(t.attr(_a())).map((t=>t.split(","))).getOr([]),r=B.from(t.attr(xa())).map((t=>t.split(","))).getOr([]);X(i,(e=>t.attr(e,null)));const o=null!==(n=null===(e=t.attr("class"))||void 0===e?void 0:e.split(" "))&&void 0!==n?n:[],a=rt(o,[ma()].concat(r));t.attr("class",a.length>0?a.join(" "):null),t.attr(xa(),null),t.attr(_a(),null)};t.serializer.addTempAttr(ba()),t.serializer.addAttributeFilter(n,(t=>{for(const e of t)i(e).each((t=>{!1===t.persistent&&("span"===e.name?e.unwrap():r(e))}))}))})(t,e);const n=((t,e)=>{const n=aa({}),i=()=>({listeners:[],previous:pa()}),r=(t,e)=>{o(t,(t=>(e(t),t)))},o=(t,e)=>{const r=n.get(),o=e(St(r,t).getOrThunk(i));r[t]=o,n.set(r)},a=(e,n)=>{X(ka(t,e),(t=>{n?Qe(t,ba(),"true"):rn(t,ba())}))},s=ga((()=>{const n=at(e.getNames());X(n,(e=>{o(e,(n=>{const i=n.previous.get();return Sa(t,B.some(e)).fold((()=>{i.each((t=>{(t=>{r(t,(e=>{X(e.listeners,(e=>e(!1,t)))}))})(e),n.previous.clear(),a(t,!1)}))}),(({uid:t,name:e,elements:o})=>{Ne(i,t)||(i.each((t=>a(t,!1))),((t,e,n)=>{r(t,(i=>{X(i.listeners,(i=>i(!0,t,{uid:e,nodes:Y(n,(t=>t.dom))})))}))})(e,t,o),n.previous.set(t),a(t,!0))})),{previous:n.previous,listeners:n.listeners}}))}))}),30);return t.on("remove",(()=>{s.cancel()})),t.on("NodeChange",(()=>{s.throttle()})),{addListener:(t,e)=>{o(t,(t=>({previous:t.previous,listeners:t.listeners.concat([e])})))}}})(t,e),i=Ze("span"),r=t=>{X(t,(t=>{i(t)?_i(t):(t=>{pn(t,ma()),rn(t,`${ya()}`),rn(t,`${va()}`),rn(t,`${ba()}`);const e=en(t,`${_a()}`).map((t=>t.split(","))).getOr([]),n=en(t,`${xa()}`).map((t=>t.split(","))).getOr([]);var i;X(e,(e=>rn(t,e))),i=t,X(n,(t=>{pn(i,t)})),rn(t,`${xa()}`),rn(t,`${_a()}`)})(t)}))};return{register:(t,n)=>{e.register(t,n)},annotate:(n,i)=>{e.lookup(n).each((e=>{((t,e,n,i)=>{t.undoManager.transact((()=>{const r=t.selection,o=r.getRng(),a=nd(t).length>0,s=Ta("mce-annotation");if(o.collapsed&&!a&&((t,e)=>{const n=qd(t.dom,e,[{inline:"span"}]);e.setStart(n.startContainer,n.startOffset),e.setEnd(n.endContainer,n.endOffset),t.selection.setRng(e)})(t,o),r.getRng().collapsed&&!a){const o=Kd(t.getDoc(),s,i,e,n.decorate);Ci(o,Hi),r.getRng().insertNode(o.dom),r.select(o.dom)}else ud(r,!1,(()=>{cd(t,(r=>{((t,e,n,i,r,o)=>{const a=[],s=Kd(t.getDoc(),n,o,i,r),l=pa(),c=()=>{l.clear()},u=t=>{X(t,h)},h=e=>{switch(((t,e,n,i)=>Tn(e).fold((()=>"skipping"),(r=>"br"===i||(t=>qe(t)&&Na(t)===Ga)(e)?"valid":(t=>Ge(t)&&fn(t,ma()))(e)?"existing":Bh(e.dom)?"caret":j($d,(t=>_n(e,t)))?"valid-block":vd(t,n,i)&&vd(t,We(r),n)?"valid":"invalid-child")))(t,e,"span",We(e))){case"invalid-child":{c();const t=Nn(e);u(t),c();break}case"valid-block":c(),Zd(e,n,o,i,r,!0);break;case"valid":{const t=l.get().getOrThunk((()=>{const t=Ea(s);return a.push(t),l.set(t),t}));vi(e,t);break}}};Ud(t.dom,e,(t=>{c(),(t=>{const e=Y(t,bn);u(e)})(t)}))})(t,r,s,e,n.decorate,i)}))}))}))})(t,n,e,i)}))},annotationChanged:(t,e)=>{n.addListener(t,e)},remove:e=>{Sa(t,B.some(e)).each((({elements:e})=>{const n=t.selection.getBookmark();r(e),t.selection.moveToBookmark(n)}))},removeAll:e=>{const n=t.selection.getBookmark();gt(Aa(t,e),((t,e)=>{r(t)})),t.selection.moveToBookmark(n)},getAll:e=>{const n=Aa(t,e);return mt(n,(t=>Y(t,(t=>t.dom))))}}},Jd=t=>({getBookmark:E(Uh,t),moveToBookmark:E($h,t)});Jd.isBookmarkNode=Zh;const tp=(t,e,n)=>!n.collapsed&&j(n.getClientRects(),(n=>((t,e,n)=>e>=t.left&&e<=t.right&&n>=t.top&&n<=t.bottom)(n,t,e))),ep=(t,e,n)=>{t.dispatch(e,n)},np=(t,e,n,i)=>{t.dispatch("FormatApply",{format:e,node:n,vars:i})},ip=(t,e,n,i)=>{t.dispatch("FormatRemove",{format:e,node:n,vars:i})},rp=(t,e)=>t.dispatch("SetContent",e),op=(t,e)=>t.dispatch("GetContent",e),ap=(t,e)=>{t.dispatch("AutocompleterUpdateActiveRange",e)},sp=(t,e)=>t.dispatch("PastePlainTextToggle",{state:e}),lp={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,ESC:27,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,modifierPressed:t=>t.shiftKey||t.ctrlKey||t.altKey||lp.metaKeyPressed(t),metaKeyPressed:t=>Ee.os.isMacOS()||Ee.os.isiOS()?t.metaKey:t.ctrlKey&&!t.altKey},cp="data-mce-selected",up=Math.abs,hp=Math.round,dp={nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},pp=(t,e)=>{const n=e.dom,i=e.getDoc(),r=document,o=e.getBody();let a,s,l,c,u,h,d,p,f,g,m,v,y,b,_;const w=t=>x(t)&&(hr(t)||n.is(t,"figure.image")),S=t=>mr(t)||n.hasClass(t,"mce-preview-object"),C=t=>{const n=t.target;((t,e)=>{if((t=>"longpress"===t.type||0===t.type.indexOf("touch"))(t)){const n=t.touches[0];return w(t.target)&&!tp(n.clientX,n.clientY,e)}return w(t.target)&&!tp(t.clientX,t.clientY,e)})(t,e.selection.getRng())&&!t.isDefaultPrevented()&&e.selection.select(n)},k=t=>n.hasClass(t,"mce-preview-object")&&x(t.firstElementChild)?[t,t.firstElementChild]:n.is(t,"figure.image")?[t.querySelector("img")]:[t],A=t=>{const i=dc(e);return!!i&&"false"!==t.getAttribute("data-mce-resize")&&t!==e.getBody()&&(n.hasClass(t,"mce-preview-object")&&x(t.firstElementChild)?_n(bn(t.firstElementChild),i):_n(bn(t),i))},M=(t,i,r)=>{if(x(r)){const o=k(t);X(o,(t=>{t.style[i]||!e.schema.isValid(t.nodeName.toLowerCase(),i)?n.setStyle(t,i,r):n.setAttrib(t,i,""+r)}))}},T=(t,e,n)=>{M(t,"width",e),M(t,"height",n)},I=t=>{let i,r,u,x,C;i=t.screenX-h,r=t.screenY-d,v=i*c[2]+p,y=r*c[3]+f,v=v<5?5:v,y=y<5?5:y,u=(w(a)||S(a))&&!1!==pc(e)?!lp.modifierPressed(t):lp.modifierPressed(t),u&&(up(i)>up(r)?(y=hp(v*g),v=hp(y/g)):(v=hp(y/g),y=hp(v*g))),T(s,v,y),x=c.startPos.x+i,C=c.startPos.y+r,x=x>0?x:0,C=C>0?C:0,n.setStyles(l,{left:x,top:C,display:"block"}),l.innerHTML=v+" &times; "+y,c[2]<0&&s.clientWidth<=v&&n.setStyle(s,"left",void 0+(p-v)),c[3]<0&&s.clientHeight<=y&&n.setStyle(s,"top",void 0+(f-y)),i=o.scrollWidth-b,r=o.scrollHeight-_,i+r!==0&&n.setStyles(l,{left:x-i,top:C-r}),m||(((t,e,n,i,r)=>{t.dispatch("ObjectResizeStart",{target:e,width:n,height:i,origin:r})})(e,a,p,f,"corner-"+c.name),m=!0)},E=()=>{const t=m;m=!1,t&&(M(a,"width",v),M(a,"height",y)),n.unbind(i,"mousemove",I),n.unbind(i,"mouseup",E),r!==i&&(n.unbind(r,"mousemove",I),n.unbind(r,"mouseup",E)),n.remove(s),n.remove(l),n.remove(u),O(a),t&&(((t,e,n,i,r)=>{t.dispatch("ObjectResized",{target:e,width:n,height:i,origin:r})})(e,a,v,y,"corner-"+c.name),n.setAttrib(a,"style",n.getAttrib(a,"style"))),e.nodeChanged()},O=t=>{R();const m=n.getPos(t,o),x=m.x,w=m.y,C=t.getBoundingClientRect(),M=C.width||C.right-C.left,O=C.height||C.bottom-C.top;a!==t&&(L(),a=t,v=y=0);const D=e.dispatch("ObjectSelected",{target:t});A(t)&&!D.isDefaultPrevented()?gt(dp,((t,e)=>{let m=n.get("mceResizeHandle"+e);m&&n.remove(m),m=n.add(o,"div",{id:"mceResizeHandle"+e,"data-mce-bogus":"all",class:"mce-resizehandle",unselectable:!0,style:"cursor:"+e+"-resize; margin:0; padding:0"}),n.bind(m,"mousedown",(m=>{m.stopImmediatePropagation(),m.preventDefault(),(m=>{const v=k(a)[0];h=m.screenX,d=m.screenY,p=v.clientWidth,f=v.clientHeight,g=f/p,c=t,c.name=e,c.startPos={x:M*t[0]+x,y:O*t[1]+w},b=o.scrollWidth,_=o.scrollHeight,u=n.add(o,"div",{class:"mce-resize-backdrop","data-mce-bogus":"all"}),n.setStyles(u,{position:"fixed",left:"0",top:"0",width:"100%",height:"100%"}),s=((t,e)=>{if(S(e))return t.create("img",{src:Ee.transparentSrc});if(er(e)){const n=jt(c.name,"n")?lt:ct,i=e.cloneNode(!0);return n(t.select("tr",i)).each((e=>{const n=t.select("td,th",e);t.setStyle(e,"height",null),X(n,(e=>t.setStyle(e,"height",null)))})),i}return e.cloneNode(!0)})(n,a),n.addClass(s,"mce-clonedresizable"),n.setAttrib(s,"data-mce-bogus","all"),s.contentEditable="false",n.setStyles(s,{left:x,top:w,margin:0}),T(s,M,O),s.removeAttribute(cp),o.appendChild(s),n.bind(i,"mousemove",I),n.bind(i,"mouseup",E),r!==i&&(n.bind(r,"mousemove",I),n.bind(r,"mouseup",E)),l=n.add(o,"div",{class:"mce-resize-helper","data-mce-bogus":"all"},p+" &times; "+f)})(m)})),t.elm=m,n.setStyles(m,{left:M*t[0]+x-m.offsetWidth/2,top:O*t[1]+w-m.offsetHeight/2})})):L(!1)},D=fa(O,0),L=(t=!0)=>{D.cancel(),R(),a&&t&&a.removeAttribute(cp),gt(dp,((t,e)=>{const i=n.get("mceResizeHandle"+e);i&&(n.unbind(i),n.remove(i))}))},P=(t,e)=>n.isChildOf(t,e),N=i=>{if(m||e.removed||e.composing)return;const r="mousedown"===i.type?i.target:t.getNode(),a=ei(bn(r),"table,img,figure.image,hr,video,span.mce-preview-object,details").map((t=>t.dom)).filter((t=>n.isEditable(t.parentElement)||"IMG"===t.nodeName&&n.isEditable(t))).getOrUndefined(),s=x(a)?n.getAttrib(a,cp,"1"):"1";if(X(n.select(`img[${cp}],hr[${cp}]`),(t=>{t.removeAttribute(cp)})),x(a)&&P(a,o)&&e.hasFocus()){B();const e=t.getStart(!0);if(P(e,a)&&P(t.getEnd(!0),a))return n.setAttrib(a,cp,s),void D.throttle(a)}L()},R=()=>{gt(dp,(t=>{t.elm&&(n.unbind(t.elm),delete t.elm)}))},B=()=>{try{e.getDoc().execCommand("enableObjectResizing",!1,"false")}catch(t){}};return e.on("init",(()=>{B(),e.on("NodeChange ResizeEditor ResizeWindow ResizeContent drop",N),e.on("keyup compositionend",(t=>{a&&"TABLE"===a.nodeName&&N(t)})),e.on("hide blur",L),e.on("contextmenu longpress",C,!0)})),e.on("remove",R),{isResizable:A,showResizeRect:O,hideResizeRect:L,updateResizeRect:N,destroy:()=>{D.cancel(),a=s=u=null}}},fp=(t,e,n)=>{const i=t.document.createRange();var r;return r=i,e.fold((t=>{r.setStartBefore(t.dom)}),((t,e)=>{r.setStart(t.dom,e)}),(t=>{r.setStartAfter(t.dom)})),((t,e)=>{e.fold((e=>{t.setEndBefore(e.dom)}),((e,n)=>{t.setEnd(e.dom,n)}),(e=>{t.setEndAfter(e.dom)}))})(i,n),i},gp=(t,e,n,i,r)=>{const o=t.document.createRange();return o.setStart(e.dom,n),o.setEnd(i.dom,r),o},mp=vl([{ltr:["start","soffset","finish","foffset"]},{rtl:["start","soffset","finish","foffset"]}]),vp=(t,e,n)=>e(bn(n.startContainer),n.startOffset,bn(n.endContainer),n.endOffset);mp.ltr,mp.rtl;const yp=(t,e,n,i)=>({start:t,soffset:e,finish:n,foffset:i}),bp=document.caretPositionFromPoint?(t,e,n)=>{var i,r;return B.from(null===(r=(i=t.dom).caretPositionFromPoint)||void 0===r?void 0:r.call(i,e,n)).bind((e=>{if(null===e.offsetNode)return B.none();const n=t.dom.createRange();return n.setStart(e.offsetNode,e.offset),n.collapse(),B.some(n)}))}:document.caretRangeFromPoint?(t,e,n)=>{var i,r;return B.from(null===(r=(i=t.dom).caretRangeFromPoint)||void 0===r?void 0:r.call(i,e,n))}:B.none,xp=vl([{before:["element"]},{on:["element","offset"]},{after:["element"]}]),_p={before:xp.before,on:xp.on,after:xp.after,cata:(t,e,n,i)=>t.fold(e,n,i),getStart:t=>t.fold(T,T,T)},wp=vl([{domRange:["rng"]},{relative:["startSitu","finishSitu"]},{exact:["start","soffset","finish","foffset"]}]),Sp={domRange:wp.domRange,relative:wp.relative,exact:wp.exact,exactFromRange:t=>wp.exact(t.start,t.soffset,t.finish,t.foffset),getWin:t=>{const e=(t=>t.match({domRange:t=>bn(t.startContainer),relative:(t,e)=>_p.getStart(t),exact:(t,e,n,i)=>t}))(t);return Mn(e)},range:yp},Cp=(t,e)=>{const n=We(t);return"input"===n?_p.after(t):W(["br","img"],n)?0===e?_p.before(t):_p.after(t):_p.on(t,e)},kp=(t,e)=>{const n=t.fold(_p.before,Cp,_p.after),i=e.fold(_p.before,Cp,_p.after);return Sp.relative(n,i)},Ap=(t,e,n,i)=>{const r=Cp(t,e),o=Cp(n,i);return Sp.relative(r,o)},Mp=(t,e)=>{const n=(e||document).createDocumentFragment();return X(t,(t=>{n.appendChild(t.dom)})),bn(n)},Tp=(t,e,n)=>((t,e,n)=>((t,e,n)=>{const i=bn(t.document);return bp(i,e,n).map((t=>yp(bn(t.startContainer),t.startOffset,bn(t.endContainer),t.endOffset)))})(t,e,n))(Mn(bn(n)).dom,t,e).map((t=>{const e=n.createRange();return e.setStart(t.start.dom,t.soffset),e.setEnd(t.finish.dom,t.foffset),e})).getOrUndefined(),Ip=(t,e)=>x(t)&&x(e)&&t.startContainer===e.startContainer&&t.startOffset===e.startOffset&&t.endContainer===e.endContainer&&t.endOffset===e.endOffset,Ep=(t,e,n)=>null!==((t,e,n)=>{let i=t;for(;i&&i!==e;){if(n(i))return i;i=i.parentNode}return null})(t,e,n),Op=(t,e,n)=>Ep(t,e,(t=>t.nodeName===n)),Dp=(t,e)=>Ja(t)&&!Ep(t,e,Bh),Lp=(t,e,n)=>{const i=e.parentNode;if(i){const r=new Fi(e,t.getParent(i,t.isBlock)||t.getRoot());let o;for(;o=r[n?"prev":"next"]();)if(ur(o))return!0}return!1},Pp=(t,e,n,i,r)=>{const o=t.getRoot(),a=t.schema.getNonEmptyElements(),s=r.parentNode;let l,c;if(!s)return B.none();const u=t.getParent(s,t.isBlock)||o;if(i&&ur(r)&&e&&t.isEmpty(u))return B.some(Gs(s,t.nodeIndex(r)));const h=new Fi(r,u);for(;c=h[i?"prev":"next"]();){if("false"===t.getContentEditableParent(c)||Dp(c,o))return B.none();if(rr(c)&&c.data.length>0)return Op(c,o,"A")?B.none():B.some(Gs(c,i?c.data.length:0));if(t.isBlock(c)||a[c.nodeName.toLowerCase()])return B.none();l=c}return sr(l)?B.none():n&&l?B.some(Gs(l,0)):B.none()},Np=(t,e,n,i)=>{const r=t.getRoot();let o,a=!1,s=n?i.startContainer:i.endContainer,l=n?i.startOffset:i.endOffset;const c=$i(s)&&l===s.childNodes.length,u=t.schema.getNonEmptyElements();let h=n;if(Ja(s))return B.none();if($i(s)&&l>s.childNodes.length-1&&(h=!1),lr(s)&&(s=r,l=0),s===r){if(h&&(o=s.childNodes[l>0?l-1:0],o)){if(Ja(o))return B.none();if(u[o.nodeName]||er(o))return B.none()}if(s.hasChildNodes()){if(l=Math.min(!h&&l>0?l-1:l,s.childNodes.length-1),s=s.childNodes[l],l=rr(s)&&c?s.data.length:0,!e&&s===r.lastChild&&er(s))return B.none();if(((t,e)=>{let n=e;for(;n&&n!==t;){if(pr(n))return!0;n=n.parentNode}return!1})(r,s)||Ja(s))return B.none();if(yr(s))return B.none();if(s.hasChildNodes()&&!er(s)){o=s;const e=new Fi(s,r);do{if(pr(o)||Ja(o)){a=!1;break}if(rr(o)&&o.data.length>0){l=h?0:o.data.length,s=o,a=!0;break}if(u[o.nodeName.toLowerCase()]&&!gr(o)){l=t.nodeIndex(o),s=o.parentNode,h||l++,a=!0;break}}while(o=h?e.next():e.prev())}}}return e&&(rr(s)&&0===l&&Pp(t,c,e,!0,s).each((t=>{s=t.container(),l=t.offset(),a=!0})),$i(s)&&(o=s.childNodes[l],o||(o=s.childNodes[l-1]),!o||!ur(o)||((t,e)=>{var n;return"A"===(null===(n=t.previousSibling)||void 0===n?void 0:n.nodeName)})(o)||Lp(t,o,!1)||Lp(t,o,!0)||Pp(t,c,e,!0,o).each((t=>{s=t.container(),l=t.offset(),a=!0})))),h&&!e&&rr(s)&&l===s.data.length&&Pp(t,c,e,!1,s).each((t=>{s=t.container(),l=t.offset(),a=!0})),a&&s?B.some(Gs(s,l)):B.none()},Rp=(t,e)=>{const n=e.collapsed,i=e.cloneRange(),r=Gs.fromRangeStart(e);return Np(t,n,!0,i).each((t=>{n&&Gs.isAbove(r,t)||i.setStart(t.container(),t.offset())})),n||Np(t,n,!1,i).each((t=>{i.setEnd(t.container(),t.offset())})),n&&i.collapse(!0),Ip(e,i)?B.none():B.some(i)},Bp=(t,e)=>t.splitText(e),zp=t=>{let e=t.startContainer,n=t.startOffset,i=t.endContainer,r=t.endOffset;if(e===i&&rr(e)){if(n>0&&n<e.data.length)if(i=Bp(e,n),e=i.previousSibling,r>n){r-=n;const t=Bp(i,r).previousSibling;e=i=t,r=t.data.length,n=0}else r=0}else if(rr(e)&&n>0&&n<e.data.length&&(e=Bp(e,n),n=0),rr(i)&&r>0&&r<i.data.length){const t=Bp(i,r).previousSibling;i=t,r=t.data.length}return{startContainer:e,startOffset:n,endContainer:i,endOffset:r}},Fp=t=>({walk:(e,n)=>Ud(t,e,n),split:zp,expand:(e,n={type:"word"})=>{if("word"===n.type){const n=qd(t,e,[{inline:"span"}]),i=t.createRng();return i.setStart(n.startContainer,n.startOffset),i.setEnd(n.endContainer,n.endOffset),i}return e},normalize:e=>Rp(t,e).fold(N,(t=>(e.setStart(t.startContainer,t.startOffset),e.setEnd(t.endContainer,t.endOffset),!0)))});Fp.compareRanges=Ip,Fp.getCaretRangeFromPoint=Tp,Fp.getSelectedNode=fs,Fp.getNode=gs;const Vp=((t,e)=>{const n=e=>{const n=(t=>{const e=t.dom;return Un(t)?e.getBoundingClientRect().height:e.offsetHeight})(e);if(n<=0||null===n){const n=li(e,t);return parseFloat(n)||0}return n},i=(t,e)=>Z(e,((e,n)=>{const i=li(t,n),r=void 0===i?0:parseInt(i,10);return isNaN(r)?e:e+r}),0);return{set:(e,n)=>{if(!w(n)&&!n.match(/^[0-9]+$/))throw new Error(t+".set accepts only positive integer values. Value was "+n);const i=e.dom;ri(i)&&(i.style[t]=n+"px")},get:n,getOuter:n,aggregate:i,max:(t,e,n)=>{const r=i(t,n);return e>r?e-r:0}}})("height"),Hp=()=>bn(document),Wp=(t,e)=>t.view(e).fold(M([]),(e=>{const n=t.owner(e),i=Wp(t,n);return[e].concat(i)}));var jp=Object.freeze({__proto__:null,view:t=>{var e;return(t.dom===document?B.none():B.from(null===(e=t.dom.defaultView)||void 0===e?void 0:e.frameElement)).map(bn)},owner:t=>An(t)});const Yp=t=>"textarea"===We(t),Xp=(t,e)=>{const n=(t=>{const e=t.dom.ownerDocument,n=e.body,i=e.defaultView,r=e.documentElement;if(n===t.dom)return Mi(n.offsetLeft,n.offsetTop);const o=Ti(null==i?void 0:i.pageYOffset,r.scrollTop),a=Ti(null==i?void 0:i.pageXOffset,r.scrollLeft),s=Ti(r.clientTop,n.clientTop),l=Ti(r.clientLeft,n.clientLeft);return Ii(t).translate(a-l,o-s)})(t),i=(t=>Vp.get(t))(t);return{element:t,bottom:n.top+i,height:i,pos:n,cleanup:e}},Gp=(t,e,n,i)=>{Zp(t,((r,o)=>Up(t,e,n,i)),n)},qp=(t,e,n,i,r)=>{const o={elm:i.element.dom,alignToTop:r};((t,e)=>t.dispatch("ScrollIntoView",e).isDefaultPrevented())(t,o)||(n(t,e,Ei(e).top,i,r),((t,e)=>{t.dispatch("AfterScrollIntoView",e)})(t,o))},Up=(t,e,n,i)=>{const r=bn(t.getBody()),o=bn(t.getDoc());r.dom.offsetWidth;const a=((t,e)=>{const n=((t,e)=>{const n=Nn(t);if(0===n.length||Yp(t))return{element:t,offset:e};if(e<n.length&&!Yp(n[e]))return{element:n[e],offset:0};{const i=n[n.length-1];return Yp(i)?{element:t,offset:e}:"img"===We(i)?{element:i,offset:1}:qe(i)?{element:i,offset:Na(i).length}:{element:i,offset:Nn(i).length}}})(t,e),i=mn('<span data-mce-bogus="all" style="display: inline-block;">\ufeff</span>');return pi(n.element,i),Xp(i,(()=>xi(i)))})(bn(n.startContainer),n.startOffset);qp(t,o,e,a,i),a.cleanup()},$p=(t,e,n,i)=>{const r=bn(t.getDoc());qp(t,r,n,(t=>Xp(bn(t),C))(e),i)},Zp=(t,e,n)=>{const i=n.startContainer,r=n.startOffset,o=n.endContainer,a=n.endOffset;e(bn(i),bn(o));const s=t.dom.createRng();s.setStart(i,r),s.setEnd(o,a),t.selection.setRng(n)},Kp=(t,e,n,i,r)=>{const o=e.pos;if(i)Oi(o.left,o.top,r);else{const i=o.top-n+e.height;Oi(-t.getBody().getBoundingClientRect().left,i,r)}},Qp=(t,e,n,i,r,o)=>{const a=i+n,s=r.pos.top,l=r.bottom,c=l-s>=i;s<n?Kp(t,r,i,!1!==o,e):s>a?Kp(t,r,i,c?!1!==o:!0===o,e):l>a&&!c&&Kp(t,r,i,!0===o,e)},Jp=(t,e,n,i,r)=>{const o=Mn(e).dom.innerHeight;Qp(t,e,n,o,i,r)},tf=(t,e,n,i,r)=>{const o=Mn(e).dom.innerHeight;Qp(t,e,n,o,i,r);const a=(t=>{const e=Hp(),n=Ei(e),i=((t,e)=>{const n=e.owner(t);return Wp(e,n)})(t,jp),r=Ii(t),o=$(i,((t,e)=>{const n=Ii(e);return{left:t.left+n.left,top:t.top+n.top}}),{left:0,top:0});return Mi(o.left+r.left+n.left,o.top+r.top+n.top)})(i.element),s=Pi(window);a.top<s.y?Di(i.element,!1!==r):a.top>s.bottom&&Di(i.element,!0===r)},ef=(t,e,n)=>Gp(t,Jp,e,n),nf=(t,e,n)=>$p(t,e,Jp,n),rf=(t,e,n)=>Gp(t,tf,e,n),of=(t,e,n)=>$p(t,e,tf,n),af=(t,e,n)=>{(t.inline?ef:rf)(t,e,n)},sf=(t,e=!1)=>t.dom.focus({preventScroll:e}),lf=t=>{const e=jn(t).dom;return t.dom===e.activeElement},cf=(t=Hp())=>B.from(t.dom.activeElement).map(bn),uf=(t,e)=>{const n=qe(e)?Na(e).length:Nn(e).length+1;return t>n?n:t<0?0:t},hf=t=>Sp.range(t.start,uf(t.soffset,t.start),t.finish,uf(t.foffset,t.finish)),df=(t,e)=>!Ui(e.dom)&&(Cn(t,e)||Sn(t,e)),pf=t=>e=>df(t,e.start)&&df(t,e.finish),ff=t=>Sp.range(bn(t.startContainer),t.startOffset,bn(t.endContainer),t.endOffset),gf=t=>{const e=document.createRange();try{return e.setStart(t.start.dom,t.soffset),e.setEnd(t.finish.dom,t.foffset),B.some(e)}catch(t){return B.none()}},mf=t=>{const e=(t=>t.inline||Ee.browser.isFirefox())(t)?(n=bn(t.getBody()),(t=>{const e=t.getSelection();return(e&&0!==e.rangeCount?B.from(e.getRangeAt(0)):B.none()).map(ff)})(Mn(n).dom).filter(pf(n))):B.none();var n;t.bookmark=e.isSome()?e:t.bookmark},vf=t=>(t.bookmark?t.bookmark:B.none()).bind((e=>{return n=bn(t.getBody()),i=e,B.from(i).filter(pf(n)).map(hf);var n,i})).bind(gf),yf={isEditorUIElement:t=>{const e=t.className.toString();return-1!==e.indexOf("tox-")||-1!==e.indexOf("mce-")}},bf={setEditorTimeout:(t,e,n)=>((t,e)=>(w(e)||(e=0),setTimeout(t,e)))((()=>{t.removed||e()}),n),setEditorInterval:(t,e,n)=>{const i=((t,e)=>(w(e)||(e=0),setInterval(t,e)))((()=>{t.removed?clearInterval(i):e()}),n);return i}};let xf;const _f=ia.DOM,wf=t=>{const e=t.classList;return void 0!==e&&(e.contains("tox-edit-area")||e.contains("tox-edit-area__iframe")||e.contains("mce-content-body"))},Sf=(t,e)=>{const n=Ac(t),i=_f.getParent(e,(e=>(t=>$i(t)&&yf.isEditorUIElement(t))(e)||!!n&&t.dom.is(e,n)));return null!==i},Cf=t=>{try{const e=jn(bn(t.getElement()));return cf(e).fold((()=>document.body),(t=>t.dom))}catch(t){return document.body}},kf=(t,e)=>{const n=e.editor;(t=>{const e=fa((()=>{mf(t)}),0);t.on("init",(()=>{t.inline&&((t,e)=>{const n=()=>{e.throttle()};ia.DOM.bind(document,"mouseup",n),t.on("remove",(()=>{ia.DOM.unbind(document,"mouseup",n)}))})(t,e),((t,e)=>{((t,e)=>{t.on("mouseup touchend",(t=>{e.throttle()}))})(t,e),t.on("keyup NodeChange AfterSetSelectionRange",(e=>{(t=>"nodechange"===t.type&&t.selectionChange)(e)||mf(t)}))})(t,e)})),t.on("remove",(()=>{e.cancel()}))})(n);const i=(t,e)=>{fu(t)&&!0!==t.inline&&e(bn(t.getContainer()),"tox-edit-focus")};n.on("focusin",(()=>{const e=t.focusedEditor;wf(Cf(n))&&i(n,hn),e!==n&&(e&&e.dispatch("blur",{focusedEditor:n}),t.setActive(n),t.focusedEditor=n,n.dispatch("focus",{blurredEditor:e}),n.focus(!0))})),n.on("focusout",(()=>{bf.setEditorTimeout(n,(()=>{const e=t.focusedEditor;wf(Cf(n))&&e===n||i(n,pn),Sf(n,Cf(n))||e!==n||(n.dispatch("blur",{focusedEditor:null}),t.focusedEditor=null)}))})),xf||(xf=e=>{const n=t.activeEditor;n&&Gn(e).each((e=>{const i=e;i.ownerDocument===document&&(i===document.body||Sf(n,i)||t.focusedEditor!==n||(n.dispatch("blur",{focusedEditor:null}),t.focusedEditor=null))}))},_f.bind(document,"focusin",xf))},Af=(t,e)=>{t.focusedEditor===e.editor&&(t.focusedEditor=null),!t.activeEditor&&xf&&(_f.unbind(document,"focusin",xf),xf=null)},Mf=(t,e)=>{((t,e)=>(t=>t.collapsed?B.from(gs(t.startContainer,t.startOffset)).map(bn):B.none())(e).bind((e=>Ha(e)?B.some(e):Cn(t,e)?B.none():B.some(t))))(bn(t.getBody()),e).bind((t=>Ph(t.dom))).fold((()=>{t.selection.normalize()}),(e=>t.selection.setRng(e.toRange())))},Tf=t=>{if(t.setActive)try{t.setActive()}catch(e){t.focus()}else t.focus()},If=t=>t.inline?(t=>{const e=t.getBody();return e&&(n=bn(e),lf(n)||(i=n,cf(jn(i)).filter((t=>i.dom.contains(t.dom)))).isSome());var n,i})(t):(t=>x(t.iframeElement)&&lf(bn(t.iframeElement)))(t),Ef=t=>If(t)||(t=>{const e=jn(bn(t.getElement()));return cf(e).filter((e=>!wf(e.dom)&&Sf(t,e.dom))).isSome()})(t),Of=t=>t.editorManager.setActive(t),Df=(t,e)=>e.collapsed?t.isEditable(e.startContainer):t.isEditable(e.startContainer)&&t.isEditable(e.endContainer),Lf=(t,e,n,i,r)=>{const o=n?e.startContainer:e.endContainer,a=n?e.startOffset:e.endOffset;return B.from(o).map(bn).map((t=>i&&e.collapsed?t:Rn(t,r(t,a)).getOr(t))).bind((t=>Ge(t)?B.some(t):Tn(t).filter(Ge))).map((t=>t.dom)).getOr(t)},Pf=(t,e,n=!1)=>Lf(t,e,!0,n,((t,e)=>Math.min(Fn(t),e))),Nf=(t,e,n=!1)=>Lf(t,e,!1,n,((t,e)=>e>0?e-1:e)),Rf=(t,e)=>{const n=t;for(;t&&rr(t)&&0===t.length;)t=e?t.nextSibling:t.previousSibling;return t||n},Bf=(t,e)=>Y(e,(e=>{const n=t.dispatch("GetSelectionRange",{range:e});return n.range!==e?n.range:e})),zf={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11},Ff=(t,e,n)=>{const i=n?"lastChild":"firstChild",r=n?"prev":"next";if(t[i])return t[i];if(t!==e){let n=t[r];if(n)return n;for(let i=t.parent;i&&i!==e;i=i.parent)if(n=i[r],n)return n}},Vf=t=>{var e;const n=null!==(e=t.value)&&void 0!==e?e:"";if(!Yi(n))return!1;const i=t.parent;return!i||"span"===i.name&&!i.attr("style")||!/^[ ]+$/.test(n)},Hf=t=>{const e="a"===t.name&&!t.attr("href")&&t.attr("id");return t.attr("name")||t.attr("id")&&!t.firstChild||t.attr("data-mce-bookmark")||e};class Wf{static create(t,e){const n=new Wf(t,zf[t]||1);return e&&gt(e,((t,e)=>{n.attr(e,t)})),n}constructor(t,e){this.name=t,this.type=e,1===e&&(this.attributes=[],this.attributes.map={})}replace(t){const e=this;return t.parent&&t.remove(),e.insert(t,e),e.remove(),e}attr(t,e){const n=this;if(!d(t))return x(t)&&gt(t,((t,e)=>{n.attr(e,t)})),n;const i=n.attributes;if(i){if(void 0!==e){if(null===e){if(t in i.map){delete i.map[t];let e=i.length;for(;e--;)if(i[e].name===t)return i.splice(e,1),n}return n}if(t in i.map){let n=i.length;for(;n--;)if(i[n].name===t){i[n].value=e;break}}else i.push({name:t,value:e});return i.map[t]=e,n}return i.map[t]}}clone(){const t=this,e=new Wf(t.name,t.type),n=t.attributes;if(n){const t=[];t.map={};for(let e=0,i=n.length;e<i;e++){const i=n[e];"id"!==i.name&&(t[t.length]={name:i.name,value:i.value},t.map[i.name]=i.value)}e.attributes=t}return e.value=t.value,e}wrap(t){const e=this;return e.parent&&(e.parent.insert(t,e),t.append(e)),e}unwrap(){const t=this;for(let e=t.firstChild;e;){const n=e.next;t.insert(e,t,!0),e=n}t.remove()}remove(){const t=this,e=t.parent,n=t.next,i=t.prev;return e&&(e.firstChild===t?(e.firstChild=n,n&&(n.prev=null)):i&&(i.next=n),e.lastChild===t?(e.lastChild=i,i&&(i.next=null)):n&&(n.prev=i),t.parent=t.next=t.prev=null),t}append(t){const e=this;t.parent&&t.remove();const n=e.lastChild;return n?(n.next=t,t.prev=n,e.lastChild=t):e.lastChild=e.firstChild=t,t.parent=e,t}insert(t,e,n){t.parent&&t.remove();const i=e.parent||this;return n?(e===i.firstChild?i.firstChild=t:e.prev&&(e.prev.next=t),t.prev=e.prev,t.next=e,e.prev=t):(e===i.lastChild?i.lastChild=t:e.next&&(e.next.prev=t),t.next=e.next,t.prev=e,e.next=t),t.parent=i,t}getAll(t){const e=this,n=[];for(let i=e.firstChild;i;i=Ff(i,e))i.name===t&&n.push(i);return n}children(){const t=[];for(let e=this.firstChild;e;e=e.next)t.push(e);return t}empty(){const t=this;if(t.firstChild){const e=[];for(let n=t.firstChild;n;n=Ff(n,t))e.push(n);let n=e.length;for(;n--;){const t=e[n];t.parent=t.firstChild=t.lastChild=t.next=t.prev=null}}return t.firstChild=t.lastChild=null,t}isEmpty(t,e={},n){var i;const r=this;let o=r.firstChild;if(Hf(r))return!1;if(o)do{if(1===o.type){if(o.attr("data-mce-bogus"))continue;if(t[o.name])return!1;if(Hf(o))return!1}if(8===o.type)return!1;if(3===o.type&&!Vf(o))return!1;if(3===o.type&&o.parent&&e[o.parent.name]&&Yi(null!==(i=o.value)&&void 0!==i?i:""))return!1;if(n&&n(o))return!1}while(o=Ff(o,r));return!0}walk(t){return Ff(this,null,t)}}const jf=Pe.makeMap("NOSCRIPT STYLE SCRIPT XMP IFRAME NOEMBED NOFRAMES PLAINTEXT"," "),Yf=t=>d(t.nodeValue)&&t.nodeValue.includes(Ga),Xf=t=>(0===t.length?"":`${Y(t,(t=>`[${t}]`)).join(",")},`)+'[data-mce-bogus="all"]',Gf=t=>document.createTreeWalker(t,NodeFilter.SHOW_COMMENT,(t=>Yf(t)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP)),qf=t=>document.createTreeWalker(t,NodeFilter.SHOW_TEXT,(t=>{if(Yf(t)){const e=t.parentNode;return e&&Ct(jf,e.nodeName)?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}return NodeFilter.FILTER_SKIP})),Uf=t=>null!==Gf(t).nextNode(),$f=t=>null!==qf(t).nextNode(),Zf=(t,e)=>null!==e.querySelector(Xf(t)),Kf=(t,e)=>{X(((t,e)=>e.querySelectorAll(Xf(t)))(t,e),(e=>{const n=bn(e);"all"===tn(n,"data-mce-bogus")?xi(n):X(t,(t=>{nn(n,t)&&rn(n,t)}))}))},Qf=t=>{let e=t.nextNode();for(;null!==e;)e.nodeValue=null,e=t.nextNode()},Jf=k(Qf,Gf),tg=k(Qf,qf),eg=(t,e)=>{const n=[{condition:E(Zf,e),action:E(Kf,e)},{condition:Uf,action:Jf},{condition:$f,action:tg}];let i=t,r=!1;return X(n,(({condition:e,action:n})=>{e(i)&&(r||(i=t.cloneNode(!0),r=!0),n(i))})),i},ng=t=>{const e=Ri(t,"[data-mce-bogus]");X(e,(t=>{"all"===tn(t,"data-mce-bogus")?xi(t):Ba(t)?(pi(t,yn(Vi)),xi(t)):_i(t)}))},ig=t=>{const e=Ri(t,"input");X(e,(t=>{rn(t,"name")}))},rg=Pe.makeMap,og=t=>{const e=[],n=(t=t||{}).indent,i=rg(t.indent_before||""),r=rg(t.indent_after||""),o=uo.getEncodeFunc(t.entity_encoding||"raw",t.entities),a="xhtml"!==t.element_format;return{start:(t,s,l)=>{if(n&&i[t]&&e.length>0){const t=e[e.length-1];t.length>0&&"\n"!==t&&e.push("\n")}if(e.push("<",t),s)for(let t=0,n=s.length;t<n;t++){const n=s[t];e.push(" ",n.name,'="',o(n.value,!0),'"')}if(e[e.length]=!l||a?">":" />",l&&n&&r[t]&&e.length>0){const t=e[e.length-1];t.length>0&&"\n"!==t&&e.push("\n")}},end:t=>{let i;e.push("</",t,">"),n&&r[t]&&e.length>0&&(i=e[e.length-1],i.length>0&&"\n"!==i&&e.push("\n"))},text:(t,n)=>{t.length>0&&(e[e.length]=n?t:o(t))},cdata:t=>{e.push("<![CDATA[",t,"]]>")},comment:t=>{e.push("\x3c!--",t,"--\x3e")},pi:(t,i)=>{i?e.push("<?",t," ",o(i),"?>"):e.push("<?",t,"?>"),n&&e.push("\n")},doctype:t=>{e.push("<!DOCTYPE",t,">",n?"\n":"")},reset:()=>{e.length=0},getContent:()=>e.join("").replace(/\n$/,"")}},ag=(t={},e=To())=>{const n=og(t);return t.validate=!("validate"in t)||t.validate,{serialize:i=>{const r=t.validate,o={3:t=>{var e;n.text(null!==(e=t.value)&&void 0!==e?e:"",t.raw)},8:t=>{var e;n.comment(null!==(e=t.value)&&void 0!==e?e:"")},7:t=>{n.pi(t.name,t.value)},10:t=>{var e;n.doctype(null!==(e=t.value)&&void 0!==e?e:"")},4:t=>{var e;n.cdata(null!==(e=t.value)&&void 0!==e?e:"")},11:t=>{let e=t;if(e=e.firstChild)do{a(e)}while(e=e.next)}};n.reset();const a=t=>{var i;const s=o[t.type];if(s)s(t);else{const o=t.name,s=o in e.getVoidElements();let l=t.attributes;if(r&&l&&l.length>1){const n=[];n.map={};const i=e.getElementRule(t.name);if(i){for(let t=0,e=i.attributesOrder.length;t<e;t++){const e=i.attributesOrder[t];if(e in l.map){const t=l.map[e];n.map[e]=t,n.push({name:e,value:t})}}for(let t=0,e=l.length;t<e;t++){const e=l[t].name;if(!(e in n.map)){const t=l.map[e];n.map[e]=t,n.push({name:e,value:t})}}l=n}}if(n.start(o,l,s),Ar(o))d(t.value)&&n.text(t.value,!0),n.end(o);else if(!s){let e=t.firstChild;if(e){"pre"!==o&&"textarea"!==o||3!==e.type||"\n"!==(null===(i=e.value)||void 0===i?void 0:i[0])||n.text("\n",!0);do{a(e)}while(e=e.next)}n.end(o)}}};return 1!==i.type||t.inner?3===i.type?o[3](i):o[11](i):a(i),n.getContent()}}},sg=new Set;X(["margin","margin-left","margin-right","margin-top","margin-bottom","padding","padding-left","padding-right","padding-top","padding-bottom","border","border-width","border-style","border-color","background","background-attachment","background-clip","background-color","background-image","background-origin","background-position","background-repeat","background-size","float","position","left","right","top","bottom","z-index","display","transform","width","max-width","min-width","height","max-height","min-height","overflow","overflow-x","overflow-y","text-overflow","vertical-align","transition","transition-delay","transition-duration","transition-property","transition-timing-function"],(t=>{sg.add(t)}));const lg=["font","text-decoration","text-emphasis"],cg=(t,e)=>pt(t.parseStyle(t.getAttrib(e,"style"))),ug=(t,e,n)=>{const i=cg(t,e),r=cg(t,n),o=i=>{var r,o;const a=null!==(r=t.getStyle(e,i))&&void 0!==r?r:"",s=null!==(o=t.getStyle(n,i))&&void 0!==o?o:"";return $t(a)&&$t(s)&&a!==s};return j(i,(t=>{const e=e=>j(e,(e=>e===t));if(!e(r)&&e(lg)){const t=U(r,(t=>j(lg,(e=>jt(t,e)))));return j(t,o)}return o(t)}))},hg=(t,e,n)=>B.from(n.container()).filter(rr).exists((i=>{const r=t?0:-1;return e(i.data.charAt(n.offset()+r))})),dg=E(hg,!0,Qh),pg=E(hg,!1,Qh),fg=t=>{const e=t.container();return rr(e)&&(0===e.data.length||qa(e.data)&&Jd.isBookmarkNode(e.parentNode))},gg=(t,e)=>n=>eh(t?0:-1,n).filter(e).isSome(),mg=t=>hr(t)&&"block"===li(bn(t),"display"),vg=t=>pr(t)&&!(t=>$i(t)&&"all"===t.getAttribute("data-mce-bogus"))(t),yg=gg(!0,mg),bg=gg(!1,mg),xg=gg(!0,mr),_g=gg(!1,mr),wg=gg(!0,er),Sg=gg(!1,er),Cg=gg(!0,vg),kg=gg(!1,vg),Ag=(t,e)=>((t,e,n)=>Cn(e,t)?En(t,(t=>n(t)||Sn(t,e))).slice(0,-1):[])(t,e,N),Mg=(t,e)=>[t].concat(Ag(t,e)),Tg=(t,e,n)=>Eh(t,e,n,fg),Ig=(t,e,n)=>Q(Mg(bn(e.container()),t),(t=>e=>t.isBlock(We(e)))(n)),Eg=(t,e,n,i)=>Tg(t,e.dom,n).forall((t=>Ig(e,n,i).fold((()=>!th(t,n,e.dom)),(i=>!th(t,n,e.dom)&&Cn(i,bn(t.container())))))),Og=(t,e,n,i)=>Ig(e,n,i).fold((()=>Tg(t,e.dom,n).forall((t=>!th(t,n,e.dom)))),(e=>Tg(t,e.dom,n).isNone())),Dg=E(Og,!1),Lg=E(Og,!0),Pg=E(Eg,!1),Ng=E(Eg,!0),Rg=t=>uh(t).exists(Ba),Bg=(t,e,n,i)=>{const r=U(Mg(bn(n.container()),e),(t=>i.isBlock(We(t)))),o=lt(r).getOr(e);return Th(t,o.dom,n).filter(Rg)},zg=(t,e,n)=>uh(e).exists(Ba)||Bg(!0,t,e,n).isSome(),Fg=(t,e,n)=>(t=>B.from(t.getNode(!0)).map(bn))(e).exists(Ba)||Bg(!1,t,e,n).isSome(),Vg=E(Bg,!1),Hg=E(Bg,!0),Wg=t=>Gs.isTextPosition(t)&&!t.isAtStart()&&!t.isAtEnd(),jg=(t,e,n)=>{const i=U(Mg(bn(e.container()),t),(t=>n.isBlock(We(t))));return lt(i).getOr(t)},Yg=(t,e,n)=>Wg(e)?pg(e):pg(e)||Lh(jg(t,e,n).dom,e).exists(pg),Xg=(t,e,n)=>Wg(e)?dg(e):dg(e)||Dh(jg(t,e,n).dom,e).exists(dg),Gg=t=>uh(t).bind((t=>Kn(t,Ge))).exists((t=>(t=>W(["pre","pre-wrap"],t))(li(t,"white-space")))),qg=(t,e)=>n=>{return i=new Fi(n,t)[e](),x(i)&&pr(i)&&ju(i);var i},Ug=(t,e,n)=>!Gg(e)&&(((t,e,n)=>((t,e)=>Lh(t.dom,e).isNone())(t,e)||((t,e)=>Dh(t.dom,e).isNone())(t,e)||Dg(t,e,n)||Lg(t,e,n)||Fg(t,e,n)||zg(t,e,n))(t,e,n)||Yg(t,e,n)||Xg(t,e,n)),$g=(t,e,n)=>!Gg(e)&&(Dg(t,e,n)||Pg(t,e,n)||Fg(t,e,n)||Yg(t,e,n)||((t,e)=>{const n=Lh(t.dom,e).getOr(e),i=qg(t.dom,"prev");return e.isAtStart()&&(i(e.container())||i(n.container()))})(t,e)),Zg=(t,e,n)=>!Gg(e)&&(Lg(t,e,n)||Ng(t,e,n)||zg(t,e,n)||Xg(t,e,n)||((t,e)=>{const n=Dh(t.dom,e).getOr(e),i=qg(t.dom,"next");return e.isAtEnd()&&(i(e.container())||i(n.container()))})(t,e)),Kg=(t,e,n)=>$g(t,e,n)||Zg(t,(t=>{const e=t.container(),n=t.offset();return rr(e)&&n<e.data.length?Gs(e,n+1):t})(e),n),Qg=(t,e)=>Kh(t.charAt(e)),Jg=(t,e)=>Qh(t.charAt(e)),tm=(t,e,n,i)=>{const r=e.data,o=Gs(e,0);return n||!Qg(r,0)||Kg(t,o,i)?!!(n&&Jg(r,0)&&$g(t,o,i))&&(e.data=Hi+r.slice(1),!0):(e.data=" "+r.slice(1),!0)},em=(t,e,n,i)=>{const r=e.data,o=Gs(e,r.length-1);return n||!Qg(r,r.length-1)||Kg(t,o,i)?!!(n&&Jg(r,r.length-1)&&Zg(t,o,i))&&(e.data=r.slice(0,-1)+Hi,!0):(e.data=r.slice(0,-1)+" ",!0)},nm=(t,e,n,i)=>{if(0===n)return;const r=bn(t),o=Zn(r,(t=>i.isBlock(We(t)))).getOr(r),a=t.data.slice(e,e+n),s=e+n>=t.data.length&&Zg(o,Gs(t,t.data.length),i),l=0===e&&$g(o,Gs(t,0),i);t.replaceData(e,n,Gi(a,4,l,s))},im=(t,e,n)=>{const i=t.data.slice(e),r=i.length-qt(i).length;nm(t,e,r,n)},rm=(t,e,n)=>{const i=t.data.slice(0,e),r=i.length-Ut(i).length;nm(t,e-r,r,n)},om=(t,e,n,i,r=!0)=>{const o=Ut(t.data).length,a=r?t:e,s=r?e:t;return r?a.appendData(s.data):a.insertData(0,s.data),xi(bn(s)),i&&im(a,o,n),a},am=(t,e)=>((t,e)=>{const n=t.container(),i=t.offset();return!Gs.isTextPosition(t)&&n===e.parentNode&&i>Gs.before(e).offset()})(e,t)?Gs(e.container(),e.offset()-1):e,sm=t=>{return As(t.previousSibling)?B.some((e=t.previousSibling,rr(e)?Gs(e,e.data.length):Gs.after(e))):t.previousSibling?Nh(t.previousSibling):B.none();var e},lm=t=>{return As(t.nextSibling)?B.some((e=t.nextSibling,rr(e)?Gs(e,0):Gs.before(e))):t.nextSibling?Ph(t.nextSibling):B.none();var e},cm=(t,e,n)=>{n.fold((()=>{t.focus()}),(n=>{t.selection.setRng(n.toRange(),e)}))},um=(t,e)=>e&&Ct(t.schema.getBlockElements(),We(e)),hm=(t,e,n,i=!0,r=!1)=>{const o=((t,e,n)=>((t,e,n)=>t?((t,e)=>lm(e).orThunk((()=>sm(e))).orThunk((()=>((t,e)=>Dh(t,Gs.after(e)).orThunk((()=>Lh(t,Gs.before(e)))))(t,e))))(e,n):((t,e)=>sm(e).orThunk((()=>lm(e))).orThunk((()=>((t,e)=>B.from(e.previousSibling?e.previousSibling:e.parentNode).bind((e=>Lh(t,Gs.before(e)))).orThunk((()=>Dh(t,Gs.after(e)))))(t,e))))(e,n))(t,e,n).map(E(am,n)))(e,t.getBody(),n.dom),a=Zn(n,E(um,t),(s=t.getBody(),t=>t.dom===s));var s;const l=((t,e,n,i)=>{const r=On(t).filter(qe),o=Dn(t).filter(qe);return xi(t),(a=r,s=o,l=e,c=(t,e,r)=>{const o=t.dom,a=e.dom,s=o.data.length;return om(o,a,n,i),r.container()===a?Gs(o,s):r},a.isSome()&&s.isSome()&&l.isSome()?B.some(c(a.getOrDie(),s.getOrDie(),l.getOrDie())):B.none()).orThunk((()=>(i&&(r.each((t=>rm(t.dom,t.dom.length,n))),o.each((t=>im(t.dom,0,n)))),e)));var a,s,l,c})(n,o,t.schema,((t,e)=>Ct(t.schema.getTextInlineElements(),We(e)))(t,n));t.dom.isEmpty(t.getBody())?(t.setContent(""),t.selection.setCursorLocation()):a.bind((e=>((t,e,n)=>{if(Cr(t,e)){const t=mn('<br data-mce-bogus="1">');return n?X(Nn(e),(t=>{Dd(t)||xi(t)})):bi(e),mi(e,t),B.some(Gs.before(t.dom))}return B.none()})(t.schema,e,r))).fold((()=>{i&&cm(t,e,l)}),(n=>{i&&cm(t,e,B.some(n))}))},dm=/[\u0591-\u07FF\uFB1D-\uFDFF\uFE70-\uFEFC]/,pm=(t,e)=>_n(bn(e),hc(t))&&!Vr(t.schema,e)&&t.dom.isEditable(e),fm=t=>{var e;return"rtl"===ia.DOM.getStyle(t,"direction",!0)||(t=>dm.test(t))(null!==(e=t.textContent)&&void 0!==e?e:"")},gm=(t,e,n)=>{const i=((t,e,n)=>U(ia.DOM.getParents(n.container(),"*",e),t))(t,e,n);return B.from(i[i.length-1])},mm=(t,e)=>{const n=e.container(),i=e.offset();return t?Qa(n)?rr(n.nextSibling)?Gs(n.nextSibling,0):Gs.after(n):es(e)?Gs(n,i+1):e:Qa(n)?rr(n.previousSibling)?Gs(n.previousSibling,n.previousSibling.data.length):Gs.before(n):ns(e)?Gs(n,i-1):e},vm=E(mm,!0),ym=E(mm,!1),bm=(t,e)=>{const n=t=>t.stopImmediatePropagation();t.on("beforeinput input",n,!0),t.getDoc().execCommand(e),t.off("beforeinput input",n)},xm=t=>bm(t,"Delete"),_m=t=>za(t)||Va(t),wm=(t,e)=>Cn(t,e)?Kn(e,_m,(t=>e=>Ne(Tn(e),t,Sn))(t)):B.none(),Sm=(t,e=!0)=>{t.dom.isEmpty(t.getBody())&&t.setContent("",{no_selection:!e})},Cm=(t,e,n)=>Be(Ph(n),Nh(n),((i,r)=>{const o=mm(!0,i),a=mm(!1,r),s=mm(!1,e);return t?Dh(n,s).exists((t=>t.isEqual(a)&&e.isEqual(o))):Lh(n,s).exists((t=>t.isEqual(o)&&e.isEqual(a)))})).getOr(!0),km=t=>{var e;return(8===je(e=t)||"#comment"===We(e)?On(t):zn(t)).bind(km).orThunk((()=>B.some(t)))},Am=(t,e,n,i=!0)=>{var r;e.deleteContents();const o=km(n).getOr(n),a=bn(null!==(r=t.dom.getParent(o.dom,t.dom.isBlock))&&void 0!==r?r:n.dom);if(a.dom===t.getBody()?Sm(t,i):Cr(t.schema,a,{checkRootAsContent:!1})&&(Xa(a),i&&t.selection.setCursorLocation(a.dom,0)),!Sn(n,a)){const e=Ne(Tn(a),n)?[]:Tn(s=a).map(Nn).map((t=>U(t,(t=>!Sn(s,t))))).getOr([]);X(e.concat(Nn(n)),(e=>{Sn(e,a)||Cn(e,a)||!Cr(t.schema,e)||xi(e)}))}var s},Mm=t=>Ri(t,"td,th"),Tm=(t,e)=>id(bn(t),e),Im=(t,e)=>({start:t,end:e}),Em=vl([{singleCellTable:["rng","cell"]},{fullTable:["table"]},{partialTable:["cells","outsideDetails"]},{multiTable:["startTableCells","endTableCells","betweenRng"]}]),Om=(t,e)=>ei(bn(t),"td,th",e),Dm=t=>!Sn(t.start,t.end),Lm=(t,e)=>id(t.start,e).bind((n=>id(t.end,e).bind((t=>ze(Sn(n,t),n))))),Pm=t=>e=>Lm(e,t).map((t=>((t,e,n)=>({rng:t,table:e,cells:n}))(e,t,Mm(t)))),Nm=(t,e,n,i)=>{if(n.collapsed||!t.forall(Dm))return B.none();if(e.isSameTable){const e=t.bind(Pm(i));return B.some({start:e,end:e})}{const t=Om(n.startContainer,i),e=Om(n.endContainer,i),r=t.bind((t=>e=>id(e,t).bind((t=>ct(Mm(t)).map((t=>Im(e,t))))))(i)).bind(Pm(i)),o=e.bind((t=>e=>id(e,t).bind((t=>lt(Mm(t)).map((t=>Im(t,e))))))(i)).bind(Pm(i));return B.some({start:r,end:o})}},Rm=(t,e)=>J(t,(t=>Sn(t,e))),Bm=t=>Be(Rm(t.cells,t.rng.start),Rm(t.cells,t.rng.end),((e,n)=>t.cells.slice(e,n+1))),zm=(t,e)=>{const{startTable:n,endTable:i}=e,r=t.cloneRange();return n.each((t=>r.setStartAfter(t.dom))),i.each((t=>r.setEndBefore(t.dom))),r},Fm=t=>X(t,(t=>{rn(t,"contenteditable"),Xa(t)})),Vm=(t,e,n,i)=>{const r=n.cloneRange();i?(r.setStart(n.startContainer,n.startOffset),r.setEndAfter(e.dom.lastChild)):(r.setStartBefore(e.dom.firstChild),r.setEnd(n.endContainer,n.endOffset)),Ym(t,r,e,!1).each((t=>t()))},Hm=t=>{const e=nd(t),n=bn(t.selection.getNode());fr(n.dom)&&Cr(t.schema,n)?t.selection.setCursorLocation(n.dom,0):t.selection.collapse(!0),e.length>1&&j(e,(t=>Sn(t,n)))&&Qe(n,"data-mce-selected","1")},Wm=(t,e,n)=>B.some((()=>{const i=t.selection.getRng(),r=n.bind((({rng:n,isStartInTable:r})=>{const o=((t,e)=>B.from(t.dom.getParent(e,t.dom.isBlock)).map(bn))(t,r?n.endContainer:n.startContainer);n.deleteContents(),((t,e,n)=>{n.each((n=>{e?xi(n):(Xa(n),t.selection.setCursorLocation(n.dom,0))}))})(t,r,o.filter(E(Cr,t.schema)));const a=r?e[0]:e[e.length-1];return Vm(t,a,i,r),Cr(t.schema,a)?B.none():B.some(r?e.slice(1):e.slice(0,-1))})).getOr(e);Fm(r),Hm(t)})),jm=(t,e,n,i)=>B.some((()=>{const r=t.selection.getRng(),o=e[0],a=n[n.length-1];Vm(t,o,r,!0),Vm(t,a,r,!1);const s=Cr(t.schema,o)?e:e.slice(1),l=Cr(t.schema,a)?n:n.slice(0,-1);Fm(s.concat(l)),i.deleteContents(),Hm(t)})),Ym=(t,e,n,i=!0)=>B.some((()=>{Am(t,e,n,i)})),Xm=(t,e)=>B.some((()=>hm(t,!1,e))),Gm=(t,e)=>Q(Mg(e,t),Wa),qm=(t,e)=>Q(Mg(e,t),Ze("caption")),Um=(t,e)=>B.some((()=>{Xa(e),t.selection.setCursorLocation(e.dom,0)})),$m=(t,e)=>t?wg(e):Sg(e),Zm=(t,e)=>{const n=bn(t.selection.getStart(!0)),i=nd(t);return t.selection.isCollapsed()&&0===i.length?((t,e,n)=>{const i=bn(t.getBody());return qm(i,n).fold((()=>((t,e,n,i)=>{const r=Gs.fromRangeStart(t.selection.getRng());return Gm(n,i).bind((i=>Cr(t.schema,i,{checkRootAsContent:!1})?Um(t,i):((t,e,n,i,r)=>Ih(n,t.getBody(),r).bind((t=>Gm(e,bn(t.getNode())).bind((t=>Sn(t,i)?B.none():B.some(C))))))(t,n,e,i,r)))})(t,e,i,n).orThunk((()=>ze(((t,e)=>{const n=Gs.fromRangeStart(t.selection.getRng());return $m(e,n)||Th(e,t.getBody(),n).exists((t=>$m(e,t)))})(t,e),C)))),(n=>((t,e,n,i)=>{const r=Gs.fromRangeStart(t.selection.getRng());return Cr(t.schema,i)?Um(t,i):((t,e,n,i,r)=>Ih(n,t.getBody(),r).fold((()=>B.some(C)),(o=>((t,e,n,i)=>Ph(t.dom).bind((r=>Nh(t.dom).map((t=>e?n.isEqual(r)&&i.isEqual(t):n.isEqual(t)&&i.isEqual(r))))).getOr(!0))(i,n,r,o)?((t,e)=>Um(t,e))(t,i):((t,e,n)=>qm(t,bn(n.getNode())).fold((()=>B.some(C)),(t=>ze(!Sn(t,e),C))))(e,i,o))))(t,n,e,i,r)})(t,e,i,n)))})(t,e,n):((t,e,n)=>{const i=bn(t.getBody()),r=t.selection.getRng();return 0!==n.length?Wm(t,n,B.none()):((t,e,n,i)=>qm(e,i).fold((()=>((t,e,n)=>((t,e)=>{const n=(t=>e=>Sn(t,e))(t),i=((t,e)=>{const n=Om(t.startContainer,e),i=Om(t.endContainer,e);return Be(n,i,Im)})(e,n),r=((t,e)=>{const n=Tm(t.startContainer,e),i=Tm(t.endContainer,e),r=n.isSome(),o=i.isSome(),a=Be(n,i,Sn).getOr(!1);return(t=>Be(t.startTable,t.endTable,((e,n)=>{const i=zi(e,(t=>Sn(t,n))),r=zi(n,(t=>Sn(t,e)));return i||r?{...t,startTable:i?B.none():t.startTable,endTable:r?B.none():t.endTable,isSameTable:!1,isMultiTable:!1}:t})).getOr(t))({startTable:n,endTable:i,isStartInTable:r,isEndInTable:o,isSameTable:a,isMultiTable:!a&&r&&o})})(e,n);return((t,e,n)=>t.exists((t=>((t,e)=>!Dm(t)&&Lm(t,e).exists((t=>{const e=t.dom.rows;return 1===e.length&&1===e[0].cells.length})))(t,n)&&ad(t.start,e))))(i,e,n)?i.map((t=>Em.singleCellTable(e,t.start))):r.isMultiTable?((t,e,n,i)=>Nm(t,e,n,i).bind((({start:t,end:i})=>{const r=t.bind(Bm).getOr([]),o=i.bind(Bm).getOr([]);if(r.length>0&&o.length>0){const t=zm(n,e);return B.some(Em.multiTable(r,o,t))}return B.none()})))(i,r,e,n):((t,e,n,i)=>Nm(t,e,n,i).bind((({start:t,end:e})=>t.or(e))).bind((t=>{const{isSameTable:i}=e,r=Bm(t).getOr([]);if(i&&t.cells.length===r.length)return B.some(Em.fullTable(t.table));if(r.length>0){if(i)return B.some(Em.partialTable(r,B.none()));{const t=zm(n,e);return B.some(Em.partialTable(r,B.some({...e,rng:t})))}}return B.none()})))(i,r,e,n)})(e,n).bind((e=>e.fold(E(Ym,t),E(Xm,t),E(Wm,t),E(jm,t)))))(t,e,n)),(e=>((t,e)=>Um(t,e))(t,e))))(t,i,r,e)})(t,n,i)},Km=(t,e)=>{let n=e;for(;n&&n!==t;){if(dr(n)||pr(n))return n;n=n.parentNode}return null},Qm=["data-ephox-","data-mce-","data-alloy-","data-snooker-","_"],Jm=Pe.each,tv=t=>{const e=t.dom,n=new Set(t.serializer.getTempAttrs()),i=t=>j(Qm,(e=>jt(t,e)))||n.has(t);return{compare:(t,n)=>{if(t.nodeName!==n.nodeName||t.nodeType!==n.nodeType)return!1;const r=t=>{const n={};return Jm(e.getAttribs(t),(r=>{const o=r.nodeName.toLowerCase();"style"===o||i(o)||(n[o]=e.getAttrib(t,o))})),n},o=(t,e)=>{for(const n in t)if(Ct(t,n)){const i=e[n];if(y(i))return!1;if(t[n]!==i)return!1;delete e[n]}for(const t in e)if(Ct(e,t))return!1;return!0};if($i(t)&&$i(n)){if(!o(r(t),r(n)))return!1;if(!o(e.parseStyle(e.getAttrib(t,"style")),e.parseStyle(e.getAttrib(n,"style"))))return!1}return!Zh(t)&&!Zh(n)},isAttributeInternal:i}},ev=t=>["h1","h2","h3","h4","h5","h6"].includes(t.name),nv=(t,e,n,i)=>{const r=n.name;for(let e=0,o=t.length;e<o;e++){const o=t[e];if(o.name===r){const t=i.nodes[r];t?t.nodes.push(n):i.nodes[r]={filter:o,nodes:[n]}}}if(n.attributes)for(let t=0,r=e.length;t<r;t++){const r=e[t],o=r.name;if(o in n.attributes.map){const t=i.attributes[o];t?t.nodes.push(n):i.attributes[o]={filter:r,nodes:[n]}}}},iv=(t,e)=>{const n=(t,n)=>{gt(t,(t=>{const i=ut(t.nodes);X(t.filter.callbacks,(r=>{for(let e=i.length-1;e>=0;e--){const r=i[e];(n?void 0!==r.attr(t.filter.name):r.name===t.filter.name)&&!b(r.parent)||i.splice(e,1)}i.length>0&&r(i,t.filter.name,e)}))}))};n(t.nodes,!1),n(t.attributes,!0)},rv=(t,e,n,i={})=>{const r=((t,e,n)=>{const i={nodes:{},attributes:{}};return n.firstChild&&((n,r)=>{let o=n;for(;o=o.walk();)nv(t,e,o,i)})(n),i})(t,e,n);iv(r,i)},ov=(t,e,n,i)=>{if((t.pad_empty_with_br||e.insert)&&n(i)){const t=new Wf("br",1);e.insert&&t.attr("data-mce-bogus","1"),i.empty().append(t)}else i.empty().append(new Wf("#text",3)).value=Hi},av=(t,e)=>{const n=null==t?void 0:t.firstChild;return x(n)&&n===t.lastChild&&n.name===e},sv=(t,e,n,i)=>i.isEmpty(e,n,(e=>((t,e)=>{const n=t.getElementRule(e.name);return!0===(null==n?void 0:n.paddEmpty)})(t,e))),lv=t=>{let e;for(let n=t;n;n=n.parent){const t=n.attr("contenteditable");if("false"===t)break;"true"===t&&(e=n)}return B.from(e)},cv=(t,e,n=t.parent)=>{if(e.getSpecialElements()[t.name])t.empty().remove();else{const i=t.children();for(const t of i)n&&!e.isValidChild(n.name,t.name)&&cv(t,e,n);t.unwrap()}},uv=(t,e,n,i=C)=>{const r=e.getTextBlockElements(),o=e.getNonEmptyElements(),a=e.getWhitespaceElements(),s=Pe.makeMap("tr,td,th,tbody,thead,tfoot,table,summary"),l=new Set,c=t=>t!==n&&!s[t.name];for(let n=0;n<t.length;n++){const s=t[n];let u,h,d;if(!s.parent||l.has(s))continue;if(r[s.name]&&"li"===s.parent.name){let t=s.next;for(;t&&r[t.name];)t.name="li",l.add(t),s.parent.insert(t,s.parent),t=t.next;s.unwrap();continue}const p=[s];for(u=s.parent;u&&!e.isValidChild(u.name,s.name)&&c(u);u=u.parent)p.push(u);if(u&&p.length>1)if(hv(e,s,u))cv(s,e);else{p.reverse(),h=p[0].clone(),i(h);let t=h;for(let n=0;n<p.length-1;n++){e.isValidChild(t.name,p[n].name)&&n>0?(d=p[n].clone(),i(d),t.append(d)):d=t;for(let t=p[n].firstChild;t&&t!==p[n+1];){const e=t.next;d.append(t),t=e}t=d}sv(e,o,a,h)?u.insert(s,p[0],!0):(u.insert(h,p[0],!0),u.insert(s,h)),u=p[0],(sv(e,o,a,u)||av(u,"br"))&&u.empty().remove()}else if(s.parent){if("li"===s.name){let t=s.prev;if(t&&("ul"===t.name||"ol"===t.name)){t.append(s);continue}if(t=s.next,t&&("ul"===t.name||"ol"===t.name)&&t.firstChild){t.insert(s,t.firstChild,!0);continue}const e=new Wf("ul",1);i(e),s.wrap(e);continue}if(e.isValidChild(s.parent.name,"div")&&e.isValidChild("div",s.name)){const t=new Wf("div",1);i(t),s.wrap(t)}else cv(s,e)}}},hv=(t,e,n=e.parent)=>!(!n||(!t.children[e.name]||t.isValidChild(n.name,e.name))&&("a"!==e.name||!((t,e)=>{let n=t;for(;n;){if("a"===n.name)return!0;n=n.parent}return!1})(n))&&(!(t=>"summary"===t.name)(n)||!ev(e)||(null==n?void 0:n.firstChild)===e&&(null==n?void 0:n.lastChild)===e)),dv=t=>t.collapsed?t:(t=>{const e=Gs.fromRangeStart(t),n=Gs.fromRangeEnd(t),i=t.commonAncestorContainer;return Th(!1,i,n).map((r=>!th(e,n,i)&&th(e,r,i)?((t,e,n,i)=>{const r=document.createRange();return r.setStart(t,e),r.setEnd(n,i),r})(e.container(),e.offset(),r.container(),r.offset()):t)).getOr(t)})(t),pv=(t,e)=>{const n=t.getParent(e,t.isBlock);return n&&"LI"===n.nodeName?n:null},fv=(t,e)=>{const n=Gs.after(t),i=Ch(e).prev(n);return i?i.toRange():null},gv=(t,e,n,i)=>{const r=((t,e,n)=>{const i=e.serialize(n);return(t=>{var e,n;const i=t.firstChild,r=t.lastChild;return i&&"META"===i.nodeName&&(null===(e=i.parentNode)||void 0===e||e.removeChild(i)),r&&"mce_marker"===r.id&&(null===(n=r.parentNode)||void 0===n||n.removeChild(r)),t})(t.createFragment(i))})(e,t,i),o=pv(e,n.startContainer),a=(t=>{return t.length>0&&(!(n=t[t.length-1]).firstChild||x(null==(e=n)?void 0:e.firstChild)&&e.firstChild===e.lastChild&&(t=>t.data===Hi||ur(t))(e.firstChild))?t.slice(0,-1):t;var e,n})((s=r.firstChild,U(null!==(l=null==s?void 0:s.childNodes)&&void 0!==l?l:[],(t=>"LI"===t.nodeName))));var s,l;const c=e.getRoot(),u=t=>{const i=Gs.fromRangeStart(n),r=Ch(e.getRoot()),a=1===t?r.prev(i):r.next(i),s=null==a?void 0:a.getNode();return!s||pv(e,s)!==o};return o?u(1)?((t,e,n)=>{const i=t.parentNode;return i&&Pe.each(e,(e=>{i.insertBefore(e,t)})),((t,e)=>{const n=Gs.before(t),i=Ch(e).next(n);return i?i.toRange():null})(t,n)})(o,a,c):u(2)?((t,e,n,i)=>(i.insertAfter(e.reverse(),t),fv(e[0],n)))(o,a,c,e):((t,e,n,i)=>{const r=((t,e)=>{const n=e.cloneRange(),i=e.cloneRange();return n.setStartBefore(t),i.setEndAfter(t),[n.cloneContents(),i.cloneContents()]})(t,i),o=t.parentNode;return o&&(o.insertBefore(r[0],t),Pe.each(e,(e=>{o.insertBefore(e,t)})),o.insertBefore(r[1],t),o.removeChild(t)),fv(e[e.length-1],n)})(o,a,c,n):null},mv=["pre"],vv=fr,yv=(t,e,n)=>{var i,r;const o=t.selection,a=t.dom,s=t.parser,l=n.merge,c=ag({validate:!0},t.schema),u='<span id="mce_marker" data-mce-type="bookmark">&#xFEFF;</span>';n.preserve_zwsp||(e=Ua(e)),-1===e.indexOf("{$caret}")&&(e+="{$caret}"),e=e.replace(/\{\$caret\}/,u);let h=o.getRng();const d=h.startContainer,p=t.getBody();d===p&&o.isCollapsed()&&a.isBlock(p.firstChild)&&((t,e)=>x(e)&&!t.schema.getVoidElements()[e.nodeName])(t,p.firstChild)&&a.isEmpty(p.firstChild)&&(h=a.createRng(),h.setStart(p.firstChild,0),h.setEnd(p.firstChild,0),o.setRng(h)),o.isCollapsed()||(t=>{const e=t.dom,n=dv(t.selection.getRng());t.selection.setRng(n);const i=e.getParent(n.startContainer,vv);((t,e,n)=>!!x(n)&&n===t.getParent(e.endContainer,vv)&&ad(bn(n),e))(e,n,i)?Ym(t,n,bn(i)):n.startContainer===n.endContainer&&n.endOffset-n.startOffset==1&&rr(n.startContainer.childNodes[n.startOffset])?n.deleteContents():t.getDoc().execCommand("Delete",!1)})(t);const f=o.getNode(),g={context:f.nodeName.toLowerCase(),data:n.data,insert:!0},m=s.parse(e,g);if(!0===n.paste&&((t,e)=>{let n=e.firstChild,i=e.lastChild;return n&&"meta"===n.name&&(n=n.next),i&&"mce_marker"===i.attr("id")&&(i=i.prev),((t,e)=>{const n=t.getNonEmptyElements();return x(e)&&(e.isEmpty(n)||((t,e)=>t.getBlockElements()[e.name]&&(t=>x(t.firstChild)&&t.firstChild===t.lastChild)(e)&&(t=>"br"===t.name||t.value===Hi)(e.firstChild))(t,e))})(t,i)&&(i=null==i?void 0:i.prev),!(!n||n!==i||"ul"!==n.name&&"ol"!==n.name)})(t.schema,m)&&((t,e)=>!!pv(t,e))(a,f))return h=gv(c,a,o.getRng(),m),h&&o.setRng(h),e;!0===n.paste&&((t,e,n,i)=>{var r;const o=e.firstChild,a=e.lastChild,s=o===("bookmark"===a.attr("data-mce-type")?a.prev:a),l=W(mv,o.name);if(s&&l){const e="false"!==o.attr("contenteditable"),a=(null===(r=t.getParent(n,t.isBlock))||void 0===r?void 0:r.nodeName.toLowerCase())===o.name,s=B.from(Km(i,n)).forall(dr);return e&&a&&s}return!1})(a,m,f,t.getBody())&&(null===(i=m.firstChild)||void 0===i||i.unwrap()),(t=>{let e=t;for(;e=e.walk();)1===e.type&&e.attr("data-mce-fragment","1")})(m);let v=m.lastChild;if(v&&"mce_marker"===v.attr("id")){const e=v;for(v=v.prev;v;v=v.walk(!0))if(3===v.type||!a.isBlock(v.name)){v.parent&&t.schema.isValidChild(v.parent.name,"span")&&v.parent.insert(e,v,"br"===v.name);break}}if(t._selectionOverrides.showBlockCaretContainer(f),g.invalid||((t,e,n)=>{var i;return j(n.children(),ev)&&"SUMMARY"===(null===(i=t.getParent(e,t.isBlock))||void 0===i?void 0:i.nodeName)})(a,f,m)){t.selection.setContent(u);let n,i=o.getNode();const l=t.getBody();for(lr(i)?i=n=l:n=i;n&&n!==l;)i=n,n=n.parentNode;e=i===l?l.innerHTML:a.getOuterHTML(i);const h=s.parse(e),d=(t=>{for(let e=t;e;e=e.walk())if("mce_marker"===e.attr("id"))return B.some(e);return B.none()})(h),p=d.bind(lv).getOr(h);d.each((t=>t.replace(m)));const f=m.children(),g=null!==(r=m.parent)&&void 0!==r?r:h;m.unwrap();const v=U(f,(e=>hv(t.schema,e,g)));uv(v,t.schema,p),rv(s.getNodeFilters(),s.getAttributeFilters(),h),e=c.serialize(h),i===l?a.setHTML(l,e):a.setOuterHTML(i,e)}else e=c.serialize(m),((t,e,n)=>{var i;if("all"===n.getAttribute("data-mce-bogus"))null===(i=n.parentNode)||void 0===i||i.insertBefore(t.dom.createFragment(e),n);else{const i=n.firstChild,r=n.lastChild;!i||i===r&&"BR"===i.nodeName?t.dom.setHTML(n,e):t.selection.setContent(e,{no_events:!0})}})(t,e,f);var y;return((t,e)=>{const n=t.schema.getTextInlineElements(),i=t.dom;if(e){const e=t.getBody(),r=tv(t);Pe.each(i.select("*[data-mce-fragment]"),(t=>{if(x(n[t.nodeName.toLowerCase()])&&((t,e)=>nt(cg(t,e),(t=>!(t=>sg.has(t))(t))))(i,t))for(let n=t.parentElement;x(n)&&n!==e&&!ug(i,t,n);n=n.parentElement)if(r.compare(n,t)){i.remove(t,!0);break}}))}})(t,l),((t,e)=>{var n,i,r;let o;const a=t.dom,s=t.selection;if(!e)return;s.scrollIntoView(e);const l=Km(t.getBody(),e);if(l&&"false"===a.getContentEditable(l))return a.remove(e),void s.select(l);let c=a.createRng();const u=e.previousSibling;if(rr(u)){c.setStart(u,null!==(i=null===(n=u.nodeValue)||void 0===n?void 0:n.length)&&void 0!==i?i:0);const t=e.nextSibling;rr(t)&&(u.appendData(t.data),null===(r=t.parentNode)||void 0===r||r.removeChild(t))}else c.setStartBefore(e),c.setEndBefore(e);const h=a.getParent(e,a.isBlock);if(a.remove(e),h&&a.isEmpty(h)){const e=vv(h);bi(bn(h)),c.setStart(h,0),c.setEnd(h,0),e||(t=>!!t.getAttribute("data-mce-fragment"))(h)||!(o=(e=>{let n=Gs.fromRangeStart(e);return n=Ch(t.getBody()).next(n),null==n?void 0:n.toRange()})(c))?a.add(h,a.create("br",e?{}:{"data-mce-bogus":"1"})):(c=o,a.remove(h))}s.setRng(c)})(t,a.get("mce_marker")),y=t.getBody(),Pe.each(y.getElementsByTagName("*"),(t=>{t.removeAttribute("data-mce-fragment")})),((t,e,n)=>{B.from(t.getParent(e,"td,th")).map(bn).each((t=>((t,e)=>{zn(t).each((n=>{On(n).each((i=>{e.isBlock(We(t))&&Ba(n)&&e.isBlock(We(i))&&xi(n)}))}))})(t,n)))})(a,o.getStart(),t.schema),((t,e,n)=>{const i=En(bn(n),(t=>Sn(t,bn(e))));st(i,i.length-2).filter(Ge).fold((()=>Nr(t,e)),(e=>Nr(t,e.dom)))})(t.schema,t.getBody(),o.getStart()),e},bv=t=>t instanceof Wf,xv=(t,e,n)=>{t.dom.setHTML(t.getBody(),e),!0!==n&&(t=>{If(t)&&Ph(t.getBody()).each((e=>{const n=e.getNode(),i=er(n)?Ph(n).getOr(e):e;t.selection.setRng(i.toRange())}))})(t)},_v=t=>_(t)?t:N,wv=(t,e,n)=>{const i=e(t),r=_v(n);return i.orThunk((()=>r(t)?B.none():((t,e,n)=>{let i=t.dom;const r=_v(n);for(;i.parentNode;){i=i.parentNode;const t=bn(i),n=e(t);if(n.isSome())return n;if(r(t))break}return B.none()})(t,e,r)))},Sv=_d,Cv=(t,e,n)=>{const i=t.formatter.get(n);if(i)for(let n=0;n<i.length;n++){const r=i[n];if(Td(r)&&!1===r.inherit&&t.dom.is(e,r.selector))return!0}return!1},kv=(t,e,n,i,r)=>{const o=t.dom.getRoot();if(e===o)return!1;const a=t.dom.getParent(e,(e=>!!Cv(t,e,n)||e.parentNode===o||!!Tv(t,e,n,i,!0)));return!!Tv(t,a,n,i,r)},Av=(t,e,n)=>!(!Id(n)||!Sv(e,n.inline))||!(!Md(n)||!Sv(e,n.block))||!!Td(n)&&$i(e)&&t.is(e,n.selector),Mv=(t,e,n,i,r,o)=>{const a=n[i],s="attributes"===i;if(_(n.onmatch))return n.onmatch(e,n,i);if(a)if(Mt(a)){for(let n=0;n<a.length;n++)if(s?t.getAttrib(e,a[n]):Sd(t,e,a[n]))return!0}else for(const i in a)if(Ct(a,i)){const l=s?t.getAttrib(e,i):Sd(t,e,i),c=xd(a[i],o),u=b(l)||Zt(l);if(u&&b(c))continue;if(r&&u&&!n.exact)return!1;if((!r||n.exact)&&!Sv(l,wd(c,i)))return!1}return!0},Tv=(t,e,n,i,r)=>{const o=t.formatter.get(n),a=t.dom;if(o&&$i(e))for(let n=0;n<o.length;n++){const s=o[n];if(Av(t.dom,e,s)&&Mv(a,e,s,"attributes",r,i)&&Mv(a,e,s,"styles",r,i)){const n=s.classes;if(n)for(let r=0;r<n.length;r++)if(!t.dom.hasClass(e,xd(n[r],i)))return;return s}}},Iv=(t,e,n,i,r)=>{if(i)return kv(t,i,e,n,r);if(i=t.selection.getNode(),kv(t,i,e,n,r))return!0;const o=t.selection.getStart();return!(o===i||!kv(t,o,e,n,r))},Ev=Ga,Ov=t=>{if(t){const e=new Fi(t,t);for(let t=e.current();t;t=e.next())if(rr(t))return t}return null},Dv=t=>{const e=vn("span");return Je(e,{id:Rh,"data-mce-bogus":"1","data-mce-type":"format-caret"}),t&&mi(e,yn(Ev)),e},Lv=(t,e,n)=>{const i=t.dom,r=t.selection;if(Od(e))hm(t,!1,bn(e),n,!0);else{const t=r.getRng(),n=i.getParent(e,i.isBlock),o=t.startContainer,a=t.startOffset,s=t.endContainer,l=t.endOffset,c=(t=>{const e=Ov(t);return e&&e.data.charAt(0)===Ev&&e.deleteData(0,1),e})(e);i.remove(e,!0),o===c&&a>0&&t.setStart(c,a-1),s===c&&l>0&&t.setEnd(c,l-1),n&&i.isEmpty(n)&&Xa(bn(n)),r.setRng(t)}},Pv=(t,e,n)=>{const i=t.dom,r=t.selection;if(e)Lv(t,e,n);else if(!(e=zh(t.getBody(),r.getStart())))for(;e=i.get(Rh);)Lv(t,e,n)},Nv=(t,e)=>(t.appendChild(e),e),Rv=(t,e)=>{var n;const i=$(t,((t,e)=>Nv(t,e.cloneNode(!1))),e),r=null!==(n=i.ownerDocument)&&void 0!==n?n:document;return Nv(i,r.createTextNode(Ev))},Bv=(t,e,n,i)=>{const a=t.dom,s=t.selection;let l=!1;const c=t.formatter.get(e);if(!c)return;const u=s.getRng(),h=u.startContainer,d=u.startOffset;let p=h;rr(h)&&(d!==h.data.length&&(l=!0),p=p.parentNode);const f=[];let m;for(;p;){if(Tv(t,p,e,n,i)){m=p;break}p.nextSibling&&(l=!0),f.push(p),p=p.parentNode}if(m)if(l){const r=s.getBookmark();u.collapse(!0);let o=qd(a,u,c,!0);o=zp(o),t.formatter.remove(e,n,o,i),s.moveToBookmark(r)}else{const l=zh(t.getBody(),m),c=x(l)?a.getParents(m.parentNode,R,l):[],u=Dv(!1).dom;((t,e,n)=>{var i,r;const o=t.dom,a=o.getParent(n,E(md,t.schema));a&&o.isEmpty(a)?null===(i=n.parentNode)||void 0===i||i.replaceChild(e,n):((t=>{const e=Ri(t,"br"),n=U((t=>{const e=[];let n=t.dom;for(;n;)e.push(bn(n)),n=n.lastChild;return e})(t).slice(-1),Ba);e.length===n.length&&X(n,xi)})(bn(n)),o.isEmpty(n)?null===(r=n.parentNode)||void 0===r||r.replaceChild(e,n):o.insertAfter(e,n))})(t,u,null!=l?l:m);const h=((t,e,n,i,a,s)=>{const l=t.formatter,c=t.dom,u=U(pt(l.get()),(t=>t!==i&&!Wt(t,"removeformat"))),h=((t,e,n)=>Z(n,((n,i)=>{const r=((t,e)=>Ad(t,e,(t=>{const e=t=>_(t)||t.length>1&&"%"===t.charAt(0);return j(["styles","attributes"],(n=>St(t,n).exists((t=>{const n=g(t)?t:wt(t);return j(n,e)}))))})))(t,i);return t.formatter.matchNode(e,i,{},r)?n.concat([i]):n}),[]))(t,n,u);if(U(h,(e=>!((t,e,n)=>{const i=["inline","block","selector","attributes","styles","classes"],a=t=>xt(t,((t,e)=>j(i,(t=>t===e))));return Ad(t,e,(e=>{const i=a(e);return Ad(t,n,(t=>{const e=a(t);return((t,e,n=o)=>r(n).eq(t,e))(i,e)}))}))})(t,e,i))).length>0){const t=n.cloneNode(!1);return c.add(e,t),l.remove(i,a,t,s),c.remove(t),B.some(t)}return B.none()})(t,u,m,e,n,i),d=Rv([...f,...h.toArray(),...c],u);l&&Lv(t,l,x(l)),s.setCursorLocation(d,1),a.isEmpty(m)&&a.remove(m)}},zv=t=>{const e=Dv(!1),n=Rv(t,e.dom);return{caretContainer:e,caretPosition:Gs(n,0)}},Fv=(t,e)=>{const{caretContainer:n,caretPosition:i}=zv(e);return pi(bn(t),n),xi(bn(t)),i},Vv=(t,e)=>{if(Bh(e.dom))return!1;const n=t.schema.getTextInlineElements();return Ct(n,We(e))&&!Bh(e.dom)&&!tr(e.dom)},Hv={},Wv=Qi(["pre"]);((t,e)=>{Hv[t]||(Hv[t]=[]),Hv[t].push((t=>{if(!t.selection.getRng().collapsed){const e=t.selection.getSelectedBlocks(),n=U(U(e,Wv),(t=>e=>{const n=e.previousSibling;return Wv(n)&&W(t,n)})(e));X(n,(t=>{((t,e)=>{const n=bn(e),i=An(n).dom;xi(n),yi(bn(t),[vn("br",i),vn("br",i),...Nn(n)])})(t.previousSibling,t)}))}}))})("pre");const jv=["fontWeight","fontStyle","color","fontSize","fontFamily"],Yv=(t,e)=>{const n=t.get(e);return g(n)?Q(n,(t=>Id(t)&&"span"===t.inline&&(t=>p(t.styles)&&j(pt(t.styles),(t=>W(jv,t))))(t))):B.none()},Xv=(t,e)=>Lh(e,Gs.fromRangeStart(t)).isNone(),Gv=(t,e)=>!1===Dh(e,Gs.fromRangeEnd(t)).exists((t=>!ur(t.getNode())||Dh(e,t).isSome())),qv=t=>e=>vr(e)&&t.isEditable(e),Uv=t=>U(t.getSelectedBlocks(),qv(t.dom)),$v=Pe.each,Zv=t=>$i(t)&&!Zh(t)&&!Bh(t)&&!tr(t),Kv=(t,e)=>{for(let n=t;n;n=n[e]){if(rr(n)&&$t(n.data))return t;if($i(n)&&!Zh(n))return n}return t},Qv=(t,e,n)=>{const i=tv(t),r=Zi(e)&&t.dom.isEditable(e),o=Zi(n)&&t.dom.isEditable(n);if(r&&o){const r=Kv(e,"previousSibling"),o=Kv(n,"nextSibling");if(i.compare(r,o)){for(let t=r.nextSibling;t&&t!==o;){const e=t;t=t.nextSibling,r.appendChild(e)}return t.dom.remove(o),Pe.each(Pe.grep(o.childNodes),(t=>{r.appendChild(t)})),r}}return n},Jv=(t,e,n,i)=>{var r;if(i&&!1!==e.merge_siblings){const e=null!==(r=Qv(t,gd(i),i))&&void 0!==r?r:i;Qv(t,e,gd(e,!0))}},ty=(t,e,n)=>{$v(t.childNodes,(t=>{Zv(t)&&(e(t)&&n(t),t.hasChildNodes()&&ty(t,e,n))}))},ey=(t,e)=>n=>!(!n||!Sd(t,n,e)),ny=(t,e,n)=>i=>{t.setStyle(i,e,n),""===i.getAttribute("style")&&i.removeAttribute("style"),((t,e)=>{"SPAN"===e.nodeName&&0===t.getAttribs(e).length&&t.remove(e,!0)})(t,i)},iy=vl([{keep:[]},{rename:["name"]},{removed:[]}]),ry=/^(src|href|style)$/,oy=Pe.each,ay=_d,sy=(t,e,n)=>t.isChildOf(e,n)&&e!==n&&!t.isBlock(n),ly=(t,e,n)=>{let i=e[n?"startContainer":"endContainer"],r=e[n?"startOffset":"endOffset"];if($i(i)){const t=i.childNodes.length-1;!n&&r&&r--,i=i.childNodes[r>t?t:r]}return rr(i)&&n&&r>=i.data.length&&(i=new Fi(i,t.getBody()).next()||i),rr(i)&&!n&&0===r&&(i=new Fi(i,t.getBody()).prev()||i),i},cy=(t,e)=>{const n=e?"firstChild":"lastChild",i=t[n];return(t=>/^(TR|TH|TD)$/.test(t.nodeName))(t)&&i?"TR"===t.nodeName&&i[n]||i:t},uy=(t,e,n,i)=>{var r;const o=t.create(n,i);return null===(r=e.parentNode)||void 0===r||r.insertBefore(o,e),o.appendChild(e),o},hy=(t,e,n,i,r)=>{const o=bn(e),a=bn(t.create(i,r)),s=n?Pn(o):Ln(o);return yi(a,s),n?(pi(o,a),gi(a,o)):(fi(o,a),mi(a,o)),a.dom},dy=(t,e,n)=>{const i=e.parentNode;let r;const o=t.dom,a=Fl(t);Md(n)&&i===o.getRoot()&&(n.list_block&&ay(e,n.list_block)||X(ut(e.childNodes),(e=>{vd(t,a,e.nodeName.toLowerCase())?r?r.appendChild(e):(r=uy(o,e,a),o.setAttribs(r,Vl(t))):r=null}))),(t=>Td(t)&&Id(t)&&Ne(St(t,"mixed"),!0))(n)&&!ay(n.inline,e)||o.remove(e,!0)},py=(t,e,n)=>w(t)?{name:e,value:null}:{name:t,value:xd(e,n)},fy=(t,e)=>{""===t.getAttrib(e,"style")&&(e.removeAttribute("style"),e.removeAttribute("data-mce-style"))},gy=(t,e,n,i,r)=>{let o=!1;oy(n.styles,((a,s)=>{const{name:l,value:c}=py(s,a,i),u=wd(c,l);(n.remove_similar||m(c)||!$i(r)||ay(Sd(t,r,l),u))&&t.setStyle(e,l,""),o=!0})),o&&fy(t,e)},my=(t,e,n,i,r)=>{const o=t.dom,a=tv(t),s=t.schema;if(Id(e)&&zr(s,e.inline)&&Vr(s,i)&&i.parentElement===t.getBody())return dy(t,i,e),iy.removed();if(!e.ceFalseOverride&&i&&"false"===o.getContentEditableParent(i))return iy.keep();if(i&&!Av(o,i,e)&&!((t,e)=>e.links&&"A"===t.nodeName)(i,e))return iy.keep();const l=i,c=e.preserve_attributes;if(Id(e)&&"all"===e.remove&&g(c)){const t=U(o.getAttribs(l),(t=>W(c,t.name.toLowerCase())));if(o.removeAllAttribs(l),X(t,(t=>o.setAttrib(l,t.name,t.value))),t.length>0)return iy.rename("span")}if("all"!==e.remove){gy(o,l,e,n,r),oy(e.attributes,((t,i)=>{const{name:a,value:s}=py(i,t,n);if(e.remove_similar||m(s)||!$i(r)||ay(o.getAttrib(r,a),s)){if("class"===a){const t=o.getAttrib(l,a);if(t){let e="";if(X(t.split(/\s+/),(t=>{/mce\-\w+/.test(t)&&(e+=(e?" ":"")+t)})),e)return void o.setAttrib(l,a,e)}}if(ry.test(a)&&l.removeAttribute("data-mce-"+a),"style"===a&&Qi(["li"])(l)&&"none"===o.getStyle(l,"list-style-type"))return l.removeAttribute(a),void o.setStyle(l,"list-style-type","none");"class"===a&&l.removeAttribute("className"),l.removeAttribute(a)}})),oy(e.classes,(t=>{t=xd(t,n),$i(r)&&!o.hasClass(r,t)||o.removeClass(l,t)}));const t=o.getAttribs(l);for(let e=0;e<t.length;e++){const n=t[e].nodeName;if(!a.isAttributeInternal(n))return iy.keep()}}return"none"!==e.remove?(dy(t,l,e),iy.removed()):iy.keep()},vy=(t,e,n,i)=>my(t,e,n,i,i).fold(M(i),(e=>(t.dom.createFragment().appendChild(i),t.dom.rename(i,e))),M(null)),yy=(t,e,n,i,r)=>{(i||t.selection.isEditable())&&((t,e,n,i,r)=>{const o=t.formatter.get(e),a=o[0],s=t.dom,l=t.selection,c=i=>{const s=((t,e,n,i,r)=>{let o;return e.parentNode&&X(kd(t.dom,e.parentNode).reverse(),(e=>{if(!o&&$i(e)&&"_start"!==e.id&&"_end"!==e.id){const a=Tv(t,e,n,i,r);a&&!1!==a.split&&(o=e)}})),o})(t,i,e,n,r);return((t,e,n,i,r,o,a,s)=>{var l,c;let u,h;const d=t.dom;if(n){const o=n.parentNode;for(let n=i.parentNode;n&&n!==o;n=n.parentNode){let i=d.clone(n,!1);for(let n=0;n<e.length&&(i=vy(t,e[n],s,i),null!==i);n++);i&&(u&&i.appendChild(u),h||(h=i),u=i)}a.mixed&&d.isBlock(n)||(i=null!==(l=d.split(n,i))&&void 0!==l?l:i),u&&h&&(null===(c=r.parentNode)||void 0===c||c.insertBefore(u,r),h.appendChild(r),Id(a)&&Jv(t,a,0,u))}return i})(t,o,s,i,i,0,a,n)},u=e=>j(o,(i=>by(t,i,n,e,e))),h=e=>{const n=ut(e.childNodes),i=u(e)||j(o,(t=>Av(s,e,t))),r=e.parentNode;if(!i&&x(r)&&Ed(a)&&u(r),a.deep&&n.length)for(let t=0;t<n.length;t++)h(n[t]);X(["underline","line-through","overline"],(n=>{$i(e)&&t.dom.getStyle(e,"text-decoration")===n&&e.parentNode&&Cd(s,e.parentNode)===n&&by(t,{deep:!1,exact:!0,inline:"span",styles:{textDecoration:n}},void 0,e)}))},d=t=>{const e=s.get(t?"_start":"_end");if(e){let n=e[t?"firstChild":"lastChild"];return(t=>Zh(t)&&$i(t)&&("_start"===t.id||"_end"===t.id))(n)&&(n=n[t?"firstChild":"lastChild"]),rr(n)&&0===n.data.length&&(n=t?e.previousSibling||e.nextSibling:e.nextSibling||e.previousSibling),s.remove(e,!0),n}return null},p=e=>{let n,i,r=qd(s,e,o,e.collapsed);if(a.split){if(r=zp(r),n=ly(t,r,!0),i=ly(t,r),n!==i){if(n=cy(n,!0),i=cy(i,!1),sy(s,n,i)){const t=B.from(n.firstChild).getOr(n);return c(hy(s,t,!0,"span",{id:"_start","data-mce-type":"bookmark"})),void d(!0)}if(sy(s,i,n)){const t=B.from(i.lastChild).getOr(i);return c(hy(s,t,!1,"span",{id:"_end","data-mce-type":"bookmark"})),void d(!1)}n=uy(s,n,"span",{id:"_start","data-mce-type":"bookmark"}),i=uy(s,i,"span",{id:"_end","data-mce-type":"bookmark"});const t=s.createRng();t.setStartAfter(n),t.setEndBefore(i),Ud(s,t,(t=>{X(t,(t=>{Zh(t)||Zh(t.parentNode)||c(t)}))})),c(n),c(i),n=d(!0),i=d()}else n=i=c(n);r.startContainer=n.parentNode?n.parentNode:n,r.startOffset=s.nodeIndex(n),r.endContainer=i.parentNode?i.parentNode:i,r.endOffset=s.nodeIndex(i)+1}Ud(s,r,(t=>{X(t,h)}))};if(i){if(hd(i)){const t=s.createRng();t.setStartBefore(i),t.setEndAfter(i),p(t)}else p(i);ip(t,e,i,n)}else l.isCollapsed()&&Id(a)&&!nd(t).length?Bv(t,e,n,r):(pd(t,(()=>cd(t,p)),(i=>Id(a)&&Iv(t,e,n,i))),t.nodeChanged()),((t,e,n)=>{"removeformat"===e?X(Uv(t.selection),(e=>{X(jv,(n=>t.dom.setStyle(e,n,""))),fy(t.dom,e)})):Yv(t.formatter,e).each((e=>{X(Uv(t.selection),(i=>gy(t.dom,i,e,n,null)))}))})(t,e,n),ip(t,e,i,n)})(t,e,n,i,r)},by=(t,e,n,i,r)=>my(t,e,n,i,r).fold(N,(e=>(t.dom.rename(i,e),!0)),R),xy=Pe.each,_y=Pe.each,wy=(t,e,n,i)=>{if(_y(n.styles,((n,r)=>{t.setStyle(e,r,xd(n,i))})),n.styles){const n=t.getAttrib(e,"style");n&&t.setAttrib(e,"data-mce-style",n)}},Sy=(t,e,n,i)=>{const r=t.formatter.get(e),o=r[0],a=!i&&t.selection.isCollapsed(),s=t.dom,l=t.selection,c=(t,e=o)=>{_(e.onformat)&&e.onformat(t,e,n,i),wy(s,t,e,n),_y(e.attributes,((e,i)=>{s.setAttrib(t,i,xd(e,n))})),_y(e.classes,(e=>{const i=xd(e,n);s.hasClass(t,i)||s.addClass(t,i)}))},u=(t,e)=>{let n=!1;return _y(t,(t=>!(!Td(t)||("false"!==s.getContentEditable(e)||t.ceFalseOverride)&&(!x(t.collapsed)||t.collapsed===a)&&s.is(e,t.selector)&&!Bh(e)&&(c(e,t),n=!0,1)))),n},h=t=>{if(d(t)){const e=s.create(t);return c(e),e}return null},p=(i,a,s)=>{const l=[];let d=!0;const p=o.inline||o.block,f=h(p);Ud(i,a,(a=>{let h;const g=a=>{let m=!1,v=d,y=!1;const b=a.parentNode,_=b.nodeName.toLowerCase(),w=i.getContentEditable(a);x(w)&&(v=d,d="true"===w,m=!0,y=bd(t,a));const S=d&&!m;if(ur(a)&&!((t,e,n,i)=>{if(Cc(t)&&Id(e)&&n.parentNode){const e=Ao(t.schema),r=((t,e)=>((t,e)=>{const n=t.dom;return n.parentNode?((t,e)=>Q(t.dom.childNodes,(t=>e(bn(t)))).map(bn))(bn(n.parentNode),(n=>!Sn(t,n)&&e(n))):B.none()})(t,e).isSome())(bn(n),(t=>Bh(t.dom)));return kt(e,i)&&Sr(t.schema,n.parentNode,{skipBogus:!1,includeZwsp:!0})&&!r}return!1})(t,o,a,_))return h=null,void(Md(o)&&i.remove(a));if((i=>(t=>Md(t)&&!0===t.wrapper)(o)&&Tv(t,i,e,n))(a))h=null;else{if(((e,n,i)=>{const r=(t=>Md(t)&&!0!==t.wrapper)(o)&&md(t.schema,e)&&vd(t,n,p);return i&&r})(a,_,S)){const t=i.rename(a,p);return c(t),l.push(t),void(h=null)}if(Td(o)){let t=u(r,a);if(!t&&x(b)&&Ed(o)&&(t=u(r,b)),!Id(o)||t)return void(h=null)}x(f)&&((e,n,r,a)=>{const l=e.nodeName.toLowerCase(),c=vd(t,p,l)&&vd(t,n,p),u=!s&&rr(e)&&qa(e.data),h=Bh(e),d=!Id(o)||!i.isBlock(e);return(r||a)&&c&&!u&&!h&&d})(a,_,S,y)?(h||(h=i.clone(f,!1),b.insertBefore(h,a),l.push(h)),y&&m&&(d=v),h.appendChild(a)):(h=null,X(ut(a.childNodes),g),m&&(d=v),h=null)}};X(a,g)})),!0===o.links&&X(l,(t=>{const e=t=>{"A"===t.nodeName&&c(t,o),X(ut(t.childNodes),e)};e(t)})),X(l,(a=>{const s=(t=>{let e=0;return X(t.childNodes,(t=>{(t=>x(t)&&rr(t)&&0===t.length)(t)||Zh(t)||e++})),e})(a);!(l.length>1)&&i.isBlock(a)||0!==s?(Id(o)||Md(o)&&o.wrapper)&&(o.exact||1!==s||(a=(t=>Q(t.childNodes,dd).filter((t=>"false"!==i.getContentEditable(t)&&Av(i,t,o))).map((e=>{const n=i.clone(e,!1);return c(n),i.replace(n,t,!0),i.remove(e,!0),n})).getOr(t))(a)),((t,e,n,i)=>{xy(e,(e=>{Id(e)&&xy(t.dom.select(e.inline,i),(i=>{Zv(i)&&by(t,e,n,i,e.exact?i:null)})),((t,e,n)=>{if(e.clear_child_styles){const i=e.links?"*:not(a)":"*";$v(t.select(i,n),(n=>{Zv(n)&&t.isEditable(n)&&$v(e.styles,((e,i)=>{t.setStyle(n,i,"")}))}))}})(t.dom,e,i)}))})(t,r,n,a),((t,e,n,i,r)=>{const o=r.parentNode;Tv(t,o,n,i)&&by(t,e,i,r)||e.merge_with_parents&&o&&t.dom.getParent(o,(o=>!!Tv(t,o,n,i)&&(by(t,e,i,r),!0)))})(t,o,e,n,a),((t,e,n,i)=>{if(e.styles&&e.styles.backgroundColor){const r=ey(t,"fontSize");ty(i,(e=>r(e)&&t.isEditable(e)),ny(t,"backgroundColor",xd(e.styles.backgroundColor,n)))}})(i,o,n,a),((t,e,n,i)=>{const r=e=>{if(Zi(e)&&$i(e.parentNode)&&t.isEditable(e)){const n=Cd(t,e.parentNode);t.getStyle(e,"color")&&n?t.setStyle(e,"text-decoration",n):t.getStyle(e,"text-decoration")===n&&t.setStyle(e,"text-decoration",null)}};e.styles&&(e.styles.color||e.styles.textDecoration)&&(Pe.walk(i,r,"childNodes"),r(i))})(i,o,0,a),((t,e,n,i)=>{if(Id(e)&&("sub"===e.inline||"sup"===e.inline)){const n=ey(t,"fontSize");ty(i,(e=>n(e)&&t.isEditable(e)),ny(t,"fontSize",""));const r=U(t.select("sup"===e.inline?"sub":"sup",i),t.isEditable);t.remove(r,!0)}})(i,o,0,a),Jv(t,o,0,a)):i.remove(a,!0)}))},f=hd(i)?i:l.getNode();if("false"===s.getContentEditable(f)&&!bd(t,f))return u(r,i=f),void np(t,e,i,n);if(o){if(i)if(hd(i)){if(!u(r,i)){const t=s.createRng();t.setStartBefore(i),t.setEndAfter(i),p(s,qd(s,t,r),!0)}}else p(s,i,!0);else a&&Id(o)&&!nd(t).length?((t,e,n)=>{let i;const r=t.selection,o=t.formatter.get(e);if(!o)return;const a=r.getRng();let s=a.startOffset;const l=a.startContainer.nodeValue;i=zh(t.getBody(),r.getStart());const c=/[^\s\u00a0\u00ad\u200b\ufeff]/;if(l&&s>0&&s<l.length&&c.test(l.charAt(s))&&c.test(l.charAt(s-1))){const i=r.getBookmark();a.collapse(!0);let s=qd(t.dom,a,o);s=zp(s),t.formatter.apply(e,n,s),r.moveToBookmark(i)}else{let o=i?Ov(i):null;i&&(null==o?void 0:o.data)===Ev||(u=t.getDoc(),h=Dv(!0).dom,i=u.importNode(h,!0),o=i.firstChild,a.insertNode(i),s=1),t.formatter.apply(e,n,i),r.setCursorLocation(o,s)}var u,h})(t,e,n):(l.setRng(dv(l.getRng())),pd(t,(()=>{cd(t,((t,e)=>{const n=e?t:qd(s,t,r);p(s,n,!1)}))}),R),t.nodeChanged()),Yv(t.formatter,e).each((e=>{X((t=>U((t=>{const e=t.getSelectedBlocks(),n=t.getRng();if(t.isCollapsed())return[];if(1===e.length)return Xv(n,e[0])&&Gv(n,e[0])?e:[];{const t=lt(e).filter((t=>Xv(n,t))).toArray(),i=ct(e).filter((t=>Gv(n,t))).toArray(),r=e.slice(1,-1);return t.concat(r).concat(i)}})(t),qv(t.dom)))(t.selection),(t=>wy(s,t,e,n)))}));((t,e)=>{Ct(Hv,t)&&X(Hv[t],(t=>{t(e)}))})(e,t)}np(t,e,i,n)},Cy=(t,e,n,i)=>{(i||t.selection.isEditable())&&Sy(t,e,n,i)},ky=t=>Ct(t,"vars"),Ay=t=>t.selection.getStart(),My=(t,e,n,i,r)=>K(e,(e=>{const o=t.formatter.matchNode(e,n,null!=r?r:{},i);return!y(o)}),(e=>!!Cv(t,e,n)||!i&&x(t.formatter.matchNode(e,n,r,!0)))),Ty=(t,e)=>{const n=null!=e?e:Ay(t);return U(kd(t.dom,n),(t=>$i(t)&&!tr(t)))},Iy=(t,e,n)=>{const i=Ty(t,e);gt(n,((n,r)=>{const o=n=>{const o=My(t,i,r,n.similar,ky(n)?n.vars:void 0),a=o.isSome();if(n.state.get()!==a){n.state.set(a);const t=o.getOr(e);ky(n)?n.callback(a,{node:t,format:r,parents:i}):X(n.callbacks,(e=>e(a,{node:t,format:r,parents:i})))}};X([n.withSimilar,n.withoutSimilar],o),X(n.withVars,o)}))},Ey=Pe.explode,Oy=()=>{const t={};return{addFilter:(e,n)=>{X(Ey(e),(e=>{Ct(t,e)||(t[e]={name:e,callbacks:[]}),t[e].callbacks.push(n)}))},getFilters:()=>wt(t),removeFilter:(e,n)=>{X(Ey(e),(e=>{if(Ct(t,e))if(x(n)){const i=t[e],r=U(i.callbacks,(t=>t!==n));r.length>0?i.callbacks=r:delete t[e]}else delete t[e]}))}}},Dy=t=>{const[e,...n]=t.split(","),i=n.join(","),r=/data:([^/]+\/[^;]+)(;.+)?/.exec(e);if(r){const t=";base64"===r[2],e=t?(t=>{const e=/([a-z0-9+\/=\s]+)/i.exec(t);return e?e[1]:""})(i):decodeURIComponent(i);return B.some({type:r[1],data:e,base64Encoded:t})}return B.none()},Ly=(t,e,n=!0)=>{let i=e;if(n)try{i=atob(e)}catch(t){return B.none()}const r=new Uint8Array(i.length);for(let t=0;t<r.length;t++)r[t]=i.charCodeAt(t);return B.some(new Blob([r],{type:t}))},Py=t=>new Promise(((e,n)=>{const i=new FileReader;i.onloadend=()=>{e(i.result)},i.onerror=()=>{var t;n(null===(t=i.error)||void 0===t?void 0:t.message)},i.readAsDataURL(t)}));let Ny=0;const Ry=(t,e,n)=>Dy(t).bind((({data:t,type:i,base64Encoded:r})=>{if(e&&!r)return B.none();{const e=r?t:btoa(t);return n(e,i)}})),By=(t,e,n)=>{const i=t.create("blobid"+Ny++,e,n);return t.add(i),i},zy=(t,e,n=!1)=>Ry(e,n,((e,n)=>B.from(t.getByData(e,n)).orThunk((()=>Ly(n,e).map((n=>By(t,n,e))))))),Fy=/^(?:(?:(?:[A-Za-z][A-Za-z\d.+-]{0,14}:\/\/(?:[-.~*+=!&;:'%@?^${}(),\w]+@)?|www\.|[-;:&=+$,.\w]+@)([A-Za-z\d-]+(?:\.[A-Za-z\d-]+)*))(?::\d+)?(?:\/(?:[-.~*+=!;:'%@$(),\/\w]*[-~*+=%@$()\/\w])?)?(?:\?(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?(?:#(?:[-.~*+=!&;:'%@?^${}(),\/\w]+)?)?)$/,Vy=t=>B.from(t.match(Fy)).bind((t=>st(t,1))).map((t=>jt(t,"www.")?t.substring(4):t)),Hy=(t,e)=>{B.from(t.attr("src")).bind(Vy).forall((t=>!W(e,t)))&&t.attr("sandbox","")},Wy=(t,e)=>jt(t,`${e}/`),{entries:jy,setPrototypeOf:Yy,isFrozen:Xy,getPrototypeOf:Gy,getOwnPropertyDescriptor:qy}=Object;let{freeze:Uy,seal:$y,create:Zy}=Object,{apply:Ky,construct:Qy}="undefined"!=typeof Reflect&&Reflect;Ky||(Ky=function(t,e,n){return t.apply(e,n)}),Uy||(Uy=function(t){return t}),$y||($y=function(t){return t}),Qy||(Qy=function(t,e){return new t(...e)});const Jy=hb(Array.prototype.forEach),tb=hb(Array.prototype.pop),eb=hb(Array.prototype.push),nb=hb(String.prototype.toLowerCase),ib=hb(String.prototype.toString),rb=hb(String.prototype.match),ob=hb(String.prototype.replace),ab=hb(String.prototype.indexOf),sb=hb(String.prototype.trim),lb=hb(RegExp.prototype.test),cb=(ub=TypeError,function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return Qy(ub,e)});var ub;function hb(t){return function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];return Ky(t,e,i)}}function db(t,e,n){var i;n=null!==(i=n)&&void 0!==i?i:nb,Yy&&Yy(t,null);let r=e.length;for(;r--;){let i=e[r];if("string"==typeof i){const t=n(i);t!==i&&(Xy(e)||(e[r]=t),i=t)}t[i]=!0}return t}function pb(t){const e=Zy(null);for(const[n,i]of jy(t))e[n]=i;return e}function fb(t,e){for(;null!==t;){const n=qy(t,e);if(n){if(n.get)return hb(n.get);if("function"==typeof n.value)return hb(n.value)}t=Gy(t)}return function(t){return console.warn("fallback value for",t),null}}const gb=Uy(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),mb=Uy(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),vb=Uy(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),yb=Uy(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),bb=Uy(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),xb=Uy(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),_b=Uy(["#text"]),wb=Uy(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","xmlns","slot"]),Sb=Uy(["accent-height","accumulate","additive","alignment-baseline","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Cb=Uy(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),kb=Uy(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Ab=$y(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Mb=$y(/<%[\w\W]*|[\w\W]*%>/gm),Tb=$y(/\${[\w\W]*}/gm),Ib=$y(/^data-[\-\w.\u00B7-\uFFFF]/),Eb=$y(/^aria-[\-\w]+$/),Ob=$y(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Db=$y(/^(?:\w+script|data):/i),Lb=$y(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Pb=$y(/^html$/i);var Nb=Object.freeze({__proto__:null,MUSTACHE_EXPR:Ab,ERB_EXPR:Mb,TMPLIT_EXPR:Tb,DATA_ATTR:Ib,ARIA_ATTR:Eb,IS_ALLOWED_URI:Ob,IS_SCRIPT_OR_DATA:Db,ATTR_WHITESPACE:Lb,DOCTYPE_NAME:Pb});const Rb=()=>"undefined"==typeof window?null:window;var Bb=function t(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Rb();const n=e=>t(e);if(n.version="3.0.5",n.removed=[],!e||!e.document||9!==e.document.nodeType)return n.isSupported=!1,n;const i=e.document,r=i.currentScript;let{document:o}=e;const{DocumentFragment:a,HTMLTemplateElement:s,Node:l,Element:c,NodeFilter:u,NamedNodeMap:h=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:d,DOMParser:p,trustedTypes:f}=e,g=c.prototype,m=fb(g,"cloneNode"),v=fb(g,"nextSibling"),y=fb(g,"childNodes"),b=fb(g,"parentNode");if("function"==typeof s){const t=o.createElement("template");t.content&&t.content.ownerDocument&&(o=t.content.ownerDocument)}let x,_="";const{implementation:w,createNodeIterator:S,createDocumentFragment:C,getElementsByTagName:k}=o,{importNode:A}=i;let M={};n.isSupported="function"==typeof jy&&"function"==typeof b&&w&&void 0!==w.createHTMLDocument;const{MUSTACHE_EXPR:T,ERB_EXPR:I,TMPLIT_EXPR:E,DATA_ATTR:O,ARIA_ATTR:D,IS_SCRIPT_OR_DATA:L,ATTR_WHITESPACE:P}=Nb;let{IS_ALLOWED_URI:N}=Nb,R=null;const B=db({},[...gb,...mb,...vb,...bb,..._b]);let z=null;const F=db({},[...wb,...Sb,...Cb,...kb]);let V=Object.seal(Object.create(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),H=null,W=null,j=!0,Y=!0,X=!1,G=!0,q=!1,U=!1,$=!1,Z=!1,K=!1,Q=!1,J=!1,tt=!0,et=!1,nt=!0,it=!1,rt={},ot=null;const at=db({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let st=null;const lt=db({},["audio","video","img","source","image","track"]);let ct=null;const ut=db({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),ht="http://www.w3.org/1998/Math/MathML",dt="http://www.w3.org/2000/svg",pt="http://www.w3.org/1999/xhtml";let ft=pt,gt=!1,mt=null;const vt=db({},[ht,dt,pt],ib);let yt;const bt=["application/xhtml+xml","text/html"];let xt,_t=null;const wt=o.createElement("form"),St=function(t){return t instanceof RegExp||t instanceof Function},Ct=function(t){if(!_t||_t!==t){if(t&&"object"==typeof t||(t={}),t=pb(t),yt=yt=-1===bt.indexOf(t.PARSER_MEDIA_TYPE)?"text/html":t.PARSER_MEDIA_TYPE,xt="application/xhtml+xml"===yt?ib:nb,R="ALLOWED_TAGS"in t?db({},t.ALLOWED_TAGS,xt):B,z="ALLOWED_ATTR"in t?db({},t.ALLOWED_ATTR,xt):F,mt="ALLOWED_NAMESPACES"in t?db({},t.ALLOWED_NAMESPACES,ib):vt,ct="ADD_URI_SAFE_ATTR"in t?db(pb(ut),t.ADD_URI_SAFE_ATTR,xt):ut,st="ADD_DATA_URI_TAGS"in t?db(pb(lt),t.ADD_DATA_URI_TAGS,xt):lt,ot="FORBID_CONTENTS"in t?db({},t.FORBID_CONTENTS,xt):at,H="FORBID_TAGS"in t?db({},t.FORBID_TAGS,xt):{},W="FORBID_ATTR"in t?db({},t.FORBID_ATTR,xt):{},rt="USE_PROFILES"in t&&t.USE_PROFILES,j=!1!==t.ALLOW_ARIA_ATTR,Y=!1!==t.ALLOW_DATA_ATTR,X=t.ALLOW_UNKNOWN_PROTOCOLS||!1,G=!1!==t.ALLOW_SELF_CLOSE_IN_ATTR,q=t.SAFE_FOR_TEMPLATES||!1,U=t.WHOLE_DOCUMENT||!1,K=t.RETURN_DOM||!1,Q=t.RETURN_DOM_FRAGMENT||!1,J=t.RETURN_TRUSTED_TYPE||!1,Z=t.FORCE_BODY||!1,tt=!1!==t.SANITIZE_DOM,et=t.SANITIZE_NAMED_PROPS||!1,nt=!1!==t.KEEP_CONTENT,it=t.IN_PLACE||!1,N=t.ALLOWED_URI_REGEXP||Ob,ft=t.NAMESPACE||pt,V=t.CUSTOM_ELEMENT_HANDLING||{},t.CUSTOM_ELEMENT_HANDLING&&St(t.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(V.tagNameCheck=t.CUSTOM_ELEMENT_HANDLING.tagNameCheck),t.CUSTOM_ELEMENT_HANDLING&&St(t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(V.attributeNameCheck=t.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),t.CUSTOM_ELEMENT_HANDLING&&"boolean"==typeof t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(V.allowCustomizedBuiltInElements=t.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),q&&(Y=!1),Q&&(K=!0),rt&&(R=db({},[..._b]),z=[],!0===rt.html&&(db(R,gb),db(z,wb)),!0===rt.svg&&(db(R,mb),db(z,Sb),db(z,kb)),!0===rt.svgFilters&&(db(R,vb),db(z,Sb),db(z,kb)),!0===rt.mathMl&&(db(R,bb),db(z,Cb),db(z,kb))),t.ADD_TAGS&&(R===B&&(R=pb(R)),db(R,t.ADD_TAGS,xt)),t.ADD_ATTR&&(z===F&&(z=pb(z)),db(z,t.ADD_ATTR,xt)),t.ADD_URI_SAFE_ATTR&&db(ct,t.ADD_URI_SAFE_ATTR,xt),t.FORBID_CONTENTS&&(ot===at&&(ot=pb(ot)),db(ot,t.FORBID_CONTENTS,xt)),nt&&(R["#text"]=!0),U&&db(R,["html","head","body"]),R.table&&(db(R,["tbody"]),delete H.tbody),t.TRUSTED_TYPES_POLICY){if("function"!=typeof t.TRUSTED_TYPES_POLICY.createHTML)throw cb('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!=typeof t.TRUSTED_TYPES_POLICY.createScriptURL)throw cb('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');x=t.TRUSTED_TYPES_POLICY,_=x.createHTML("")}else void 0===x&&(x=function(t,e){if("object"!=typeof t||"function"!=typeof t.createPolicy)return null;let n=null;const i="data-tt-policy-suffix";e&&e.hasAttribute(i)&&(n=e.getAttribute(i));const r="dompurify"+(n?"#"+n:"");try{return t.createPolicy(r,{createHTML:t=>t,createScriptURL:t=>t})}catch(t){return console.warn("TrustedTypes policy "+r+" could not be created."),null}}(f,r)),null!==x&&"string"==typeof _&&(_=x.createHTML(""));Uy&&Uy(t),_t=t}},kt=db({},["mi","mo","mn","ms","mtext"]),At=db({},["foreignobject","desc","title","annotation-xml"]),Mt=db({},["title","style","font","a","script"]),Tt=db({},mb);db(Tt,vb),db(Tt,yb);const It=db({},bb);db(It,xb);const Et=function(t){eb(n.removed,{element:t});try{t.parentNode.removeChild(t)}catch(e){t.remove()}},Ot=function(t,e){try{eb(n.removed,{attribute:e.getAttributeNode(t),from:e})}catch(t){eb(n.removed,{attribute:null,from:e})}if(e.removeAttribute(t),"is"===t&&!z[t])if(K||Q)try{Et(e)}catch(t){}else try{e.setAttribute(t,"")}catch(t){}},Dt=function(t){let e,n;if(Z)t="<remove></remove>"+t;else{const e=rb(t,/^[\r\n\t ]+/);n=e&&e[0]}"application/xhtml+xml"===yt&&ft===pt&&(t='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+t+"</body></html>");const i=x?x.createHTML(t):t;if(ft===pt)try{e=(new p).parseFromString(i,yt)}catch(t){}if(!e||!e.documentElement){e=w.createDocument(ft,"template",null);try{e.documentElement.innerHTML=gt?_:i}catch(t){}}const r=e.body||e.documentElement;return t&&n&&r.insertBefore(o.createTextNode(n),r.childNodes[0]||null),ft===pt?k.call(e,U?"html":"body")[0]:U?e.documentElement:r},Lt=function(t){return S.call(t.ownerDocument||t,t,u.SHOW_ELEMENT|u.SHOW_COMMENT|u.SHOW_TEXT,null,!1)},Pt=function(t){return"object"==typeof l?t instanceof l:t&&"object"==typeof t&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName},Nt=function(t,e,i){M[t]&&Jy(M[t],(t=>{t.call(n,e,i,_t)}))},Rt=function(t){let e;if(Nt("beforeSanitizeElements",t,null),(i=t)instanceof d&&("string"!=typeof i.nodeName||"string"!=typeof i.textContent||"function"!=typeof i.removeChild||!(i.attributes instanceof h)||"function"!=typeof i.removeAttribute||"function"!=typeof i.setAttribute||"string"!=typeof i.namespaceURI||"function"!=typeof i.insertBefore||"function"!=typeof i.hasChildNodes))return Et(t),!0;var i;const r=xt(t.nodeName);if(Nt("uponSanitizeElement",t,{tagName:r,allowedTags:R}),t.hasChildNodes()&&!Pt(t.firstElementChild)&&(!Pt(t.content)||!Pt(t.content.firstElementChild))&&lb(/<[/\w]/g,t.innerHTML)&&lb(/<[/\w]/g,t.textContent))return Et(t),!0;if(!R[r]||H[r]){if(!H[r]&&zt(r)){if(V.tagNameCheck instanceof RegExp&&lb(V.tagNameCheck,r))return!1;if(V.tagNameCheck instanceof Function&&V.tagNameCheck(r))return!1}if(nt&&!ot[r]){const e=b(t)||t.parentNode,n=y(t)||t.childNodes;if(n&&e)for(let i=n.length-1;i>=0;--i)e.insertBefore(m(n[i],!0),v(t))}return Et(t),!0}return t instanceof c&&!function(t){let e=b(t);e&&e.tagName||(e={namespaceURI:ft,tagName:"template"});const n=nb(t.tagName),i=nb(e.tagName);return!!mt[t.namespaceURI]&&(t.namespaceURI===dt?e.namespaceURI===pt?"svg"===n:e.namespaceURI===ht?"svg"===n&&("annotation-xml"===i||kt[i]):Boolean(Tt[n]):t.namespaceURI===ht?e.namespaceURI===pt?"math"===n:e.namespaceURI===dt?"math"===n&&At[i]:Boolean(It[n]):t.namespaceURI===pt?!(e.namespaceURI===dt&&!At[i])&&!(e.namespaceURI===ht&&!kt[i])&&!It[n]&&(Mt[n]||!Tt[n]):!("application/xhtml+xml"!==yt||!mt[t.namespaceURI]))}(t)?(Et(t),!0):"noscript"!==r&&"noembed"!==r&&"noframes"!==r||!lb(/<\/no(script|embed|frames)/i,t.innerHTML)?(q&&3===t.nodeType&&(e=t.textContent,e=ob(e,T," "),e=ob(e,I," "),e=ob(e,E," "),t.textContent!==e&&(eb(n.removed,{element:t.cloneNode()}),t.textContent=e)),Nt("afterSanitizeElements",t,null),!1):(Et(t),!0)},Bt=function(t,e,n){if(tt&&("id"===e||"name"===e)&&(n in o||n in wt))return!1;if(Y&&!W[e]&&lb(O,e));else if(j&&lb(D,e));else if(!z[e]||W[e]){if(!(zt(t)&&(V.tagNameCheck instanceof RegExp&&lb(V.tagNameCheck,t)||V.tagNameCheck instanceof Function&&V.tagNameCheck(t))&&(V.attributeNameCheck instanceof RegExp&&lb(V.attributeNameCheck,e)||V.attributeNameCheck instanceof Function&&V.attributeNameCheck(e))||"is"===e&&V.allowCustomizedBuiltInElements&&(V.tagNameCheck instanceof RegExp&&lb(V.tagNameCheck,n)||V.tagNameCheck instanceof Function&&V.tagNameCheck(n))))return!1}else if(ct[e]);else if(lb(N,ob(n,P,"")));else if("src"!==e&&"xlink:href"!==e&&"href"!==e||"script"===t||0!==ab(n,"data:")||!st[t])if(X&&!lb(L,ob(n,P,"")));else if(n)return!1;return!0},zt=function(t){return t.indexOf("-")>0},Ft=function(t){let e,n,i,r;Nt("beforeSanitizeAttributes",t,null);const{attributes:o}=t;if(!o)return;const a={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:z};for(r=o.length;r--;){e=o[r];const{name:s,namespaceURI:l}=e;n="value"===s?e.value:sb(e.value);const c=n;if(i=xt(s),a.attrName=i,a.attrValue=n,a.keepAttr=!0,a.forceKeepAttr=void 0,Nt("uponSanitizeAttribute",t,a),n=a.attrValue,a.forceKeepAttr)continue;if(!a.keepAttr){Ot(s,t);continue}if(!G&&lb(/\/>/i,n)){Ot(s,t);continue}q&&(n=ob(n,T," "),n=ob(n,I," "),n=ob(n,E," "));const u=xt(t.nodeName);if(Bt(u,i,n)){if(!et||"id"!==i&&"name"!==i||(Ot(s,t),n="user-content-"+n),x&&"object"==typeof f&&"function"==typeof f.getAttributeType)if(l);else switch(f.getAttributeType(u,i)){case"TrustedHTML":n=x.createHTML(n);break;case"TrustedScriptURL":n=x.createScriptURL(n)}if(n!==c)try{l?t.setAttributeNS(l,s,n):t.setAttribute(s,n)}catch(e){Ot(s,t)}}else Ot(s,t)}Nt("afterSanitizeAttributes",t,null)},Vt=function t(e){let n;const i=Lt(e);for(Nt("beforeSanitizeShadowDOM",e,null);n=i.nextNode();)Nt("uponSanitizeShadowNode",n,null),Rt(n)||(n.content instanceof a&&t(n.content),Ft(n));Nt("afterSanitizeShadowDOM",e,null)};return n.sanitize=function(t){let e,r,o,s,c=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(gt=!t,gt&&(t="\x3c!--\x3e"),"string"!=typeof t&&!Pt(t)){if("function"!=typeof t.toString)throw cb("toString is not a function");if("string"!=typeof(t=t.toString()))throw cb("dirty is not a string, aborting")}if(!n.isSupported)return t;if($||Ct(c),n.removed=[],"string"==typeof t&&(it=!1),it){if(t.nodeName){const e=xt(t.nodeName);if(!R[e]||H[e])throw cb("root node is forbidden and cannot be sanitized in-place")}}else if(t instanceof l)e=Dt("\x3c!----\x3e"),r=e.ownerDocument.importNode(t,!0),1===r.nodeType&&"BODY"===r.nodeName||"HTML"===r.nodeName?e=r:e.appendChild(r);else{if(!K&&!q&&!U&&-1===t.indexOf("<"))return x&&J?x.createHTML(t):t;if(e=Dt(t),!e)return K?null:J?_:""}e&&Z&&Et(e.firstChild);const u=Lt(it?t:e);for(;o=u.nextNode();)Rt(o)||(o.content instanceof a&&Vt(o.content),Ft(o));if(it)return t;if(K){if(Q)for(s=C.call(e.ownerDocument);e.firstChild;)s.appendChild(e.firstChild);else s=e;return(z.shadowroot||z.shadowrootmode)&&(s=A.call(i,s,!0)),s}let h=U?e.outerHTML:e.innerHTML;return U&&R["!doctype"]&&e.ownerDocument&&e.ownerDocument.doctype&&e.ownerDocument.doctype.name&&lb(Pb,e.ownerDocument.doctype.name)&&(h="<!DOCTYPE "+e.ownerDocument.doctype.name+">\n"+h),q&&(h=ob(h,T," "),h=ob(h,I," "),h=ob(h,E," ")),x&&J?x.createHTML(h):h},n.setConfig=function(t){Ct(t),$=!0},n.clearConfig=function(){_t=null,$=!1},n.isValidAttribute=function(t,e,n){_t||Ct({});const i=xt(t),r=xt(e);return Bt(i,r,n)},n.addHook=function(t,e){"function"==typeof e&&(M[t]=M[t]||[],eb(M[t],e))},n.removeHook=function(t){if(M[t])return tb(M[t])},n.removeHooks=function(t){M[t]&&(M[t]=[])},n.removeAllHooks=function(){M={}},n}();const zb=Pe.each,Fb=Pe.trim,Vb=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],Hb={ftp:21,http:80,https:443,mailto:25},Wb=["img","video"],jb=(t,e,n)=>{const i=(t=>{try{return decodeURIComponent(t)}catch(e){return unescape(t)}})(e).replace(/\s/g,"");return!t.allow_script_urls&&(!!/((java|vb)script|mhtml):/i.test(i)||!t.allow_html_data_urls&&(/^data:image\//i.test(i)?((t,e)=>x(t)?!t:!x(e)||!W(Wb,e))(t.allow_svg_data_urls,n)&&/^data:image\/svg\+xml/i.test(i):/^data:/i.test(i)))};class Yb{static parseDataUri(t){let e;const n=decodeURIComponent(t).split(","),i=/data:([^;]+)/.exec(n[0]);return i&&(e=i[1]),{type:e,data:n[1]}}static isDomSafe(t,e,n={}){if(n.allow_script_urls)return!0;{const i=uo.decode(t).replace(/[\s\u0000-\u001F]+/g,"");return!jb(n,i,e)}}static getDocumentBaseUrl(t){var e;let n;return n=0!==t.protocol.indexOf("http")&&"file:"!==t.protocol?null!==(e=t.href)&&void 0!==e?e:"":t.protocol+"//"+t.host+t.pathname,/^[^:]+:\/\/\/?[^\/]+\//.test(n)&&(n=n.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(n)||(n+="/")),n}constructor(t,e={}){this.path="",this.directory="",t=Fb(t),this.settings=e;const n=e.base_uri,i=this;if(/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t))return void(i.source=t);const r=0===t.indexOf("//");if(0!==t.indexOf("/")||r||(t=(n&&n.protocol||"http")+"://mce_host"+t),!/^[\w\-]*:?\/\//.test(t)){const e=n?n.path:new Yb(document.location.href).directory;if(""===(null==n?void 0:n.protocol))t="//mce_host"+i.toAbsPath(e,t);else{const r=/([^#?]*)([#?]?.*)/.exec(t);r&&(t=(n&&n.protocol||"http")+"://mce_host"+i.toAbsPath(e,r[1])+r[2])}}t=t.replace(/@@/g,"(mce_at)");const o=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?(\[[a-zA-Z0-9:.%]+\]|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t);o&&zb(Vb,((t,e)=>{let n=o[e];n&&(n=n.replace(/\(mce_at\)/g,"@@")),i[t]=n})),n&&(i.protocol||(i.protocol=n.protocol),i.userInfo||(i.userInfo=n.userInfo),i.port||"mce_host"!==i.host||(i.port=n.port),i.host&&"mce_host"!==i.host||(i.host=n.host),i.source=""),r&&(i.protocol="")}setPath(t){const e=/^(.*?)\/?(\w+)?$/.exec(t);e&&(this.path=e[0],this.directory=e[1],this.file=e[2]),this.source="",this.getURI()}toRelative(t){if("./"===t)return t;const e=new Yb(t,{base_uri:this});if("mce_host"!==e.host&&this.host!==e.host&&e.host||this.port!==e.port||this.protocol!==e.protocol&&""!==e.protocol)return e.getURI();const n=this.getURI(),i=e.getURI();if(n===i||"/"===n.charAt(n.length-1)&&n.substr(0,n.length-1)===i)return n;let r=this.toRelPath(this.path,e.path);return e.query&&(r+="?"+e.query),e.anchor&&(r+="#"+e.anchor),r}toAbsolute(t,e){const n=new Yb(t,{base_uri:this});return n.getURI(e&&this.isSameOrigin(n))}isSameOrigin(t){if(this.host==t.host&&this.protocol==t.protocol){if(this.port==t.port)return!0;const e=this.protocol?Hb[this.protocol]:null;if(e&&(this.port||e)==(t.port||e))return!0}return!1}toRelPath(t,e){let n,i,r=0,o="";const a=t.substring(0,t.lastIndexOf("/")).split("/"),s=e.split("/");if(a.length>=s.length)for(n=0,i=a.length;n<i;n++)if(n>=s.length||a[n]!==s[n]){r=n+1;break}if(a.length<s.length)for(n=0,i=s.length;n<i;n++)if(n>=a.length||a[n]!==s[n]){r=n+1;break}if(1===r)return e;for(n=0,i=a.length-(r-1);n<i;n++)o+="../";for(n=r-1,i=s.length;n<i;n++)o+=n!==r-1?"/"+s[n]:s[n];return o}toAbsPath(t,e){let n=0;const i=/\/$/.test(e)?"/":"",r=t.split("/"),o=e.split("/"),a=[];zb(r,(t=>{t&&a.push(t)}));const s=[];for(let t=o.length-1;t>=0;t--)0!==o[t].length&&"."!==o[t]&&(".."!==o[t]?n>0?n--:s.push(o[t]):n++);const l=a.length-n;let c;return c=l<=0?it(s).join("/"):a.slice(0,l).join("/")+"/"+it(s).join("/"),0!==c.indexOf("/")&&(c="/"+c),i&&c.lastIndexOf("/")!==c.length-1&&(c+=i),c}getURI(t=!1){let e;return this.source&&!t||(e="",t||(this.protocol?e+=this.protocol+"://":e+="//",this.userInfo&&(e+=this.userInfo+"@"),this.host&&(e+=this.host),this.port&&(e+=":"+this.port)),this.path&&(e+=this.path),this.query&&(e+="?"+this.query),this.anchor&&(e+="#"+this.anchor),this.source=e),this.source}}const Xb=Pe.makeMap("src,href,data,background,action,formaction,poster,xlink:href"),Gb="data-mce-type";let qb=0;const Ub=(t,e,n,i,r)=>{var o,a,s,l;const c=e.validate,u=n.getSpecialElements();8===t.nodeType&&!e.allow_conditional_comments&&/^\[if/i.test(null!==(o=t.nodeValue)&&void 0!==o?o:"")&&(t.nodeValue=" "+t.nodeValue);const h=null!==(a=null==r?void 0:r.tagName)&&void 0!==a?a:t.nodeName.toLowerCase();if("html"!==i&&n.isValid(i))return void(x(r)&&(r.allowedTags[h]=!0));if(1!==t.nodeType||"body"===h)return;const p=bn(t),f=nn(p,Gb),g=tn(p,"data-mce-bogus");if(!f&&d(g))return void("all"===g?xi(p):_i(p));const m=n.getElementRule(h);if(!c||m){if(x(r)&&(r.allowedTags[h]=!0),c&&m&&!f){if(X(null!==(s=m.attributesForced)&&void 0!==s?s:[],(t=>{Qe(p,t.name,"{$uid}"===t.value?"mce_"+qb++:t.value)})),X(null!==(l=m.attributesDefault)&&void 0!==l?l:[],(t=>{nn(p,t.name)||Qe(p,t.name,"{$uid}"===t.value?"mce_"+qb++:t.value)})),m.attributesRequired&&!j(m.attributesRequired,(t=>nn(p,t))))return void _i(p);if(m.removeEmptyAttrs&&(t=>{const e=t.dom.attributes;return null==e||0===e.length})(p))return void _i(p);m.outputName&&m.outputName!==h&&((t,e)=>{const n=((t,e)=>{const n=vn(e),i=on(t);return Je(n,i),n})(t,e);fi(t,n);const i=Nn(t);yi(n,i),xi(t)})(p,m.outputName)}}else Ct(u,h)?xi(p):_i(p)},$b=(t,e,n,i,r,o)=>"html"!==n&&!Ar(i)||!(r in Xb&&jb(t,o,i))&&(!t.validate||e.isValid(i,r)||jt(r,"data-")||jt(r,"aria-")),Zb=(t,e)=>t.hasAttribute(Gb)&&("id"===e||"class"===e||"style"===e),Kb=(t,e)=>t in e.getBoolAttrs(),Qb=(t,e,n,i)=>{const{attributes:r}=t;for(let o=r.length-1;o>=0;o--){const a=r[o],s=a.name,l=a.value;$b(e,n,i,t.tagName.toLowerCase(),s,l)||Zb(t,s)?Kb(s,n)&&t.setAttribute(s,s):t.removeAttribute(s)}},Jb=t=>{const e=["type","href","role","arcrole","title","show","actuate","label","from","to"].map((t=>`xlink:${t}`)),n={IN_PLACE:!0,USE_PROFILES:{html:!0,svg:!0,svgFilters:!0},ALLOWED_ATTR:e};return Bb().sanitize(t,n),t.innerHTML},tx=Pe.makeMap,ex=Pe.extend,nx=(t,e,n,i)=>{const r=t.name,o=r in n&&"title"!==r&&"textarea"!==r,a=e.childNodes;for(let e=0,r=a.length;e<r;e++){const r=a[e],s=new Wf(r.nodeName.toLowerCase(),r.nodeType);if($i(r)){const t=r.attributes;for(let e=0,n=t.length;e<n;e++){const n=t[e];s.attr(n.name,n.value)}Ar(s.name)&&(i(r),s.value=r.innerHTML)}else rr(r)?(s.value=r.data,o&&(s.raw=!0)):(sr(r)||or(r)||ar(r))&&(s.value=r.data);Ar(s.name)||nx(s,r,n,i),t.append(s)}},ix=(t={},e=To())=>{const n=Oy(),i=Oy(),r={validate:!0,root_name:"body",sanitize:!0,...t},o=new DOMParser,a=((t,e)=>{const n=(()=>{let t=[];const e=()=>t[t.length-1];return{track:n=>{Mr(n)&&t.push(n);let i=e();return i&&!i.contains(n)&&(t.pop(),i=e()),Tr(i)},current:()=>Tr(e()),reset:()=>{t=[]}}})();if(t.sanitize){const i=((t,e,n)=>{const i=Bb();return i.addHook("uponSanitizeElement",((i,r)=>{Ub(i,t,e,n.track(i),r)})),i.addHook("uponSanitizeAttribute",((i,r)=>{((t,e,n,i,r)=>{const o=t.tagName.toLowerCase(),{attrName:a,attrValue:s}=r;r.keepAttr=$b(e,n,i,o,a,s),r.keepAttr?(r.allowedAttributes[a]=!0,Kb(a,n)&&(r.attrValue=a),e.allow_svg_data_urls&&jt(s,"data:image/svg+xml")&&(r.forceKeepAttr=!0)):Zb(t,a)&&(r.forceKeepAttr=!0)})(i,t,e,n.current(),r)})),i})(t,e,n),r=(e,r)=>{i.sanitize(e,((t,e)=>{const n={IN_PLACE:!0,ALLOW_UNKNOWN_PROTOCOLS:!0,ALLOWED_TAGS:["#comment","#cdata-section","body"],ALLOWED_ATTR:[]};return n.PARSER_MEDIA_TYPE=e,t.allow_script_urls?n.ALLOWED_URI_REGEXP=/.*/:t.allow_html_data_urls&&(n.ALLOWED_URI_REGEXP=/^(?!(\w+script|mhtml):)/i),n})(t,r)),i.removed=[],n.reset()};return{sanitizeHtmlElement:r,sanitizeNamespaceElement:Jb}}return{sanitizeHtmlElement:(i,r)=>{const o=document.createNodeIterator(i,NodeFilter.SHOW_ELEMENT|NodeFilter.SHOW_COMMENT|NodeFilter.SHOW_TEXT);let a;for(;a=o.nextNode();){const i=n.track(a);Ub(a,t,e,i),$i(a)&&Qb(a,t,e,i)}n.reset()},sanitizeNamespaceElement:C}})(r,e),s=n.addFilter,l=n.getFilters,c=n.removeFilter,u=i.addFilter,h=i.getFilters,p=i.removeFilter,f=(t,n)=>{const i=d(n.attr(Gb)),r=1===n.type&&!Ct(t,n.name)&&!Wr(e,n)&&!Ar(n.name);return 3===n.type||r&&!i},g={schema:e,addAttributeFilter:u,getAttributeFilters:h,removeAttributeFilter:p,addNodeFilter:s,getNodeFilters:l,removeNodeFilter:c,parse:(t,n={})=>{var i;const s=r.validate,c=null!==(i=n.context)&&void 0!==i?i:r.root_name,u=((t,n,i="html")=>{const r="xhtml"===i?"application/xhtml+xml":"text/html",s=Ct(e.getSpecialElements(),n.toLowerCase()),l=s?`<${n}>${t}</${n}>`:t,c="xhtml"===i?`<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>${l}</body></html>`:`<body>${l}</body>`,u=o.parseFromString(c,r).body;return a.sanitizeHtmlElement(u,r),s?u.firstChild:u})(t,c,n.format);Nr(e,u);const d=new Wf(c,11);nx(d,u,e.getSpecialElements(),a.sanitizeNamespaceElement),u.innerHTML="";const[p,g]=((t,e,n,i)=>{const r=n.validate,o=e.getNonEmptyElements(),a=e.getWhitespaceElements(),s=ex(tx("script,style,head,html,body,title,meta,param"),e.getBlockElements()),l=Ao(e),c=/[ \t\r\n]+/g,u=/^[ \t\r\n]+/,h=/[ \t\r\n]+$/,d=t=>{let e=t.parent;for(;x(e);){if(e.name in a)return!0;e=e.parent}return!1},p=n=>n.name in s||Wr(e,n)||Ar(n.name)&&n.parent===t,f=(e,n)=>{const r=n?e.prev:e.next;return!x(r)&&!b(e.parent)&&p(e.parent)&&(e.parent!==t||!0===i.isRootContent)};return[t=>{var e;if(3===t.type&&!d(t)){let n=null!==(e=t.value)&&void 0!==e?e:"";n=n.replace(c," "),(((t,e)=>x(t)&&(e(t)||"br"===t.name))(t.prev,p)||f(t,!0))&&(n=n.replace(u,"")),0===n.length?t.remove():t.value=n}},t=>{var s;if(1===t.type){const s=e.getElementRule(t.name);if(r&&s){const r=sv(e,o,a,t);s.paddInEmptyBlock&&r&&(t=>{let n=t;for(;x(n);){if(n.name in l)return sv(e,o,a,n);n=n.parent}return!1})(t)?ov(n,i,p,t):s.removeEmpty&&r?p(t)?t.remove():t.unwrap():s.paddEmpty&&(r||(t=>{var e;return av(t,"#text")&&(null===(e=null==t?void 0:t.firstChild)||void 0===e?void 0:e.value)===Hi})(t))&&ov(n,i,p,t)}}else if(3===t.type&&!d(t)){let e=null!==(s=t.value)&&void 0!==s?s:"";(t.next&&p(t.next)||f(t,!1))&&(e=e.replace(h,"")),0===e.length?t.remove():t.value=e}}]})(d,e,r,n),m=[],v=s?t=>((t,n)=>{hv(e,t)&&n.push(t)})(t,m):C,y={nodes:{},attributes:{}},_=t=>nv(l(),h(),t,y);if(((t,e,n)=>{const i=[];for(let n=t,r=n;n;r=n,n=n.walk()){const o=n;X(e,(t=>t(o))),b(o.parent)&&o!==t?n=r:i.push(o)}for(let t=i.length-1;t>=0;t--){const e=i[t];X(n,(t=>t(e)))}})(d,[p,_],[g,v]),m.reverse(),s&&m.length>0)if(n.context){const{pass:t,fail:i}=q(m,(t=>t.parent===d));uv(i,e,d,_),n.invalid=t.length>0}else uv(m,e,d,_);const w=((t,e)=>{var n;const i=null!==(n=e.forced_root_block)&&void 0!==n?n:t.forced_root_block;return!1===i?"":!0===i?"p":i})(r,n);return w&&("body"===d.name||n.isRootContent)&&((t,n)=>{const i=ex(tx("script,style,head,html,body,title,meta,param"),e.getBlockElements()),o=/^[ \t\r\n]+/,a=/[ \t\r\n]+$/;let s=t.firstChild,l=null;const c=t=>{var e,n;t&&(s=t.firstChild,s&&3===s.type&&(s.value=null===(e=s.value)||void 0===e?void 0:e.replace(o,"")),s=t.lastChild,s&&3===s.type&&(s.value=null===(n=s.value)||void 0===n?void 0:n.replace(a,"")))};if(e.isValidChild(t.name,n.toLowerCase())){for(;s;){const e=s.next;f(i,s)?(l||(l=new Wf(n,1),l.attr(r.forced_root_block_attrs),t.insert(l,s)),l.append(s)):(c(l),l=null),s=e}c(l)}})(d,w),n.invalid||iv(y,n),d}};return((t,e)=>{var n,i;const r=t.schema;t.addAttributeFilter("href",(t=>{let n=t.length;const i=t=>{const e=t?Pe.trim(t):"";return/\b(noopener)\b/g.test(e)?e:(t=>t.split(" ").filter((t=>t.length>0)).concat(["noopener"]).sort().join(" "))(e)};if(!e.allow_unsafe_link_target)for(;n--;){const e=t[n];"a"===e.name&&"_blank"===e.attr("target")&&e.attr("rel",i(e.attr("rel")))}})),e.allow_html_in_named_anchor||t.addAttributeFilter("id,name",(t=>{let e,n,i,r,o=t.length;for(;o--;)if(r=t[o],"a"===r.name&&r.firstChild&&!r.attr("href"))for(i=r.parent,e=r.lastChild;e&&i;)n=e.prev,i.insert(e,r),e=n})),e.fix_list_elements&&t.addNodeFilter("ul,ol",(t=>{let e,n,i=t.length;for(;i--;)if(e=t[i],n=e.parent,n&&("ul"===n.name||"ol"===n.name))if(e.prev&&"li"===e.prev.name)e.prev.append(e);else{const t=new Wf("li",1);t.attr("style","list-style-type: none"),e.wrap(t)}}));const o=r.getValidClasses();e.validate&&o&&t.addAttributeFilter("class",(t=>{var e;let n=t.length;for(;n--;){const i=t[n],r=null!==(e=i.attr("class"))&&void 0!==e?e:"",a=Pe.explode(r," ");let s="";for(let t=0;t<a.length;t++){const e=a[t];let n=!1,r=o["*"];r&&r[e]&&(n=!0),r=o[i.name],!n&&r&&r[e]&&(n=!0),n&&(s&&(s+=" "),s+=e)}s.length||(s=null),i.attr("class",s)}})),((t,e)=>{const{blob_cache:n}=e;if(n){const e=t=>{const e=t.attr("src");(t=>t.attr("src")===Ee.transparentSrc||x(t.attr("data-mce-placeholder")))(t)||(t=>x(t.attr("data-mce-bogus")))(t)||b(e)||zy(n,e,!0).each((e=>{t.attr("src",e.blobUri())}))};t.addAttributeFilter("src",(t=>X(t,e)))}})(t,e);const a=null!==(n=e.sandbox_iframes)&&void 0!==n&&n,s=dt(null!==(i=e.sandbox_iframes_exclusions)&&void 0!==i?i:[]);e.convert_unsafe_embeds&&t.addNodeFilter("object,embed",(t=>X(t,(t=>{t.replace((({type:t,src:e,width:n,height:i}={},r,o)=>{const a=(t=>y(t)?"iframe":Wy(t,"image")?"img":Wy(t,"video")?"video":Wy(t,"audio")?"audio":"iframe")(t),s=new Wf(a,1);return s.attr("audio"===a?{src:e}:{src:e,width:n,height:i}),"audio"!==a&&"video"!==a||s.attr("controls",""),"iframe"===a&&r&&Hy(s,o),s})({type:t.attr("type"),src:"object"===t.name?t.attr("data"):t.attr("src"),width:t.attr("width"),height:t.attr("height")},a,s))})))),a&&t.addNodeFilter("iframe",(t=>X(t,(t=>Hy(t,s)))))})(g,r),((t,e,n)=>{e.inline_styles&&((t,e,n)=>{var i;const r=zo();e.convert_fonts_to_spans&&((t,e,n)=>{t.addNodeFilter("font",(t=>{X(t,(t=>{const i=e.parse(t.attr("style")),r=t.attr("color"),o=t.attr("face"),a=t.attr("size");r&&(i.color=r),o&&(i["font-family"]=o),a&&Kt(a).each((t=>{i["font-size"]=n[t-1]})),t.name="span",t.attr("style",e.serialize(i)),((t,e)=>{X(["color","face","size"],(e=>{t.attr(e,null)}))})(t)}))}))})(t,r,Pe.explode(null!==(i=e.font_size_legacy_values)&&void 0!==i?i:"")),((t,e,n)=>{t.addNodeFilter("strike",(t=>{const i="html4"!==e.type;X(t,(t=>{if(i)t.name="s";else{const e=n.parse(t.attr("style"));e["text-decoration"]="line-through",t.name="span",t.attr("style",n.serialize(e))}}))}))})(t,n,r)})(t,e,n)})(g,r,e),g},rx=(t,e,n)=>{const i=(t=>bv(t)?ag({validate:!1}).serialize(t):t)(t),r=e(i);if(r.isDefaultPrevented())return r;if(bv(t)){if(r.content!==i){const e=ix({validate:!1,forced_root_block:!1,...n}).parse(r.content,{context:t.name});return{...r,content:e}}return{...r,content:t}}return r},ox=t=>({sanitize:gu(t),sandbox_iframes:_u(t),sandbox_iframes_exclusions:wu(t)}),ax=(t,e)=>{if(e.no_events)return ml.value(e);{const n=((t,e)=>t.dispatch("BeforeGetContent",e))(t,e);return n.isDefaultPrevented()?ml.error(op(t,{content:"",...n}).content):ml.value(n)}},sx=(t,e,n)=>{if(n.no_events)return e;{const i=rx(e,(e=>op(t,{...n,content:e})),ox(t));return i.content}},lx=(t,e)=>{if(e.no_events)return ml.value(e);{const n=rx(e.content,(n=>((t,e)=>t.dispatch("BeforeSetContent",e))(t,{...e,content:n})),ox(t));return n.isDefaultPrevented()?(rp(t,n),ml.error(void 0)):ml.value(n)}},cx=(t,e,n)=>{n.no_events||rp(t,{...n,content:e})},ux=(t,e,n)=>({element:t,width:e,rows:n}),hx=(t,e)=>({element:t,cells:e}),dx=(t,e)=>({x:t,y:e}),px=(t,e)=>en(t,e).bind(Kt).getOr(1),fx=(t,e,n)=>{const i=t.rows;return!!(i[n]?i[n].cells:[])[e]},gx=t=>Z(t,((t,e)=>e.cells.length>t?e.cells.length:t),0),mx=(t,e)=>{const n=t.rows;for(let t=0;t<n.length;t++){const i=n[t].cells;for(let n=0;n<i.length;n++)if(Sn(i[n],e))return B.some(dx(n,t))}return B.none()},vx=(t,e,n,i,r)=>{const o=[],a=t.rows;for(let t=n;t<=r;t++){const n=a[t].cells,r=e<i?n.slice(e,i+1):n.slice(i,e+1);o.push(hx(a[t].element,r))}return o},yx=t=>((t,e)=>{const n=Ea(t.element),i=vn("tbody");return yi(i,e),mi(n,i),n})(t,(t=>Y(t.rows,(t=>{const e=Y(t.cells,(t=>{const e=Oa(t);return rn(e,"colspan"),rn(e,"rowspan"),e})),n=Ea(t.element);return yi(n,e),n})))(t)),bx=()=>Mp([]),xx=(t,e,n)=>{const i=ed(e,t);return i.length>0?((t,e)=>((t,e)=>Jn(e,"table",E(Sn,t)))(t,e[0]).bind((t=>{const n=e[0],i=e[e.length-1],r=(t=>{const e=ux(Ea(t),0,[]);return X(Ri(t,"tr"),((t,n)=>{X(Ri(t,"td,th"),((i,r)=>{((t,e,n,i,r)=>{const o=px(r,"rowspan"),a=px(r,"colspan"),s=t.rows;for(let t=n;t<n+o;t++){s[t]||(s[t]=hx(Oa(i),[]));for(let i=e;i<e+a;i++)s[t].cells[i]=t===n&&i===e?r:Ea(r)}})(e,((t,e,n)=>{for(;fx(t,e,n);)e++;return e})(e,r,n),n,t,i)}))})),ux(e.element,gx(e.rows),e.rows)})(t);return((t,e,n)=>mx(t,e).bind((e=>mx(t,n).map((n=>((t,e,n)=>{const i=e.x,r=e.y,o=n.x,a=n.y,s=r<a?vx(t,i,r,o,a):vx(t,i,a,o,r);return ux(t.element,gx(s),s)})(t,e,n))))))(r,n,i).map((t=>Mp([yx(t)])))})).getOrThunk(bx))(t,i):((t,e,n)=>e.length>0&&e[0].collapsed?bx():((t,e,n)=>((t,e)=>{const n=Z(e,((t,e)=>(mi(e,t),e)),t);return e.length>0?Mp([n]):n})(bn(e.cloneContents()),((t,e,n)=>{const i=bn(e.commonAncestorContainer),r=Mg(i,t),o=U(r,(t=>n.isWrapper(We(t)))),a=((t,e)=>Q(t,(t=>"li"===We(t)&&ad(t,e))).fold(M([]),(e=>(t=>Q(t,(t=>"ul"===We(t)||"ol"===We(t))))(t).map((t=>{const e=vn(We(t)),n=xt(hi(t),((t,e)=>jt(e,"list-style")));return si(e,n),[vn("li"),e]})).getOr([]))))(r,e),s=o.concat(a.length?a:(t=>Va(t)?Tn(t).filter(Fa).fold(M([]),(e=>[t,e])):Fa(t)?[t]:[])(i));return Y(s,Ea)})(t,e,n)))(t,e[0],n))(t,e,n)},_x=(t,e)=>e>=0&&e<t.length&&Qh(t.charAt(e)),wx=t=>Ua(t.innerText),Sx=t=>$i(t)?t.outerHTML:rr(t)?uo.encodeRaw(t.data,!1):sr(t)?"\x3c!--"+t.data+"--\x3e":"",Cx=Nt((()=>document.implementation.createHTMLDocument("undo"))),kx=t=>{const e=t.serializer.getTempAttrs(),n=eg(t.getBody(),e);return(t=>null!==t.querySelector("iframe"))(n)?{type:"fragmented",fragments:U(Y(ut(n.childNodes),k(Ua,Sx)),(t=>t.length>0)),content:"",bookmark:null,beforeBookmark:null}:{type:"complete",fragments:null,content:Ua(n.innerHTML),bookmark:null,beforeBookmark:null}},Ax=(t,e,n)=>{const i=n?e.beforeBookmark:e.bookmark;"fragmented"===e.type?((t,e)=>{((t,e)=>{let n=0;X(t,(t=>{0===t[0]?n++:1===t[0]?(((t,e,n)=>{const i=(t=>{let e;const n=document.createElement("div"),i=document.createDocumentFragment();for(t&&(n.innerHTML=t);e=n.firstChild;)i.appendChild(e);return i})(e);if(t.hasChildNodes()&&n<t.childNodes.length){const e=t.childNodes[n];t.insertBefore(i,e)}else t.appendChild(i)})(e,t[1],n),n++):2===t[0]&&((t,e)=>{if(t.hasChildNodes()&&e<t.childNodes.length){const n=t.childNodes[e];t.removeChild(n)}})(e,n)}))})(((t,e)=>{const n=t.length+e.length+2,i=new Array(n),r=new Array(n),o=(n,i,r,a,l)=>{const c=s(n,i,r,a);if(null===c||c.start===i&&c.diag===i-a||c.end===n&&c.diag===n-r){let o=n,s=r;for(;o<i||s<a;)o<i&&s<a&&t[o]===e[s]?(l.push([0,t[o]]),++o,++s):i-n>a-r?(l.push([2,t[o]]),++o):(l.push([1,e[s]]),++s)}else{o(n,c.start,r,c.start-c.diag,l);for(let e=c.start;e<c.end;++e)l.push([0,t[e]]);o(c.end,i,c.end-c.diag,a,l)}},a=(n,i,r,o)=>{let a=n;for(;a-i<o&&a<r&&t[a]===e[a-i];)++a;return((t,e,n)=>({start:t,end:e,diag:n}))(n,a,i)},s=(n,o,s,l)=>{const c=o-n,u=l-s;if(0===c||0===u)return null;const h=c-u,d=u+c,p=(d%2==0?d:d+1)/2;let f,g,m,v,y;for(i[1+p]=n,r[1+p]=o+1,f=0;f<=p;++f){for(g=-f;g<=f;g+=2){for(m=g+p,g===-f||g!==f&&i[m-1]<i[m+1]?i[m]=i[m+1]:i[m]=i[m-1]+1,v=i[m],y=v-n+s-g;v<o&&y<l&&t[v]===e[y];)i[m]=++v,++y;if(h%2!=0&&h-f<=g&&g<=h+f&&r[m-h]<=i[m])return a(r[m-h],g+n-s,o,l)}for(g=h-f;g<=h+f;g+=2){for(m=g+p-h,g===h-f||g!==h+f&&r[m+1]<=r[m-1]?r[m]=r[m+1]-1:r[m]=r[m-1],v=r[m]-1,y=v-n+s-g;v>=n&&y>=s&&t[v]===e[y];)r[m]=v--,y--;if(h%2==0&&-f<=g&&g<=f&&r[m]<=i[m+h])return a(r[m],g+n-s,o,l)}}return null},l=[];return o(0,t.length,0,e.length,l),l})(Y(ut(e.childNodes),Sx),t),e)})(e.fragments,t.getBody()):t.setContent(e.content,{format:"raw",no_selection:!x(i)||!Vh(i)||!i.isFakeCaret}),i&&(t.selection.moveToBookmark(i),t.selection.scrollIntoView())},Mx=t=>"fragmented"===t.type?t.fragments.join(""):t.content,Tx=t=>{const e=vn("body",Cx());return Ci(e,Mx(t)),X(Ri(e,"*[data-mce-bogus]"),_i),Si(e)},Ix=(t,e)=>!(!t||!e)&&(!!((t,e)=>Mx(t)===Mx(e))(t,e)||((t,e)=>Tx(t)===Tx(e))(t,e)),Ex=t=>0===t.get(),Ox=(t,e,n)=>{Ex(n)&&(t.typing=e)},Dx=(t,e)=>{t.typing&&(Ox(t,!1,e),t.add())},Lx=t=>({init:{bindEvents:C},undoManager:{beforeChange:(e,n)=>((t,e,n)=>{Ex(e)&&n.set(pl(t.selection))})(t,e,n),add:(e,n,i,r,o,a)=>((t,e,n,i,r,o,a)=>{const s=kx(t),l=Pe.extend(o||{},s);if(!Ex(i)||t.removed)return null;const c=e.data[n.get()];if(t.dispatch("BeforeAddUndo",{level:l,lastLevel:c,originalEvent:a}).isDefaultPrevented())return null;if(c&&Ix(c,l))return null;e.data[n.get()]&&r.get().each((t=>{e.data[n.get()].beforeBookmark=t}));const u=Dc(t);if(u&&e.data.length>u){for(let t=0;t<e.data.length-1;t++)e.data[t]=e.data[t+1];e.data.length--,n.set(e.data.length)}l.bookmark=pl(t.selection),n.get()<e.data.length-1&&(e.data.length=n.get()+1),e.data.push(l),n.set(e.data.length-1);const h={level:l,lastLevel:c,originalEvent:a};return n.get()>0?(t.setDirty(!0),t.dispatch("AddUndo",h),t.dispatch("change",h)):t.dispatch("AddUndo",h),l})(t,e,n,i,r,o,a),undo:(e,n,i)=>((t,e,n,i)=>{let r;return e.typing&&(e.add(),e.typing=!1,Ox(e,!1,n)),i.get()>0&&(i.set(i.get()-1),r=e.data[i.get()],Ax(t,r,!0),t.setDirty(!0),t.dispatch("Undo",{level:r})),r})(t,e,n,i),redo:(e,n)=>((t,e,n)=>{let i;return e.get()<n.length-1&&(e.set(e.get()+1),i=n[e.get()],Ax(t,i,!1),t.setDirty(!0),t.dispatch("Redo",{level:i})),i})(t,e,n),clear:(e,n)=>((t,e,n)=>{e.data=[],n.set(0),e.typing=!1,t.dispatch("ClearUndos")})(t,e,n),reset:t=>(t=>{t.clear(),t.add()})(t),hasUndo:(e,n)=>((t,e,n)=>n.get()>0||e.typing&&e.data[0]&&!Ix(kx(t),e.data[0]))(t,e,n),hasRedo:(t,e)=>((t,e)=>e.get()<t.data.length-1&&!t.typing)(t,e),transact:(t,e,n)=>((t,e,n)=>(Dx(t,e),t.beforeChange(),t.ignore(n),t.add()))(t,e,n),ignore:(t,e)=>((t,e)=>{try{t.set(t.get()+1),e()}finally{t.set(t.get()-1)}})(t,e),extra:(e,n,i,r)=>((t,e,n,i,r)=>{if(e.transact(i)){const i=e.data[n.get()].bookmark,o=e.data[n.get()-1];Ax(t,o,!0),e.transact(r)&&(e.data[n.get()-1].beforeBookmark=i)}})(t,e,n,i,r)},formatter:{match:(e,n,i,r)=>Iv(t,e,n,i,r),matchAll:(e,n)=>((t,e,n)=>{const i=[],r={},o=t.selection.getStart();return t.dom.getParent(o,(o=>{for(let a=0;a<e.length;a++){const s=e[a];!r[s]&&Tv(t,o,s,n)&&(r[s]=!0,i.push(s))}}),t.dom.getRoot()),i})(t,e,n),matchNode:(e,n,i,r)=>Tv(t,e,n,i,r),canApply:e=>((t,e)=>{const n=t.formatter.get(e),i=t.dom;if(n&&t.selection.isEditable()){const e=t.selection.getStart(),r=kd(i,e);for(let t=n.length-1;t>=0;t--){const e=n[t];if(!Td(e))return!0;for(let t=r.length-1;t>=0;t--)if(i.is(r[t],e.selector))return!0}}return!1})(t,e),closest:e=>((t,e)=>{const n=e=>Sn(e,bn(t.getBody()));return B.from(t.selection.getStart(!0)).bind((i=>wv(bn(i),(n=>ht(e,(e=>((e,n)=>Tv(t,e.dom,n)?B.some(n):B.none())(n,e)))),n))).getOrNull()})(t,e),apply:(e,n,i)=>Cy(t,e,n,i),remove:(e,n,i,r)=>yy(t,e,n,i,r),toggle:(e,n,i)=>((t,e,n,i)=>{const r=t.formatter.get(e);r&&(!Iv(t,e,n,i)||"toggle"in r[0]&&!r[0].toggle?Cy(t,e,n,i):yy(t,e,n,i))})(t,e,n,i),formatChanged:(e,n,i,r,o)=>((t,e,n,i,r,o)=>(((t,e,n,i,r,o)=>{const a=e.get();X(n.split(","),(e=>{const n=St(a,e).getOrThunk((()=>{const t={withSimilar:{state:aa(!1),similar:!0,callbacks:[]},withoutSimilar:{state:aa(!1),similar:!1,callbacks:[]},withVars:[]};return a[e]=t,t})),s=()=>{const n=Ty(t);return My(t,n,e,r,o).isSome()};if(y(o)){const t=r?n.withSimilar:n.withoutSimilar;t.callbacks.push(i),1===t.callbacks.length&&t.state.set(s())}else n.withVars.push({state:aa(s()),similar:r,vars:o,callback:i})})),e.set(a)})(t,e,n,i,r,o),{unbind:()=>((t,e,n)=>{const i=t.get();X(e.split(","),(t=>St(i,t).each((e=>{i[t]={withSimilar:{...e.withSimilar,callbacks:U(e.withSimilar.callbacks,(t=>t!==n))},withoutSimilar:{...e.withoutSimilar,callbacks:U(e.withoutSimilar.callbacks,(t=>t!==n))},withVars:U(e.withVars,(t=>t.callback!==n))}})))),t.set(i)})(e,n,i)}))(t,e,n,i,r,o)},editor:{getContent:e=>((t,e)=>B.from(t.getBody()).fold(M("tree"===e.format?new Wf("body",11):""),(n=>((t,e,n)=>{let i;return i="raw"===e.format?Pe.trim(Ua(eg(n,t.serializer.getTempAttrs()).innerHTML)):"text"===e.format?((t,e)=>{const n=t.getDoc(),i=jn(bn(t.getBody())),r=vn("div",n);Qe(r,"data-mce-bogus","all"),si(r,{position:"fixed",left:"-9999999px",top:"0"}),Ci(r,e.innerHTML),ng(r),ig(r);const o=(t=>Vn(t)?t:bn(An(t).dom.body))(i);mi(o,r);const a=Ua(r.dom.innerText);return xi(r),a})(t,n):"tree"===e.format?t.serializer.serialize(n,e):((t,e)=>{const n=Fl(t),i=new RegExp(`^(<${n}[^>]*>(&nbsp;|&#160;|\\s||<br \\/>|)<\\/${n}>[\r\n]*|<br \\/>[\r\n]*)$`);return e.replace(i,"")})(t,t.serializer.serialize(n,e)),"text"!==e.format&&!ja(bn(n))&&d(i)?Pe.trim(i):i})(t,e,n))))(t,e),setContent:(e,n)=>((t,e,n)=>B.from(t.getBody()).map((i=>bv(e)?((t,e,n,i)=>{rv(t.parser.getNodeFilters(),t.parser.getAttributeFilters(),n);const r=ag({validate:!1},t.schema).serialize(n),o=Ua(ja(bn(e))?r:Pe.trim(r));return xv(t,o,i.no_selection),{content:n,html:o}})(t,i,e,n):((t,e,n,i)=>{if(0===(n=Ua(n)).length||/^\s+$/.test(n)){const r='<br data-mce-bogus="1">';"TABLE"===e.nodeName?n="<tr><td>"+r+"</td></tr>":/^(UL|OL)$/.test(e.nodeName)&&(n="<li>"+r+"</li>");const o=Fl(t);return t.schema.isValidChild(e.nodeName.toLowerCase(),o.toLowerCase())?(n=r,n=t.dom.createHTML(o,Vl(t),n)):n||(n=r),xv(t,n,i.no_selection),{content:n,html:n}}{"raw"!==i.format&&(n=ag({validate:!1},t.schema).serialize(t.parser.parse(n,{isRootContent:!0,insert:!0})));const r=ja(bn(e))?n:Pe.trim(n);return xv(t,r,i.no_selection),{content:r,html:r}}})(t,i,e,n))).getOr({content:e,html:bv(n.content)?"":n.content}))(t,e,n),insertContent:(e,n)=>yv(t,e,n),addVisual:e=>((t,e)=>{const n=t.dom,i=x(e)?e:t.getBody();X(n.select("table,a",i),(e=>{switch(e.nodeName){case"TABLE":const i=Hc(t),r=n.getAttrib(e,"border");r&&"0"!==r||!t.hasVisual?n.removeClass(e,i):n.addClass(e,i);break;case"A":if(!n.getAttrib(e,"href")){const i=n.getAttrib(e,"name")||e.id,r=Wc(t);i&&t.hasVisual?n.addClass(e,r):n.removeClass(e,r)}}})),t.dispatch("VisualAid",{element:e,hasVisual:t.hasVisual})})(t,e)},selection:{getContent:(e,n)=>((t,e,n={})=>{const i=((t,e)=>({...t,format:e,get:!0,selection:!0,getInner:!0}))(n,e);return ax(t,i).fold(T,(e=>{const n=((t,e)=>{if("text"===e.format)return(t=>B.from(t.selection.getRng()).map((e=>{var n;const i=B.from(t.dom.getParent(e.commonAncestorContainer,t.dom.isBlock)),r=t.getBody(),o=(t=>t.map((t=>t.nodeName)).getOr("div").toLowerCase())(i),a=bn(e.cloneContents());ng(a),ig(a);const s=t.dom.add(r,o,{"data-mce-bogus":"all",style:"overflow: hidden; opacity: 0;"},a.dom),l=wx(s),c=Ua(null!==(n=s.textContent)&&void 0!==n?n:"");if(t.dom.remove(s),_x(c,0)||_x(c,c.length-1)){const t=i.getOr(r),e=wx(t),n=e.indexOf(l);return-1===n?l:(_x(e,n-1)?" ":"")+l+(_x(e,n+l.length)?" ":"")}return l})).getOr(""))(t);{const n=((t,e)=>{const n=t.selection.getRng(),i=t.dom.create("body"),r=t.selection.getSel(),o=Bf(t,td(r)),a=e.contextual?xx(bn(t.getBody()),o,t.schema).dom:n.cloneContents();return a&&i.appendChild(a),t.selection.serializer.serialize(i,e)})(t,e);return"tree"===e.format?n:t.selection.isCollapsed()?"":n}})(t,e);return sx(t,n,e)}))})(t,e,n)},autocompleter:{addDecoration:C,removeDecoration:C},raw:{getModel:()=>B.none()}}),Px=t=>Ct(t.plugins,"rtc"),Nx=t=>t.rtcInstance?t.rtcInstance:Lx(t),Rx=t=>{const e=t.rtcInstance;if(e)return e;throw new Error("Failed to get RTC instance not yet initialized.")},Bx=t=>Rx(t).init.bindEvents(),zx=t=>0===t.dom.length?(xi(t),B.none()):B.some(t),Fx=(t,e,n,i,r)=>{t.bind((t=>((i?rm:im)(t.dom,i?t.dom.length:0,r),e.filter(qe).map((e=>((t,e,n,i,r)=>{const o=t.dom,a=e.dom,s=i?o.length:a.length;i?(om(o,a,r,!1,!i),n.setStart(a,s)):(om(a,o,r,!1,!i),n.setEnd(a,s))})(t,e,n,i,r)))))).orThunk((()=>{const t=((t,e)=>t.filter((t=>Jd.isBookmarkNode(t.dom))).bind(e?Dn:On))(e,i).or(e).filter(qe);return t.map((t=>((t,e,n)=>{Tn(t).each((i=>{const r=t.dom;e&&$g(i,Gs(r,0),n)?im(r,0,n):!e&&Zg(i,Gs(r,r.length),n)&&rm(r,r.length,n)}))})(t,i,r)))}))},Vx=(t,e,n)=>{if(Ct(t,e)){const i=U(t[e],(t=>t!==n));0===i.length?delete t[e]:t[e]=i}},Hx=t=>!(!t||!t.ownerDocument)&&Cn(bn(t.ownerDocument),bn(t)),Wx=(t,e,n,i)=>{let r,o;const{selectorChangedWithUnbind:a}=((t,e)=>{let n,i;const r=(e,n)=>Q(n,(n=>t.is(n,e))),o=e=>t.getParents(e,void 0,t.getRoot());return{selectorChangedWithUnbind:(t,a)=>(n||(n={},i={},e.on("NodeChange",(t=>{const e=t.element,a=o(e),s={};gt(n,((t,e)=>{r(e,a).each((n=>{i[e]||(X(t,(t=>{t(!0,{node:n,selector:e,parents:a})})),i[e]=t),s[e]=t}))})),gt(i,((t,n)=>{s[n]||(delete i[n],X(t,(t=>{t(!1,{node:e,selector:n,parents:a})})))}))}))),n[t]||(n[t]=[]),n[t].push(a),r(t,o(e.selection.getStart())).each((()=>{i[t]=n[t]})),{unbind:()=>{Vx(n,t,a),Vx(i,t,a)}})}})(t,i),s=(t,e)=>((t,e,n={})=>{const i=((t,e)=>({format:"html",...t,set:!0,selection:!0,content:e}))(n,e);lx(t,i).each((e=>{const n=((t,e)=>{if("raw"!==e.format){const n=t.selection.getRng(),i=t.dom.getParent(n.commonAncestorContainer,t.dom.isBlock),r=i?{context:i.nodeName.toLowerCase()}:{},o=t.parser.parse(e.content,{forced_root_block:!1,...r,...e});return ag({validate:!1},t.schema).serialize(o)}return e.content})(t,e),i=t.selection.getRng();((t,e,n)=>{const i=B.from(e.firstChild).map(bn),r=B.from(e.lastChild).map(bn);t.deleteContents(),t.insertNode(e);const o=i.bind(On).filter(qe).bind(zx),a=r.bind(Dn).filter(qe).bind(zx);Fx(o,i,t,!0,n),Fx(a,r,t,!1,n),t.collapse(!1)})(i,i.createContextualFragment(n),t.schema),t.selection.setRng(i),af(t,i),cx(t,n,e)}))})(i,t,e),l=t=>{const e=u();e.collapse(!!t),h(e)},c=()=>e.getSelection?e.getSelection():e.document.selection,u=()=>{let n;const a=(t,e,n)=>{try{return e.compareBoundaryPoints(t,n)}catch(t){return-1}},s=e.document;if(x(i.bookmark)&&!If(i)){const t=vf(i);if(t.isSome())return t.map((t=>Bf(i,[t])[0])).getOr(s.createRange())}try{const t=c();t&&!Ui(t.anchorNode)&&(n=t.rangeCount>0?t.getRangeAt(0):s.createRange(),n=Bf(i,[n])[0])}catch(t){}if(n||(n=s.createRange()),lr(n.startContainer)&&n.collapsed){const e=t.getRoot();n.setStart(e,0),n.setEnd(e,0)}return r&&o&&(0===a(n.START_TO_START,n,r)&&0===a(n.END_TO_END,n,r)?n=o:(r=null,o=null)),n},h=(t,e)=>{if(!(t=>!!t&&Hx(t.startContainer)&&Hx(t.endContainer))(t))return;const n=c();if(t=i.dispatch("SetSelectionRange",{range:t,forward:e}).range,n){o=t;try{n.removeAllRanges(),n.addRange(t)}catch(t){}!1===e&&n.extend&&(n.collapse(t.endContainer,t.endOffset),n.extend(t.startContainer,t.startOffset)),r=n.rangeCount>0?n.getRangeAt(0):null}if(!t.collapsed&&t.startContainer===t.endContainer&&(null==n?void 0:n.setBaseAndExtent)&&t.endOffset-t.startOffset<2&&t.startContainer.hasChildNodes()){const e=t.startContainer.childNodes[t.startOffset];e&&"IMG"===e.nodeName&&(n.setBaseAndExtent(t.startContainer,t.startOffset,t.endContainer,t.endOffset),n.anchorNode===t.startContainer&&n.focusNode===t.endContainer||n.setBaseAndExtent(e,0,e,1))}i.dispatch("AfterSetSelectionRange",{range:t,forward:e})},d=()=>{const e=c(),n=null==e?void 0:e.anchorNode,i=null==e?void 0:e.focusNode;if(!e||!n||!i||Ui(n)||Ui(i))return!0;const r=t.createRng(),o=t.createRng();try{r.setStart(n,e.anchorOffset),r.collapse(!0),o.setStart(i,e.focusOffset),o.collapse(!0)}catch(t){return!0}return r.compareBoundaryPoints(r.START_TO_START,o)<=0},p={dom:t,win:e,serializer:n,editor:i,expand:(e={type:"word"})=>h(Fp(t).expand(u(),e)),collapse:l,setCursorLocation:(e,n)=>{const r=t.createRng();x(e)&&x(n)?(r.setStart(e,n),r.setEnd(e,n),h(r),l(!1)):(sd(t,r,i.getBody(),!0),h(r))},getContent:t=>((t,e={})=>((t,e,n)=>Rx(t).selection.getContent(e,n))(t,e.format?e.format:"html",e))(i,t),setContent:s,getBookmark:(t,e)=>f.getBookmark(t,e),moveToBookmark:t=>f.moveToBookmark(t),select:(e,n)=>(((t,e,n)=>B.from(e).bind((e=>B.from(e.parentNode).map((i=>{const r=t.nodeIndex(e),o=t.createRng();return o.setStart(i,r),o.setEnd(i,r+1),n&&(sd(t,o,e,!0),sd(t,o,e,!1)),o})))))(t,e,n).each(h),e),isCollapsed:()=>{const t=u(),e=c();return!(!t||t.item)&&(t.compareEndPoints?0===t.compareEndPoints("StartToEnd",t):!e||t.collapsed)},isEditable:()=>{const e=u(),n=i.getBody().querySelectorAll('[data-mce-selected="1"]');return n.length>0?nt(n,(e=>t.isEditable(e.parentElement))):Df(t,e)},isForward:d,setNode:e=>(s(t.getOuterHTML(e)),e),getNode:()=>((t,e)=>{if(!e)return t;let n=e.startContainer,i=e.endContainer;const r=e.startOffset,o=e.endOffset;let a=e.commonAncestorContainer;e.collapsed||(n===i&&o-r<2&&n.hasChildNodes()&&(a=n.childNodes[r]),rr(n)&&rr(i)&&(n=n.length===r?Rf(n.nextSibling,!0):n.parentNode,i=0===o?Rf(i.previousSibling,!1):i.parentNode,n&&n===i&&(a=n)));const s=rr(a)?a.parentNode:a;return Zi(s)?s:t})(i.getBody(),u()),getSel:c,setRng:h,getRng:u,getStart:t=>Pf(i.getBody(),u(),t),getEnd:t=>Nf(i.getBody(),u(),t),getSelectedBlocks:(e,n)=>((t,e,n,i)=>{const r=[],o=t.getRoot(),a=t.getParent(n||Pf(o,e,e.collapsed),t.isBlock),s=t.getParent(i||Nf(o,e,e.collapsed),t.isBlock);if(a&&a!==o&&r.push(a),a&&s&&a!==s){let e;const n=new Fi(a,o);for(;(e=n.next())&&e!==s;)t.isBlock(e)&&r.push(e)}return s&&a!==s&&s!==o&&r.push(s),r})(t,u(),e,n),normalize:()=>{const e=u(),n=c();if(!(td(n).length>1)&&ld(i)){const n=Rp(t,e);return n.each((t=>{h(t,d())})),n.getOr(e)}return e},selectorChanged:(t,e)=>(a(t,e),p),selectorChangedWithUnbind:a,getScrollContainer:()=>{let e,n=t.getRoot();for(;n&&"BODY"!==n.nodeName;){if(n.scrollHeight>n.clientHeight){e=n;break}n=n.parentNode}return e},scrollIntoView:(t,e)=>{x(t)?((t,e,n)=>{(t.inline?nf:of)(t,e,n)})(i,t,e):af(i,u(),e)},placeCaretAt:(t,e)=>h(Tp(t,e,i.getDoc())),getBoundingClientRect:()=>{const t=u();return t.collapsed?Gs.fromRangeStart(t).getClientRects()[0]:t.getBoundingClientRect()},destroy:()=>{e=r=o=null,g.destroy()}},f=Jd(p),g=pp(p,i);return p.bookmarkManager=f,p.controlSelection=g,p},jx=(t,e,n)=>{-1===Pe.inArray(e,n)&&(t.addAttributeFilter(n,((t,e)=>{let n=t.length;for(;n--;)t[n].attr(e,null)})),e.push(n))},Yx=(t,e)=>{const n=((t,e)=>{const n=["data-mce-selected"],i={entity_encoding:"named",remove_trailing_brs:!0,pad_empty_with_br:!1,...t},r=e&&e.dom?e.dom:ia.DOM,o=e&&e.schema?e.schema:To(i),a=ix(i,o);return((t,e,n)=>{t.addAttributeFilter("data-mce-tabindex",((t,e)=>{let n=t.length;for(;n--;){const i=t[n];i.attr("tabindex",i.attr("data-mce-tabindex")),i.attr(e,null)}})),t.addAttributeFilter("src,href,style",((t,i)=>{const r="data-mce-"+i,o=e.url_converter,a=e.url_converter_scope;let s=t.length;for(;s--;){const e=t[s];let l=e.attr(r);void 0!==l?(e.attr(i,l.length>0?l:null),e.attr(r,null)):(l=e.attr(i),"style"===i?l=n.serializeStyle(n.parseStyle(l),e.name):o&&(l=o.call(a,l,i,e.name)),e.attr(i,l.length>0?l:null))}})),t.addAttributeFilter("class",(t=>{let e=t.length;for(;e--;){const n=t[e];let i=n.attr("class");i&&(i=i.replace(/(?:^|\s)mce-item-\w+(?!\S)/g,""),n.attr("class",i.length>0?i:null))}})),t.addAttributeFilter("data-mce-type",((t,e,n)=>{let i=t.length;for(;i--;){const e=t[i];if("bookmark"===e.attr("data-mce-type")&&!n.cleanup){const t=B.from(e.firstChild).exists((t=>{var e;return!qa(null!==(e=t.value)&&void 0!==e?e:"")}));t?e.unwrap():e.remove()}}})),t.addNodeFilter("noscript",(t=>{var e;let n=t.length;for(;n--;){const i=t[n].firstChild;i&&(i.value=uo.decode(null!==(e=i.value)&&void 0!==e?e:""))}})),t.addNodeFilter("script,style",((t,n)=>{var i;const r=t=>t.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"");let o=t.length;for(;o--;){const a=t[o],s=a.firstChild,l=null!==(i=null==s?void 0:s.value)&&void 0!==i?i:"";if("script"===n){const t=a.attr("type");t&&a.attr("type","mce-no/type"===t?null:t.replace(/^mce\-/,"")),"xhtml"===e.element_format&&s&&l.length>0&&(s.value="// <![CDATA[\n"+r(l)+"\n// ]]>")}else"xhtml"===e.element_format&&s&&l.length>0&&(s.value="\x3c!--\n"+r(l)+"\n--\x3e")}})),t.addNodeFilter("#comment",(t=>{let i=t.length;for(;i--;){const r=t[i],o=r.value;e.preserve_cdata&&0===(null==o?void 0:o.indexOf("[CDATA["))?(r.name="#cdata",r.type=4,r.value=n.decode(o.replace(/^\[CDATA\[|\]\]$/g,""))):0===(null==o?void 0:o.indexOf("mce:protected "))&&(r.name="#text",r.type=3,r.raw=!0,r.value=unescape(o).substr(14))}})),t.addNodeFilter("xml:namespace,input",((t,e)=>{let n=t.length;for(;n--;){const i=t[n];7===i.type?i.remove():1===i.type&&("input"!==e||i.attr("type")||i.attr("type","text"))}})),t.addAttributeFilter("data-mce-type",(e=>{X(e,(e=>{"format-caret"===e.attr("data-mce-type")&&(e.isEmpty(t.schema.getNonEmptyElements())?e.remove():e.unwrap())}))})),t.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style,data-mce-selected,data-mce-expando,data-mce-block,data-mce-type,data-mce-resize,data-mce-placeholder",((t,e)=>{let n=t.length;for(;n--;)t[n].attr(e,null)})),e.remove_trailing_brs&&((t,e,n)=>{e.addNodeFilter("br",((e,i,r)=>{const o=Pe.extend({},n.getBlockElements()),a=n.getNonEmptyElements(),s=n.getWhitespaceElements();o.body=1;const l=t=>t.name in o||Wr(n,t);for(let i=0,c=e.length;i<c;i++){let c=e[i],u=c.parent;if(u&&l(u)&&c===u.lastChild){let e=c.prev;for(;e;){const t=e.name;if("span"!==t||"bookmark"!==e.attr("data-mce-type")){"br"===t&&(c=null);break}e=e.prev}if(c&&(c.remove(),sv(n,a,s,u))){const e=n.getElementRule(u.name);e&&(e.removeEmpty?u.remove():e.paddEmpty&&ov(t,r,l,u))}}else{let t=c;for(;u&&u.firstChild===t&&u.lastChild===t&&(t=u,!o[u.name]);)u=u.parent;if(t===u){const t=new Wf("#text",3);t.value=Hi,c.replace(t)}}}}))})(e,t,t.schema)})(a,i,r),{schema:o,addNodeFilter:a.addNodeFilter,addAttributeFilter:a.addAttributeFilter,serialize:(t,n={})=>{const s={format:"html",...n},l=((t,e,n)=>((t,e)=>x(t)&&t.hasEventListeners("PreProcess")&&!e.no_events)(t,n)?((t,e,n)=>{let i;const r=t.dom;let o=e.cloneNode(!0);const a=document.implementation;if(a.createHTMLDocument){const t=a.createHTMLDocument("");Pe.each("BODY"===o.nodeName?o.childNodes:[o],(e=>{t.body.appendChild(t.importNode(e,!0))})),o="BODY"!==o.nodeName?t.body.firstChild:t.body,i=r.doc,r.doc=t}return((t,e)=>{t.dispatch("PreProcess",e)})(t,{...n,node:o}),i&&(r.doc=i),o})(t,e,n):e)(e,t,s),c=((t,e,n)=>{const i=Ua(n.getInner?e.innerHTML:t.getOuterHTML(e));return n.selection||ja(bn(e))?i:Pe.trim(i)})(r,l,s),u=((t,e,n)=>{const i=n.selection?{forced_root_block:!1,...n}:n,r=t.parse(e,i);return(t=>{const e=t=>"br"===(null==t?void 0:t.name),n=t.lastChild;if(e(n)){const t=n.prev;e(t)&&(n.remove(),t.remove())}})(r),r})(a,c,s);return"tree"===s.format?u:((t,e,n,i,r)=>{const o=((t,e,n)=>ag(t,e).serialize(n))(e,n,i);return((t,e,n)=>{if(!e.no_events&&t){const i=((t,e)=>t.dispatch("PostProcess",e))(t,{...e,content:n});return i.content}return n})(t,r,o)})(e,i,o,u,s)},addRules:o.addValidElements,setRules:o.setValidElements,addTempAttr:E(jx,a,n),getTempAttrs:M(n),getNodeFilters:a.getNodeFilters,getAttributeFilters:a.getAttributeFilters,removeNodeFilter:a.removeNodeFilter,removeAttributeFilter:a.removeAttributeFilter}})(t,e);return{schema:n.schema,addNodeFilter:n.addNodeFilter,addAttributeFilter:n.addAttributeFilter,serialize:n.serialize,addRules:n.addRules,setRules:n.setRules,addTempAttr:n.addTempAttr,getTempAttrs:n.getTempAttrs,getNodeFilters:n.getNodeFilters,getAttributeFilters:n.getAttributeFilters,removeNodeFilter:n.removeNodeFilter,removeAttributeFilter:n.removeAttributeFilter}},Xx=(t,e,n={})=>{const i=((t,e)=>({format:"html",...t,set:!0,content:e}))(n,e);return lx(t,i).map((e=>{const n=((t,e,n)=>Nx(t).editor.setContent(e,n))(t,e.content,e);return cx(t,n.html,e),n.content})).getOr(e)},Gx="autoresize_on_init,content_editable_state,padd_empty_with_br,block_elements,boolean_attributes,editor_deselector,editor_selector,elements,file_browser_callback_types,filepicker_validator_handler,force_hex_style_colors,force_p_newlines,gecko_spellcheck,images_dataimg_filter,media_scripts,mode,move_caret_before_on_enter_elements,non_empty_elements,self_closing_elements,short_ended_elements,special,spellchecker_select_languages,spellchecker_whitelist,tab_focus,tabfocus_elements,table_responsive_width,text_block_elements,text_inline_elements,toolbar_drawer,types,validate,whitespace_elements,paste_enable_default_filters,paste_filter_drop,paste_word_valid_elements,paste_retain_style_properties,paste_convert_word_fake_lists,template_cdate_classes,template_mdate_classes,template_selected_content_classes,template_preview_replace_values,template_replace_values,templates,template_cdate_format,template_mdate_format".split(","),qx=[],Ux="bbcode,colorpicker,contextmenu,fullpage,legacyoutput,spellchecker,template,textcolor,rtc".split(","),$x=[],Zx=(t,e)=>{const n=U(e,(e=>Ct(t,e)));return at(n)},Kx=(t,e)=>{const n=Pe.makeMap(t.plugins," "),i=U(e,(t=>Ct(n,t)));return at(i)},Qx=t=>Q($x,(e=>e.name===t)).fold((()=>t),(e=>e.replacedWith?`${t}, replaced by ${e.replacedWith}`:t)),Jx=ia.DOM,t_=t=>B.from(t).each((t=>t.destroy())),e_=(()=>{const t={};return{add:(e,n)=>{t[e]=n},get:e=>t[e]?t[e]:{icons:{}},has:e=>Ct(t,e)}})(),n_=ha.ModelManager,i_=(t,e)=>e.dom[t],r_=(t,e)=>parseInt(li(e,t),10),o_=E(i_,"clientWidth"),a_=E(i_,"clientHeight"),s_=E(r_,"margin-top"),l_=E(r_,"margin-left"),c_=t=>{const e=[],n=()=>{const e=t.theme;return e&&e.getNotificationManagerImpl?e.getNotificationManagerImpl():(()=>{const t=()=>{throw new Error("Theme did not provide a NotificationManager implementation.")};return{open:t,close:t,getArgs:t}})()},i=()=>B.from(e[0]),r=()=>{X(e,(t=>{t.reposition()}))},o=t=>{J(e,(e=>e===t)).each((t=>{e.splice(t,1)}))},a=(a,s=!0)=>t.removed||!(t=>{return(e=t.inline?t.getBody():t.getContentAreaContainer(),B.from(e).map(bn)).map(Un).getOr(!1);var e})(t)?{}:(s&&t.dispatch("BeforeOpenNotification",{notification:a}),Q(e,(t=>{return e=n().getArgs(t),i=a,!(e.type!==i.type||e.text!==i.text||e.progressBar||e.timeout||i.progressBar||i.timeout);var e,i})).getOrThunk((()=>{t.editorManager.setActive(t);const s=n().open(a,(()=>{o(s),r(),Ef(t)&&i().fold((()=>t.focus()),(t=>sf(bn(t.getEl()))))}));return(t=>{e.push(t)})(s),r(),t.dispatch("OpenNotification",{notification:{...s}}),s}))),s=M(e);return(t=>{t.on("SkinLoaded",(()=>{const e=mc(t);e&&a({text:e,type:"warning",timeout:0},!1),r()})),t.on("show ResizeEditor ResizeWindow NodeChange",(()=>{requestAnimationFrame(r)})),t.on("remove",(()=>{X(e.slice(),(t=>{n().close(t)}))}))})(t),{open:a,close:()=>{i().each((t=>{n().close(t),o(t),r()}))},getNotifications:s}},u_=ha.PluginManager,h_=ha.ThemeManager,d_=t=>{let e=[];const n=()=>{const e=t.theme;return e&&e.getWindowManagerImpl?e.getWindowManagerImpl():(()=>{const t=()=>{throw new Error("Theme did not provide a WindowManager implementation.")};return{open:t,openUrl:t,alert:t,confirm:t,close:t}})()},i=(t,e)=>(...n)=>e?e.apply(t,n):void 0,r=n=>{(e=>{t.dispatch("CloseWindow",{dialog:e})})(n),e=U(e,(t=>t!==n)),0===e.length&&t.focus()},o=n=>{t.editorManager.setActive(t),mf(t),t.ui.show();const i=n();return(n=>{e.push(n),(e=>{t.dispatch("OpenWindow",{dialog:e})})(n)})(i),i};return t.on("remove",(()=>{X(e,(t=>{n().close(t)}))})),{open:(t,e)=>o((()=>n().open(t,e,r))),openUrl:t=>o((()=>n().openUrl(t,r))),alert:(t,e,r)=>{const o=n();o.alert(t,i(r||o,e))},confirm:(t,e,r)=>{const o=n();o.confirm(t,i(r||o,e))},close:()=>{B.from(e[e.length-1]).each((t=>{n().close(t),r(t)}))}}},p_=(t,e)=>{t.notificationManager.open({type:"error",text:e})},f_=(t,e)=>{t._skinLoaded?p_(t,e):t.on("SkinLoaded",(()=>{p_(t,e)}))},g_=(t,e,n)=>{ep(t,e,{message:n}),console.error(n)},m_=(t,e,n)=>n?`Failed to load ${t}: ${n} from url ${e}`:`Failed to load ${t} url: ${e}`,v_=(t,...e)=>{const n=window.console;n&&(n.error?n.error(t,...e):n.log(t,...e))},y_=t=>"content/"+t+"/content.css",b_=(t,e)=>{const n=t.editorManager.baseURL+"/skins/content",i=`content${t.editorManager.suffix}.css`;return Y(e,(e=>(t=>tinymce.Resource.has(y_(t)))(e)?e:(t=>/^[a-z0-9\-]+$/i.test(t))(e)&&!t.inline?`${n}/${e}/${i}`:t.documentBaseURI.toAbsolute(e)))},x_=()=>{let t={};const e=(t,e)=>({status:t,resultUri:e}),n=e=>e in t;return{hasBlobUri:n,getResultUri:e=>{const n=t[e];return n?n.resultUri:null},isPending:e=>!!n(e)&&1===t[e].status,isUploaded:e=>!!n(e)&&2===t[e].status,markPending:n=>{t[n]=e(1,null)},markUploaded:(n,i)=>{t[n]=e(2,i)},removeFailed:e=>{delete t[e]},destroy:()=>{t={}}}};let __=0;const w_=t=>()=>t.notificationManager.open({text:t.translate("Image uploading..."),type:"info",timeout:-1,progressBar:!0}),S_=(t,e)=>((t,e)=>{const n={},i=(t,n)=>new Promise(((i,r)=>{const o=new XMLHttpRequest;o.open("POST",e.url),o.withCredentials=e.credentials,o.upload.onprogress=t=>{n(t.loaded/t.total*100)},o.onerror=()=>{r("Image upload failed due to a XHR Transport error. Code: "+o.status)},o.onload=()=>{if(o.status<200||o.status>=300)return void r("HTTP Error: "+o.status);const t=JSON.parse(o.responseText);var n,a;t&&d(t.location)?i((n=e.basePath,a=t.location,n?n.replace(/\/$/,"")+"/"+a.replace(/^\//,""):a)):r("Invalid JSON: "+o.responseText)};const a=new FormData;a.append("file",t.blob(),t.filename()),o.send(a)})),r=_(e.handler)?e.handler:i,o=(t,e)=>({url:e,blobInfo:t,status:!0}),a=(t,e)=>({url:"",blobInfo:t,status:!1,error:e}),s=(t,e)=>{Pe.each(n[t],(t=>{t(e)})),delete n[t]};return{upload:(l,c)=>e.url||r!==i?((e,i)=>(e=Pe.grep(e,(e=>!t.isUploaded(e.blobUri()))),Promise.all(Pe.map(e,(e=>t.isPending(e.blobUri())?(t=>{const e=t.blobUri();return new Promise((t=>{n[e]=n[e]||[],n[e].push(t)}))})(e):((e,n,i)=>(t.markPending(e.blobUri()),new Promise((r=>{let l,c;try{const u=()=>{l&&(l.close(),c=C)},h=n=>{u(),t.markUploaded(e.blobUri(),n),s(e.blobUri(),o(e,n)),r(o(e,n))},p=n=>{u(),t.removeFailed(e.blobUri()),s(e.blobUri(),a(e,n)),r(a(e,n))};c=t=>{t<0||t>100||B.from(l).orThunk((()=>B.from(i).map(L))).each((e=>{l=e,e.progressBar.value(t)}))},n(e,c).then(h,(t=>{p(d(t)?{message:t}:t)}))}catch(t){r(a(e,t))}}))))(e,r,i))))))(l,c):new Promise((t=>{t([])}))}})(e,{url:Kl(t),basePath:Ql(t),credentials:Jl(t),handler:tc(t)}),C_=t=>{const e=(()=>{let t=[];const e=t=>{if(!t.blob||!t.base64)throw new Error("blob and base64 representations of the image are required for BlobInfo to be created");const e=t.id||"blobid"+__+++(()=>{const t=()=>Math.round(4294967295*Math.random()).toString(36);return"s"+(new Date).getTime().toString(36)+t()+t()+t()})(),n=t.name||e,i=t.blob;var r;return{id:M(e),name:M(n),filename:M(t.filename||n+"."+(r=i.type,{"image/jpeg":"jpg","image/jpg":"jpg","image/gif":"gif","image/png":"png","image/apng":"apng","image/avif":"avif","image/svg+xml":"svg","image/webp":"webp","image/bmp":"bmp","image/tiff":"tiff"}[r.toLowerCase()]||"dat")),blob:M(i),base64:M(t.base64),blobUri:M(t.blobUri||URL.createObjectURL(i)),uri:M(t.uri)}},n=e=>Q(t,e).getOrUndefined(),i=t=>n((e=>e.id()===t));return{create:(t,n,i,r,o)=>{if(d(t))return e({id:t,name:r,filename:o,blob:n,base64:i});if(p(t))return e(t);throw new Error("Unknown input type")},add:e=>{i(e.id())||t.push(e)},get:i,getByUri:t=>n((e=>e.blobUri()===t)),getByData:(t,e)=>n((n=>n.base64()===t&&n.blob().type===e)),findFirst:n,removeByUri:e=>{t=U(t,(t=>t.blobUri()!==e||(URL.revokeObjectURL(t.blobUri()),!1)))},destroy:()=>{X(t,(t=>{URL.revokeObjectURL(t.blobUri())})),t=[]}}})();let n,i;const r=x_(),o=[],a=e=>n=>t.selection?e(n):[],s=(t,e,n)=>{let i=0;do{i=t.indexOf(e,i),-1!==i&&(t=t.substring(0,i)+n+t.substr(i+e.length),i+=n.length-e.length+1)}while(-1!==i);return t},l=(t,e,n)=>{const i=`src="${n}"${n===Ee.transparentSrc?' data-mce-placeholder="1"':""}`;return t=s(t,`src="${e}"`,i),s(t,'data-mce-src="'+e+'"','data-mce-src="'+n+'"')},c=(e,n)=>{X(t.undoManager.data,(t=>{"fragmented"===t.type?t.fragments=Y(t.fragments,(t=>l(t,e,n))):t.content=l(t.content,e,n)}))},u=()=>(n||(n=S_(t,r)),g().then(a((i=>{const r=Y(i,(t=>t.blobInfo));return n.upload(r,w_(t)).then(a((n=>{const r=[];let o=!1;const a=Y(n,((n,a)=>{const{blobInfo:s,image:l}=i[a];let u=!1;return n.status&&Ul(t)?(n.url&&!Wt(l.src,n.url)&&(o=!0),e.removeByUri(l.src),Px(t)||((e,n)=>{const i=t.convertURL(n,"src");var r;c(e.src,n),Je(bn(e),{src:ql(t)?(r=n,r+(-1===r.indexOf("?")?"?":"&")+(new Date).getTime()):n,"data-mce-src":i})})(l,n.url)):n.error&&(n.error.remove&&(c(l.src,Ee.transparentSrc),r.push(l),u=!0),((t,e)=>{f_(t,ua.translate(["Failed to upload image: {0}",e]))})(t,n.error.message)),{element:l,status:n.status,uploadUri:n.url,blobInfo:s,removed:u}}));return r.length>0&&!Px(t)?t.undoManager.transact((()=>{X(wi(r),(n=>{const i=Tn(n);xi(n),i.each((t=>e=>{((t,e)=>t.dom.isEmpty(e.dom)&&x(t.schema.getTextBlockElements()[We(e)]))(t,e)&&mi(e,mn('<br data-mce-bogus="1" />'))})(t)),e.removeByUri(n.dom.src)}))})):o&&t.undoManager.dispatchChange(),a})))})))),h=()=>Gl(t)?u():Promise.resolve([]),f=t=>nt(o,(e=>e(t))),g=()=>(i||(i=((t,e)=>{const n={};return{findAll:(i,r=R)=>{const o=U((t=>t?ut(t.getElementsByTagName("img")):[])(i),(e=>{const n=e.src;return!e.hasAttribute("data-mce-bogus")&&!e.hasAttribute("data-mce-placeholder")&&!(!n||n===Ee.transparentSrc)&&(jt(n,"blob:")?!t.isUploaded(n)&&r(e):!!jt(n,"data:")&&r(e))})),a=Y(o,(t=>{const i=t.src;if(Ct(n,i))return n[i].then((e=>d(e)?e:{image:t,blobInfo:e.blobInfo}));{const r=((t,e)=>{const n=()=>Promise.reject("Invalid data URI");if(jt(e,"blob:")){const o=t.getByUri(e);return x(o)?Promise.resolve(o):(i=e,jt(i,"blob:")?(t=>fetch(t).then((t=>t.ok?t.blob():Promise.reject())).catch((()=>Promise.reject({message:`Cannot convert ${t} to Blob. Resource might not exist or is inaccessible.`,uriType:"blob"}))))(i):jt(i,"data:")?(r=i,new Promise(((t,e)=>{Dy(r).bind((({type:t,data:e,base64Encoded:n})=>Ly(t,e,n))).fold((()=>e("Invalid data URI")),t)}))):Promise.reject("Unknown URI format")).then((e=>Py(e).then((i=>Ry(i,!1,(n=>B.some(By(t,e,n)))).getOrThunk(n)))))}var i,r;return jt(e,"data:")?zy(t,e).fold(n,(t=>Promise.resolve(t))):Promise.reject("Unknown image data format")})(e,i).then((e=>(delete n[i],{image:t,blobInfo:e}))).catch((t=>(delete n[i],t)));return n[i]=r,r}}));return Promise.all(a)}}})(r,e)),i.findAll(t.getBody(),f).then(a((e=>{const n=U(e,(e=>d(e)?(f_(t,e),!1):"blob"!==e.uriType));return Px(t)||X(n,(t=>{c(t.image.src,t.blobInfo.blobUri()),t.image.src=t.blobInfo.blobUri(),t.image.removeAttribute("data-mce-src")})),n})))),m=n=>n.replace(/src="(blob:[^"]+)"/g,((n,i)=>{const o=r.getResultUri(i);if(o)return'src="'+o+'"';let a=e.getByUri(i);return a||(a=Z(t.editorManager.get(),((t,e)=>t||e.editorUpload&&e.editorUpload.blobCache.getByUri(i)),void 0)),a?'src="data:'+a.blob().type+";base64,"+a.base64()+'"':n}));return t.on("SetContent",(()=>{Gl(t)?h():g()})),t.on("RawSaveContent",(t=>{t.content=m(t.content)})),t.on("GetContent",(t=>{t.source_view||"raw"===t.format||"tree"===t.format||(t.content=m(t.content))})),t.on("PostRender",(()=>{t.parser.addNodeFilter("img",(t=>{X(t,(t=>{const n=t.attr("src");if(!n||e.getByUri(n))return;const i=r.getResultUri(n);i&&t.attr("src",i)}))}))})),{blobCache:e,addFilter:t=>{o.push(t)},uploadImages:u,uploadImagesAuto:h,scanForImages:g,destroy:()=>{e.destroy(),r.destroy(),i=n=null}}},k_={remove_similar:!0,inherit:!1},A_={selector:"td,th",...k_},M_={tablecellbackgroundcolor:{styles:{backgroundColor:"%value"},...A_},tablecellverticalalign:{styles:{"vertical-align":"%value"},...A_},tablecellbordercolor:{styles:{borderColor:"%value"},...A_},tablecellclass:{classes:["%value"],...A_},tableclass:{selector:"table",classes:["%value"],...k_},tablecellborderstyle:{styles:{borderStyle:"%value"},...A_},tablecellborderwidth:{styles:{borderWidth:"%value"},...A_}},T_=M(M_),I_=Pe.each,E_=ia.DOM,O_=t=>x(t)&&p(t),D_=(t,e)=>{const n=e&&e.schema||To({}),i=t=>{const e=d(t)?{name:t,classes:[],attrs:{}}:t,n=E_.create(e.name);return((t,e)=>{e.classes.length>0&&E_.addClass(t,e.classes.join(" ")),E_.setAttribs(t,e.attrs)})(n,e),n},r=(t,e,o)=>{let a;const s=e[0],l=O_(s)?s.name:void 0,c=((t,e)=>{const i=n.getElementRule(t.nodeName.toLowerCase()),r=null==i?void 0:i.parentsRequired;return!(!r||!r.length)&&(e&&W(r,e)?e:r[0])})(t,l);if(c)l===c?(a=s,e=e.slice(1)):a=c;else if(s)a=s,e=e.slice(1);else if(!o)return t;const u=a?i(a):E_.create("div");u.appendChild(t),o&&Pe.each(o,(e=>{const n=i(e);u.insertBefore(n,t)}));const h=O_(a)?a.siblings:void 0;return r(u,e,h)},o=E_.create("div");if(t.length>0){const e=t[0],n=i(e),a=O_(e)?e.siblings:void 0;o.appendChild(r(n,t.slice(1),a))}return o},L_=t=>{let e="div";const n={name:e,classes:[],attrs:{},selector:t=Pe.trim(t)};return"*"!==t&&(e=t.replace(/(?:([#\.]|::?)([\w\-]+)|(\[)([^\]]+)\]?)/g,((t,e,i,r,o)=>{switch(e){case"#":n.attrs.id=i;break;case".":n.classes.push(i);break;case":":-1!==Pe.inArray("checked disabled enabled read-only required".split(" "),i)&&(n.attrs[i]=i)}if("["===r){const t=o.match(/([\w\-]+)(?:\=\"([^\"]+))?/);t&&(n.attrs[t[1]]=t[2])}return""}))),n.name=e||"div",n},P_=(t,e)=>{let n="",i=Sc(t);if(""===i)return"";const r=t=>d(t)?t.replace(/%(\w+)/g,""):"",o=(e,n)=>E_.getStyle(null!=n?n:t.getBody(),e,!0);if(d(e)){const n=t.formatter.get(e);if(!n)return"";e=n[0]}if("preview"in e){const t=e.preview;if(!1===t)return"";i=t||i}let a,s=e.block||e.inline||"span";const l=(c=e.selector,d(c)?(c=(c=c.split(/\s*,\s*/)[0]).replace(/\s*(~\+|~|\+|>)\s*/g,"$1"),Pe.map(c.split(/(?:>|\s+(?![^\[\]]+\]))/),(t=>{const e=Pe.map(t.split(/(?:~\+|~|\+)/),L_),n=e.pop();return e.length&&(n.siblings=e),n})).reverse()):[]);var c;l.length>0?(l[0].name||(l[0].name=s),s=e.selector,a=D_(l,t)):a=D_([s],t);const u=E_.select(s,a)[0]||a.firstChild;I_(e.styles,((t,e)=>{const n=r(t);n&&E_.setStyle(u,e,n)})),I_(e.attributes,((t,e)=>{const n=r(t);n&&E_.setAttrib(u,e,n)})),I_(e.classes,(t=>{const e=r(t);E_.hasClass(u,e)||E_.addClass(u,e)})),t.dispatch("PreviewFormats"),E_.setStyles(a,{position:"absolute",left:-65535}),t.getBody().appendChild(a);const h=o("fontSize"),p=/px$/.test(h)?parseInt(h,10):0;return I_(i.split(" "),(t=>{let e=o(t,u);if(!("background-color"===t&&/transparent|rgba\s*\([^)]+,\s*0\)/.test(e)&&(e=o(t),"#ffffff"===Bo(e).toLowerCase())||"color"===t&&"#000000"===Bo(e).toLowerCase())){if("font-size"===t&&/em|%$/.test(e)){if(0===p)return;e=parseFloat(e)/(/%$/.test(e)?100:1)*p+"px"}"border"===t&&e&&(n+="padding:0 2px;"),n+=t+":"+e+";"}})),t.dispatch("AfterPreviewFormats"),E_.remove(a),n},N_=t=>{const e=(t=>{const e={},n=(t,i)=>{t&&(d(t)?(g(i)||(i=[i]),X(i,(t=>{y(t.deep)&&(t.deep=!Td(t)),y(t.split)&&(t.split=!Td(t)||Id(t)),y(t.remove)&&Td(t)&&!Id(t)&&(t.remove="none"),Td(t)&&Id(t)&&(t.mixed=!0,t.block_expand=!0),d(t.classes)&&(t.classes=t.classes.split(/\s+/))})),e[t]=i):gt(t,((t,e)=>{n(e,t)})))};return n((t=>{const e=t.dom,n=t.schema.type,i={valigntop:[{selector:"td,th",styles:{verticalAlign:"top"}}],valignmiddle:[{selector:"td,th",styles:{verticalAlign:"middle"}}],valignbottom:[{selector:"td,th",styles:{verticalAlign:"bottom"}}],alignleft:[{selector:"figure.image",collapsed:!1,classes:"align-left",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"left"},inherit:!1,preview:!1},{selector:"img,audio,video",collapsed:!1,styles:{float:"left"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginLeft:"0px",marginRight:"auto"},onformat:t=>{e.setStyle(t,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"center"},inherit:!1,preview:"font-family font-size"},{selector:"figure.image",collapsed:!1,classes:"align-center",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"},preview:"font-family font-size"},{selector:".mce-preview-object",ceFalseOverride:!0,styles:{display:"table",marginLeft:"auto",marginRight:"auto"},preview:!1},{selector:"[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{marginLeft:"auto",marginRight:"auto"},preview:!1}],alignright:[{selector:"figure.image",collapsed:!1,classes:"align-right",ceFalseOverride:!0,preview:"font-family font-size"},{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"right"},inherit:!1,preview:"font-family font-size"},{selector:"img,audio,video",collapsed:!1,styles:{float:"right"},preview:"font-family font-size"},{selector:"table",collapsed:!1,styles:{marginRight:"0px",marginLeft:"auto"},onformat:t=>{e.setStyle(t,"float",null)},preview:"font-family font-size"},{selector:".mce-preview-object,[data-ephox-embed-iri]",ceFalseOverride:!0,styles:{float:"right"},preview:!1}],alignjustify:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,tr,div,ul,ol,li,pre",styles:{textAlign:"justify"},inherit:!1,preview:"font-family font-size"}],bold:[{inline:"strong",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all",preserve_attributes:["class","style"]}],italic:[{inline:"em",remove:"all",preserve_attributes:["class","style"]},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all",preserve_attributes:["class","style"]}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all",preserve_attributes:["class","style"]}],strikethrough:(()=>{const t={inline:"span",styles:{textDecoration:"line-through"},exact:!0},e={inline:"strike",remove:"all",preserve_attributes:["class","style"]},i={inline:"s",remove:"all",preserve_attributes:["class","style"]};return"html4"!==n?[i,t,e]:[t,i,e]})(),forecolor:{inline:"span",styles:{color:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},links:!0,remove_similar:!0,clear_child_styles:!0},fontname:{inline:"span",toggle:!1,styles:{fontFamily:"%value"},clear_child_styles:!0},fontsize:{inline:"span",toggle:!1,styles:{fontSize:"%value"},clear_child_styles:!0},lineheight:{selector:"h1,h2,h3,h4,h5,h6,p,li,td,th,div",styles:{lineHeight:"%value"}},fontsize_class:{inline:"span",attributes:{class:"%value"}},blockquote:{block:"blockquote",wrapper:!0,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},code:{inline:"code"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:(t,e,n)=>$i(t)&&t.hasAttribute("href"),onformat:(t,n,i)=>{Pe.each(i,((n,i)=>{e.setAttrib(t,i,n)}))}},lang:{inline:"span",clear_child_styles:!0,remove_similar:!0,attributes:{lang:"%value","data-mce-lang":t=>{var e;return null!==(e=null==t?void 0:t.customValue)&&void 0!==e?e:null}}},removeformat:[{selector:"b,strong,em,i,font,u,strike,s,sub,sup,dfn,code,samp,kbd,var,cite,mark,q,del,ins,small",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]};return Pe.each("p h1 h2 h3 h4 h5 h6 div address pre dt dd samp".split(/\s/),(t=>{i[t]={block:t,remove:"all"}})),i})(t)),n(T_()),n(wc(t)),{get:t=>x(t)?e[t]:e,has:t=>Ct(e,t),register:n,unregister:t=>(t&&e[t]&&delete e[t],e)}})(t),n=aa({});return(t=>{t.addShortcut("meta+b","","Bold"),t.addShortcut("meta+i","","Italic"),t.addShortcut("meta+u","","Underline");for(let e=1;e<=6;e++)t.addShortcut("access+"+e,"",["FormatBlock",!1,"h"+e]);t.addShortcut("access+7","",["FormatBlock",!1,"p"]),t.addShortcut("access+8","",["FormatBlock",!1,"div"]),t.addShortcut("access+9","",["FormatBlock",!1,"address"])})(t),(t=>{t.on("mouseup keydown",(e=>{var n;((t,e,n)=>{const i=t.selection,r=t.getBody();Pv(t,null,n),8!==e&&46!==e||!i.isCollapsed()||i.getStart().innerHTML!==Ev||Pv(t,zh(r,i.getStart()),!0),37!==e&&39!==e||Pv(t,zh(r,i.getStart()),!0)})(t,e.keyCode,(n=t.selection.getRng().endContainer,rr(n)&&Yt(n.data,Hi)))}))})(t),Px(t)||((t,e)=>{t.set({}),e.on("NodeChange",(n=>{Iy(e,n.element,t.get())})),e.on("FormatApply FormatRemove",(n=>{const i=B.from(n.node).map((t=>hd(t)?t:t.startContainer)).bind((t=>$i(t)?B.some(t):B.from(t.parentElement))).getOrThunk((()=>Ay(e)));Iy(e,i,t.get())}))})(n,t),{get:e.get,has:e.has,register:e.register,unregister:e.unregister,apply:(e,n,i)=>{((t,e,n,i)=>{Rx(t).formatter.apply(e,n,i)})(t,e,n,i)},remove:(e,n,i,r)=>{((t,e,n,i,r)=>{Rx(t).formatter.remove(e,n,i,r)})(t,e,n,i,r)},toggle:(e,n,i)=>{((t,e,n,i)=>{Rx(t).formatter.toggle(e,n,i)})(t,e,n,i)},match:(e,n,i,r)=>((t,e,n,i,r)=>Rx(t).formatter.match(e,n,i,r))(t,e,n,i,r),closest:e=>((t,e)=>Rx(t).formatter.closest(e))(t,e),matchAll:(e,n)=>((t,e,n)=>Rx(t).formatter.matchAll(e,n))(t,e,n),matchNode:(e,n,i,r)=>((t,e,n,i,r)=>Rx(t).formatter.matchNode(e,n,i,r))(t,e,n,i,r),canApply:e=>((t,e)=>Rx(t).formatter.canApply(e))(t,e),formatChanged:(e,i,r,o)=>((t,e,n,i,r,o)=>Rx(t).formatter.formatChanged(e,n,i,r,o))(t,n,e,i,r,o),getCssText:E(P_,t)}},R_=t=>{switch(t.toLowerCase()){case"undo":case"redo":case"mcefocus":return!0;default:return!1}},B_=t=>{const e=pa(),n=aa(0),i=aa(0),r={data:[],typing:!1,beforeChange:()=>{((t,e,n)=>{Rx(t).undoManager.beforeChange(e,n)})(t,n,e)},add:(o,a)=>((t,e,n,i,r,o,a)=>Rx(t).undoManager.add(e,n,i,r,o,a))(t,r,i,n,e,o,a),dispatchChange:()=>{t.setDirty(!0);const e=kx(t);e.bookmark=pl(t.selection),t.dispatch("change",{level:e,lastLevel:st(r.data,i.get()).getOrUndefined()})},undo:()=>((t,e,n,i)=>Rx(t).undoManager.undo(e,n,i))(t,r,n,i),redo:()=>((t,e,n)=>Rx(t).undoManager.redo(e,n))(t,i,r.data),clear:()=>{((t,e,n)=>{Rx(t).undoManager.clear(e,n)})(t,r,i)},reset:()=>{((t,e)=>{Rx(t).undoManager.reset(e)})(t,r)},hasUndo:()=>((t,e,n)=>Rx(t).undoManager.hasUndo(e,n))(t,r,i),hasRedo:()=>((t,e,n)=>Rx(t).undoManager.hasRedo(e,n))(t,r,i),transact:e=>((t,e,n,i)=>Rx(t).undoManager.transact(e,n,i))(t,r,n,e),ignore:e=>{((t,e,n)=>{Rx(t).undoManager.ignore(e,n)})(t,n,e)},extra:(e,n)=>{((t,e,n,i,r)=>{Rx(t).undoManager.extra(e,n,i,r)})(t,r,i,e,n)}};return Px(t)||((t,e,n)=>{const i=aa(!1),r=t=>{Ox(e,!1,n),e.add({},t)};t.on("init",(()=>{e.add()})),t.on("BeforeExecCommand",(t=>{const i=t.command;R_(i)||(Dx(e,n),e.beforeChange())})),t.on("ExecCommand",(t=>{const e=t.command;R_(e)||r(t)})),t.on("ObjectResizeStart cut",(()=>{e.beforeChange()})),t.on("SaveContent ObjectResized blur",r),t.on("dragend",r),t.on("keyup",(n=>{const o=n.keyCode;if(n.isDefaultPrevented())return;const a=Ee.os.isMacOS()&&"Meta"===n.key;(o>=33&&o<=36||o>=37&&o<=40||45===o||n.ctrlKey||a)&&(r(),t.nodeChanged()),46!==o&&8!==o||t.nodeChanged(),i.get()&&e.typing&&!Ix(kx(t),e.data[0])&&(t.isDirty()||t.setDirty(!0),t.dispatch("TypingUndo"),i.set(!1),t.nodeChanged())})),t.on("keydown",(t=>{const o=t.keyCode;if(t.isDefaultPrevented())return;if(o>=33&&o<=36||o>=37&&o<=40||45===o)return void(e.typing&&r(t));const a=t.ctrlKey&&!t.altKey||t.metaKey;if((o<16||o>20)&&224!==o&&91!==o&&!e.typing&&!a)return e.beforeChange(),Ox(e,!0,n),e.add({},t),void i.set(!0);(Ee.os.isMacOS()?t.metaKey:t.ctrlKey&&!t.altKey)&&e.beforeChange()})),t.on("mousedown",(t=>{e.typing&&r(t)})),t.on("input",(t=>{var e;t.inputType&&("insertReplacementText"===t.inputType||"insertText"===(e=t).inputType&&null===e.data||(t=>"insertFromPaste"===t.inputType||"insertFromDrop"===t.inputType)(t))&&r(t)})),t.on("AddUndo Undo Redo ClearUndos",(e=>{e.isDefaultPrevented()||t.nodeChanged()}))})(t,r,n),(t=>{t.addShortcut("meta+z","","Undo"),t.addShortcut("meta+y,meta+shift+z","","Redo")})(t),r},z_=[9,27,lp.HOME,lp.END,19,20,44,144,145,33,34,45,16,17,18,91,92,93,lp.DOWN,lp.UP,lp.LEFT,lp.RIGHT].concat(Ee.browser.isFirefox()?[224]:[]),F_="data-mce-placeholder",V_=t=>"keydown"===t.type||"keyup"===t.type,H_=t=>{const e=t.keyCode;return e===lp.BACKSPACE||e===lp.DELETE},W_=(t,e)=>({from:t,to:e}),j_=(t,e)=>{const n=bn(t),i=bn(e.container());return wm(n,i).map((t=>((t,e)=>({block:t,position:e}))(t,e)))},Y_=(t,e)=>Kn(e,(t=>Wa(t)||dr(t.dom)),(e=>Sn(e,t))).filter(Ge).getOr(t),X_=(t,e)=>{const n=((t,e)=>{const n=Nn(t);return J(n,(t=>e.isBlock(We(t)))).fold(M(n),(t=>n.slice(0,t)))})(t,e);return X(n,xi),n},G_=(t,e,n)=>{const i=Mg(n,e);return Q(i.reverse(),(e=>Cr(t,e))).each(xi)},q_=(t,e,n,i,r)=>{if(Cr(i,n))return Xa(n),Ph(n.dom);((t,e)=>0===U(Ln(e),(e=>!Cr(t,e))).length)(i,r)&&Cr(i,e)&&pi(r,vn("br"));const o=Lh(n.dom,Gs.before(r.dom));return X(X_(e,i),(t=>{pi(r,t)})),G_(i,t,e),o},U_=(t,e,n,i)=>{if(Cr(i,n)){if(Cr(i,e)){const t=t=>{const e=(t,n)=>Bn(t).fold((()=>n),(t=>((t,e)=>t.isInline(We(e)))(i,t)?e(t,n.concat(Ea(t))):n));return e(t,[])},r=$(t(n),((t,e)=>(vi(t,e),e)),Ya());bi(e),mi(e,r)}return xi(n),Ph(e.dom)}const r=Nh(n.dom);return X(X_(e,i),(t=>{mi(n,t)})),G_(i,t,e),r},$_=(t,e)=>{Oh(t,e.dom).bind((t=>B.from(t.getNode()))).map(bn).filter(Ba).each(xi)},Z_=(t,e,n,i)=>($_(!0,e),$_(!1,n),((t,e)=>Cn(e,t)?((t,e)=>{const n=Mg(e,t);return B.from(n[n.length-1])})(e,t):B.none())(e,n).fold(E(U_,t,e,n,i),E(q_,t,e,n,i))),K_=(t,e,n,i,r)=>e?Z_(t,i,n,r):Z_(t,n,i,r),Q_=(t,e)=>{const n=bn(t.getBody()),i=((t,e,n,i)=>i.collapsed?((t,e,n,i)=>{const r=j_(e,Gs.fromRangeStart(i)),o=r.bind((i=>Th(n,e,i.position).bind((i=>j_(e,i).map((i=>((t,e,n,i)=>ur(i.position.getNode())&&!Cr(t,i.block)?Oh(!1,i.block.dom).bind((t=>t.isEqual(i.position)?Th(n,e,t).bind((t=>j_(e,t))):B.some(i))).getOr(i):i)(t,e,n,i)))))));return Be(r,o,W_).filter((t=>(t=>!Sn(t.from.block,t.to.block))(t)&&((t,e)=>{const n=bn(t);return Sn(Y_(n,e.from.block),Y_(n,e.to.block))})(e,t)&&(t=>!1===pr(t.from.block.dom)&&!1===pr(t.to.block.dom))(t)&&(t=>{const e=t=>za(t)||Br(t.dom);return e(t.from.block)&&e(t.to.block)})(t)))})(t,e,n,i):B.none())(t.schema,n.dom,e,t.selection.getRng()).map((i=>()=>{K_(n,e,i.from.block,i.to.block,t.schema).each((e=>{t.selection.setRng(e.toRange())}))}));return i},J_=(t,e)=>{const n=bn(e),i=E(Sn,t);return Zn(n,Wa,i).isSome()},tw=(t,e)=>t.selection.isCollapsed()?B.none():(t=>{const e=bn(t.getBody());return((t,e)=>{const n=Lh(t.dom,Gs.fromRangeStart(e)).isNone(),i=Dh(t.dom,Gs.fromRangeEnd(e)).isNone();return!((t,e)=>J_(t,e.startContainer)||J_(t,e.endContainer))(t,e)&&n&&i})(e,t.selection.getRng())?(t=>B.some((()=>{t.setContent(""),t.selection.setCursorLocation()})))(t):((t,e,n)=>{const i=e.getRng();return Be(wm(t,bn(i.startContainer)),wm(t,bn(i.endContainer)),((r,o)=>Sn(r,o)?B.none():B.some((()=>{i.deleteContents(),K_(t,!0,r,o,n).each((t=>{e.setRng(t.toRange())}))})))).getOr(B.none())})(e,t.selection,t.schema)})(t),ew=(t,e,n,i,r)=>B.from(e._selectionOverrides.showCaret(t,n,i,r)),nw=(t,e)=>t.dispatch("BeforeObjectSelected",{target:e}).isDefaultPrevented()?B.none():B.some((t=>{const e=t.ownerDocument.createRange();return e.selectNode(t),e})(e)),iw=(t,e,n)=>e.collapsed?((t,e,n)=>{const i=sh(1,t.getBody(),e),r=Gs.fromRangeStart(i),o=r.getNode();if(zu(o))return ew(1,t,o,!r.isAtEnd(),!1);const a=r.getNode(!0);if(zu(a))return ew(1,t,a,!1,!1);const s=Km(t.dom.getRoot(),r.getNode());return zu(s)?ew(1,t,s,!1,n):B.none()})(t,e,n).getOr(e):e,rw=t=>Cg(t)||xg(t),ow=t=>kg(t)||_g(t),aw=(t,e,n,i,r,o)=>{ew(i,t,o.getNode(!r),r,!0).each((n=>{if(e.collapsed){const t=e.cloneRange();r?t.setEnd(n.startContainer,n.startOffset):t.setStart(n.endContainer,n.endOffset),t.deleteContents()}else e.deleteContents();t.selection.setRng(n)})),((t,e)=>{rr(e)&&0===e.data.length&&t.remove(e)})(t.dom,n)},sw=(t,e)=>((t,e)=>{const n=t.selection.getRng();if(!rr(n.commonAncestorContainer))return B.none();const i=e?ph.Forwards:ph.Backwards,r=Ch(t.getBody()),o=E(hh,e?r.next:r.prev),a=e?rw:ow,s=ch(i,t.getBody(),n),l=o(s),c=l?mm(e,l):l;if(!c||!dh(s,c))return B.none();if(a(c))return B.some((()=>aw(t,n,s.getNode(),i,e,c)));const u=o(c);return u&&a(u)&&dh(c,u)?B.some((()=>aw(t,n,s.getNode(),i,e,u))):B.none()})(t,e),lw=(t,e)=>{const n=t.getBody();return e?Ph(n).filter(Cg):Nh(n).filter(kg)},cw=t=>{const e=t.selection.getRng();return!e.collapsed&&(lw(t,!0).exists((t=>t.isEqual(Gs.fromRangeStart(e))))||lw(t,!1).exists((t=>t.isEqual(Gs.fromRangeEnd(e)))))},uw=vl([{remove:["element"]},{moveToElement:["element"]},{moveToPosition:["position"]}]),hw=(t,e,n,i)=>Th(e,t,n).bind((r=>{return o=r.getNode(),x(o)&&(Wa(bn(o))||Va(bn(o)))||((t,e,n,i,r)=>{const o=e=>r.isInline(e.nodeName.toLowerCase())&&!th(n,i,t);return lh(!e,n).fold((()=>lh(e,i).fold(N,o)),o)})(t,e,n,r,i)?B.none():e&&pr(r.getNode())||!e&&pr(r.getNode(!0))?((t,e,n,i,r)=>{const o=r.getNode(!n);return wm(bn(e),bn(i.getNode())).map((e=>Cr(t,e)?uw.remove(e.dom):uw.moveToElement(o))).orThunk((()=>B.some(uw.moveToElement(o))))})(i,t,e,n,r):e&&kg(n)||!e&&Cg(n)?B.some(uw.moveToPosition(r)):B.none();var o})),dw=(t,e)=>B.from(Km(t.getBody(),e)),pw=t=>{const e=t.dom,n=t.selection,i=Km(t.getBody(),n.getNode());if(dr(i)&&e.isBlock(i)&&e.isEmpty(i)){const t=e.create("br",{"data-mce-bogus":"1"});e.setHTML(i,""),i.appendChild(t),n.setRng(Gs.before(t).toRange())}return!0},fw=(t,e)=>t.selection.isCollapsed()?((t,e)=>{const n=t.selection.getNode();return dw(t,n).filter(pr).fold((()=>((t,e,n,i)=>{const r=sh(e?1:-1,t,n),o=Gs.fromRangeStart(r),a=bn(t);return!e&&kg(o)?B.some(uw.remove(o.getNode(!0))):e&&Cg(o)?B.some(uw.remove(o.getNode())):!e&&Cg(o)&&Fg(a,o,i)?Vg(a,o,i).map((t=>uw.remove(t.getNode()))):e&&kg(o)&&zg(a,o,i)?Hg(a,o,i).map((t=>uw.remove(t.getNode()))):((t,e,n,i)=>((t,e)=>{const n=e.getNode(!t),i=t?"after":"before";return $i(n)&&n.getAttribute("data-mce-caret")===i})(e,n)?((t,e)=>b(e)?B.none():t&&pr(e.nextSibling)?B.some(uw.moveToElement(e.nextSibling)):!t&&pr(e.previousSibling)?B.some(uw.moveToElement(e.previousSibling)):B.none())(e,n.getNode(!e)).orThunk((()=>hw(t,e,n,i))):hw(t,e,n,i).bind((e=>((t,e,n)=>n.fold((t=>B.some(uw.remove(t))),(t=>B.some(uw.moveToElement(t))),(n=>th(e,n,t)?B.none():B.some(uw.moveToPosition(n)))))(t,n,e))))(t,e,o,i)})(t.getBody(),e,t.selection.getRng(),t.schema).map((n=>()=>n.fold(((t,e)=>n=>(t._selectionOverrides.hideFakeCaret(),hm(t,e,bn(n)),!0))(t,e),((t,e)=>n=>{const i=e?Gs.before(n):Gs.after(n);return t.selection.setRng(i.toRange()),!0})(t,e),(t=>e=>(t.selection.setRng(e.toRange()),!0))(t))))),(()=>B.some(C)))})(t,e):((t,e)=>{const n=t.selection.getNode();return pr(n)&&!fr(n)?dw(t,n.parentNode).filter(pr).fold((()=>B.some((()=>{var n;n=bn(t.getBody()),X(Ri(n,".mce-offscreen-selection"),xi),hm(t,e,bn(t.selection.getNode())),Sm(t)}))),(()=>B.some(C))):cw(t)?B.some((()=>{Am(t,t.selection.getRng(),bn(t.getBody()))})):B.none()})(t,e),gw=(t,e)=>t.selection.isCollapsed()?((t,e)=>{const n=Gs.fromRangeStart(t.selection.getRng());return Th(e,t.getBody(),n).filter((t=>e?yg(t):bg(t))).bind((t=>eh(e?0:-1,t))).map((e=>()=>t.selection.select(e)))})(t,e):B.none(),mw=rr,vw=t=>mw(t)&&t.data[0]===Ga,yw=t=>mw(t)&&t.data[t.data.length-1]===Ga,bw=t=>{var e;return(null!==(e=t.ownerDocument)&&void 0!==e?e:document).createTextNode(Ga)},xw=(t,e)=>t?(t=>{var e;if(mw(t.previousSibling))return yw(t.previousSibling)||t.previousSibling.appendData(Ga),t.previousSibling;if(mw(t))return vw(t)||t.insertData(0,Ga),t;{const n=bw(t);return null===(e=t.parentNode)||void 0===e||e.insertBefore(n,t),n}})(e):(t=>{var e,n;if(mw(t.nextSibling))return vw(t.nextSibling)||t.nextSibling.insertData(0,Ga),t.nextSibling;if(mw(t))return yw(t)||t.appendData(Ga),t;{const i=bw(t);return t.nextSibling?null===(e=t.parentNode)||void 0===e||e.insertBefore(i,t.nextSibling):null===(n=t.parentNode)||void 0===n||n.appendChild(i),i}})(e),_w=E(xw,!0),ww=E(xw,!1),Sw=(t,e)=>rr(t.container())?xw(e,t.container()):xw(e,t.getNode()),Cw=(t,e)=>{const n=e.get();return n&&t.container()===n&&Qa(n)},kw=(t,e)=>e.fold((e=>{Du(t.get());const n=_w(e);return t.set(n),B.some(Gs(n,n.length-1))}),(e=>Ph(e).map((e=>{if(Cw(e,t)){const e=t.get();return Gs(e,1)}{Du(t.get());const n=Sw(e,!0);return t.set(n),Gs(n,1)}}))),(e=>Nh(e).map((e=>{if(Cw(e,t)){const e=t.get();return Gs(e,e.length-1)}{Du(t.get());const n=Sw(e,!1);return t.set(n),Gs(n,n.length-1)}}))),(e=>{Du(t.get());const n=ww(e);return t.set(n),B.some(Gs(n,1))})),Aw=(t,e)=>{for(let n=0;n<t.length;n++){const i=t[n].apply(null,e);if(i.isSome())return i}return B.none()},Mw=vl([{before:["element"]},{start:["element"]},{end:["element"]},{after:["element"]}]),Tw=(t,e)=>Ju(e,t)||t,Iw=(t,e,n)=>{const i=vm(n),r=Tw(e,i.container());return gm(t,r,i).fold((()=>Dh(r,i).bind(E(gm,t,r)).map((t=>Mw.before(t)))),B.none)},Ew=(t,e)=>null===zh(t,e),Ow=(t,e,n)=>gm(t,e,n).filter(E(Ew,e)),Dw=(t,e,n)=>{const i=ym(n);return Ow(t,e,i).bind((t=>Lh(t,i).isNone()?B.some(Mw.start(t)):B.none()))},Lw=(t,e,n)=>{const i=vm(n);return Ow(t,e,i).bind((t=>Dh(t,i).isNone()?B.some(Mw.end(t)):B.none()))},Pw=(t,e,n)=>{const i=ym(n),r=Tw(e,i.container());return gm(t,r,i).fold((()=>Lh(r,i).bind(E(gm,t,r)).map((t=>Mw.after(t)))),B.none)},Nw=t=>!fm(Bw(t)),Rw=(t,e,n)=>Aw([Iw,Dw,Lw,Pw],[t,e,n]).filter(Nw),Bw=t=>t.fold(T,T,T,T),zw=t=>t.fold(M("before"),M("start"),M("end"),M("after")),Fw=t=>t.fold(Mw.before,Mw.before,Mw.after,Mw.after),Vw=t=>t.fold(Mw.start,Mw.start,Mw.end,Mw.end),Hw=(t,e,n,i,r,o)=>Be(gm(e,n,i),gm(e,n,r),((e,i)=>e!==i&&((t,e,n)=>{const i=Ju(e,t),r=Ju(n,t);return x(i)&&i===r})(n,e,i)?Mw.after(t?e:i):o)).getOr(o),Ww=(t,e)=>t.fold(R,(t=>{return i=e,!(zw(n=t)===zw(i)&&Bw(n)===Bw(i));var n,i})),jw=(t,e)=>t?e.fold(k(B.some,Mw.start),B.none,k(B.some,Mw.after),B.none):e.fold(B.none,k(B.some,Mw.before),B.none,k(B.some,Mw.end)),Yw=(t,e,n)=>{const i=t?1:-1;return e.setRng(Gs(n.container(),n.offset()+i).toRange()),e.getSel().modify("move",t?"forward":"backward","word"),!0};var Xw;!function(t){t[t.Br=0]="Br",t[t.Block=1]="Block",t[t.Wrap=2]="Wrap",t[t.Eol=3]="Eol"}(Xw||(Xw={}));const Gw=(t,e)=>t===ph.Backwards?it(e):e,qw=(t,e,n)=>t===ph.Forwards?e.next(n):e.prev(n),Uw=(t,e,n,i)=>ur(i.getNode(e===ph.Forwards))?Xw.Br:!1===th(n,i)?Xw.Block:Xw.Wrap,$w=(t,e,n,i)=>{const r=Ch(n);let o=i;const a=[];for(;o;){const n=qw(e,r,o);if(!n)break;if(ur(n.getNode(!1)))return e===ph.Forwards?{positions:Gw(e,a).concat([n]),breakType:Xw.Br,breakAt:B.some(n)}:{positions:Gw(e,a),breakType:Xw.Br,breakAt:B.some(n)};if(n.isVisible()){if(t(o,n)){const t=Uw(0,e,o,n);return{positions:Gw(e,a),breakType:t,breakAt:B.some(n)}}a.push(n),o=n}else o=n}return{positions:Gw(e,a),breakType:Xw.Eol,breakAt:B.none()}},Zw=(t,e,n,i)=>e(n,i).breakAt.map((i=>{const r=e(n,i).positions;return t===ph.Backwards?r.concat(i):[i].concat(r)})).getOr([]),Kw=(t,e)=>Z(t,((t,n)=>t.fold((()=>B.some(n)),(i=>Be(lt(i.getClientRects()),lt(n.getClientRects()),((t,r)=>{const o=Math.abs(e-t.left);return Math.abs(e-r.left)<=o?n:i})).or(t)))),B.none()),Qw=(t,e)=>lt(e.getClientRects()).bind((e=>Kw(t,e.left))),Jw=E($w,Gs.isAbove,-1),tS=E($w,Gs.isBelow,1),eS=E(Zw,-1,Jw),nS=E(Zw,1,tS),iS=(t,e)=>Jw(t,e).breakAt.isNone(),rS=(t,e)=>tS(t,e).breakAt.isNone(),oS=(t,e)=>Qw(eS(t,e),e),aS=(t,e)=>Qw(nS(t,e),e),sS=pr,lS=(t,e)=>Math.abs(t.left-e),cS=(t,e)=>Math.abs(t.right-e),uS=(t,e)=>Dt(t,((t,n)=>{const i=Math.min(lS(t,e),cS(t,e)),r=Math.min(lS(n,e),cS(n,e));return r===i&&kt(n,"node")&&sS(n.node)||r<i?n:t})),hS=t=>{const e=e=>Y(e,(e=>{const n=ls(e);return n.node=t,n}));if($i(t))return e(t.getClientRects());if(rr(t)){const n=t.ownerDocument.createRange();return n.setStart(t,0),n.setEnd(t,t.data.length),e(n.getClientRects())}return[]},dS=t=>et(t,hS);var pS;!function(t){t[t.Up=-1]="Up",t[t.Down=1]="Down"}(pS||(pS={}));const fS=(t,e,n,i,r,o)=>{let a=0;const s=[],l=i=>{let o=dS([i]);-1===t&&(o=o.reverse());for(let t=0;t<o.length;t++){const i=o[t];if(!n(i,c)){if(s.length>0&&e(i,Pt(s))&&a++,i.line=a,r(i))return!0;s.push(i)}}return!1},c=Pt(o.getClientRects());if(!c)return s;const u=o.getNode();return u&&(l(u),((t,e,n,i)=>{let r=i;for(;r=Qu(r,t,Ts,e);)if(n(r))return})(t,i,l,u)),s},gS=E(fS,pS.Up,hs,ds),mS=E(fS,pS.Down,ds,hs),vS=t=>Pt(t.getClientRects()),yS=t=>e=>((t,e)=>e.line>t)(t,e),bS=t=>e=>((t,e)=>e.line===t)(t,e),xS=(t,e)=>{t.selection.setRng(e),af(t,t.selection.getRng())},_S=(t,e,n)=>B.some(iw(t,e,n)),wS=(t,e,n,i,r,o)=>{const a=e===ph.Forwards,s=Ch(t.getBody()),l=E(hh,a?s.next:s.prev),c=a?i:r;if(!n.collapsed){const i=fs(n);if(o(i))return ew(e,t,i,e===ph.Backwards,!1);if(cw(t)){const t=n.cloneRange();return t.collapse(e===ph.Backwards),B.from(t)}}const u=ch(e,t.getBody(),n);if(c(u))return nw(t,u.getNode(!a));let h=l(u);const d=as(n);if(!h)return d?B.some(n):B.none();if(h=mm(a,h),c(h))return ew(e,t,h.getNode(!a),a,!1);const p=l(h);return p&&c(p)&&dh(h,p)?ew(e,t,p.getNode(!a),a,!1):d?_S(t,h.toRange(),!1):B.none()},SS=(t,e,n,i,r,o)=>{const a=ch(e,t.getBody(),n),s=Pt(a.getClientRects()),l=e===pS.Down,c=t.getBody();if(!s)return B.none();if(cw(t)){const t=l?Gs.fromRangeEnd(n):Gs.fromRangeStart(n);return(l?aS:oS)(c,t).orThunk((()=>B.from(t))).map((t=>t.toRange()))}const u=(l?mS:gS)(c,yS(1),a),h=U(u,bS(1)),d=s.left,p=uS(h,d);if(p&&o(p.node)){const n=Math.abs(d-p.left),i=Math.abs(d-p.right);return ew(e,t,p.node,n<i,!1)}let f;if(f=i(a)?a.getNode():r(a)?a.getNode(!0):fs(n),f){const n=((t,e,n,i)=>{const r=Ch(e);let o,a,s,l;const c=[];let u=0;1===t?(o=r.next,a=ds,s=hs,l=Gs.after(i)):(o=r.prev,a=hs,s=ds,l=Gs.before(i));const h=vS(l);do{if(!l.isVisible())continue;const t=vS(l);if(s(t,h))continue;c.length>0&&a(t,Pt(c))&&u++;const e=ls(t);if(e.position=l,e.line=u,n(e))return c;c.push(e)}while(l=o(l));return c})(e,c,yS(1),f);let i=uS(U(n,bS(1)),d);if(i)return _S(t,i.position.toRange(),!1);if(i=Pt(U(n,bS(0))),i)return _S(t,i.position.toRange(),!1)}return 0===h.length?CS(t,l).filter(l?r:i).map((e=>iw(t,e.toRange(),!1))):B.none()},CS=(t,e)=>{const n=t.selection.getRng(),i=e?Gs.fromRangeEnd(n):Gs.fromRangeStart(n),r=(o=i.container(),a=t.getBody(),Zn(bn(o),(t=>Vu(t.dom)),(t=>t.dom===a)).map((t=>t.dom)).getOr(a));var o,a;if(e){const t=tS(r,i);return ct(t.positions)}{const t=Jw(r,i);return lt(t.positions)}},kS=(t,e,n)=>CS(t,e).filter(n).exists((e=>(t.selection.setRng(e.toRange()),!0))),AS=(t,e)=>{const n=t.dom.createRng();n.setStart(e.container(),e.offset()),n.setEnd(e.container(),e.offset()),t.selection.setRng(n)},MS=(t,e)=>{t?e.setAttribute("data-mce-selected","inline-boundary"):e.removeAttribute("data-mce-selected")},TS=(t,e,n)=>kw(e,n).map((e=>(AS(t,e),n))),IS=(t,e,n)=>!!_c(t)&&((t,e,n)=>{const i=t.getBody(),r=((t,e,n)=>{const i=Gs.fromRangeStart(t);if(t.collapsed)return i;{const r=Gs.fromRangeEnd(t);return n?Lh(e,r).getOr(r):Dh(e,i).getOr(i)}})(t.selection.getRng(),i,n);return((t,e,n,i)=>{const r=mm(t,i),o=Rw(e,n,r);return Rw(e,n,r).bind(E(jw,t)).orThunk((()=>((t,e,n,i,r)=>{const o=mm(t,r);return Th(t,n,o).map(E(mm,t)).fold((()=>i.map(Fw)),(r=>Rw(e,n,r).map(E(Hw,t,e,n,o,r)).filter(E(Ww,i)))).filter(Nw)})(t,e,n,o,i)))})(n,E(pm,t),i,r).bind((n=>TS(t,e,n)))})(t,e,n).isSome(),ES=(t,e,n)=>!!_c(e)&&((t,e)=>{const n=e.selection.getRng(),i=t?Gs.fromRangeEnd(n):Gs.fromRangeStart(n);return!!(t=>_(t.selection.getSel().modify))(e)&&(t&&es(i)?Yw(!0,e.selection,i):!(t||!ns(i))&&Yw(!1,e.selection,i))})(t,e),OS=t=>{const e=aa(null),n=E(pm,t);return t.on("NodeChange",(i=>{_c(t)&&(((t,e,n)=>{const i=Y(Ri(bn(e.getRoot()),'*[data-mce-selected="inline-boundary"]'),(t=>t.dom)),r=U(i,t),o=U(n,t);X(rt(r,o),E(MS,!1)),X(rt(o,r),E(MS,!0))})(n,t.dom,i.parents),((t,e)=>{const n=e.get();if(t.selection.isCollapsed()&&!t.composing&&n){const i=Gs.fromRangeStart(t.selection.getRng());Gs.isTextPosition(i)&&!(t=>es(t)||ns(t))(i)&&(AS(t,((t,e)=>Gs.isTextPosition(e)?((t,e)=>Mu(t)&&e.container()===t?((t,e)=>{const n=Iu(t.data.substr(0,e.offset())),i=Iu(t.data.substr(e.offset()));return(n.text+i.text).length>0?(Eu(t),Gs(t,e.offset()-n.count)):e})(t,e):Ou(t,e))(t,e):((t,e)=>e.container()===t.parentNode?((t,e)=>{const n=e.container(),i=((t,e)=>{const n=H(t,e);return-1===n?B.none():B.some(n)})(ut(n.childNodes),t).map((t=>t<e.offset()?Gs(n,e.offset()-1):e)).getOr(e);return Du(t),i})(t,e):Ou(t,e))(t,e))(n,i)),e.set(null))}})(t,e),((t,e,n,i)=>{if(e.selection.isCollapsed()){const r=U(i,t);X(r,(i=>{const r=Gs.fromRangeStart(e.selection.getRng());Rw(t,e.getBody(),r).bind((t=>TS(e,n,t)))}))}})(n,t,e,i.parents))})),e},DS=E(ES,!0),LS=E(ES,!1),PS=(t,e,n)=>{if(_c(t)){const i=CS(t,e).getOrThunk((()=>{const n=t.selection.getRng();return e?Gs.fromRangeEnd(n):Gs.fromRangeStart(n)}));return Rw(E(pm,t),t.getBody(),i).exists((e=>{const i=Fw(e);return kw(n,i).exists((e=>(AS(t,e),!0)))}))}return!1},NS=(t,e)=>n=>kw(e,n).map((e=>()=>AS(t,e))),RS=(t,e,n,i)=>{const r=t.getBody(),o=E(pm,t);t.undoManager.ignore((()=>{t.selection.setRng(((t,e)=>{const n=document.createRange();return n.setStart(t.container(),t.offset()),n.setEnd(e.container(),e.offset()),n})(n,i)),xm(t),Rw(o,r,Gs.fromRangeStart(t.selection.getRng())).map(Vw).bind(NS(t,e)).each(P)})),t.nodeChanged()},BS=(t,e,n)=>{if(t.selection.isCollapsed()&&_c(t)){const i=Gs.fromRangeStart(t.selection.getRng());return((t,e,n,i)=>{const r=((t,e)=>Ju(e,t)||t)(t.getBody(),i.container()),o=E(pm,t),a=Rw(o,r,i);return a.bind((t=>n?t.fold(M(B.some(Vw(t))),B.none,M(B.some(Fw(t))),B.none):t.fold(B.none,M(B.some(Fw(t))),B.none,M(B.some(Vw(t)))))).map(NS(t,e)).getOrThunk((()=>{const s=Ih(n,r,i),l=s.bind((t=>Rw(o,r,t)));return Be(a,l,(()=>gm(o,r,i).bind((e=>(t=>Be(Ph(t),Nh(t),((e,n)=>{const i=mm(!0,e),r=mm(!1,n);return Dh(t,i).forall((t=>t.isEqual(r)))})).getOr(!0))(e)?B.some((()=>{hm(t,n,bn(e))})):B.none())))).getOrThunk((()=>l.bind((()=>s.map((r=>()=>{n?RS(t,e,i,r):RS(t,e,r,i)}))))))}))})(t,e,n,i)}return B.none()},zS=(t,e)=>{const n=bn(t.getBody()),i=bn(t.selection.getStart()),r=Mg(i,n);return J(r,e).fold(M(r),(t=>r.slice(0,t)))},FS=t=>1===Fn(t),VS=(t,e)=>{const n=E(Vv,t);return et(e,(t=>n(t)?[t.dom]:[]))},HS=t=>{const e=(t=>zS(t,(e=>t.schema.isBlock(We(e)))))(t);return VS(t,e)},WS=(t,e)=>{const n=t.selection.getStart(),i=((t,e)=>{const n=e.parentElement;return ur(e)&&!m(n)&&t.dom.isEmpty(n)})(t,n)||Dd(bn(n))?Fv(n,e):((t,e)=>{const{caretContainer:n,caretPosition:i}=zv(e);return t.insertNode(n.dom),i})(t.selection.getRng(),e);t.selection.setRng(i.toRange())},jS=t=>rr(t.startContainer),YS=(t,e)=>t.selection.isCollapsed()?((t,e)=>{const n=U((t=>zS(t,(e=>t.schema.isBlock(We(e))||(t=>Fn(t)>1)(e))))(t),FS);return ct(n).bind((i=>{const r=Gs.fromRangeStart(t.selection.getRng());return Cm(e,r,i.dom)&&!Dd(i)?B.some((()=>((t,e,n,i)=>{const r=VS(e,i);if(0===r.length)hm(e,t,n);else{const t=Fv(n.dom,r);e.selection.setRng(t.toRange())}})(e,t,i,n))):B.none()}))})(t,e):(t=>{if((t=>{const e=t.selection.getRng();return(t=>0===t.startOffset&&jS(t))(e)&&((t,e)=>{const n=e.startContainer.parentElement;return!m(n)&&Vv(t,bn(n))})(t,e)&&(t=>(t=>(t=>{const e=t.startContainer.parentNode,n=t.endContainer.parentNode;return!m(e)&&!m(n)&&e.isEqualNode(n)})(t)&&(t=>{const e=t.endContainer;return t.endOffset===(rr(e)?e.length:e.childNodes.length)})(t))(t)||(t=>!t.endContainer.isEqualNode(t.commonAncestorContainer))(t))(e)})(t)){const e=HS(t);return B.some((()=>{xm(t),((t,e)=>{const n=rt(e,HS(t));n.length>0&&WS(t,n)})(t,e)}))}return B.none()})(t),XS=t=>((t=>{const e=t.selection.getRng();return e.collapsed&&(jS(e)||t.dom.isEmpty(e.startContainer))&&!(t=>{return e=bn(t.selection.getStart()),n=t.schema,Bi(e,(t=>Bh(t.dom)),(t=>n.isBlock(We(t))));var e,n})(t)})(t)&&WS(t,[]),!0),GS=(t,e,n)=>x(n)?B.some((()=>{t._selectionOverrides.hideFakeCaret(),hm(t,e,bn(n))})):B.none(),qS=(t,e)=>t.selection.isCollapsed()?((t,e)=>{const n=e?xg:_g,i=e?ph.Forwards:ph.Backwards,r=ch(i,t.getBody(),t.selection.getRng());return n(r)?GS(t,e,r.getNode(!e)):B.from(mm(e,r)).filter((t=>n(t)&&dh(r,t))).bind((n=>GS(t,e,n.getNode(!e))))})(t,e):((t,e)=>{const n=t.selection.getNode();return mr(n)?GS(t,e,n):B.none()})(t,e),US=t=>Kt(null!=t?t:"").getOr(0),$S=(t,e)=>(t||"table"===We(e)?"margin":"padding")+("rtl"===li(e,"direction")?"-right":"-left"),ZS=t=>{const e=QS(t);return!t.mode.isReadOnly()&&(e.length>1||((t,e)=>nt(e,(e=>{const n=$S(oc(t),e),i=ui(e,n).map(US).getOr(0);return"false"!==t.dom.getContentEditable(e.dom)&&i>0})))(t,e))},KS=t=>Fa(t)||Va(t),QS=t=>U(wi(t.selection.getSelectedBlocks()),(t=>!KS(t)&&!(t=>Tn(t).exists(KS))(t)&&Kn(t,(t=>dr(t.dom)||pr(t.dom))).exists((t=>dr(t.dom))))),JS=(t,e)=>{var n,i;const{dom:r}=t,o=ac(t),a=null!==(i=null===(n=/[a-z%]+$/i.exec(o))||void 0===n?void 0:n[0])&&void 0!==i?i:"px",s=US(o),l=oc(t);X(QS(t),(t=>{((t,e,n,i,r,o)=>{const a=$S(n,bn(o)),s=US(t.getStyle(o,a));if("outdent"===e){const e=Math.max(0,s-i);t.setStyle(o,a,e?e+r:"")}else{const e=s+i+r;t.setStyle(o,a,e)}})(r,e,l,s,a,t.dom)}))},tC=t=>JS(t,"outdent"),eC=t=>{if(t.selection.isCollapsed()&&ZS(t)){const e=t.dom,n=t.selection.getRng(),i=Gs.fromRangeStart(n),r=e.getParent(n.startContainer,e.isBlock);if(null!==r&&Dg(bn(r),i,t.schema))return B.some((()=>tC(t)))}return B.none()},nC=(t,e,n)=>ht([eC,fw,sw,(t,n)=>BS(t,e,n),Q_,Zm,gw,qS,tw,YS],(e=>e(t,n))).filter((e=>t.selection.isEditable())),iC=t=>void 0===t.touches||1!==t.touches.length?B.none():B.some(t.touches[0]),rC=(t,e)=>Ct(t,e.nodeName),oC=(t,e)=>!!rr(e)||!!$i(e)&&!(rC(t.getBlockElements(),e)||Zh(e)||Vr(t,e)||Mr(e)),aC=(t,e)=>{if(rr(e)){if(0===e.data.length)return!0;if(/^\s+$/.test(e.data))return!e.nextSibling||rC(t,e.nextSibling)||Mr(e.nextSibling)}return!1},sC=t=>t.dom.create(Fl(t),Vl(t)),lC=t=>{const e=t.dom,n=t.selection,i=t.schema,r=i.getBlockElements(),o=n.getStart(),a=t.getBody();let s,l,c=!1;const u=Fl(t);if(!o||!$i(o))return;const h=a.nodeName.toLowerCase();if(!i.isValidChild(h,u.toLowerCase())||((t,e,n)=>j(Ag(bn(n),bn(e)),(e=>rC(t,e.dom))))(r,a,o))return;const d=n.getRng(),{startContainer:p,startOffset:f,endContainer:g,endOffset:m}=d,v=If(t);let y=a.firstChild;for(;y;)if($i(y)&&Rr(i,y),oC(i,y)){if(aC(r,y)){l=y,y=y.nextSibling,e.remove(l);continue}s||(s=sC(t),a.insertBefore(s,y),c=!0),l=y,y=y.nextSibling,s.appendChild(l)}else s=null,y=y.nextSibling;c&&v&&(d.setStart(p,f),d.setEnd(g,m),n.setRng(d),t.nodeChanged())},cC=(t,e,n)=>{const i=bn(sC(t)),r=Ya();mi(i,r),n(e,i);const o=document.createRange();return o.setStartBefore(r.dom),o.setEndBefore(r.dom),o},uC=t=>e=>-1!==(" "+e.attr("class")+" ").indexOf(t),hC=(t,e,n)=>function(i){const r=arguments,o=r[r.length-2],a=o>0?e.charAt(o-1):"";if('"'===a)return i;if(">"===a){const t=e.lastIndexOf("<",o);if(-1!==t&&-1!==e.substring(t,o).indexOf('contenteditable="false"'))return i}return'<span class="'+n+'" data-mce-content="'+t.dom.encode(r[0])+'">'+t.dom.encode("string"==typeof r[1]?r[1]:r[0])+"</span>"},dC=(t,e)=>{e.hasAttribute("data-mce-caret")&&(os(e),t.selection.setRng(t.selection.getRng()),t.selection.scrollIntoView(e))},pC=(t,e)=>{const n=(t=>ti(bn(t.getBody()),"*[data-mce-caret]").map((t=>t.dom)).getOrNull())(t);if(n)return"compositionstart"===e.type?(e.preventDefault(),e.stopPropagation(),void dC(t,n)):void(ts(n)&&(dC(t,n),t.undoManager.add()))},fC=pr,gC=(t,e,n)=>{const i=Ch(t.getBody()),r=E(hh,1===e?i.next:i.prev);if(n.collapsed){const i=t.dom.getParent(n.startContainer,"PRE");if(!i)return;if(!r(Gs.fromRangeStart(n))){const n=bn((t=>{const e=t.dom.create(Fl(t));return e.innerHTML='<br data-mce-bogus="1">',e})(t));1===e?fi(bn(i),n):pi(bn(i),n),t.selection.select(n.dom,!0),t.selection.collapse()}}},mC=(t,e)=>((t,e)=>{const n=e?ph.Forwards:ph.Backwards,i=t.selection.getRng();return((t,e,n)=>wS(e,t,n,Cg,kg,fC))(n,t,i).orThunk((()=>(gC(t,n,i),B.none())))})(t,((t,e)=>{const n=e?t.getEnd(!0):t.getStart(!0);return fm(n)?!e:e})(t.selection,e)).exists((e=>(xS(t,e),!0))),vC=(t,e)=>((t,e)=>{const n=e?1:-1,i=t.selection.getRng();return((t,e,n)=>SS(e,t,n,(t=>Cg(t)||wg(t)),(t=>kg(t)||Sg(t)),fC))(n,t,i).orThunk((()=>(gC(t,n,i),B.none())))})(t,e).exists((e=>(xS(t,e),!0))),yC=(t,e)=>kS(t,e,e?kg:Cg),bC=(t,e)=>lw(t,!e).map((n=>{const i=n.toRange(),r=t.selection.getRng();return e?i.setStart(r.startContainer,r.startOffset):i.setEnd(r.endContainer,r.endOffset),i})).exists((e=>(xS(t,e),!0))),xC=t=>W(["figcaption"],We(t)),_C=(t,e)=>!!t.selection.isCollapsed()&&((t,e)=>{const n=bn(t.getBody()),i=Gs.fromRangeStart(t.selection.getRng());return((t,e,n)=>{const i=E(Sn,e);return Kn(bn(t.container()),(t=>n.isBlock(We(t))),i).filter(xC)})(i,n,t.schema).exists((()=>{if(((t,e,n)=>e?rS(t.dom,n):iS(t.dom,n))(n,e,i)){const i=cC(t,n,e?mi:gi);return t.selection.setRng(i),!0}return!1}))})(t,e),wC=(t,e)=>((t,e)=>e?B.from(t.dom.getParent(t.selection.getNode(),"details")).map((e=>((t,e)=>{const n=t.selection.getRng(),i=Gs.fromRangeStart(n);return!(t.getBody().lastChild!==e||!rS(e,i)||(t.execCommand("InsertNewBlockAfter"),0))})(t,e))).getOr(!1):B.from(t.dom.getParent(t.selection.getNode(),"summary")).bind((e=>B.from(t.dom.getParent(e,"details")).map((n=>((t,e,n)=>{const i=t.selection.getRng(),r=Gs.fromRangeStart(i);return!(t.getBody().firstChild!==e||!iS(n,r)||(t.execCommand("InsertNewBlockBefore"),0))})(t,n,e))))).getOr(!1))(t,e),SC={shiftKey:!1,altKey:!1,ctrlKey:!1,metaKey:!1,keyCode:0},CC=(t,e)=>e.keyCode===t.keyCode&&e.shiftKey===t.shiftKey&&e.altKey===t.altKey&&e.ctrlKey===t.ctrlKey&&e.metaKey===t.metaKey,kC=(t,...e)=>()=>t.apply(null,e),AC=(t,e)=>Q(((t,e)=>et((t=>Y(t,(t=>({...SC,...t}))))(t),(t=>CC(t,e)?[t]:[])))(t,e),(t=>t.action())),MC=(t,e)=>ht(((t,e)=>et((t=>Y(t,(t=>({...SC,...t}))))(t),(t=>CC(t,e)?[t]:[])))(t,e),(t=>t.action())),TC=(t,e)=>{const n=e?ph.Forwards:ph.Backwards,i=t.selection.getRng();return wS(t,n,i,xg,_g,mr).exists((e=>(xS(t,e),!0)))},IC=(t,e)=>{const n=e?1:-1,i=t.selection.getRng();return SS(t,n,i,xg,_g,mr).exists((e=>(xS(t,e),!0)))},EC=(t,e)=>kS(t,e,e?_g:xg),OC=vl([{none:["current"]},{first:["current"]},{middle:["current","target"]},{last:["current"]}]),DC={...OC,none:t=>OC.none(t)},LC=(t,e,n)=>et(Nn(t),(t=>_n(t,e)?n(t)?[t]:[]:LC(t,e,n))),PC=(t,e)=>ei(t,"table",e),NC=(t,e,n,i,r=R)=>{const o=1===i;if(!o&&n<=0)return DC.first(t[0]);if(o&&n>=t.length-1)return DC.last(t[t.length-1]);{const o=n+i,a=t[o];return r(a)?DC.middle(e,a):NC(t,e,o,i,r)}},RC=(t,e)=>PC(t,e).bind((e=>{const n=LC(e,"th,td",R);return J(n,(e=>Sn(t,e))).map((t=>({index:t,all:n})))})),BC=["img","br"],zC=t=>{return(e=t,Pa.getOption(e)).filter((t=>0!==t.trim().length||t.indexOf(Hi)>-1)).isSome()||W(BC,We(t))||(t=>Xe(t)&&"false"===tn(t,"contenteditable"))(t);var e},FC=(t,e,n,i,r)=>{const o=Ri(bn(n),"td,th,caption").map((t=>t.dom)),a=U(((t,e)=>et(e,(e=>{const n=((t,e)=>({left:t.left- -1,top:t.top- -1,right:t.right+-2,bottom:t.bottom+-2,width:t.width+-1,height:t.height+-1}))(ls(e.getBoundingClientRect()));return[{x:n.left,y:t(n),cell:e},{x:n.right,y:t(n),cell:e}]})))(t,o),(t=>e(t,r)));return((t,e,n)=>Z(t,((t,i)=>t.fold((()=>B.some(i)),(t=>{const r=Math.sqrt(Math.abs(t.x-e)+Math.abs(t.y-n)),o=Math.sqrt(Math.abs(i.x-e)+Math.abs(i.y-n));return B.some(o<r?i:t)}))),B.none()))(a,i,r).map((t=>t.cell))},VC=E(FC,(t=>t.bottom),((t,e)=>t.y<e)),HC=E(FC,(t=>t.top),((t,e)=>t.y>e)),WC=(t,e,n)=>{const i=t(e,n);return(t=>t.breakType===Xw.Wrap&&0===t.positions.length)(i)||!ur(n.getNode())&&(t=>t.breakType===Xw.Br&&1===t.positions.length)(i)?!((t,e,n)=>n.breakAt.exists((n=>t(e,n).breakAt.isSome())))(t,e,i):i.breakAt.isNone()},jC=E(WC,Jw),YC=E(WC,tS),XC=(t,e,n,i)=>{const r=t.selection.getRng(),o=e?1:-1;return!(!Bu()||!((t,e,n)=>{const i=Gs.fromRangeStart(e);return Oh(!t,n).exists((t=>t.isEqual(i)))})(e,r,n)||(ew(o,t,n,!e,!1).each((e=>{xS(t,e)})),0))},GC=(t,e,n)=>{const i=((t,e)=>{const n=e.getNode(t);return er(n)?B.some(n):B.none()})(!!e,n),r=!1===e;i.fold((()=>xS(t,n.toRange())),(i=>Oh(r,t.getBody()).filter((t=>t.isEqual(n))).fold((()=>xS(t,n.toRange())),(n=>((t,e,n)=>{e.undoManager.transact((()=>{const i=t?fi:pi,r=cC(e,bn(n),i);xS(e,r)}))})(e,t,i)))))},qC=(t,e,n,i)=>{const r=t.selection.getRng(),o=Gs.fromRangeStart(r),a=t.getBody();if(!e&&jC(i,o)){const i=((t,e,n)=>((t,e)=>lt(e.getClientRects()).bind((e=>VC(t,e.left,e.top))).bind((t=>{return Qw(Nh(n=t).map((t=>Jw(n,t).positions.concat(t))).getOr([]),e);var n})))(e,n).orThunk((()=>lt(n.getClientRects()).bind((n=>Kw(eS(t,Gs.before(e)),n.left))))).getOr(Gs.before(e)))(a,n,o);return GC(t,e,i),!0}if(e&&YC(i,o)){const i=((t,e,n)=>((t,e)=>ct(e.getClientRects()).bind((e=>HC(t,e.left,e.top))).bind((t=>{return Qw(Ph(n=t).map((t=>[t].concat(tS(n,t).positions))).getOr([]),e);var n})))(e,n).orThunk((()=>lt(n.getClientRects()).bind((n=>Kw(nS(t,Gs.after(e)),n.left))))).getOr(Gs.after(e)))(a,n,o);return GC(t,e,i),!0}return!1},UC=(t,e,n)=>B.from(t.dom.getParent(t.selection.getNode(),"td,th")).bind((i=>B.from(t.dom.getParent(i,"table")).map((r=>n(t,e,r,i))))).getOr(!1),$C=(t,e)=>UC(t,e,XC),ZC=(t,e)=>UC(t,e,qC),KC=(t,e,n)=>n.fold(B.none,B.none,((t,e)=>{return(n=e,Qn(n,zC)).map((t=>(t=>(t=>{const e=Sp.getWin(t).dom,n=(t,n,i,r)=>gp(e,t,n,i,r),i=(t=>t.match({domRange:t=>{const e=bn(t.startContainer),n=bn(t.endContainer);return Ap(e,t.startOffset,n,t.endOffset)},relative:kp,exact:Ap}))(t);return((t,e)=>{const n=((t,e)=>e.match({domRange:t=>({ltr:M(t),rtl:B.none}),relative:(e,n)=>({ltr:Nt((()=>fp(t,e,n))),rtl:Nt((()=>B.some(fp(t,n,e))))}),exact:(e,n,i,r)=>({ltr:Nt((()=>gp(t,e,n,i,r))),rtl:Nt((()=>B.some(gp(t,i,r,e,n))))})}))(t,e);return((t,e)=>{const n=e.ltr();return n.collapsed?e.rtl().filter((t=>!1===t.collapsed)).map((t=>mp.rtl(bn(t.endContainer),t.endOffset,bn(t.startContainer),t.startOffset))).getOrThunk((()=>vp(0,mp.ltr,n))):vp(0,mp.ltr,n)})(0,n)})(e,i).match({ltr:n,rtl:n})})(Sp.exact(t,0,t,0)))(t)));var n}),(n=>(t.execCommand("mceTableInsertRowAfter"),QC(t,e,n)))),QC=(t,e,n)=>{return KC(t,e,(r=ni,RC(i=n,void 0).fold((()=>DC.none(i)),(t=>NC(t.all,i,t.index,1,r)))));var i,r},JC=(t,e,n)=>{return KC(t,e,(r=ni,RC(i=n,void 0).fold((()=>DC.none()),(t=>NC(t.all,i,t.index,-1,r)))));var i,r},tk=(t,e)=>{const n=["table","li","dl"],i=bn(t.getBody()),r=t=>{const e=We(t);return Sn(t,i)||W(n,e)},o=t.selection.getRng();return((t,e)=>((t,e,n=N)=>n(e)?B.none():W(t,We(e))?B.some(e):Jn(e,t.join(","),(t=>_n(t,"table")||n(t))))(["td","th"],t,e))(bn(e?o.endContainer:o.startContainer),r).map((n=>(PC(n,r).each((e=>{t.model.table.clearSelectedCells(e.dom)})),t.selection.collapse(!e),(e?QC:JC)(t,r,n).each((e=>{t.selection.setRng(e)})),!0))).getOr(!1)},ek=(t,e)=>({container:t,offset:e}),nk=ia.DOM,ik=t=>e=>t===e?-1:0,rk=(t,e,n)=>{if(rr(t)&&e>=0)return B.some(ek(t,e));{const i=La(nk);return B.from(i.backwards(t,e,ik(t),n)).map((t=>ek(t.container,t.container.data.length)))}},ok=(t,e,n)=>{if(!rr(t))return B.none();const i=t.data;if(e>=0&&e<=i.length)return B.some(ek(t,e));{const i=La(nk);return B.from(i.backwards(t,e,ik(t),n)).bind((t=>{const i=t.container.data;return ok(t.container,e+i.length,n)}))}},ak=(t,e,n)=>{if(!rr(t))return B.none();const i=t.data;if(e<=i.length)return B.some(ek(t,e));{const r=La(nk);return B.from(r.forwards(t,e,ik(t),n)).bind((t=>ak(t.container,e-i.length,n)))}},sk=(t,e,n,i,r)=>{const o=La(t,(t=>e=>t.isBlock(e)||W(["BR","IMG","HR","INPUT"],e.nodeName)||"false"===t.getContentEditable(e))(t));return B.from(o.backwards(e,n,i,r))},lk=t=>""!==t&&-1!==" \f\n\r\t\v".indexOf(t),ck=(t,e)=>t.substring(e.length),uk=(t,e,n,i=!1)=>{if(!(r=e).collapsed||!rr(r.startContainer))return B.none();var r;const o={text:"",offset:0},a=t.getParent(e.startContainer,t.isBlock)||t.getRoot();return sk(t,e.startContainer,e.startOffset,((t,e,r)=>(o.text=r+o.text,o.offset+=e,((t,e,n,i=!1)=>{let r;const o=n.charAt(0);for(r=e-1;r>=0;r--){const a=t.charAt(r);if(!i&&lk(a))return B.none();if(o===a&&Wt(t,n,r,e))break}return B.some(r)})(o.text,o.offset,n,i).getOr(e))),a).bind((t=>{const i=e.cloneRange();if(i.setStart(t.container,t.offset),i.setEnd(e.endContainer,e.endOffset),i.collapsed)return B.none();const r=(t=>Ua(t.toString().replace(/\u00A0/g," ")))(i);return 0!==r.lastIndexOf(n)?B.none():B.some({text:ck(r,n),range:i,trigger:n})}))},hk=t=>{if((t=>3===t.nodeType)(t))return ek(t,t.data.length);{const e=t.childNodes;return e.length>0?hk(e[e.length-1]):ek(t,e.length)}},dk=(t,e)=>{const n=t.childNodes;return n.length>0&&e<n.length?dk(n[e],0):n.length>0&&(t=>1===t.nodeType)(t)&&n.length===e?hk(n[n.length-1]):ek(t,e)},pk=(t,e,n,i={})=>{var r;const o=e(),a=null!==(r=t.selection.getRng().startContainer.nodeValue)&&void 0!==r?r:"",s=U(o.lookupByTrigger(n.trigger),(e=>n.text.length>=e.minChars&&e.matches.getOrThunk((()=>(t=>e=>{const n=dk(e.startContainer,e.startOffset);return!((t,e)=>{var n;const i=null!==(n=t.getParent(e.container,t.isBlock))&&void 0!==n?n:t.getRoot();return sk(t,e.container,e.offset,((t,e)=>0===e?-1:e),i).filter((t=>{const e=t.container.data.charAt(t.offset-1);return!lk(e)})).isSome()})(t,n)})(t.dom)))(n.range,a,n.text)));if(0===s.length)return B.none();const l=Promise.all(Y(s,(t=>t.fetch(n.text,t.maxResults,i).then((e=>({matchText:n.text,items:e,columns:t.columns,onAction:t.onAction,highlightOn:t.highlightOn}))))));return B.some({lookupData:l,context:n})};var fk;!function(t){t[t.Error=0]="Error",t[t.Value=1]="Value"}(fk||(fk={}));const gk=(t,e,n)=>t.stype===fk.Error?e(t.serror):n(t.svalue),mk=t=>({stype:fk.Value,svalue:t}),vk=t=>({stype:fk.Error,serror:t}),yk=gk,bk=t=>p(t)&&pt(t).length>100?" removed due to size":JSON.stringify(t,null,2),xk=(t,e)=>vk([{path:t,getErrorInfo:e}]),_k=t=>(...e)=>{if(0===e.length)throw new Error("Can't merge zero objects");const n={};for(let i=0;i<e.length;i++){const r=e[i];for(const e in r)Ct(r,e)&&(n[e]=t(n[e],r[e]))}return n},wk=_k(((t,e)=>f(t)&&f(e)?wk(t,e):e)),Sk=(_k(((t,e)=>e)),t=>({tag:"defaultedThunk",process:M(t)})),Ck=(t,e,n)=>{switch(t.tag){case"field":return e(t.key,t.newKey,t.presence,t.prop);case"custom":return n(t.newKey,t.instantiator)}},kk=t=>({extract:(e,n)=>{return r=t=>((t,e)=>xk(t,M(e)))(e,t),(i=t(n)).stype===fk.Error?r(i.serror):i;var i,r},toString:M("val")}),Ak=kk(mk),Mk=(t,e,n,i)=>i(St(t,e).getOrThunk((()=>n(t)))),Tk=(t,e,n,i,r)=>{const o=t=>r.extract(e.concat([i]),t),a=t=>t.fold((()=>mk(B.none())),(t=>{return n=r.extract(e.concat([i]),t),o=B.some,n.stype===fk.Value?{stype:fk.Value,svalue:o(n.svalue)}:n;var n,o}));switch(t.tag){case"required":return((t,e,n,i)=>St(e,n).fold((()=>((t,e,n)=>xk(t,(()=>'Could not find valid *required* value for "'+e+'" in '+bk(n))))(t,n,e)),i))(e,n,i,o);case"defaultedThunk":return Mk(n,i,t.process,o);case"option":return((t,e,n)=>n(St(t,e)))(n,i,a);case"defaultedOptionThunk":return((t,e,n,i)=>i(St(t,e).map((e=>!0===e?n(t):e))))(n,i,t.process,a);case"mergeWithThunk":return Mk(n,i,M({}),(e=>{const i=wk(t.process(n),e);return o(i)}))}},Ik=t=>({extract:(e,n)=>((t,e,n)=>{const i={},r=[];for(const o of n)Ck(o,((n,o,a,s)=>{const l=Tk(a,t,e,n,s);yk(l,(t=>{r.push(...t)}),(t=>{i[o]=t}))}),((t,n)=>{i[t]=n(e)}));return r.length>0?vk(r):mk(i)})(e,n,t),toString:()=>{const e=Y(t,(t=>Ck(t,((t,e,n,i)=>t+" -> "+i.toString()),((t,e)=>"state("+t+")"))));return"obj{\n"+e.join("\n")+"}"}}),Ek=t=>({extract:(e,n)=>{const i=Y(n,((n,i)=>t.extract(e.concat(["["+i+"]"]),n)));return(t=>{const e=(t=>{const e=[],n=[];return X(t,(t=>{gk(t,(t=>n.push(t)),(t=>e.push(t)))})),{values:e,errors:n}})(t);return e.errors.length>0?(n=e.errors,k(vk,tt)(n)):mk(e.values);var n})(i)},toString:()=>"array("+t.toString()+")"}),Ok=(t,e,n)=>{return i=((t,e,n)=>((t,e)=>t.stype===fk.Error?{stype:fk.Error,serror:(t=>({input:n,errors:t}))(t.serror)}:t)(e.extract([t],n)))(t,e,n),gk(i,ml.error,ml.value);var i},Dk=(t,e)=>((t,e)=>({extract:(n,i)=>St(i,t).fold((()=>((t,e)=>xk(t,(()=>'Choice schema did not contain choice key: "'+e+'"')))(n,t)),(t=>((t,e,n,i)=>St(n,i).fold((()=>((t,e,n)=>xk(t,(()=>'The chosen schema: "'+n+'" did not exist in branches: '+bk(e))))(t,n,i)),(n=>n.extract(t.concat(["branch: "+i]),e))))(n,i,e,t))),toString:()=>"chooseOn("+t+"). Possible values: "+pt(e)}))(t,mt(e,Ik)),Lk=M(Ak),Pk=(t,e)=>kk((n=>{const i=typeof n;return t(n)?mk(n):vk(`Expected type: ${e} but got: ${i}`)})),Nk=Pk(w,"number"),Rk=Pk(d,"string"),Bk=Pk(v,"boolean"),zk=Pk(_,"function"),Fk=(t,e,n,i)=>({tag:"field",key:t,newKey:e,presence:n,prop:i}),Vk=(t,e)=>({tag:"custom",newKey:t,instantiator:e}),Hk=(t,e)=>Fk(t,t,{tag:"required",process:{}},e),Wk=t=>Hk(t,Rk),jk=t=>Hk(t,zk),Yk=(t,e)=>Fk(t,t,{tag:"option",process:{}},e),Xk=t=>Yk(t,Rk),Gk=(t,e,n)=>Fk(t,t,Sk(e),n),qk=(t,e)=>Gk(t,e,Nk),Uk=(t,e,n)=>Gk(t,e,(t=>{return e=e=>W(t,e)?ml.value(e):ml.error(`Unsupported value: "${e}", choose one of "${t.join(", ")}".`),kk((t=>e(t).fold(vk,mk)));var e})(n)),$k=(t,e)=>Gk(t,e,Bk),Zk=(t,e)=>Gk(t,e,zk),Kk=Wk("type"),Qk=jk("fetch"),Jk=jk("onAction"),tA=Zk("onSetup",(()=>C)),eA=Xk("text"),nA=Xk("icon"),iA=Xk("tooltip"),rA=Xk("label"),oA=$k("active",!1),aA=$k("enabled",!0),sA=$k("primary",!1),lA=t=>((t,e)=>Gk("type",e,Rk))(0,t),cA=Ik([Kk,Wk("trigger"),qk("minChars",1),((t,e)=>Fk(t,t,Sk(1),Lk()))("columns"),qk("maxResults",10),Yk("matches",zk),Qk,Jk,(uA=Rk,Gk("highlightOn",[],Ek(uA)))]);var uA;const hA=[aA,iA,nA,eA,tA],dA=[oA].concat(hA),pA=[Zk("predicate",N),Uk("scope","node",["node","editor"]),Uk("position","selection",["node","selection","line"])],fA=hA.concat([lA("contextformbutton"),sA,Jk,Vk("original",T)]),gA=dA.concat([lA("contextformbutton"),sA,Jk,Vk("original",T)]),mA=hA.concat([lA("contextformbutton")]),vA=dA.concat([lA("contextformtogglebutton")]),yA=Dk("type",{contextformbutton:fA,contextformtogglebutton:gA});Ik([lA("contextform"),Zk("initValue",M("")),rA,((t,e)=>Fk(t,t,{tag:"required",process:{}},Ek(e)))("commands",yA),Yk("launch",Dk("type",{contextformbutton:mA,contextformtogglebutton:vA}))].concat(pA));const bA=t=>{const e=pa(),n=aa(!1),i=e.isSet,r=()=>{i()&&((t=>{t.dispatch("AutocompleterEnd")})(t),n.set(!1),e.clear())},o=Nt((()=>(t=>{const e=t.ui.registry.getAll().popups,n=mt(e,(t=>{return(e=t,Ok("Autocompleter",cA,e)).fold((t=>{throw new Error("Errors: \n"+(t=>{const e=t.length>10?t.slice(0,10).concat([{path:[],getErrorInfo:M("... (only showing first ten failures)")}]):t;return Y(e,(t=>"Failed path: ("+t.path.join(" > ")+")\n"+t.getErrorInfo()))})((e=t).errors).join("\n")+"\n\nInput object: "+bk(e.input));var e}),T);var e})),i=At(_t(n,(t=>t.trigger))),r=wt(n);return{dataset:n,triggers:i,lookupByTrigger:t=>U(r,(e=>e.trigger===t))}})(t))),a=a=>{(n=>e.get().map((e=>uk(t.dom,t.selection.getRng(),e.trigger,!0).bind((e=>pk(t,o,e,n))))).getOrThunk((()=>((t,e)=>{const n=e(),i=t.selection.getRng();return((t,e,n)=>ht(n.triggers,(n=>uk(t,e,n))))(t.dom,i,n).bind((n=>pk(t,e,n)))})(t,o))))(a).fold(r,(o=>{(t=>{i()||e.set({trigger:t.trigger,matchLength:t.text.length})})(o.context),o.lookupData.then((i=>{e.get().map((a=>{const s=o.context;a.trigger===s.trigger&&(s.text.length-a.matchLength>=10?r():(e.set({...a,matchLength:s.text.length}),n.get()?(ap(t,{range:s.range}),((t,e)=>{t.dispatch("AutocompleterUpdate",e)})(t,{lookupData:i})):(n.set(!0),ap(t,{range:s.range}),((t,e)=>{t.dispatch("AutocompleterStart",e)})(t,{lookupData:i}))))}))}))}))},s=()=>e.get().bind((({trigger:e})=>{const i=t.selection.getRng();return uk(t.dom,i,e,n.get()).filter((({range:t})=>((t,e)=>{const n=t.compareBoundaryPoints(window.Range.START_TO_START,e),i=t.compareBoundaryPoints(window.Range.END_TO_END,e);return n>=0&&i<=0})(i,t))).map((({range:t})=>t))}));t.addCommand("mceAutocompleterReload",((t,e)=>{const n=p(e)?e.fetchOptions:{};a(n)})),t.addCommand("mceAutocompleterClose",r),t.addCommand("mceAutocompleterRefreshActiveRange",(()=>{s().each((e=>{ap(t,{range:e})}))})),t.editorCommands.addQueryStateHandler("mceAutoCompleterInRange",(()=>s().isSome())),((t,e)=>{const n=ga(e.load,50);t.on("input",(()=>{n.throttle()})),t.on("keydown",(t=>{const i=t.which;8===i?n.throttle():27===i?(n.cancel(),e.cancelIfNecessary()):38!==i&&40!==i||n.cancel()}),!0),t.on("remove",n.cancel)})(t,{cancelIfNecessary:r,load:a})},xA=Se().browser.isSafari(),_A=t=>Xa(bn(t)),wA=(t,e)=>{var n;return 0===t.startOffset&&t.endOffset===(null===(n=e.textContent)||void 0===n?void 0:n.length)},SA=(t,e)=>B.from(t.getParent(e.container(),"details")),CA=(t,e)=>SA(t,e).isSome(),kA=(t,e)=>{const n=e.getNode();y(n)||t.selection.setCursorLocation(n,e.offset())},AA=(t,e,n)=>{const i=t.dom.getParent(e.container(),"details");if(i&&!i.open){const e=t.dom.select("summary",i)[0];e&&(n?Ph(e):Nh(e)).each((e=>kA(t,e)))}else kA(t,e)},MA=(t,e,n)=>{const{dom:i,selection:r}=t,o=t.getBody();if("character"===n){const n=Gs.fromRangeStart(r.getRng()),a=i.getParent(n.container(),i.isBlock),s=SA(i,n),l=a&&i.isEmpty(a),c=m(null==a?void 0:a.previousSibling),u=m(null==a?void 0:a.nextSibling);return!!(l&&(e?u:c)&&Ih(!e,o,n).exists((t=>CA(i,t)&&!Re(s,SA(i,t)))))||Ih(e,o,n).fold(N,(n=>{const r=SA(i,n);if(CA(i,n)&&!Re(s,r)){if(e||AA(t,n,!1),a&&l){if(e&&c)return!0;if(!e&&u)return!0;AA(t,n,e),t.dom.remove(a)}return!0}return!1}))}return!1},TA=(t,e,n)=>((t,e,n)=>((t,e)=>{const n=B.from(t.getParent(e.startContainer,"details")),i=B.from(t.getParent(e.endContainer,"details"));if(n.isSome()||i.isSome()){const e=n.bind((e=>B.from(t.select("summary",e)[0])));return B.some({startSummary:e,startDetails:n,endDetails:i})}return B.none()})(t.dom,t.selection.getRng()).fold((()=>MA(t,e,n)),(i=>((t,e,n,i)=>{const r=t.selection.getRng(),o=Gs.fromRangeStart(r),a=t.getBody();return"selection"===i?((t,e)=>{const n=e.startSummary.exists((e=>e.contains(t.startContainer))),i=e.startSummary.exists((e=>e.contains(t.endContainer))),r=e.startDetails.forall((t=>e.endDetails.forall((e=>t!==e))));return(n||i)&&!(n&&i)||r})(r,e):n?((t,e)=>e.startSummary.exists((e=>((t,e)=>Nh(e).exists((n=>ur(n.getNode())&&Lh(e,n).exists((e=>e.isEqual(t)))||n.isEqual(t))))(t,e))))(o,e)||((t,e,n)=>n.startDetails.exists((n=>Dh(t,e).forall((t=>!n.contains(t.container()))))))(a,o,e):((t,e)=>e.startSummary.exists((e=>((t,e)=>Ph(e).exists((e=>e.isEqual(t))))(t,e))))(o,e)||((t,e)=>e.startDetails.exists((n=>Lh(n,t).forall((n=>e.startSummary.exists((e=>!e.contains(t.container())&&e.contains(n.container()))))))))(o,e)})(t,i,e,n)||MA(t,e,n))))(t,e,n)||xA&&((t,e,n)=>{const i=t.selection,r=i.getNode(),o=i.getRng(),a=Gs.fromRangeStart(o);return!!br(r)&&("selection"===n&&wA(o,r)||Cm(e,a,r)?_A(r):t.undoManager.transact((()=>{const o=i.getSel();let{anchorNode:a,anchorOffset:s,focusNode:l,focusOffset:c}=null!=o?o:{};const u=()=>{x(a)&&x(s)&&x(l)&&x(c)&&(null==o||o.setBaseAndExtent(a,s,l,c))},h=(t,e)=>{X(t.childNodes,(t=>{hd(t)&&e.appendChild(t)}))},d=t.dom.create("span",{"data-mce-bogus":"1"});h(r,d),r.appendChild(d),u(),"word"!==n&&"line"!==n||null==o||o.modify("extend",e?"right":"left",n),!i.isCollapsed()&&wA(i.getRng(),d)?_A(r):(t.execCommand(e?"ForwardDelete":"Delete"),a=null==o?void 0:o.anchorNode,s=null==o?void 0:o.anchorOffset,l=null==o?void 0:o.focusNode,c=null==o?void 0:o.focusOffset,h(d,r),u()),t.dom.remove(d)})),!0)})(t,e,n)?B.some(C):B.none(),IA=t=>(e,n,i={})=>{const r=e.getBody(),o={bubbles:!0,composed:!0,data:null,isComposing:!1,detail:0,view:null,target:r,currentTarget:r,eventPhase:Event.AT_TARGET,originalTarget:r,explicitOriginalTarget:r,isTrusted:!1,srcElement:r,cancelable:!1,preventDefault:C,inputType:n},a=Vo(new InputEvent(t));return e.dispatch(t,{...a,...o,...i})},EA=IA("input"),OA=IA("beforeinput"),DA=Se(),LA=DA.os,PA=LA.isMacOS()||LA.isiOS(),NA=DA.browser.isFirefox(),RA=(t,e)=>{const n=t.dom,i=t.schema.getMoveCaretBeforeOnEnterElements();if(!e)return;if(/^(LI|DT|DD)$/.test(e.nodeName)){const t=(t=>{for(;t;){if($i(t)||rr(t)&&t.data&&/[\r\n\s]/.test(t.data))return t;t=t.nextSibling}return null})(e.firstChild);t&&/^(UL|OL|DL)$/.test(t.nodeName)&&e.insertBefore(n.doc.createTextNode(Hi),e.firstChild)}const r=n.createRng();if(e.normalize(),e.hasChildNodes()){const t=new Fi(e,e);let n,o=e;for(;n=t.current();){if(rr(n)){r.setStart(n,0),r.setEnd(n,0);break}if(i[n.nodeName.toLowerCase()]){r.setStartBefore(n),r.setEndBefore(n);break}o=n,n=t.next()}n||(r.setStart(o,0),r.setEnd(o,0))}else ur(e)?e.nextSibling&&n.isBlock(e.nextSibling)?(r.setStartBefore(e),r.setEndBefore(e)):(r.setStartAfter(e),r.setEndAfter(e)):(r.setStart(e,0),r.setEnd(e,0));t.selection.setRng(r),af(t,r)},BA=(t,e)=>{const n=t.getRoot();let i,r=e;for(;r!==n&&r&&"false"!==t.getContentEditable(r);){if("true"===t.getContentEditable(r)){i=r;break}r=r.parentNode}return r!==n?i:n},zA=t=>B.from(t.dom.getParent(t.selection.getStart(!0),t.dom.isBlock)),FA=t=>{t.innerHTML='<br data-mce-bogus="1">'},VA=(t,e)=>{Fl(t).toLowerCase()===e.tagName.toLowerCase()&&((t,e,n)=>{const i=t.dom;B.from(n.style).map(i.parseStyle).each((t=>{const n={...hi(bn(e)),...t};i.setStyles(e,n)}));const r=B.from(n.class).map((t=>t.split(/\s+/))),o=B.from(e.className).map((t=>U(t.split(/\s+/),(t=>""!==t))));Be(r,o,((t,n)=>{const r=U(n,(e=>!W(t,e))),o=[...t,...r];i.setAttrib(e,"class",o.join(" "))}));const a=["style","class"],s=xt(n,((t,e)=>!W(a,e)));i.setAttribs(e,s)})(t,e,Vl(t))},HA=(t,e,n,i,r=!0,o,a)=>{const s=t.dom,l=t.schema,c=Fl(t),u=n?n.nodeName.toUpperCase():"";let h=e;const d=l.getTextInlineElements();let p;p=o||"TABLE"===u||"HR"===u?s.create(o||c,a||{}):n.cloneNode(!1);let f=p;if(r){do{if(d[h.nodeName]){if(Bh(h)||Zh(h))continue;const t=h.cloneNode(!1);s.setAttrib(t,"id",""),p.hasChildNodes()?(t.appendChild(p.firstChild),p.appendChild(t)):(f=t,p.appendChild(t))}}while((h=h.parentNode)&&h!==i)}else s.setAttrib(p,"style",null),s.setAttrib(p,"class",null);return VA(t,p),FA(f),p},WA=(t,e)=>{const n=null==t?void 0:t.parentNode;return x(n)&&n.nodeName===e},jA=t=>x(t)&&/^(OL|UL|LI)$/.test(t.nodeName),YA=t=>x(t)&&/^(LI|DT|DD)$/.test(t.nodeName),XA=t=>{const e=t.parentNode;return YA(e)?e:t},GA=(t,e,n)=>{let i=t[n?"firstChild":"lastChild"];for(;i&&!$i(i);)i=i[n?"nextSibling":"previousSibling"];return i===e},qA=t=>Z(_t(hi(bn(t)),((t,e)=>`${e}: ${t};`)),((t,e)=>t+e),""),UA=(t,e)=>e&&"A"===e.nodeName&&t.isEmpty(e),$A=(t,e)=>t.nodeName===e||t.previousSibling&&t.previousSibling.nodeName===e,ZA=(t,e)=>x(e)&&t.isBlock(e)&&!/^(TD|TH|CAPTION|FORM)$/.test(e.nodeName)&&!/^(fixed|absolute)/i.test(e.style.position)&&t.isEditable(e.parentNode)&&"false"!==t.getContentEditable(e),KA=(t,e,n)=>rr(e)?t?1===n&&e.data.charAt(n-1)===Ga?0:n:n===e.data.length-1&&e.data.charAt(n)===Ga?e.data.length:n:n,QA={insert:(t,e)=>{let n,i,r,o,a=!1;const s=t.dom,l=t.schema.getNonEmptyElements(),c=t.selection.getRng(),u=Fl(t),h=bn(c.startContainer),p=Rn(h,c.startOffset),f=p.exists((t=>Xe(t)&&!ni(t))),g=c.collapsed&&f,v=(e,i)=>HA(t,n,k,C,Yl(t),e,i),y=t=>{const e=KA(t,n,i);if(rr(n)&&(t?e>0:e<n.data.length))return!1;if((n.parentNode===k||n===k)&&a&&!t)return!0;if(t&&$i(n)&&n===k.firstChild)return!0;if($A(n,"TABLE")||$A(n,"HR"))return a&&!t||!a&&t;const r=new Fi(n,k);let o;for(rr(n)&&(t&&0===e?r.prev():t||e!==n.data.length||r.next());o=r.current();){if($i(o)){if(!o.getAttribute("data-mce-bogus")){const t=o.nodeName.toLowerCase();if(l[t]&&"br"!==t)return!1}}else if(rr(o)&&!Yi(o.data))return!1;t?r.prev():r.next()}return!0},_=()=>{let e;return e=/^(H[1-6]|PRE|FIGURE)$/.test(r)&&"HGROUP"!==A?v(u):v(),((t,e)=>{const n=Xl(t);return!b(e)&&(d(n)?W(Pe.explode(n),e.nodeName.toLowerCase()):n)})(t,o)&&ZA(s,o)&&s.isEmpty(k,void 0,{includeZwsp:!0})?e=s.split(o,k):s.insertAfter(e,k),RA(t,e),e};Rp(s,c).each((t=>{c.setStart(t.startContainer,t.startOffset),c.setEnd(t.endContainer,t.endOffset)})),n=c.startContainer,i=c.startOffset;const w=!(!e||!e.shiftKey),S=!(!e||!e.ctrlKey);$i(n)&&n.hasChildNodes()&&!g&&(a=i>n.childNodes.length-1,n=n.childNodes[Math.min(i,n.childNodes.length-1)]||n,i=a&&rr(n)?n.data.length:0);const C=BA(s,n);if(!C||((t,e)=>{const n=t.dom.getParent(e,"ol,ul,dl");return null!==n&&"false"===t.dom.getContentEditableParent(n)})(t,n))return;w||(n=((t,e,n,i,r)=>{var o,a;const s=t.dom,l=null!==(o=BA(s,i))&&void 0!==o?o:s.getRoot();let c=s.getParent(i,s.isBlock);if(!c||!ZA(s,c)){if(c=c||l,!c.hasChildNodes()){const i=s.create(e);return VA(t,i),c.appendChild(i),n.setStart(i,0),n.setEnd(i,0),i}let o,u=i;for(;u&&u.parentNode!==c;)u=u.parentNode;for(;u&&!s.isBlock(u);)o=u,u=u.previousSibling;const h=null===(a=null==o?void 0:o.parentElement)||void 0===a?void 0:a.nodeName;if(o&&h&&t.schema.isValidChild(h,e.toLowerCase())){const a=o.parentNode,l=s.create(e);for(VA(t,l),a.insertBefore(l,o),u=o;u&&!s.isBlock(u);){const t=u.nextSibling;l.appendChild(u),u=t}n.setStart(i,r),n.setEnd(i,r)}}return i})(t,u,c,n,i));let k=s.getParent(n,s.isBlock)||s.getRoot();o=x(null==k?void 0:k.parentNode)?s.getParent(k.parentNode,s.isBlock):null,r=k?k.nodeName.toUpperCase():"";const A=o?o.nodeName.toUpperCase():"";if("LI"!==A||S||(k=o,o=o.parentNode,r=A),$i(o)&&((t,e,n)=>!e&&n.nodeName.toLowerCase()===Fl(t)&&t.dom.isEmpty(n)&&((e,n,i)=>{let r=n;for(;r&&r!==e&&m(r.nextSibling);){const e=r.parentElement;if(!e||(o=e,!Ct(t.schema.getTextBlockElements(),o.nodeName.toLowerCase())))return yr(e);r=e}var o;return!1})(t.getBody(),n))(t,w,k))return((t,e,n)=>{var i,r,o;const a=e(Fl(t)),s=((t,e)=>t.dom.getParent(e,yr))(t,n);s&&(t.dom.insertAfter(a,s),RA(t,a),(null!==(o=null===(r=null===(i=n.parentElement)||void 0===i?void 0:i.childNodes)||void 0===r?void 0:r.length)&&void 0!==o?o:0)>1&&t.dom.remove(n))})(t,v,k);if(/^(LI|DT|DD)$/.test(r)&&$i(o)&&s.isEmpty(k))return void((t,e,n,i,r)=>{const o=t.dom,a=t.selection.getRng(),s=n.parentNode;if(n===t.getBody()||!s)return;var l;jA(l=n)&&jA(l.parentNode)&&(r="LI");const c=YA(i)?qA(i):void 0;let u=YA(i)&&c?e(r,{style:qA(i)}):e(r);if(GA(n,i,!0)&&GA(n,i,!1))if(WA(n,"LI")){const t=XA(n);o.insertAfter(u,t),(t=>{var e;return(null===(e=t.parentNode)||void 0===e?void 0:e.firstChild)===t})(n)?o.remove(t):o.remove(n)}else o.replace(u,n);else if(GA(n,i,!0))WA(n,"LI")?(o.insertAfter(u,XA(n)),u.appendChild(o.doc.createTextNode(" ")),u.appendChild(n)):s.insertBefore(u,n),o.remove(i);else if(GA(n,i,!1))o.insertAfter(u,XA(n)),o.remove(i);else{n=XA(n);const t=a.cloneRange();t.setStartAfter(i),t.setEndAfter(n);const e=t.extractContents();if("LI"===r&&((t,e)=>t.firstChild&&"LI"===t.firstChild.nodeName)(e)){const t=U(Y(u.children,bn),O(Ze("br")));u=e.firstChild,o.insertAfter(e,n),X(t,(t=>gi(bn(u),t))),c&&u.setAttribute("style",c)}else o.insertAfter(e,n),o.insertAfter(u,n);o.remove(i)}RA(t,u)})(t,v,o,k,u);if(!(g||k!==t.getBody()&&ZA(s,k)))return;const M=k.parentNode;let T;if(g)T=v(u),p.fold((()=>{mi(h,bn(T))}),(t=>{pi(t,bn(T))})),t.selection.setCursorLocation(T,0);else if(Ka(k))T=os(k),s.isEmpty(k)&&FA(k),VA(t,T),RA(t,T);else if(y(!1))T=_();else if(y(!0)&&M){T=M.insertBefore(v(),k);const e=bn(c.startContainer).dom.hasChildNodes()&&c.collapsed;RA(t,$A(k,"HR")||e?T:k)}else{const e=(t=>{const e=t.cloneRange();return e.setStart(t.startContainer,KA(!0,t.startContainer,t.startOffset)),e.setEnd(t.endContainer,KA(!1,t.endContainer,t.endOffset)),e})(c).cloneRange();e.setEndAfter(k);const n=e.extractContents();(t=>{X(Ni(bn(t),qe),(t=>{const e=t.dom;e.nodeValue=Ua(e.data)}))})(n),(t=>{let e=t;do{rr(e)&&(e.data=e.data.replace(/^[\r\n]+/,"")),e=e.firstChild}while(e)})(n),T=n.firstChild,s.insertAfter(n,k),((t,e,n)=>{var i;const r=[];if(!n)return;let o=n;for(;o=o.firstChild;){if(t.isBlock(o))return;$i(o)&&!e[o.nodeName.toLowerCase()]&&r.push(o)}let a=r.length;for(;a--;)o=r[a],(!o.hasChildNodes()||o.firstChild===o.lastChild&&""===(null===(i=o.firstChild)||void 0===i?void 0:i.nodeValue)||UA(t,o))&&t.remove(o)})(s,l,T),((t,e)=>{e.normalize();const n=e.lastChild;(!n||$i(n)&&/^(left|right)$/gi.test(t.getStyle(n,"float",!0)))&&t.add(e,"br")})(s,k),s.isEmpty(k)&&FA(k),T.normalize(),s.isEmpty(T)?(s.remove(T),_()):(VA(t,T),RA(t,T))}s.setAttrib(T,"id",""),t.dispatch("NewBlock",{newBlock:T})},fakeEventName:"insertParagraph"},JA=(t,e,n)=>{const i=t.dom.createRng();n?(i.setStartBefore(e),i.setEndBefore(e)):(i.setStartAfter(e),i.setEndAfter(e)),t.selection.setRng(i),af(t,i)},tM=(t,e)=>{const n=vn("br");pi(bn(e),n),t.undoManager.add()},eM=(t,e)=>{nM(t.getBody(),e)||fi(bn(e),vn("br"));const n=vn("br");fi(bn(e),n),JA(t,n.dom,!1),t.undoManager.add()},nM=(t,e)=>{return n=Gs.after(e),!!ur(n.getNode())||Dh(t,Gs.after(e)).map((t=>ur(t.getNode()))).getOr(!1);var n},iM=t=>t&&"A"===t.nodeName&&"href"in t,rM=t=>t.fold(N,iM,iM,N),oM=(t,e)=>{e.fold(C,E(tM,t),E(eM,t),C)},aM={insert:(t,e)=>{const n=(t=>{const e=E(pm,t),n=Gs.fromRangeStart(t.selection.getRng());return Rw(e,t.getBody(),n).filter(rM)})(t);n.isSome()?n.each(E(oM,t)):((t,e)=>{const n=t.selection,i=t.dom,r=n.getRng();let o,a=!1;Rp(i,r).each((t=>{r.setStart(t.startContainer,t.startOffset),r.setEnd(t.endContainer,t.endOffset)}));let s=r.startOffset,l=r.startContainer;if($i(l)&&l.hasChildNodes()){const t=s>l.childNodes.length-1;l=l.childNodes[Math.min(s,l.childNodes.length-1)]||l,s=t&&rr(l)?l.data.length:0}let c=i.getParent(l,i.isBlock);const u=c&&c.parentNode?i.getParent(c.parentNode,i.isBlock):null,h=u?u.nodeName.toUpperCase():"",d=!(!e||!e.ctrlKey);"LI"!==h||d||(c=u),rr(l)&&s>=l.data.length&&(((t,e,n)=>{const i=new Fi(e,n);let r;const o=t.getNonEmptyElements();for(;r=i.next();)if(o[r.nodeName.toLowerCase()]||rr(r)&&r.length>0)return!0;return!1})(t.schema,l,c||i.getRoot())||(o=i.create("br"),r.insertNode(o),r.setStartAfter(o),r.setEndAfter(o),a=!0)),o=i.create("br"),Us(i,r,o),JA(t,o,a),t.undoManager.add()})(t,e)},fakeEventName:"insertLineBreak"},sM=(t,e)=>zA(t).filter((t=>e.length>0&&_n(bn(t),e))).isSome(),lM=vl([{br:[]},{block:[]},{none:[]}]),cM=(t,e)=>(t=>sM(t,jl(t)))(t),uM=t=>(e,n)=>(t=>zA(t).filter((t=>Va(bn(t)))).isSome())(e)===t,hM=(t,e)=>(n,i)=>{const r=(t=>zA(t).fold(M(""),(t=>t.nodeName.toUpperCase())))(n)===t.toUpperCase();return r===e},dM=t=>{const e=BA(t.dom,t.selection.getStart());return b(e)},pM=t=>hM("pre",t),fM=t=>(e,n)=>zl(e)===t,gM=(t,e)=>(t=>sM(t,Wl(t)))(t),mM=(t,e)=>e,vM=t=>{const e=Fl(t),n=BA(t.dom,t.selection.getStart());return x(n)&&t.schema.isValidChild(n.nodeName,e)},yM=t=>{const e=t.selection.getRng(),n=bn(e.startContainer),i=Rn(n,e.startOffset).map((t=>Xe(t)&&!ni(t)));return e.collapsed&&i.getOr(!0)},bM=(t,e)=>(n,i)=>Z(t,((t,e)=>t&&e(n,i)),!0)?B.some(e):B.none(),xM=(t,e,n)=>{e.selection.isCollapsed()||(t=>{t.execCommand("delete")})(e),x(n)&&OA(e,t.fakeEventName).isDefaultPrevented()||(t.insert(e,n),x(n)&&EA(e,t.fakeEventName))},_M=(t,e)=>{const n=()=>xM(aM,t,e),i=()=>xM(QA,t,e),r=((t,e)=>Aw([bM([cM],lM.none()),bM([pM(!0),dM],lM.none()),bM([hM("summary",!0)],lM.br()),bM([pM(!0),fM(!1),mM],lM.br()),bM([pM(!0),fM(!1)],lM.block()),bM([pM(!0),fM(!0),mM],lM.block()),bM([pM(!0),fM(!0)],lM.br()),bM([uM(!0),mM],lM.br()),bM([uM(!0)],lM.block()),bM([gM],lM.br()),bM([mM],lM.br()),bM([vM],lM.block()),bM([yM],lM.block())],[t,!(!e||!e.shiftKey)]).getOr(lM.none()))(t,e);switch(Hl(t)){case"linebreak":r.fold(n,n,C);break;case"block":r.fold(i,i,C);break;case"invert":r.fold(i,n,C);break;default:r.fold(n,i,C)}},wM=Se(),SM=wM.os.isiOS()&&wM.browser.isSafari(),CM=(t,e)=>{var n;e.isDefaultPrevented()||(e.preventDefault(),(n=t.undoManager).typing&&(n.typing=!1,n.add()),t.undoManager.transact((()=>{_M(t,e)})))},kM=Se(),AM=t=>t.stopImmediatePropagation(),MM=t=>t.keyCode===lp.PAGE_UP||t.keyCode===lp.PAGE_DOWN,TM=(t,e,n)=>{n&&!t.get()?e.on("NodeChange",AM,!0):!n&&t.get()&&e.off("NodeChange",AM),t.set(n)},IM=(t,e)=>{const n=e.container(),i=e.offset();return rr(n)?(n.insertData(i,t),B.some(Gs(n,i+t.length))):uh(e).map((n=>{const i=yn(t);return e.isAtEnd()?fi(n,i):pi(n,i),Gs(i.dom,t.length)}))},EM=E(IM,Hi),OM=E(IM," "),DM=t=>e=>{t.selection.setRng(e.toRange()),t.nodeChanged()},LM=t=>{const e=Gs.fromRangeStart(t.selection.getRng()),n=bn(t.getBody());if(t.selection.isCollapsed()){const i=E(pm,t),r=Gs.fromRangeStart(t.selection.getRng());return Rw(i,t.getBody(),r).bind((t=>e=>e.fold((e=>Lh(t.dom,Gs.before(e))),(t=>Ph(t)),(t=>Nh(t)),(e=>Dh(t.dom,Gs.after(e)))))(n)).map((i=>()=>((t,e,n)=>i=>Ug(t,i,n)?EM(e):OM(e))(n,e,t.schema)(i).each(DM(t))))}return B.none()},PM=t=>{return ze(Ee.browser.isFirefox()&&t.selection.isEditable()&&(e=t.dom,n=t.selection.getRng().startContainer,e.isEditable(e.getParent(n,"summary"))),(()=>{const e=bn(t.getBody());t.selection.isCollapsed()||t.getDoc().execCommand("Delete"),((t,e,n)=>Ug(t,e,n)?EM(e):OM(e))(e,Gs.fromRangeStart(t.selection.getRng()),t.schema).each(DM(t))}));var e,n},NM=t=>yu(t)?[{keyCode:lp.TAB,action:kC(tk,t,!0)},{keyCode:lp.TAB,shiftKey:!0,action:kC(tk,t,!1)}]:[],RM=t=>{if(t.addShortcut("Meta+P","","mcePrint"),bA(t),Px(t))return aa(null);{const e=OS(t);return(t=>{t.on("beforeinput",(e=>{t.selection.isEditable()&&!j(e.getTargetRanges(),(e=>!Df(t.dom,e)))||e.preventDefault()}))})(t),(t=>{t.on("keyup compositionstart",E(pC,t))})(t),((t,e)=>{t.on("keydown",(n=>{n.isDefaultPrevented()||((t,e,n)=>{const i=Ee.os.isMacOS()||Ee.os.isiOS();AC([{keyCode:lp.RIGHT,action:kC(mC,t,!0)},{keyCode:lp.LEFT,action:kC(mC,t,!1)},{keyCode:lp.UP,action:kC(vC,t,!1)},{keyCode:lp.DOWN,action:kC(vC,t,!0)},...i?[{keyCode:lp.UP,action:kC(bC,t,!1),metaKey:!0,shiftKey:!0},{keyCode:lp.DOWN,action:kC(bC,t,!0),metaKey:!0,shiftKey:!0}]:[],{keyCode:lp.RIGHT,action:kC($C,t,!0)},{keyCode:lp.LEFT,action:kC($C,t,!1)},{keyCode:lp.UP,action:kC(ZC,t,!1)},{keyCode:lp.DOWN,action:kC(ZC,t,!0)},{keyCode:lp.UP,action:kC(ZC,t,!1)},{keyCode:lp.UP,action:kC(wC,t,!1)},{keyCode:lp.DOWN,action:kC(wC,t,!0)},{keyCode:lp.RIGHT,action:kC(TC,t,!0)},{keyCode:lp.LEFT,action:kC(TC,t,!1)},{keyCode:lp.UP,action:kC(IC,t,!1)},{keyCode:lp.DOWN,action:kC(IC,t,!0)},{keyCode:lp.RIGHT,action:kC(IS,t,e,!0)},{keyCode:lp.LEFT,action:kC(IS,t,e,!1)},{keyCode:lp.RIGHT,ctrlKey:!i,altKey:i,action:kC(DS,t,e)},{keyCode:lp.LEFT,ctrlKey:!i,altKey:i,action:kC(LS,t,e)},{keyCode:lp.UP,action:kC(_C,t,!1)},{keyCode:lp.DOWN,action:kC(_C,t,!0)}],n).each((t=>{n.preventDefault()}))})(t,e,n)}))})(t,e),((t,e)=>{let n=!1;t.on("keydown",(i=>{n=i.keyCode===lp.BACKSPACE,i.isDefaultPrevented()||((t,e,n)=>{const i=n.keyCode===lp.BACKSPACE?"deleteContentBackward":"deleteContentForward",r=t.selection.isCollapsed(),o=r?"character":"selection",a=t=>r?t?"word":"line":"selection";MC([{keyCode:lp.BACKSPACE,action:kC(eC,t)},{keyCode:lp.BACKSPACE,action:kC(fw,t,!1)},{keyCode:lp.DELETE,action:kC(fw,t,!0)},{keyCode:lp.BACKSPACE,action:kC(sw,t,!1)},{keyCode:lp.DELETE,action:kC(sw,t,!0)},{keyCode:lp.BACKSPACE,action:kC(BS,t,e,!1)},{keyCode:lp.DELETE,action:kC(BS,t,e,!0)},{keyCode:lp.BACKSPACE,action:kC(Zm,t,!1)},{keyCode:lp.DELETE,action:kC(Zm,t,!0)},{keyCode:lp.BACKSPACE,action:kC(TA,t,!1,o)},{keyCode:lp.DELETE,action:kC(TA,t,!0,o)},...PA?[{keyCode:lp.BACKSPACE,altKey:!0,action:kC(TA,t,!1,a(!0))},{keyCode:lp.DELETE,altKey:!0,action:kC(TA,t,!0,a(!0))},{keyCode:lp.BACKSPACE,metaKey:!0,action:kC(TA,t,!1,a(!1))}]:[{keyCode:lp.BACKSPACE,ctrlKey:!0,action:kC(TA,t,!1,a(!0))},{keyCode:lp.DELETE,ctrlKey:!0,action:kC(TA,t,!0,a(!0))}],{keyCode:lp.BACKSPACE,action:kC(gw,t,!1)},{keyCode:lp.DELETE,action:kC(gw,t,!0)},{keyCode:lp.BACKSPACE,action:kC(qS,t,!1)},{keyCode:lp.DELETE,action:kC(qS,t,!0)},{keyCode:lp.BACKSPACE,action:kC(tw,t,!1)},{keyCode:lp.DELETE,action:kC(tw,t,!0)},{keyCode:lp.BACKSPACE,action:kC(Q_,t,!1)},{keyCode:lp.DELETE,action:kC(Q_,t,!0)},{keyCode:lp.BACKSPACE,action:kC(YS,t,!1)},{keyCode:lp.DELETE,action:kC(YS,t,!0)}],n).filter((e=>t.selection.isEditable())).each((e=>{n.preventDefault(),OA(t,i).isDefaultPrevented()||(e(),EA(t,i))}))})(t,e,i)})),t.on("keyup",(e=>{e.isDefaultPrevented()||((t,e,n)=>{AC([{keyCode:lp.BACKSPACE,action:kC(pw,t)},{keyCode:lp.DELETE,action:kC(pw,t)},...PA?[{keyCode:lp.BACKSPACE,altKey:!0,action:kC(XS,t)},{keyCode:lp.DELETE,altKey:!0,action:kC(XS,t)},...n?[{keyCode:NA?224:91,action:kC(XS,t)}]:[]]:[{keyCode:lp.BACKSPACE,ctrlKey:!0,action:kC(XS,t)},{keyCode:lp.DELETE,ctrlKey:!0,action:kC(XS,t)}]],e)})(t,e,n),n=!1}))})(t,e),(t=>{let e=B.none();t.on("keydown",(n=>{n.keyCode===lp.ENTER&&(SM&&(t=>{if(!t.collapsed)return!1;const e=t.startContainer;if(rr(e)){const n=/^[\uAC00-\uD7AF\u1100-\u11FF\u3130-\u318F\uA960-\uA97F\uD7B0-\uD7FF]$/,i=e.data.charAt(t.startOffset-1);return n.test(i)}return!1})(t.selection.getRng())?(t=>{e=B.some(t.selection.getBookmark()),t.undoManager.add()})(t):CM(t,n))})),t.on("keyup",(n=>{n.keyCode===lp.ENTER&&e.each((()=>((t,n)=>{t.undoManager.undo(),e.fold(C,(e=>t.selection.moveToBookmark(e))),CM(t,n),e=B.none()})(t,n)))}))})(t),(t=>{t.on("keydown",(e=>{e.isDefaultPrevented()||((t,e)=>{MC([{keyCode:lp.SPACEBAR,action:kC(LM,t)},{keyCode:lp.SPACEBAR,action:kC(PM,t)}],e).each((n=>{e.preventDefault(),OA(t,"insertText",{data:" "}).isDefaultPrevented()||(n(),EA(t,"insertText",{data:" "}))}))})(t,e)}))})(t),(t=>{t.on("input",(e=>{e.isComposing||(t=>{const e=bn(t.getBody());t.selection.isCollapsed()&&((t,e,n)=>{const i=e.container();if(!rr(i))return B.none();if((t=>{const e=t.container();return rr(e)&&Wt(e.data,Hi)})(e)){const r=tm(t,i,!1,n)||(t=>{const e=t.data,n=(t=>{const e=t.split("");return Y(e,((t,n)=>Kh(t)&&n>0&&n<e.length-1&&Jh(e[n-1])&&Jh(e[n+1])?" ":t)).join("")})(e);return n!==e&&(t.data=n,!0)})(i)||em(t,i,!1,n);return ze(r,e)}if(Kg(t,e,n)){const r=tm(t,i,!0,n)||em(t,i,!0,n);return ze(r,e)}return B.none()})(e,Gs.fromRangeStart(t.selection.getRng()),t.schema).each((e=>{t.selection.setRng(e.toRange())}))})(t)}))})(t),(t=>{t.on("keydown",(e=>{e.isDefaultPrevented()||((t,e)=>{AC([...NM(t)],e).each((t=>{e.preventDefault()}))})(t,e)}))})(t),((t,e)=>{t.on("keydown",(n=>{n.isDefaultPrevented()||((t,e,n)=>{const i=Ee.os.isMacOS()||Ee.os.isiOS();AC([{keyCode:lp.END,action:kC(yC,t,!0)},{keyCode:lp.HOME,action:kC(yC,t,!1)},...i?[]:[{keyCode:lp.HOME,action:kC(bC,t,!1),ctrlKey:!0,shiftKey:!0},{keyCode:lp.END,action:kC(bC,t,!0),ctrlKey:!0,shiftKey:!0}],{keyCode:lp.END,action:kC(EC,t,!0)},{keyCode:lp.HOME,action:kC(EC,t,!1)},{keyCode:lp.END,action:kC(PS,t,!0,e)},{keyCode:lp.HOME,action:kC(PS,t,!1,e)}],n).each((t=>{n.preventDefault()}))})(t,e,n)}))})(t,e),((t,e)=>{if(kM.os.isMacOS())return;const n=aa(!1);t.on("keydown",(e=>{MM(e)&&TM(n,t,!0)})),t.on("keyup",(i=>{i.isDefaultPrevented()||((t,e,n)=>{AC([{keyCode:lp.PAGE_UP,action:kC(PS,t,!1,e)},{keyCode:lp.PAGE_DOWN,action:kC(PS,t,!0,e)}],n)})(t,e,i),MM(i)&&n.get()&&(TM(n,t,!1),t.nodeChanged())}))})(t,e),e}};class BM{constructor(t){let e;this.lastPath=[],this.editor=t;const n=this;"onselectionchange"in t.getDoc()||t.on("NodeChange click mouseup keyup focus",(n=>{const i=t.selection.getRng(),r={startContainer:i.startContainer,startOffset:i.startOffset,endContainer:i.endContainer,endOffset:i.endOffset};"nodechange"!==n.type&&Ip(r,e)||t.dispatch("SelectionChange"),e=r})),t.on("contextmenu",(()=>{mf(t),t.dispatch("SelectionChange")})),t.on("SelectionChange",(()=>{const e=t.selection.getStart(!0);e&&ld(t)&&!n.isSameElementPath(e)&&t.dom.isChildOf(e,t.getBody())&&t.nodeChanged({selectionChange:!0})})),t.on("mouseup",(e=>{!e.isDefaultPrevented()&&ld(t)&&("IMG"===t.selection.getNode().nodeName?bf.setEditorTimeout(t,(()=>{t.nodeChanged()})):t.nodeChanged())}))}nodeChanged(t={}){const e=this.editor.selection;let n;if(this.editor.initialized&&e&&!Lc(this.editor)&&!this.editor.mode.isReadOnly()){const i=this.editor.getBody();n=e.getStart(!0)||i,n.ownerDocument===this.editor.getDoc()&&this.editor.dom.isChildOf(n,i)||(n=i);const r=[];this.editor.dom.getParent(n,(t=>t===i||(r.push(t),!1))),this.editor.dispatch("NodeChange",{...t,element:n,parents:r})}}isSameElementPath(t){let e;const n=this.editor,i=it(n.dom.getParents(t,R,n.getBody()));if(i.length===this.lastPath.length){for(e=i.length;e>=0&&i[e]===this.lastPath[e];e--);if(-1===e)return this.lastPath=i,!0}return this.lastPath=i,!1}}const zM=Ta("image"),FM=Ta("event"),VM=t=>e=>{e[FM]=t},HM=VM(0),WM=VM(2),jM=VM(1),YM=t=>{const e=t;return B.from(e[FM]).exists((t=>0===t))},XM=Ta("mode"),GM=t=>e=>{e[XM]=t},qM=(t,e)=>GM(e)(t),UM=GM(0),$M=GM(2),ZM=GM(1),KM=t=>e=>{const n=e;return B.from(n[XM]).exists((e=>e===t))},QM=KM(0),JM=KM(1),tT=["none","copy","link","move"],eT=["none","copy","copyLink","copyMove","link","linkMove","move","all","uninitialized"],nT=()=>{const t=new window.DataTransfer;let e="move",n="all";const i={get dropEffect(){return e},set dropEffect(t){W(tT,t)&&(e=t)},get effectAllowed(){return n},set effectAllowed(t){YM(i)&&W(eT,t)&&(n=t)},get items(){return((t,e)=>({...e,get length(){return e.length},add:(n,i)=>{if(QM(t)){if(!d(n))return e.add(n);if(!y(i))return e.add(n,i)}return null},remove:n=>{QM(t)&&e.remove(n)},clear:()=>{QM(t)&&e.clear()}}))(i,t.items)},get files(){return JM(i)?Object.freeze({length:0,item:t=>null}):t.files},get types(){return t.types},setDragImage:(e,n,r)=>{var o;QM(i)&&(o={image:e,x:n,y:r},i[zM]=o,t.setDragImage(e,n,r))},getData:e=>JM(i)?"":t.getData(e),setData:(e,n)=>{QM(i)&&t.setData(e,n)},clearData:e=>{QM(i)&&t.clearData(e)}};return UM(i),i},iT=(t,e)=>t.setData("text/html",e),rT="x-tinymce/html",oT=M(rT),aT="\x3c!-- "+rT+" --\x3e",sT=t=>aT+t,lT=t=>-1!==t.indexOf(aT),cT="%MCEPASTEBIN%",uT=t=>t.dom.get("mcepastebin"),hT=t=>x(t)&&"mcepastebin"===t.id,dT=t=>t===cT,pT=(t,e)=>(Pe.each(e,(e=>{t=h(e,RegExp)?t.replace(e,""):t.replace(e[0],e[1])})),t),fT=t=>pT(t,[/^[\s\S]*<body[^>]*>\s*|\s*<\/body[^>]*>[\s\S]*$/gi,/<!--StartFragment-->|<!--EndFragment-->/g,[/( ?)<span class="Apple-converted-space">\u00a0<\/span>( ?)/g,(t,e,n)=>e||n?Hi:" "],/<br class="Apple-interchange-newline">/g,/<br>$/i]),gT=(t,e)=>({content:t,cancelled:e}),mT=(t,e)=>(t.insertContent(e,{merge:iu(t),paste:!0}),!0),vT=t=>/^https?:\/\/[\w\-\/+=.,!;:&%@^~(){}?#]+$/i.test(t),yT=(t,e,n)=>!(t.selection.isCollapsed()||!vT(e))&&((t,e,n)=>(t.undoManager.extra((()=>{n(t,e)}),(()=>{t.execCommand("mceInsertLink",!1,e)})),!0))(t,e,n),bT=(t,e,n)=>!!((t,e)=>vT(e)&&j(vu(t),(t=>Yt(e.toLowerCase(),`.${t.toLowerCase()}`))))(t,e)&&((t,e,n)=>(t.undoManager.extra((()=>{n(t,e)}),(()=>{t.insertContent('<img src="'+e+'">')})),!0))(t,e,n),xT=(t=>{let e=0;return()=>"mceclip"+e++})(),_T=t=>{const e=nT();return iT(e,t),$M(e),e},wT=(t,e,n,i,r)=>{const o=((t,e,n)=>((t,e,n)=>{const i=((t,e,n)=>t.dispatch("PastePreProcess",{content:e,internal:n}))(t,e,n),r=((t,e)=>{const n=ix({sanitize:gu(t),sandbox_iframes:_u(t),sandbox_iframes_exclusions:wu(t),convert_unsafe_embeds:Su(t)},t.schema);n.addNodeFilter("meta",(t=>{Pe.each(t,(t=>{t.remove()}))}));const i=n.parse(e,{forced_root_block:!1,isRootContent:!0});return ag({validate:!0},t.schema).serialize(i)})(t,i.content);return t.hasEventListeners("PastePostProcess")&&!i.isDefaultPrevented()?((t,e,n)=>{const i=t.dom.create("div",{style:"display:none"},e),r=((t,e,n)=>t.dispatch("PastePostProcess",{node:e,internal:n}))(t,i,n);return gT(r.node.innerHTML,r.isDefaultPrevented())})(t,r,n):gT(r,i.isDefaultPrevented())})(t,e,n))(t,e,n);if(!o.cancelled){const e=o.content,n=()=>((t,e,n)=>{n||!ru(t)?mT(t,e):((t,e)=>{Pe.each([yT,bT,mT],(n=>!n(t,e,mT)))})(t,e)})(t,e,i);r?OA(t,"insertFromPaste",{dataTransfer:_T(e)}).isDefaultPrevented()||(n(),EA(t,"insertFromPaste")):n()}},ST=(t,e,n,i)=>{const r=n||lT(e);wT(t,(t=>t.replace(aT,""))(e),r,!1,i)},CT=(t,e,n)=>{const i=t.dom.encode(e).replace(/\r\n/g,"\n"),r=((t,e,n)=>{const i=t.split(/\n\n/),r=((t,e)=>{let n="<"+t;const i=_t(e,((t,e)=>e+'="'+uo.encodeAllRaw(t)+'"'));return i.length&&(n+=" "+i.join(" ")),n+">"})(e,n),o="</"+e+">",a=Y(i,(t=>t.split(/\n/).join("<br />")));return 1===a.length?a[0]:Y(a,(t=>r+t+o)).join("")})(Gi(i,au(t)),Fl(t),Vl(t));wT(t,r,!1,!0,n)},kT=t=>{const e={};if(t&&t.types)for(let n=0;n<t.types.length;n++){const i=t.types[n];try{e[i]=t.getData(i)}catch(t){e[i]=""}}return e},AT=(t,e)=>e in t&&t[e].length>0,MT=t=>AT(t,"text/html")||AT(t,"text/plain"),TT=(t,e,n)=>{const i="paste"===e.type?e.clipboardData:e.dataTransfer;var r;if(Kc(t)&&i){const o=((t,e)=>{const n=e.items?et(ut(e.items),(t=>"file"===t.kind?[t.getAsFile()]:[])):[],i=e.files?ut(e.files):[];return U(n.length>0?n:i,(t=>{const e=vu(t);return t=>jt(t.type,"image/")&&j(e,(e=>(t=>{const e=t.toLowerCase(),n={jpg:"jpeg",jpe:"jpeg",jfi:"jpeg",jif:"jpeg",jfif:"jpeg",pjpeg:"jpeg",pjp:"jpeg",svg:"svg+xml"};return Pe.hasOwn(n,e)?"image/"+n[e]:"image/"+e})(e)===t.type))})(t))})(t,i);if(o.length>0)return e.preventDefault(),(r=o,Promise.all(Y(r,(t=>Py(t).then((e=>({file:t,uri:e}))))))).then((e=>{n&&t.selection.setRng(n),X(e,(e=>{((t,e)=>{Dy(e.uri).each((({data:n,type:i,base64Encoded:r})=>{const o=r?n:btoa(n),a=e.file,s=t.editorUpload.blobCache,l=s.getByData(o,i),c=null!=l?l:((t,e,n,i)=>{const r=xT(),o=ql(t)&&x(n.name),a=o?((t,e)=>{const n=e.match(/([\s\S]+?)(?:\.[a-z0-9.]+)$/i);return x(n)?t.dom.encode(n[1]):void 0})(t,n.name):r,s=o?n.name:void 0,l=e.create(r,n,i,a,s);return e.add(l),l})(t,s,a,o);ST(t,`<img src="${c.blobUri()}">`,!1,!0)}))})(t,e)}))})),!0}return!1},IT=(t,e,n,i,r)=>{let o=fT(n);const a=AT(e,oT())||lT(n),s=!a&&(t=>!/<(?:\/?(?!(?:div|p|br|span)>)\w+|(?:(?!(?:span style="white-space:\s?pre;?">)|br\s?\/>))\w+\s[^>]+)>/i.test(t))(o),l=vT(o);(dT(o)||!o.length||s&&!l)&&(i=!0),(i||l)&&(o=AT(e,"text/plain")&&s?e["text/plain"]:(t=>{const e=To(),n=ix({},e);let i="";const r=e.getVoidElements(),o=Pe.makeMap("script noscript style textarea video audio iframe object"," "),a=e.getBlockElements(),s=t=>{const n=t.name,l=t;if("br"!==n){if("wbr"!==n)if(r[n]&&(i+=" "),o[n])i+=" ";else{if(3===t.type&&(i+=t.value),!(t.name in e.getVoidElements())){let e=t.firstChild;if(e)do{s(e)}while(e=e.next)}a[n]&&l.next&&(i+="\n","p"===n&&(i+="\n"))}}else i+="\n"};return t=pT(t,[/<!\[[^\]]+\]>/g]),s(n.parse(t)),i})(o)),dT(o)||(i?CT(t,o,r):ST(t,o,a,r))},ET=(t,e,n,i)=>{((t,e,n)=>{if(!t)return!1;try{return t.clearData(),t.setData("text/html",e),t.setData("text/plain",n),t.setData(oT(),e),!0}catch(t){return!1}})(t.clipboardData,e.html,e.text)?(t.preventDefault(),i()):n(e.html,i)},OT=t=>(e,n)=>{const{dom:i,selection:r}=t,o=i.create("div",{contenteditable:"false","data-mce-bogus":"all"}),a=i.create("div",{contenteditable:"true"},e);i.setStyles(o,{position:"fixed",top:"0",left:"-3000px",width:"1000px",overflow:"hidden"}),o.appendChild(a),i.add(t.getBody(),o);const s=r.getRng();a.focus();const l=i.createRng();l.selectNodeContents(a),r.setRng(l),bf.setEditorTimeout(t,(()=>{r.setRng(s),i.remove(o),n()}),0)},DT=t=>({html:sT(t.selection.getContent({contextual:!0})),text:t.selection.getContent({format:"text"})}),LT=t=>!t.selection.isCollapsed()||(t=>!!t.dom.getParent(t.selection.getStart(),"td[data-mce-selected],th[data-mce-selected]",t.getBody()))(t),PT=(t,e)=>{var n,i;return Fp.getCaretRangeFromPoint(null!==(n=e.clientX)&&void 0!==n?n:0,null!==(i=e.clientY)&&void 0!==i?i:0,t.getDoc())},NT=(t,e)=>{t.focus(),e&&t.selection.setRng(e)},RT=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,BT=t=>Pe.trim(t).replace(RT,Bo).toLowerCase(),zT=(t,e,n)=>{const i=eu(t);if(n||"all"===i||!nu(t))return e;const r=i?i.split(/[, ]/):[];if(r&&"none"!==i){const n=t.dom,i=t.selection.getNode();e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,((t,e,o,a)=>{const s=n.parseStyle(n.decode(o)),l={};for(let t=0;t<r.length;t++){const e=s[r[t]];let o=e,a=n.getStyle(i,r[t],!0);/color/.test(r[t])&&(o=BT(o),a=BT(a)),a!==o&&(l[r[t]]=e)}const c=n.serializeStyle(l,"span");return c?e+' style="'+c+'"'+a:e+a}))}else e=e.replace(/(<[^>]+) style="([^"]*)"([^>]*>)/gi,"$1$3");return e=e.replace(/(<[^>]+) data-mce-style="([^"]+)"([^>]*>)/gi,((t,e,n,i)=>e+' style="'+n+'"'+i)),e},FT=t=>{const e=aa(!1),n=aa(ou(t)?"text":"html"),i=(t=>{const e=aa(null);return{create:()=>((t,e)=>{const{dom:n,selection:i}=t,r=t.getBody();e.set(i.getRng());const o=n.add(t.getBody(),"div",{id:"mcepastebin",class:"mce-pastebin",contentEditable:!0,"data-mce-bogus":"all",style:"position: fixed; top: 50%; width: 10px; height: 10px; overflow: hidden; opacity: 0"},cT);Ee.browser.isFirefox()&&n.setStyle(o,"left","rtl"===n.getStyle(r,"direction",!0)?65535:-65535),n.bind(o,"beforedeactivate focusin focusout",(t=>{t.stopPropagation()})),o.focus(),i.select(o,!0)})(t,e),remove:()=>((t,e)=>{const n=t.dom;if(uT(t)){let i;const r=e.get();for(;i=uT(t);)n.remove(i),n.unbind(i);r&&t.selection.setRng(r)}e.set(null)})(t,e),getEl:()=>uT(t),getHtml:()=>(t=>{const e=t.dom,n=(t,n)=>{t.appendChild(n),e.remove(n,!0)},[i,...r]=U(t.getBody().childNodes,hT);X(r,(t=>{n(i,t)}));const o=e.select("div[id=mcepastebin]",i);for(let t=o.length-1;t>=0;t--){const r=e.create("div");i.insertBefore(r,o[t]),n(r,o[t])}return i?i.innerHTML:""})(t),getLastRng:e.get}})(t);(t=>{(Ee.browser.isChromium()||Ee.browser.isSafari())&&((t,e)=>{t.on("PastePreProcess",(n=>{n.content=e(t,n.content,n.internal)}))})(t,zT)})(t),((t,e)=>{t.addCommand("mceTogglePlainTextPaste",(()=>{((t,e)=>{"text"===e.get()?(e.set("html"),sp(t,!1)):(e.set("text"),sp(t,!0)),t.focus()})(t,e)})),t.addCommand("mceInsertClipboardContent",((e,n)=>{n.html&&ST(t,n.html,n.internal,!1),n.text&&CT(t,n.text,!1)}))})(t,n),(t=>{const e=e=>n=>{e(t,n)},n=Qc(t);_(n)&&t.on("PastePreProcess",e(n));const i=Jc(t);_(i)&&t.on("PastePostProcess",e(i))})(t),t.on("PreInit",(()=>{(t=>{t.on("cut",(t=>e=>{!e.isDefaultPrevented()&&LT(t)&&t.selection.isEditable()&&ET(e,DT(t),OT(t),(()=>{if(Ee.browser.isChromium()||Ee.browser.isFirefox()){const e=t.selection.getRng();bf.setEditorTimeout(t,(()=>{t.selection.setRng(e),t.execCommand("Delete")}),0)}else t.execCommand("Delete")}))})(t)),t.on("copy",(t=>e=>{!e.isDefaultPrevented()&&LT(t)&&ET(e,DT(t),OT(t),C)})(t))})(t),((t,e)=>{Zc(t)&&t.on("dragend dragover draggesture dragdrop drop drag",(t=>{t.preventDefault(),t.stopPropagation()})),Kc(t)||t.on("drop",(t=>{const e=t.dataTransfer;e&&(t=>j(t.files,(t=>/^image\//.test(t.type))))(e)&&t.preventDefault()})),t.on("drop",(n=>{if(n.isDefaultPrevented())return;const i=PT(t,n);if(b(i))return;const r=kT(n.dataTransfer),o=AT(r,oT());if((!MT(r)||(t=>{const e=t["text/plain"];return!!e&&0===e.indexOf("file://")})(r))&&TT(t,n,i))return;const a=r[oT()],s=a||r["text/html"]||r["text/plain"],l=((t,e,n,i)=>{const r=t.getParent(n,(t=>Vr(e,t)));if(!m(t.getParent(n,"summary")))return!0;if(r&&Ct(i,"text/html")){const t=(new DOMParser).parseFromString(i["text/html"],"text/html").body;return!m(t.querySelector(r.nodeName.toLowerCase()))}return!1})(t.dom,t.schema,i.startContainer,r),c=e.get();c&&!l||s&&(n.preventDefault(),bf.setEditorTimeout(t,(()=>{t.undoManager.transact((()=>{(a||c&&l)&&t.execCommand("Delete"),NT(t,i);const e=fT(s);r["text/html"]?ST(t,e,o,!0):CT(t,e,!0)}))})))})),t.on("dragstart",(t=>{e.set(!0)})),t.on("dragover dragend",(n=>{Kc(t)&&!e.get()&&(n.preventDefault(),NT(t,PT(t,n))),"dragend"===n.type&&e.set(!1)})),(t=>{t.on("input",(e=>{const n=t=>m(t.querySelector("summary"));if("deleteByDrag"===e.inputType){const e=U(t.dom.select("details"),n);X(e,(e=>{ur(e.firstChild)&&e.firstChild.remove();const n=t.dom.create("summary");n.appendChild(Ya().dom),e.prepend(n)}))}}))})(t)})(t,e),((t,e,n)=>{((t,e,n)=>{let i;t.on("keydown",(t=>{(t=>lp.metaKeyPressed(t)&&86===t.keyCode||t.shiftKey&&45===t.keyCode)(t)&&!t.isDefaultPrevented()&&(i=t.shiftKey&&86===t.keyCode)})),t.on("paste",(r=>{if(r.isDefaultPrevented()||(t=>{var e,n;return Ee.os.isAndroid()&&0===(null===(n=null===(e=t.clipboardData)||void 0===e?void 0:e.items)||void 0===n?void 0:n.length)})(r))return;const o="text"===n.get()||i;i=!1;const a=kT(r.clipboardData);!MT(a)&&TT(t,r,e.getLastRng()||t.selection.getRng())||(AT(a,"text/html")?(r.preventDefault(),IT(t,a,a["text/html"],o,!0)):AT(a,"text/plain")&&AT(a,"text/uri-list")?(r.preventDefault(),IT(t,a,a["text/plain"],o,!0)):(e.create(),bf.setEditorTimeout(t,(()=>{const n=e.getHtml();e.remove(),IT(t,a,n,o,!1)}),0)))}))})(t,e,n),(t=>{const e=t=>jt(t,"webkit-fake-url"),n=t=>jt(t,"data:");t.parser.addNodeFilter("img",((i,r,o)=>{if(!Kc(t)&&(t=>{var e;return!0===(null===(e=t.data)||void 0===e?void 0:e.paste)})(o))for(const r of i){const i=r.attr("src");d(i)&&!r.attr("data-mce-object")&&i!==Ee.transparentSrc&&(e(i)||!su(t)&&n(i))&&r.remove()}}))})(t)})(t,i,n)}))},VT=ur,HT=rr,WT=t=>pr(t.dom),jT=t=>e=>Sn(bn(t),e),YT=(t,e)=>Kn(bn(t),WT,jT(e)),XT=(t,e,n)=>{const i=new Fi(t,e),r=n?i.next.bind(i):i.prev.bind(i);let o=t;for(let e=n?t:r();e&&!VT(e);e=r())As(e)&&(o=e);return o};var GT;!function(t){t.Before="before",t.After="after"}(GT||(GT={}));const qT=(t,e)=>Math.abs(t.left-e),UT=(t,e)=>Math.abs(t.right-e),$T=(t,e,n)=>e>t.left&&e<t.right?0:Math.min(Math.abs(t.left-e),Math.abs(t.right-e)),ZT=(t,e,n,i)=>{const r=t=>As(t.node)?B.some(t):$i(t.node)?ZT(ut(t.node.childNodes),e,n,!1):B.none(),o=(t,o)=>{const a=at(t,((t,i)=>o(t,e,n)-o(i,e,n)));return ht(a,r).map((t=>i&&!rr(t.node)&&a.length>1?((t,i,o)=>r(i).filter((i=>Math.abs(o(t,e,n)-o(i,e,n))<2&&rr(i.node))))(t,a[1],o).getOr(t):t))},[a,s]=((t,e)=>(t=>Z(t,((t,e)=>t.fold((()=>B.some(e)),(t=>{const n=Math.min(e.left,t.left),i=Math.min(e.top,t.top),r=Math.max(e.right,t.right),o=Math.max(e.bottom,t.bottom);return B.some({top:i,right:r,bottom:o,left:n,width:r-n,height:o-i})}))),B.none()))(U(t,(t=>{return(n=e)>=(i=t).top&&n<=i.bottom;var n,i}))).fold((()=>[[],t]),(e=>{const{pass:n,fail:i}=q(t,(t=>((t,e)=>{const n=((t,e)=>Math.max(0,Math.min(t.bottom,e.bottom)-Math.max(t.top,e.top)))(t,e)/Math.min(t.height,e.height);return((t,e)=>t.top<e.bottom&&t.bottom>e.top)(t,e)&&n>.5})(t,e)));return[n,i]})))(dS(t),n),{pass:l,fail:c}=q(s,(t=>t.top<n));return o(a,$T).orThunk((()=>o(c,ps))).orThunk((()=>o(l,ps)))},KT=(t,e,n)=>((t,e,n)=>{const i=bn(t),r=((t,e,n)=>B.from(t.dom.elementFromPoint(e,n)).map(gn))(An(i),e,n).filter((t=>Cn(i,t))).getOr(i);return((t,e,n,i)=>{const r=(e,o)=>{const a=U(e.dom.childNodes,O((t=>$i(t)&&t.classList.contains("mce-drag-container"))));return o.fold((()=>ZT(a,n,i,!0)),(t=>{const e=U(a,(e=>e!==t.dom));return ZT(e,n,i,!0)})).orThunk((()=>(Sn(e,t)?B.none():In(e)).bind((t=>r(t,B.some(e))))))};return r(e,B.none())})(i,r,e,n)})(t,e,n).filter((t=>Fu(t.node))).map((t=>((t,e)=>({node:t.node,position:qT(t,e)<UT(t,e)?GT.Before:GT.After}))(t,e))),QT=t=>{var e,n;const i=t.getBoundingClientRect(),r=t.ownerDocument,o=r.documentElement,a=r.defaultView;return{top:i.top+(null!==(e=null==a?void 0:a.scrollY)&&void 0!==e?e:0)-o.clientTop,left:i.left+(null!==(n=null==a?void 0:a.scrollX)&&void 0!==n?n:0)-o.clientLeft}},JT=t=>({target:t,srcElement:t}),tI=pr,eI=((...t)=>e=>{for(let n=0;n<t.length;n++)if(t[n](e))return!0;return!1})(tI,dr),nI=(t,e,n,i)=>{const r=t.dom,o=e.cloneNode(!0);r.setStyles(o,{width:n,height:i}),r.setAttrib(o,"data-mce-selected",null);const a=r.create("div",{class:"mce-drag-container","data-mce-bogus":"all",unselectable:"on",contenteditable:"false"});return r.setStyles(a,{position:"absolute",opacity:.5,overflow:"hidden",border:0,padding:0,margin:0,width:n,height:i}),r.setStyles(o,{margin:0,boxSizing:"border-box"}),a.appendChild(o),a},iI=(t,e)=>n=>()=>{const i="left"===t?n.scrollX:n.scrollY;n.scroll({[t]:i+e,behavior:"smooth"})},rI=iI("left",-32),oI=iI("left",32),aI=iI("top",-32),sI=iI("top",32),lI=t=>{t&&t.parentNode&&t.parentNode.removeChild(t)},cI=(t,e,n,i,r)=>{"dragstart"===e&&iT(i,t.dom.getOuterHTML(n));const o=((t,e,n,i)=>{const r=((t,e)=>{const n=(t=>{const e=nT(),n=(t=>{const e=t;return B.from(e[XM])})(t);return $M(t),HM(e),e.dropEffect=t.dropEffect,e.effectAllowed=t.effectAllowed,(t=>{const e=t;return B.from(e[zM])})(t).each((t=>e.setDragImage(t.image,t.x,t.y))),X(t.types,(n=>{"Files"!==n&&e.setData(n,t.getData(n))})),X(t.files,(t=>e.items.add(t))),(t=>{const e=t;return B.from(e[FM])})(t).each((t=>{((t,e)=>{VM(e)(t)})(e,t)})),n.each((n=>{qM(t,n),qM(e,n)})),e})(t);return"dragstart"===e?(HM(n),UM(n)):"drop"===e?(WM(n),$M(n)):(jM(n),ZM(n)),n})(n,t);return y(i)?((t,e,n)=>{const i=D("Function not supported on simulated event.");return{bubbles:!0,cancelBubble:!1,cancelable:!0,composed:!1,currentTarget:null,defaultPrevented:!1,eventPhase:0,isTrusted:!0,returnValue:!1,timeStamp:0,type:t,composedPath:i,initEvent:i,preventDefault:C,stopImmediatePropagation:C,stopPropagation:C,AT_TARGET:window.Event.AT_TARGET,BUBBLING_PHASE:window.Event.BUBBLING_PHASE,CAPTURING_PHASE:window.Event.CAPTURING_PHASE,NONE:window.Event.NONE,altKey:!1,button:0,buttons:0,clientX:0,clientY:0,ctrlKey:!1,metaKey:!1,movementX:0,movementY:0,offsetX:0,offsetY:0,pageX:0,pageY:0,relatedTarget:null,screenX:0,screenY:0,shiftKey:!1,x:0,y:0,detail:0,view:null,which:0,initUIEvent:i,initMouseEvent:i,getModifierState:i,dataTransfer:n,...JT(e)}})(t,e,r):((t,e,n,i)=>({...e,dataTransfer:i,type:t,...JT(n)}))(t,i,e,r)})(e,n,i,r);return t.dispatch(e,o)},uI=(t,e,n)=>{t.on((t=>{t.intervalId.clear(),t.dragging&&n.fold((()=>cI(e,"dragend",t.element,t.dataTransfer)),(n=>cI(e,"dragend",t.element,t.dataTransfer,n)))})),hI(t)},hI=t=>{t.on((t=>{t.intervalId.clear(),lI(t.ghost)})),t.clear()},dI=t=>{const e=pa(),n=ia.DOM,i=document,r=((t,e)=>n=>{if((t=>0===t.button)(n)){const i=Q(e.dom.getParents(n.target),eI).getOr(null);if(x(i)&&((t,e,n)=>tI(n)&&n!==e&&t.isEditable(n.parentElement))(e.dom,e.getBody(),i)){const r=e.dom.getPos(i),o=e.getBody(),a=e.getDoc().documentElement;t.set({element:i,dataTransfer:nT(),dragging:!1,screenX:n.screenX,screenY:n.screenY,maxX:(e.inline?o.scrollWidth:a.offsetWidth)-2,maxY:(e.inline?o.scrollHeight:a.offsetHeight)-2,relX:n.pageX-r.x,relY:n.pageY-r.y,width:i.offsetWidth,height:i.offsetHeight,ghost:nI(e,i,i.offsetWidth,i.offsetHeight),intervalId:da(100)})}}})(e,t),o=((t,e)=>{const n=fa(((t,n)=>((t,e,n)=>{t._selectionOverrides.hideFakeCaret(),KT(t.getBody(),e,n).fold((()=>t.selection.placeCaretAt(e,n)),(i=>{const r=t._selectionOverrides.showCaret(1,i.node,i.position===GT.Before,!1);r?t.selection.setRng(r):t.selection.placeCaretAt(e,n)}))})(e,t,n)),0);e.on("remove",n.cancel);const i=t;return r=>t.on((t=>{const o=Math.max(Math.abs(r.screenX-t.screenX),Math.abs(r.screenY-t.screenY));if(!t.dragging&&o>10){const n=cI(e,"dragstart",t.element,t.dataTransfer,r);if(x(n.dataTransfer)&&(t.dataTransfer=n.dataTransfer),n.isDefaultPrevented())return;t.dragging=!0,e.focus()}if(t.dragging){const o=r.currentTarget===e.getDoc().documentElement,l=((t,e)=>({pageX:e.pageX-t.relX,pageY:e.pageY+5}))(t,((t,e)=>{return n=(t=>t.inline?QT(t.getBody()):{left:0,top:0})(t),i=(t=>{const e=t.getBody();return t.inline?{left:e.scrollLeft,top:e.scrollTop}:{left:0,top:0}})(t),r=((t,e)=>{if(e.target.ownerDocument!==t.getDoc()){const n=QT(t.getContentAreaContainer()),i=(t=>{const e=t.getBody(),n=t.getDoc().documentElement,i={left:e.scrollLeft,top:e.scrollTop},r={left:e.scrollLeft||n.scrollLeft,top:e.scrollTop||n.scrollTop};return t.inline?i:r})(t);return{left:e.pageX-n.left+i.left,top:e.pageY-n.top+i.top}}return{left:e.pageX,top:e.pageY}})(t,e),{pageX:r.left-n.left+i.left,pageY:r.top-n.top+i.top};var n,i,r})(e,r));a=t.ghost,s=e.getBody(),a.parentNode!==s&&s.appendChild(a),((t,e,n,i,r,o,a,s,l,c,u,h)=>{let d=0,p=0;t.style.left=e.pageX+"px",t.style.top=e.pageY+"px",e.pageX+n>r&&(d=e.pageX+n-r),e.pageY+i>o&&(p=e.pageY+i-o),t.style.width=n-d+"px",t.style.height=i-p+"px";const f=l.clientHeight,g=l.clientWidth,m=a+l.getBoundingClientRect().top,v=s+l.getBoundingClientRect().left;u.on((t=>{t.intervalId.clear(),t.dragging&&h&&(a+8>=f?t.intervalId.set(sI(c)):a-8<=0?t.intervalId.set(aI(c)):s+8>=g?t.intervalId.set(oI(c)):s-8<=0?t.intervalId.set(rI(c)):m+16>=window.innerHeight?t.intervalId.set(sI(window)):m-16<=0?t.intervalId.set(aI(window)):v+16>=window.innerWidth?t.intervalId.set(oI(window)):v-16<=0&&t.intervalId.set(rI(window)))}))})(t.ghost,l,t.width,t.height,t.maxX,t.maxY,r.clientY,r.clientX,e.getContentAreaContainer(),e.getWin(),i,o),n.throttle(r.clientX,r.clientY)}var a,s}))})(e,t),a=((t,e)=>n=>{t.on((t=>{var i;if(t.intervalId.clear(),t.dragging){if(((t,e,n)=>!b(e)&&e!==n&&!t.dom.isChildOf(e,n)&&t.dom.isEditable(e))(e,(t=>{const e=t.getSel();if(x(e)){const t=e.getRangeAt(0).startContainer;return rr(t)?t.parentNode:t}return null})(e.selection),t.element)){const r=null!==(i=e.getDoc().elementFromPoint(n.clientX,n.clientY))&&void 0!==i?i:e.getBody();cI(e,"drop",r,t.dataTransfer,n).isDefaultPrevented()||e.undoManager.transact((()=>{((t,e)=>{const n=t.getParent(e.parentNode,t.isBlock);lI(e),n&&n!==t.getRoot()&&t.isEmpty(n)&&Xa(bn(n))})(e.dom,t.element),(t=>{const e=t.getData("text/html");return""===e?B.none():B.some(e)})(t.dataTransfer).each((t=>e.insertContent(t))),e._selectionOverrides.hideFakeCaret()}))}cI(e,"dragend",e.getBody(),t.dataTransfer,n)}})),hI(t)})(e,t),s=((t,e)=>n=>uI(t,e,B.some(n)))(e,t);t.on("mousedown",r),t.on("mousemove",o),t.on("mouseup",a),n.bind(i,"mousemove",o),n.bind(i,"mouseup",s),t.on("remove",(()=>{n.unbind(i,"mousemove",o),n.unbind(i,"mouseup",s)})),t.on("keydown",(n=>{n.keyCode===lp.ESC&&uI(e,t,B.none())}))},pI=pr,fI=(t,e)=>Km(t.getBody(),e),gI=t=>{const e=t.selection,n=t.dom,i=t.getBody(),r=((t,e,n,i)=>{const r=pa();let o,a;const s=Fl(t),l=t.dom,c=()=>{(t=>{var e,n;const i=Ri(bn(t),"*[contentEditable=false],video,audio,embed,object");for(let t=0;t<i.length;t++){const r=i[t].dom;let o=r.previousSibling;if(rs(o)){const t=o.data;1===t.length?null===(e=o.parentNode)||void 0===e||e.removeChild(o):o.deleteData(t.length-1,1)}o=r.nextSibling,is(o)&&(1===o.data.length?null===(n=o.parentNode)||void 0===n||n.removeChild(o):o.deleteData(0,1))}})(e),a&&(Du(a),a=null),r.on((t=>{l.remove(t.caret),r.clear()})),o&&(clearInterval(o),o=void 0)};return{show:(t,u)=>{let h;if(c(),Nu(u))return null;if(!n(u))return a=((t,e)=>{var n;const i=(null!==(n=t.ownerDocument)&&void 0!==n?n:document).createTextNode(Ga),r=t.parentNode;if(e){const e=t.previousSibling;if(Za(e)){if(Ja(e))return e;if(rs(e))return e.splitText(e.data.length-1)}null==r||r.insertBefore(i,t)}else{const e=t.nextSibling;if(Za(e)){if(Ja(e))return e;if(is(e))return e.splitText(1),e}t.nextSibling?null==r||r.insertBefore(i,t.nextSibling):null==r||r.appendChild(i)}return i})(u,t),h=u.ownerDocument.createRange(),zu(a.nextSibling)?(h.setStart(a,0),h.setEnd(a,0)):(h.setStart(a,1),h.setEnd(a,1)),h;{const n=((t,e,n)=>{var i;const r=(null!==(i=e.ownerDocument)&&void 0!==i?i:document).createElement(t);r.setAttribute("data-mce-caret",n?"before":"after"),r.setAttribute("data-mce-bogus","all"),r.appendChild(Ya().dom);const o=e.parentNode;return n?null==o||o.insertBefore(r,e):e.nextSibling?null==o||o.insertBefore(r,e.nextSibling):null==o||o.appendChild(r),r})(s,u,t),c=Ru(e,u,t);l.setStyle(n,"top",c.top),l.setStyle(n,"caret-color","transparent"),a=n;const d=l.create("div",{class:"mce-visual-caret","data-mce-bogus":"all"});l.setStyles(d,{...c}),l.add(e,d),r.set({caret:d,element:u,before:t}),t&&l.addClass(d,"mce-visual-caret-before"),o=setInterval((()=>{r.on((t=>{i()?l.toggleClass(t.caret,"mce-visual-caret-hidden"):l.addClass(t.caret,"mce-visual-caret-hidden")}))}),500),h=u.ownerDocument.createRange(),h.setStart(n,0),h.setEnd(n,0)}return h},hide:c,getCss:()=>".mce-visual-caret {position: absolute;background-color: black;background-color: currentcolor;}.mce-visual-caret-hidden {display: none;}*[data-mce-caret] {position: absolute;left: -1000px;right: auto;top: 0;margin: 0;padding: 0;}",reposition:()=>{r.on((t=>{const n=Ru(e,t.element,t.before);l.setStyles(t.caret,{...n})}))},destroy:()=>clearInterval(o)}})(t,i,n.isBlock,(()=>If(t))),o="sel-"+n.uniqueId(),a="data-mce-selected";let s;const l=t=>t!==i&&(pI(t)||mr(t))&&n.isChildOf(t,i)&&n.isEditable(t.parentNode),c=(n,i,o,a=!0)=>t.dispatch("ShowCaret",{target:i,direction:n,before:o}).isDefaultPrevented()?null:(a&&e.scrollIntoView(i,-1===n),r.show(o,i)),u=t=>Ja(t)||is(t)||rs(t),h=t=>u(t.startContainer)||u(t.endContainer),d=e=>{const i=t.schema.getVoidElements(),r=n.createRng(),o=e.startContainer,a=e.startOffset,s=e.endContainer,l=e.endOffset;return Ct(i,o.nodeName.toLowerCase())?0===a?r.setStartBefore(o):r.setStartAfter(o):r.setStart(o,a),Ct(i,s.nodeName.toLowerCase())?0===l?r.setEndBefore(s):r.setEndAfter(s):r.setEnd(s,l),r},p=(r,u)=>{if(!r)return null;if(r.collapsed){if(!h(r)){const t=u?1:-1,e=ch(t,i,r),o=e.getNode(!u);if(x(o)){if(Fu(o))return c(t,o,!!u&&!e.isAtEnd(),!1);if(Qa(o)&&pr(o.nextSibling)){const t=n.createRng();return t.setStart(o,0),t.setEnd(o,0),t}}const a=e.getNode(u);if(x(a)){if(Fu(a))return c(t,a,!u&&!e.isAtEnd(),!1);if(Qa(a)&&pr(a.previousSibling)){const t=n.createRng();return t.setStart(a,1),t.setEnd(a,1),t}}}return null}let d=r.startContainer,p=r.startOffset;const f=r.endOffset;if(rr(d)&&0===p&&pI(d.parentNode)&&(d=d.parentNode,p=n.nodeIndex(d),d=d.parentNode),!$i(d))return null;if(f===p+1&&d===r.endContainer){const i=d.childNodes[p];if(l(i))return(i=>{const r=i.cloneNode(!0),l=t.dispatch("ObjectSelected",{target:i,targetClone:r});if(l.isDefaultPrevented())return null;const c=((i,r)=>{const a=bn(t.getBody()),s=t.getDoc(),l=ti(a,"#"+o).getOrThunk((()=>{const t=mn('<div data-mce-bogus="all" class="mce-offscreen-selection"></div>',s);return Qe(t,"id",o),mi(a,t),t})),c=n.createRng();bi(l),yi(l,[yn(Hi,s),bn(r),yn(Hi,s)]),c.setStart(l.dom.firstChild,1),c.setEnd(l.dom.lastChild,0),si(l,{top:n.getPos(i,t.getBody()).y+"px"}),sf(l);const u=e.getSel();return u&&(u.removeAllRanges(),u.addRange(c)),c})(i,l.targetClone),u=bn(i);return X(Ri(bn(t.getBody()),`*[${a}]`),(t=>{Sn(u,t)||rn(t,a)})),n.getAttrib(i,a)||i.setAttribute(a,"1"),s=i,g(),c})(i)}return null},f=()=>{s&&s.removeAttribute(a),ti(bn(t.getBody()),"#"+o).each(xi),s=null},g=()=>{r.hide()};return Px(t)||(t.on("click",(e=>{n.isEditable(e.target)||(e.preventDefault(),t.focus())})),t.on("blur NewBlock",f),t.on("ResizeWindow FullscreenStateChanged",r.reposition),t.on("tap",(e=>{const n=e.target,i=fI(t,n);pI(i)?(e.preventDefault(),nw(t,i).each(p)):l(n)&&nw(t,n).each(p)}),!0),t.on("mousedown",(r=>{const o=r.target;if(o!==i&&"HTML"!==o.nodeName&&!n.isChildOf(o,i))return;if(!((t,e,n)=>{const i=bn(t.getBody()),r=t.inline?i:bn(An(i).dom.documentElement),o=((t,e,n,i)=>{const r=(t=>t.dom.getBoundingClientRect())(e);return{x:n-(t?r.left+e.dom.clientLeft+l_(e):0),y:i-(t?r.top+e.dom.clientTop+s_(e):0)}})(t.inline,r,e,n);return((t,e,n)=>{const i=o_(t),r=a_(t);return e>=0&&n>=0&&e<=i&&n<=r})(r,o.x,o.y)})(t,r.clientX,r.clientY))return;f(),g();const a=fI(t,o);pI(a)?(r.preventDefault(),nw(t,a).each(p)):KT(i,r.clientX,r.clientY).each((n=>{var i;r.preventDefault(),(i=c(1,n.node,n.position===GT.Before,!1))&&e.setRng(i),Zi(a)?a.focus():t.getBody().focus()}))})),t.on("keypress",(t=>{lp.modifierPressed(t)||pI(e.getNode())&&t.preventDefault()})),t.on("GetSelectionRange",(t=>{let e=t.range;if(s){if(!s.parentNode)return void(s=null);e=e.cloneRange(),e.selectNode(s),t.range=e}})),t.on("SetSelectionRange",(t=>{t.range=d(t.range);const e=p(t.range,t.forward);e&&(t.range=e)})),t.on("AfterSetSelectionRange",(t=>{const e=t.range,i=e.startContainer.parentElement;var r;h(e)||$i(r=i)&&"mcepastebin"===r.id||g(),(t=>x(t)&&n.hasClass(t,"mce-offscreen-selection"))(i)||f()})),(t=>{dI(t),Fc(t)&&(t=>{const e=e=>{if(!e.isDefaultPrevented()){const n=e.dataTransfer;n&&(W(n.types,"Files")||n.files.length>0)&&(e.preventDefault(),"drop"===e.type&&f_(t,"Dropped file type is not supported"))}},n=n=>{Sf(t,n.target)&&e(n)},i=()=>{const i=ia.DOM,r=t.dom,o=document,a=t.inline?t.getBody():t.getDoc(),s=["drop","dragover"];X(s,(t=>{i.bind(o,t,n),r.bind(a,t,e)})),t.on("remove",(()=>{X(s,(t=>{i.unbind(o,t,n),r.unbind(a,t,e)}))}))};t.on("init",(()=>{bf.setEditorTimeout(t,i,0)}))})(t)})(t),(t=>{const e=fa((()=>{if(!t.removed&&t.getBody().contains(document.activeElement)){const e=t.selection.getRng();if(e.collapsed){const n=iw(t,e,!1);t.selection.setRng(n)}}}),0);t.on("focus",(()=>{e.throttle()})),t.on("blur",(()=>{e.cancel()}))})(t),(t=>{t.on("init",(()=>{t.on("focusin",(e=>{const n=e.target;if(mr(n)){const e=Km(t.getBody(),n),i=pr(e)?e:n;t.selection.getNode()!==i&&nw(t,i).each((e=>t.selection.setRng(e)))}}))}))})(t)),{showCaret:c,showBlockCaretContainer:t=>{t.hasAttribute("data-mce-caret")&&(os(t),e.scrollIntoView(t))},hideFakeCaret:g,destroy:()=>{r.destroy(),s=null}}},mI=(t,e)=>{let n=e;for(let e=t.previousSibling;rr(e);e=e.previousSibling)n+=e.data.length;return n},vI=(t,e,n,i,r)=>{if(rr(n)&&(i<0||i>n.data.length))return[];const o=r&&rr(n)?[mI(n,i)]:[i];let a=n;for(;a!==e&&a.parentNode;)o.push(t.nodeIndex(a,r)),a=a.parentNode;return a===e?o.reverse():[]},yI=(t,e,n,i,r,o,a=!1)=>({start:vI(t,e,n,i,a),end:vI(t,e,r,o,a)}),bI=(t,e)=>{const n=e.slice(),i=n.pop();return w(i)?Z(n,((t,e)=>t.bind((t=>B.from(t.childNodes[e])))),B.some(t)).bind((t=>rr(t)&&(i<0||i>t.data.length)?B.none():B.some({node:t,offset:i}))):B.none()},xI=(t,e)=>bI(t,e.start).bind((({node:n,offset:i})=>bI(t,e.end).map((({node:t,offset:e})=>{const r=document.createRange();return r.setStart(n,i),r.setEnd(t,e),r})))),_I=(t,e,n)=>{if(e&&t.isEmpty(e)&&!n(e)){const i=e.parentNode;t.remove(e,rr(e.firstChild)&&Yi(e.firstChild.data)),_I(t,i,n)}},wI=(t,e,n,i=!0)=>{const r=e.startContainer.parentNode,o=e.endContainer.parentNode;e.deleteContents(),i&&!n(e.startContainer)&&(rr(e.startContainer)&&0===e.startContainer.data.length&&t.remove(e.startContainer),rr(e.endContainer)&&0===e.endContainer.data.length&&t.remove(e.endContainer),_I(t,r,n),r!==o&&_I(t,o,n))},SI=(t,e)=>B.from(t.dom.getParent(e.startContainer,t.dom.isBlock)),CI=(t,e,n)=>{const i=t.dynamicPatternsLookup({text:n,block:e});return{...t,blockPatterns:_l(i).concat(t.blockPatterns),inlinePatterns:wl(i).concat(t.inlinePatterns)}},kI=(t,e,n,i)=>{const r=t.createRng();return r.setStart(e,0),r.setEnd(n,i),r.toString()},AI=(t,e)=>t.create("span",{"data-mce-type":"bookmark",id:e}),MI=(t,e)=>{const n=t.createRng();return n.setStartAfter(e.start),n.setEndBefore(e.end),n},TI=(t,e,n)=>{const i=xI(t.getRoot(),n).getOrDie("Unable to resolve path range"),r=i.startContainer,o=i.endContainer,a=0===i.endOffset?o:o.splitText(i.endOffset),s=0===i.startOffset?r:r.splitText(i.startOffset),l=s.parentNode;return{prefix:e,end:a.parentNode.insertBefore(AI(t,e+"-end"),a),start:l.insertBefore(AI(t,e+"-start"),s)}},II=(t,e,n)=>{_I(t,t.get(e.prefix+"-end"),n),_I(t,t.get(e.prefix+"-start"),n)},EI=t=>0===t.start.length,OI=(t,e,n,i)=>{const r=e.start;var o;return sk(t,i.container,i.offset,(o=r,(t,e)=>{const n=t.data.substring(0,e),i=n.lastIndexOf(o.charAt(o.length-1)),r=n.lastIndexOf(o);return-1!==r?r+o.length:-1!==i?i+1:-1}),n).bind((i=>{var o,a;const s=null!==(a=null===(o=n.textContent)||void 0===o?void 0:o.indexOf(r))&&void 0!==a?a:-1;if(-1!==s&&i.offset>=s+r.length){const e=t.createRng();return e.setStart(i.container,i.offset-r.length),e.setEnd(i.container,i.offset),B.some(e)}{const o=i.offset-r.length;return ok(i.container,o,n).map((e=>{const n=t.createRng();return n.setStart(e.container,e.offset),n.setEnd(i.container,i.offset),n})).filter((t=>t.toString()===r)).orThunk((()=>OI(t,e,n,ek(i.container,0))))}}))},DI=(t,e,n,i)=>{const r=t.dom,o=r.getRoot(),a=n.pattern,s=n.position.container,l=n.position.offset;return ok(s,l-n.pattern.end.length,e).bind((c=>{const u=yI(r,o,c.container,c.offset,s,l,i);if(EI(a))return B.some({matches:[{pattern:a,startRng:u,endRng:u}],position:c});{const s=LI(t,n.remainingPatterns,c.container,c.offset,e,i),l=s.getOr({matches:[],position:c}),h=l.position,d=((t,e,n,i,r,o=!1)=>{if(0===e.start.length&&!o){const e=t.createRng();return e.setStart(n,i),e.setEnd(n,i),B.some(e)}return rk(n,i,r).bind((n=>OI(t,e,r,n).bind((t=>{var e;if(o){if(t.endContainer===n.container&&t.endOffset===n.offset)return B.none();if(0===n.offset&&(null===(e=t.endContainer.textContent)||void 0===e?void 0:e.length)===t.endOffset)return B.none()}return B.some(t)}))))})(r,a,h.container,h.offset,e,s.isNone());return d.map((t=>{const e=((t,e,n,i=!1)=>yI(t,e,n.startContainer,n.startOffset,n.endContainer,n.endOffset,i))(r,o,t,i);return{matches:l.matches.concat([{pattern:a,startRng:e,endRng:u}]),position:ek(t.startContainer,t.startOffset)}}))}}))},LI=(t,e,n,i,r,o)=>{const a=t.dom;return rk(n,i,a.getRoot()).bind((s=>{const l=kI(a,r,n,i);for(let a=0;a<e.length;a++){const c=e[a];if(!Yt(l,c.end))continue;const u=e.slice();u.splice(a,1);const h=DI(t,r,{pattern:c,remainingPatterns:u,position:s},o);if(h.isNone()&&i>0)return LI(t,e,n,i-1,r,o);if(h.isSome())return h}return B.none()}))},PI=(t,e,n)=>{t.selection.setRng(n),"inline-format"===e.type?X(e.format,(e=>{t.formatter.apply(e)})):t.execCommand(e.cmd,!1,e.value)},NI=(t,e,n,i,r,o)=>{var a;return((t,e)=>{const n=nt(t,(t=>j(e,(e=>t.pattern.start===e.pattern.start&&t.pattern.end===e.pattern.end))));return t.length===e.length?n?t:e:t.length>e.length?t:e})(LI(t,r.inlinePatterns,n,i,e,o).fold((()=>[]),(t=>t.matches)),LI(t,(a=r.inlinePatterns,at(a,((t,e)=>e.end.length-t.end.length))),n,i,e,o).fold((()=>[]),(t=>t.matches)))},RI=(t,e)=>{if(0===e.length)return;const n=t.dom,i=t.selection.getBookmark(),r=((t,e)=>{const n=Ta("mce_textpattern"),i=$(e,((e,i)=>{const r=TI(t,n+`_end${e.length}`,i.endRng);return e.concat([{...i,endMarker:r}])}),[]);return $(i,((e,r)=>{const o=i.length-e.length-1,a=EI(r.pattern)?r.endMarker:TI(t,n+`_start${o}`,r.startRng);return e.concat([{...r,startMarker:a}])}),[])})(n,e);X(r,(e=>{const i=n.getParent(e.startMarker.start,n.isBlock),r=t=>t===i;EI(e.pattern)?((t,e,n,i)=>{const r=MI(t.dom,n);wI(t.dom,r,i),PI(t,e,r)})(t,e.pattern,e.endMarker,r):((t,e,n,i,r)=>{const o=t.dom,a=MI(o,i),s=MI(o,n);wI(o,s,r),wI(o,a,r);const l={prefix:n.prefix,start:n.end,end:i.start},c=MI(o,l);PI(t,e,c)})(t,e.pattern,e.startMarker,e.endMarker,r),II(n,e.endMarker,r),II(n,e.startMarker,r)})),t.selection.moveToBookmark(i)},BI=(t,e,n)=>((t,e,n)=>{if(rr(t)&&0>=t.length)return B.some(ek(t,0));{const e=La(nk);return B.from(e.forwards(t,0,ik(t),n)).map((t=>ek(t.container,0)))}})(e,0,e).map((i=>{const r=i.container;return ak(r,n.start.length,e).each((n=>{const i=t.createRng();i.setStart(r,0),i.setEnd(n.container,n.offset),wI(t,i,(t=>t===e))})),r})),zI=t=>(e,n)=>{const i=e.dom,r=n.pattern,o=xI(i.getRoot(),n.range).getOrDie("Unable to resolve path range");return SI(e,o).each((n=>{"block-format"===r.type?((t,e)=>{const n=e.get(t);return g(n)&&lt(n).exists((t=>Ct(t,"block")))})(r.format,e.formatter)&&e.undoManager.transact((()=>{t(e.dom,n,r),e.formatter.apply(r.format)})):"block-command"===r.type&&e.undoManager.transact((()=>{t(e.dom,n,r),e.execCommand(r.cmd,!1,r.value)}))})),!0},FI=t=>(e,n)=>{const i=(t=>at(t,((t,e)=>e.start.length-t.start.length)))(e),r=n.replace(Hi," ");return Q(i,(e=>t(e,n,r)))},VI=(t,e)=>(n,i,r,o,a)=>{var s;void 0===a&&(a=null!==(s=i.textContent)&&void 0!==s?s:"");const l=n.dom,c=Fl(n);return l.is(i,c)?t(r.blockPatterns,a).map((t=>e&&Pe.trim(a).length===t.start.length?[]:[{pattern:t,range:yI(l,l.getRoot(),i,0,i,0,o)}])).getOr([]):[]},HI=zI(((t,e,n)=>{BI(t,e,n).each((t=>{const e=bn(t),n=Na(e);/^\s[^\s]/.test(n)&&((t,e)=>{Pa.set(t,e)})(e,n.slice(1))}))})),WI=FI(((t,e,n)=>0===e.indexOf(t.start)||0===n.indexOf(t.start))),jI=VI(WI,!0),YI=zI(BI),XI=FI(((t,e,n)=>e===t.start||n===t.start)),GI=VI(XI,!1),qI=(t,e,n)=>{for(let i=0;i<t.length;i++)if(n(t[i],e))return!0;return!1},UI=ia.DOM,$I=t=>t.inline?t.getElement().nodeName.toLowerCase():void 0,ZI=t=>xt(t,(t=>!1===y(t))),KI=t=>{const e=t.options.get,n=t.editorUpload.blobCache;return ZI({allow_conditional_comments:e("allow_conditional_comments"),allow_html_data_urls:e("allow_html_data_urls"),allow_svg_data_urls:e("allow_svg_data_urls"),allow_html_in_named_anchor:e("allow_html_in_named_anchor"),allow_script_urls:e("allow_script_urls"),allow_unsafe_link_target:e("allow_unsafe_link_target"),convert_unsafe_embeds:e("convert_unsafe_embeds"),convert_fonts_to_spans:e("convert_fonts_to_spans"),fix_list_elements:e("fix_list_elements"),font_size_legacy_values:e("font_size_legacy_values"),forced_root_block:e("forced_root_block"),forced_root_block_attrs:e("forced_root_block_attrs"),preserve_cdata:e("preserve_cdata"),inline_styles:e("inline_styles"),root_name:$I(t),sandbox_iframes:e("sandbox_iframes"),sandbox_iframes_exclusions:wu(t),sanitize:e("xss_sanitization"),validate:!0,blob_cache:n,document:t.getDoc()})},QI=t=>{const e=t.options.get;return ZI({custom_elements:e("custom_elements"),extended_valid_elements:e("extended_valid_elements"),invalid_elements:e("invalid_elements"),invalid_styles:e("invalid_styles"),schema:e("schema"),valid_children:e("valid_children"),valid_classes:e("valid_classes"),valid_elements:e("valid_elements"),valid_styles:e("valid_styles"),verify_html:e("verify_html"),padd_empty_block_inline_children:e("format_empty_lines")})},JI=t=>t.inline?t.ui.styleSheetLoader:t.dom.styleSheetLoader,tE=t=>{const e=JI(t),n=cc(t),i=t.contentCSS,r=()=>{e.unloadAll(i),t.inline||t.ui.styleSheetLoader.unloadAll(n)},o=()=>{t.removed?r():t.on("remove",r)};if(t.contentStyles.length>0){let e="";Pe.each(t.contentStyles,(t=>{e+=t+"\r\n"})),t.dom.addStyle(e)}const a=Promise.all(((t,e,n)=>{const{pass:i,fail:r}=q(e,(t=>tinymce.Resource.has(y_(t)))),o=i.map((e=>{const n=tinymce.Resource.get(y_(e));return d(n)?Promise.resolve(JI(t).loadRawCss(e,n)):Promise.resolve()})),a=[...o,JI(t).loadAll(r)];return t.inline?a:a.concat([t.ui.styleSheetLoader.loadAll(n)])})(t,i,n)).then(o).catch(o),s=lc(t);return s&&((t,e)=>{const n=bn(t.getBody()),i=Yn(jn(n)),r=vn("style");Qe(r,"type","text/css"),mi(r,yn(e)),mi(i,r),t.on("remove",(()=>{xi(r)}))})(t,s),a},eE=t=>{!0!==t.removed&&((t=>{Px(t)||t.load({initial:!0,format:"html"}),t.startContent=t.getContent({format:"raw"})})(t),(t=>{t.bindPendingEventDelegates(),t.initialized=!0,(t=>{t.dispatch("Init")})(t),t.focus(!0),(t=>{const e=t.dom.getRoot();t.inline||ld(t)&&t.selection.getStart(!0)!==e||Ph(e).each((e=>{const n=e.getNode(),i=er(n)?Ph(n).getOr(e):e;t.selection.setRng(i.toRange())}))})(t),t.nodeChanged({initial:!0});const e=Xc(t);_(e)&&e.call(t,t),(t=>{const e=qc(t);e&&bf.setEditorTimeout(t,(()=>{let n;n=!0===e?t:t.editorManager.get(e),n&&!n.destroyed&&(n.focus(),n.selection.scrollIntoView())}),100)})(t)})(t))},nE=t=>{const e=t.getElement();let n=t.getDoc();t.inline&&(UI.addClass(e,"mce-content-body"),t.contentDocument=n=document,t.contentWindow=window,t.bodyElement=e,t.contentAreaContainer=e);const i=t.getBody();i.disabled=!0,t.readonly=Pc(t),t._editableRoot=Nc(t),!t.readonly&&t.hasEditableRoot()&&(t.inline&&"static"===UI.getStyle(i,"position",!0)&&(i.style.position="relative"),i.contentEditable="true"),i.disabled=!1,t.editorUpload=C_(t),t.schema=To(QI(t)),t.dom=ia(n,{keep_values:!0,url_converter:t.convertURL,url_converter_scope:t,update_styles:!0,root_element:t.inline?t.getBody():null,collect:t.inline,schema:t.schema,contentCssCors:ec(t),referrerPolicy:nc(t),onSetAttrib:e=>{t.dispatch("SetAttrib",e)}}),t.parser=(t=>{const e=ix(KI(t),t.schema);return e.addAttributeFilter("src,href,style,tabindex",((e,n)=>{const i=t.dom,r="data-mce-"+n;let o=e.length;for(;o--;){const a=e[o];let s=a.attr(n);if(s&&!a.attr(r)){if(0===s.indexOf("data:")||0===s.indexOf("blob:"))continue;"style"===n?(s=i.serializeStyle(i.parseStyle(s),a.name),s.length||(s=null),a.attr(r,s),a.attr(n,s)):"tabindex"===n?(a.attr(r,s),a.attr(n,null)):a.attr(r,t.convertURL(s,n,a.name))}}})),e.addNodeFilter("script",(t=>{let e=t.length;for(;e--;){const n=t[e],i=n.attr("type")||"no/type";0!==i.indexOf("mce-")&&n.attr("type","mce-"+i)}})),pu(t)&&e.addNodeFilter("#cdata",(e=>{var n;let i=e.length;for(;i--;){const r=e[i];r.type=8,r.name="#comment",r.value="[CDATA["+t.dom.encode(null!==(n=r.value)&&void 0!==n?n:"")+"]]"}})),e.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",(e=>{let n=e.length;const i=t.schema.getNonEmptyElements();for(;n--;){const t=e[n];t.isEmpty(i)&&0===t.getAll("br").length&&t.append(new Wf("br",1))}})),e})(t),t.serializer=Yx((t=>{const e=t.options.get;return{...KI(t),...QI(t),...ZI({remove_trailing_brs:e("remove_trailing_brs"),pad_empty_with_br:e("pad_empty_with_br"),url_converter:e("url_converter"),url_converter_scope:e("url_converter_scope"),element_format:e("element_format"),entities:e("entities"),entity_encoding:e("entity_encoding"),indent:e("indent"),indent_after:e("indent_after"),indent_before:e("indent_before")})}})(t),t),t.selection=Wx(t.dom,t.getWin(),t.serializer,t),t.annotator=Qd(t),t.formatter=N_(t),t.undoManager=B_(t),t._nodeChangeDispatcher=new BM(t),t._selectionOverrides=gI(t),(t=>{const e=pa(),n=aa(!1),i=ga((e=>{t.dispatch("longpress",{...e,type:"longpress"}),n.set(!0)}),400);t.on("touchstart",(t=>{iC(t).each((r=>{i.cancel();const o={x:r.clientX,y:r.clientY,target:t.target};i.throttle(t),n.set(!1),e.set(o)}))}),!0),t.on("touchmove",(r=>{i.cancel(),iC(r).each((i=>{e.on((r=>{((t,e)=>{const n=Math.abs(t.clientX-e.x),i=Math.abs(t.clientY-e.y);return n>5||i>5})(i,r)&&(e.clear(),n.set(!1),t.dispatch("longpresscancel"))}))}))}),!0),t.on("touchend touchcancel",(r=>{i.cancel(),"touchcancel"!==r.type&&e.get().filter((t=>t.target.isEqualNode(r.target))).each((()=>{n.get()?r.preventDefault():t.dispatch("tap",{...r,type:"tap"})}))}),!0)})(t),(t=>{(t=>{t.on("click",(e=>{t.dom.getParent(e.target,"details")&&e.preventDefault()}))})(t),(t=>{t.parser.addNodeFilter("details",(e=>{const n=bu(t);X(e,(t=>{"expanded"===n?t.attr("open","open"):"collapsed"===n&&t.attr("open",null)}))})),t.serializer.addNodeFilter("details",(e=>{const n=xu(t);X(e,(t=>{"expanded"===n?t.attr("open","open"):"collapsed"===n&&t.attr("open",null)}))}))})(t)})(t),(t=>{const e="contenteditable",n=" "+Pe.trim(hu(t))+" ",i=" "+Pe.trim(uu(t))+" ",r=uC(n),o=uC(i),a=du(t);a.length>0&&t.on("BeforeSetContent",(e=>{((t,e,n)=>{let i=e.length,r=n.content;if("raw"!==n.format){for(;i--;)r=r.replace(e[i],hC(t,r,uu(t)));n.content=r}})(t,a,e)})),t.parser.addAttributeFilter("class",(t=>{let n=t.length;for(;n--;){const i=t[n];r(i)?i.attr(e,"true"):o(i)&&i.attr(e,"false")}})),t.serializer.addAttributeFilter(e,(t=>{let n=t.length;for(;n--;){const i=t[n];(r(i)||o(i))&&(a.length>0&&i.attr("data-mce-content")?(i.name="#text",i.type=3,i.raw=!0,i.value=i.attr("data-mce-content")):i.attr(e,null))}}))})(t),Px(t)||((t=>{t.on("mousedown",(e=>{e.detail>=3&&(e.preventDefault(),(t=>{const e=((t,e,n)=>{const i=Gs.fromRangeStart(t).getNode(),r=((t,e,n)=>Kn(bn(t),(t=>(t=>dr(t.dom))(t)||n.isBlock(We(t))),jT(e)).getOr(bn(e)).dom)(i,e,n),o=XT(i,r,!1),a=XT(i,r,!0),s=document.createRange();return YT(o,r).fold((()=>{HT(o)?s.setStart(o,0):s.setStartBefore(o)}),(t=>s.setStartBefore(t.dom))),YT(a,r).fold((()=>{HT(a)?s.setEnd(a,a.data.length):s.setEndAfter(a)}),(t=>s.setEndAfter(t.dom))),s})(t.selection.getRng(),t.getBody(),t.schema);t.selection.setRng(dv(e))})(t))}))})(t),(t=>{(t=>{const e=[",",".",";",":","!","?"],n=[32],i=()=>{return e=lu(t),n=cu(t),{inlinePatterns:wl(e),blockPatterns:_l(e),dynamicPatternsLookup:n};var e,n},r=()=>(t=>t.options.isSet("text_patterns_lookup"))(t);t.on("keydown",(e=>{if(13===e.keyCode&&!lp.modifierPressed(e)&&t.selection.isCollapsed()){const n=Sl(i(),"enter");(n.inlinePatterns.length>0||n.blockPatterns.length>0||r())&&((t,e)=>((t,e)=>{const n=t.selection.getRng();return SI(t,n).map((i=>{var r;const o=Math.max(0,n.startOffset),a=CI(e,i,null!==(r=i.textContent)&&void 0!==r?r:"");return{inlineMatches:NI(t,i,n.startContainer,o,a,!0),blockMatches:jI(t,i,a,!0)}})).filter((({inlineMatches:t,blockMatches:e})=>e.length>0||t.length>0))})(t,e).fold(N,(({inlineMatches:e,blockMatches:n})=>(t.undoManager.add(),t.undoManager.extra((()=>{t.execCommand("mceInsertNewLine")}),(()=>{(t=>{t.insertContent(Ga,{preserve_zwsp:!0})})(t),RI(t,e),((t,e)=>{if(0===e.length)return;const n=t.selection.getBookmark();X(e,(e=>HI(t,e))),t.selection.moveToBookmark(n)})(t,n);const i=t.selection.getRng(),r=rk(i.startContainer,i.startOffset,t.dom.getRoot());t.execCommand("mceInsertNewLine"),r.each((e=>{const n=e.container;n.data.charAt(e.offset-1)===Vi&&(n.deleteData(e.offset-1,1),_I(t.dom,n.parentNode,(e=>e===t.dom.getRoot())))}))})),!0))))(t,n)&&e.preventDefault()}}),!0),t.on("keydown",(e=>{if(32===e.keyCode&&t.selection.isCollapsed()){const n=Sl(i(),"space");(n.blockPatterns.length>0||r())&&((t,e)=>((t,e)=>{const n=t.selection.getRng();return SI(t,n).map((i=>{const r=Math.max(0,n.startOffset),o=kI(t.dom,i,n.startContainer,r),a=CI(e,i,o);return GI(t,i,a,!1,o)})).filter((t=>t.length>0))})(t,e).fold(N,(e=>(t.undoManager.transact((()=>{((t,e)=>{X(e,(e=>YI(t,e)))})(t,e)})),!0))))(t,n)&&e.preventDefault()}}),!0);const o=()=>{if(t.selection.isCollapsed()){const e=Sl(i(),"space");(e.inlinePatterns.length>0||r())&&((t,e)=>{const n=t.selection.getRng();SI(t,n).map((i=>{const r=Math.max(0,n.startOffset-1),o=kI(t.dom,i,n.startContainer,r),a=CI(e,i,o),s=NI(t,i,n.startContainer,r,a,!1);s.length>0&&t.undoManager.transact((()=>{RI(t,s)}))}))})(t,e)}};t.on("keyup",(t=>{qI(n,t,((t,e)=>t===e.keyCode&&!lp.modifierPressed(e)))&&o()})),t.on("keypress",(n=>{qI(e,n,((t,e)=>t.charCodeAt(0)===e.charCode))&&bf.setEditorTimeout(t,o)}))})(t)})(t));const r=RM(t);((t,e)=>{t.addCommand("delete",(()=>{((t,e)=>{nC(t,e,!1).fold((()=>{t.selection.isEditable()&&(xm(t),Sm(t))}),P)})(t,e)})),t.addCommand("forwardDelete",(()=>{((t,e)=>{nC(t,e,!0).fold((()=>{t.selection.isEditable()&&(t=>{bm(t,"ForwardDelete")})(t)}),P)})(t,e)}))})(t,r),(t=>{t.on("NodeChange",E(lC,t))})(t),(t=>{var e;const n=t.dom,i=Fl(t),r=null!==(e=fc(t))&&void 0!==e?e:"",o=(e,a)=>{if((t=>{if(V_(t)){const e=t.keyCode;return!H_(t)&&(lp.metaKeyPressed(t)||t.altKey||e>=112&&e<=123||W(z_,e))}return!1})(e))return;const s=t.getBody(),l=!(t=>V_(t)&&!(H_(t)||"keyup"===t.type&&229===t.keyCode))(e)&&((t,e,n)=>{if(t.isEmpty(e,void 0,{skipBogus:!1,includeZwsp:!0})){const i=e.firstElementChild;return!i||!t.getStyle(e.firstElementChild,"padding-left")&&!t.getStyle(e.firstElementChild,"padding-right")&&n===i.nodeName.toLowerCase()}return!1})(n,s,i);(""!==n.getAttrib(s,F_)!==l||a)&&(n.setAttrib(s,F_,l?r:null),((t,e)=>{t.dispatch("PlaceholderToggle",{state:e})})(t,l),t.on(l?"keydown":"keyup",o),t.off(l?"keyup":"keydown",o))};$t(r)&&t.on("init",(e=>{o(e,!0),t.on("change SetContent ExecCommand",o),t.on("paste",(e=>bf.setEditorTimeout(t,(()=>o(e)))))}))})(t),FT(t);const o=(t=>{const e=t;return(t=>St(t.plugins,"rtc").bind((t=>B.from(t.setup))))(t).fold((()=>(e.rtcInstance=Lx(t),B.none())),(t=>(e.rtcInstance=(()=>{const t=M(null),e=M("");return{init:{bindEvents:C},undoManager:{beforeChange:C,add:t,undo:t,redo:t,clear:C,reset:C,hasUndo:N,hasRedo:N,transact:t,ignore:C,extra:C},formatter:{match:N,matchAll:M([]),matchNode:M(void 0),canApply:N,closest:e,apply:C,remove:C,toggle:C,formatChanged:M({unbind:C})},editor:{getContent:e,setContent:M({content:"",html:""}),insertContent:M(""),addVisual:C},selection:{getContent:e},autocompleter:{addDecoration:C,removeDecoration:C},raw:{getModel:M(B.none())}}})(),B.some((()=>t().then((t=>(e.rtcInstance=(t=>{const e=t=>p(t)?t:{},{init:n,undoManager:i,formatter:r,editor:o,selection:a,autocompleter:s,raw:l}=t;return{init:{bindEvents:n.bindEvents},undoManager:{beforeChange:i.beforeChange,add:i.add,undo:i.undo,redo:i.redo,clear:i.clear,reset:i.reset,hasUndo:i.hasUndo,hasRedo:i.hasRedo,transact:(t,e,n)=>i.transact(n),ignore:(t,e)=>i.ignore(e),extra:(t,e,n,r)=>i.extra(n,r)},formatter:{match:(t,n,i,o)=>r.match(t,e(n),o),matchAll:r.matchAll,matchNode:r.matchNode,canApply:t=>r.canApply(t),closest:t=>r.closest(t),apply:(t,n,i)=>r.apply(t,e(n)),remove:(t,n,i,o)=>r.remove(t,e(n)),toggle:(t,n,i)=>r.toggle(t,e(n)),formatChanged:(t,e,n,i,o)=>r.formatChanged(e,n,i,o)},editor:{getContent:t=>o.getContent(t),setContent:(t,e)=>({content:o.setContent(t,e),html:""}),insertContent:(t,e)=>(o.insertContent(t),""),addVisual:o.addVisual},selection:{getContent:(t,e)=>a.getContent(e)},autocompleter:{addDecoration:s.addDecoration,removeDecoration:s.removeDecoration},raw:{getModel:()=>B.some(l.getRawModel())}}})(t),t.rtc.isRemote))))))))})(t);(t=>{const e=t.getDoc(),n=t.getBody();(t=>{t.dispatch("PreInit")})(t),Uc(t)||(e.body.spellcheck=!1,UI.setAttrib(n,"spellcheck","false")),t.quirks=(t=>{const e=Pe.each,n=lp.BACKSPACE,i=lp.DELETE,r=t.dom,o=t.selection,a=t.parser,s=Ee.browser,l=s.isFirefox(),c=s.isChromium()||s.isSafari(),u=Ee.deviceType.isiPhone()||Ee.deviceType.isiPad(),h=Ee.os.isMacOS()||Ee.os.isiOS(),d=(e,n)=>{try{t.getDoc().execCommand(e,!1,String(n))}catch(t){}},p=t=>t.isDefaultPrevented(),f=()=>{t.shortcuts.add("meta+a",null,"SelectAll")},g=()=>{t.inline||r.bind(t.getDoc(),"mousedown mouseup",(e=>{let n;if(e.target===t.getDoc().documentElement)if(n=o.getRng(),t.getBody().focus(),"mousedown"===e.type){if(Ja(n.startContainer))return;o.placeCaretAt(e.clientX,e.clientY)}else o.setRng(n)}))},m=()=>{Range.prototype.getClientRects||t.on("mousedown",(e=>{if(!p(e)&&"HTML"===e.target.nodeName){const e=t.getBody();e.blur(),bf.setEditorTimeout(t,(()=>{e.focus()}))}}))},v=()=>{const e=Wc(t);t.on("click",(n=>{const i=n.target;/^(IMG|HR)$/.test(i.nodeName)&&r.isEditable(i)&&(n.preventDefault(),t.selection.select(i),t.nodeChanged()),"A"===i.nodeName&&r.hasClass(i,e)&&0===i.childNodes.length&&r.isEditable(i.parentNode)&&(n.preventDefault(),o.select(i))}))},y=()=>{t.on("keydown",(t=>{if(!p(t)&&t.keyCode===n&&o.isCollapsed()&&0===o.getRng().startOffset){const e=o.getNode().previousSibling;if(e&&e.nodeName&&"table"===e.nodeName.toLowerCase())return t.preventDefault(),!1}return!0}))},b=()=>{Pc(t)||t.on("BeforeExecCommand mousedown",(()=>{d("StyleWithCSS",!1),d("enableInlineTableEditing",!1),dc(t)||d("enableObjectResizing",!1)}))},x=()=>{t.contentStyles.push("img:-moz-broken {-moz-force-broken-image-icon:1;min-width:24px;min-height:24px}")},_=()=>{t.inline||t.on("keydown",(()=>{document.activeElement===document.body&&t.getWin().focus()}))},w=()=>{t.inline||(t.contentStyles.push("body {min-height: 150px}"),t.on("click",(e=>{let n;"HTML"===e.target.nodeName&&(n=t.selection.getRng(),t.getBody().focus(),t.selection.setRng(n),t.selection.normalize(),t.nodeChanged())})))},S=()=>{h&&t.on("keydown",(e=>{!lp.metaKeyPressed(e)||e.shiftKey||37!==e.keyCode&&39!==e.keyCode||(e.preventDefault(),t.selection.getSel().modify("move",37===e.keyCode?"backward":"forward","lineboundary"))}))},k=()=>{t.on("click",(t=>{let e=t.target;do{if("A"===e.tagName)return void t.preventDefault()}while(e=e.parentNode)})),t.contentStyles.push(".mce-content-body {-webkit-touch-callout: none}")},A=()=>{t.on("init",(()=>{t.dom.bind(t.getBody(),"submit",(t=>{t.preventDefault()}))}))},M=C;return Px(t)?(c&&(g(),v(),A(),f(),u&&(_(),w(),k())),l&&(m(),b(),x(),S())):(t.on("keydown",(e=>{if(p(e)||e.keyCode!==lp.BACKSPACE)return;let n=o.getRng();const i=n.startContainer,a=n.startOffset,s=r.getRoot();let l=i;if(n.collapsed&&0===a){for(;l.parentNode&&l.parentNode.firstChild===l&&l.parentNode!==s;)l=l.parentNode;"BLOCKQUOTE"===l.nodeName&&(t.formatter.toggle("blockquote",void 0,l),n=r.createRng(),n.setStart(i,0),n.setEnd(i,0),o.setRng(n))}})),(()=>{const e=t=>{const e=r.create("body"),n=t.cloneContents();return e.appendChild(n),o.serializer.serialize(e,{format:"html"})};t.on("keydown",(o=>{const a=o.keyCode;if(!p(o)&&(a===i||a===n)&&t.selection.isEditable()){const n=t.selection.isCollapsed(),i=t.getBody();if(n&&!Sr(t.schema,i))return;if(!n&&!(n=>{const i=e(n),o=r.createRng();return o.selectNode(t.getBody()),i===e(o)})(t.selection.getRng()))return;o.preventDefault(),t.setContent(""),i.firstChild&&r.isBlock(i.firstChild)?t.selection.setCursorLocation(i.firstChild,0):t.selection.setCursorLocation(i,0),t.nodeChanged()}}))})(),Ee.windowsPhone||t.on("keyup focusin mouseup",(e=>{lp.modifierPressed(e)||(t=>{const e=t.getBody(),n=t.selection.getRng();return n.startContainer===n.endContainer&&n.startContainer===e&&0===n.startOffset&&n.endOffset===e.childNodes.length})(t)||o.normalize()}),!0),c&&(g(),v(),t.on("init",(()=>{d("DefaultParagraphSeparator",Fl(t))})),A(),y(),a.addNodeFilter("br",(t=>{let e=t.length;for(;e--;)"Apple-interchange-newline"===t[e].attr("class")&&t[e].remove()})),u?(_(),w(),k()):f()),l&&(t.on("keydown",(e=>{if(!p(e)&&e.keyCode===n){if(!t.getBody().getElementsByTagName("hr").length)return;if(o.isCollapsed()&&0===o.getRng().startOffset){const t=o.getNode(),n=t.previousSibling;if("HR"===t.nodeName)return r.remove(t),void e.preventDefault();n&&n.nodeName&&"hr"===n.nodeName.toLowerCase()&&(r.remove(n),e.preventDefault())}}})),m(),(()=>{const n=()=>{const n=r.getAttribs(o.getStart().cloneNode(!1));return()=>{const i=o.getStart();i!==t.getBody()&&(r.setAttrib(i,"style",null),e(n,(t=>{i.setAttributeNode(t.cloneNode(!0))})))}},i=()=>!o.isCollapsed()&&r.getParent(o.getStart(),r.isBlock)!==r.getParent(o.getEnd(),r.isBlock);t.on("keypress",(e=>{let r;return!(!(p(e)||8!==e.keyCode&&46!==e.keyCode)&&i()&&(r=n(),t.getDoc().execCommand("delete",!1),r(),e.preventDefault(),1))})),r.bind(t.getDoc(),"cut",(e=>{if(!p(e)&&i()){const e=n();bf.setEditorTimeout(t,(()=>{e()}))}}))})(),b(),t.on("SetContent ExecCommand",(t=>{"setcontent"!==t.type&&"mceInsertLink"!==t.command||e(r.select("a:not([data-mce-block])"),(t=>{var e;let n=t.parentNode;const i=r.getRoot();if((null==n?void 0:n.lastChild)===t){for(;n&&!r.isBlock(n);){if((null===(e=n.parentNode)||void 0===e?void 0:e.lastChild)!==n||n===i)return;n=n.parentNode}r.add(n,"br",{"data-mce-bogus":1})}}))})),x(),S(),y())),{refreshContentEditable:M,isHidden:()=>{if(!l||t.removed)return!1;const e=t.selection.getSel();return!e||!e.rangeCount||0===e.rangeCount}}})(t),(t=>{t.dispatch("PostRender")})(t);const i=uc(t);void 0!==i&&(n.dir=i);const r=$c(t);r&&t.on("BeforeSetContent",(t=>{Pe.each(r,(e=>{t.content=t.content.replace(e,(t=>"\x3c!--mce:protected "+escape(t)+"--\x3e"))}))})),t.on("SetContent",(()=>{t.addVisual(t.getBody())})),t.on("compositionstart compositionend",(e=>{t.composing="compositionstart"===e.type}))})(t),(t=>{const e=Cu(t);d(ku(t))||!y(e)&&"INVALID"!==(t=>(t=>"gpl"===t.toLowerCase())(t)||(t=>t.length>=64&&t.length<=255)(t)?"VALID":"INVALID")(e)||console.warn("TinyMCE is running in evaluation mode. Provide a valid license key or add license_key: 'gpl' to the init config to agree to the open source license terms. Read more at https://www.tiny.cloud/license-key/")})(t),o.fold((()=>{const e=(t=>{let e=!1;const n=setTimeout((()=>{e||t.setProgressState(!0)}),500);return()=>{clearTimeout(n),e=!0,t.setProgressState(!1)}})(t);tE(t).then((()=>{eE(t),e()}))}),(e=>{t.setProgressState(!0),tE(t).then((()=>{e().then((e=>{t.setProgressState(!1),eE(t),Bx(t)}),(e=>{t.notificationManager.open({type:"error",text:String(e)}),eE(t),Bx(t)}))}))}))},iE=R,rE=ia.DOM,oE=ia.DOM,aE=(t,e)=>({editorContainer:t,iframeContainer:e,api:{}}),sE=t=>{const e=t.getElement();return t.inline?aE(null):(t=>{const e=oE.create("div");return oE.insertAfter(e,t),aE(e,e)})(e)},lE=async t=>{t.dispatch("ScriptsLoaded"),(t=>{const e=Pe.trim($l(t)),n=t.ui.registry.getAll().icons,i={...e_.get("default").icons,...e_.get(e).icons};gt(i,((e,i)=>{Ct(n,i)||t.ui.registry.addIcon(i,e)}))})(t),(t=>{const e=vc(t);if(d(e)){const n=h_.get(e);t.theme=n(t,h_.urls[e])||{},_(t.theme.init)&&t.theme.init(t,h_.urls[e]||t.documentBaseUrl.replace(/\/$/,""))}else t.theme={}})(t),(t=>{const e=bc(t),n=n_.get(e);t.model=n(t,n_.urls[e])})(t),(t=>{const e=[];X(Bc(t),(n=>{((t,e,n)=>{const i=u_.get(n),r=u_.urls[n]||t.documentBaseUrl.replace(/\/$/,"");if(n=Pe.trim(n),i&&-1===Pe.inArray(e,n)){if(t.plugins[n])return;try{const o=i(t,r)||{};t.plugins[n]=o,_(o.init)&&(o.init(t,r),e.push(n))}catch(e){((t,e,n)=>{const i=ua.translate(["Failed to initialize plugin: {0}",e]);ep(t,"PluginLoadError",{message:i}),v_(i,n),f_(t,i)})(t,n,e)}}})(t,e,(t=>t.replace(/^\-/,""))(n))}))})(t);const e=await(t=>{const e=t.getElement();return t.orgDisplay=e.style.display,d(vc(t))?(t=>{const e=t.theme.renderUI;return e?e():sE(t)})(t):_(vc(t))?(t=>{const e=t.getElement(),n=vc(t)(t,e);return n.editorContainer.nodeType&&(n.editorContainer.id=n.editorContainer.id||t.id+"_parent"),n.iframeContainer&&n.iframeContainer.nodeType&&(n.iframeContainer.id=n.iframeContainer.id||t.id+"_iframecontainer"),n.height=n.iframeHeight?n.iframeHeight:e.offsetHeight,n})(t):sE(t)})(t);((t,e)=>{const n={show:B.from(e.show).getOr(C),hide:B.from(e.hide).getOr(C),isEnabled:B.from(e.isEnabled).getOr(R),setEnabled:n=>{t.mode.isReadOnly()||B.from(e.setEnabled).each((t=>t(n)))}};t.ui={...t.ui,...n}})(t,B.from(e.api).getOr({})),t.editorContainer=e.editorContainer,(t=>{t.contentCSS=t.contentCSS.concat((t=>b_(t,sc(t)))(t),(t=>b_(t,cc(t)))(t))})(t),t.inline?nE(t):((t,e)=>{((t,e)=>{const n=t.translate("Rich Text Area"),i=en(bn(t.getElement()),"tabindex").bind(Kt),r=((t,e,n,i)=>{const r=vn("iframe");return i.each((t=>Qe(r,"tabindex",t))),Je(r,n),Je(r,{id:t+"_ifr",frameBorder:"0",allowTransparency:"true",title:e}),hn(r,"tox-edit-area__iframe"),r})(t.id,n,Dl(t),i).dom;r.onload=()=>{r.onload=null,t.dispatch("load")},t.contentAreaContainer=e.iframeContainer,t.iframeElement=r,t.iframeHTML=(t=>{let e=Ll(t)+"<html><head>";Pl(t)!==t.documentBaseUrl&&(e+='<base href="'+t.documentBaseURI.getURI()+'" />'),e+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />';const n=Nl(t),i=Rl(t),r=t.translate(jc(t));return Bl(t)&&(e+='<meta http-equiv="Content-Security-Policy" content="'+Bl(t)+'" />'),e+=`</head><body id="${n}" class="mce-content-body ${i}" data-id="${t.id}" aria-label="${r}"><br></body></html>`,e})(t),rE.add(e.iframeContainer,r)})(t,e),e.editorContainer&&(e.editorContainer.style.display=t.orgDisplay,t.hidden=rE.isHidden(e.editorContainer)),t.getElement().style.display="none",rE.setAttrib(t.id,"aria-hidden","true"),t.getElement().style.visibility=t.orgVisibility,(t=>{const e=t.iframeElement,n=()=>{t.contentDocument=e.contentDocument,nE(t)};if(mu(t)||Ee.browser.isFirefox()){const e=t.getDoc();e.open(),e.write(t.iframeHTML),e.close(),n()}else{const i=((t,e,n,i)=>((t,e,n,i,r)=>{const o=((t,e)=>n=>{t(n)&&e((t=>{const e=bn(Gn(t).getOr(t.target)),n=()=>t.stopPropagation(),i=()=>t.preventDefault(),r=k(i,n);return((t,e,n,i,r,o,a)=>({target:t,x:e,y:n,stop:i,prevent:r,kill:o,raw:a}))(e,t.clientX,t.clientY,n,i,r,t)})(n))})(n,i);return t.dom.addEventListener(e,o,!1),{unbind:E(ki,t,e,o,!1)}})(t,e,n,i))(bn(e),"load",iE,(()=>{i.unbind(),n()}));e.srcdoc=t.iframeHTML}})(t)})(t,{editorContainer:e.editorContainer,iframeContainer:e.iframeContainer})},cE=ia.DOM,uE=t=>"-"===t.charAt(0),hE=(t,e,n)=>B.from(e).filter((t=>$t(t)&&!e_.has(t))).map((e=>({url:`${t.editorManager.baseURL}/icons/${e}/icons${n}.js`,name:B.some(e)}))),dE=Se().deviceType,pE=dE.isPhone(),fE=dE.isTablet(),gE=t=>{if(b(t))return[];{const e=g(t)?t:t.split(/[ ,]/),n=Y(e,Gt);return U(n,$t)}},mE=(t,e)=>Ct(t.sections(),e),vE=(t,e)=>({table_grid:!1,object_resizing:!1,resize:!1,toolbar_mode:St(t,"toolbar_mode").getOr("scrolling"),toolbar_sticky:!1,...e?{menubar:!1}:{}}),yE=(t,e)=>{var n;const i=null!==(n=e.external_plugins)&&void 0!==n?n:{};return t&&t.external_plugins?Pe.extend({},t.external_plugins,i):i},bE=(t,e,n,i,r)=>{var o;const a=t?{mobile:vE(null!==(o=r.mobile)&&void 0!==o?o:{},e)}:{},s=((t,e)=>{const n=((e,n)=>{const i={},r={};return bt(e,((e,n)=>W(t,n)),yt(i),yt(r)),{t:i,f:r}})(e);return i=n.t,r=n.f,{sections:M(i),options:M(r)};var i,r})(["mobile"],wk(a,r)),l=Pe.extend(n,i,s.options(),((t,e)=>t&&mE(e,"mobile"))(t,s)?((t,e,n={})=>{const i=t.sections(),r=St(i,e).getOr({});return Pe.extend({},n,r)})(s,"mobile"):{},{external_plugins:yE(i,s.options())});return((t,e,n,i)=>{const r=gE(n.forced_plugins),o=gE(i.plugins),a=((t,e)=>mE(t,e)?t.sections()[e]:{})(e,"mobile"),s=((t,e,n,i)=>t&&mE(e,"mobile")?i:n)(t,e,o,a.plugins?gE(a.plugins):o),l=((t,e)=>[...gE(t),...gE(e)])(r,s);return Pe.extend(i,{forced_plugins:r,plugins:l})})(t,s,i,l)},xE=(t,e)=>{const n=t.selection,i=t.dom;return/^ | $/.test(e)?((t,e,n,i)=>{const r=bn(t.getRoot());return n=$g(r,Gs.fromRangeStart(e),i)?n.replace(/^ /,"&nbsp;"):n.replace(/^&nbsp;/," "),Zg(r,Gs.fromRangeEnd(e),i)?n.replace(/(&nbsp;| )(<br( \/)>)?$/,"&nbsp;"):n.replace(/&nbsp;(<br( \/)?>)?$/," ")})(i,n.getRng(),e,t.schema):e},_E=(t,e)=>{if(t.selection.isEditable()){const{content:n,details:i}=(t=>{if("string"!=typeof t){const e=Pe.extend({paste:t.paste,data:{paste:t.paste}},t);return{content:t.content,details:e}}return{content:t,details:{}}})(e);lx(t,{...i,content:xE(t,n),format:"html",set:!1,selection:!0}).each((e=>{const n=((t,e,n)=>Nx(t).editor.insertContent(e,n))(t,e.content,i);cx(t,n,e),t.addVisual()}))}},wE={"font-size":"size","font-family":"face"},SE=Ze("font"),CE=t=>(e,n)=>B.from(n).map(bn).filter(Ge).bind((n=>((t,e,n)=>wv(bn(n),(e=>(e=>ui(e,t).orThunk((()=>SE(e)?St(wE,t).bind((t=>en(e,t))):B.none())))(e)),(t=>Sn(bn(e),t))))(t,e,n.dom).or(((t,e)=>B.from(ia.DOM.getStyle(e,t,!0)))(t,n.dom)))).getOr(""),kE=CE("font-size"),AE=k((t=>t.replace(/[\'\"\\]/g,"").replace(/,\s+/g,",")),CE("font-family")),ME=t=>Ph(t.getBody()).bind((t=>{const e=t.container();return B.from(rr(e)?e.parentNode:e)})),TE=(t,e)=>((t,e)=>(t=>B.from(t.selection.getRng()).bind((e=>{const n=t.getBody();return e.startContainer===n&&0===e.startOffset?B.none():B.from(t.selection.getStart(!0))})))(t).orThunk(E(ME,t)).map(bn).filter(Ge).bind(e))(t,A(B.some,e)),IE=(t,e)=>{if(/^[0-9.]+$/.test(e)){const n=parseInt(e,10);if(n>=1&&n<=7){const i=(t=>Pe.explode(t.options.get("font_size_style_values")))(t),r=(t=>Pe.explode(t.options.get("font_size_classes")))(t);return r.length>0?r[n-1]||e:i[n-1]||e}return e}return e},EE=t=>{const e=t.split(/\s*,\s*/);return Y(e,(t=>-1===t.indexOf(" ")||jt(t,'"')||jt(t,"'")?t:`'${t}'`)).join(",")},OE=(t,e)=>{const n=t.dom,i=t.selection.getRng(),r=e?t.selection.getStart():t.selection.getEnd(),o=e?i.startContainer:i.endContainer,a=BA(n,o);if(!a||!a.isContentEditable)return;const s=e?pi:fi,l=Fl(t);((t,e,n,i)=>{const r=t.dom,o=t=>r.isBlock(t)&&t.parentElement===n,a=o(e)?e:r.getParent(i,o,n);return B.from(a).map(bn)})(t,r,a,o).each((e=>{const n=HA(t,o,e.dom,a,!1,l);s(e,bn(n)),t.selection.setCursorLocation(n,0),t.dispatch("NewBlock",{newBlock:n}),EA(t,"insertParagraph")}))},DE=t=>{(t=>{(t=>{const e=e=>()=>{X("left,center,right,justify".split(","),(n=>{e!==n&&t.formatter.remove("align"+n)})),"none"!==e&&((e,n)=>{t.formatter.toggle(e,void 0),t.nodeChanged()})("align"+e)};t.editorCommands.addCommands({JustifyLeft:e("left"),JustifyCenter:e("center"),JustifyRight:e("right"),JustifyFull:e("justify"),JustifyNone:e("none")})})(t),(t=>{const e=e=>()=>{const n=t.selection,i=n.isCollapsed()?[t.dom.getParent(n.getNode(),t.dom.isBlock)]:n.getSelectedBlocks();return j(i,(n=>x(t.formatter.matchNode(n,e))))};t.editorCommands.addCommands({JustifyLeft:e("alignleft"),JustifyCenter:e("aligncenter"),JustifyRight:e("alignright"),JustifyFull:e("alignjustify")},"state")})(t)})(t),(t=>{t.editorCommands.addCommands({"Cut,Copy,Paste":e=>{const n=t.getDoc();let i;try{n.execCommand(e)}catch(t){i=!0}if("paste"!==e||n.queryCommandEnabled(e)||(i=!0),i||!n.queryCommandSupported(e)){let e=t.translate("Your browser doesn't support direct access to the clipboard. Please use the Ctrl+X/C/V keyboard shortcuts instead.");(Ee.os.isMacOS()||Ee.os.isiOS())&&(e=e.replace(/Ctrl\+/g,"+")),t.notificationManager.open({text:e,type:"error"})}}})})(t),(t=>{t.editorCommands.addCommands({mceAddUndoLevel:()=>{t.undoManager.add()},mceEndUndoLevel:()=>{t.undoManager.add()},Undo:()=>{t.undoManager.undo()},Redo:()=>{t.undoManager.redo()}})})(t),(t=>{t.editorCommands.addCommands({mceSelectNodeDepth:(e,n,i)=>{let r=0;t.dom.getParent(t.selection.getNode(),(e=>!$i(e)||r++!==i||(t.selection.select(e),!1)),t.getBody())},mceSelectNode:(e,n,i)=>{t.selection.select(i)},selectAll:()=>{const e=t.dom.getParent(t.selection.getStart(),dr);if(e){const n=t.dom.createRng();n.selectNodeContents(e),t.selection.setRng(n)}}})})(t),(t=>{t.editorCommands.addCommands({mceCleanup:()=>{const e=t.selection.getBookmark();t.setContent(t.getContent()),t.selection.moveToBookmark(e)},insertImage:(e,n,i)=>{_E(t,t.dom.createHTML("img",{src:i}))},insertHorizontalRule:()=>{t.execCommand("mceInsertContent",!1,"<hr>")},insertText:(e,n,i)=>{_E(t,t.dom.encode(i))},insertHTML:(e,n,i)=>{_E(t,i)},mceInsertContent:(e,n,i)=>{_E(t,i)},mceSetContent:(e,n,i)=>{t.setContent(i)},mceReplaceContent:(e,n,i)=>{t.execCommand("mceInsertContent",!1,i.replace(/\{\$selection\}/g,t.selection.getContent({format:"text"})))},mceNewDocument:()=>{t.setContent(tu(t))}})})(t),(t=>{const e=(e,n,i)=>{const r=d(i)?{href:i}:i,o=t.dom.getParent(t.selection.getNode(),"a");p(r)&&d(r.href)&&(r.href=r.href.replace(/ /g,"%20"),o&&r.href||t.formatter.remove("link"),r.href&&t.formatter.apply("link",r,o))};t.editorCommands.addCommands({unlink:()=>{if(t.selection.isEditable()){if(t.selection.isCollapsed()){const e=t.dom.getParent(t.selection.getStart(),"a");return void(e&&t.dom.remove(e,!0))}t.formatter.remove("link")}},mceInsertLink:e,createLink:e})})(t),(t=>{t.editorCommands.addCommands({Indent:()=>{(t=>{JS(t,"indent")})(t)},Outdent:()=>{tC(t)}}),t.editorCommands.addCommands({Outdent:()=>ZS(t)},"state")})(t),(t=>{t.editorCommands.addCommands({InsertNewBlockBefore:()=>{(t=>{OE(t,!0)})(t)},InsertNewBlockAfter:()=>{(t=>{OE(t,!1)})(t)}})})(t),(t=>{t.editorCommands.addCommands({insertParagraph:()=>{xM(QA,t)},mceInsertNewLine:(e,n,i)=>{_M(t,i)},InsertLineBreak:(e,n,i)=>{xM(aM,t)}})})(t),(t=>{(t=>{const e=(e,n)=>{t.formatter.toggle(e,n),t.nodeChanged()};t.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":t=>{e(t)},"ForeColor,HiliteColor":(t,n,i)=>{e(t,{value:i})},BackColor:(t,n,i)=>{e("hilitecolor",{value:i})},FontName:(e,n,i)=>{((t,e)=>{const n=IE(t,e);t.formatter.toggle("fontname",{value:EE(n)}),t.nodeChanged()})(t,i)},FontSize:(e,n,i)=>{((t,e)=>{t.formatter.toggle("fontsize",{value:IE(t,e)}),t.nodeChanged()})(t,i)},LineHeight:(e,n,i)=>{((t,e)=>{t.formatter.toggle("lineheight",{value:String(e)}),t.nodeChanged()})(t,i)},Lang:(t,n,i)=>{var r;e(t,{value:i.code,customValue:null!==(r=i.customCode)&&void 0!==r?r:null})},RemoveFormat:e=>{t.formatter.remove(e)},mceBlockQuote:()=>{e("blockquote")},FormatBlock:(t,n,i)=>{e(d(i)?i:"p")},mceToggleFormat:(t,n,i)=>{e(i)}})})(t),(t=>{const e=e=>t.formatter.match(e);t.editorCommands.addCommands({"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":t=>e(t),mceBlockQuote:()=>e("blockquote")},"state"),t.editorCommands.addQueryValueHandler("FontName",(()=>(t=>TE(t,(e=>AE(t.getBody(),e.dom))).getOr(""))(t))),t.editorCommands.addQueryValueHandler("FontSize",(()=>(t=>TE(t,(e=>kE(t.getBody(),e.dom))).getOr(""))(t))),t.editorCommands.addQueryValueHandler("LineHeight",(()=>(t=>TE(t,(e=>{const n=bn(t.getBody()),i=wv(e,(t=>ui(t,"line-height")),E(Sn,n));return i.getOrThunk((()=>{const t=parseFloat(li(e,"line-height")),n=parseFloat(li(e,"font-size"));return String(t/n)}))})).getOr(""))(t)))})(t)})(t),(t=>{t.editorCommands.addCommands({mceRemoveNode:(e,n,i)=>{const r=null!=i?i:t.selection.getNode();if(r!==t.getBody()){const e=t.selection.getBookmark();t.dom.remove(r,!0),t.selection.moveToBookmark(e)}},mcePrint:()=>{t.getWin().print()},mceFocus:(e,n,i)=>{((t,e)=>{t.removed||(e?Of(t):(t=>{const e=t.selection,n=t.getBody();let i=e.getRng();t.quirks.refreshContentEditable(),x(t.bookmark)&&!If(t)&&vf(t).each((e=>{t.selection.setRng(e),i=e}));const r=((t,e)=>t.dom.getParent(e,(e=>"true"===t.dom.getContentEditable(e))))(t,e.getNode());if(r&&t.dom.isChildOf(r,n))return Tf(r),Mf(t,i),void Of(t);t.inline||(Ee.browser.isOpera()||Tf(n),t.getWin().focus()),(Ee.browser.isFirefox()||t.inline)&&(Tf(n),Mf(t,i)),Of(t)})(t))})(t,!0===i)},mceToggleVisualAid:()=>{t.hasVisual=!t.hasVisual,t.addVisual()}})})(t)},LE=["toggleview"],PE=t=>W(LE,t.toLowerCase());class NE{constructor(t){this.commands={state:{},exec:{},value:{}},this.editor=t}execCommand(t,e=!1,n,i){const r=this.editor,o=t.toLowerCase(),a=null==i?void 0:i.skip_focus;if(r.removed)return!1;if("mcefocus"!==o&&(/^(mceAddUndoLevel|mceEndUndoLevel)$/i.test(o)||a?(t=>{vf(t).each((e=>t.selection.setRng(e)))})(r):r.focus()),r.dispatch("BeforeExecCommand",{command:t,ui:e,value:n}).isDefaultPrevented())return!1;const s=this.commands.exec[o];return!!_(s)&&(s(o,e,n),r.dispatch("ExecCommand",{command:t,ui:e,value:n}),!0)}queryCommandState(t){if(!PE(t)&&this.editor.quirks.isHidden()||this.editor.removed)return!1;const e=t.toLowerCase(),n=this.commands.state[e];return!!_(n)&&n(e)}queryCommandValue(t){if(!PE(t)&&this.editor.quirks.isHidden()||this.editor.removed)return"";const e=t.toLowerCase(),n=this.commands.value[e];return _(n)?n(e):""}addCommands(t,e="exec"){const n=this.commands;gt(t,((t,i)=>{X(i.toLowerCase().split(","),(i=>{n[e][i]=t}))}))}addCommand(t,e,n){const i=t.toLowerCase();this.commands.exec[i]=(t,i,r)=>e.call(null!=n?n:this.editor,i,r)}queryCommandSupported(t){const e=t.toLowerCase();return!!this.commands.exec[e]}addQueryStateHandler(t,e,n){this.commands.state[t.toLowerCase()]=()=>e.call(null!=n?n:this.editor)}addQueryValueHandler(t,e,n){this.commands.value[t.toLowerCase()]=()=>e.call(null!=n?n:this.editor)}}const RE="data-mce-contenteditable",BE=(t,e,n)=>{try{t.getDoc().execCommand(e,!1,String(n))}catch(t){}},zE=(t,e)=>{t.dom.contentEditable=e?"true":"false"},FE=t=>t.readonly,VE=t=>{t.parser.addAttributeFilter("contenteditable",(e=>{FE(t)&&X(e,(t=>{t.attr(RE,t.attr("contenteditable")),t.attr("contenteditable","false")}))})),t.serializer.addAttributeFilter(RE,(e=>{FE(t)&&X(e,(t=>{t.attr("contenteditable",t.attr(RE))}))})),t.serializer.addTempAttr(RE)},HE=["copy"],WE=Pe.makeMap("focus blur focusin focusout click dblclick mousedown mouseup mousemove mouseover beforepaste paste cut copy selectionchange mouseout mouseenter mouseleave wheel keydown keypress keyup input beforeinput contextmenu dragstart dragend dragover draggesture dragdrop drop drag submit compositionstart compositionend compositionupdate touchstart touchmove touchend touchcancel"," ");class jE{static isNative(t){return!!WE[t.toLowerCase()]}constructor(t){this.bindings={},this.settings=t||{},this.scope=this.settings.scope||this,this.toggleEvent=this.settings.toggleEvent||N}fire(t,e){return this.dispatch(t,e)}dispatch(t,e){const n=t.toLowerCase(),i=Ho(n,null!=e?e:{},this.scope);this.settings.beforeFire&&this.settings.beforeFire(i);const r=this.bindings[n];if(r)for(let t=0,e=r.length;t<e;t++){const e=r[t];if(!e.removed){if(e.once&&this.off(n,e.func),i.isImmediatePropagationStopped())return i;if(!1===e.func.call(this.scope,i))return i.preventDefault(),i}}return i}on(t,e,n,i){if(!1===e&&(e=N),e){const r={func:e,removed:!1};i&&Pe.extend(r,i);const o=t.toLowerCase().split(" ");let a=o.length;for(;a--;){const t=o[a];let e=this.bindings[t];e||(e=[],this.toggleEvent(t,!0)),e=n?[r,...e]:[...e,r],this.bindings[t]=e}}return this}off(t,e){if(t){const n=t.toLowerCase().split(" ");let i=n.length;for(;i--;){const r=n[i];let o=this.bindings[r];if(!r)return gt(this.bindings,((t,e)=>{this.toggleEvent(e,!1),delete this.bindings[e]})),this;if(o){if(e){const t=q(o,(t=>t.func===e));o=t.fail,this.bindings[r]=o,X(t.pass,(t=>{t.removed=!0}))}else o.length=0;o.length||(this.toggleEvent(t,!1),delete this.bindings[r])}}}else gt(this.bindings,((t,e)=>{this.toggleEvent(e,!1)})),this.bindings={};return this}once(t,e,n){return this.on(t,e,n,{once:!0})}has(t){t=t.toLowerCase();const e=this.bindings[t];return!(!e||0===e.length)}}const YE=t=>(t._eventDispatcher||(t._eventDispatcher=new jE({scope:t,toggleEvent:(e,n)=>{jE.isNative(e)&&t.toggleNativeEvent&&t.toggleNativeEvent(e,n)}})),t._eventDispatcher),XE={fire(t,e,n){return this.dispatch(t,e,n)},dispatch(t,e,n){const i=this;if(i.removed&&"remove"!==t&&"detach"!==t)return Ho(t.toLowerCase(),null!=e?e:{},i);const r=YE(i).dispatch(t,e);if(!1!==n&&i.parent){let e=i.parent();for(;e&&!r.isPropagationStopped();)e.dispatch(t,r,!1),e=e.parent?e.parent():void 0}return r},on(t,e,n){return YE(this).on(t,e,n)},off(t,e){return YE(this).off(t,e)},once(t,e){return YE(this).once(t,e)},hasEventListeners(t){return YE(this).has(t)}},GE=ia.DOM;let qE;const UE=(t,e)=>{if("selectionchange"===e)return t.getDoc();if(!t.inline&&/^(?:mouse|touch|click|contextmenu|drop|dragover|dragend)/.test(e))return t.getDoc().documentElement;const n=gc(t);return n?(t.eventRoot||(t.eventRoot=GE.select(n)[0]),t.eventRoot):t.getBody()},$E=(t,e,n)=>{(t=>!t.hidden&&!FE(t))(t)?t.dispatch(e,n):FE(t)&&((t,e)=>{if((t=>"click"===t.type)(e)&&!lp.metaKeyPressed(e)){const n=bn(e.target);((t,e)=>ei(e,"a",(e=>Sn(e,bn(t.getBody())))).bind((t=>en(t,"href"))))(t,n).each((n=>{if(e.preventDefault(),/^#/.test(n)){const e=t.dom.select(`${n},[name="${Ht(n,"#")}"]`);e.length&&t.selection.scrollIntoView(e[0],!0)}else window.open(n,"_blank","rel=noopener noreferrer,menubar=yes,toolbar=yes,location=yes,status=yes,resizable=yes,scrollbars=yes")}))}else(t=>W(HE,t.type))(e)&&t.dispatch(e.type,e)})(t,n)},ZE=(t,e)=>{if(t.delegates||(t.delegates={}),t.delegates[e]||t.removed)return;const n=UE(t,e);if(gc(t)){if(qE||(qE={},t.editorManager.on("removeEditor",(()=>{t.editorManager.activeEditor||qE&&(gt(qE,((e,n)=>{t.dom.unbind(UE(t,n))})),qE=null)}))),qE[e])return;const i=n=>{const i=n.target,r=t.editorManager.get();let o=r.length;for(;o--;){const t=r[o].getBody();(t===i||GE.isChildOf(i,t))&&$E(r[o],e,n)}};qE[e]=i,GE.bind(n,e,i)}else{const i=n=>{$E(t,e,n)};GE.bind(n,e,i),t.delegates[e]=i}},KE={...XE,bindPendingEventDelegates(){const t=this;Pe.each(t._pendingNativeEvents,(e=>{ZE(t,e)}))},toggleNativeEvent(t,e){const n=this;"focus"!==t&&"blur"!==t&&(n.removed||(e?n.initialized?ZE(n,t):n._pendingNativeEvents?n._pendingNativeEvents.push(t):n._pendingNativeEvents=[t]:n.initialized&&n.delegates&&(n.dom.unbind(UE(n,t),t,n.delegates[t]),delete n.delegates[t])))},unbindAllNativeEvents(){const t=this,e=t.getBody(),n=t.dom;t.delegates&&(gt(t.delegates,((e,n)=>{t.dom.unbind(UE(t,n),n,e)})),delete t.delegates),!t.inline&&e&&n&&(e.onload=null,n.unbind(t.getWin()),n.unbind(t.getDoc())),n&&(n.unbind(e),n.unbind(t.getContainer()))}},QE=t=>d(t)?{value:t.split(/[ ,]/),valid:!0}:S(t,d)?{value:t,valid:!0}:{valid:!1,message:"The value must be a string[] or a comma/space separated string."},JE=(t,e)=>t+(Zt(e.message)?"":`. ${e.message}`),tO=t=>t.valid,eO=(t,e,n="")=>{const i=e(t);return v(i)?i?{value:t,valid:!0}:{valid:!1,message:n}:i},nO=["design","readonly"],iO=(t,e,n,i)=>{const r=n[e.get()],o=n[i];try{o.activate()}catch(t){return void console.error(`problem while activating editor mode ${i}:`,t)}r.deactivate(),r.editorReadOnly!==o.editorReadOnly&&((t,e)=>{const n=bn(t.getBody());((t,e,n)=>{fn(t,e)&&!n?pn(t,e):n&&hn(t,e)})(n,"mce-content-readonly",e),e?(t.selection.controlSelection.hideResizeRect(),t._selectionOverrides.hideFakeCaret(),(t=>{B.from(t.selection.getNode()).each((t=>{t.removeAttribute("data-mce-selected")}))})(t),t.readonly=!0,zE(n,!1),X(Ri(n,'*[contenteditable="true"]'),(t=>{Qe(t,RE,"true"),zE(t,!1)}))):(t.readonly=!1,t.hasEditableRoot()&&zE(n,!0),X(Ri(n,`*[${RE}="true"]`),(t=>{rn(t,RE),zE(t,!0)})),BE(t,"StyleWithCSS",!1),BE(t,"enableInlineTableEditing",!1),BE(t,"enableObjectResizing",!1),Ef(t)&&t.focus(),(t=>{t.selection.setRng(t.selection.getRng())})(t),t.nodeChanged())})(t,o.editorReadOnly),e.set(i),((t,e)=>{t.dispatch("SwitchMode",{mode:e})})(t,i)},rO=Pe.each,oO=Pe.explode,aO={f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123},sO=Pe.makeMap("alt,ctrl,shift,meta,access"),lO=t=>{const e={},n=Ee.os.isMacOS()||Ee.os.isiOS();rO(oO(t.toLowerCase(),"+"),(t=>{(t=>t in sO)(t)?e[t]=!0:/^[0-9]{2,}$/.test(t)?e.keyCode=parseInt(t,10):(e.charCode=t.charCodeAt(0),e.keyCode=aO[t]||t.toUpperCase().charCodeAt(0))}));const i=[e.keyCode];let r;for(r in sO)e[r]?i.push(r):e[r]=!1;return e.id=i.join(","),e.access&&(e.alt=!0,n?e.ctrl=!0:e.shift=!0),e.meta&&(n?e.meta=!0:(e.ctrl=!0,e.meta=!1)),e};class cO{constructor(t){this.shortcuts={},this.pendingPatterns=[],this.editor=t;const e=this;t.on("keyup keypress keydown",(t=>{!e.hasModifier(t)&&!e.isFunctionKey(t)||t.isDefaultPrevented()||(rO(e.shortcuts,(n=>{e.matchShortcut(t,n)&&(e.pendingPatterns=n.subpatterns.slice(0),"keydown"===t.type&&e.executeShortcutAction(n))})),e.matchShortcut(t,e.pendingPatterns[0])&&(1===e.pendingPatterns.length&&"keydown"===t.type&&e.executeShortcutAction(e.pendingPatterns[0]),e.pendingPatterns.shift()))}))}add(t,e,n,i){const r=this,o=r.normalizeCommandFunc(n);return rO(oO(Pe.trim(t)),(t=>{const n=r.createShortcut(t,e,o,i);r.shortcuts[n.id]=n})),!0}remove(t){const e=this.createShortcut(t);return!!this.shortcuts[e.id]&&(delete this.shortcuts[e.id],!0)}normalizeCommandFunc(t){const e=this,n=t;return"string"==typeof n?()=>{e.editor.execCommand(n,!1,null)}:Pe.isArray(n)?()=>{e.editor.execCommand(n[0],n[1],n[2])}:n}createShortcut(t,e,n,i){const r=Pe.map(oO(t,">"),lO);return r[r.length-1]=Pe.extend(r[r.length-1],{func:n,scope:i||this.editor}),Pe.extend(r[0],{desc:this.editor.translate(e),subpatterns:r.slice(1)})}hasModifier(t){return t.altKey||t.ctrlKey||t.metaKey}isFunctionKey(t){return"keydown"===t.type&&t.keyCode>=112&&t.keyCode<=123}matchShortcut(t,e){return!!e&&e.ctrl===t.ctrlKey&&e.meta===t.metaKey&&e.alt===t.altKey&&e.shift===t.shiftKey&&!!(t.keyCode===e.keyCode||t.charCode&&t.charCode===e.charCode)&&(t.preventDefault(),!0)}executeShortcutAction(t){return t.func?t.func.call(t.scope):null}}const uO=()=>{const t=(()=>{const t={},e={},n={},i={},r={},o={},a={},s={},l=(t,e)=>(n,i)=>{t[n.toLowerCase()]={...i,type:e}};return{addButton:l(t,"button"),addGroupToolbarButton:l(t,"grouptoolbarbutton"),addToggleButton:l(t,"togglebutton"),addMenuButton:l(t,"menubutton"),addSplitButton:l(t,"splitbutton"),addMenuItem:l(e,"menuitem"),addNestedMenuItem:l(e,"nestedmenuitem"),addToggleMenuItem:l(e,"togglemenuitem"),addAutocompleter:l(n,"autocompleter"),addContextMenu:l(r,"contextmenu"),addContextToolbar:l(o,"contexttoolbar"),addContextForm:l(o,"contextform"),addSidebar:l(a,"sidebar"),addView:l(s,"views"),addIcon:(t,e)=>i[t.toLowerCase()]=e,getAll:()=>({buttons:t,menuItems:e,icons:i,popups:n,contextMenus:r,contextToolbars:o,sidebars:a,views:s})}})();return{addAutocompleter:t.addAutocompleter,addButton:t.addButton,addContextForm:t.addContextForm,addContextMenu:t.addContextMenu,addContextToolbar:t.addContextToolbar,addIcon:t.addIcon,addMenuButton:t.addMenuButton,addMenuItem:t.addMenuItem,addNestedMenuItem:t.addNestedMenuItem,addSidebar:t.addSidebar,addSplitButton:t.addSplitButton,addToggleButton:t.addToggleButton,addGroupToolbarButton:t.addGroupToolbarButton,addToggleMenuItem:t.addToggleMenuItem,addView:t.addView,getAll:t.getAll}},hO=ia.DOM,dO=Pe.extend,pO=Pe.each;class fO{constructor(t,e,n){this.plugins={},this.contentCSS=[],this.contentStyles=[],this.loadedCSS={},this.isNotDirty=!1,this.composing=!1,this.destroyed=!1,this.hasHiddenInput=!1,this.iframeElement=null,this.initialized=!1,this.readonly=!1,this.removed=!1,this.startContent="",this._pendingNativeEvents=[],this._skinLoaded=!1,this._editableRoot=!0,this.editorManager=n,this.documentBaseUrl=n.documentBaseURL,dO(this,KE);const i=this;this.id=t,this.hidden=!1;const r=((t,e)=>bE(pE||fE,pE,e,t,e))(n.defaultOptions,e);this.options=((t,e)=>{const n={},i={},r=(t,e,n)=>{const r=eO(e,n);return tO(r)?(i[t]=r.value,!0):(console.warn(JE(`Invalid value passed for the ${t} option`,r)),!1)},o=t=>Ct(n,t);return{register:(t,o)=>{const a=(t=>d(t.processor))(o)?(t=>{const e=(()=>{switch(t){case"array":return g;case"boolean":return v;case"function":return _;case"number":return w;case"object":return p;case"string":return d;case"string[]":return QE;case"object[]":return t=>S(t,p);case"regexp":return t=>h(t,RegExp);default:return R}})();return n=>eO(n,e,`The value must be a ${t}.`)})(o.processor):o.processor,s=((t,e,n)=>{if(!y(e)){const i=eO(e,n);if(tO(i))return i.value;console.error(JE(`Invalid default value passed for the "${t}" option`,i))}})(t,o.default,a);n[t]={...o,default:s,processor:a},St(i,t).orThunk((()=>St(e,t))).each((e=>r(t,e,a)))},isRegistered:o,get:t=>St(i,t).orThunk((()=>St(n,t).map((t=>t.default)))).getOrUndefined(),set:(t,e)=>{if(o(t)){const i=n[t];return i.immutable?(console.error(`"${t}" is an immutable option and cannot be updated`),!1):r(t,e,i.processor)}return console.warn(`"${t}" is not a registered option. Ensure the option has been registered before setting a value.`),!1},unset:t=>{const e=o(t);return e&&delete i[t],e},isSet:t=>Ct(i,t)}})(0,r),(t=>{const e=t.options.register;e("id",{processor:"string",default:t.id}),e("selector",{processor:"string"}),e("target",{processor:"object"}),e("suffix",{processor:"string"}),e("cache_suffix",{processor:"string"}),e("base_url",{processor:"string"}),e("referrer_policy",{processor:"string",default:""}),e("language_load",{processor:"boolean",default:!0}),e("inline",{processor:"boolean",default:!1}),e("iframe_attrs",{processor:"object",default:{}}),e("doctype",{processor:"string",default:"<!DOCTYPE html>"}),e("document_base_url",{processor:"string",default:t.documentBaseUrl}),e("body_id",{processor:Ol(t,"tinymce"),default:"tinymce"}),e("body_class",{processor:Ol(t),default:""}),e("content_security_policy",{processor:"string",default:""}),e("br_in_pre",{processor:"boolean",default:!0}),e("forced_root_block",{processor:t=>{const e=d(t)&&$t(t);return e?{value:t,valid:e}:{valid:!1,message:"Must be a non-empty string."}},default:"p"}),e("forced_root_block_attrs",{processor:"object",default:{}}),e("newline_behavior",{processor:t=>{const e=W(["block","linebreak","invert","default"],t);return e?{value:t,valid:e}:{valid:!1,message:"Must be one of: block, linebreak, invert or default."}},default:"default"}),e("br_newline_selector",{processor:"string",default:".mce-toc h2,figcaption,caption"}),e("no_newline_selector",{processor:"string",default:""}),e("keep_styles",{processor:"boolean",default:!0}),e("end_container_on_empty_block",{processor:t=>v(t)||d(t)?{valid:!0,value:t}:{valid:!1,message:"Must be boolean or a string"},default:"blockquote"}),e("font_size_style_values",{processor:"string",default:"xx-small,x-small,small,medium,large,x-large,xx-large"}),e("font_size_legacy_values",{processor:"string",default:"xx-small,small,medium,large,x-large,xx-large,300%"}),e("font_size_classes",{processor:"string",default:""}),e("automatic_uploads",{processor:"boolean",default:!0}),e("images_reuse_filename",{processor:"boolean",default:!1}),e("images_replace_blob_uris",{processor:"boolean",default:!0}),e("icons",{processor:"string",default:""}),e("icons_url",{processor:"string",default:""}),e("images_upload_url",{processor:"string",default:""}),e("images_upload_base_path",{processor:"string",default:""}),e("images_upload_credentials",{processor:"boolean",default:!1}),e("images_upload_handler",{processor:"function"}),e("language",{processor:"string",default:"en"}),e("language_url",{processor:"string",default:""}),e("entity_encoding",{processor:"string",default:"named"}),e("indent",{processor:"boolean",default:!0}),e("indent_before",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),e("indent_after",{processor:"string",default:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,th,ul,ol,li,dl,dt,dd,area,table,thead,tfoot,tbody,tr,section,details,summary,article,hgroup,aside,figure,figcaption,option,optgroup,datalist"}),e("indent_use_margin",{processor:"boolean",default:!1}),e("indentation",{processor:"string",default:"40px"}),e("content_css",{processor:t=>{const e=!1===t||d(t)||S(t,d);return e?d(t)?{value:Y(t.split(","),Gt),valid:e}:g(t)?{value:t,valid:e}:!1===t?{value:[],valid:e}:{value:t,valid:e}:{valid:!1,message:"Must be false, a string or an array of strings."}},default:Mc(t)?[]:["default"]}),e("content_style",{processor:"string"}),e("content_css_cors",{processor:"boolean",default:!1}),e("font_css",{processor:t=>{const e=d(t)||S(t,d);return e?{value:g(t)?t:Y(t.split(","),Gt),valid:e}:{valid:!1,message:"Must be a string or an array of strings."}},default:[]}),e("inline_boundaries",{processor:"boolean",default:!0}),e("inline_boundaries_selector",{processor:"string",default:"a[href],code,span.mce-annotation"}),e("object_resizing",{processor:t=>{const e=v(t)||d(t);return e?!1===t||kl.isiPhone()||kl.isiPad()?{value:"",valid:e}:{value:!0===t?"table,img,figure.image,div,video,iframe":t,valid:e}:{valid:!1,message:"Must be boolean or a string"}},default:!Al}),e("resize_img_proportional",{processor:"boolean",default:!0}),e("event_root",{processor:"string"}),e("service_message",{processor:"string"}),e("theme",{processor:t=>!1===t||d(t)||_(t),default:"silver"}),e("theme_url",{processor:"string"}),e("formats",{processor:"object"}),e("format_empty_lines",{processor:"boolean",default:!1}),e("format_noneditable_selector",{processor:"string",default:""}),e("preview_styles",{processor:t=>{const e=!1===t||d(t);return e?{value:!1===t?"":t,valid:e}:{valid:!1,message:"Must be false or a string"}},default:"font-family font-size font-weight font-style text-decoration text-transform color background-color border border-radius outline text-shadow"}),e("custom_ui_selector",{processor:"string",default:""}),e("hidden_input",{processor:"boolean",default:!0}),e("submit_patch",{processor:"boolean",default:!0}),e("encoding",{processor:"string"}),e("add_form_submit_trigger",{processor:"boolean",default:!0}),e("add_unload_trigger",{processor:"boolean",default:!0}),e("custom_undo_redo_levels",{processor:"number",default:0}),e("disable_nodechange",{processor:"boolean",default:!1}),e("readonly",{processor:"boolean",default:!1}),e("editable_root",{processor:"boolean",default:!0}),e("plugins",{processor:"string[]",default:[]}),e("external_plugins",{processor:"object"}),e("forced_plugins",{processor:"string[]"}),e("model",{processor:"string",default:t.hasPlugin("rtc")?"plugin":"dom"}),e("model_url",{processor:"string"}),e("block_unsupported_drop",{processor:"boolean",default:!0}),e("visual",{processor:"boolean",default:!0}),e("visual_table_class",{processor:"string",default:"mce-item-table"}),e("visual_anchor_class",{processor:"string",default:"mce-item-anchor"}),e("iframe_aria_text",{processor:"string",default:"Rich Text Area. Press ALT-0 for help."}),e("setup",{processor:"function"}),e("init_instance_callback",{processor:"function"}),e("url_converter",{processor:"function",default:t.convertURL}),e("url_converter_scope",{processor:"object",default:t}),e("urlconverter_callback",{processor:"function"}),e("allow_conditional_comments",{processor:"boolean",default:!1}),e("allow_html_data_urls",{processor:"boolean",default:!1}),e("allow_svg_data_urls",{processor:"boolean"}),e("allow_html_in_named_anchor",{processor:"boolean",default:!1}),e("allow_script_urls",{processor:"boolean",default:!1}),e("allow_unsafe_link_target",{processor:"boolean",default:!1}),e("convert_fonts_to_spans",{processor:"boolean",default:!0,deprecated:!0}),e("fix_list_elements",{processor:"boolean",default:!1}),e("preserve_cdata",{processor:"boolean",default:!1}),e("remove_trailing_brs",{processor:"boolean",default:!0}),e("pad_empty_with_br",{processor:"boolean",default:!1}),e("inline_styles",{processor:"boolean",default:!0,deprecated:!0}),e("element_format",{processor:"string",default:"html"}),e("entities",{processor:"string"}),e("schema",{processor:"string",default:"html5"}),e("convert_urls",{processor:"boolean",default:!0}),e("relative_urls",{processor:"boolean",default:!0}),e("remove_script_host",{processor:"boolean",default:!0}),e("custom_elements",{processor:El}),e("extended_valid_elements",{processor:"string"}),e("invalid_elements",{processor:"string"}),e("invalid_styles",{processor:El}),e("valid_children",{processor:"string"}),e("valid_classes",{processor:El}),e("valid_elements",{processor:"string"}),e("valid_styles",{processor:El}),e("verify_html",{processor:"boolean",default:!0}),e("auto_focus",{processor:t=>d(t)||!0===t}),e("browser_spellcheck",{processor:"boolean",default:!1}),e("protect",{processor:"array"}),e("images_file_types",{processor:"string",default:"jpeg,jpg,jpe,jfi,jif,jfif,png,gif,bmp,webp"}),e("deprecation_warnings",{processor:"boolean",default:!0}),e("a11y_advanced_options",{processor:"boolean",default:!1}),e("api_key",{processor:"string"}),e("license_key",{processor:"string"}),e("paste_block_drop",{processor:"boolean",default:!1}),e("paste_data_images",{processor:"boolean",default:!0}),e("paste_preprocess",{processor:"function"}),e("paste_postprocess",{processor:"function"}),e("paste_webkit_styles",{processor:"string",default:"none"}),e("paste_remove_styles_if_webkit",{processor:"boolean",default:!0}),e("paste_merge_formats",{processor:"boolean",default:!0}),e("smart_paste",{processor:"boolean",default:!0}),e("paste_as_text",{processor:"boolean",default:!1}),e("paste_tab_spaces",{processor:"number",default:4}),e("text_patterns",{processor:t=>S(t,p)||!1===t?{value:Cl(!1===t?[]:t),valid:!0}:{valid:!1,message:"Must be an array of objects or false."},default:[{start:"*",end:"*",format:"italic"},{start:"**",end:"**",format:"bold"},{start:"#",format:"h1",trigger:"space"},{start:"##",format:"h2",trigger:"space"},{start:"###",format:"h3",trigger:"space"},{start:"####",format:"h4",trigger:"space"},{start:"#####",format:"h5",trigger:"space"},{start:"######",format:"h6",trigger:"space"},{start:"1.",cmd:"InsertOrderedList",trigger:"space"},{start:"*",cmd:"InsertUnorderedList",trigger:"space"},{start:"-",cmd:"InsertUnorderedList",trigger:"space"},{start:">",cmd:"mceBlockQuote",trigger:"space"},{start:"---",cmd:"InsertHorizontalRule",trigger:"space"}]}),e("text_patterns_lookup",{processor:t=>{return _(t)?{value:(e=t,t=>{const n=e(t);return Cl(n)}),valid:!0}:{valid:!1,message:"Must be a single function"};var e},default:t=>[]}),e("noneditable_class",{processor:"string",default:"mceNonEditable"}),e("editable_class",{processor:"string",default:"mceEditable"}),e("noneditable_regexp",{processor:t=>S(t,Tl)?{value:t,valid:!0}:Tl(t)?{value:[t],valid:!0}:{valid:!1,message:"Must be a RegExp or an array of RegExp."},default:[]}),e("table_tab_navigation",{processor:"boolean",default:!0}),e("highlight_on_focus",{processor:"boolean",default:!0}),e("xss_sanitization",{processor:"boolean",default:!0}),e("details_initial_state",{processor:t=>{const e=W(["inherited","collapsed","expanded"],t);return e?{value:t,valid:e}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),e("details_serialized_state",{processor:t=>{const e=W(["inherited","collapsed","expanded"],t);return e?{value:t,valid:e}:{valid:!1,message:"Must be one of: inherited, collapsed, or expanded."}},default:"inherited"}),e("init_content_sync",{processor:"boolean",default:!1}),e("newdocument_content",{processor:"string",default:""}),e("sandbox_iframes",{processor:"boolean",default:!0}),e("sandbox_iframes_exclusions",{processor:"string[]",default:["youtube.com","youtu.be","vimeo.com","player.vimeo.com","dailymotion.com","embed.music.apple.com","open.spotify.com","giphy.com","dai.ly","codepen.io"]}),e("convert_unsafe_embeds",{processor:"boolean",default:!0}),t.on("ScriptsLoaded",(()=>{e("directionality",{processor:"string",default:ua.isRtl()?"rtl":void 0}),e("placeholder",{processor:"string",default:Ml.getAttrib(t.getElement(),"placeholder")})}))})(i);const o=this.options.get;o("deprecation_warnings")&&((t,e)=>{((t,e)=>{const n=(t=>{const e=Zx(t,Gx),n=t.forced_root_block;return!1!==n&&""!==n||e.push("forced_root_block (false only)"),at(e)})(t),i=(t=>Kx(t,Ux))(e),r=i.length>0,o=n.length>0,a="mobile"===e.theme;if(r||o||a){const t="\n- ",e=a?`\n\nThemes:${t}mobile`:"",s=r?`\n\nPlugins:${t}${i.join(t)}`:"",l=o?`\n\nOptions:${t}${n.join(t)}`:"";console.warn("The following deprecated features are currently enabled and have been removed in TinyMCE 7.0. These features will no longer work and should be removed from the TinyMCE configuration. See https://www.tiny.cloud/docs/tinymce/7/migration-from-6x/ for more information."+e+s+l)}})(t,e),((t,e)=>{const n=(t=>Zx(t,qx))(t),i=(t=>Kx(t,$x.map((t=>t.name))))(e),r=i.length>0,o=n.length>0;if(r||o){const t="\n- ",e=r?`\n\nPlugins:${t}${i.map(Qx).join(t)}`:"",a=o?`\n\nOptions:${t}${n.join(t)}`:"";console.warn("The following deprecated features are currently enabled but will be removed soon."+e+a)}})(t,e)})(e,r);const a=o("suffix");a&&(n.suffix=a),this.suffix=n.suffix;const s=o("base_url");s&&n._setBaseUrl(s),this.baseUri=n.baseURI;const l=nc(i);l&&(oa.ScriptLoader._setReferrerPolicy(l),ia.DOM.styleSheetLoader._setReferrerPolicy(l));const c=Rc(i);x(c)&&ia.DOM.styleSheetLoader._setContentCssCors(c),ha.languageLoad=o("language_load"),ha.baseURL=n.baseURL,this.setDirty(!1),this.documentBaseURI=new Yb(Pl(i),{base_uri:this.baseUri}),this.baseURI=this.baseUri,this.inline=Mc(i),this.hasVisual=Vc(i),this.shortcuts=new cO(this),this.editorCommands=new NE(this),DE(this);const u=o("cache_suffix");u&&(Ee.cacheSuffix=u.replace(/^[\?\&]+/,"")),this.ui={registry:uO(),styleSheetLoader:void 0,show:C,hide:C,setEnabled:C,isEnabled:R},this.mode=(t=>{const e=aa("design"),n=aa({design:{activate:C,deactivate:C,editorReadOnly:!1},readonly:{activate:C,deactivate:C,editorReadOnly:!0}});return(t=>{t.serializer?VE(t):t.on("PreInit",(()=>{VE(t)}))})(t),(t=>{t.on("ShowCaret",(e=>{FE(t)&&e.preventDefault()})),t.on("ObjectSelected",(e=>{FE(t)&&e.preventDefault()}))})(t),{isReadOnly:()=>FE(t),set:i=>((t,e,n,i)=>{if(i!==n.get()){if(!Ct(e,i))throw new Error(`Editor mode '${i}' is invalid`);t.initialized?iO(t,n,e,i):t.on("init",(()=>iO(t,n,e,i)))}})(t,n.get(),e,i),get:()=>e.get(),register:(t,e)=>{n.set(((t,e,n)=>{if(W(nO,e))throw new Error(`Cannot override default mode ${e}`);return{...t,[e]:{...n,deactivate:()=>{try{n.deactivate()}catch(t){console.error(`problem while deactivating editor mode ${e}:`,t)}}}}})(n.get(),t,e))}}})(i),n.dispatch("SetupEditor",{editor:this});const f=Yc(i);_(f)&&f.call(i,i)}render(){(t=>{const e=t.id;ua.setCode(ic(t));const n=()=>{cE.unbind(window,"ready",n),t.render()};if(!qo.Event.domLoaded)return void cE.bind(window,"ready",n);if(!t.getElement())return;const i=bn(t.getElement()),r=on(i);t.on("remove",(()=>{G(i.dom.attributes,(t=>rn(i,t.name))),Je(i,r)})),t.ui.styleSheetLoader=((t,e)=>qr.forElement(t,{contentCssCors:Rc(e),referrerPolicy:nc(e)}))(i,t),Mc(t)?t.inline=!0:(t.orgVisibility=t.getElement().style.visibility,t.getElement().style.visibility="hidden");const o=t.getElement().form||cE.getParent(e,"form");o&&(t.formElement=o,Tc(t)&&!ir(t.getElement())&&(cE.insertAfter(cE.create("input",{type:"hidden",name:e}),e),t.hasHiddenInput=!0),t.formEventDelegate=e=>{t.dispatch(e.type,e)},cE.bind(o,"submit reset",t.formEventDelegate),t.on("reset",(()=>{t.resetContent()})),!Ic(t)||o.submit.nodeType||o.submit.length||o._mceOldSubmit||(o._mceOldSubmit=o.submit,o.submit=()=>(t.editorManager.triggerSave(),t.setDirty(!1),o._mceOldSubmit(o)))),t.windowManager=d_(t),t.notificationManager=c_(t),(t=>"xml"===t.options.get("encoding"))(t)&&t.on("GetContent",(t=>{t.save&&(t.content=cE.encode(t.content))})),Ec(t)&&t.on("submit",(()=>{t.initialized&&t.save()})),Oc(t)&&(t._beforeUnload=()=>{!t.initialized||t.destroyed||t.isHidden()||t.save({format:"raw",no_events:!0,set_dirty:!1})},t.editorManager.on("BeforeUnload",t._beforeUnload)),t.editorManager.add(t),((t,e)=>{const n=oa.ScriptLoader,i=()=>{!t.removed&&(t=>{const e=vc(t);return!d(e)||x(h_.get(e))})(t)&&(t=>{const e=bc(t);return x(n_.get(e))})(t)&&lE(t)};((t,e)=>{const n=vc(t);if(d(n)&&!uE(n)&&!Ct(h_.urls,n)){const i=yc(t),r=i?t.documentBaseURI.toAbsolute(i):`themes/${n}/theme${e}.js`;h_.load(n,r).catch((()=>{((t,e,n)=>{g_(t,"ThemeLoadError",m_("theme",e,n))})(t,r,n)}))}})(t,e),((t,e)=>{const n=bc(t);if("plugin"!==n&&!Ct(n_.urls,n)){const i=xc(t),r=d(i)?t.documentBaseURI.toAbsolute(i):`models/${n}/model${e}.js`;n_.load(n,r).catch((()=>{((t,e,n)=>{g_(t,"ModelLoadError",m_("model",e,n))})(t,r,n)}))}})(t,e),((t,e)=>{const n=ic(e),i=rc(e);if(!ua.hasCode(n)&&"en"!==n){const r=$t(i)?i:`${e.editorManager.baseURL}/langs/${n}.js`;t.add(r).catch((()=>{((t,e,n)=>{g_(t,"LanguageLoadError",m_("language",e,n))})(e,r,n)}))}})(n,t),((t,e,n)=>{const i=hE(e,"default",n),r=(t=>B.from(Zl(t)).filter($t).map((t=>({url:t,name:B.none()}))))(e).orThunk((()=>hE(e,$l(e),"")));X((t=>{const e=[],n=t=>{e.push(t)};for(let e=0;e<t.length;e++)t[e].each(n);return e})([i,r]),(n=>{t.add(n.url).catch((()=>{((t,e,n)=>{g_(t,"IconsLoadError",m_("icons",e,n))})(e,n.url,n.name.getOrUndefined())}))}))})(n,t,e),((t,e)=>{const n=(e,n)=>{u_.load(e,n).catch((()=>{((t,e,n)=>{g_(t,"PluginLoadError",m_("plugin",e,n))})(t,n,e)}))};gt(zc(t),((e,i)=>{n(i,e),t.options.set("plugins",Bc(t).concat(i))})),X(Bc(t),(t=>{!(t=Pe.trim(t))||u_.urls[t]||uE(t)||n(t,`plugins/${t}/plugin${e}.js`)}))})(t,e),n.loadQueue().then(i,i)})(t,t.suffix)})(this)}focus(t){this.execCommand("mceFocus",!1,t)}hasFocus(){return If(this)}translate(t){return ua.translate(t)}getParam(t,e,n){const i=this.options;return i.isRegistered(t)||(x(n)?i.register(t,{processor:n,default:e}):i.register(t,{processor:R,default:e})),i.isSet(t)||y(e)?i.get(t):e}hasPlugin(t,e){return!(!W(Bc(this),t)||e&&void 0===u_.get(t))}nodeChanged(t){this._nodeChangeDispatcher.nodeChanged(t)}addCommand(t,e,n){this.editorCommands.addCommand(t,e,n)}addQueryStateHandler(t,e,n){this.editorCommands.addQueryStateHandler(t,e,n)}addQueryValueHandler(t,e,n){this.editorCommands.addQueryValueHandler(t,e,n)}addShortcut(t,e,n,i){this.shortcuts.add(t,e,n,i)}execCommand(t,e,n,i){return this.editorCommands.execCommand(t,e,n,i)}queryCommandState(t){return this.editorCommands.queryCommandState(t)}queryCommandValue(t){return this.editorCommands.queryCommandValue(t)}queryCommandSupported(t){return this.editorCommands.queryCommandSupported(t)}show(){const t=this;t.hidden&&(t.hidden=!1,t.inline?t.getBody().contentEditable="true":(hO.show(t.getContainer()),hO.hide(t.id)),t.load(),t.dispatch("show"))}hide(){const t=this;t.hidden||(t.save(),t.inline?(t.getBody().contentEditable="false",t===t.editorManager.focusedEditor&&(t.editorManager.focusedEditor=null)):(hO.hide(t.getContainer()),hO.setStyle(t.id,"display",t.orgDisplay)),t.hidden=!0,t.dispatch("hide"))}isHidden(){return this.hidden}setProgressState(t,e){this.dispatch("ProgressState",{state:t,time:e})}load(t={}){const e=this,n=e.getElement();if(e.removed)return"";if(n){const i={...t,load:!0},r=ir(n)?n.value:n.innerHTML,o=e.setContent(r,i);return i.no_events||e.dispatch("LoadContent",{...i,element:n}),o}return""}save(t={}){const e=this;let n=e.getElement();if(!n||!e.initialized||e.removed)return"";const i={...t,save:!0,element:n};let r=e.getContent(i);const o={...i,content:r};if(o.no_events||e.dispatch("SaveContent",o),"raw"===o.format&&e.dispatch("RawSaveContent",o),r=o.content,ir(n))n.value=r;else{!t.is_removing&&e.inline||(n.innerHTML=r);const i=hO.getParent(e.id,"form");i&&pO(i.elements,(t=>t.name!==e.id||(t.value=r,!1)))}return o.element=i.element=n=null,!1!==o.set_dirty&&e.setDirty(!1),r}setContent(t,e){return Xx(this,t,e)}getContent(t){return((t,e={})=>{const n=((t,e)=>({...t,format:e,get:!0,getInner:!0}))(e,e.format?e.format:"html");return ax(t,n).fold(T,(e=>{const n=((t,e)=>Nx(t).editor.getContent(e))(t,e);return sx(t,n,e)}))})(this,t)}insertContent(t,e){e&&(t=dO({content:t},e)),this.execCommand("mceInsertContent",!1,t)}resetContent(t){void 0===t?Xx(this,this.startContent,{format:"raw"}):Xx(this,t),this.undoManager.reset(),this.setDirty(!1),this.nodeChanged()}isDirty(){return!this.isNotDirty}setDirty(t){const e=!this.isNotDirty;this.isNotDirty=!t,t&&t!==e&&this.dispatch("dirty")}getContainer(){const t=this;return t.container||(t.container=t.editorContainer||hO.get(t.id+"_parent")),t.container}getContentAreaContainer(){return this.contentAreaContainer}getElement(){return this.targetElm||(this.targetElm=hO.get(this.id)),this.targetElm}getWin(){const t=this;if(!t.contentWindow){const e=t.iframeElement;e&&(t.contentWindow=e.contentWindow)}return t.contentWindow}getDoc(){const t=this;if(!t.contentDocument){const e=t.getWin();e&&(t.contentDocument=e.document)}return t.contentDocument}getBody(){var t,e;const n=this.getDoc();return null!==(e=null!==(t=this.bodyElement)&&void 0!==t?t:null==n?void 0:n.body)&&void 0!==e?e:null}convertURL(t,e,n){const i=this,r=i.options.get,o=Gc(i);if(_(o))return o.call(i,t,n,!0,e);if(!r("convert_urls")||"link"===n||p(n)&&"LINK"===n.nodeName||0===t.indexOf("file:")||0===t.length)return t;const a=new Yb(t);return"http"!==a.protocol&&"https"!==a.protocol&&""!==a.protocol?t:r("relative_urls")?i.documentBaseURI.toRelative(t):t=i.documentBaseURI.toAbsolute(t,r("remove_script_host"))}addVisual(t){((t,e)=>{((t,e)=>{Rx(t).editor.addVisual(e)})(this,e)})(0,t)}setEditableRoot(t){((t,e)=>{t._editableRoot!==e&&(t._editableRoot=e,t.readonly||(t.getBody().contentEditable=String(t.hasEditableRoot()),t.nodeChanged()),((t,e)=>{t.dispatch("EditableRootStateChange",{state:e})})(t,e))})(this,t)}hasEditableRoot(){return this._editableRoot}remove(){(t=>{if(!t.removed){const{_selectionOverrides:e,editorUpload:n}=t,i=t.getBody(),r=t.getElement();i&&t.save({is_removing:!0}),t.removed=!0,t.unbindAllNativeEvents(),t.hasHiddenInput&&x(null==r?void 0:r.nextSibling)&&Jx.remove(r.nextSibling),(t=>{t.dispatch("remove")})(t),t.editorManager.remove(t),!t.inline&&i&&(t=>{Jx.setStyle(t.id,"display",t.orgDisplay)})(t),(t=>{t.dispatch("detach")})(t),Jx.remove(t.getContainer()),t_(e),t_(n),t.destroy()}})(this)}destroy(t){((t,e)=>{const{selection:n,dom:i}=t;t.destroyed||(e||t.removed?(e||(t.editorManager.off("beforeunload",t._beforeUnload),t.theme&&t.theme.destroy&&t.theme.destroy(),t_(n),t_(i)),(t=>{const e=t.formElement;e&&(e._mceOldSubmit&&(e.submit=e._mceOldSubmit,delete e._mceOldSubmit),Jx.unbind(e,"submit reset",t.formEventDelegate))})(t),(t=>{const e=t;e.contentAreaContainer=e.formElement=e.container=e.editorContainer=null,e.bodyElement=e.contentDocument=e.contentWindow=null,e.iframeElement=e.targetElm=null;const n=t.selection;if(n){const t=n.dom;e.selection=n.win=n.dom=t.doc=null}})(t),t.destroyed=!0):t.remove())})(this,t)}uploadImages(){return this.editorUpload.uploadImages()}_scanForImages(){return this.editorUpload.scanForImages()}}const gO=ia.DOM,mO=Pe.each;let vO,yO=!1,bO=[];const xO=t=>{const e=t.type;mO(CO.get(),(n=>{switch(e){case"scroll":n.dispatch("ScrollWindow",t);break;case"resize":n.dispatch("ResizeWindow",t)}}))},_O=t=>{if(t!==yO){const e=ia.DOM;t?(e.bind(window,"resize",xO),e.bind(window,"scroll",xO)):(e.unbind(window,"resize",xO),e.unbind(window,"scroll",xO)),yO=t}},wO=t=>{const e=bO;return bO=U(bO,(e=>t!==e)),CO.activeEditor===t&&(CO.activeEditor=bO.length>0?bO[0]:null),CO.focusedEditor===t&&(CO.focusedEditor=null),e.length!==bO.length},SO="CSS1Compat"!==document.compatMode,CO={...XE,baseURI:null,baseURL:null,defaultOptions:{},documentBaseURL:null,suffix:null,majorVersion:"7",minorVersion:"0.0",releaseDate:"2024-03-20",i18n:ua,activeEditor:null,focusedEditor:null,setup(){const t=this;let e="",n="",i=Yb.getDocumentBaseUrl(document.location);/^[^:]+:\/\/\/?[^\/]+\//.test(i)&&(i=i.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(i)||(i+="/"));const r=window.tinymce||window.tinyMCEPreInit;if(r)e=r.base||r.baseURL,n=r.suffix;else{const t=document.getElementsByTagName("script");for(let i=0;i<t.length;i++){const r=t[i].src||"";if(""===r)continue;const o=r.substring(r.lastIndexOf("/"));if(/tinymce(\.full|\.jquery|)(\.min|\.dev|)\.js/.test(r)){-1!==o.indexOf(".min")&&(n=".min"),e=r.substring(0,r.lastIndexOf("/"));break}}if(!e&&document.currentScript){const t=document.currentScript.src;-1!==t.indexOf(".min")&&(n=".min"),e=t.substring(0,t.lastIndexOf("/"))}}var o;t.baseURL=new Yb(i).toAbsolute(e),t.documentBaseURL=i,t.baseURI=new Yb(t.baseURL),t.suffix=n,(o=t).on("AddEditor",E(kf,o)),o.on("RemoveEditor",E(Af,o))},overrideDefaults(t){const e=t.base_url;e&&this._setBaseUrl(e);const n=t.suffix;n&&(this.suffix=n),this.defaultOptions=t;const i=t.plugin_base_urls;void 0!==i&&gt(i,((t,e)=>{ha.PluginManager.urls[e]=t}))},init(t){const e=this;let n;const i=Pe.makeMap("area base basefont br col frame hr img input isindex link meta param embed source wbr track colgroup option table tbody tfoot thead tr th td script noscript style textarea video audio iframe object menu"," ");let r=t=>{n=t};const o=()=>{let n=0;const a=[];let s;gO.unbind(window,"ready",o),(n=>{const i=t.onpageload;i&&i.apply(e,[])})(),s=dt((t=>Ee.browser.isIE()||Ee.browser.isEdge()?(v_("TinyMCE does not support the browser you are using. For a list of supported browsers please see: https://www.tiny.cloud/docs/tinymce/6/support/#supportedwebbrowsers"),[]):SO?(v_("Failed to initialize the editor as the document is not in standards mode. TinyMCE requires standards mode."),[]):d(t.selector)?gO.select(t.selector):x(t.target)?[t.target]:[])(t)),Pe.each(s,(t=>{var n;(n=e.get(t.id))&&n.initialized&&!(n.getContainer()||n.getBody()).parentNode&&(wO(n),n.unbindAllNativeEvents(),n.destroy(!0),n.removed=!0)})),s=Pe.grep(s,(t=>!e.get(t.id))),0===s.length?r([]):mO(s,(o=>{((t,e)=>t.inline&&e.tagName.toLowerCase()in i)(t,o)?v_("Could not initialize inline editor on invalid inline target element",o):((t,i,o)=>{const l=new fO(t,i,e);a.push(l),l.on("init",(()=>{++n===s.length&&r(a)})),l.targetElm=l.targetElm||o,l.render()})((t=>{let e=t.id;return e||(e=St(t,"name").filter((t=>!gO.get(t))).getOrThunk(gO.uniqueId),t.setAttribute("id",e)),e})(o),t,o)}))};return gO.bind(window,"ready",o),new Promise((t=>{n?t(n):r=e=>{t(e)}}))},get(t){return 0===arguments.length?bO.slice(0):d(t)?Q(bO,(e=>e.id===t)).getOr(null):w(t)&&bO[t]?bO[t]:null},add(t){const e=this,n=e.get(t.id);return n===t||(null===n&&bO.push(t),_O(!0),e.activeEditor=t,e.dispatch("AddEditor",{editor:t}),vO||(vO=t=>{const n=e.dispatch("BeforeUnload");if(n.returnValue)return t.preventDefault(),t.returnValue=n.returnValue,n.returnValue},window.addEventListener("beforeunload",vO))),t},createEditor(t,e){return this.add(new fO(t,e,this))},remove(t){const e=this;let n;if(t){if(!d(t))return n=t,m(e.get(n.id))?null:(wO(n)&&e.dispatch("RemoveEditor",{editor:n}),0===bO.length&&window.removeEventListener("beforeunload",vO),n.remove(),_O(bO.length>0),n);mO(gO.select(t),(t=>{n=e.get(t.id),n&&e.remove(n)}))}else for(let t=bO.length-1;t>=0;t--)e.remove(bO[t])},execCommand(t,e,n){var i;const r=this,o=p(n)?null!==(i=n.id)&&void 0!==i?i:n.index:n;switch(t){case"mceAddEditor":if(!r.get(o)){const t=n.options;new fO(o,t,r).render()}return!0;case"mceRemoveEditor":{const t=r.get(o);return t&&t.remove(),!0}case"mceToggleEditor":{const t=r.get(o);return t?(t.isHidden()?t.show():t.hide(),!0):(r.execCommand("mceAddEditor",!1,n),!0)}}return!!r.activeEditor&&r.activeEditor.execCommand(t,e,n)},triggerSave:()=>{mO(bO,(t=>{t.save()}))},addI18n:(t,e)=>{ua.add(t,e)},translate:t=>ua.translate(t),setActive(t){const e=this.activeEditor;this.activeEditor!==t&&(e&&e.dispatch("deactivate",{relatedTarget:t}),t.dispatch("activate",{relatedTarget:e})),this.activeEditor=t},_setBaseUrl(t){this.baseURL=new Yb(this.documentBaseURL).toAbsolute(t.replace(/\/+$/,"")),this.baseURI=new Yb(this.baseURL)}};CO.setup();const kO=(()=>{const t=pa();return{FakeClipboardItem:t=>({items:t,types:pt(t),getType:e=>St(t,e).getOrUndefined()}),write:e=>{t.set(e)},read:()=>t.get().getOrUndefined(),clear:t.clear}})(),AO=Math.min,MO=Math.max,TO=Math.round,IO=(t,e,n)=>{let i=e.x,r=e.y;const o=t.w,a=t.h,s=e.w,l=e.h,c=(n||"").split("");return"b"===c[0]&&(r+=l),"r"===c[1]&&(i+=s),"c"===c[0]&&(r+=TO(l/2)),"c"===c[1]&&(i+=TO(s/2)),"b"===c[3]&&(r-=a),"r"===c[4]&&(i-=o),"c"===c[3]&&(r-=TO(a/2)),"c"===c[4]&&(i-=TO(o/2)),EO(i,r,o,a)},EO=(t,e,n,i)=>({x:t,y:e,w:n,h:i}),OO={inflate:(t,e,n)=>EO(t.x-e,t.y-n,t.w+2*e,t.h+2*n),relativePosition:IO,findBestRelativePosition:(t,e,n,i)=>{for(let r=0;r<i.length;r++){const o=IO(t,e,i[r]);if(o.x>=n.x&&o.x+o.w<=n.w+n.x&&o.y>=n.y&&o.y+o.h<=n.h+n.y)return i[r]}return null},intersect:(t,e)=>{const n=MO(t.x,e.x),i=MO(t.y,e.y),r=AO(t.x+t.w,e.x+e.w),o=AO(t.y+t.h,e.y+e.h);return r-n<0||o-i<0?null:EO(n,i,r-n,o-i)},clamp:(t,e,n)=>{let i=t.x,r=t.y,o=t.x+t.w,a=t.y+t.h;const s=e.x+e.w,l=e.y+e.h,c=MO(0,e.x-i),u=MO(0,e.y-r),h=MO(0,o-s),d=MO(0,a-l);return i+=c,r+=u,n&&(o+=c,a+=u,i-=h,r-=d),o-=h,a-=d,EO(i,r,o-i,a-r)},create:EO,fromClientRect:t=>EO(t.left,t.top,t.width,t.height)},DO=(()=>{const t={},e={},n={};return{load:(n,i)=>{const r=`Script at URL "${i}" failed to load`,o=`Script at URL "${i}" did not call \`tinymce.Resource.add('${n}', data)\` within 1 second`;if(void 0!==t[n])return t[n];{const a=new Promise(((t,a)=>{const s=((t,e,n=1e3)=>{let i=!1,r=null;const o=t=>(...e)=>{i||(i=!0,null!==r&&(clearTimeout(r),r=null),t.apply(null,e))},a=o(t),s=o(e);return{start:(...t)=>{i||null!==r||(r=setTimeout((()=>s.apply(null,t)),n))},resolve:a,reject:s}})(t,a);e[n]=s.resolve,oa.ScriptLoader.loadScript(i).then((()=>s.start(o)),(()=>s.reject(r)))}));return t[n]=a,a}},add:(i,r)=>{void 0!==e[i]&&(e[i](r),delete e[i]),t[i]=Promise.resolve(r),n[i]=r},has:t=>t in n,get:t=>n[t],unload:e=>{delete t[e],delete n[e]}}})();let LO;try{const t="__storage_test__";LO=window.localStorage,LO.setItem(t,t),LO.removeItem(t)}catch(t){LO=(()=>{let t={},e=[];const n={getItem:e=>t[e]||null,setItem:(n,i)=>{e.push(n),t[n]=String(i)},key:t=>e[t],removeItem:n=>{e=e.filter((t=>t===n)),delete t[n]},clear:()=>{e=[],t={}},length:0};return Object.defineProperty(n,"length",{get:()=>e.length,configurable:!1,enumerable:!1}),n})()}const PO={geom:{Rect:OO},util:{Delay:bf,Tools:Pe,VK:lp,URI:Yb,EventDispatcher:jE,Observable:XE,I18n:ua,LocalStorage:LO,ImageUploader:t=>{const e=x_(),n=S_(t,e);return{upload:(e,i=!0)=>n.upload(e,i?w_(t):void 0)}}},dom:{EventUtils:qo,TreeWalker:Fi,TextSeeker:La,DOMUtils:ia,ScriptLoader:oa,RangeUtils:Fp,Serializer:Yx,StyleSheetLoader:Gr,ControlSelection:pp,BookmarkManager:Jd,Selection:Wx,Event:qo.Event},html:{Styles:zo,Entities:uo,Node:Wf,Schema:To,DomParser:ix,Writer:og,Serializer:ag},Env:Ee,AddOnManager:ha,Annotator:Qd,Formatter:N_,UndoManager:B_,EditorCommands:NE,WindowManager:d_,NotificationManager:c_,EditorObservable:KE,Shortcuts:cO,Editor:fO,FocusManager:yf,EditorManager:CO,DOM:ia.DOM,ScriptLoader:oa.ScriptLoader,PluginManager:u_,ThemeManager:h_,ModelManager:n_,IconManager:e_,Resource:DO,FakeClipboard:kO,trim:Pe.trim,isArray:Pe.isArray,is:Pe.is,toArray:Pe.toArray,makeMap:Pe.makeMap,each:Pe.each,map:Pe.map,grep:Pe.grep,inArray:Pe.inArray,extend:Pe.extend,walk:Pe.walk,resolve:Pe.resolve,explode:Pe.explode,_addCacheSuffix:Pe._addCacheSuffix},NO=Pe.extend(CO,PO);(t=>{window.tinymce=t,window.tinyMCE=t})(NO),(t=>{if("object"==typeof module)try{module.exports=t}catch(t){}})(NO)}(),function(){"use strict";function t(t,n,i){fetch(n,{method:"POST",body:i,headers:{"X-Requested-With":"XMLHttpRequest"}}).then((t=>{if(t.ok)return t.text();throw new Error(`${t.status} ${t.statusText} ${t.url}`)})).then((e=>{if(t.querySelector(".loading").classList.remove("d-block"),"OK"!=e.trim())throw new Error(e||"Form submission failed and no error message returned from: "+n);t.querySelector(".sent-message").classList.add("d-block"),t.reset()})).catch((n=>{e(t,n)}))}function e(t,e){t.querySelector(".loading").classList.remove("d-block"),t.querySelector(".error-message").innerHTML=e,t.querySelector(".error-message").classList.add("d-block")}document.querySelectorAll(".php-email-form").forEach((function(n){n.addEventListener("submit",(function(n){n.preventDefault();let i=this,r=i.getAttribute("action"),o=i.getAttribute("data-recaptcha-site-key");if(!r)return void e(i,"The form action property is not set!");i.querySelector(".loading").classList.add("d-block"),i.querySelector(".error-message").classList.remove("d-block"),i.querySelector(".sent-message").classList.remove("d-block");let a=new FormData(i);o?"undefined"!=typeof grecaptcha?grecaptcha.ready((function(){try{grecaptcha.execute(o,{action:"php_email_form_submit"}).then((e=>{a.set("recaptcha-response",e),t(i,r,a)}))}catch(t){e(i,t)}})):e(i,"The reCaptcha javascript API url is not loaded!"):t(i,r,a)}))}))}(),function(){"use strict";const t=(t,e=!1)=>(t=t.trim(),e?[...document.querySelectorAll(t)]:document.querySelector(t)),e=(e,n,i,r=!1)=>{r?t(n,r).forEach((t=>t.addEventListener(e,i))):t(n,r).addEventListener(e,i)},n=(t,e)=>{t.addEventListener("scroll",e)};t(".toggle-sidebar-btn")&&e("click",".toggle-sidebar-btn",(function(e){t("body").classList.toggle("toggle-sidebar")})),t(".search-bar-toggle")&&e("click",".search-bar-toggle",(function(e){t(".search-bar").classList.toggle("search-bar-show")}));let i=t("#navbar .scrollto",!0);const r=()=>{let e=window.scrollY+200;i.forEach((n=>{if(!n.hash)return;let i=t(n.hash);i&&(e>=i.offsetTop&&e<=i.offsetTop+i.offsetHeight?n.classList.add("active"):n.classList.remove("active"))}))};window.addEventListener("load",r),n(document,r);let o=t("#header");if(o){const t=()=>{window.scrollY>100?o.classList.add("header-scrolled"):o.classList.remove("header-scrolled")};window.addEventListener("load",t),n(document,t)}let a=t(".back-to-top");if(a){const t=()=>{window.scrollY>100?a.classList.add("active"):a.classList.remove("active")};window.addEventListener("load",t),n(document,t)}[].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]')).map((function(t){return new bootstrap.Tooltip(t)}));t(".quill-editor-default")&&new Quill(".quill-editor-default",{theme:"snow"}),t(".quill-editor-bubble")&&new Quill(".quill-editor-bubble",{theme:"bubble"}),t(".quill-editor-full")&&new Quill(".quill-editor-full",{modules:{toolbar:[[{font:[]},{size:[]}],["bold","italic","underline","strike"],[{color:[]},{background:[]}],[{script:"super"},{script:"sub"}],[{list:"ordered"},{list:"bullet"},{indent:"-1"},{indent:"+1"}],["direction",{align:[]}],["link","image","video"],["clean"]]},theme:"snow"});const s=window.matchMedia("(prefers-color-scheme: dark)").matches;window.matchMedia("(max-width: 1023.5px)").matches;tinymce.init({selector:"textarea.tinymce-editor",plugins:"preview importcss searchreplace autolink autosave save directionality code visualblocks visualchars fullscreen image link media codesample table charmap pagebreak nonbreaking anchor insertdatetime advlist lists wordcount help charmap quickbars emoticons accordion",editimage_cors_hosts:["picsum.photos"],menubar:"file edit view insert format tools table help",toolbar:"undo redo | accordion accordionremove | blocks fontfamily fontsize | bold italic underline strikethrough | align numlist bullist | link image | table media | lineheight outdent indent| forecolor backcolor removeformat | charmap emoticons | code fullscreen preview | save print | pagebreak anchor codesample | ltr rtl",autosave_ask_before_unload:!0,autosave_interval:"30s",autosave_prefix:"{path}{query}-{id}-",autosave_restore_when_empty:!1,autosave_retention:"2m",image_advtab:!0,link_list:[{title:"My page 1",value:"https://www.tiny.cloud"},{title:"My page 2",value:"http://www.moxiecode.com"}],image_list:[{title:"My page 1",value:"https://www.tiny.cloud"},{title:"My page 2",value:"http://www.moxiecode.com"}],image_class_list:[{title:"None",value:""},{title:"Some class",value:"class-name"}],importcss_append:!0,file_picker_callback:(t,e,n)=>{"file"===n.filetype&&t("https://www.google.com/logos/google.jpg",{text:"My text"}),"image"===n.filetype&&t("https://www.google.com/logos/google.jpg",{alt:"My alt text"}),"media"===n.filetype&&t("movie.mp4",{source2:"alt.ogg",poster:"https://www.google.com/logos/google.jpg"})},height:600,image_caption:!0,quickbars_selection_toolbar:"bold italic | quicklink h2 h3 blockquote quickimage quicktable",noneditable_class:"mceNonEditable",toolbar_mode:"sliding",contextmenu:"link image table",skin:s?"oxide-dark":"oxide",content_css:s?"dark":"default",content_style:"body { font-family:Helvetica,Arial,sans-serif; font-size:16px }"});var l=document.querySelectorAll(".needs-validation");Array.prototype.slice.call(l).forEach((function(t){t.addEventListener("submit",(function(e){t.checkValidity()||(e.preventDefault(),e.stopPropagation()),t.classList.add("was-validated")}),!1)}));t(".datatable",!0).forEach((t=>{new simpleDatatables.DataTable(t,{perPageSelect:[5,10,15,["All",-1]],columns:[{select:2,sortSequence:["desc","asc"]},{select:3,sortSequence:["desc"]},{select:4,cellClass:"green",headerClass:"red"}]})}));const c=t("#main");c&&setTimeout((()=>{new ResizeObserver((function(){t(".echart",!0).forEach((t=>{echarts.getInstanceByDom(t).resize()}))})).observe(c)}),200)}();