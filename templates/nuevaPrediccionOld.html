{% load static %}
<!DOCTYPE html>
<html data-bs-theme="light" lang="en">
<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0, shrink-to-fit=no" />
    <title>Dashboard - NiceAdmin Bootstrap Template</title>
    <link rel="stylesheet" href="{% static 'assets/bootstrap/css/bootstrap.min.css' %}" />
    <link rel="stylesheet" href="{% static 'assets/css/styles.min.css' %}" />
</head>
<body>
    <header class="d-flex align-items-center header fixed-top" id="header">
      <div class="d-flex justify-content-between align-items-center">
        <a class="d-flex align-items-center logo" href="index.html"
          ><span
            class="d-none d-lg-block"
            style="color: rgb(0, 0, 0); font-family: 'Open Sans', sans-serif"
            >VITA -&nbsp;</span
          ><img
            src="assets/img/logo.png?h=0cc0f51f03610e96229a86baca51d00c"
            alt="" /></a
        ><i class="bi bi-list toggle-sidebar-btn"></i>
      </div>
      <div class="search-bar">
        <form
          class="d-flex align-items-center search-form"
          method="POST"
          action="#"
        >
          <input
            type="text"
            name="query"
            placeholder="Search"
            title="Enter search keyword"
          /><button type="submit" title="Search">
            <i class="bi bi-search"></i>
          </button>
        </form>
      </div>
      <nav class="ms-auto header-nav">
        <ul class="d-flex align-items-center">
          <li class="d-block d-lg-none nav-item">
            <a class="nav-link nav-icon search-bar-toggle" href="#"
              ><i class="bi bi-search"></i
            ></a>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link nav-icon" href="#" data-bs-toggle="dropdown"
              ><i class="bi bi-bell"></i
              ><span class="badge bg-primary badge-number">4</span></a
            >
            <ul
              class="dropdown-menu dropdown-menu-end dropdown-menu-arrow notifications"
            >
              <li class="dropdown-header">
                You have 4 new notifications
                <span class="badge rounded-pill bg-primary p-2 ms-2"
                  >View all</span
                >
              </li>
              <li><hr class="dropdown-divider" /></li>
              <li class="notification-item">
                <i class="text-warning bi bi-exclamation-circle"></i>
                <div>
                  <h4>Lorem Ipsum</h4>
                  <p>Quae dolorem earum veritatis oditseno</p>
                  <p>30 min. ago</p>
                </div>
              </li>
              <li><hr class="dropdown-divider" /></li>
              <li class="notification-item">
                <i class="text-danger bi bi-x-circle"></i>
                <div>
                  <h4>Atque rerum nesciunt</h4>
                  <p>Quae dolorem earum veritatis oditseno</p>
                  <p>1 hr. ago</p>
                </div>
              </li>
              <li><hr class="dropdown-divider" /></li>
              <li class="notification-item">
                <i class="text-success bi bi-check-circle"></i>
                <div>
                  <h4>Sit rerum fuga</h4>
                  <p>Quae dolorem earum veritatis oditseno</p>
                  <p>2 hrs. ago</p>
                </div>
              </li>
              <li><hr class="dropdown-divider" /></li>
              <li class="notification-item">
                <i class="text-primary bi bi-info-circle"></i>
                <div>
                  <h4>Dicta reprehenderit</h4>
                  <p>Quae dolorem earum veritatis oditseno</p>
                  <p>4 hrs. ago</p>
                </div>
              </li>
              <li><hr class="dropdown-divider" /></li>
              <li class="dropdown-footer">
                <a href="#">Show all notifications</a>
              </li>
            </ul>
          </li>
        </ul>
      </nav>
    </header>
    <aside id="sidebar" class="sidebar">
      <ul class="sidebar-nav" id="sidebar-nav">
        <!-- Dashboard -->
        <li class="nav-item">
          <a class="nav-link" href="{% url 'dashboard' %}">
            <i class="bi bi-grid"></i>
            <span>Dashboard</span>
          </a>
        </li>
        <!-- Pacientes -->
        <li class="nav-item">
          <a class="nav-link collapsed" data-bs-target="#pacientes-nav" data-bs-toggle="collapse" href="#">
            <i class="bi bi-menu-button-wide"></i>
            <span>Pacientes</span>
            <i class="ms-auto bi bi-chevron-down"></i>
          </a>
          <ul id="pacientes-nav" class="nav-content collapse" data-bs-parent="#sidebar-nav">
            <li>
              <a href="{% url 'nuevo_paciente' %}">
                <i class="bi bi-circle"></i>
                <span>Nuevo Paciente</span>
              </a>
            </li>
            <li>
              <a href="{% url 'historial_pacientes' %}">
                <i class="bi bi-circle"></i>
                <span>Historial de Pacientes</span>
              </a>
            </li>
          </ul>
        </li>
        <!-- Predicciones -->
        <li class="nav-item">
          <a class="nav-link collapsed" data-bs-target="#predicciones-nav" data-bs-toggle="collapse" href="#">
            <i class="bi bi-menu-button-wide"></i>
            <span>Predicciones</span>
            <i class="ms-auto bi bi-chevron-down"></i>
          </a>
          <ul id="predicciones-nav" class="nav-content collapse" data-bs-parent="#sidebar-nav">
            <li>
              <a href="{% url 'nueva_prediccion' %}">
                <i class="bi bi-circle"></i>
                <span>Nueva Predicción</span>
              </a>
            </li>
            <li>
              <a href="{% url 'historial_predicciones' %}">
                <i class="bi bi-circle"></i>
                <span>Historial de predicciones</span>
              </a>
            </li>
          </ul>
        </li>
        <!-- Sistema -->
        <li class="nav-heading">Sistema</li>
        <li class="nav-item">
          <a class="nav-link collapsed" href="{% url 'profile' %}">
            <i class="bi bi-person"></i><span>Profile</span>
        </a>
        </li>
        <li class="nav-item">
          <a class="nav-link collapsed" href="{% url 'faq' %}">
              <i class="bi bi-question-circle"></i>
              <span>F.A.Q</span>
          </a>
      </li>
      <li class="nav-item">
          <a class="nav-link collapsed" href="{% url 'contact' %}">
              <i class="bi bi-envelope"></i>
              <span>Contact</span>
          </a>
      </li>
      </ul>
    </aside>    
    <main id="main" class="main">
      <div class="pagetitle">
        <h1>Pacientes</h1>
        <nav>
          <ol class="breadcrumb">
            <li class="breadcrumb-item">
              <a href="index.html"><span>Home</span></a>
            </li>
            <li class="breadcrumb-item active"><span>Nuevo Paciente</span></li>
          </ol>
        </nav>
      </div>
      <section class="section dashboard">
        <div class="container">
          <div class="row">
            <div class="col-md-6 col-xxl-12">
              <div class="card">
                <div class="card-body">
                  <h6 class="text-muted card-subtitle mb-2">
                    Seleccione el paciente&nbsp;
                  </h6>
                  <div>
                    <table class="table table-hover">
                      <thead>
                        <tr>
                          <th scope="col">#</th>
                          <th scope="col">Edad</th>
                          <th scope="col">Sexo</th>
                          <th scope="col">IMC</th>
                          <th scope="col">Cintura</th>
                          <!-- Añade aquí más columnas según sea necesario -->
                        </tr>
                      </thead>
                      <tbody>
                        {% for paciente in pacientes %}
                        <tr class="clickable-row" data-id="{{ paciente.id }}" onclick="seleccionarPaciente(this)">
                          <td scope="row">{{ paciente.id }}</td>
                          <td>{{ paciente.edad }}</td>
                          <td>{{ paciente.sexo }}</td>
                          <td>{{ paciente.imc }}</td>
                          <td>{{ paciente.cintCad }}</td>
                          <!-- Añade aquí más datos del paciente si es necesario -->
                        </tr>
                        {% endfor %}
                      </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
            <div class="col-md-12 col-xxl-12">
              <div class="card">
                  <div class="card-body">
                      <h5 class="card-title">Paciente seleccionado:</h5>
                      <button
                      class="btn btn-outline-secondary"
                      id="expand"
                      type="button"
                    >
                      Expandir
                    </button>
                          <div class="row">
                              <div class="col-md-2">
                                  <ul class="list-group">
                                      <li class="list-group-item"><span> Cedula: </span><label class="form-label">Label</label></li>
                                      <li class="list-group-item"></i><span> Sexo: </span><label class="form-label">Label</label></li>
                                      <li class="list-group-item"></i><span> Edad: </span><label class="form-label">Label</label></li>
                                  </ul>
                              </div>
                              <div class="col-md-2">
                                <ul class="list-group">
                                    <li class="list-group-item"><span> IMC: </span><label class="form-label">Label</label></li>
                                    <li class="list-group-item"><span> Cintura: </span><label class="form-label">Label</label></li>
                                    <li class="list-group-item"></i><span> Grasa C.: </span><label class="form-label">Label</label></li>
                                </ul>
                            </div>
                              <div class="col-md-2">
                                  <ul class="list-group">
                                    <li class="list-group-item"></i><span> Cigarrilos: </span><label class="form-label">Label</label></li>
                                    <li class="list-group-item"><span> Piel: </span><label class="form-label">Label</label></li>
                                    <li class="list-group-item"><span> Masa M.: </span><label class="form-label">Label</label></li>
                                  </ul>
                              </div>
                              <div class="col-md-3">
                                <ul class="list-group">
                                  <li class="list-group-item"></i><span>Act Física: </span><label class="form-label">Label</label></li>
                                  <li class="list-group-item"></i><span> Protector Solar: </span><label class="form-label">Label</label></li>
                                  <li class="list-group-item"><span> Exposicion días: </span><label class="form-label">Label</label></li>
                             </div>
                            <div class="col-md-3">
                              <ul class="list-group">
                                <li class="list-group-item"><span> Exposicion minutos: </span><label class="form-label">Label</label></li>
                                <li class="list-group-item"></i><span> Vitamina D: </span><label class="form-label">Label</label></li>
                              </ul>
                          </div>
                          </div>
                     
                  </div>
              </div>
          </div>
          </div>
          </div>
        </div>
        <!-- Start: 1 Row 4 Columns -->
        <div class="container">
          <div class="row">
            <div class="col">
              <div class="card">
                <div class="card-body">
                  <h5 class="card-title">
                    Algoritmos de aprendizaje automático para la predicción de
                    pacientes con déficit de vitamina D
                  </h5>
                  <ul
                    class="nav nav-tabs d-flex nav-tabs-bordered"
                    id="borderedTabJustified"
                    role="tablist"
                  >
                    <li class="nav-item flex-fill" role="presentation">
                      <button
                        class="active text-capitalize fs-5 nav-link w-100"
                        id="NavRF"
                        data-bs-toggle="tab"
                        data-bs-target="#RF"
                        type="button"
                        role="tab"
                        aria-controls="home"
                        aria-selected="true"
                      >
                        Random forest
                      </button>
                    </li>
                    <li class="nav-item flex-fill" role="presentation">
                      <button
                        class="fs-5 nav-link w-100"
                        id="NavSVM"
                        data-bs-toggle="tab"
                        data-bs-target="#SVM"
                        type="button"
                        role="tab"
                        aria-controls="profile"
                        aria-selected="false"
                      >
                        Support Vector Machine
                      </button>
                    </li>
                    <li class="nav-item flex-fill" role="presentation">
                      <button
                        class="fs-5 nav-link w-100"
                        id="NavRL"
                        data-bs-toggle="tab"
                        data-bs-target="#RL"
                        type="button"
                        role="tab"
                        aria-controls="contact"
                        aria-selected="false"
                      >
                        Regresión logística
                      </button>
                    </li>
                  </ul>
                  <div
                    class="tab-content pt-2"
                    id="borderedTabJustifiedContent"
                  >
                    <div
                      id="RD"
                      class="tab-pane fade show active"
                      role="tabpanel"
                      aria-labelledby="home-tab"
                    >
                      <h5 class="text-success-emphasis">
                        Predicción de pacientes con déficit de Vitamina D usando
                        Random Forest
                      </h5>
                      <div class="row">
                        <div class="col-xxl-12">
                          <label class="form-label">El paciente&nbsp;</label
                          ><label
                            class="form-label fs-5 text-danger"
                            id="respuesta"
                            >Si&nbsp;</label
                          ><label class="form-label"
                            ><br />registra déficit de vitamina D con
                            un&nbsp;&nbsp;</label
                          ><label
                            class="form-label fs-5 text-success"
                            id="probabilidad"
                            >70%</label
                          ><label class="form-label"
                            >&nbsp; de probabilidad</label
                          >
                        </div>
                      </div>
                      <div
                        class="row text-center"
                        style="margin-top: 10px; margin-bottom: 10px"
                      >
                        <div class="col-md-4 col-xxl-1 align-self-end">
                          <h6 class="text-center text-success">Bajo</h6>
                        </div>
                        <div
                          class="col-md-4 col-xxl-10 text-center align-self-center"
                        >
                          <div class="text-center progress mt-3">
                            <div
                              class="bg-warning progress-bar progress-bar-striped"
                              role="progressbar"
                              style="width: 75%"
                              aria-valuenow="75"
                              aria-valuemin="0"
                              aria-valuemax="100"
                            ></div>
                          </div>
                        </div>
                        <div class="col-md-4 col-xxl-1 align-self-end">
                          <h6 class="text-center text-danger d-xxl-flex">
                            Alto
                          </h6>
                        </div>
                      </div>
                      <div class="row">
                        <div class="col-xxl-12" style="margin-top: 10px">
                          <div class="card">
                            <div class="card-body">
                              <h6 class="card-title">Factores de riesgo</h6>
                              <canvas
                                id="barChart"
                                style="max-height: 400px"
                              ></canvas>
                              <script>
                                document.addEventListener(
                                  "DOMContentLoaded",
                                  () => {
                                    new Chart(
                                      document.querySelector("#barChart"),
                                      {
                                        type: "bar",
                                        data: {
                                          labels: [
                                            "January",
                                            "February",
                                            "March",
                                            "April",
                                            "May",
                                            "June",
                                            "July",
                                          ],
                                          datasets: [
                                            {
                                              label: "Bar Chart",
                                              data: [
                                                65, 59, 80, 81, 56, 55, 40,
                                              ],
                                              backgroundColor: [
                                                "rgba(255, 99, 132, 0.2)",
                                                "rgba(255, 159, 64, 0.2)",
                                                "rgba(255, 205, 86, 0.2)",
                                                "rgba(75, 192, 192, 0.2)",
                                                "rgba(54, 162, 235, 0.2)",
                                                "rgba(153, 102, 255, 0.2)",
                                                "rgba(201, 203, 207, 0.2)",
                                              ],
                                              borderColor: [
                                                "rgb(255, 99, 132)",
                                                "rgb(255, 159, 64)",
                                                "rgb(255, 205, 86)",
                                                "rgb(75, 192, 192)",
                                                "rgb(54, 162, 235)",
                                                "rgb(153, 102, 255)",
                                                "rgb(201, 203, 207)",
                                              ],
                                              borderWidth: 1,
                                            },
                                          ],
                                        },
                                        options: {
                                          scales: {
                                            y: {
                                              beginAtZero: true,
                                            },
                                          },
                                        },
                                      }
                                    );
                                  }
                                );
                              </script>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                    <div
                      id="SVM"
                      class="tab-pane fade"
                      role="tabpanel"
                      aria-labelledby="profile-tab"
                    >
                      <span>
                        Nesciunt totam et. Consequuntur magnam aliquid eos nulla
                        dolor iure eos quia. Accusantium distinctio omnis et
                        atque fugiat. Itaque doloremque aliquid sint quasi quia
                        distinctio similique. Voluptate nihil recusandae
                        mollitia dolores. Ut laboriosam voluptatum dicta.
                      </span>
                    </div>
                    <div
                      id="RL"
                      class="tab-pane fade"
                      role="tabpanel"
                      aria-labelledby="contact-tab"
                    >
                      <span>
                        Saepe animi et soluta ad odit soluta sunt. Nihil quos
                        omnis animi debitis cumque. Accusantium quibusdam
                        perspiciatis qui qui omnis magnam. Officiis accusamus
                        impedit molestias nostrum veniam. Qui amet ipsum iure.
                        Dignissimos fuga tempore dolor.
                      </span>
                    </div>
                    <div class="row">
                      <div class="col-xxl-12">
                        <label class="form-label"
                          ><br />La presición de la predicción es
                          del&nbsp;</label
                        ><label
                          class="form-label fs-5 text-success"
                          id="probabilidad-1"
                          >88%</label
                        >
                      </div>
                    </div>
                    <div class="row">
                      <div class="col">
                        <div>
                          <table class="table table-striped">
                            <thead>
                              <tr>
                                <th scope="col">Clase</th>
                                <th scope="col">Presición</th>
                                <th scope="col">Recall</th>
                                <th scope="col">F1</th>
                                <th scope="col">Support</th>
                              </tr>
                            </thead>
                            <tbody>
                              <tr>
                                <td scope="row">Suficiencia</td>
                                <td>0.1</td>
                                <td>0.2</td>
                                <td>0.22</td>
                                <td>33</td>
                              </tr>
                              <tr>
                                <td scope="row">Deficiencia</td>
                                <td>0.88</td>
                                <td>1.00</td>
                                <td>0.93</td>
                                <td>236</td>
                              </tr>
                            </tbody>
                          </table>
                        </div>
                      </div>
                      <div class="col-md-6 col-xxl-4">
                        <div class="card">
                          <div class="card-body">
                            <h5 class="card-title">Vertical Bar Chart</h5>
                            <div
                              id="verticalBarChart"
                              style="min-height: 400px"
                              class="echart"
                            ></div>
                            <script>
                              document.addEventListener("DOMContentLoaded", () => {
                                echarts
                                  .init(document.querySelector("#verticalBarChart"))
                                  .setOption({
                                    title: {
                                      text: "World Population",
                                    },
                                    tooltip: {
                                      trigger: "axis",
                                      axisPointer: {
                                        type: "shadow",
                                      },
                                    },
                                    legend: {},
                                    grid: {
                                      left: "3%",
                                      right: "4%",
                                      bottom: "3%",
                                      containLabel: true,
                                    },
                                    xAxis: {
                                      type: "value",
                                      boundaryGap: [0, 0.01],
                                    },
                                    yAxis: {
                                      type: "category",
                                      data: [
                                        "Brazil",
                                        "Indonesia",
                                        "USA",
                                        "India",
                                        "China",
                                        "World",
                                      ],
                                    },
                                    series: [
                                      {
                                        name: "2011",
                                        type: "bar",
                                        data: [
                                          18203, 23489, 29034, 104970, 131744, 630230,
                                        ],
                                      },
                                      {
                                        name: "2012",
                                        type: "bar",
                                        data: [
                                          19325, 23438, 31000, 121594, 134141, 681807,
                                        ],
                                      },
                                    ],
                                  });
                              });
                            </script>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <!-- End: 1 Row 4 Columns --><!-- Start: 1 Row 2 Columns -->
        
        <!-- End: 1 Row 2 Columns -->
      </section>
    </main>
    <!-- Start: 1 Row 3 Columns -->
    <div class="container"></div>
    <!-- End: 1 Row 3 Columns -->
    <footer id="footer" class="footer">
      <div class="copyright">
        <span> © Copyright </span><strong><span>NiceAdmin</span></strong
        ><span>. All Rights Reserved </span>
      </div>
    </footer>
    <a
      class="d-flex justify-content-center align-items-center back-to-top"
      href="#"
      ><i class="bi bi-arrow-up-short"></i
    ></a>
    <script>
      function seleccionarPaciente(row) {
        // Obtén el id del paciente desde el atributo data-id
        var pacienteId = row.getAttribute('data-id');
        
        // Aquí puedes agregar más lógica si necesitas otros datos de la fila
        var edad = row.cells[1].innerText;
        var sexo = row.cells[2].innerText;
        var imc = row.cells[3].innerText;
        var cintura = row.cells[4].innerText;
      
        // Por ejemplo, imprimir en la consola
        console.log("Paciente seleccionado:", pacienteId, edad, sexo, imc, cintura);
      
        // Si necesitas enviar esta información al servidor, puedes hacer una solicitud AJAX aquí
      }
    </script>
    <script src="{% static 'assets/bootstrap/js/bootstrap.min.js' %}"></script>
    <script src="{% static 'assets/js/script.min.js' %}"></script>
  </body>
</html>